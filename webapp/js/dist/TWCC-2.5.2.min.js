/*!  * TWCC - Version 2.5.2
 * The World Coordinate Converter
 * Author: Clément Ronzon - clem.rz@gmail.com
 * Build date: 2024-07-22 12:14:57
 * Copyright (c) 2024 
 * Released under the AGPL-3.0 license
 *
 * This file is part of TWCC.
 *
 * TWCC is free software: you can redistribute it and/or modify
 * it under the terms of the GNU Affero General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * TWCC is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU Affero General Public License for more details.
 *
 * You should have received a copy of the GNU Affero General Public License
 * along with TWCC.  If not, see <http://www.gnu.org/licenses/>.
 *
 * @copyright Copyright (c) 2010-2014 Clément Ronzon
 * @license http://www.gnu.org/licenses/agpl.txt
 */
function d(e){var t,r;if(this.length){if((t=this[0]).ownerDocument?r=t.ownerDocument:t=(r=t).documentElement,null==e)return r.cancelFullScreen||r.webkitCancelFullScreen||r.mozCancelFullScreen?(e=!!r.fullScreen||!!r.webkitIsFullScreen||!!r.mozFullScreen)&&(r.fullScreenElement||r.webkitCurrentFullScreenElement||r.mozFullScreenElement||e):null;e?(e=t.requestFullScreen||t.webkitRequestFullScreen||t.mozRequestFullScreen)&&e.call(t,Element.ALLOW_KEYBOARD_INPUT):(e=r.cancelFullScreen||r.webkitCancelFullScreen||r.mozCancelFullScreen)&&e.call(r)}return this}var e,f,g,cookieScripts=(!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.ClipboardJS=t():e.ClipboardJS=t()}(this,function(){return r=[function(e,t,r){var n;r=[e,r(7)],void 0!==(t="function"==typeof(n=function(e,t){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=function(e){return e&&e.__esModule?e:{default:e}}(t),i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),a=function(){function t(e){r(this,t),this.resolveOptions(e),this.initSelection()}return o(t,[{key:"resolveOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action=e.action,this.container=e.container,this.emitter=e.emitter,this.target=e.target,this.text=e.text,this.trigger=e.trigger,this.selectedText=""}},{key:"initSelection",value:function(){this.text?this.selectFake():this.target&&this.selectTarget()}},{key:"selectFake",value:function(){var e=this,t="rtl"==document.documentElement.getAttribute("dir");this.removeFake(),this.fakeHandlerCallback=function(){return e.removeFake()},this.fakeHandler=this.container.addEventListener("click",this.fakeHandlerCallback)||!0,this.fakeElem=document.createElement("textarea"),this.fakeElem.style.fontSize="12pt",this.fakeElem.style.border="0",this.fakeElem.style.padding="0",this.fakeElem.style.margin="0",this.fakeElem.style.position="absolute",this.fakeElem.style[t?"right":"left"]="-9999px";var r=window.pageYOffset||document.documentElement.scrollTop;this.fakeElem.style.top=r+"px",this.fakeElem.setAttribute("readonly",""),this.fakeElem.value=this.text,this.container.appendChild(this.fakeElem),this.selectedText=(0,n.default)(this.fakeElem),this.copyText()}},{key:"removeFake",value:function(){this.fakeHandler&&(this.container.removeEventListener("click",this.fakeHandlerCallback),this.fakeHandler=null,this.fakeHandlerCallback=null),this.fakeElem&&(this.container.removeChild(this.fakeElem),this.fakeElem=null)}},{key:"selectTarget",value:function(){this.selectedText=(0,n.default)(this.target),this.copyText()}},{key:"copyText",value:function(){var t=void 0;try{t=document.execCommand(this.action)}catch(e){t=!1}this.handleResult(t)}},{key:"handleResult",value:function(e){this.emitter.emit(e?"success":"error",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})}},{key:"clearSelection",value:function(){this.trigger&&this.trigger.focus(),window.getSelection().removeAllRanges()}},{key:"destroy",value:function(){this.removeFake()}},{key:"action",set:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"copy";if(this._action=e,"copy"!==this._action&&"cut"!==this._action)throw new Error('Invalid "action" value, use either "copy" or "cut"')},get:function(){return this._action}},{key:"target",set:function(e){if(void 0!==e){if(!e||"object"!==(void 0===e?"undefined":i(e))||1!==e.nodeType)throw new Error('Invalid "target" value, use a valid Element');if("copy"===this.action&&e.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if("cut"===this.action&&(e.hasAttribute("readonly")||e.hasAttribute("disabled")))throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes');this._target=e}},get:function(){return this._target}}]),t}();e.exports=a})?n.apply(t,r):n)&&(e.exports=t)},function(e,t,r){var l=r(6),c=r(5);e.exports=function(e,t,r){if(!e&&!t&&!r)throw new Error("Missing required arguments");if(!l.string(t))throw new TypeError("Second argument must be a String");if(!l.fn(r))throw new TypeError("Third argument must be a Function");if(l.node(e))return i=t,o=r,(n=e).addEventListener(i,o),{destroy:function(){n.removeEventListener(i,o)}};var n,i,o,a,s,u;if(l.nodeList(e))return a=e,s=t,u=r,Array.prototype.forEach.call(a,function(e){e.addEventListener(s,u)}),{destroy:function(){Array.prototype.forEach.call(a,function(e){e.removeEventListener(s,u)})}};if(l.string(e))return c(document.body,e,t,r);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}},function(e,t){function r(){}r.prototype={on:function(e,t,r){var n=this.e||(this.e={});return(n[e]||(n[e]=[])).push({fn:t,ctx:r}),this},once:function(e,t,r){function n(){i.off(e,n),t.apply(r,arguments)}var i=this;return n._=t,this.on(e,n,r)},emit:function(e){for(var t=[].slice.call(arguments,1),r=((this.e||(this.e={}))[e]||[]).slice(),n=0,i=r.length;n<i;n++)r[n].fn.apply(r[n].ctx,t);return this},off:function(e,t){var r=this.e||(this.e={}),n=r[e],i=[];if(n&&t)for(var o=0,a=n.length;o<a;o++)n[o].fn!==t&&n[o].fn._!==t&&i.push(n[o]);return i.length?r[e]=i:delete r[e],this}},e.exports=r},function(e,t,r){var n;r=[e,r(0),r(2),r(1)],void 0!==(t="function"==typeof(n=function(e,t,r,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e,t){var r="data-clipboard-"+e;if(t.hasAttribute(r))return t.getAttribute(r)}var l=i(t),c=i(r),f=i(n),h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),d=function(e){function n(e,t){o(this,n);var r=a(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return r.resolveOptions(t),r.listenClick(e),r}return s(n,e),p(n,[{key:"resolveOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action="function"==typeof e.action?e.action:this.defaultAction,this.target="function"==typeof e.target?e.target:this.defaultTarget,this.text="function"==typeof e.text?e.text:this.defaultText,this.container="object"===h(e.container)?e.container:document.body}},{key:"listenClick",value:function(e){var t=this;this.listener=(0,f.default)(e,"click",function(e){return t.onClick(e)})}},{key:"onClick",value:function(e){var t=e.delegateTarget||e.currentTarget;this.clipboardAction&&(this.clipboardAction=null),this.clipboardAction=new l.default({action:this.action(t),target:this.target(t),text:this.text(t),container:this.container,trigger:t,emitter:this})}},{key:"defaultAction",value:function(e){return u("action",e)}},{key:"defaultTarget",value:function(e){var t=u("target",e);if(t)return document.querySelector(t)}},{key:"defaultText",value:function(e){return u("text",e)}},{key:"destroy",value:function(){this.listener.destroy(),this.clipboardAction&&(this.clipboardAction.destroy(),this.clipboardAction=null)}}],[{key:"isSupported",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["copy","cut"],t="string"==typeof e?[e]:e,r=!!document.queryCommandSupported;return t.forEach(function(e){r=r&&!!document.queryCommandSupported(e)}),r}}]),n}(c.default);e.exports=d})?n.apply(t,r):n)&&(e.exports=t)},function(e,t){var r;"undefined"==typeof Element||Element.prototype.matches||((r=Element.prototype).matches=r.matchesSelector||r.mozMatchesSelector||r.msMatchesSelector||r.oMatchesSelector||r.webkitMatchesSelector),e.exports=function(e,t){for(;e&&9!==e.nodeType;){if("function"==typeof e.matches&&e.matches(t))return e;e=e.parentNode}}},function(e,t,r){function o(e,t,r,n,i){var o=function(t,r,e,n){return function(e){e.delegateTarget=a(e.target,r),e.delegateTarget&&n.call(t,e)}}.apply(this,arguments);return e.addEventListener(r,o,i),{destroy:function(){e.removeEventListener(r,o,i)}}}var a=r(4);e.exports=function(e,t,r,n,i){return"function"==typeof e.addEventListener?o.apply(null,arguments):"function"==typeof r?o.bind(null,document).apply(null,arguments):("string"==typeof e&&(e=document.querySelectorAll(e)),Array.prototype.map.call(e,function(e){return o(e,t,r,n,i)}))}},function(e,r){r.node=function(e){return void 0!==e&&e instanceof HTMLElement&&1===e.nodeType},r.nodeList=function(e){var t=Object.prototype.toString.call(e);return void 0!==e&&("[object NodeList]"===t||"[object HTMLCollection]"===t)&&"length"in e&&(0===e.length||r.node(e[0]))},r.string=function(e){return"string"==typeof e||e instanceof String},r.fn=function(e){return"[object Function]"===Object.prototype.toString.call(e)}},function(e,t){e.exports=function(e){var t,r;return e="SELECT"===e.nodeName?(e.focus(),e.value):"INPUT"===e.nodeName||"TEXTAREA"===e.nodeName?((t=e.hasAttribute("readonly"))||e.setAttribute("readonly",""),e.select(),e.setSelectionRange(0,e.value.length),t||e.removeAttribute("readonly"),e.value):(e.hasAttribute("contenteditable")&&e.focus(),t=window.getSelection(),(r=document.createRange()).selectNodeContents(e),t.removeAllRanges(),t.addRange(r),t.toString())}}],i={},n.m=r,n.c=i,n.i=function(e){return e},n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=3);function n(e){var t;return(i[e]||(t=i[e]={i:e,l:!1,exports:{}},r[e].call(t.exports,t,t.exports,n),t.l=!0,t)).exports}var r,i}),!function(p){"use strict";var t,r;void 0===window.TWCCHistory&&(r=function(e){var t,r,n=p.extend(!0,{},e),i=!0,o=n.system.historyCookie,a=0,s=n.system.historyLimit;function u(e){t=e}function l(){return t.length-1}function c(e){r=Math.min(Math.abs(e),s),n.utils.trigger(p("body"),"history.indexchanged",{currentIndex:e,maxIndex:l(),currentValue:f()})}function f(){return t[r]}function h(e){return c(e),f()}return t=n.utils.getCookieContent(o),p.isEmptyObject(t)&&(t=[]),c(l()),{toggle:function(e){i=e},isEnabled:function(){return i},add:function(e){i&&e&&(e.wgs84=function e(t){var r,n;if(null===t||"object"!=typeof t)return t;for(n in r=t.constructor(),t)t.hasOwnProperty(n)&&(r[n]=e(t[n]));return r}(e.wgs84),JSON.stringify(e)!==JSON.stringify(f()))&&(u(t.slice(a,r+1)),t.push(e),u(t.slice(-s)),c(l()),n.utils.setCookieContent(o,t))},moveToPrevious:function(){return a<r?h(r-1):f()},moveToNext:function(){return r<l()?h(r+1):f()},getCurrentValue:f}},window.TWCCHistory={getInstance:function(e){return t=t||r(e)}})}(jQuery),!function(e,t){"use strict";function n(e){return e=e.toString().replace(/,/gi,"."),isNaN(e)&&(e=0),parseFloat(e)}e.extend(t,{math:{getRandomInteger:function(e,t){return t-=e,t=Math.random()*t+e,Math.round(t)},round:function(e,t){var r;return t=void 0===t?0:t,""===(r=e.toString())||"NaN"==r?"":Math.round(n(e)*Math.pow(10,n(t)))/Math.pow(10,n(t))},parseFloat:n}})}(jQuery,App),!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e:e(jQuery)}(function(o){function a(e){return e&&e.constructor===Number?e+"px":e}o.fn.bgiframe=function(n){n=o.extend({top:"auto",left:"auto",width:"auto",height:"auto",opacity:!0,src:"javascript:false;",conditional:/MSIE 6\.0/.test(navigator.userAgent)},n),o.isFunction(n.conditional)||(e=n.conditional,n.conditional=function(){return e});var e,i=o('<iframe class="bgiframe"frameborder="0"tabindex="-1"src="'+n.src+'"style="display:block;position:absolute;z-index:-1;"/>');return this.each(function(){var e,t,r=o(this);!1!==n.conditional(this)&&((t=0===(e=r.children("iframe.bgiframe")).length?i.clone():e).css({top:"auto"==n.top?-1*(parseInt(r.css("borderTopWidth"),10)||0)+"px":a(n.top),left:"auto"==n.left?-1*(parseInt(r.css("borderLeftWidth"),10)||0)+"px":a(n.left),width:"auto"==n.width?this.offsetWidth+"px":a(n.width),height:"auto"==n.height?this.offsetHeight+"px":a(n.height),opacity:!0===n.opacity?0:void 0}),0===e.length)&&r.prepend(t)})},o.fn.bgIframe=o.fn.bgiframe}),jQuery.bt={version:"0.9.5-rc1"},!function($){jQuery.fn.bt=function(content,options){var contentSelect,contentSelect;return"string"!=typeof content?(contentSelect=!0,options=content,content=!1):contentSelect=!1,jQuery.fn.hoverIntent&&"hover"==jQuery.bt.defaults.trigger&&(jQuery.bt.defaults.trigger="hoverIntent"),this.each(function(index){var opts=jQuery.extend(!1,jQuery.bt.defaults,jQuery.bt.options,options),ajaxTimeout=(opts.spikeLength=numb(opts.spikeLength),opts.spikeGirth=numb(opts.spikeGirth),opts.overlap=numb(opts.overlap),!1),hoverOpts,refresh=(opts.killTitle&&$(this).find("[title]").addBack().each(function(){$(this).prop("bt-xTitle")||$(this).prop("bt-xTitle",$(this).prop("title")).prop("title","")}),"string"==typeof opts.tpropigger&&(opts.trigger=[opts.trigger]),"hoverIntent"==opts.trigger[0]?(hoverOpts=jQuery.extend(opts.hoverIntentOpts,{over:function(){this.btOn()},out:function(){this.btOff()}}),$(this).hoverIntent(hoverOpts)):"hover"==opts.trigger[0]?$(this).hover(function(){this.btOn()},function(){this.btOff()}):"now"==opts.trigger[0]?$(this).hasClass("bt-active")?this.btOff():this.btOn():"none"!=opts.trigger[0]&&(1<opts.trigger.length&&opts.trigger[0]!=opts.trigger[1]?$(this).bind(opts.trigger[0],function(){this.btOn()}).bind(opts.trigger[1],function(){this.btOff()}):$(this).bind(opts.trigger[0],function(){$(this).hasClass("bt-active")?this.btOff():this.btOn()})),this.btOn=function(){var url,url,off,selector,cacheData,target,ajaxOpts,shadowMarginX=("object"==typeof $(this).data("bt-box")&&this.btOff(),opts.preBuild.apply(this),$(jQuery.bt.vars.closeWhenOpenStack).btOff(),$(this).addClass("bt-active "+opts.activeClass),contentSelect&&null==opts.ajaxPath&&(opts.killTitle&&$(this).prop("title",$(this).prop("bt-xTitle")),content=$.isFunction(opts.contentSelector)?opts.contentSelector.apply(this):eval(opts.contentSelector),opts.killTitle)&&$(this).prop("title",""),null!=opts.ajaxPath&&0==content&&("object"==typeof opts.ajaxPath?(url=eval(opts.ajaxPath[0]),url+=opts.ajaxPath[1]?" "+opts.ajaxPath[1]:""):url=opts.ajaxPath,off=url.indexOf(" "),0<=off&&(selector=url.slice(off,url.length),url=url.slice(0,off)),cacheData=opts.ajaxCache?$(document.body).data("btCache-"+url.replace(/\./g,"")):null,content="string"==typeof cacheData?selector?$("<div/>").append(cacheData.replace(/<script(.|\s)*?\/script>/g,"")).find(selector):cacheData:(target=this,ajaxOpts=jQuery.extend(!1,{type:opts.ajaxType,data:opts.ajaxData,cache:opts.ajaxCache,url:url,complete:function(e,t){content="success"==t||"notmodified"==t?(opts.ajaxCache&&$(document.body).data("btCache-"+url.replace(/\./g,""),e.responseText),ajaxTimeout=!1,selector?$("<div/>").append(e.responseText.replace(/<script(.|\s)*?\/script>/g,"")).find(selector):e.responseText):("timeout"==t&&(ajaxTimeout=!0),opts.ajaxError.replace(/%error/g,e.statusText)),$(target).hasClass("bt-active")&&target.btOn()}},opts.ajaxOpts),jQuery.ajax(ajaxOpts),opts.ajaxLoading)),0),shadowMarginY=0,shadowShiftX=0,shadowShiftY=0,offsetParent,offsetParentPos,pos,top,left,offsetParent,pos,top,left,width=(opts.shadow&&!shadowSupport()&&(opts.shadow=!1,jQuery.extend(opts,opts.noShadowOpts)),opts.shadow&&(shadowMarginX=opts.shadowBlur>Math.abs(opts.shadowOffsetX)?2*opts.shadowBlur:opts.shadowBlur+Math.abs(opts.shadowOffsetX),shadowShiftX=0<opts.shadowBlur-opts.shadowOffsetX?opts.shadowBlur-opts.shadowOffsetX:0,shadowMarginY=opts.shadowBlur>Math.abs(opts.shadowOffsetY)?2*opts.shadowBlur:opts.shadowBlur+Math.abs(opts.shadowOffsetY),shadowShiftY=0<opts.shadowBlur-opts.shadowOffsetY?opts.shadowBlur-opts.shadowOffsetY:0),left=opts.offsetParent?(offsetParent=$(opts.offsetParent),offsetParentPos=offsetParent.offset(),pos=$(this).offset(),top=numb(pos.top)-numb(offsetParentPos.top)+numb($(this).css("margin-top"))-shadowShiftY,numb(pos.left)-numb(offsetParentPos.left)+numb($(this).css("margin-left"))-shadowShiftX):(offsetParent=("absolute"==$(this).css("position")?$(this).parents().eq(0):$(this)).offsetParent(),pos=$(this).btPosition(),top=numb(pos.top)+numb($(this).css("margin-top"))-shadowShiftY,numb(pos.left)+numb($(this).css("margin-left"))-shadowShiftX),$(this).btOuterWidth()),height=$(this).outerHeight();if("object"==typeof content){if(null==content)return;var original=content,clone=$(original).clone(!0).show(),origClones=$(original).data("bt-clones")||[];origClones.push(clone),$(original).data("bt-clones",origClones),$(clone).data("bt-orig",original),$(this).data("bt-content-orig",{original:original,clone:clone}),content=clone}if("null"!=typeof content&&""!=content){var $text=$('<div class="bt-content"></div>').append(content).css({padding:opts.padding,position:"absolute",width:opts.shrinkToFit?"auto":opts.width,zIndex:opts.textzIndex,left:shadowShiftX,top:shadowShiftY}).css(opts.cssStyles),$box=$('<div class="bt-wrapper"></div>').append($text).addClass(opts.cssClass).css({position:"absolute",width:opts.width,zIndex:opts.wrapperzIndex,visibility:"hidden"}).appendTo(offsetParent),scrollTop=(jQuery.fn.bgiframe&&($text.bgiframe(),$box.bgiframe()),$(this).data("bt-box",$box),numb($(document).scrollTop())),scrollLeft=numb($(document).scrollLeft()),docWidth=numb($(window).width()),docHeight=numb($(window).height()),winRight=scrollLeft+docWidth,winBottom=scrollTop+docHeight,space=new Object,thisOffset=$(this).offset(),textOutHeight=(space.top=thisOffset.top-scrollTop,space.bottom=docHeight-(thisOffset+height-scrollTop),space.left=thisOffset.left-scrollLeft,space.right=docWidth-(thisOffset.left+width-scrollLeft),numb($text.outerHeight())),textOutWidth=numb($text.btOuterWidth());if(opts.positions.constructor==String&&(opts.positions=opts.positions.replace(/ /,"").split(",")),"most"==opts.positions[0]){var position="top",pig;for(pig in space)position=space[pig]>space[position]?pig:position}else for(var x in opts.positions){var position=opts.positions[x];if(("left"==position||"right"==position)&&space[position]>textOutWidth+opts.spikeLength)break;if(("top"==position||"bottom"==position)&&space[position]>textOutHeight+opts.spikeLength)break}var horiz=left+.5*(width-textOutWidth),vert=top+.5*(height-textOutHeight),points=new Array,textTop,textLeft,textRight,textBottom,textTopSpace,textBottomSpace,textLeftSpace,textRightSpace,crossPoint,textCenter,spikePoint;switch(position){case"top":$text.css("margin-bottom",opts.spikeLength+"px"),$box.css({top:top-$text.outerHeight(!0)+opts.overlap,left:horiz});var textRightSpace=winRight-opts.windowMargin-($text.offset().left+$text.btOuterWidth(!0)),xShift=shadowShiftX;textRightSpace<0&&($box.css("left",numb($box.css("left"))+textRightSpace+"px"),xShift-=textRightSpace),textLeftSpace=$text.offset().left+numb($text.css("margin-left"))-(scrollLeft+opts.windowMargin),textLeftSpace<0&&($box.css("left",numb($box.css("left"))-textLeftSpace+"px"),xShift+=textLeftSpace),textTop=$text.btPosition().top+numb($text.css("margin-top")),textLeft=$text.btPosition().left+numb($text.css("margin-left")),textRight=textLeft+$text.btOuterWidth(),textBottom=textTop+$text.outerHeight(),textCenter={x:textLeft+$text.btOuterWidth()*opts.centerPointX,y:textTop+$text.outerHeight()*opts.centerPointY},points[points.length]=spikePoint={y:textBottom+opts.spikeLength,x:.5*(textRight-textLeft)+xShift,type:"spike"},crossPoint=findIntersectX(spikePoint.x,spikePoint.y,textCenter.x,textCenter.y,textBottom),crossPoint.x=crossPoint.x<textLeft+opts.spikeGirth/2+opts.cornerRadius?textLeft+opts.spikeGirth/2+opts.cornerRadius:crossPoint.x,crossPoint.x=crossPoint.x>textRight-opts.spikeGirth/2-opts.cornerRadius?textRight-opts.spikeGirth/2-opts.CornerRadius:crossPoint.x,points[points.length]={x:crossPoint.x-opts.spikeGirth/2,y:textBottom,type:"join"},points[points.length]={x:textLeft,y:textBottom,type:"corner"},points[points.length]={x:textLeft,y:textTop,type:"corner"},points[points.length]={x:textRight,y:textTop,type:"corner"},points[points.length]={x:textRight,y:textBottom,type:"corner"},points[points.length]={x:crossPoint.x+opts.spikeGirth/2,y:textBottom,type:"join"},points[points.length]=spikePoint;break;case"left":$text.css("margin-right",opts.spikeLength+"px"),$box.css({top:vert+"px",left:left-$text.btOuterWidth(!0)+opts.overlap+"px"});var textBottomSpace=winBottom-opts.windowMargin-($text.offset().top+$text.outerHeight(!0)),yShift=shadowShiftY;textBottomSpace<0&&($box.css("top",numb($box.css("top"))+textBottomSpace+"px"),yShift-=textBottomSpace),textTopSpace=$text.offset().top+numb($text.css("margin-top"))-(scrollTop+opts.windowMargin),textTopSpace<0&&($box.css("top",numb($box.css("top"))-textTopSpace+"px"),yShift+=textTopSpace),textTop=$text.btPosition().top+numb($text.css("margin-top")),textLeft=$text.btPosition().left+numb($text.css("margin-left")),textRight=textLeft+$text.btOuterWidth(),textBottom=textTop+$text.outerHeight(),textCenter={x:textLeft+$text.btOuterWidth()*opts.centerPointX,y:textTop+$text.outerHeight()*opts.centerPointY},points[points.length]=spikePoint={x:textRight+opts.spikeLength,y:.5*(textBottom-textTop)+yShift,type:"spike"},crossPoint=findIntersectY(spikePoint.x,spikePoint.y,textCenter.x,textCenter.y,textRight),crossPoint.y=crossPoint.y<textTop+opts.spikeGirth/2+opts.cornerRadius?textTop+opts.spikeGirth/2+opts.cornerRadius:crossPoint.y,crossPoint.y=crossPoint.y>textBottom-opts.spikeGirth/2-opts.cornerRadius?textBottom-opts.spikeGirth/2-opts.cornerRadius:crossPoint.y,points[points.length]={x:textRight,y:crossPoint.y+opts.spikeGirth/2,type:"join"},points[points.length]={x:textRight,y:textBottom,type:"corner"},points[points.length]={x:textLeft,y:textBottom,type:"corner"},points[points.length]={x:textLeft,y:textTop,type:"corner"},points[points.length]={x:textRight,y:textTop,type:"corner"},points[points.length]={x:textRight,y:crossPoint.y-opts.spikeGirth/2,type:"join"},points[points.length]=spikePoint;break;case"bottom":$text.css("margin-top",opts.spikeLength+"px"),$box.css({top:top+height-opts.overlap,left:horiz}),textRightSpace=winRight-opts.windowMargin-($text.offset().left+$text.btOuterWidth(!0));var xShift=shadowShiftX;textRightSpace<0&&($box.css("left",numb($box.css("left"))+textRightSpace+"px"),xShift-=textRightSpace),textLeftSpace=$text.offset().left+numb($text.css("margin-left"))-(scrollLeft+opts.windowMargin),textLeftSpace<0&&($box.css("left",numb($box.css("left"))-textLeftSpace+"px"),xShift+=textLeftSpace),textTop=$text.btPosition().top+numb($text.css("margin-top")),textLeft=$text.btPosition().left+numb($text.css("margin-left")),textRight=textLeft+$text.btOuterWidth(),textBottom=textTop+$text.outerHeight(),textCenter={x:textLeft+$text.btOuterWidth()*opts.centerPointX,y:textTop+$text.outerHeight()*opts.centerPointY},points[points.length]=spikePoint={x:.5*(textRight-textLeft)+xShift,y:shadowShiftY,type:"spike"},crossPoint=findIntersectX(spikePoint.x,spikePoint.y,textCenter.x,textCenter.y,textTop),crossPoint.x=crossPoint.x<textLeft+opts.spikeGirth/2+opts.cornerRadius?textLeft+opts.spikeGirth/2+opts.cornerRadius:crossPoint.x,crossPoint.x=crossPoint.x>textRight-opts.spikeGirth/2-opts.cornerRadius?textRight-opts.spikeGirth/2-opts.cornerRadius:crossPoint.x,points[points.length]={x:crossPoint.x+opts.spikeGirth/2,y:textTop,type:"join"},points[points.length]={x:textRight,y:textTop,type:"corner"},points[points.length]={x:textRight,y:textBottom,type:"corner"},points[points.length]={x:textLeft,y:textBottom,type:"corner"},points[points.length]={x:textLeft,y:textTop,type:"corner"},points[points.length]={x:crossPoint.x-opts.spikeGirth/2,y:textTop,type:"join"},points[points.length]=spikePoint;break;case"right":$text.css("margin-left",opts.spikeLength+"px"),$box.css({top:vert+"px",left:left+width-opts.overlap+"px"}),textBottomSpace=winBottom-opts.windowMargin-($text.offset().top+$text.outerHeight(!0));var yShift=shadowShiftY;textBottomSpace<0&&($box.css("top",numb($box.css("top"))+textBottomSpace+"px"),yShift-=textBottomSpace),textTopSpace=$text.offset().top+numb($text.css("margin-top"))-(scrollTop+opts.windowMargin),textTopSpace<0&&($box.css("top",numb($box.css("top"))-textTopSpace+"px"),yShift+=textTopSpace),textTop=$text.btPosition().top+numb($text.css("margin-top")),textLeft=$text.btPosition().left+numb($text.css("margin-left")),textRight=textLeft+$text.btOuterWidth(),textBottom=textTop+$text.outerHeight(),textCenter={x:textLeft+$text.btOuterWidth()*opts.centerPointX,y:textTop+$text.outerHeight()*opts.centerPointY},points[points.length]=spikePoint={x:shadowShiftX,y:.5*(textBottom-textTop)+yShift,type:"spike"},crossPoint=findIntersectY(spikePoint.x,spikePoint.y,textCenter.x,textCenter.y,textLeft),crossPoint.y=crossPoint.y<textTop+opts.spikeGirth/2+opts.cornerRadius?textTop+opts.spikeGirth/2+opts.cornerRadius:crossPoint.y,crossPoint.y=crossPoint.y>textBottom-opts.spikeGirth/2-opts.cornerRadius?textBottom-opts.spikeGirth/2-opts.cornerRadius:crossPoint.y,points[points.length]={x:textLeft,y:crossPoint.y-opts.spikeGirth/2,type:"join"},points[points.length]={x:textLeft,y:textTop,type:"corner"},points[points.length]={x:textRight,y:textTop,type:"corner"},points[points.length]={x:textRight,y:textBottom,type:"corner"},points[points.length]={x:textLeft,y:textBottom,type:"corner"},points[points.length]={x:textLeft,y:crossPoint.y+opts.spikeGirth/2,type:"join"},points[points.length]=spikePoint}var canvas=document.createElement("canvas");if($(canvas).prop("width",numb($text.btOuterWidth(!0))+2*opts.strokeWidth+shadowMarginX).prop("height",numb($text.outerHeight(!0))+2*opts.strokeWidth+shadowMarginY).appendTo($box).css({position:"absolute",zIndex:opts.boxzIndex}),"undefined"!=typeof G_vmlCanvasManager&&(canvas=G_vmlCanvasManager.initElement(canvas)),0<opts.cornerRadius){for(var newPoints=new Array,newPoint,i=0;i<points.length;i++)"corner"==points[i].type?(newPoint=betweenPoint(points[i],points[(i-1)%points.length],opts.cornerRadius),newPoint.type="arcStart",newPoints[newPoints.length]=newPoint,newPoints[newPoints.length]=points[i],newPoint=betweenPoint(points[i],points[(i+1)%points.length],opts.cornerRadius),newPoint.type="arcEnd",newPoints[newPoints.length]=newPoint):newPoints[newPoints.length]=points[i];points=newPoints}var ctx=canvas.getContext("2d"),overlay;if(opts.shadow&&!0!==opts.shadowOverlap){var shadowOverlap=numb(opts.shadowOverlap);switch(position){case"top":0<opts.shadowOffsetX+opts.shadowBlur-shadowOverlap&&$box.css("top",numb($box.css("top"))-(opts.shadowOffsetX+opts.shadowBlur-shadowOverlap));break;case"right":0<shadowShiftX-shadowOverlap&&$box.css("left",numb($box.css("left"))+shadowShiftX-shadowOverlap);break;case"bottom":0<shadowShiftY-shadowOverlap&&$box.css("top",numb($box.css("top"))+shadowShiftY-shadowOverlap);break;case"left":0<opts.shadowOffsetY+opts.shadowBlur-shadowOverlap&&$box.css("left",numb($box.css("left"))-(opts.shadowOffsetY+opts.shadowBlur-shadowOverlap))}}drawIt.apply(ctx,[points],opts.strokeWidth),ctx.fillStyle=opts.fill,opts.shadow&&(ctx.shadowOffsetX=opts.shadowOffsetX,ctx.shadowOffsetY=opts.shadowOffsetY,ctx.shadowBlur=opts.shadowBlur,ctx.shadowColor=opts.shadowColor),ctx.closePath(),ctx.fill(),0<opts.strokeWidth&&(ctx.shadowColor="rgba(0, 0, 0, 0)",ctx.lineWidth=opts.strokeWidth,ctx.strokeStyle=opts.strokeStyle,ctx.beginPath(),drawIt.apply(ctx,[points],opts.strokeWidth),ctx.closePath(),ctx.stroke()),opts.preShow.apply(this,[$box[0]]),$box.css({display:"none",visibility:"visible"}),opts.showTip.apply(this,[$box[0]]),opts.overlay&&(overlay=$('<div class="bt-overlay"></div>').css({position:"absolute",backgroundColor:"blue",top:top,left:left,width:width,height:height,opacity:".2"}).appendTo(offsetParent),$(this).data("overlay",overlay)),(null!=opts.ajaxPath&&0==opts.ajaxCache||ajaxTimeout)&&(content=!1),opts.clickAnywhereToClose&&(jQuery.bt.vars.clickAnywhereStack.push(this),$(document).click(jQuery.bt.docClick)),opts.closeWhenOthersOpen&&jQuery.bt.vars.closeWhenOpenStack.push(this),opts.postShow.apply(this,[$box[0]])}},this.btOff=function(){var n,e=$(this).data("bt-box");void 0!==e&&(opts.preHide.apply(this,[e]),(n=this).btCleanup=function(){var e=$(n).data("bt-box"),t=$(n).data("bt-content-orig"),r=$(n).data("bt-overlay");"object"==typeof e&&($(e).remove(),$(n).removeData("bt-box")),"object"==typeof t&&(e=$(t.original).data("bt-clones"),$(t).data("bt-clones",arrayRemove(e,t.clone))),"object"==typeof r&&($(r).remove(),$(n).removeData("bt-overlay")),jQuery.bt.vars.clickAnywhereStack=arrayRemove(jQuery.bt.vars.clickAnywhereStack,n),jQuery.bt.vars.closeWhenOpenStack=arrayRemove(jQuery.bt.vars.closeWhenOpenStack,n),$(n).removeClass("bt-active "+opts.activeClass),opts.postHide.apply(n)},opts.hideTip.apply(this,[e,n.btCleanup]))},this.btRefresh=function(){this.btOff(),this.btOn()})});function drawIt(e,t){for(this.moveTo(e[0].x,e[0].y),i=1;i<e.length;i++)"arcStart"==e[i-1].type?(this.quadraticCurveTo(round5(e[i].x,t),round5(e[i].y,t),round5(e[(i+1)%e.length].x,t),round5(e[(i+1)%e.length].y,t)),i++):this.lineTo(round5(e[i].x,t),round5(e[i].y,t))}function round5(e,t){return(t=numb(t))%2?e:Math.round(e-.5)+.5}function numb(e){return parseInt(e)||0}function arrayRemove(e,t){var r,n=new Array;for(r in e)e[r]!=t&&n.push(e[r]);return n}function canvasSupport(){try{document.createElement("canvas").getContext("2d")}catch(e){document.createElement("canvas").getContext}}function shadowSupport(){try{var e=navigator.userAgent.toLowerCase();if(/webkit/.test(e))return 1;if(/gecko|mozilla/.test(e)&&3.1<=parseFloat(e.match(/firefox\/(\d+(?:\.\d+)+)/)[1]))return 1}catch(e){}}function betweenPoint(e,t,r){var n;return e.x==t.x?(n=e.y<t.y?e.y+r:e.y-r,{x:e.x,y:n}):e.y==t.y?{x:e.x<t.x?e.x+r:e.x-r,y:e.y}:void 0}function centerPoint(e,t,r){(t.x==e.x?r:e).x,(t.y==e.y?r:e).y,e.x,r.x,e.y>r.y&&Math.PI,Math.PI}function findIntersect(e,t,r,n,i,o,a,s){var u,l;return i==a?findIntersectY(e,t,r,n,i):o==s?findIntersectX(e,t,r,n,o):void(l=(o-s)/(i-a),u=(t-n)/(e-r))}function findIntersectY(e,t,r,n,i){return t==n?{x:i,y:t}:{x:i,y:(n=(t-n)/(e-r))*i+(t-n*e)}}function findIntersectX(e,t,r,n,i){return e==r?{x:e,y:i}:{x:(i-(t-(t=(t-n)/(e-r))*e))/t,y:i}}},jQuery.fn.btPosition=function(){function e(e,t){return e[0]&&parseInt(jQuery.css(e[0],t,!0),10)||0}var t,r,n;return this[0]&&(t=this.offsetParent(),r=this.offset(),n=/^body|html$/i.test(t[0].tagName)?{top:0,left:0}:t.offset(),r.top-=e(this,"marginTop"),r.left-=e(this,"marginLeft"),n.top+=e(t,"borderTopWidth"),n.left+=e(t,"borderLeftWidth"),t={top:r.top-n.top,left:r.left-n.left}),t},jQuery.fn.btOuterWidth=function(e){function t(e,t){return e[0]&&parseInt(jQuery.css(e[0],t,!0),10)||0}return this.innerWidth()+t(this,"borderLeftWidth")+t(this,"borderRightWidth")+(e?t(this,"marginLeft")+t(this,"marginRight"):0)},jQuery.fn.btOn=function(){return this.each(function(e){jQuery.isFunction(this.btOn)&&this.btOn()})},jQuery.fn.btOff=function(){return this.each(function(e){jQuery.isFunction(this.btOff)&&this.btOff()})},jQuery.bt.vars={clickAnywhereStack:[],closeWhenOpenStack:[]},jQuery.bt.docClick=function(e){e=e||window.event,!$(e.target).parents().addBack().filter(".bt-wrapper, .bt-active").length&&jQuery.bt.vars.clickAnywhereStack.length&&($(jQuery.bt.vars.clickAnywhereStack).btOff(),$(document).unbind("click",jQuery.bt.docClick))},jQuery.bt.defaults={trigger:"hover",clickAnywhereToClose:!0,closeWhenOthersOpen:!1,shrinkToFit:!1,width:"200px",padding:"10px",spikeGirth:10,spikeLength:15,overlap:0,overlay:!1,killTitle:!0,textzIndex:9999,boxzIndex:9998,wrapperzIndex:9997,offsetParent:null,positions:["most"],fill:"rgb(255, 255, 102)",windowMargin:10,strokeWidth:1,strokeStyle:"#000",cornerRadius:5,centerPointX:.5,centerPointY:.5,shadow:!1,shadowOffsetX:2,shadowOffsetY:2,shadowBlur:3,shadowColor:"#000",shadowOverlap:!1,noShadowOpts:{strokeStyle:"#999"},cssClass:"",cssStyles:{},activeClass:"bt-active",contentSelector:"$(this).prop('title')",ajaxPath:null,ajaxError:"<strong>ERROR:</strong> <em>%error</em>",ajaxLoading:"<blink>Loading...</blink>",ajaxData:{},ajaxType:"GET",ajaxCache:!0,ajaxOpts:{},preBuild:function(){},preShow:function(e){},showTip:function(e){$(e).show()},postShow:function(e){},preHide:function(e){},hideTip:function(e,t){$(e).hide(),t()},postHide:function(){},hoverIntentOpts:{interval:300,timeout:500}},jQuery.bt.options={}}(jQuery),!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(w){function n(e,t){var r,n,i,o=e.nodeName.toLowerCase();return"area"===o?(n=(r=e.parentNode).name,!(!e.href||!n||"map"!==r.nodeName.toLowerCase()||!(i=w("img[usemap='#"+n+"']")[0]))&&a(i)):(/input|select|textarea|button|object/.test(o)?!e.disabled:"a"===o&&e.href||t)&&a(e)}function a(e){return w.expr.filters.visible(e)&&!w(e).parents().addBack().filter(function(){return"hidden"===w.css(this,"visibility")}).length}function e(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},w.extend(this._defaults,this.regional[""]),this.regional.en=w.extend(!0,{},this.regional[""]),this.regional["en-US"]=w.extend(!0,{},this.regional.en),this.dpDiv=r(w("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function r(e){var t="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return e.delegate(t,"mouseout",function(){w(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&w(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&w(this).removeClass("ui-datepicker-next-hover")}).delegate(t,"mouseover",o)}function o(){w.datepicker._isDisabledDatepicker((A.inline?A.dpDiv.parent():A.input)[0])||(w(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),w(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&w(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&w(this).addClass("ui-datepicker-next-hover"))}function u(e,t){for(var r in w.extend(e,t),t)null==t[r]&&(e[r]=t[r])}function t(t){return function(){var e=this.element.val();t.apply(this,arguments),this._refresh(),e!==this.element.val()&&this._trigger("change")}}w.ui=w.ui||{},w.extend(w.ui,{version:"1.11.2",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),w.fn.extend({scrollParent:function(e){var t=this.css("position"),r="absolute"===t,n=e?/(auto|scroll|hidden)/:/(auto|scroll)/,e=this.parents().filter(function(){var e=w(this);return(!r||"static"!==e.css("position"))&&n.test(e.css("overflow")+e.css("overflow-y")+e.css("overflow-x"))}).eq(0);return"fixed"!==t&&e.length?e:w(this[0].ownerDocument||document)},uniqueId:(L=0,function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++L)})}),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&w(this).removeAttr("id")})}}),w.extend(w.expr[":"],{data:w.expr.createPseudo?w.expr.createPseudo(function(t){return function(e){return!!w.data(e,t)}}):function(e,t,r){return!!w.data(e,r[3])},focusable:function(e){return n(e,!isNaN(w.attr(e,"tabindex")))},tabbable:function(e){var t=w.attr(e,"tabindex"),r=isNaN(t);return(r||0<=t)&&n(e,!r)}}),w("<a>").outerWidth(1).jquery||w.each(["Width","Height"],function(e,r){function n(e,t,r,n){return w.each(i,function(){t-=parseFloat(w.css(e,"padding"+this))||0,r&&(t-=parseFloat(w.css(e,"border"+this+"Width"))||0),n&&(t-=parseFloat(w.css(e,"margin"+this))||0)}),t}var i="Width"===r?["Left","Right"]:["Top","Bottom"],o=r.toLowerCase(),a={innerWidth:w.fn.innerWidth,innerHeight:w.fn.innerHeight,outerWidth:w.fn.outerWidth,outerHeight:w.fn.outerHeight};w.fn["inner"+r]=function(e){return void 0===e?a["inner"+r].call(this):this.each(function(){w(this).css(o,n(this,e)+"px")})},w.fn["outer"+r]=function(e,t){return"number"!=typeof e?a["outer"+r].call(this,e):this.each(function(){w(this).css(o,n(this,e,!0,t)+"px")})}}),w.fn.addBack||(w.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),w("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(w.fn.removeData=(s=w.fn.removeData,function(e){return arguments.length?s.call(this,w.camelCase(e)):s.call(this)})),w.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),w.fn.extend({focus:(D=w.fn.focus,function(t,r){return"number"==typeof t?this.each(function(){var e=this;setTimeout(function(){w(e).focus(),r&&r.call(e)},t)}):D.apply(this,arguments)}),disableSelection:(i="onselectstart"in document.createElement("div")?"selectstart":"mousedown",function(){return this.bind(i+".ui-disableSelection",function(e){e.preventDefault()})}),enableSelection:function(){return this.unbind(".ui-disableSelection")},zIndex:function(e){if(void 0!==e)return this.css("zIndex",e);if(this.length)for(var t,r=w(this[0]);r.length&&r[0]!==document;){if(("absolute"===(t=r.css("position"))||"relative"===t||"fixed"===t)&&(t=parseInt(r.css("zIndex"),10),!isNaN(t))&&0!==t)return t;r=r.parent()}return 0}}),w.ui.plugin={add:function(e,t,r){var n,i=w.ui[e].prototype;for(n in r)i.plugins[n]=i.plugins[n]||[],i.plugins[n].push([t,r[n]])},call:function(e,t,r,n){var i,o=e.plugins[t];if(o&&(n||e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType))for(i=0;o.length>i;i++)e.options[o[i][0]]&&o[i][1].apply(e.element,r)}};var i,D,s,L,Q,F=0,N=Array.prototype.slice,l=(w.cleanData=(Q=w.cleanData,function(e){for(var t,r,n=0;null!=(r=e[n]);n++)try{(t=w._data(r,"events"))&&t.remove&&w(r).triggerHandler("remove")}catch(e){}Q(e)}),w.widget=function(e,r,t){var n,i,o,a,s={},u=e.split(".")[0];return e=e.split(".")[1],n=u+"-"+e,t||(t=r,r=w.Widget),w.expr[":"][n.toLowerCase()]=function(e){return!!w.data(e,n)},w[u]=w[u]||{},i=w[u][e],o=w[u][e]=function(e,t){return this._createWidget?void(arguments.length&&this._createWidget(e,t)):new o(e,t)},w.extend(o,i,{version:t.version,_proto:w.extend({},t),_childConstructors:[]}),(a=new r).options=w.widget.extend({},a.options),w.each(t,function(t,n){return w.isFunction(n)?void(s[t]=function(){var e,t=this._super,r=this._superApply;return this._super=i,this._superApply=o,e=n.apply(this,arguments),this._super=t,this._superApply=r,e}):void(s[t]=n);function i(){return r.prototype[t].apply(this,arguments)}function o(e){return r.prototype[t].apply(this,e)}}),o.prototype=w.widget.extend(a,{widgetEventPrefix:i&&a.widgetEventPrefix||e},s,{constructor:o,namespace:u,widgetName:e,widgetFullName:n}),i?(w.each(i._childConstructors,function(e,t){var r=t.prototype;w.widget(r.namespace+"."+r.widgetName,o,t._proto)}),delete i._childConstructors):r._childConstructors.push(o),w.widget.bridge(e,o),o},w.widget.extend=function(e){for(var t,r,n=N.call(arguments,1),i=0,o=n.length;i<o;i++)for(t in n[i])r=n[i][t],n[i].hasOwnProperty(t)&&void 0!==r&&(e[t]=w.isPlainObject(r)?w.isPlainObject(e[t])?w.widget.extend({},e[t],r):w.widget.extend({},r):r);return e},w.widget.bridge=function(o,t){var a=t.prototype.widgetFullName||o;w.fn[o]=function(r){var e="string"==typeof r,n=N.call(arguments,1),i=this;return r=!e&&n.length?w.widget.extend.apply(null,[r].concat(n)):r,e?this.each(function(){var e,t=w.data(this,a);return"instance"===r?(i=t,!1):t?w.isFunction(t[r])&&"_"!==r.charAt(0)?(e=t[r].apply(t,n))!==t&&void 0!==e?(i=e&&e.jquery?i.pushStack(e.get()):e,!1):void 0:w.error("no such method '"+r+"' for "+o+" widget instance"):w.error("cannot call methods on "+o+" prior to initialization; attempted to call method '"+r+"'")}):this.each(function(){var e=w.data(this,a);e?(e.option(r||{}),e._init&&e._init()):w.data(this,a,new t(r,this))}),i}},w.Widget=function(){},w.Widget._childConstructors=[],w.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(e,t){t=w(t||this.defaultElement||this)[0],this.element=w(t),this.uuid=F++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=w(),this.hoverable=w(),this.focusable=w(),t!==this&&(w.data(t,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===t&&this.destroy()}}),this.document=w(t.style?t.ownerDocument:t.document||t),this.window=w(this.document[0].defaultView||this.document[0].parentWindow)),this.options=w.widget.extend({},this.options,this._getCreateOptions(),e),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:w.noop,_getCreateEventData:w.noop,_create:w.noop,_init:w.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(w.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:w.noop,widget:function(){return this.element},option:function(e,t){var r,n,i,o=e;if(0===arguments.length)return w.widget.extend({},this.options);if("string"==typeof e)if(o={},e=(r=e.split(".")).shift(),r.length){for(n=o[e]=w.widget.extend({},this.options[e]),i=0;r.length-1>i;i++)n[r[i]]=n[r[i]]||{},n=n[r[i]];if(e=r.pop(),1===arguments.length)return void 0===n[e]?null:n[e];n[e]=t}else{if(1===arguments.length)return void 0===this.options[e]?null:this.options[e];o[e]=t}return this._setOptions(o),this},_setOptions:function(e){for(var t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!t),t)&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(i,o,e){var a,s=this;"boolean"!=typeof i&&(e=o,o=i,i=!1),e?(o=a=w(o),this.bindings=this.bindings.add(o)):(e=o,o=this.element,a=this.widget()),w.each(e,function(e,t){function r(){return i||!0!==s.options.disabled&&!w(this).hasClass("ui-state-disabled")?("string"==typeof t?s[t]:t).apply(s,arguments):void 0}"string"!=typeof t&&(r.guid=t.guid=t.guid||r.guid||w.guid++);var e=e.match(/^([\w:-]*)\s*(.*)$/),n=e[1]+s.eventNamespace,e=e[2];e?a.delegate(e,n,r):o.bind(n,r)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t),this.bindings=w(this.bindings.not(e).get()),this.focusable=w(this.focusable.not(e).get()),this.hoverable=w(this.hoverable.not(e).get())},_delay:function(e,t){var r=this;return setTimeout(function(){return("string"==typeof e?r[e]:e).apply(r,arguments)},t||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){w(e.currentTarget).addClass("ui-state-hover")},mouseleave:function(e){w(e.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){w(e.currentTarget).addClass("ui-state-focus")},focusout:function(e){w(e.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(e,t,r){var n,i,o=this.options[e];if(r=r||{},(t=w.Event(t)).type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),t.target=this.element[0],i=t.originalEvent)for(n in i)n in t||(t[n]=i[n]);return this.element.trigger(t,r),!(w.isFunction(o)&&!1===o.apply(this.element[0],[t].concat(r))||t.isDefaultPrevented())}},w.each({show:"fadeIn",hide:"fadeOut"},function(o,a){w.Widget.prototype["_"+o]=function(t,e,r){var n=(e="string"==typeof e?{effect:e}:e)?!0!==e&&"number"!=typeof e&&e.effect||a:o,i=!w.isEmptyObject(e="number"==typeof(e=e||{})?{duration:e}:e);e.complete=r,e.delay&&t.delay(e.delay),i&&w.effects&&w.effects.effect[n]?t[o](e):n!==o&&t[n]?t[n](e.duration,e.easing,r):t.queue(function(e){w(this)[o](),r&&r.call(t[0]),e()})}}),w.widget,!1);function G(e,t,r){return[parseFloat(e[0])*(V.test(e[0])?t/100:1),parseFloat(e[1])*(V.test(e[1])?r/100:1)]}function E(e,t){return parseInt(w.css(e,t),10)||0}w(document).mouseup(function(){l=!1}),w.widget("ui.mouse",{version:"1.11.2",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(e){return!0===w.data(e.target,t.widgetName+".preventClickEvent")?(w.removeData(e.target,t.widgetName+".preventClickEvent"),e.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(e){var t,r,n;if(!l)return this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(e),r=1===(this._mouseDownEvent=e).which,n=!("string"!=typeof(t=this).options.cancel||!e.target.nodeName)&&w(e.target).closest(this.options.cancel).length,r&&!n&&this._mouseCapture(e)&&(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){t.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=!1!==this._mouseStart(e),!this._mouseStarted)?e.preventDefault():(!0===w.data(e.target,this.widgetName+".preventClickEvent")&&w.removeData(e.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return t._mouseMove(e)},this._mouseUpDelegate=function(e){return t._mouseUp(e)},this.document.bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),e.preventDefault(),l=!0)),!0},_mouseMove:function(e){if(this._mouseMoved){if(w.ui.ie&&(!document.documentMode||document.documentMode<9)&&!e.button)return this._mouseUp(e);if(!e.which)return this._mouseUp(e)}return(e.which||e.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,e),this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted)},_mouseUp:function(e){return this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,e.target===this._mouseDownEvent.target&&w.data(e.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(e)),l=!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}}),w.ui=w.ui||{};var c,U,C=Math.max,I=Math.abs,z=Math.round,q=/left|center|right/,H=/top|center|bottom/,W=/[\+\-]\d+(\.[\d]+)?%?/,Y=/^\w+/,V=/%$/,K=w.fn.position;w.position={scrollbarWidth:function(){var e,t,r;return void 0!==c?c:(r=(t=w("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>")).children()[0],w("body").append(t),e=r.offsetWidth,t.css("overflow","scroll"),e===(r=r.offsetWidth)&&(r=t[0].clientWidth),t.remove(),c=e-r)},getScrollInfo:function(e){var t=e.isWindow||e.isDocument?"":e.element.css("overflow-x"),r=e.isWindow||e.isDocument?"":e.element.css("overflow-y"),t="scroll"===t||"auto"===t&&e.width<e.element[0].scrollWidth;return{width:"scroll"===r||"auto"===r&&e.height<e.element[0].scrollHeight?w.position.scrollbarWidth():0,height:t?w.position.scrollbarWidth():0}},getWithinInfo:function(e){var e=w(e||window),t=w.isWindow(e[0]),r=!!e[0]&&9===e[0].nodeType;return{element:e,isWindow:t,isDocument:r,offset:e.offset()||{left:0,top:0},scrollLeft:e.scrollLeft(),scrollTop:e.scrollTop(),width:t||r?e.width():e.outerWidth(),height:t||r?e.height():e.outerHeight()}}},w.fn.position=function(f){if(!f||!f.of)return K.apply(this,arguments);f=w.extend({},f);var h,p,d,g,y,e,A=w(f.of),m=w.position.getWithinInfo(f.within),v=w.position.getScrollInfo(m),b=(f.collision||"flip").split(" "),_={},t=9===(t=(e=A)[0]).nodeType?{width:e.width(),height:e.height(),offset:{top:0,left:0}}:w.isWindow(t)?{width:e.width(),height:e.height(),offset:{top:e.scrollTop(),left:e.scrollLeft()}}:t.preventDefault?{width:0,height:0,offset:{top:t.pageY,left:t.pageX}}:{width:e.outerWidth(),height:e.outerHeight(),offset:e.offset()};return A[0].preventDefault&&(f.at="left top"),p=t.width,d=t.height,y=w.extend({},g=t.offset),w.each(["my","at"],function(){var e,t,r=(f[this]||"").split(" ");(r=1===r.length?q.test(r[0])?r.concat(["center"]):H.test(r[0])?["center"].concat(r):["center","center"]:r)[0]=q.test(r[0])?r[0]:"center",r[1]=H.test(r[1])?r[1]:"center",e=W.exec(r[0]),t=W.exec(r[1]),_[this]=[e?e[0]:0,t?t[0]:0],f[this]=[Y.exec(r[0])[0],Y.exec(r[1])[0]]}),1===b.length&&(b[1]=b[0]),"right"===f.at[0]?y.left+=p:"center"===f.at[0]&&(y.left+=p/2),"bottom"===f.at[1]?y.top+=d:"center"===f.at[1]&&(y.top+=d/2),h=G(_.at,p,d),y.left+=h[0],y.top+=h[1],this.each(function(){var r,e,a=w(this),s=a.outerWidth(),u=a.outerHeight(),t=E(this,"marginLeft"),n=E(this,"marginTop"),i=s+t+E(this,"marginRight")+v.width,o=u+n+E(this,"marginBottom")+v.height,l=w.extend({},y),c=G(_.my,a.outerWidth(),a.outerHeight());"right"===f.my[0]?l.left-=s:"center"===f.my[0]&&(l.left-=s/2),"bottom"===f.my[1]?l.top-=u:"center"===f.my[1]&&(l.top-=u/2),l.left+=c[0],l.top+=c[1],U||(l.left=z(l.left),l.top=z(l.top)),r={marginLeft:t,marginTop:n},w.each(["left","top"],function(e,t){w.ui.position[b[e]]&&w.ui.position[b[e]][t](l,{targetWidth:p,targetHeight:d,elemWidth:s,elemHeight:u,collisionPosition:r,collisionWidth:i,collisionHeight:o,offset:[h[0]+c[0],h[1]+c[1]],my:f.my,at:f.at,within:m,elem:a})}),f.using&&(e=function(e){var t=g.left-l.left,r=t+p-s,n=g.top-l.top,i=n+d-u,o={target:{element:A,left:g.left,top:g.top,width:p,height:d},element:{element:a,left:l.left,top:l.top,width:s,height:u},horizontal:r<0?"left":0<t?"right":"center",vertical:i<0?"top":0<n?"bottom":"middle"};p<s&&p>I(t+r)&&(o.horizontal="center"),d<u&&d>I(n+i)&&(o.vertical="middle"),o.important=C(I(t),I(r))>C(I(n),I(i))?"horizontal":"vertical",f.using.call(this,e,o)}),a.offset(w.extend(l,{using:e}))})},w.ui.position={fit:{left:function(e,t){var r,n=t.within,i=n.isWindow?n.scrollLeft:n.offset.left,n=n.width,o=e.left-t.collisionPosition.marginLeft,a=i-o,s=o+t.collisionWidth-n-i;t.collisionWidth>n?0<a&&s<=0?(r=e.left+a+t.collisionWidth-n-i,e.left+=a-r):e.left=!(0<s&&a<=0)&&s<a?i+n-t.collisionWidth:i:0<a?e.left+=a:0<s?e.left-=s:e.left=C(e.left-o,e.left)},top:function(e,t){var r,n=t.within,n=n.isWindow?n.scrollTop:n.offset.top,i=t.within.height,o=e.top-t.collisionPosition.marginTop,a=n-o,s=o+t.collisionHeight-i-n;t.collisionHeight>i?0<a&&s<=0?(r=e.top+a+t.collisionHeight-i-n,e.top+=a-r):e.top=!(0<s&&a<=0)&&s<a?n+i-t.collisionHeight:n:0<a?e.top+=a:0<s?e.top-=s:e.top=C(e.top-o,e.top)}},flip:{left:function(e,t){var r=t.within,n=r.offset.left+r.scrollLeft,i=r.width,r=r.isWindow?r.scrollLeft:r.offset.left,o=e.left-t.collisionPosition.marginLeft,a=o-r,o=o+t.collisionWidth-i-r,s="left"===t.my[0]?-t.elemWidth:"right"===t.my[0]?t.elemWidth:0,u="left"===t.at[0]?t.targetWidth:"right"===t.at[0]?-t.targetWidth:0,l=-2*t.offset[0];a<0?((i=e.left+s+u+l+t.collisionWidth-i-n)<0||I(a)>i)&&(e.left+=s+u+l):0<o&&(0<(n=e.left-t.collisionPosition.marginLeft+s+u+l-r)||o>I(n))&&(e.left+=s+u+l)},top:function(e,t){var r=t.within,n=r.offset.top+r.scrollTop,i=r.height,r=r.isWindow?r.scrollTop:r.offset.top,o=e.top-t.collisionPosition.marginTop,a=o-r,o=o+t.collisionHeight-i-r,s="top"===t.my[1]?-t.elemHeight:"bottom"===t.my[1]?t.elemHeight:0,u="top"===t.at[1]?t.targetHeight:"bottom"===t.at[1]?-t.targetHeight:0,l=-2*t.offset[1];a<0?(i=e.top+s+u+l+t.collisionHeight-i-n,e.top+s+u+l>a&&(i<0||I(a)>i)&&(e.top+=s+u+l)):0<o&&(n=e.top-t.collisionPosition.marginTop+s+u+l-r,e.top+s+u+l>o)&&(0<n||o>I(n))&&(e.top+=s+u+l)}},flipfit:{left:function(){w.ui.position.flip.left.apply(this,arguments),w.ui.position.fit.left.apply(this,arguments)},top:function(){w.ui.position.flip.top.apply(this,arguments),w.ui.position.fit.top.apply(this,arguments)}}};var f,h=document.getElementsByTagName("body")[0],p=document.createElement("div"),d=document.createElement(h?"div":"body"),g={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"};for(f in h&&w.extend(g,{position:"absolute",left:"-1000px",top:"-1000px"}),g)d.style[f]=g[f];function X(e,t,r){return t<=e&&e<t+r}d.appendChild(p),(h=h||document.documentElement).insertBefore(d,h.firstChild),p.style.cssText="position: absolute; left: 10.7432222px;",p=w(p).offset().left,U=10<p&&p<11,d.innerHTML="",h.removeChild(d),w.ui.position,w.widget("ui.draggable",w.ui.mouse,{version:"1.11.2",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._setHandleClassName(),this._mouseInit()},_setOption:function(e,t){this._super(e,t),"handle"===e&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){return(this.helper||this.element).is(".ui-draggable-dragging")?void(this.destroyOnClear=!0):(this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._removeHandleClassName(),void this._mouseDestroy())},_mouseCapture:function(e){var t=this.options;return this._blurActiveElement(e),!(this.helper||t.disabled||0<w(e.target).closest(".ui-resizable-handle").length||(this.handle=this._getHandle(e),!this.handle)||(this._blockFrames(!0===t.iframeFix?"iframe":t.iframeFix),0))},_blockFrames:function(e){this.iframeBlocks=this.document.find(e).map(function(){var e=w(this);return w("<div>").css("position","absolute").appendTo(e.parent()).outerWidth(e.outerWidth()).outerHeight(e.outerHeight()).offset(e.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(e){var t=this.document[0];if(this.handleElement.is(e.target))try{t.activeElement&&"body"!==t.activeElement.nodeName.toLowerCase()&&w(t.activeElement).blur()}catch(e){}},_mouseStart:function(e){var t=this.options;return this.helper=this._createHelper(e),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),w.ui.ddmanager&&(w.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=0<this.helper.parents().filter(function(){return"fixed"===w(this).css("position")}).length,this.positionAbs=this.element.offset(),this._refreshOffsets(e),this.originalPosition=this.position=this._generatePosition(e,!1),this.originalPageX=e.pageX,this.originalPageY=e.pageY,t.cursorAt&&this._adjustOffsetFromHelper(t.cursorAt),this._setContainment(),!1===this._trigger("start",e)?(this._clear(),!1):(this._cacheHelperProportions(),w.ui.ddmanager&&!t.dropBehaviour&&w.ui.ddmanager.prepareOffsets(this,e),this._normalizeRightBottom(),this._mouseDrag(e,!0),w.ui.ddmanager&&w.ui.ddmanager.dragStart(this,e),!0)},_refreshOffsets:function(e){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:e.pageX-this.offset.left,top:e.pageY-this.offset.top}},_mouseDrag:function(e,t){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(e,!0),this.positionAbs=this._convertPositionTo("absolute"),!t){t=this._uiHash();if(!1===this._trigger("drag",e,t))return this._mouseUp({}),!1;this.position=t.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",w.ui.ddmanager&&w.ui.ddmanager.drag(this,e),!1},_mouseStop:function(e){var t=this,r=!1;return w.ui.ddmanager&&!this.options.dropBehaviour&&(r=w.ui.ddmanager.drop(this,e)),this.dropped&&(r=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!r||"valid"===this.options.revert&&r||!0===this.options.revert||w.isFunction(this.options.revert)&&this.options.revert.call(this.element,r)?w(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){!1!==t._trigger("stop",e)&&t._clear()}):!1!==this._trigger("stop",e)&&this._clear(),!1},_mouseUp:function(e){return this._unblockFrames(),w.ui.ddmanager&&w.ui.ddmanager.dragStop(this,e),this.handleElement.is(e.target)&&this.element.focus(),w.ui.mouse.prototype._mouseUp.call(this,e)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(e){return!this.options.handle||!!w(e.target).closest(this.element.find(this.options.handle)).length},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this.handleElement.addClass("ui-draggable-handle")},_removeHandleClassName:function(){this.handleElement.removeClass("ui-draggable-handle")},_createHelper:function(e){var t=this.options,r=w.isFunction(t.helper),e=r?w(t.helper.apply(this.element[0],[e])):"clone"===t.helper?this.element.clone().removeAttr("id"):this.element;return e.parents("body").length||e.appendTo("parent"===t.appendTo?this.element[0].parentNode:t.appendTo),r&&e[0]===this.element[0]&&this._setPositionRelative(),e[0]===this.element[0]||/(fixed|absolute)/.test(e.css("position"))||e.css("position","absolute"),e},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),"left"in(e=w.isArray(e)?{left:+e[0],top:+e[1]||0}:e)&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_isRootNode:function(e){return/(html|body)/i.test(e.tagName)||e===this.document[0]},_getParentOffset:function(){var e=this.offsetParent.offset(),t=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==t&&w.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),{top:(e=this._isRootNode(this.offsetParent[0])?{top:0,left:0}:e).top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){var e,t;return"relative"!==this.cssPosition?{top:0,left:0}:(e=this.element.position(),t=this._isRootNode(this.scrollParent[0]),{top:e.top-(parseInt(this.helper.css("top"),10)||0)+(t?0:this.scrollParent.scrollTop()),left:e.left-(parseInt(this.helper.css("left"),10)||0)+(t?0:this.scrollParent.scrollLeft())})},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,t=this.options,r=this.document[0];return this.relativeContainer=null,t.containment?"window"===t.containment?void(this.containment=[w(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,w(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,w(window).scrollLeft()+w(window).width()-this.helperProportions.width-this.margins.left,w(window).scrollTop()+(w(window).height()||r.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):"document"===t.containment?void(this.containment=[0,0,w(r).width()-this.helperProportions.width-this.margins.left,(w(r).height()||r.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):t.containment.constructor===Array?void(this.containment=t.containment):("parent"===t.containment&&(t.containment=this.helper[0].parentNode),void((t=(r=w(t.containment))[0])&&(e=/(scroll|auto)/.test(r.css("overflow")),this.containment=[(parseInt(r.css("borderLeftWidth"),10)||0)+(parseInt(r.css("paddingLeft"),10)||0),(parseInt(r.css("borderTopWidth"),10)||0)+(parseInt(r.css("paddingTop"),10)||0),(e?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(r.css("borderRightWidth"),10)||0)-(parseInt(r.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(e?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(r.css("borderBottomWidth"),10)||0)-(parseInt(r.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=r))):void(this.containment=null)},_convertPositionTo:function(e,t){t=t||this.position;var e="absolute"===e?1:-1,r=this._isRootNode(this.scrollParent[0]);return{top:t.top+this.offset.relative.top*e+this.offset.parent.top*e-("fixed"===this.cssPosition?-this.offset.scroll.top:r?0:this.offset.scroll.top)*e,left:t.left+this.offset.relative.left*e+this.offset.parent.left*e-("fixed"===this.cssPosition?-this.offset.scroll.left:r?0:this.offset.scroll.left)*e}},_generatePosition:function(e,t){var r,n=this.options,i=this._isRootNode(this.scrollParent[0]),o=e.pageX,a=e.pageY;return i&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),{top:(a=t&&(this.containment&&(r=this.relativeContainer?(t=this.relativeContainer.offset(),[this.containment[0]+t.left,this.containment[1]+t.top,this.containment[2]+t.left,this.containment[3]+t.top]):this.containment,e.pageX-this.offset.click.left<r[0]&&(o=r[0]+this.offset.click.left),e.pageY-this.offset.click.top<r[1]&&(a=r[1]+this.offset.click.top),e.pageX-this.offset.click.left>r[2]&&(o=r[2]+this.offset.click.left),e.pageY-this.offset.click.top>r[3])&&(a=r[3]+this.offset.click.top),n.grid&&(t=n.grid[1]?this.originalPageY+Math.round((a-this.originalPageY)/n.grid[1])*n.grid[1]:this.originalPageY,a=!r||t-this.offset.click.top>=r[1]||t-this.offset.click.top>r[3]?t:t-this.offset.click.top>=r[1]?t-n.grid[1]:t+n.grid[1],e=n.grid[0]?this.originalPageX+Math.round((o-this.originalPageX)/n.grid[0])*n.grid[0]:this.originalPageX,o=!r||e-this.offset.click.left>=r[0]||e-this.offset.click.left>r[2]?e:e-this.offset.click.left>=r[0]?e-n.grid[0]:e+n.grid[0]),"y"===n.axis&&(o=this.originalPageX),"x"===n.axis)?this.originalPageY:a)-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:i?0:this.offset.scroll.top),left:o-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:i?0:this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_normalizeRightBottom:function(){"y"!==this.options.axis&&"auto"!==this.helper.css("right")&&(this.helper.width(this.helper.width()),this.helper.css("right","auto")),"x"!==this.options.axis&&"auto"!==this.helper.css("bottom")&&(this.helper.height(this.helper.height()),this.helper.css("bottom","auto"))},_trigger:function(e,t,r){return r=r||this._uiHash(),w.ui.plugin.call(this,e,[t,r,this],!0),/^(drag|start|stop)/.test(e)&&(this.positionAbs=this._convertPositionTo("absolute"),r.offset=this.positionAbs),w.Widget.prototype._trigger.call(this,e,t,r)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),w.ui.plugin.add("draggable","connectToSortable",{start:function(t,e,r){var n=w.extend({},e,{item:r.element});r.sortables=[],w(r.options.connectToSortable).each(function(){var e=w(this).sortable("instance");e&&!e.options.disabled&&(r.sortables.push(e),e.refreshPositions(),e._trigger("activate",t,n))})},stop:function(t,e,r){var n=w.extend({},e,{item:r.element});r.cancelHelperRemoval=!1,w.each(r.sortables,function(){var e=this;e.isOver?(e.isOver=0,r.cancelHelperRemoval=!0,e.cancelHelperRemoval=!1,e._storedCSS={position:e.placeholder.css("position"),top:e.placeholder.css("top"),left:e.placeholder.css("left")},e._mouseStop(t),e.options.helper=e.options._helper):(e.cancelHelperRemoval=!0,e._trigger("deactivate",t,n))})},drag:function(r,n,i){w.each(i.sortables,function(){var e=!1,t=this;t.positionAbs=i.positionAbs,t.helperProportions=i.helperProportions,t.offset.click=i.offset.click,t._intersectsWith(t.containerCache)&&(e=!0,w.each(i.sortables,function(){return this.positionAbs=i.positionAbs,this.helperProportions=i.helperProportions,this.offset.click=i.offset.click,e=this!==t&&this._intersectsWith(this.containerCache)&&w.contains(t.element[0],this.element[0])?!1:e})),e?(t.isOver||(t.isOver=1,t.currentItem=n.helper.appendTo(t.element).data("ui-sortable-item",!0),t.options._helper=t.options.helper,t.options.helper=function(){return n.helper[0]},r.target=t.currentItem[0],t._mouseCapture(r,!0),t._mouseStart(r,!0,!0),t.offset.click.top=i.offset.click.top,t.offset.click.left=i.offset.click.left,t.offset.parent.left-=i.offset.parent.left-t.offset.parent.left,t.offset.parent.top-=i.offset.parent.top-t.offset.parent.top,i._trigger("toSortable",r),i.dropped=t.element,w.each(i.sortables,function(){this.refreshPositions()}),i.currentItem=i.element,t.fromOutside=i),t.currentItem&&(t._mouseDrag(r),n.position=t.position)):t.isOver&&(t.isOver=0,t.cancelHelperRemoval=!0,t.options._revert=t.options.revert,t.options.revert=!1,t._trigger("out",r,t._uiHash(t)),t._mouseStop(r,!0),t.options.revert=t.options._revert,t.options.helper=t.options._helper,t.placeholder&&t.placeholder.remove(),i._refreshOffsets(r),n.position=i._generatePosition(r,!0),i._trigger("fromSortable",r),i.dropped=!1,w.each(i.sortables,function(){this.refreshPositions()}))})}}),w.ui.plugin.add("draggable","cursor",{start:function(e,t,r){var n=w("body"),r=r.options;n.css("cursor")&&(r._cursor=n.css("cursor")),n.css("cursor",r.cursor)},stop:function(e,t,r){r=r.options;r._cursor&&w("body").css("cursor",r._cursor)}}),w.ui.plugin.add("draggable","opacity",{start:function(e,t,r){t=w(t.helper),r=r.options;t.css("opacity")&&(r._opacity=t.css("opacity")),t.css("opacity",r.opacity)},stop:function(e,t,r){r=r.options;r._opacity&&w(t.helper).css("opacity",r._opacity)}}),w.ui.plugin.add("draggable","scroll",{start:function(e,t,r){r.scrollParentNotHidden||(r.scrollParentNotHidden=r.helper.scrollParent(!1)),r.scrollParentNotHidden[0]!==r.document[0]&&"HTML"!==r.scrollParentNotHidden[0].tagName&&(r.overflowOffset=r.scrollParentNotHidden.offset())},drag:function(e,t,r){var n=r.options,i=!1,o=r.scrollParentNotHidden[0],a=r.document[0];o!==a&&"HTML"!==o.tagName?(n.axis&&"x"===n.axis||(r.overflowOffset.top+o.offsetHeight-e.pageY<n.scrollSensitivity?o.scrollTop=i=o.scrollTop+n.scrollSpeed:e.pageY-r.overflowOffset.top<n.scrollSensitivity&&(o.scrollTop=i=o.scrollTop-n.scrollSpeed)),n.axis&&"y"===n.axis||(r.overflowOffset.left+o.offsetWidth-e.pageX<n.scrollSensitivity?o.scrollLeft=i=o.scrollLeft+n.scrollSpeed:e.pageX-r.overflowOffset.left<n.scrollSensitivity&&(o.scrollLeft=i=o.scrollLeft-n.scrollSpeed))):(n.axis&&"x"===n.axis||(e.pageY-w(a).scrollTop()<n.scrollSensitivity?i=w(a).scrollTop(w(a).scrollTop()-n.scrollSpeed):w(window).height()-(e.pageY-w(a).scrollTop())<n.scrollSensitivity&&(i=w(a).scrollTop(w(a).scrollTop()+n.scrollSpeed))),n.axis&&"y"===n.axis||(e.pageX-w(a).scrollLeft()<n.scrollSensitivity?i=w(a).scrollLeft(w(a).scrollLeft()-n.scrollSpeed):w(window).width()-(e.pageX-w(a).scrollLeft())<n.scrollSensitivity&&(i=w(a).scrollLeft(w(a).scrollLeft()+n.scrollSpeed)))),!1!==i&&w.ui.ddmanager&&!n.dropBehaviour&&w.ui.ddmanager.prepareOffsets(r,e)}}),w.ui.plugin.add("draggable","snap",{start:function(e,t,r){var n=r.options;r.snapElements=[],w(n.snap.constructor!==String?n.snap.items||":data(ui-draggable)":n.snap).each(function(){var e=w(this),t=e.offset();this!==r.element[0]&&r.snapElements.push({item:this,width:e.outerWidth(),height:e.outerHeight(),top:t.top,left:t.left})})},drag:function(e,t,r){for(var n,i,o,a,s,u,l,c,f,h=r.options,p=h.snapTolerance,d=t.offset.left,g=d+r.helperProportions.width,y=t.offset.top,A=y+r.helperProportions.height,m=r.snapElements.length-1;0<=m;m--)u=(s=r.snapElements[m].left-r.margins.left)+r.snapElements[m].width,c=(l=r.snapElements[m].top-r.margins.top)+r.snapElements[m].height,g<s-p||u+p<d||A<l-p||c+p<y||!w.contains(r.snapElements[m].item.ownerDocument,r.snapElements[m].item)?(r.snapElements[m].snapping&&r.options.snap.release&&r.options.snap.release.call(r.element,e,w.extend(r._uiHash(),{snapItem:r.snapElements[m].item})),r.snapElements[m].snapping=!1):("inner"!==h.snapMode&&(n=p>=Math.abs(l-A),i=p>=Math.abs(c-y),o=p>=Math.abs(s-g),a=p>=Math.abs(u-d),n&&(t.position.top=r._convertPositionTo("relative",{top:l-r.helperProportions.height,left:0}).top),i&&(t.position.top=r._convertPositionTo("relative",{top:c,left:0}).top),o&&(t.position.left=r._convertPositionTo("relative",{top:0,left:s-r.helperProportions.width}).left),a)&&(t.position.left=r._convertPositionTo("relative",{top:0,left:u}).left),f=n||i||o||a,"outer"!==h.snapMode&&(n=p>=Math.abs(l-y),i=p>=Math.abs(c-A),o=p>=Math.abs(s-d),a=p>=Math.abs(u-g),n&&(t.position.top=r._convertPositionTo("relative",{top:l,left:0}).top),i&&(t.position.top=r._convertPositionTo("relative",{top:c-r.helperProportions.height,left:0}).top),o&&(t.position.left=r._convertPositionTo("relative",{top:0,left:s}).left),a)&&(t.position.left=r._convertPositionTo("relative",{top:0,left:u-r.helperProportions.width}).left),!r.snapElements[m].snapping&&(n||i||o||a||f)&&r.options.snap.snap&&r.options.snap.snap.call(r.element,e,w.extend(r._uiHash(),{snapItem:r.snapElements[m].item})),r.snapElements[m].snapping=n||i||o||a||f)}}),w.ui.plugin.add("draggable","stack",{start:function(e,t,r){var n,r=r.options,r=w.makeArray(w(r.stack)).sort(function(e,t){return(parseInt(w(e).css("zIndex"),10)||0)-(parseInt(w(t).css("zIndex"),10)||0)});r.length&&(n=parseInt(w(r[0]).css("zIndex"),10)||0,w(r).each(function(e){w(this).css("zIndex",n+e)}),this.css("zIndex",n+r.length))}}),w.ui.plugin.add("draggable","zIndex",{start:function(e,t,r){t=w(t.helper),r=r.options;t.css("zIndex")&&(r._zIndex=t.css("zIndex")),t.css("zIndex",r.zIndex)},stop:function(e,t,r){r=r.options;r._zIndex&&w(t.helper).css("zIndex",r._zIndex)}}),w.ui.draggable,w.widget("ui.droppable",{version:"1.11.2",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var e,t=this.options,r=t.accept;this.isover=!1,this.isout=!0,this.accept=w.isFunction(r)?r:function(e){return e.is(r)},this.proportions=function(){return arguments.length?void(e=arguments[0]):e=e||{width:this.element[0].offsetWidth,height:this.element[0].offsetHeight}},this._addToManager(t.scope),t.addClasses&&this.element.addClass("ui-droppable")},_addToManager:function(e){w.ui.ddmanager.droppables[e]=w.ui.ddmanager.droppables[e]||[],w.ui.ddmanager.droppables[e].push(this)},_splice:function(e){for(var t=0;e.length>t;t++)e[t]===this&&e.splice(t,1)},_destroy:function(){var e=w.ui.ddmanager.droppables[this.options.scope];this._splice(e),this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(e,t){var r;"accept"===e?this.accept=w.isFunction(t)?t:function(e){return e.is(t)}:"scope"===e&&(r=w.ui.ddmanager.droppables[this.options.scope],this._splice(r),this._addToManager(t)),this._super(e,t)},_activate:function(e){var t=w.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),t&&this._trigger("activate",e,this.ui(t))},_deactivate:function(e){var t=w.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),t&&this._trigger("deactivate",e,this.ui(t))},_over:function(e){var t=w.ui.ddmanager.current;t&&(t.currentItem||t.element)[0]!==this.element[0]&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",e,this.ui(t)))},_out:function(e){var t=w.ui.ddmanager.current;t&&(t.currentItem||t.element)[0]!==this.element[0]&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",e,this.ui(t)))},_drop:function(t,e){var r=e||w.ui.ddmanager.current,n=!1;return!(!r||(r.currentItem||r.element)[0]===this.element[0]||(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var e=w(this).droppable("instance");return e.options.greedy&&!e.options.disabled&&e.options.scope===r.options.scope&&e.accept.call(e.element[0],r.currentItem||r.element)&&w.ui.intersect(r,w.extend(e,{offset:e.element.offset()}),e.options.tolerance,t)?!(n=!0):void 0}),n)||!this.accept.call(this.element[0],r.currentItem||r.element))&&(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",t,this.ui(r)),this.element)},ui:function(e){return{draggable:e.currentItem||e.element,helper:e.helper,position:e.position,offset:e.positionAbs}}}),w.ui.intersect=function(e,t,r,n){if(!t.offset)return!1;var i=(e.positionAbs||e.position.absolute).left+e.margins.left,o=(e.positionAbs||e.position.absolute).top+e.margins.top,a=i+e.helperProportions.width,s=o+e.helperProportions.height,u=t.offset.left,l=t.offset.top,c=u+t.proportions().width,f=l+t.proportions().height;switch(r){case"fit":return u<=i&&a<=c&&l<=o&&s<=f;case"intersect":return i+e.helperProportions.width/2>u&&c>a-e.helperProportions.width/2&&o+e.helperProportions.height/2>l&&f>s-e.helperProportions.height/2;case"pointer":return X(n.pageY,l,t.proportions().height)&&X(n.pageX,u,t.proportions().width);case"touch":return(l<=o&&o<=f||l<=s&&s<=f||o<l&&f<s)&&(u<=i&&i<=c||u<=a&&a<=c||i<u&&c<a);default:return!1}},w.ui.ddmanager={current:null,droppables:{default:[]},prepareOffsets:function(e,t){var r,n,i=w.ui.ddmanager.droppables[e.options.scope]||[],o=t?t.type:null,a=(e.currentItem||e.element).find(":data(ui-droppable)").addBack();e:for(r=0;i.length>r;r++)if(!(i[r].options.disabled||e&&!i[r].accept.call(i[r].element[0],e.currentItem||e.element))){for(n=0;a.length>n;n++)if(a[n]===i[r].element[0]){i[r].proportions().height=0;continue e}i[r].visible="none"!==i[r].element.css("display"),i[r].visible&&("mousedown"===o&&i[r]._activate.call(i[r],t),i[r].offset=i[r].element.offset(),i[r].proportions({width:i[r].element[0].offsetWidth,height:i[r].element[0].offsetHeight}))}},drop:function(e,t){var r=!1;return w.each((w.ui.ddmanager.droppables[e.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&w.ui.intersect(e,this,this.options.tolerance,t)&&(r=this._drop.call(this,t)||r),!this.options.disabled)&&this.visible&&this.accept.call(this.element[0],e.currentItem||e.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,t))}),r},dragStart:function(e,t){e.element.parentsUntil("body").bind("scroll.droppable",function(){e.options.refreshPositions||w.ui.ddmanager.prepareOffsets(e,t)})},drag:function(i,o){i.options.refreshPositions&&w.ui.ddmanager.prepareOffsets(i,o),w.each(w.ui.ddmanager.droppables[i.options.scope]||[],function(){var e,t,r,n;this.options.disabled||this.greedyChild||!this.visible||(n=!(n=w.ui.intersect(i,this,this.options.tolerance,o))&&this.isover?"isout":n&&!this.isover?"isover":null)&&(this.options.greedy&&(t=this.options.scope,(r=this.element.parents(":data(ui-droppable)").filter(function(){return w(this).droppable("instance").options.scope===t})).length)&&((e=w(r[0]).droppable("instance")).greedyChild="isover"===n),e&&"isover"===n&&(e.isover=!1,e.isout=!0,e._out.call(e,o)),this[n]=!0,this["isout"===n?"isover":"isout"]=!1,this["isover"===n?"_over":"_out"].call(this,o),e)&&"isout"===n&&(e.isout=!1,e.isover=!0,e._over.call(e,o))})},dragStop:function(e,t){e.element.parentsUntil("body").unbind("scroll.droppable"),e.options.refreshPositions||w.ui.ddmanager.prepareOffsets(e,t)}},w.ui.droppable,w.widget("ui.resizable",w.ui.mouse,{version:"1.11.2",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(e){return parseInt(e,10)||0},_isNumber:function(e){return!isNaN(parseInt(e,10))},_hasScroll:function(e,t){var r;return"hidden"!==w(e).css("overflow")&&(r=!1,0<e[t=t&&"left"===t?"scrollLeft":"scrollTop"]||(e[t]=1,r=0<e[t],e[t]=0,r))},_create:function(){var e,t,r,n,i=this,o=this.options;if(this.element.addClass("ui-resizable"),w.extend(this,{_aspectRatio:!!o.aspectRatio,aspectRatio:o.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:o.helper||o.ghost||o.animate?o.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(w("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=o.handles||(w(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),e=this.handles.split(","),this.handles={},t=0;e.length>t;t++)r=w.trim(e[t]),(n=w("<div class='ui-resizable-handle "+("ui-resizable-"+r)+"'></div>")).css({zIndex:o.zIndex}),"se"===r&&n.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[r]=".ui-resizable-"+r,this.element.append(n);this._renderAxis=function(e){var t,r,n;for(t in e=e||this.element,this.handles)this.handles[t].constructor===String&&(this.handles[t]=this.element.children(this.handles[t]).first().show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(n=w(this.handles[t],this.element),n=/sw|ne|nw|se|n|s/.test(t)?n.outerHeight():n.outerWidth(),r=["padding",/ne|nw|n/.test(t)?"Top":/se|sw|s/.test(t)?"Bottom":/^e$/.test(t)?"Right":"Left"].join(""),e.css(r,n),this._proportionallyResize()),w(this.handles[t]).length},this._renderAxis(this.element),this._handles=w(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){i.resizing||(this.className&&(n=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),i.axis=n&&n[1]?n[1]:"se")}),o.autoHide&&(this._handles.hide(),w(this.element).addClass("ui-resizable-autohide").mouseenter(function(){o.disabled||(w(this).removeClass("ui-resizable-autohide"),i._handles.show())}).mouseleave(function(){o.disabled||i.resizing||(w(this).addClass("ui-resizable-autohide"),i._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();function e(e){w(e).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()}var t;return this.elementIsWrapper&&(e(this.element),t=this.element,this.originalElement.css({position:t.css("position"),width:t.outerWidth(),height:t.outerHeight(),top:t.css("top"),left:t.css("left")}).insertAfter(t),t.remove()),this.originalElement.css("resize",this.originalResizeStyle),e(this.originalElement),this},_mouseCapture:function(e){var t,r,n=!1;for(t in this.handles)r=w(this.handles[t])[0],r!==e.target&&!w.contains(r,e.target)||(n=!0);return!this.options.disabled&&n},_mouseStart:function(e){var t,r,n=this.options,i=this.element;return this.resizing=!0,this._renderProxy(),r=this._num(this.helper.css("left")),t=this._num(this.helper.css("top")),n.containment&&(r+=w(n.containment).scrollLeft()||0,t+=w(n.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:r,top:t},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:i.width(),height:i.height()},this.originalSize=this._helper?{width:i.outerWidth(),height:i.outerHeight()}:{width:i.width(),height:i.height()},this.sizeDiff={width:i.outerWidth()-i.width(),height:i.outerHeight()-i.height()},this.originalPosition={left:r,top:t},this.originalMousePosition={left:e.pageX,top:e.pageY},this.aspectRatio="number"==typeof n.aspectRatio?n.aspectRatio:this.originalSize.width/this.originalSize.height||1,r=w(".ui-resizable-"+this.axis).css("cursor"),w("body").css("cursor","auto"===r?this.axis+"-resize":r),i.addClass("ui-resizable-resizing"),this._propagate("start",e),!0},_mouseDrag:function(e){var t=this.originalMousePosition,r=this.axis,n=e.pageX-t.left||0,t=e.pageY-t.top||0,r=this._change[r];return this._updatePrevProperties(),r&&(r=r.apply(this,[e,n,t]),this._updateVirtualBoundaries(e.shiftKey),(this._aspectRatio||e.shiftKey)&&(r=this._updateRatio(r,e)),r=this._respectSize(r,e),this._updateCache(r),this._propagate("resize",e),n=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),w.isEmptyObject(n)||(this._updatePrevProperties(),this._trigger("resize",e,this.ui()),this._applyChanges())),!1},_mouseStop:function(e){this.resizing=!1;var t,r,n,i=this.options,o=this;return this._helper&&(r=(t=(r=this._proportionallyResizeElements).length&&/textarea/i.test(r[0].nodeName))&&this._hasScroll(r[0],"left")?0:o.sizeDiff.height,t=t?0:o.sizeDiff.width,t={width:o.helper.width()-t,height:o.helper.height()-r},r=parseInt(o.element.css("left"),10)+(o.position.left-o.originalPosition.left)||null,n=parseInt(o.element.css("top"),10)+(o.position.top-o.originalPosition.top)||null,i.animate||this.element.css(w.extend(t,{top:n,left:r})),o.helper.height(o.size.height),o.helper.width(o.size.width),this._helper)&&!i.animate&&this._proportionallyResize(),w("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",e),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var e={};return this.position.top!==this.prevPosition.top&&(e.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(e.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(e.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(e.height=this.size.height+"px"),this.helper.css(e),e},_updateVirtualBoundaries:function(e){var t,r,n,i=this.options,i={minWidth:this._isNumber(i.minWidth)?i.minWidth:0,maxWidth:this._isNumber(i.maxWidth)?i.maxWidth:1/0,minHeight:this._isNumber(i.minHeight)?i.minHeight:0,maxHeight:this._isNumber(i.maxHeight)?i.maxHeight:1/0};(this._aspectRatio||e)&&(e=i.minHeight*this.aspectRatio,r=i.minWidth/this.aspectRatio,t=i.maxHeight*this.aspectRatio,n=i.maxWidth/this.aspectRatio,i.minWidth<e&&(i.minWidth=e),i.minHeight<r&&(i.minHeight=r),t<i.maxWidth&&(i.maxWidth=t),n<i.maxHeight)&&(i.maxHeight=n),this._vBoundaries=i},_updateCache:function(e){this.offset=this.helper.offset(),this._isNumber(e.left)&&(this.position.left=e.left),this._isNumber(e.top)&&(this.position.top=e.top),this._isNumber(e.height)&&(this.size.height=e.height),this._isNumber(e.width)&&(this.size.width=e.width)},_updateRatio:function(e){var t=this.position,r=this.size,n=this.axis;return this._isNumber(e.height)?e.width=e.height*this.aspectRatio:this._isNumber(e.width)&&(e.height=e.width/this.aspectRatio),"sw"===n&&(e.left=t.left+(r.width-e.width),e.top=null),"nw"===n&&(e.top=t.top+(r.height-e.height),e.left=t.left+(r.width-e.width)),e},_respectSize:function(e){var t=this._vBoundaries,r=this.axis,n=this._isNumber(e.width)&&t.maxWidth&&t.maxWidth<e.width,i=this._isNumber(e.height)&&t.maxHeight&&t.maxHeight<e.height,o=this._isNumber(e.width)&&t.minWidth&&t.minWidth>e.width,a=this._isNumber(e.height)&&t.minHeight&&t.minHeight>e.height,s=this.originalPosition.left+this.originalSize.width,u=this.position.top+this.size.height,l=/sw|nw|w/.test(r),r=/nw|ne|n/.test(r);return o&&(e.width=t.minWidth),a&&(e.height=t.minHeight),n&&(e.width=t.maxWidth),i&&(e.height=t.maxHeight),o&&l&&(e.left=s-t.minWidth),n&&l&&(e.left=s-t.maxWidth),a&&r&&(e.top=u-t.minHeight),i&&r&&(e.top=u-t.maxHeight),e.width||e.height||e.left||!e.top?e.width||e.height||e.top||!e.left||(e.left=null):e.top=null,e},_getPaddingPlusBorderDimensions:function(e){for(var t=0,r=[],n=[e.css("borderTopWidth"),e.css("borderRightWidth"),e.css("borderBottomWidth"),e.css("borderLeftWidth")],i=[e.css("paddingTop"),e.css("paddingRight"),e.css("paddingBottom"),e.css("paddingLeft")];t<4;t++)r[t]=parseInt(n[t],10)||0,r[t]+=parseInt(i[t],10)||0;return{height:r[0]+r[2],width:r[1]+r[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var e,t=0,r=this.helper||this.element;this._proportionallyResizeElements.length>t;t++)e=this._proportionallyResizeElements[t],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(e)),e.css({height:r.height()-this.outerDimensions.height||0,width:r.width()-this.outerDimensions.width||0})},_renderProxy:function(){var e=this.element,t=this.options;this.elementOffset=e.offset(),this._helper?(this.helper=this.helper||w("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++t.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(e,t){return{width:this.originalSize.width+t}},w:function(e,t){var r=this.originalSize;return{left:this.originalPosition.left+t,width:r.width-t}},n:function(e,t,r){var n=this.originalSize;return{top:this.originalPosition.top+r,height:n.height-r}},s:function(e,t,r){return{height:this.originalSize.height+r}},se:function(e,t,r){return w.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[e,t,r]))},sw:function(e,t,r){return w.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[e,t,r]))},ne:function(e,t,r){return w.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[e,t,r]))},nw:function(e,t,r){return w.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[e,t,r]))}},_propagate:function(e,t){w.ui.plugin.call(this,e,[t,this.ui()]),"resize"!==e&&this._trigger(e,t,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),w.ui.plugin.add("resizable","animate",{stop:function(t){var r=w(this).resizable("instance"),e=r.options,n=r._proportionallyResizeElements,i=n.length&&/textarea/i.test(n[0].nodeName),o=i&&r._hasScroll(n[0],"left")?0:r.sizeDiff.height,i=i?0:r.sizeDiff.width,i={width:r.size.width-i,height:r.size.height-o},o=parseInt(r.element.css("left"),10)+(r.position.left-r.originalPosition.left)||null,a=parseInt(r.element.css("top"),10)+(r.position.top-r.originalPosition.top)||null;r.element.animate(w.extend(i,a&&o?{top:a,left:o}:{}),{duration:e.animateDuration,easing:e.animateEasing,step:function(){var e={width:parseInt(r.element.css("width"),10),height:parseInt(r.element.css("height"),10),top:parseInt(r.element.css("top"),10),left:parseInt(r.element.css("left"),10)};n&&n.length&&w(n[0]).css({width:e.width,height:e.height}),r._updateCache(e),r._propagate("resize",t)}})}}),w.ui.plugin.add("resizable","containment",{start:function(){var r,n,e,t,i=w(this).resizable("instance"),o=i.options,a=i.element,o=o.containment,a=o instanceof w?o.get(0):/parent/.test(o)?a.parent().get(0):o;a&&(i.containerElement=w(a),/document/.test(o)||o===document?(i.containerOffset={left:0,top:0},i.containerPosition={left:0,top:0},i.parentData={element:w(document),left:0,top:0,width:w(document).width(),height:w(document).height()||document.body.parentNode.scrollHeight}):(r=w(a),n=[],w(["Top","Right","Left","Bottom"]).each(function(e,t){n[e]=i._num(r.css("padding"+t))}),i.containerOffset=r.offset(),i.containerPosition=r.position(),i.containerSize={height:r.innerHeight()-n[3],width:r.innerWidth()-n[1]},o=i.containerOffset,t=i.containerSize.height,e=i.containerSize.width,e=i._hasScroll(a,"left")?a.scrollWidth:e,t=i._hasScroll(a)?a.scrollHeight:t,i.parentData={element:a,left:o.left,top:o.top,width:e,height:t}))},resize:function(e){var t=w(this).resizable("instance"),r=t.options,n=t.containerOffset,i=t.position,e=t._aspectRatio||e.shiftKey,o={top:0,left:0},a=t.containerElement,s=!0;a[0]!==document&&/static/.test(a.css("position"))&&(o=n),i.left<(t._helper?n.left:0)&&(t.size.width=t.size.width+(t._helper?t.position.left-n.left:t.position.left-o.left),e&&(t.size.height=t.size.width/t.aspectRatio,s=!1),t.position.left=r.helper?n.left:0),i.top<(t._helper?n.top:0)&&(t.size.height=t.size.height+(t._helper?t.position.top-n.top:t.position.top),e&&(t.size.width=t.size.height*t.aspectRatio,s=!1),t.position.top=t._helper?n.top:0),a=t.containerElement.get(0)===t.element.parent().get(0),r=/relative|absolute/.test(t.containerElement.css("position")),a&&r?(t.offset.left=t.parentData.left+t.position.left,t.offset.top=t.parentData.top+t.position.top):(t.offset.left=t.element.offset().left,t.offset.top=t.element.offset().top),i=Math.abs(t.sizeDiff.width+(t._helper?t.offset.left-o.left:t.offset.left-n.left)),a=Math.abs(t.sizeDiff.height+(t._helper?t.offset.top-o.top:t.offset.top-n.top)),i+t.size.width>=t.parentData.width&&(t.size.width=t.parentData.width-i,e)&&(t.size.height=t.size.width/t.aspectRatio,s=!1),a+t.size.height>=t.parentData.height&&(t.size.height=t.parentData.height-a,e)&&(t.size.width=t.size.height*t.aspectRatio,s=!1),s||(t.position.left=t.prevPosition.left,t.position.top=t.prevPosition.top,t.size.width=t.prevSize.width,t.size.height=t.prevSize.height)},stop:function(){var e=w(this).resizable("instance"),t=e.options,r=e.containerOffset,n=e.containerPosition,i=e.containerElement,o=w(e.helper),a=o.offset(),s=o.outerWidth()-e.sizeDiff.width,o=o.outerHeight()-e.sizeDiff.height;e._helper&&!t.animate&&/relative/.test(i.css("position"))&&w(this).css({left:a.left-n.left-r.left,width:s,height:o}),e._helper&&!t.animate&&/static/.test(i.css("position"))&&w(this).css({left:a.left-n.left-r.left,width:s,height:o})}}),w.ui.plugin.add("resizable","alsoResize",{start:function(){function t(e){w(e).each(function(){var e=w(this);e.data("ui-resizable-alsoresize",{width:parseInt(e.width(),10),height:parseInt(e.height(),10),left:parseInt(e.css("left"),10),top:parseInt(e.css("top"),10)})})}var e=w(this).resizable("instance").options;"object"!=typeof e.alsoResize||e.alsoResize.parentNode?t(e.alsoResize):e.alsoResize.length?(e.alsoResize=e.alsoResize[0],t(e.alsoResize)):w.each(e.alsoResize,function(e){t(e)})},resize:function(e,o){function r(e,r){w(e).each(function(){var e=w(this),n=w(this).data("ui-resizable-alsoresize"),i={},t=r&&r.length?r:e.parents(o.originalElement[0]).length?["width","height"]:["width","height","top","left"];w.each(t,function(e,t){var r=(n[t]||0)+(s[t]||0);r&&0<=r&&(i[t]=r||null)}),e.css(i)})}var t=w(this).resizable("instance"),n=t.options,i=t.originalSize,a=t.originalPosition,s={height:t.size.height-i.height||0,width:t.size.width-i.width||0,top:t.position.top-a.top||0,left:t.position.left-a.left||0};"object"!=typeof n.alsoResize||n.alsoResize.nodeType?r(n.alsoResize):w.each(n.alsoResize,function(e,t){r(e,t)})},stop:function(){w(this).removeData("resizable-alsoresize")}}),w.ui.plugin.add("resizable","ghost",{start:function(){var e=w(this).resizable("instance"),t=e.options,r=e.size;e.ghost=e.originalElement.clone(),e.ghost.css({opacity:.25,display:"block",position:"relative",height:r.height,width:r.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof t.ghost?t.ghost:""),e.ghost.appendTo(e.helper)},resize:function(){var e=w(this).resizable("instance");e.ghost&&e.ghost.css({position:"relative",height:e.size.height,width:e.size.width})},stop:function(){var e=w(this).resizable("instance");e.ghost&&e.helper&&e.helper.get(0).removeChild(e.ghost.get(0))}}),w.ui.plugin.add("resizable","grid",{resize:function(){var e,t=w(this).resizable("instance"),r=t.options,n=t.size,i=t.originalSize,o=t.originalPosition,a=t.axis,s="number"==typeof r.grid?[r.grid,r.grid]:r.grid,u=s[0]||1,l=s[1]||1,c=Math.round((n.width-i.width)/u)*u,n=Math.round((n.height-i.height)/l)*l,f=i.width+c,h=i.height+n,p=r.maxWidth&&f>r.maxWidth,d=r.maxHeight&&h>r.maxHeight,g=r.minWidth&&r.minWidth>f,y=r.minHeight&&r.minHeight>h;r.grid=s,g&&(f+=u),y&&(h+=l),p&&(f-=u),d&&(h-=l),/^(se|s|e)$/.test(a)?(t.size.width=f,t.size.height=h):/^(ne)$/.test(a)?(t.size.width=f,t.size.height=h,t.position.top=o.top-n):/^(sw)$/.test(a)?(t.size.width=f,t.size.height=h,t.position.left=o.left-c):((h-l<=0||f-u<=0)&&(e=t._getPaddingPlusBorderDimensions(this)),0<h-l?(t.size.height=h,t.position.top=o.top-n):(h=l-e.height,t.size.height=h,t.position.top=o.top+i.height-h),0<f-u?(t.size.width=f,t.position.left=o.left-c):(f=l-e.height,t.size.width=f,t.position.left=o.left+i.width-f))}}),w.ui.resizable,w.widget("ui.selectable",w.ui.mouse,{version:"1.11.2",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var e,t=this;this.element.addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){(e=w(t.options.filter,t.element[0])).addClass("ui-selectee"),e.each(function(){var e=w(this),t=e.offset();w.data(this,"selectable-item",{element:this,$element:e,left:t.left,top:t.top,right:t.left+e.outerWidth(),bottom:t.top+e.outerHeight(),startselected:!1,selected:e.hasClass("ui-selected"),selecting:e.hasClass("ui-selecting"),unselecting:e.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=e.addClass("ui-selectee"),this._mouseInit(),this.helper=w("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled"),this._mouseDestroy()},_mouseStart:function(r){var n=this,e=this.options;this.opos=[r.pageX,r.pageY],this.options.disabled||(this.selectees=w(e.filter,this.element[0]),this._trigger("start",r),w(e.appendTo).append(this.helper),this.helper.css({left:r.pageX,top:r.pageY,width:0,height:0}),e.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var e=w.data(this,"selectable-item");e.startselected=!0,r.metaKey||r.ctrlKey||(e.$element.removeClass("ui-selected"),e.selected=!1,e.$element.addClass("ui-unselecting"),e.unselecting=!0,n._trigger("unselecting",r,{unselecting:e.element}))}),w(r.target).parents().addBack().each(function(){var e,t=w.data(this,"selectable-item");return t?(e=!r.metaKey&&!r.ctrlKey||!t.$element.hasClass("ui-selected"),t.$element.removeClass(e?"ui-unselecting":"ui-selected").addClass(e?"ui-selecting":"ui-unselecting"),t.unselecting=!e,t.selecting=e,(t.selected=e)?n._trigger("selecting",r,{selecting:t.element}):n._trigger("unselecting",r,{unselecting:t.element}),!1):void 0}))},_mouseDrag:function(r){var e,n,i,o,a,s,u;if(this.dragged=!0,!this.options.disabled)return i=(n=this).options,o=this.opos[0],a=this.opos[1],s=r.pageX,u=r.pageY,s<o&&(e=s,s=o,o=e),u<a&&(e=u,u=a,a=e),this.helper.css({left:o,top:a,width:s-o,height:u-a}),this.selectees.each(function(){var e=w.data(this,"selectable-item"),t=!1;e&&e.element!==n.element[0]&&("touch"===i.tolerance?t=!(e.left>s||o>e.right||e.top>u||a>e.bottom):"fit"===i.tolerance&&(t=e.left>o&&s>e.right&&e.top>a&&u>e.bottom),t?(e.selected&&(e.$element.removeClass("ui-selected"),e.selected=!1),e.unselecting&&(e.$element.removeClass("ui-unselecting"),e.unselecting=!1),e.selecting||(e.$element.addClass("ui-selecting"),e.selecting=!0,n._trigger("selecting",r,{selecting:e.element}))):(e.selecting&&((r.metaKey||r.ctrlKey)&&e.startselected?(e.$element.removeClass("ui-selecting"),e.selecting=!1,e.$element.addClass("ui-selected"),e.selected=!0):(e.$element.removeClass("ui-selecting"),e.selecting=!1,e.startselected&&(e.$element.addClass("ui-unselecting"),e.unselecting=!0),n._trigger("unselecting",r,{unselecting:e.element}))),!e.selected||r.metaKey||r.ctrlKey||e.startselected||(e.$element.removeClass("ui-selected"),e.selected=!1,e.$element.addClass("ui-unselecting"),e.unselecting=!0,n._trigger("unselecting",r,{unselecting:e.element}))))}),!1},_mouseStop:function(t){var r=this;return this.dragged=!1,w(".ui-unselecting",this.element[0]).each(function(){var e=w.data(this,"selectable-item");e.$element.removeClass("ui-unselecting"),e.unselecting=!1,e.startselected=!1,r._trigger("unselected",t,{unselected:e.element})}),w(".ui-selecting",this.element[0]).each(function(){var e=w.data(this,"selectable-item");e.$element.removeClass("ui-selecting").addClass("ui-selected"),e.selecting=!1,e.selected=!0,e.startselected=!0,r._trigger("selected",t,{selected:e.element})}),this._trigger("stop",t),this.helper.remove(),!1}}),w.widget("ui.sortable",w.ui.mouse,{version:"1.11.2",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(e,t,r){return t<=e&&e<t+r},_isFloating:function(e){return/left|right/.test(e.css("float"))||/inline|table-cell/.test(e.css("display"))},_create:function(){var e=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=!!this.items.length&&("x"===e.axis||this._isFloating(this.items[0].item)),this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(e,t){this._super(e,t),"handle"===e&&this._setHandleClassName()},_setHandleClassName:function(){this.element.find(".ui-sortable-handle").removeClass("ui-sortable-handle"),w.each(this.items,function(){(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item).addClass("ui-sortable-handle")})},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled").find(".ui-sortable-handle").removeClass("ui-sortable-handle"),this._mouseDestroy();for(var e=this.items.length-1;0<=e;e--)this.items[e].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(e,t){var r=null,n=!1,i=this;return!(this.reverting||this.options.disabled||"static"===this.options.type||(this._refreshItems(e),w(e.target).parents().each(function(){return w.data(this,i.widgetName+"-item")===i?(r=w(this),!1):void 0}),!(r=w.data(e.target,i.widgetName+"-item")===i?w(e.target):r))||(this.options.handle&&!t&&(w(this.options.handle,r).find("*").addBack().each(function(){this===e.target&&(n=!0)}),!n)||(this.currentItem=r,this._removeCurrentsFromItems(),0)))},_mouseStart:function(e,t,r){var n,i,o=this.options;if((this.currentContainer=this).refreshPositions(),this.helper=this._createHelper(e),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},w.extend(this.offset,{click:{left:e.pageX-this.offset.left,top:e.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(e),this.originalPageX=e.pageX,this.originalPageY=e.pageY,o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),o.containment&&this._setContainment(),o.cursor&&"auto"!==o.cursor&&(i=this.document.find("body"),this.storedCursor=i.css("cursor"),i.css("cursor",o.cursor),this.storedStylesheet=w("<style>*{ cursor: "+o.cursor+" !important; }</style>").appendTo(i)),o.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",o.opacity)),o.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",o.zIndex)),this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",e,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!r)for(n=this.containers.length-1;0<=n;n--)this.containers[n]._trigger("activate",e,this._uiHash(this));return w.ui.ddmanager&&(w.ui.ddmanager.current=this),w.ui.ddmanager&&!o.dropBehaviour&&w.ui.ddmanager.prepareOffsets(this,e),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(e),!0},_mouseDrag:function(e){var t,r,n,i,o=this.options,a=!1;for(this.position=this._generatePosition(e),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-e.pageY<o.scrollSensitivity?this.scrollParent[0].scrollTop=a=this.scrollParent[0].scrollTop+o.scrollSpeed:e.pageY-this.overflowOffset.top<o.scrollSensitivity&&(this.scrollParent[0].scrollTop=a=this.scrollParent[0].scrollTop-o.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-e.pageX<o.scrollSensitivity?this.scrollParent[0].scrollLeft=a=this.scrollParent[0].scrollLeft+o.scrollSpeed:e.pageX-this.overflowOffset.left<o.scrollSensitivity&&(this.scrollParent[0].scrollLeft=a=this.scrollParent[0].scrollLeft-o.scrollSpeed)):(e.pageY-w(document).scrollTop()<o.scrollSensitivity?a=w(document).scrollTop(w(document).scrollTop()-o.scrollSpeed):w(window).height()-(e.pageY-w(document).scrollTop())<o.scrollSensitivity&&(a=w(document).scrollTop(w(document).scrollTop()+o.scrollSpeed)),e.pageX-w(document).scrollLeft()<o.scrollSensitivity?a=w(document).scrollLeft(w(document).scrollLeft()-o.scrollSpeed):w(window).width()-(e.pageX-w(document).scrollLeft())<o.scrollSensitivity&&(a=w(document).scrollLeft(w(document).scrollLeft()+o.scrollSpeed))),!1!==a)&&w.ui.ddmanager&&!o.dropBehaviour&&w.ui.ddmanager.prepareOffsets(this,e),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),t=this.items.length-1;0<=t;t--)if(n=(r=this.items[t]).item[0],(i=this._intersectsWithPointer(r))&&r.instance===this.currentContainer&&n!==this.currentItem[0]&&this.placeholder[1===i?"next":"prev"]()[0]!==n&&!w.contains(this.placeholder[0],n)&&("semi-dynamic"!==this.options.type||!w.contains(this.element[0],n))){if(this.direction=1===i?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(r))break;this._rearrange(e,r),this._trigger("change",e,this._uiHash());break}return this._contactContainers(e),w.ui.ddmanager&&w.ui.ddmanager.drag(this,e),this._trigger("sort",e,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(e,t){var r,n,i,o;if(e)return w.ui.ddmanager&&!this.options.dropBehaviour&&w.ui.ddmanager.drop(this,e),this.options.revert?(n=(r=this).placeholder.offset(),o={},(i=this.options.axis)&&"x"!==i||(o.left=n.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft)),i&&"y"!==i||(o.top=n.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,w(this.helper).animate(o,parseInt(this.options.revert,10)||500,function(){r._clear(e)})):this._clear(e,t),!1},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var e=this.containers.length-1;0<=e;e--)this.containers[e]._trigger("deactivate",null,this._uiHash(this)),this.containers[e].containerCache.over&&(this.containers[e]._trigger("out",null,this._uiHash(this)),this.containers[e].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),w.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?w(this.domPosition.prev).after(this.currentItem):w(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var e=this._getItemsAsjQuery(t&&t.connected),r=[];return t=t||{},w(e).each(function(){var e=(w(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[\-=_](.+)/);e&&r.push((t.key||e[1]+"[]")+"="+(t.key&&t.expression?e[1]:e[2]))}),!r.length&&t.key&&r.push(t.key+"="),r.join("&")},toArray:function(e){var t=this._getItemsAsjQuery(e&&e.connected),r=[];return e=e||{},t.each(function(){r.push(w(e.item||this).attr(e.attribute||"id")||"")}),r},_intersectsWith:function(e){var t=this.positionAbs.left,r=t+this.helperProportions.width,n=this.positionAbs.top,i=n+this.helperProportions.height,o=e.left,a=o+e.width,s=e.top,u=s+e.height,l=this.offset.click.top,c=this.offset.click.left,l="x"===this.options.axis||s<n+l&&n+l<u,c="y"===this.options.axis||o<t+c&&t+c<a;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?l&&c:t+this.helperProportions.width/2>o&&a>r-this.helperProportions.width/2&&n+this.helperProportions.height/2>s&&u>i-this.helperProportions.height/2},_intersectsWithPointer:function(e){var t="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top,e.height),e="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left,e.width),t=t&&e,e=this._getDragVerticalDirection(),r=this._getDragHorizontalDirection();return!!t&&(this.floating?r&&"right"===r||"down"===e?2:1:e&&("down"===e?2:1))},_intersectsWithSides:function(e){var t=this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top+e.height/2,e.height),e=this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left+e.width/2,e.width),r=this._getDragVerticalDirection(),n=this._getDragHorizontalDirection();return this.floating&&n?"right"===n&&e||"left"===n&&!e:r&&("down"===r&&t||"up"===r&&!t)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return 0!=e&&(0<e?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return 0!=e&&(0<e?"right":"left")},refresh:function(e){return this._refreshItems(e),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor===String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(e){function t(){a.push(this)}var r,n,i,o,a=[],s=[],u=this._connectWith();if(u&&e)for(r=u.length-1;0<=r;r--)for(n=(i=w(u[r])).length-1;0<=n;n--)(o=w.data(i[n],this.widgetFullName))&&o!==this&&!o.options.disabled&&s.push([w.isFunction(o.options.items)?o.options.items.call(o.element):w(o.options.items,o.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),o]);for(s.push([w.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):w(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),r=s.length-1;0<=r;r--)s[r][0].each(t);return w(a)},_removeCurrentsFromItems:function(){var r=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=w.grep(this.items,function(e){for(var t=0;r.length>t;t++)if(r[t]===e.item[0])return!1;return!0})},_refreshItems:function(e){this.items=[],this.containers=[this];var t,r,n,i,o,a,s,u,l=this.items,c=[[w.isFunction(this.options.items)?this.options.items.call(this.element[0],e,{item:this.currentItem}):w(this.options.items,this.element),this]],f=this._connectWith();if(f&&this.ready)for(t=f.length-1;0<=t;t--)for(r=(n=w(f[t])).length-1;0<=r;r--)(i=w.data(n[r],this.widgetFullName))&&i!==this&&!i.options.disabled&&(c.push([w.isFunction(i.options.items)?i.options.items.call(i.element[0],e,{item:this.currentItem}):w(i.options.items,i.element),i]),this.containers.push(i));for(t=c.length-1;0<=t;t--)for(o=c[t][1],u=(a=c[t][r=0]).length;r<u;r++)(s=w(a[r])).data(this.widgetName+"-item",o),l.push({item:s,instance:o,width:0,height:0,left:0,top:0})},refreshPositions:function(e){var t,r,n,i;for(this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset()),t=this.items.length-1;0<=t;t--)(r=this.items[t]).instance!==this.currentContainer&&this.currentContainer&&r.item[0]!==this.currentItem[0]||(n=this.options.toleranceElement?w(this.options.toleranceElement,r.item):r.item,e||(r.width=n.outerWidth(),r.height=n.outerHeight()),i=n.offset(),r.left=i.left,r.top=i.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(t=this.containers.length-1;0<=t;t--)i=this.containers[t].element.offset(),this.containers[t].containerCache.left=i.left,this.containers[t].containerCache.top=i.top,this.containers[t].containerCache.width=this.containers[t].element.outerWidth(),this.containers[t].containerCache.height=this.containers[t].element.outerHeight();return this},_createPlaceholder:function(r){var n,i=(r=r||this).options;i.placeholder&&i.placeholder.constructor!==String||(n=i.placeholder,i.placeholder={element:function(){var e=r.currentItem[0].nodeName.toLowerCase(),t=w("<"+e+">",r.document[0]).addClass(n||r.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tr"===e?r.currentItem.children().each(function(){w("<td>&#160;</td>",r.document[0]).attr("colspan",w(this).attr("colspan")||1).appendTo(t)}):"img"===e&&t.attr("src",r.currentItem.attr("src")),n||t.css("visibility","hidden"),t},update:function(e,t){n&&!i.forcePlaceholderSize||(t.height()||t.height(r.currentItem.innerHeight()-parseInt(r.currentItem.css("paddingTop")||0,10)-parseInt(r.currentItem.css("paddingBottom")||0,10)),t.width())||t.width(r.currentItem.innerWidth()-parseInt(r.currentItem.css("paddingLeft")||0,10)-parseInt(r.currentItem.css("paddingRight")||0,10))}}),r.placeholder=w(i.placeholder.element.call(r.element,r.currentItem)),r.currentItem.after(r.placeholder),i.placeholder.update(r,r.placeholder)},_contactContainers:function(e){for(var t,r,n,i,o,a,s,u,l,c=null,f=null,h=this.containers.length-1;0<=h;h--)if(!w.contains(this.currentItem[0],this.containers[h].element[0]))if(this._intersectsWith(this.containers[h].containerCache)){if(c&&w.contains(this.containers[h].element[0],c.element[0]))continue;c=this.containers[h],f=h}else this.containers[h].containerCache.over&&(this.containers[h]._trigger("out",e,this._uiHash(this)),this.containers[h].containerCache.over=0);if(c)if(1===this.containers.length)this.containers[f].containerCache.over||(this.containers[f]._trigger("over",e,this._uiHash(this)),this.containers[f].containerCache.over=1);else{for(r=1e4,n=null,i=(u=c.floating||this._isFloating(this.currentItem))?"left":"top",o=u?"width":"height",l=u?"clientX":"clientY",t=this.items.length-1;0<=t;t--)w.contains(this.containers[f].element[0],this.items[t].item[0])&&this.items[t].item[0]!==this.currentItem[0]&&(a=this.items[t].item.offset()[i],s=!1,e[l]-a>this.items[t][o]/2&&(s=!0),r>Math.abs(e[l]-a))&&(r=Math.abs(e[l]-a),n=this.items[t],this.direction=s?"up":"down");(n||this.options.dropOnEmpty)&&(this.currentContainer===this.containers[f]?this.currentContainer.containerCache.over||(this.containers[f]._trigger("over",e,this._uiHash()),this.currentContainer.containerCache.over=1):(n?this._rearrange(e,n,null,!0):this._rearrange(e,null,this.containers[f].element,!0),this._trigger("change",e,this._uiHash()),this.containers[f]._trigger("change",e,this._uiHash(this)),this.currentContainer=this.containers[f],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[f]._trigger("over",e,this._uiHash(this)),this.containers[f].containerCache.over=1))}},_createHelper:function(e){var t=this.options,e=w.isFunction(t.helper)?w(t.helper.apply(this.element[0],[e,this.currentItem])):"clone"===t.helper?this.currentItem.clone():this.currentItem;return e.parents("body").length||w("parent"!==t.appendTo?t.appendTo:this.currentItem[0].parentNode)[0].appendChild(e[0]),e[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),e[0].style.width&&!t.forceHelperSize||e.width(this.currentItem.width()),e[0].style.height&&!t.forceHelperSize||e.height(this.currentItem.height()),e},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),"left"in(e=w.isArray(e)?{left:+e[0],top:+e[1]||0}:e)&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var e=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&w.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),{top:(e=this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&w.ui.ie?{top:0,left:0}:e).top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){var e;return"relative"===this.cssPosition?{top:(e=this.currentItem.position()).top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}:{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,t,r=this.options;"parent"===r.containment&&(r.containment=this.helper[0].parentNode),"document"!==r.containment&&"window"!==r.containment||(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,w("document"===r.containment?document:window).width()-this.helperProportions.width-this.margins.left,(w("document"===r.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(r.containment)||(e=w(r.containment)[0],r=w(r.containment).offset(),t="hidden"!==w(e).css("overflow"),this.containment=[r.left+(parseInt(w(e).css("borderLeftWidth"),10)||0)+(parseInt(w(e).css("paddingLeft"),10)||0)-this.margins.left,r.top+(parseInt(w(e).css("borderTopWidth"),10)||0)+(parseInt(w(e).css("paddingTop"),10)||0)-this.margins.top,r.left+(t?Math.max(e.scrollWidth,e.offsetWidth):e.offsetWidth)-(parseInt(w(e).css("borderLeftWidth"),10)||0)-(parseInt(w(e).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,r.top+(t?Math.max(e.scrollHeight,e.offsetHeight):e.offsetHeight)-(parseInt(w(e).css("borderTopWidth"),10)||0)-(parseInt(w(e).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(e,t){t=t||this.position;var e="absolute"===e?1:-1,r="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&w.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,n=/(html|body)/i.test(r[0].tagName);return{top:t.top+this.offset.relative.top*e+this.offset.parent.top*e-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():n?0:r.scrollTop())*e,left:t.left+this.offset.relative.left*e+this.offset.parent.left*e-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():n?0:r.scrollLeft())*e}},_generatePosition:function(e){var t=this.options,r=e.pageX,n=e.pageY,i="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&w.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,o=/(html|body)/i.test(i[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==document&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(e.pageX-this.offset.click.left<this.containment[0]&&(r=this.containment[0]+this.offset.click.left),e.pageY-this.offset.click.top<this.containment[1]&&(n=this.containment[1]+this.offset.click.top),e.pageX-this.offset.click.left>this.containment[2]&&(r=this.containment[2]+this.offset.click.left),e.pageY-this.offset.click.top>this.containment[3])&&(n=this.containment[3]+this.offset.click.top),t.grid)&&(e=this.originalPageY+Math.round((n-this.originalPageY)/t.grid[1])*t.grid[1],n=!this.containment||e-this.offset.click.top>=this.containment[1]&&e-this.offset.click.top<=this.containment[3]?e:e-this.offset.click.top>=this.containment[1]?e-t.grid[1]:e+t.grid[1],e=this.originalPageX+Math.round((r-this.originalPageX)/t.grid[0])*t.grid[0],r=!this.containment||e-this.offset.click.left>=this.containment[0]&&e-this.offset.click.left<=this.containment[2]?e:e-this.offset.click.left>=this.containment[0]?e-t.grid[0]:e+t.grid[0]),{top:n-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():o?0:i.scrollTop()),left:r-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():o?0:i.scrollLeft())}},_rearrange:function(e,t,r,n){r?r[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var i=this.counter;this._delay(function(){i===this.counter&&this.refreshPositions(!n)})},_clear:function(e,t){function r(t,r,n){return function(e){n._trigger(t,e,r._uiHash(r))}}this.reverting=!1;var n,i=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(n in this._storedCSS)"auto"!==this._storedCSS[n]&&"static"!==this._storedCSS[n]||(this._storedCSS[n]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!t&&i.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||t||i.push(function(e){this._trigger("update",e,this._uiHash())}),this===this.currentContainer||t||(i.push(function(e){this._trigger("remove",e,this._uiHash())}),i.push(function(t){return function(e){t._trigger("receive",e,this._uiHash(this))}}.call(this,this.currentContainer)),i.push(function(t){return function(e){t._trigger("update",e,this._uiHash(this))}}.call(this,this.currentContainer))),n=this.containers.length-1;0<=n;n--)t||i.push(r("deactivate",this,this.containers[n])),this.containers[n].containerCache.over&&(i.push(r("out",this,this.containers[n])),this.containers[n].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,t||this._trigger("beforeStop",e,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null),!t){for(n=0;n<i.length;n++)i[n].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(){!1===w.Widget.prototype._trigger.apply(this,arguments)&&this.cancel()},_uiHash:function(e){var t=e||this;return{helper:t.helper,placeholder:t.placeholder||w([]),position:t.position,originalPosition:t.originalPosition,offset:t.positionAbs,item:t.currentItem,sender:e?e.element:null}}}),w.widget("ui.accordion",{version:"1.11.2",options:{active:0,animate:{},collapsible:!1,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},hideProps:{borderTopWidth:"hide",borderBottomWidth:"hide",paddingTop:"hide",paddingBottom:"hide",height:"hide"},showProps:{borderTopWidth:"show",borderBottomWidth:"show",paddingTop:"show",paddingBottom:"show",height:"show"},_create:function(){var e=this.options;this.prevShow=this.prevHide=w(),this.element.addClass("ui-accordion ui-widget ui-helper-reset").attr("role","tablist"),e.collapsible||!1!==e.active&&null!=e.active||(e.active=0),this._processPanels(),e.active<0&&(e.active+=this.headers.length),this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:this.active.length?this.active.next():w()}},_createIcons:function(){var e=this.options.icons;e&&(w("<span>").addClass("ui-accordion-header-icon ui-icon "+e.header).prependTo(this.headers),this.active.children(".ui-accordion-header-icon").removeClass(e.header).addClass(e.activeHeader),this.headers.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()},_destroy:function(){var e;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").removeUniqueId(),this._destroyIcons(),e=this.headers.next().removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").css("display","").removeAttr("role").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeUniqueId(),"content"!==this.options.heightStyle&&e.css("height","")},_setOption:function(e,t){return"active"===e?void this._activate(t):("event"===e&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(t)),this._super(e,t),"collapsible"!==e||t||!1!==this.options.active||this._activate(0),"icons"===e&&(this._destroyIcons(),t)&&this._createIcons(),void("disabled"===e&&(this.element.toggleClass("ui-state-disabled",!!t).attr("aria-disabled",t),this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!t))))},_keydown:function(e){if(!e.altKey&&!e.ctrlKey){var t=w.ui.keyCode,r=this.headers.length,n=this.headers.index(e.target),i=!1;switch(e.keyCode){case t.RIGHT:case t.DOWN:i=this.headers[(n+1)%r];break;case t.LEFT:case t.UP:i=this.headers[(n-1+r)%r];break;case t.SPACE:case t.ENTER:this._eventHandler(e);break;case t.HOME:i=this.headers[0];break;case t.END:i=this.headers[r-1]}i&&(w(e.target).attr("tabIndex",-1),w(i).attr("tabIndex",0),i.focus(),e.preventDefault())}},_panelKeyDown:function(e){e.keyCode===w.ui.keyCode.UP&&e.ctrlKey&&w(e.currentTarget).prev().focus()},refresh:function(){var e=this.options;this._processPanels(),!1===e.active&&!0===e.collapsible||!this.headers.length?(e.active=!1,this.active=w()):!1===e.active?this._activate(0):this.active.length&&!w.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(e.active=!1,this.active=w()):this._activate(Math.max(0,e.active-1)):e.active=this.headers.index(this.active),this._destroyIcons(),this._refresh()},_processPanels:function(){var e=this.headers,t=this.panels;this.headers=this.element.find(this.options.header).addClass("ui-accordion-header ui-state-default ui-corner-all"),this.panels=this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").filter(":not(.ui-accordion-content-active)").hide(),t&&(this._off(e.not(this.headers)),this._off(t.not(this.panels)))},_refresh:function(){var r,e=this.options,t=e.heightStyle,n=this.element.parent();this.active=this._findActive(e.active).addClass("ui-accordion-header-active ui-state-active ui-corner-top").removeClass("ui-corner-all"),this.active.next().addClass("ui-accordion-content-active").show(),this.headers.attr("role","tab").each(function(){var e=w(this),t=e.uniqueId().attr("id"),r=e.next(),n=r.uniqueId().attr("id");e.attr("aria-controls",n),r.attr("aria-labelledby",t)}).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}).next().attr({"aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}).next().attr({"aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._createIcons(),this._setupEvents(e.event),"fill"===t?(r=n.height(),this.element.siblings(":visible").each(function(){var e=w(this),t=e.css("position");"absolute"!==t&&"fixed"!==t&&(r-=e.outerHeight(!0))}),this.headers.each(function(){r-=w(this).outerHeight(!0)}),this.headers.next().each(function(){w(this).height(Math.max(0,r-w(this).innerHeight()+w(this).height()))}).css("overflow","auto")):"auto"===t&&(r=0,this.headers.next().each(function(){r=Math.max(r,w(this).css("height","").height())}).height(r))},_activate:function(e){e=this._findActive(e)[0];e!==this.active[0]&&(e=e||this.active[0],this._eventHandler({target:e,currentTarget:e,preventDefault:w.noop}))},_findActive:function(e){return"number"==typeof e?this.headers.eq(e):w()},_setupEvents:function(e){var r={keydown:"_keydown"};e&&w.each(e.split(" "),function(e,t){r[t]="_eventHandler"}),this._off(this.headers.add(this.headers.next())),this._on(this.headers,r),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._hoverable(this.headers),this._focusable(this.headers)},_eventHandler:function(e){var t=this.options,r=this.active,n=w(e.currentTarget),i=n[0]===r[0],o=i&&t.collapsible,a=o?w():n.next(),s=r.next(),s={oldHeader:r,oldPanel:s,newHeader:o?w():n,newPanel:a};e.preventDefault(),i&&!t.collapsible||!1===this._trigger("beforeActivate",e,s)||(t.active=!o&&this.headers.index(n),this.active=i?w():n,this._toggle(s),r.removeClass("ui-accordion-header-active ui-state-active"),t.icons&&r.children(".ui-accordion-header-icon").removeClass(t.icons.activeHeader).addClass(t.icons.header),i)||(n.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"),t.icons&&n.children(".ui-accordion-header-icon").removeClass(t.icons.header).addClass(t.icons.activeHeader),n.next().addClass("ui-accordion-content-active"))},_toggle:function(e){var t=e.newPanel,r=this.prevShow.length?this.prevShow:e.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=t,this.prevHide=r,this.options.animate?this._animate(t,r,e):(r.hide(),t.show(),this._toggleComplete(e)),r.attr({"aria-hidden":"true"}),r.prev().attr("aria-selected","false"),t.length&&r.length?r.prev().attr({tabIndex:-1,"aria-expanded":"false"}):t.length&&this.headers.filter(function(){return 0===w(this).attr("tabIndex")}).attr("tabIndex",-1),t.attr("aria-hidden","false").prev().attr({"aria-selected":"true",tabIndex:0,"aria-expanded":"true"})},_animate:function(e,r,t){function n(){o._toggleComplete(t)}var i,o=this,a=0,s=e.length&&(!r.length||e.index()<r.index()),u=this.options.animate||{},s=s&&u.down||u,l=(l="string"==typeof s?s:l)||s.easing||u.easing,c=(c="number"==typeof s?s:c)||s.duration||u.duration;return r.length?e.length?(i=e.show().outerHeight(),r.animate(this.hideProps,{duration:c,easing:l,step:function(e,t){t.now=Math.round(e)}}),void e.hide().animate(this.showProps,{duration:c,easing:l,complete:n,step:function(e,t){t.now=Math.round(e),"height"!==t.prop?a+=t.now:"content"!==o.options.heightStyle&&(t.now=Math.round(i-r.outerHeight()-a),a=0)}})):r.animate(this.hideProps,c,l,n):e.animate(this.showProps,c,l,n)},_toggleComplete:function(e){var t=e.oldPanel;t.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all"),t.length&&(t.parent()[0].className=t.parent()[0].className),this._trigger("activate",null,e)}}),w.widget("ui.menu",{version:"1.11.2",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},items:"> *",menus:"ul",position:{my:"left-1 top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item":function(e){e.preventDefault()},"click .ui-menu-item":function(e){var t=w(e.target);!this.mouseHandled&&t.not(".ui-state-disabled").length&&(this.select(e),e.isPropagationStopped()||(this.mouseHandled=!0),t.has(".ui-menu").length?this.expand(e):!this.element.is(":focus")&&w(this.document[0].activeElement).closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active)&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer))},"mouseenter .ui-menu-item":function(e){var t;this.previousFilter||((t=w(e.currentTarget)).siblings(".ui-state-active").removeClass("ui-state-active"),this.focus(e,t))},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(e,t){var r=this.active||this.element.find(this.options.items).eq(0);t||this.focus(e,r)},blur:function(e){this._delay(function(){w.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(e)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(e){this._closeOnDocumentClick(e)&&this.collapseAll(e),this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-menu-icons ui-front").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").removeUniqueId().removeClass("ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var e=w(this);e.data("ui-menu-submenu-carat")&&e.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(e){var t,r,n,i=!0;switch(e.keyCode){case w.ui.keyCode.PAGE_UP:this.previousPage(e);break;case w.ui.keyCode.PAGE_DOWN:this.nextPage(e);break;case w.ui.keyCode.HOME:this._move("first","first",e);break;case w.ui.keyCode.END:this._move("last","last",e);break;case w.ui.keyCode.UP:this.previous(e);break;case w.ui.keyCode.DOWN:this.next(e);break;case w.ui.keyCode.LEFT:this.collapse(e);break;case w.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(e);break;case w.ui.keyCode.ENTER:case w.ui.keyCode.SPACE:this._activate(e);break;case w.ui.keyCode.ESCAPE:this.collapse(e);break;default:i=!1,t=this.previousFilter||"",r=String.fromCharCode(e.keyCode),n=!1,clearTimeout(this.filterTimer),r===t?n=!0:r=t+r,t=this._filterMenuItems(r),(t=n&&-1!==t.index(this.active.next())?this.active.nextAll(".ui-menu-item"):t).length||(r=String.fromCharCode(e.keyCode),t=this._filterMenuItems(r)),t.length?(this.focus(e,t),this.previousFilter=r,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter}i&&e.preventDefault()},_activate:function(e){this.active.is(".ui-state-disabled")||(this.active.is("[aria-haspopup='true']")?this.expand(e):this.select(e))},refresh:function(){var t=this,n=this.options.icons.submenu,e=this.element.find(this.options.menus);this.element.toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length),e.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-front").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var e=w(this),t=e.parent(),r=w("<span>").addClass("ui-menu-icon ui-icon "+n).data("ui-menu-submenu-carat",!0);t.attr("aria-haspopup","true").prepend(r),e.attr("aria-labelledby",t.attr("id"))}),(e=e.add(this.element).find(this.options.items)).not(".ui-menu-item").each(function(){var e=w(this);t._isDivider(e)&&e.addClass("ui-widget-content ui-menu-divider")}),e.not(".ui-menu-item, .ui-menu-divider").addClass("ui-menu-item").uniqueId().attr({tabIndex:-1,role:this._itemRole()}),e.filter(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!w.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(e,t){"icons"===e&&this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(t.submenu),"disabled"===e&&this.element.toggleClass("ui-state-disabled",!!t).attr("aria-disabled",t),this._super(e,t)},focus:function(e,t){var r;this.blur(e,e&&"focus"===e.type),this._scrollIntoView(t),this.active=t.first(),r=this.active.addClass("ui-state-focus").removeClass("ui-state-active"),this.options.role&&this.element.attr("aria-activedescendant",r.attr("id")),this.active.parent().closest(".ui-menu-item").addClass("ui-state-active"),e&&"keydown"===e.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),(r=t.children(".ui-menu")).length&&e&&/^mouse/.test(e.type)&&this._startOpening(r),this.activeMenu=t.parent(),this._trigger("focus",e,{item:t})},_scrollIntoView:function(e){var t,r,n;this._hasScroll()&&(t=parseFloat(w.css(this.activeMenu[0],"borderTopWidth"))||0,r=parseFloat(w.css(this.activeMenu[0],"paddingTop"))||0,t=e.offset().top-this.activeMenu.offset().top-t-r,r=this.activeMenu.scrollTop(),n=this.activeMenu.height(),e=e.outerHeight(),t<0?this.activeMenu.scrollTop(r+t):n<t+e&&this.activeMenu.scrollTop(r+t-n+e))},blur:function(e,t){t||clearTimeout(this.timer),this.active&&(this.active.removeClass("ui-state-focus"),this.active=null,this._trigger("blur",e,{item:this.active}))},_startOpening:function(e){clearTimeout(this.timer),"true"===e.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(e)},this.delay))},_open:function(e){var t=w.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(e.parents(".ui-menu")).hide().attr("aria-hidden","true"),e.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(t)},collapseAll:function(t,r){clearTimeout(this.timer),this.timer=this._delay(function(){var e=r?this.element:w(t&&t.target).closest(this.element.find(".ui-menu"));e.length||(e=this.element),this._close(e),this.blur(t),this.activeMenu=e},this.delay)},_close:function(e){(e=e||(this.active?this.active.parent():this.element)).find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find(".ui-state-active").not(".ui-state-focus").removeClass("ui-state-active")},_closeOnDocumentClick:function(e){return!w(e.target).closest(".ui-menu").length},_isDivider:function(e){return!/[^\-\u2014\u2013\s]/.test(e.text())},collapse:function(e){var t=this.active&&this.active.parent().closest(".ui-menu-item",this.element);t&&t.length&&(this._close(),this.focus(e,t))},expand:function(e){var t=this.active&&this.active.children(".ui-menu ").find(this.options.items).first();t&&t.length&&(this._open(t.parent()),this._delay(function(){this.focus(e,t)}))},next:function(e){this._move("next","first",e)},previous:function(e){this._move("prev","last",e)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(e,t,r){var n;(n=this.active?"first"===e||"last"===e?this.active["first"===e?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[e+"All"](".ui-menu-item").eq(0):n)&&n.length&&this.active||(n=this.activeMenu.find(this.options.items)[t]()),this.focus(r,n)},nextPage:function(e){var t,r,n;return this.active?void(this.isLastItem()||(this._hasScroll()?(r=this.active.offset().top,n=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return(t=w(this)).offset().top-r-n<0}),this.focus(e,t)):this.focus(e,this.activeMenu.find(this.options.items)[this.active?"last":"first"]()))):void this.next(e)},previousPage:function(e){var t,r,n;return this.active?void(this.isFirstItem()||(this._hasScroll()?(r=this.active.offset().top,n=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return 0<(t=w(this)).offset().top-r+n}),this.focus(e,t)):this.focus(e,this.activeMenu.find(this.options.items).first()))):void this.next(e)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(e){this.active=this.active||w(e.target).closest(".ui-menu-item");var t={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(e,!0),this._trigger("select",e,t)},_filterMenuItems:function(e){var e=e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"),t=RegExp("^"+e,"i");return this.activeMenu.find(this.options.items).filter(".ui-menu-item").filter(function(){return t.test(w.trim(w(this).text()))})}}),w.widget("ui.autocomplete",{version:"1.11.2",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,_create:function(){var r,n,i,e=this.element[0].nodeName.toLowerCase(),t="textarea"===e,e="input"===e;this.isMultiLine=t||!e&&this.element.prop("isContentEditable"),this.valueMethod=this.element[t||e?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(e){if(this.element.prop("readOnly"))n=i=r=!0;else{n=i=r=!1;var t=w.ui.keyCode;switch(e.keyCode){case t.PAGE_UP:r=!0,this._move("previousPage",e);break;case t.PAGE_DOWN:r=!0,this._move("nextPage",e);break;case t.UP:r=!0,this._keyEvent("previous",e);break;case t.DOWN:r=!0,this._keyEvent("next",e);break;case t.ENTER:this.menu.active&&(r=!0,e.preventDefault(),this.menu.select(e));break;case t.TAB:this.menu.active&&this.menu.select(e);break;case t.ESCAPE:this.menu.element.is(":visible")&&(this.isMultiLine||this._value(this.term),this.close(e),e.preventDefault());break;default:n=!0,this._searchTimeout(e)}}},keypress:function(e){if(r)r=!1,this.isMultiLine&&!this.menu.element.is(":visible")||e.preventDefault();else if(!n){var t=w.ui.keyCode;switch(e.keyCode){case t.PAGE_UP:this._move("previousPage",e);break;case t.PAGE_DOWN:this._move("nextPage",e);break;case t.UP:this._keyEvent("previous",e);break;case t.DOWN:this._keyEvent("next",e)}}},input:function(e){return i?(i=!1,void e.preventDefault()):void this._searchTimeout(e)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(e){return this.cancelBlur?void delete this.cancelBlur:(clearTimeout(this.searching),this.close(e),void this._change(e))}}),this._initSource(),this.menu=w("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({role:null}).hide().menu("instance"),this._on(this.menu.element,{mousedown:function(e){e.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur});var r=this.menu.element[0];w(e.target).closest(".ui-menu-item").length||this._delay(function(){var t=this;this.document.one("mousedown",function(e){e.target===t.element[0]||e.target===r||w.contains(r,e.target)||t.close()})})},menufocus:function(e,t){var r;return this.isNewMenu&&(this.isNewMenu=!1,e.originalEvent)&&/^mouse/.test(e.originalEvent.type)?(this.menu.blur(),void this.document.one("mousemove",function(){w(e.target).trigger(e.originalEvent)})):(r=t.item.data("ui-autocomplete-item"),!1!==this._trigger("focus",e,{item:r})&&e.originalEvent&&/^key/.test(e.originalEvent.type)&&this._value(r.value),void((t=t.item.attr("aria-label")||r.value)&&w.trim(t).length&&(this.liveRegion.children().hide(),w("<div>").text(t).appendTo(this.liveRegion))))},menuselect:function(e,t){var r=t.item.data("ui-autocomplete-item"),n=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=n,this._delay(function(){this.previous=n,this.selectedItem=r})),!1!==this._trigger("select",e,{item:r})&&this._value(r.value),this.term=this._value(),this.close(e),this.selectedItem=r}}),this.liveRegion=w("<span>",{role:"status","aria-live":"assertive","aria-relevant":"additions"}).addClass("ui-helper-hidden-accessible").appendTo(this.document[0].body),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(e,t){this._super(e,t),"source"===e&&this._initSource(),"appendTo"===e&&this.menu.element.appendTo(this._appendTo()),"disabled"===e&&t&&this.xhr&&this.xhr.abort()},_appendTo:function(){var e=this.options.appendTo;return e=(e=(e=e&&(e.jquery||e.nodeType?w(e):this.document.find(e).eq(0)))&&e[0]?e:this.element.closest(".ui-front")).length?e:this.document[0].body},_initSource:function(){var r,n,i=this;w.isArray(this.options.source)?(r=this.options.source,this.source=function(e,t){t(w.ui.autocomplete.filter(r,e.term))}):"string"==typeof this.options.source?(n=this.options.source,this.source=function(e,t){i.xhr&&i.xhr.abort(),i.xhr=w.ajax({url:n,data:e,dataType:"json",success:function(e){t(e)},error:function(){t([])}})}):this.source=this.options.source},_searchTimeout:function(n){clearTimeout(this.searching),this.searching=this._delay(function(){var e=this.term===this._value(),t=this.menu.element.is(":visible"),r=n.altKey||n.ctrlKey||n.metaKey||n.shiftKey;e&&(t||r)||(this.selectedItem=null,this.search(null,n))},this.options.delay)},search:function(e,t){return e=null!=e?e:this._value(),this.term=this._value(),e.length<this.options.minLength?this.close(t):!1!==this._trigger("search",t)?this._search(e):void 0},_search:function(e){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:e},this._response())},_response:function(){var t=++this.requestIndex;return w.proxy(function(e){t===this.requestIndex&&this.__response(e),this.pending--,this.pending||this.element.removeClass("ui-autocomplete-loading")},this)},__response:function(e){e=e&&this._normalize(e),this._trigger("response",null,{content:e}),!this.options.disabled&&e&&e.length&&!this.cancelSearch?(this._suggest(e),this._trigger("open")):this._close()},close:function(e){this.cancelSearch=!0,this._close(e)},_close:function(e){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",e))},_change:function(e){this.previous!==this._value()&&this._trigger("change",e,{item:this.selectedItem})},_normalize:function(e){return e.length&&e[0].label&&e[0].value?e:w.map(e,function(e){return"string"==typeof e?{label:e,value:e}:w.extend({},e,{label:e.label||e.value,value:e.value||e.label})})},_suggest:function(e){var t=this.menu.element.empty();this._renderMenu(t,e),this.isNewMenu=!0,this.menu.refresh(),t.show(),this._resizeMenu(),t.position(w.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(r,e){var n=this;w.each(e,function(e,t){n._renderItemData(r,t)})},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-autocomplete-item",t)},_renderItem:function(e,t){return w("<li>").text(t.label).appendTo(e)},_move:function(e,t){return this.menu.element.is(":visible")?this.menu.isFirstItem()&&/^previous/.test(e)||this.menu.isLastItem()&&/^next/.test(e)?(this.isMultiLine||this._value(this.term),void this.menu.blur()):void this.menu[e](t):void this.search(null,t)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(e,t){this.isMultiLine&&!this.menu.element.is(":visible")||(this._move(e,t),t.preventDefault())}}),w.extend(w.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(e,t){var r=RegExp(w.ui.autocomplete.escapeRegex(t),"i");return w.grep(e,function(e){return r.test(e.label||e.value||e)})}}),w.widget("ui.autocomplete",w.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(e){return e+(1<e?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(e){var t;this._superApply(arguments),this.options.disabled||this.cancelSearch||(t=e&&e.length?this.options.messages.results(e.length):this.options.messages.noResults,this.liveRegion.children().hide(),w("<div>").text(t).appendTo(this.liveRegion))}}),w.ui.autocomplete;function J(){var e=w(this);setTimeout(function(){e.find(":ui-button").button("refresh")},1)}function Z(e){var t=e.name,r=e.form,n=w([]);return t&&(t=t.replace(/'/g,"\\'"),n=r?w(r).find("[name='"+t+"'][type=radio]"):w("[name='"+t+"'][type=radio]",e.ownerDocument).filter(function(){return!this.form})),n}var y,A,m,v,$,ee,te,re,ne,ie,oe,ae,b,_,S,se,ue,j,x,O,P,k,le="ui-button ui-widget ui-state-default ui-corner-all",ce="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",fe=(w.widget("ui.button",{version:"1.11.2",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,J),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var t=this,r=this.options,e="checkbox"===this.type||"radio"===this.type,n=e?"":"ui-state-active";null===r.label&&(r.label="input"===this.type?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.addClass(le).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){r.disabled||this===y&&w(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){r.disabled||w(this).removeClass(n)}).bind("click"+this.eventNamespace,function(e){r.disabled&&(e.preventDefault(),e.stopImmediatePropagation())}),this._on({focus:function(){this.buttonElement.addClass("ui-state-focus")},blur:function(){this.buttonElement.removeClass("ui-state-focus")}}),e&&this.element.bind("change"+this.eventNamespace,function(){t.refresh()}),"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){return!r.disabled&&void 0}):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(r.disabled)return!1;w(this).addClass("ui-state-active"),t.buttonElement.attr("aria-pressed","true");var e=t.element[0];Z(e).not(e).map(function(){return w(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){return!r.disabled&&(w(this).addClass("ui-state-active"),y=this,void t.document.one("mouseup",function(){y=null}))}).bind("mouseup"+this.eventNamespace,function(){return!r.disabled&&void w(this).removeClass("ui-state-active")}).bind("keydown"+this.eventNamespace,function(e){return!r.disabled&&void(e.keyCode!==w.ui.keyCode.SPACE&&e.keyCode!==w.ui.keyCode.ENTER||w(this).addClass("ui-state-active"))}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){w(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(e){e.keyCode===w.ui.keyCode.SPACE&&w(this).click()})),this._setOption("disabled",r.disabled),this._resetButton()},_determineButtonType:function(){var e,t;this.type=this.element.is("[type=checkbox]")?"checkbox":this.element.is("[type=radio]")?"radio":this.element.is("input")?"input":"button","checkbox"===this.type||"radio"===this.type?(t=this.element.parents().last(),e="label[for='"+this.element.attr("id")+"']",this.buttonElement=t.find(e),this.buttonElement.length||(t=(t.length?t:this.element).siblings(),this.buttonElement=t.filter(e),this.buttonElement.length)||(this.buttonElement=t.find(e)),this.element.addClass("ui-helper-hidden-accessible"),(t=this.element.is(":checked"))&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",t)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(le+" ui-state-active "+ce).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(e,t){return this._super(e,t),"disabled"===e?(this.widget().toggleClass("ui-state-disabled",!!t),this.element.prop("disabled",!!t),void(t&&("checkbox"===this.type||"radio"===this.type?this.buttonElement.removeClass("ui-state-focus"):this.buttonElement.removeClass("ui-state-focus ui-state-active")))):void this._resetButton()},refresh:function(){var e=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");e!==this.options.disabled&&this._setOption("disabled",e),"radio"===this.type?Z(this.element[0]).each(function(){w(this).is(":checked")?w(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):w(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){var e,t,r,n,i;"input"===this.type?this.options.label&&this.element.val(this.options.label):(e=this.buttonElement.removeClass(ce),t=w("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(e.empty()).text(),n=(r=this.options.icons).primary&&r.secondary,i=[],r.primary||r.secondary?(this.options.text&&i.push("ui-button-text-icon"+(n?"s":r.primary?"-primary":"-secondary")),r.primary&&e.prepend("<span class='ui-button-icon-primary ui-icon "+r.primary+"'></span>"),r.secondary&&e.append("<span class='ui-button-icon-secondary ui-icon "+r.secondary+"'></span>"),this.options.text||(i.push(n?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle)||e.attr("title",w.trim(t))):i.push("ui-button-text-only"),e.addClass(i.join(" ")))}}),w.widget("ui.buttonset",{version:"1.11.2",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(e,t){"disabled"===e&&this.buttons.button("option",e,t),this._super(e,t)},refresh:function(){var e="rtl"===this.element.css("direction"),t=this.element.find(this.options.items),r=t.filter(":ui-button");t.not(":ui-button").button(),r.button("refresh"),this.buttons=t.map(function(){return w(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(e?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(e?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return w(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}}),w.ui.button,w.extend(w.ui,{datepicker:{version:"1.11.2"}}),w.extend(e.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(e){return u(this._defaults,e||{}),this},_attachDatepicker:function(e,t){var r,n=e.nodeName.toLowerCase(),i="div"===n||"span"===n;e.id||(this.uuid+=1,e.id="dp"+this.uuid),(r=this._newInst(w(e),i)).settings=w.extend({},t||{}),"input"===n?this._connectDatepicker(e,r):i&&this._inlineDatepicker(e,r)},_newInst:function(e,t){return{id:e[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1"),input:e,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:t,dpDiv:t?r(w("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(e,t){var r=w(e);t.append=w([]),t.trigger=w([]),r.hasClass(this.markerClassName)||(this._attachments(r,t),r.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),this._autoSize(t),w.data(e,"datepicker",t),t.settings.disabled&&this._disableDatepicker(e))},_attachments:function(e,t){var r,n=this._get(t,"appendText"),i=this._get(t,"isRTL");t.append&&t.append.remove(),n&&(t.append=w("<span class='"+this._appendClass+"'>"+n+"</span>"),e[i?"before":"after"](t.append)),e.unbind("focus",this._showDatepicker),t.trigger&&t.trigger.remove(),"focus"!==(n=this._get(t,"showOn"))&&"both"!==n||e.focus(this._showDatepicker),"button"!==n&&"both"!==n||(n=this._get(t,"buttonText"),r=this._get(t,"buttonImage"),t.trigger=w(this._get(t,"buttonImageOnly")?w("<img/>").addClass(this._triggerClass).attr({src:r,alt:n,title:n}):w("<button type='button'></button>").addClass(this._triggerClass).html(r?w("<img/>").attr({src:r,alt:n,title:n}):n)),e[i?"before":"after"](t.trigger),t.trigger.click(function(){return w.datepicker._datepickerShowing&&w.datepicker._lastInput===e[0]?w.datepicker._hideDatepicker():(w.datepicker._datepickerShowing&&w.datepicker._lastInput!==e[0]&&w.datepicker._hideDatepicker(),w.datepicker._showDatepicker(e[0])),!1}))},_autoSize:function(e){var t,r,n,i,o,a;this._get(e,"autoSize")&&!e.inline&&(o=new Date(2009,11,20),(a=this._get(e,"dateFormat")).match(/[DM]/)&&(o.setMonth((t=function(e){for(i=n=r=0;e.length>i;i++)e[i].length>r&&(r=e[i].length,n=i);return n})(this._get(e,a.match(/MM/)?"monthNames":"monthNamesShort"))),o.setDate(t(this._get(e,a.match(/DD/)?"dayNames":"dayNamesShort"))+20-o.getDay())),e.input.attr("size",this._formatDate(e,o).length))},_inlineDatepicker:function(e,t){var r=w(e);r.hasClass(this.markerClassName)||(r.addClass(this.markerClassName).append(t.dpDiv),w.data(e,"datepicker",t),this._setDate(t,this._getDefaultDate(t),!0),this._updateDatepicker(t),this._updateAlternate(t),t.settings.disabled&&this._disableDatepicker(e),t.dpDiv.css("display","block"))},_dialogDatepicker:function(e,t,r,n,i){var o,a=this._dialogInst;return a||(this.uuid+=1,o="dp"+this.uuid,this._dialogInput=w("<input type='text' id='"+o+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.keydown(this._doKeyDown),w("body").append(this._dialogInput),(a=this._dialogInst=this._newInst(this._dialogInput,!1)).settings={},w.data(this._dialogInput[0],"datepicker",a)),u(a.settings,n||{}),t=t&&t.constructor===Date?this._formatDate(a,t):t,this._dialogInput.val(t),this._pos=i?i.length?i:[i.pageX,i.pageY]:null,this._pos||(o=document.documentElement.clientWidth,n=document.documentElement.clientHeight,t=document.documentElement.scrollLeft||document.body.scrollLeft,i=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[o/2-100+t,n/2-150+i]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),a.settings.onSelect=r,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),w.blockUI&&w.blockUI(this.dpDiv),w.data(this._dialogInput[0],"datepicker",a),this},_destroyDatepicker:function(e){var t,r=w(e),n=w.data(e,"datepicker");r.hasClass(this.markerClassName)&&(t=e.nodeName.toLowerCase(),w.removeData(e,"datepicker"),"input"===t?(n.append.remove(),n.trigger.remove(),r.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):"div"!==t&&"span"!==t||r.removeClass(this.markerClassName).empty())},_enableDatepicker:function(t){var e,r=w(t),n=w.data(t,"datepicker");r.hasClass(this.markerClassName)&&("input"===(e=t.nodeName.toLowerCase())?(t.disabled=!1,n.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):"div"!==e&&"span"!==e||((n=r.children("."+this._inlineClass)).children().removeClass("ui-state-disabled"),n.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=w.map(this._disabledInputs,function(e){return e===t?null:e}))},_disableDatepicker:function(t){var e,r=w(t),n=w.data(t,"datepicker");r.hasClass(this.markerClassName)&&("input"===(e=t.nodeName.toLowerCase())?(t.disabled=!0,n.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):"div"!==e&&"span"!==e||((n=r.children("."+this._inlineClass)).children().addClass("ui-state-disabled"),n.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=w.map(this._disabledInputs,function(e){return e===t?null:e}),this._disabledInputs[this._disabledInputs.length]=t)},_isDisabledDatepicker:function(e){if(e)for(var t=0;this._disabledInputs.length>t;t++)if(this._disabledInputs[t]===e)return!0;return!1},_getInst:function(e){try{return w.data(e,"datepicker")}catch(e){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(e,t,r){var n,i,o,a,s=this._getInst(e);return 2===arguments.length&&"string"==typeof t?"defaults"===t?w.extend({},w.datepicker._defaults):s?"all"===t?w.extend({},s.settings):this._get(s,t):null:(n=t||{},"string"==typeof t&&((n={})[t]=r),void(s&&(this._curInst===s&&this._hideDatepicker(),i=this._getDateDatepicker(e,!0),o=this._getMinMaxDate(s,"min"),a=this._getMinMaxDate(s,"max"),u(s.settings,n),null!==o&&void 0!==n.dateFormat&&void 0===n.minDate&&(s.settings.minDate=this._formatDate(s,o)),null!==a&&void 0!==n.dateFormat&&void 0===n.maxDate&&(s.settings.maxDate=this._formatDate(s,a)),"disabled"in n&&(n.disabled?this._disableDatepicker(e):this._enableDatepicker(e)),this._attachments(w(e),s),this._autoSize(s),this._setDate(s,i),this._updateAlternate(s),this._updateDatepicker(s))))},_changeDatepicker:function(e,t,r){this._optionDatepicker(e,t,r)},_refreshDatepicker:function(e){e=this._getInst(e);e&&this._updateDatepicker(e)},_setDateDatepicker:function(e,t){e=this._getInst(e);e&&(this._setDate(e,t),this._updateDatepicker(e),this._updateAlternate(e))},_getDateDatepicker:function(e,t){e=this._getInst(e);return e&&!e.inline&&this._setDateFromField(e,t),e?this._getDate(e):null},_doKeyDown:function(e){var t,r,n=w.datepicker._getInst(e.target),i=!0,o=n.dpDiv.is(".ui-datepicker-rtl");if(n._keyEvent=!0,w.datepicker._datepickerShowing)switch(e.keyCode){case 9:w.datepicker._hideDatepicker(),i=!1;break;case 13:return(r=w("td."+w.datepicker._dayOverClass+":not(."+w.datepicker._currentClass+")",n.dpDiv))[0]&&w.datepicker._selectDay(e.target,n.selectedMonth,n.selectedYear,r[0]),(r=w.datepicker._get(n,"onSelect"))?(t=w.datepicker._formatDate(n),r.apply(n.input?n.input[0]:null,[t,n])):w.datepicker._hideDatepicker(),!1;case 27:w.datepicker._hideDatepicker();break;case 33:w.datepicker._adjustDate(e.target,e.ctrlKey?-w.datepicker._get(n,"stepBigMonths"):-w.datepicker._get(n,"stepMonths"),"M");break;case 34:w.datepicker._adjustDate(e.target,e.ctrlKey?+w.datepicker._get(n,"stepBigMonths"):+w.datepicker._get(n,"stepMonths"),"M");break;case 35:(e.ctrlKey||e.metaKey)&&w.datepicker._clearDate(e.target),i=e.ctrlKey||e.metaKey;break;case 36:(e.ctrlKey||e.metaKey)&&w.datepicker._gotoToday(e.target),i=e.ctrlKey||e.metaKey;break;case 37:(e.ctrlKey||e.metaKey)&&w.datepicker._adjustDate(e.target,o?1:-1,"D"),i=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&w.datepicker._adjustDate(e.target,e.ctrlKey?-w.datepicker._get(n,"stepBigMonths"):-w.datepicker._get(n,"stepMonths"),"M");break;case 38:(e.ctrlKey||e.metaKey)&&w.datepicker._adjustDate(e.target,-7,"D"),i=e.ctrlKey||e.metaKey;break;case 39:(e.ctrlKey||e.metaKey)&&w.datepicker._adjustDate(e.target,o?-1:1,"D"),i=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&w.datepicker._adjustDate(e.target,e.ctrlKey?+w.datepicker._get(n,"stepBigMonths"):+w.datepicker._get(n,"stepMonths"),"M");break;case 40:(e.ctrlKey||e.metaKey)&&w.datepicker._adjustDate(e.target,7,"D"),i=e.ctrlKey||e.metaKey;break;default:i=!1}else 36===e.keyCode&&e.ctrlKey?w.datepicker._showDatepicker(this):i=!1;i&&(e.preventDefault(),e.stopPropagation())},_doKeyPress:function(e){var t,r=w.datepicker._getInst(e.target);return w.datepicker._get(r,"constrainInput")?(r=w.datepicker._possibleChars(w.datepicker._get(r,"dateFormat")),t=String.fromCharCode(null==e.charCode?e.keyCode:e.charCode),e.ctrlKey||e.metaKey||t<" "||!r||-1<r.indexOf(t)):void 0},_doKeyUp:function(e){e=w.datepicker._getInst(e.target);if(e.input.val()!==e.lastVal)try{w.datepicker.parseDate(w.datepicker._get(e,"dateFormat"),e.input?e.input.val():null,w.datepicker._getFormatConfig(e))&&(w.datepicker._setDateFromField(e),w.datepicker._updateAlternate(e),w.datepicker._updateDatepicker(e))}catch(e){}return!0},_showDatepicker:function(e){var t,r,n,i;"input"!==(e=e.target||e).nodeName.toLowerCase()&&(e=w("input",e.parentNode)[0]),w.datepicker._isDisabledDatepicker(e)||w.datepicker._lastInput===e||(i=w.datepicker._getInst(e),w.datepicker._curInst&&w.datepicker._curInst!==i&&(w.datepicker._curInst.dpDiv.stop(!0,!0),i)&&w.datepicker._datepickerShowing&&w.datepicker._hideDatepicker(w.datepicker._curInst.input[0]),!1!==(r=(r=w.datepicker._get(i,"beforeShow"))?r.apply(e,[e,i]):{})&&(u(i.settings,r),i.lastVal=null,w.datepicker._lastInput=e,w.datepicker._setDateFromField(i),w.datepicker._inDialog&&(e.value=""),w.datepicker._pos||(w.datepicker._pos=w.datepicker._findPos(e),w.datepicker._pos[1]+=e.offsetHeight),t=!1,w(e).parents().each(function(){return!(t|="fixed"===w(this).css("position"))}),r={left:w.datepicker._pos[0],top:w.datepicker._pos[1]},w.datepicker._pos=null,i.dpDiv.empty(),i.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),w.datepicker._updateDatepicker(i),r=w.datepicker._checkOffset(i,r,t),i.dpDiv.css({position:w.datepicker._inDialog&&w.blockUI?"static":t?"fixed":"absolute",display:"none",left:r.left+"px",top:r.top+"px"}),i.inline||(r=w.datepicker._get(i,"showAnim"),n=w.datepicker._get(i,"duration"),i.dpDiv.css("z-index",function(e){for(var t;e.length&&e[0]!==document;){if(("absolute"===(t=e.css("position"))||"relative"===t||"fixed"===t)&&(t=parseInt(e.css("zIndex"),10),!isNaN(t))&&0!==t)return t;e=e.parent()}return 0}(w(e))+1),w.datepicker._datepickerShowing=!0,w.effects&&w.effects.effect[r]?i.dpDiv.show(r,w.datepicker._get(i,"showOptions"),n):i.dpDiv[r||"show"](r?n:null),w.datepicker._shouldFocusInput(i)&&i.input.focus(),w.datepicker._curInst=i)))},_updateDatepicker:function(e){this.maxRows=4,(A=e).dpDiv.empty().append(this._generateHTML(e)),this._attachHandlers(e);var t,r=this._getNumberOfMonths(e),n=r[1],i=e.dpDiv.find("."+this._dayOverClass+" a");0<i.length&&o.apply(i.get(0)),e.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),1<n&&e.dpDiv.addClass("ui-datepicker-multi-"+n).css("width",17*n+"em"),e.dpDiv[(1!==r[0]||1!==r[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),e.dpDiv[(this._get(e,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),e===w.datepicker._curInst&&w.datepicker._datepickerShowing&&w.datepicker._shouldFocusInput(e)&&e.input.focus(),e.yearshtml&&(t=e.yearshtml,setTimeout(function(){t===e.yearshtml&&e.yearshtml&&e.dpDiv.find("select.ui-datepicker-year:first").replaceWith(e.yearshtml),t=e.yearshtml=null},0))},_shouldFocusInput:function(e){return e.input&&e.input.is(":visible")&&!e.input.is(":disabled")&&!e.input.is(":focus")},_checkOffset:function(e,t,r){var n=e.dpDiv.outerWidth(),i=e.dpDiv.outerHeight(),o=e.input?e.input.outerWidth():0,a=e.input?e.input.outerHeight():0,s=document.documentElement.clientWidth+(r?0:w(document).scrollLeft()),u=document.documentElement.clientHeight+(r?0:w(document).scrollTop());return t.left-=this._get(e,"isRTL")?n-o:0,t.left-=r&&t.left===e.input.offset().left?w(document).scrollLeft():0,t.top-=r&&t.top===e.input.offset().top+a?w(document).scrollTop():0,t.left-=Math.min(t.left,t.left+n>s&&n<s?Math.abs(t.left+n-s):0),t.top-=Math.min(t.top,t.top+i>u&&i<u?Math.abs(i+a):0),t},_findPos:function(e){for(var t=this._getInst(e),r=this._get(t,"isRTL");e&&("hidden"===e.type||1!==e.nodeType||w.expr.filters.hidden(e));)e=e[r?"previousSibling":"nextSibling"];return[(t=w(e).offset()).left,t.top]},_hideDatepicker:function(e){var t,r,n=this._curInst;!n||e&&n!==w.data(e,"datepicker")||this._datepickerShowing&&(e=this._get(n,"showAnim"),r=this._get(n,"duration"),t=function(){w.datepicker._tidyDialog(n)},w.effects&&(w.effects.effect[e]||w.effects[e])?n.dpDiv.hide(e,w.datepicker._get(n,"showOptions"),r,t):n.dpDiv["slideDown"===e?"slideUp":"fadeIn"===e?"fadeOut":"hide"](e?r:null,t),e||t(),this._datepickerShowing=!1,(r=this._get(n,"onClose"))&&r.apply(n.input?n.input[0]:null,[n.input?n.input.val():"",n]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),w.blockUI)&&(w.unblockUI(),w("body").append(this.dpDiv)),this._inDialog=!1)},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(e){var t;w.datepicker._curInst&&(e=w(e.target),t=w.datepicker._getInst(e[0]),!(e[0].id===w.datepicker._mainDivId||0!==e.parents("#"+w.datepicker._mainDivId).length||e.hasClass(w.datepicker.markerClassName)||e.closest("."+w.datepicker._triggerClass).length||!w.datepicker._datepickerShowing||w.datepicker._inDialog&&w.blockUI)||e.hasClass(w.datepicker.markerClassName)&&w.datepicker._curInst!==t)&&w.datepicker._hideDatepicker()},_adjustDate:function(e,t,r){var e=w(e),n=this._getInst(e[0]);this._isDisabledDatepicker(e[0])||(this._adjustInstDate(n,t+("M"===r?this._get(n,"showCurrentAtPos"):0),r),this._updateDatepicker(n))},_gotoToday:function(e){var t,e=w(e),r=this._getInst(e[0]);this._get(r,"gotoCurrent")&&r.currentDay?(r.selectedDay=r.currentDay,r.drawMonth=r.selectedMonth=r.currentMonth,r.drawYear=r.selectedYear=r.currentYear):(t=new Date,r.selectedDay=t.getDate(),r.drawMonth=r.selectedMonth=t.getMonth(),r.drawYear=r.selectedYear=t.getFullYear()),this._notifyChange(r),this._adjustDate(e)},_selectMonthYear:function(e,t,r){var e=w(e),n=this._getInst(e[0]);n["selected"+("M"===r?"Month":"Year")]=n["draw"+("M"===r?"Month":"Year")]=parseInt(t.options[t.selectedIndex].value,10),this._notifyChange(n),this._adjustDate(e)},_selectDay:function(e,t,r,n){var i=w(e);w(n).hasClass(this._unselectableClass)||this._isDisabledDatepicker(i[0])||((i=this._getInst(i[0])).selectedDay=i.currentDay=w("a",n).html(),i.selectedMonth=i.currentMonth=t,i.selectedYear=i.currentYear=r,this._selectDate(e,this._formatDate(i,i.currentDay,i.currentMonth,i.currentYear)))},_clearDate:function(e){e=w(e);this._selectDate(e,"")},_selectDate:function(e,t){var r,e=w(e),e=this._getInst(e[0]);t=null!=t?t:this._formatDate(e),e.input&&e.input.val(t),this._updateAlternate(e),(r=this._get(e,"onSelect"))?r.apply(e.input?e.input[0]:null,[t,e]):e.input&&e.input.trigger("change"),e.inline?this._updateDatepicker(e):(this._hideDatepicker(),this._lastInput=e.input[0],"object"!=typeof e.input[0]&&e.input.focus(),this._lastInput=null)},_updateAlternate:function(e){var t,r,n,i=this._get(e,"altField");i&&(t=this._get(e,"altFormat")||this._get(e,"dateFormat"),r=this._getDate(e),n=this.formatDate(t,r,this._getFormatConfig(e)),w(i).each(function(){w(this).val(n)}))},noWeekends:function(e){e=e.getDay();return[0<e&&e<6,""]},iso8601Week:function(e){var t,e=new Date(e.getTime());return e.setDate(e.getDate()+4-(e.getDay()||7)),t=e.getTime(),e.setMonth(0),e.setDate(1),Math.floor(Math.round((t-e)/864e5)/7)+1},parseDate:function(t,i,e){if(null==t||null==i)throw"Invalid arguments";if(""===(i="object"==typeof i?""+i:i+""))return null;function r(e){var t=v(e),t="@"===e?14:"!"===e?20:"y"===e&&t?4:"o"===e?3:2,e=RegExp("^\\d{"+("y"===e?t:1)+","+t+"}");if(t=i.substring(u).match(e))return u+=t[0].length,parseInt(t[0],10);throw"Missing number at position "+u}function n(e,t,r){var n=-1,e=w.map(v(e)?r:t,function(e,t){return[[t,e]]}).sort(function(e,t){return-(e[1].length-t[1].length)});if(w.each(e,function(e,t){var r=t[1];return i.substr(u,r.length).toLowerCase()===r.toLowerCase()?(n=t[0],u+=r.length,!1):void 0}),-1!==n)return n+1;throw"Unknown name at position "+u}function o(){if(i.charAt(u)!==t.charAt(b))throw"Unexpected literal at position "+u;u++}for(var a,s,u=0,l=(e?e.shortYearCutoff:null)||this._defaults.shortYearCutoff,l="string"!=typeof l?l:(new Date).getFullYear()%100+parseInt(l,10),c=(e?e.dayNamesShort:null)||this._defaults.dayNamesShort,f=(e?e.dayNames:null)||this._defaults.dayNames,h=(e?e.monthNamesShort:null)||this._defaults.monthNamesShort,p=(e?e.monthNames:null)||this._defaults.monthNames,d=-1,g=-1,y=-1,A=-1,m=!1,v=function(e){e=t.length>b+1&&t.charAt(b+1)===e;return e&&b++,e},b=0;t.length>b;b++)if(m)"'"!==t.charAt(b)||v("'")?o():m=!1;else switch(t.charAt(b)){case"d":y=r("d");break;case"D":n("D",c,f);break;case"o":A=r("o");break;case"m":g=r("m");break;case"M":g=n("M",h,p);break;case"y":d=r("y");break;case"@":d=(s=new Date(r("@"))).getFullYear(),g=s.getMonth()+1,y=s.getDate();break;case"!":d=(s=new Date((r("!")-this._ticksTo1970)/1e4)).getFullYear(),g=s.getMonth()+1,y=s.getDate();break;case"'":v("'")?o():m=!0;break;default:o()}if(i.length>u&&(e=i.substr(u),!/^\s+/.test(e)))throw"Extra/unparsed characters found in date: "+e;if(-1===d?d=(new Date).getFullYear():d<100&&(d+=(new Date).getFullYear()-(new Date).getFullYear()%100+(d<=l?0:-100)),-1<A)for(g=1,y=A;!(y<=(a=this._getDaysInMonth(d,g-1)));)g++,y-=a;if((s=this._daylightSavingAdjust(new Date(d,g-1,y))).getFullYear()!==d||s.getMonth()+1!==g||s.getDate()!==y)throw"Invalid date";return s},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:864e9*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925)),formatDate:function(t,e,r){if(!e)return"";function n(e,t,r){var n=""+t;if(c(e))for(;r>n.length;)n="0"+n;return n}function i(e,t,r,n){return(c(e)?n:r)[t]}var o,a=(r?r.dayNamesShort:null)||this._defaults.dayNamesShort,s=(r?r.dayNames:null)||this._defaults.dayNames,u=(r?r.monthNamesShort:null)||this._defaults.monthNamesShort,l=(r?r.monthNames:null)||this._defaults.monthNames,c=function(e){e=t.length>o+1&&t.charAt(o+1)===e;return e&&o++,e},f="",h=!1;if(e)for(o=0;t.length>o;o++)if(h)"'"!==t.charAt(o)||c("'")?f+=t.charAt(o):h=!1;else switch(t.charAt(o)){case"d":f+=n("d",e.getDate(),2);break;case"D":f+=i("D",e.getDay(),a,s);break;case"o":f+=n("o",Math.round((new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime()-new Date(e.getFullYear(),0,0).getTime())/864e5),3);break;case"m":f+=n("m",e.getMonth()+1,2);break;case"M":f+=i("M",e.getMonth(),u,l);break;case"y":f+=c("y")?e.getFullYear():(e.getYear()%100<10?"0":"")+e.getYear()%100;break;case"@":f+=e.getTime();break;case"!":f+=1e4*e.getTime()+this._ticksTo1970;break;case"'":c("'")?f+="'":h=!0;break;default:f+=t.charAt(o)}return f},_possibleChars:function(t){function e(e){return(e=t.length>i+1&&t.charAt(i+1)===e)&&i++,e}for(var r="",n=!1,i=0;t.length>i;i++)if(n)"'"!==t.charAt(i)||e("'")?r+=t.charAt(i):n=!1;else switch(t.charAt(i)){case"d":case"m":case"y":case"@":r+="0123456789";break;case"D":case"M":return null;case"'":e("'")?r+="'":n=!0;break;default:r+=t.charAt(i)}return r},_get:function(e,t){return(void 0!==e.settings[t]?e.settings:this._defaults)[t]},_setDateFromField:function(e,t){if(e.input.val()!==e.lastVal){var r=this._get(e,"dateFormat"),n=e.lastVal=e.input?e.input.val():null,i=this._getDefaultDate(e),o=i,a=this._getFormatConfig(e);try{o=this.parseDate(r,n,a)||i}catch(e){n=t?"":n}e.selectedDay=o.getDate(),e.drawMonth=e.selectedMonth=o.getMonth(),e.drawYear=e.selectedYear=o.getFullYear(),e.currentDay=n?o.getDate():0,e.currentMonth=n?o.getMonth():0,e.currentYear=n?o.getFullYear():0,this._adjustInstDate(e)}},_getDefaultDate:function(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date))},_determineDate:function(s,e,t){var r,n=null==e||""===e?t:"string"==typeof e?function(e){try{return w.datepicker.parseDate(w.datepicker._get(s,"dateFormat"),e,w.datepicker._getFormatConfig(s))}catch(e){}for(var t=(e.toLowerCase().match(/^c/)?w.datepicker._getDate(s):null)||new Date,r=t.getFullYear(),n=t.getMonth(),i=t.getDate(),o=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,a=o.exec(e);a;){switch(a[2]||"d"){case"d":case"D":i+=parseInt(a[1],10);break;case"w":case"W":i+=7*parseInt(a[1],10);break;case"m":case"M":n+=parseInt(a[1],10),i=Math.min(i,w.datepicker._getDaysInMonth(r,n));break;case"y":case"Y":r+=parseInt(a[1],10),i=Math.min(i,w.datepicker._getDaysInMonth(r,n))}a=o.exec(e)}return new Date(r,n,i)}(e):"number"==typeof e?isNaN(e)?t:(n=e,(r=new Date).setDate(r.getDate()+n),r):new Date(e.getTime());return(n=n&&"Invalid Date"==""+n?t:n)&&(n.setHours(0),n.setMinutes(0),n.setSeconds(0),n.setMilliseconds(0)),this._daylightSavingAdjust(n)},_daylightSavingAdjust:function(e){return e?(e.setHours(12<e.getHours()?e.getHours()+2:0),e):null},_setDate:function(e,t,r){var n=!t,i=e.selectedMonth,o=e.selectedYear,t=this._restrictMinMax(e,this._determineDate(e,t,new Date));e.selectedDay=e.currentDay=t.getDate(),e.drawMonth=e.selectedMonth=e.currentMonth=t.getMonth(),e.drawYear=e.selectedYear=e.currentYear=t.getFullYear(),i===e.selectedMonth&&o===e.selectedYear||r||this._notifyChange(e),this._adjustInstDate(e),e.input&&e.input.val(n?"":this._formatDate(e))},_getDate:function(e){return!e.currentYear||e.input&&""===e.input.val()?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay))},_attachHandlers:function(e){var t=this._get(e,"stepMonths"),r="#"+e.id.replace(/\\\\/g,"\\");e.dpDiv.find("[data-handler]").map(function(){var e={prev:function(){w.datepicker._adjustDate(r,-t,"M")},next:function(){w.datepicker._adjustDate(r,+t,"M")},hide:function(){w.datepicker._hideDatepicker()},today:function(){w.datepicker._gotoToday(r)},selectDay:function(){return w.datepicker._selectDay(r,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return w.datepicker._selectMonthYear(r,this,"M"),!1},selectYear:function(){return w.datepicker._selectMonthYear(r,this,"Y"),!1}};w(this).bind(this.getAttribute("data-event"),e[this.getAttribute("data-handler")])})},_generateHTML:function(e){var t,r,n,i,o,D,L,Q,F,a,s,N,u,l,c,f,h,p,d,g,y,A,G,m,v,b,_,U,z,w,E,C,I=new Date,q=this._daylightSavingAdjust(new Date(I.getFullYear(),I.getMonth(),I.getDate())),S=this._get(e,"isRTL"),I=this._get(e,"showButtonPanel"),j=this._get(e,"hideIfNoPrevNext"),x=this._get(e,"navigationAsDateFormat"),O=this._getNumberOfMonths(e),P=this._get(e,"showCurrentAtPos"),k=this._get(e,"stepMonths"),H=1!==O[0]||1!==O[1],W=this._daylightSavingAdjust(e.currentDay?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(9999,9,9)),B=this._getMinMaxDate(e,"min"),T=this._getMinMaxDate(e,"max"),M=e.drawMonth-P,R=e.drawYear;if(M<0&&(M+=12,R--),T)for(t=this._daylightSavingAdjust(new Date(T.getFullYear(),T.getMonth()-O[0]*O[1]+1,T.getDate())),t=B&&t<B?B:t;this._daylightSavingAdjust(new Date(R,M,1))>t;)--M<0&&(M=11,R--);for(e.drawMonth=M,e.drawYear=R,P=this._get(e,"prevText"),P=x?this.formatDate(P,this._daylightSavingAdjust(new Date(R,M-k,1)),this._getFormatConfig(e)):P,r=this._canAdjustMonth(e,-1,R,M)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+P+"'><span class='ui-icon ui-icon-circle-triangle-"+(S?"e":"w")+"'>"+P+"</span></a>":j?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+P+"'><span class='ui-icon ui-icon-circle-triangle-"+(S?"e":"w")+"'>"+P+"</span></a>",P=this._get(e,"nextText"),P=x?this.formatDate(P,this._daylightSavingAdjust(new Date(R,M+k,1)),this._getFormatConfig(e)):P,n=this._canAdjustMonth(e,1,R,M)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+P+"'><span class='ui-icon ui-icon-circle-triangle-"+(S?"w":"e")+"'>"+P+"</span></a>":j?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+P+"'><span class='ui-icon ui-icon-circle-triangle-"+(S?"w":"e")+"'>"+P+"</span></a>",k=this._get(e,"currentText"),j=this._get(e,"gotoCurrent")&&e.currentDay?W:q,k=x?this.formatDate(k,j,this._getFormatConfig(e)):k,P=e.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(e,"closeText")+"</button>",x=I?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(S?P:"")+(this._isInRange(e,j)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+k+"</button>":"")+(S?"":P)+"</div>":"",i=parseInt(this._get(e,"firstDay"),10),i=isNaN(i)?0:i,o=this._get(e,"showWeek"),D=this._get(e,"dayNames"),L=this._get(e,"dayNamesMin"),Q=this._get(e,"monthNames"),F=this._get(e,"monthNamesShort"),a=this._get(e,"beforeShowDay"),s=this._get(e,"showOtherMonths"),N=this._get(e,"selectOtherMonths"),u=this._getDefaultDate(e),l="",f=0;O[0]>f;f++){for(h="",this.maxRows=4,p=0;O[1]>p;p++){if(d=this._daylightSavingAdjust(new Date(R,M,e.selectedDay)),g=" ui-corner-all",y="",H){if(y+="<div class='ui-datepicker-group",1<O[1])switch(p){case 0:y+=" ui-datepicker-group-first",g=" ui-corner-"+(S?"right":"left");break;case O[1]-1:y+=" ui-datepicker-group-last",g=" ui-corner-"+(S?"left":"right");break;default:y+=" ui-datepicker-group-middle",g=""}y+="'>"}for(y+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+g+"'>"+(/all|left/.test(g)&&0===f?S?n:r:"")+(/all|right/.test(g)&&0===f?S?r:n:"")+this._generateMonthYearHeader(e,M,R,B,T,0<f||0<p,Q,F)+"</div><table class='ui-datepicker-calendar'><thead><tr>",A=o?"<th class='ui-datepicker-week-col'>"+this._get(e,"weekHeader")+"</th>":"",c=0;c<7;c++)A+="<th scope='col'"+(5<=(c+i+6)%7?" class='ui-datepicker-week-end'":"")+"><span title='"+D[G=(c+i)%7]+"'>"+L[G]+"</span></th>";for(y+=A+"</tr></thead><tbody>",v=this._getDaysInMonth(R,M),R===e.selectedYear&&M===e.selectedMonth&&(e.selectedDay=Math.min(e.selectedDay,v)),m=(this._getFirstDayOfMonth(R,M)-i+7)%7,v=Math.ceil((m+v)/7),b=H&&this.maxRows>v?this.maxRows:v,this.maxRows=b,_=this._daylightSavingAdjust(new Date(R,M,1-m)),U=0;U<b;U++){for(y+="<tr>",z=o?"<td class='ui-datepicker-week-col'>"+this._get(e,"calculateWeek")(_)+"</td>":"",c=0;c<7;c++)w=a?a.apply(e.input?e.input[0]:null,[_]):[!0,""],C=(E=_.getMonth()!==M)&&!N||!w[0]||B&&_<B||T&&T<_,z+="<td class='"+(5<=(c+i+6)%7?" ui-datepicker-week-end":"")+(E?" ui-datepicker-other-month":"")+(_.getTime()===d.getTime()&&M===e.selectedMonth&&e._keyEvent||u.getTime()===_.getTime()&&u.getTime()===d.getTime()?" "+this._dayOverClass:"")+(C?" "+this._unselectableClass+" ui-state-disabled":"")+(E&&!s?"":" "+w[1]+(_.getTime()===W.getTime()?" "+this._currentClass:"")+(_.getTime()===q.getTime()?" ui-datepicker-today":""))+"'"+(E&&!s||!w[2]?"":" title='"+w[2].replace(/'/g,"&#39;")+"'")+(C?"":" data-handler='selectDay' data-event='click' data-month='"+_.getMonth()+"' data-year='"+_.getFullYear()+"'")+">"+(E&&!s?"&#xa0;":C?"<span class='ui-state-default'>"+_.getDate()+"</span>":"<a class='ui-state-default"+(_.getTime()===q.getTime()?" ui-state-highlight":"")+(_.getTime()===W.getTime()?" ui-state-active":"")+(E?" ui-priority-secondary":"")+"' href='#'>"+_.getDate()+"</a>")+"</td>",_.setDate(_.getDate()+1),_=this._daylightSavingAdjust(_);y+=z+"</tr>"}11<++M&&(M=0,R++),h+=y+="</tbody></table>"+(H?"</div>"+(0<O[0]&&p===O[1]-1?"<div class='ui-datepicker-row-break'></div>":""):"")}l+=h}return l+=x,e._keyEvent=!1,l},_generateMonthYearHeader:function(e,t,r,n,i,o,a,s){var u,l,c,f,h,p,d,g=this._get(e,"changeMonth"),y=this._get(e,"changeYear"),A=this._get(e,"showMonthAfterYear"),m="<div class='ui-datepicker-title'>",v="";if(o||!g)v+="<span class='ui-datepicker-month'>"+a[t]+"</span>";else{for(u=n&&n.getFullYear()===r,l=i&&i.getFullYear()===r,v+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",c=0;c<12;c++)(!u||c>=n.getMonth())&&(!l||i.getMonth()>=c)&&(v+="<option value='"+c+"'"+(c===t?" selected='selected'":"")+">"+s[c]+"</option>");v+="</select>"}if(A||(m+=v+(!o&&g&&y?"":"&#xa0;")),!e.yearshtml)if(e.yearshtml="",o||!y)m+="<span class='ui-datepicker-year'>"+r+"</span>";else{for(a=this._get(e,"yearRange").split(":"),f=(new Date).getFullYear(),p=(h=function(e){e=e.match(/c[+\-].*/)?r+parseInt(e.substring(1),10):e.match(/[+\-].*/)?f+parseInt(e,10):parseInt(e,10);return isNaN(e)?f:e})(a[0]),d=Math.max(p,h(a[1]||"")),p=n?Math.max(p,n.getFullYear()):p,d=i?Math.min(d,i.getFullYear()):d,e.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";p<=d;p++)e.yearshtml+="<option value='"+p+"'"+(p===r?" selected='selected'":"")+">"+p+"</option>";e.yearshtml+="</select>",m+=e.yearshtml,e.yearshtml=null}return m+=this._get(e,"yearSuffix"),A&&(m+=(!o&&g&&y?"":"&#xa0;")+v),m+"</div>"},_adjustInstDate:function(e,t,r){var n=e.drawYear+("Y"===r?t:0),i=e.drawMonth+("M"===r?t:0),t=Math.min(e.selectedDay,this._getDaysInMonth(n,i))+("D"===r?t:0),n=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(n,i,t)));e.selectedDay=n.getDate(),e.drawMonth=e.selectedMonth=n.getMonth(),e.drawYear=e.selectedYear=n.getFullYear(),"M"!==r&&"Y"!==r||this._notifyChange(e)},_restrictMinMax:function(e,t){var r=this._getMinMaxDate(e,"min"),e=this._getMinMaxDate(e,"max"),r=r&&t<r?r:t;return e&&e<r?e:r},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");t&&t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])},_getNumberOfMonths:function(e){e=this._get(e,"numberOfMonths");return null==e?[1,1]:"number"==typeof e?[1,e]:e},_getMinMaxDate:function(e,t){return this._determineDate(e,this._get(e,t+"Date"),null)},_getDaysInMonth:function(e,t){return 32-this._daylightSavingAdjust(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return new Date(e,t,1).getDay()},_canAdjustMonth:function(e,t,r,n){var i=this._getNumberOfMonths(e),r=this._daylightSavingAdjust(new Date(r,n+(t<0?t:i[0]*i[1]),1));return t<0&&r.setDate(this._getDaysInMonth(r.getFullYear(),r.getMonth())),this._isInRange(e,r)},_isInRange:function(e,t){var r,n=this._getMinMaxDate(e,"min"),i=this._getMinMaxDate(e,"max"),o=null,a=null,e=this._get(e,"yearRange");return e&&(e=e.split(":"),r=(new Date).getFullYear(),o=parseInt(e[0],10),a=parseInt(e[1],10),e[0].match(/[+\-].*/)&&(o+=r),e[1].match(/[+\-].*/))&&(a+=r),(!n||t.getTime()>=n.getTime())&&(!i||t.getTime()<=i.getTime())&&(!o||t.getFullYear()>=o)&&(!a||a>=t.getFullYear())},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");return{shortYearCutoff:"string"!=typeof t?t:(new Date).getFullYear()%100+parseInt(t,10),dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,r,n){t||(e.currentDay=e.selectedDay,e.currentMonth=e.selectedMonth,e.currentYear=e.selectedYear);n=t?"object"==typeof t?t:this._daylightSavingAdjust(new Date(n,r,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return this.formatDate(this._get(e,"dateFormat"),n,this._getFormatConfig(e))}}),w.fn.datepicker=function(e){if(!this.length)return this;w.datepicker.initialized||(w(document).mousedown(w.datepicker._checkExternalClick),w.datepicker.initialized=!0),0===w("#"+w.datepicker._mainDivId).length&&w("body").append(w.datepicker.dpDiv);var t=Array.prototype.slice.call(arguments,1);return"string"==typeof e&&("isDisabled"===e||"getDate"===e||"widget"===e)||"option"===e&&2===arguments.length&&"string"==typeof arguments[1]?w.datepicker["_"+e+"Datepicker"].apply(w.datepicker,[this[0]].concat(t)):this.each(function(){"string"==typeof e?w.datepicker["_"+e+"Datepicker"].apply(w.datepicker,[this].concat(t)):w.datepicker._attachDatepicker(this,e)})},w.datepicker=new e,w.datepicker.initialized=!1,w.datepicker.uuid=(new Date).getTime(),w.datepicker.version="1.11.2",w.datepicker,w.widget("ui.dialog",{version:"1.11.2",options:{appendTo:"body",autoOpen:!0,buttons:[],closeOnEscape:!0,closeText:"Close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(e){var t=w(this).css(e).offset().top;t<0&&w(this).css("top",e.top-t)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},sizeRelatedOptions:{buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},resizableRelatedOptions:{maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),this.options.title=this.options.title||this.originalTitle,this._createWrapper(),this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&w.fn.draggable&&this._makeDraggable(),this.options.resizable&&w.fn.resizable&&this._makeResizable(),this._isOpen=!1,this._trackFocus()},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var e=this.options.appendTo;return e&&(e.jquery||e.nodeType)?w(e):this.document.find(e||"body").eq(0)},_destroy:function(){var e,t=this.originalPosition;this._destroyOverlay(),this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach(),this.uiDialog.stop(!0,!0).remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),(e=t.parent.children().eq(t.index)).length&&e[0]!==this.element[0]?e.before(this.element):t.parent.append(this.element)},widget:function(){return this.uiDialog},disable:w.noop,enable:w.noop,close:function(e){var t,r=this;if(this._isOpen&&!1!==this._trigger("beforeClose",e)){if(this._isOpen=!1,this._focusedElement=null,this._destroyOverlay(),this._untrackInstance(),!this.opener.filter(":focusable").focus().length)try{(t=this.document[0].activeElement)&&"body"!==t.nodeName.toLowerCase()&&w(t).blur()}catch(e){}this._hide(this.uiDialog,this.options.hide,function(){r._trigger("close",e)})}},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(e,t){var r=!1,n=this.uiDialog.siblings(".ui-front:visible").map(function(){return+w(this).css("z-index")}).get(),n=Math.max.apply(null,n);return n>=+this.uiDialog.css("z-index")&&(this.uiDialog.css("z-index",n+1),r=!0),r&&!t&&this._trigger("focus",e),r},open:function(){var e=this;return this._isOpen?void(this._moveToTop()&&this._focusTabbable()):(this._isOpen=!0,this.opener=w(this.document[0].activeElement),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this.overlay&&this.overlay.css("z-index",this.uiDialog.css("z-index")-1),this._show(this.uiDialog,this.options.show,function(){e._focusTabbable(),e._trigger("focus")}),this._makeFocusTarget(),void this._trigger("open"))},_focusTabbable:function(){var e=this._focusedElement;(e=(e=(e=(e=(e=e||this.element.find("[autofocus]")).length?e:this.element.find(":tabbable")).length?e:this.uiDialogButtonPane.find(":tabbable")).length?e:this.uiDialogTitlebarClose.filter(":tabbable")).length?e:this.uiDialog).eq(0).focus()},_keepFocus:function(e){function t(){var e=this.document[0].activeElement;this.uiDialog[0]===e||w.contains(this.uiDialog[0],e)||this._focusTabbable()}e.preventDefault(),t.call(this),this._delay(t)},_createWrapper:function(){this.uiDialog=w("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front "+this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._on(this.uiDialog,{keydown:function(e){var t,r,n;this.options.closeOnEscape&&!e.isDefaultPrevented()&&e.keyCode&&e.keyCode===w.ui.keyCode.ESCAPE?(e.preventDefault(),this.close(e)):e.keyCode!==w.ui.keyCode.TAB||e.isDefaultPrevented()||(t=this.uiDialog.find(":tabbable"),r=t.filter(":first"),n=t.filter(":last"),e.target!==n[0]&&e.target!==this.uiDialog[0]||e.shiftKey?e.target!==r[0]&&e.target!==this.uiDialog[0]||!e.shiftKey||(this._delay(function(){n.focus()}),e.preventDefault()):(this._delay(function(){r.focus()}),e.preventDefault()))},mousedown:function(e){this._moveToTop(e)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var e;this.uiDialogTitlebar=w("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog),this._on(this.uiDialogTitlebar,{mousedown:function(e){w(e.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.focus()}}),this.uiDialogTitlebarClose=w("<button type='button'></button>").button({label:this.options.closeText,icons:{primary:"ui-icon-closethick"},text:!1}).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar),this._on(this.uiDialogTitlebarClose,{click:function(e){e.preventDefault(),this.close(e)}}),e=w("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar),this._title(e),this.uiDialog.attr({"aria-labelledby":e.attr("id")})},_title:function(e){this.options.title||e.html("&#160;"),e.text(this.options.title)},_createButtonPane:function(){this.uiDialogButtonPane=w("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),this.uiButtonSet=w("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane),this._createButtons()},_createButtons:function(){var n=this,e=this.options.buttons;return this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),w.isEmptyObject(e)||w.isArray(e)&&!e.length?void this.uiDialog.removeClass("ui-dialog-buttons"):(w.each(e,function(e,t){var r;t=w.isFunction(t)?{click:t,text:e}:t,t=w.extend({type:"button"},t),r=t.click,t.click=function(){r.apply(n.element[0],arguments)},e={icons:t.icons,text:t.showText},delete t.icons,delete t.showText,w("<button></button>",t).button(e).appendTo(n.uiButtonSet)}),this.uiDialog.addClass("ui-dialog-buttons"),void this.uiDialogButtonPane.appendTo(this.uiDialog))},_makeDraggable:function(){function i(e){return{position:e.position,offset:e.offset}}var o=this,a=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(e,t){w(this).addClass("ui-dialog-dragging"),o._blockFrames(),o._trigger("dragStart",e,i(t))},drag:function(e,t){o._trigger("drag",e,i(t))},stop:function(e,t){var r=t.offset.left-o.document.scrollLeft(),n=t.offset.top-o.document.scrollTop();a.position={my:"left top",at:"left"+(0<=r?"+":"")+r+" top"+(0<=n?"+":"")+n,of:o.window},w(this).removeClass("ui-dialog-dragging"),o._unblockFrames(),o._trigger("dragStop",e,i(t))}})},_makeResizable:function(){function i(e){return{originalPosition:e.originalPosition,originalSize:e.originalSize,position:e.position,size:e.size}}var o=this,a=this.options,e=a.resizable,t=this.uiDialog.css("position"),e="string"==typeof e?e:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:a.maxWidth,maxHeight:a.maxHeight,minWidth:a.minWidth,minHeight:this._minHeight(),handles:e,start:function(e,t){w(this).addClass("ui-dialog-resizing"),o._blockFrames(),o._trigger("resizeStart",e,i(t))},resize:function(e,t){o._trigger("resize",e,i(t))},stop:function(e,t){var r=o.uiDialog.offset(),n=r.left-o.document.scrollLeft(),r=r.top-o.document.scrollTop();a.height=o.uiDialog.height(),a.width=o.uiDialog.width(),a.position={my:"left top",at:"left"+(0<=n?"+":"")+n+" top"+(0<=r?"+":"")+r,of:o.window},w(this).removeClass("ui-dialog-resizing"),o._unblockFrames(),o._trigger("resizeStop",e,i(t))}}).css("position",t)},_trackFocus:function(){this._on(this.widget(),{focusin:function(e){this._makeFocusTarget(),this._focusedElement=w(e.target)}})},_makeFocusTarget:function(){this._untrackInstance(),this._trackingInstances().unshift(this)},_untrackInstance:function(){var e=this._trackingInstances(),t=w.inArray(this,e);-1!==t&&e.splice(t,1)},_trackingInstances:function(){var e=this.document.data("ui-dialog-instances");return e||this.document.data("ui-dialog-instances",e=[]),e},_minHeight:function(){var e=this.options;return"auto"===e.height?e.minHeight:Math.min(e.minHeight,e.height)},_position:function(){var e=this.uiDialog.is(":visible");e||this.uiDialog.show(),this.uiDialog.position(this.options.position),e||this.uiDialog.hide()},_setOptions:function(e){var r=this,n=!1,i={};w.each(e,function(e,t){r._setOption(e,t),e in r.sizeRelatedOptions&&(n=!0),e in r.resizableRelatedOptions&&(i[e]=t)}),n&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",i)},_setOption:function(e,t){var r,n=this.uiDialog;"dialogClass"===e&&n.removeClass(this.options.dialogClass).addClass(t),"disabled"!==e&&(this._super(e,t),"appendTo"===e&&this.uiDialog.appendTo(this._appendTo()),"buttons"===e&&this._createButtons(),"closeText"===e&&this.uiDialogTitlebarClose.button({label:""+t}),"draggable"===e&&((r=n.is(":data(ui-draggable)"))&&!t&&n.draggable("destroy"),!r)&&t&&this._makeDraggable(),"position"===e&&this._position(),"resizable"===e&&((r=n.is(":data(ui-resizable)"))&&!t&&n.resizable("destroy"),r&&"string"==typeof t&&n.resizable("option","handles",t),r||!1===t||this._makeResizable()),"title"===e)&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title"))},_size:function(){var e,t,r,n=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),n.minWidth>n.width&&(n.width=n.minWidth),e=this.uiDialog.css({height:"auto",width:n.width}).outerHeight(),t=Math.max(0,n.minHeight-e),r="number"==typeof n.maxHeight?Math.max(0,n.maxHeight-e):"none","auto"===n.height?this.element.css({minHeight:t,maxHeight:r,height:"auto"}):this.element.height(Math.max(0,n.height-e)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var e=w(this);return w("<div>").css({position:"absolute",width:e.outerWidth(),height:e.outerHeight()}).appendTo(e.parent()).offset(e.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(e){return!!w(e.target).closest(".ui-dialog").length||!!w(e.target).closest(".ui-datepicker").length},_createOverlay:function(){var t;this.options.modal&&(t=!0,this._delay(function(){t=!1}),this.document.data("ui-dialog-overlays")||this._on(this.document,{focusin:function(e){t||this._allowInteraction(e)||(e.preventDefault(),this._trackingInstances()[0]._focusTabbable())}}),this.overlay=w("<div>").addClass("ui-widget-overlay ui-front").appendTo(this._appendTo()),this._on(this.overlay,{mousedown:"_keepFocus"}),this.document.data("ui-dialog-overlays",(this.document.data("ui-dialog-overlays")||0)+1))},_destroyOverlay:function(){var e;this.options.modal&&this.overlay&&((e=this.document.data("ui-dialog-overlays")-1)?this.document.data("ui-dialog-overlays",e):this.document.unbind("focusin").removeData("ui-dialog-overlays"),this.overlay.remove(),this.overlay=null)}}),w.widget("ui.progressbar",{version:"1.11.2",options:{max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue(),this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min}),this.valueDiv=w("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this._refreshValue()},_destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove()},value:function(e){return void 0===e?this.options.value:(this.options.value=this._constrainedValue(e),void this._refreshValue())},_constrainedValue:function(e){return void 0===e&&(e=this.options.value),this.indeterminate=!1===e,"number"!=typeof e&&(e=0),!this.indeterminate&&Math.min(this.options.max,Math.max(this.min,e))},_setOptions:function(e){var t=e.value;delete e.value,this._super(e),this.options.value=this._constrainedValue(t),this._refreshValue()},_setOption:function(e,t){"max"===e&&(t=Math.max(this.min,t)),"disabled"===e&&this.element.toggleClass("ui-state-disabled",!!t).attr("aria-disabled",t),this._super(e,t)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var e=this.options.value,t=this._percentage();this.valueDiv.toggle(this.indeterminate||e>this.min).toggleClass("ui-corner-right",e===this.options.max).width(t.toFixed(0)+"%"),this.element.toggleClass("ui-progressbar-indeterminate",this.indeterminate),this.indeterminate?(this.element.removeAttr("aria-valuenow"),this.overlayDiv||(this.overlayDiv=w("<div class='ui-progressbar-overlay'></div>").appendTo(this.valueDiv))):(this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":e}),this.overlayDiv&&(this.overlayDiv.remove(),this.overlayDiv=null)),this.oldValue!==e&&(this.oldValue=e,this._trigger("change")),e===this.options.max&&this._trigger("complete")}}),w.widget("ui.selectmenu",{version:"1.11.2",defaultElement:"<select>",options:{appendTo:null,disabled:null,icons:{button:"ui-icon-triangle-1-s"},position:{my:"left top",at:"left bottom",collision:"none"},width:null,change:null,close:null,focus:null,open:null,select:null},_create:function(){var e=this.element.uniqueId().attr("id");this.ids={element:e,button:e+"-button",menu:e+"-menu"},this._drawButton(),this._drawMenu(),this.options.disabled&&this.disable()},_drawButton:function(){var e=this,t=this.element.attr("tabindex");this.label=w("label[for='"+this.ids.element+"']").attr("for",this.ids.button),this._on(this.label,{click:function(e){this.button.focus(),e.preventDefault()}}),this.element.hide(),this.button=w("<span>",{class:"ui-selectmenu-button ui-widget ui-state-default ui-corner-all",tabindex:t||this.options.disabled?-1:0,id:this.ids.button,role:"combobox","aria-expanded":"false","aria-autocomplete":"list","aria-owns":this.ids.menu,"aria-haspopup":"true"}).insertAfter(this.element),w("<span>",{class:"ui-icon "+this.options.icons.button}).prependTo(this.button),this.buttonText=w("<span>",{class:"ui-selectmenu-text"}).appendTo(this.button),this._setText(this.buttonText,this.element.find("option:selected").text()),this._resizeButton(),this._on(this.button,this._buttonEvents),this.button.one("focusin",function(){e.menuItems||e._refreshMenu()}),this._hoverable(this.button),this._focusable(this.button)},_drawMenu:function(){var r=this;this.menu=w("<ul>",{"aria-hidden":"true","aria-labelledby":this.ids.button,id:this.ids.menu}),this.menuWrap=w("<div>",{class:"ui-selectmenu-menu ui-front"}).append(this.menu).appendTo(this._appendTo()),this.menuInstance=this.menu.menu({role:"listbox",select:function(e,t){e.preventDefault(),r._setSelection(),r._select(t.item.data("ui-selectmenu-item"),e)},focus:function(e,t){t=t.item.data("ui-selectmenu-item");null!=r.focusIndex&&t.index!==r.focusIndex&&(r._trigger("focus",e,{item:t}),r.isOpen||r._select(t,e)),r.focusIndex=t.index,r.button.attr("aria-activedescendant",r.menuItems.eq(t.index).attr("id"))}}).menu("instance"),this.menu.addClass("ui-corner-bottom").removeClass("ui-corner-all"),this.menuInstance._off(this.menu,"mouseleave"),this.menuInstance._closeOnDocumentClick=function(){return!1},this.menuInstance._isDivider=function(){return!1}},refresh:function(){this._refreshMenu(),this._setText(this.buttonText,this._getSelectedItem().text()),this.options.width||this._resizeButton()},_refreshMenu:function(){this.menu.empty();var e=this.element.find("option");e.length&&(this._parseOptions(e),this._renderMenu(this.menu,this.items),this.menuInstance.refresh(),this.menuItems=this.menu.find("li").not(".ui-selectmenu-optgroup"),e=this._getSelectedItem(),this.menuInstance.focus(null,e),this._setAria(e.data("ui-selectmenu-item")),this._setOption("disabled",this.element.prop("disabled")))},open:function(e){this.options.disabled||(this.menuItems?(this.menu.find(".ui-state-focus").removeClass("ui-state-focus"),this.menuInstance.focus(null,this._getSelectedItem())):this._refreshMenu(),this.isOpen=!0,this._toggleAttr(),this._resizeMenu(),this._position(),this._on(this.document,this._documentClick),this._trigger("open",e))},_position:function(){this.menuWrap.position(w.extend({of:this.button},this.options.position))},close:function(e){this.isOpen&&(this.isOpen=!1,this._toggleAttr(),this.range=null,this._off(this.document),this._trigger("close",e))},widget:function(){return this.button},menuWidget:function(){return this.menu},_renderMenu:function(r,e){var n=this,i="";w.each(e,function(e,t){t.optgroup!==i&&(w("<li>",{class:"ui-selectmenu-optgroup ui-menu-divider"+(t.element.parent("optgroup").prop("disabled")?" ui-state-disabled":""),text:t.optgroup}).appendTo(r),i=t.optgroup),n._renderItemData(r,t)})},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-selectmenu-item",t)},_renderItem:function(e,t){var r=w("<li>");return t.disabled&&r.addClass("ui-state-disabled"),this._setText(r,t.label),r.appendTo(e)},_setText:function(e,t){t?e.text(t):e.html("&#160;")},_move:function(e,t){var r,n=".ui-menu-item";this.isOpen?r=this.menuItems.eq(this.focusIndex):(r=this.menuItems.eq(this.element[0].selectedIndex),n+=":not(.ui-state-disabled)"),(r="first"===e||"last"===e?r["first"===e?"prevAll":"nextAll"](n).eq(-1):r[e+"All"](n).eq(0)).length&&this.menuInstance.focus(t,r)},_getSelectedItem:function(){return this.menuItems.eq(this.element[0].selectedIndex)},_toggle:function(e){this[this.isOpen?"close":"open"](e)},_setSelection:function(){var e;this.range&&(window.getSelection?((e=window.getSelection()).removeAllRanges(),e.addRange(this.range)):this.range.select(),this.button.focus())},_documentClick:{mousedown:function(e){!this.isOpen||w(e.target).closest(".ui-selectmenu-menu, #"+this.ids.button).length||this.close(e)}},_buttonEvents:{mousedown:function(){var e;window.getSelection?(e=window.getSelection()).rangeCount&&(this.range=e.getRangeAt(0)):this.range=document.selection.createRange()},click:function(e){this._setSelection(),this._toggle(e)},keydown:function(e){var t=!0;switch(e.keyCode){case w.ui.keyCode.TAB:case w.ui.keyCode.ESCAPE:this.close(e),t=!1;break;case w.ui.keyCode.ENTER:this.isOpen&&this._selectFocusedItem(e);break;case w.ui.keyCode.UP:e.altKey?this._toggle(e):this._move("prev",e);break;case w.ui.keyCode.DOWN:e.altKey?this._toggle(e):this._move("next",e);break;case w.ui.keyCode.SPACE:this.isOpen?this._selectFocusedItem(e):this._toggle(e);break;case w.ui.keyCode.LEFT:this._move("prev",e);break;case w.ui.keyCode.RIGHT:this._move("next",e);break;case w.ui.keyCode.HOME:case w.ui.keyCode.PAGE_UP:this._move("first",e);break;case w.ui.keyCode.END:case w.ui.keyCode.PAGE_DOWN:this._move("last",e);break;default:this.menu.trigger(e),t=!1}t&&e.preventDefault()}},_selectFocusedItem:function(e){var t=this.menuItems.eq(this.focusIndex);t.hasClass("ui-state-disabled")||this._select(t.data("ui-selectmenu-item"),e)},_select:function(e,t){var r=this.element[0].selectedIndex;this.element[0].selectedIndex=e.index,this._setText(this.buttonText,e.label),this._setAria(e),this._trigger("select",t,{item:e}),e.index!==r&&this._trigger("change",t,{item:e}),this.close(t)},_setAria:function(e){e=this.menuItems.eq(e.index).attr("id");this.button.attr({"aria-labelledby":e,"aria-activedescendant":e}),this.menu.attr("aria-activedescendant",e)},_setOption:function(e,t){"icons"===e&&this.button.find("span.ui-icon").removeClass(this.options.icons.button).addClass(t.button),this._super(e,t),"appendTo"===e&&this.menuWrap.appendTo(this._appendTo()),"disabled"===e&&(this.menuInstance.option("disabled",t),this.button.toggleClass("ui-state-disabled",t).attr("aria-disabled",t),this.element.prop("disabled",t),t?(this.button.attr("tabindex",-1),this.close()):this.button.attr("tabindex",0)),"width"===e&&this._resizeButton()},_appendTo:function(){var e=this.options.appendTo;return e=(e=(e=e&&(e.jquery||e.nodeType?w(e):this.document.find(e).eq(0)))&&e[0]?e:this.element.closest(".ui-front")).length?e:this.document[0].body},_toggleAttr:function(){this.button.toggleClass("ui-corner-top",this.isOpen).toggleClass("ui-corner-all",!this.isOpen).attr("aria-expanded",this.isOpen),this.menuWrap.toggleClass("ui-selectmenu-open",this.isOpen),this.menu.attr("aria-hidden",!this.isOpen)},_resizeButton:function(){var e=this.options.width;e||(e=this.element.show().outerWidth(),this.element.hide()),this.button.outerWidth(e)},_resizeMenu:function(){this.menu.outerWidth(Math.max(this.button.outerWidth(),this.menu.width("").outerWidth()+1))},_getCreateOptions:function(){return{disabled:this.element.prop("disabled")}},_parseOptions:function(e){var n=[];e.each(function(e,t){var t=w(t),r=t.parent("optgroup");n.push({element:t,index:e,value:t.attr("value"),label:t.text(),optgroup:r.attr("label")||"",disabled:r.prop("disabled")||t.prop("disabled")})}),this.items=n},_destroy:function(){this.menuWrap.remove(),this.button.remove(),this.element.show(),this.element.removeUniqueId(),this.label.attr("for",this.ids.element)}}),w.widget("ui.slider",w.ui.mouse,{version:"1.11.2",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this._calculateNewMax(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"),this._refresh(),this._setOption("disabled",this.options.disabled),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var e,t=this.options,r=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),n=[],i=t.values&&t.values.length||1;for(r.length>i&&(r.slice(i).remove(),r=r.slice(0,i)),e=r.length;e<i;e++)n.push("<span class='ui-slider-handle ui-state-default ui-corner-all' tabindex='0'></span>");this.handles=r.add(w(n.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.each(function(e){w(this).data("ui-slider-handle-index",e)})},_createRange:function(){var e=this.options,t="";e.range?(!0===e.range&&(e.values?e.values.length&&2!==e.values.length?e.values=[e.values[0],e.values[0]]:w.isArray(e.values)&&(e.values=e.values.slice(0)):e.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({left:"",bottom:""}):(this.range=w("<div></div>").appendTo(this.element),t="ui-slider-range ui-widget-header ui-corner-all"),this.range.addClass(t+("min"===e.range||"max"===e.range?" ui-slider-range-"+e.range:""))):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){this._off(this.handles),this._on(this.handles,this._handleEvents),this._hoverable(this.handles),this._focusable(this.handles)},_destroy:function(){this.handles.remove(),this.range&&this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(e){var r,n,i,o,t,a,s=this,u=this.options;return!u.disabled&&(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),t={x:e.pageX,y:e.pageY},r=this._normValueFromMouse(t),n=this._valueMax()-this._valueMin()+1,this.handles.each(function(e){var t=Math.abs(r-s.values(e));(t<n||n===t&&(e===s._lastChangedValue||s.values(e)===u.min))&&(n=t,i=w(this),o=e)}),!1!==this._start(e,o))&&(this._mouseSliding=!0,this._handleIndex=o,i.addClass("ui-state-active").focus(),t=i.offset(),a=!w(e.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=a?{left:0,top:0}:{left:e.pageX-t.left-i.width()/2,top:e.pageY-t.top-i.height()/2-(parseInt(i.css("borderTopWidth"),10)||0)-(parseInt(i.css("borderBottomWidth"),10)||0)+(parseInt(i.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(e,o,r),this._animateOff=!0)},_mouseStart:function(){return!0},_mouseDrag:function(e){var t={x:e.pageX,y:e.pageY},t=this._normValueFromMouse(t);return this._slide(e,this._handleIndex,t),!1},_mouseStop:function(e){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(e,this._handleIndex),this._change(e,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(e){var t,e="horizontal"===this.orientation?(t=this.elementSize.width,e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(t=this.elementSize.height,e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),e=e/t;return(e=1<e?1:e)<0&&(e=0),"vertical"===this.orientation&&(e=1-e),t=this._valueMax()-this._valueMin(),e=this._valueMin()+e*t,this._trimAlignValue(e)},_start:function(e,t){var r={handle:this.handles[t],value:this.value()};return this.options.values&&this.options.values.length&&(r.value=this.values(t),r.values=this.values()),this._trigger("start",e,r)},_slide:function(e,t,r){var n,i;this.options.values&&this.options.values.length?(n=this.values(t?0:1),(r=2===this.options.values.length&&!0===this.options.range&&(0===t&&n<r||1===t&&r<n)?n:r)!==this.values(t)&&((n=this.values())[t]=r,i=this._trigger("slide",e,{handle:this.handles[t],value:r,values:n}),this.values(t?0:1),!1!==i)&&this.values(t,r)):r!==this.value()&&!1!==(i=this._trigger("slide",e,{handle:this.handles[t],value:r}))&&this.value(r)},_stop:function(e,t){var r={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(r.value=this.values(t),r.values=this.values()),this._trigger("stop",e,r)},_change:function(e,t){var r;this._keySliding||this._mouseSliding||(r={handle:this.handles[t],value:this.value()},this.options.values&&this.options.values.length&&(r.value=this.values(t),r.values=this.values()),this._lastChangedValue=t,this._trigger("change",e,r))},value:function(e){return arguments.length?(this.options.value=this._trimAlignValue(e),this._refreshValue(),void this._change(null,0)):this._value()},values:function(e,t){var r,n,i;if(1<arguments.length)this.options.values[e]=this._trimAlignValue(t),this._refreshValue(),this._change(null,e);else{if(!arguments.length)return this._values();if(!w.isArray(e))return this.options.values&&this.options.values.length?this._values(e):this.value();for(r=this.options.values,n=e,i=0;r.length>i;i+=1)r[i]=this._trimAlignValue(n[i]),this._change(null,i);this._refreshValue()}},_setOption:function(e,t){var r,n=0;switch("range"===e&&!0===this.options.range&&("min"===t?(this.options.value=this._values(0),this.options.values=null):"max"===t&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),w.isArray(this.options.values)&&(n=this.options.values.length),"disabled"===e&&this.element.toggleClass("ui-state-disabled",!!t),this._super(e,t),e){case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue(),this.handles.css("horizontal"===t?"bottom":"left","");break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),r=0;r<n;r+=1)this._change(null,r);this._animateOff=!1;break;case"step":case"min":case"max":this._animateOff=!0,this._calculateNewMax(),this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_value:function(){var e=this.options.value;return this._trimAlignValue(e)},_values:function(e){var t,r,n;if(arguments.length)return t=this.options.values[e],this._trimAlignValue(t);if(this.options.values&&this.options.values.length){for(r=this.options.values.slice(),n=0;r.length>n;n+=1)r[n]=this._trimAlignValue(r[n]);return r}return[]},_trimAlignValue:function(e){var t,r;return this._valueMin()>=e?this._valueMin():e>=this._valueMax()?this._valueMax():(t=0<this.options.step?this.options.step:1,r=e-(e=(e-this._valueMin())%t),2*Math.abs(e)>=t&&(r+=0<e?t:-t),parseFloat(r.toFixed(5)))},_calculateNewMax:function(){var e=(this.options.max-this._valueMin())%this.options.step;this.max=this.options.max-e},_valueMin:function(){return this.options.min},_valueMax:function(){return this.max},_refreshValue:function(){var t,r,e,n,i,o=this.options.range,a=this.options,s=this,u=!this._animateOff&&a.animate,l={};this.options.values&&this.options.values.length?this.handles.each(function(e){r=(s.values(e)-s._valueMin())/(s._valueMax()-s._valueMin())*100,l["horizontal"===s.orientation?"left":"bottom"]=r+"%",w(this).stop(1,1)[u?"animate":"css"](l,a.animate),!0===s.options.range&&("horizontal"===s.orientation?(0===e&&s.range.stop(1,1)[u?"animate":"css"]({left:r+"%"},a.animate),1===e&&s.range[u?"animate":"css"]({width:r-t+"%"},{queue:!1,duration:a.animate})):(0===e&&s.range.stop(1,1)[u?"animate":"css"]({bottom:r+"%"},a.animate),1===e&&s.range[u?"animate":"css"]({height:r-t+"%"},{queue:!1,duration:a.animate}))),t=r}):(e=this.value(),n=this._valueMin(),i=this._valueMax(),r=i!==n?(e-n)/(i-n)*100:0,l["horizontal"===this.orientation?"left":"bottom"]=r+"%",this.handle.stop(1,1)[u?"animate":"css"](l,a.animate),"min"===o&&"horizontal"===this.orientation&&this.range.stop(1,1)[u?"animate":"css"]({width:r+"%"},a.animate),"max"===o&&"horizontal"===this.orientation&&this.range[u?"animate":"css"]({width:100-r+"%"},{queue:!1,duration:a.animate}),"min"===o&&"vertical"===this.orientation&&this.range.stop(1,1)[u?"animate":"css"]({height:r+"%"},a.animate),"max"===o&&"vertical"===this.orientation&&this.range[u?"animate":"css"]({height:100-r+"%"},{queue:!1,duration:a.animate}))},_handleEvents:{keydown:function(e){var t,r,n,i=w(e.target).data("ui-slider-handle-index");switch(e.keyCode){case w.ui.keyCode.HOME:case w.ui.keyCode.END:case w.ui.keyCode.PAGE_UP:case w.ui.keyCode.PAGE_DOWN:case w.ui.keyCode.UP:case w.ui.keyCode.RIGHT:case w.ui.keyCode.DOWN:case w.ui.keyCode.LEFT:if(e.preventDefault(),!this._keySliding&&(this._keySliding=!0,w(e.target).addClass("ui-state-active"),!1===this._start(e,i)))return}switch(n=this.options.step,t=r=this.options.values&&this.options.values.length?this.values(i):this.value(),e.keyCode){case w.ui.keyCode.HOME:r=this._valueMin();break;case w.ui.keyCode.END:r=this._valueMax();break;case w.ui.keyCode.PAGE_UP:r=this._trimAlignValue(t+(this._valueMax()-this._valueMin())/this.numPages);break;case w.ui.keyCode.PAGE_DOWN:r=this._trimAlignValue(t-(this._valueMax()-this._valueMin())/this.numPages);break;case w.ui.keyCode.UP:case w.ui.keyCode.RIGHT:if(t===this._valueMax())return;r=this._trimAlignValue(t+n);break;case w.ui.keyCode.DOWN:case w.ui.keyCode.LEFT:if(t===this._valueMin())return;r=this._trimAlignValue(t-n)}this._slide(e,i,r)},keyup:function(e){var t=w(e.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(e,t),this._change(e,t),w(e.target).removeClass("ui-state-active"))}}}),w.widget("ui.spinner",{version:"1.11.2",defaultElement:"<input>",widgetEventPrefix:"spin",options:{culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),""!==this.value()&&this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var n={},i=this.element;return w.each(["min","max","step"],function(e,t){var r=i.attr(t);void 0!==r&&r.length&&(n[t]=r)}),n},_events:{keydown:function(e){this._start(e)&&this._keydown(e)&&e.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(e){return this.cancelBlur?void delete this.cancelBlur:(this._stop(),this._refresh(),void(this.previous!==this.element.val()&&this._trigger("change",e)))},mousewheel:function(e,t){if(t){if(!this.spinning&&!this._start(e))return!1;this._spin((0<t?1:-1)*this.options.step,e),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(e)},100),e.preventDefault()}},"mousedown .ui-spinner-button":function(e){function t(){this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=r,this._delay(function(){this.previous=r}))}var r=this.element[0]===this.document[0].activeElement?this.previous:this.element.val();e.preventDefault(),t.call(this),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,t.call(this)}),!1!==this._start(e)&&this._repeat(null,w(e.currentTarget).hasClass("ui-spinner-up")?1:-1,e)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(e){return w(e.currentTarget).hasClass("ui-state-active")?!1!==this._start(e)&&void this._repeat(null,w(e.currentTarget).hasClass("ui-spinner-up")?1:-1,e):void 0},"mouseleave .ui-spinner-button":"_stop"},_draw:function(){var e=this.uiSpinner=this.element.addClass("ui-spinner-input").attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());this.element.attr("role","spinbutton"),this.buttons=e.find(".ui-spinner-button").attr("tabIndex",-1).button().removeClass("ui-corner-all"),this.buttons.height()>Math.ceil(.5*e.height())&&0<e.height()&&e.height(e.height()),this.options.disabled&&this.disable()},_keydown:function(e){var t=this.options,r=w.ui.keyCode;switch(e.keyCode){case r.UP:return this._repeat(null,1,e),!0;case r.DOWN:return this._repeat(null,-1,e),!0;case r.PAGE_UP:return this._repeat(null,t.page,e),!0;case r.PAGE_DOWN:return this._repeat(null,-t.page,e),!0}return!1},_uiSpinnerHtml:function(){return"<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>"},_buttonHtml:function(){return"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'><span class='ui-icon "+this.options.icons.up+"'>&#9650;</span></a><a class='ui-spinner-button ui-spinner-down ui-corner-br'><span class='ui-icon "+this.options.icons.down+"'>&#9660;</span></a>"},_start:function(e){return!(!this.spinning&&!1===this._trigger("start",e)||(this.counter||(this.counter=1),this.spinning=!0,0))},_repeat:function(e,t,r){e=e||500,clearTimeout(this.timer),this.timer=this._delay(function(){this._repeat(40,t,r)},e),this._spin(t*this.options.step,r)},_spin:function(e,t){var r=this.value()||0;this.counter||(this.counter=1),r=this._adjustValue(r+e*this._increment(this.counter)),this.spinning&&!1===this._trigger("spin",t,{value:r})||(this._value(r),this.counter++)},_increment:function(e){var t=this.options.incremental;return t?w.isFunction(t)?t(e):Math.floor(e*e*e/5e4-e*e/500+17*e/200+1):1},_precision:function(){var e=this._precisionOf(this.options.step);return e=null!==this.options.min?Math.max(e,this._precisionOf(this.options.min)):e},_precisionOf:function(e){var e=""+e,t=e.indexOf(".");return-1===t?0:e.length-t-1},_adjustValue:function(e){var t=this.options,r=null!==t.min?t.min:0,n=e-r;return e=r+Math.round(n/t.step)*t.step,e=parseFloat(e.toFixed(this._precision())),null!==t.max&&e>t.max?t.max:null!==t.min&&t.min>e?t.min:e},_stop:function(e){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",e))},_setOption:function(e,t){var r;"culture"===e||"numberFormat"===e?(r=this._parse(this.element.val()),this.options[e]=t,this.element.val(this._format(r))):("max"!==e&&"min"!==e&&"step"!==e||"string"!=typeof t||(t=this._parse(t)),"icons"===e&&(this.buttons.first().find(".ui-icon").removeClass(this.options.icons.up).addClass(t.up),this.buttons.last().find(".ui-icon").removeClass(this.options.icons.down).addClass(t.down)),this._super(e,t),"disabled"===e&&(this.widget().toggleClass("ui-state-disabled",!!t),this.element.prop("disabled",!!t),this.buttons.button(t?"disable":"enable")))},_setOptions:t(function(e){this._super(e)}),_parse:function(e){return""===(e="string"==typeof e&&""!==e?window.Globalize&&this.options.numberFormat?Globalize.parseFloat(e,10,this.options.culture):+e:e)||isNaN(e)?null:e},_format:function(e){return""===e?"":window.Globalize&&this.options.numberFormat?Globalize.format(e,this.options.numberFormat,this.options.culture):e},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},isValid:function(){var e=this.value();return null!==e&&e===this._adjustValue(e)},_value:function(e,t){var r;""!==e&&null!==(r=this._parse(e))&&(t||(r=this._adjustValue(r)),e=this._format(r)),this.element.val(e),this._refresh()},_destroy:function(){this.element.removeClass("ui-spinner-input").prop("disabled",!1).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.uiSpinner.replaceWith(this.element)},stepUp:t(function(e){this._stepUp(e)}),_stepUp:function(e){this._start()&&(this._spin((e||1)*this.options.step),this._stop())},stepDown:t(function(e){this._stepDown(e)}),_stepDown:function(e){this._start()&&(this._spin((e||1)*-this.options.step),this._stop())},pageUp:t(function(e){this._stepUp((e||1)*this.options.page)}),pageDown:t(function(e){this._stepDown((e||1)*this.options.page)}),value:function(e){return arguments.length?void t(this._value).call(this,e):this._parse(this.element.val())},widget:function(){return this.uiSpinner}}),w.widget("ui.tabs",{version:"1.11.2",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_isLocal:(m=/#.*$/,function(e){var t=(e=e.cloneNode(!1)).href.replace(m,""),r=location.href.replace(m,"");try{t=decodeURIComponent(t)}catch(e){}try{r=decodeURIComponent(r)}catch(e){}return 1<e.hash.length&&t===r}),_create:function(){var t=this,e=this.options;this.running=!1,this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",e.collapsible),this._processTabs(),e.active=this._initialActive(),w.isArray(e.disabled)&&(e.disabled=w.unique(e.disabled.concat(w.map(this.tabs.filter(".ui-state-disabled"),function(e){return t.tabs.index(e)}))).sort()),this.active=!1!==this.options.active&&this.anchors.length?this._findActive(e.active):w(),this._refresh(),this.active.length&&this.load(e.active)},_initialActive:function(){var r=this.options.active,e=this.options.collapsible,n=location.hash.substring(1);return!1!==(r=null===r&&(n&&this.tabs.each(function(e,t){return w(t).attr("aria-controls")===n?(r=e,!1):void 0}),null===(r=null===r?this.tabs.index(this.tabs.filter(".ui-tabs-active")):r)||-1===r)?!!this.tabs.length&&0:r)&&-1===(r=this.tabs.index(this.tabs.eq(r)))&&(r=!e&&0),r=!e&&!1===r&&this.anchors.length?0:r},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):w()}},_tabKeydown:function(e){var t=w(this.document[0].activeElement).closest("li"),r=this.tabs.index(t),n=!0;if(!this._handlePageNav(e)){switch(e.keyCode){case w.ui.keyCode.RIGHT:case w.ui.keyCode.DOWN:r++;break;case w.ui.keyCode.UP:case w.ui.keyCode.LEFT:n=!1,r--;break;case w.ui.keyCode.END:r=this.anchors.length-1;break;case w.ui.keyCode.HOME:r=0;break;case w.ui.keyCode.SPACE:return e.preventDefault(),clearTimeout(this.activating),void this._activate(r);case w.ui.keyCode.ENTER:return e.preventDefault(),clearTimeout(this.activating),void this._activate(r!==this.options.active&&r);default:return}e.preventDefault(),clearTimeout(this.activating),r=this._focusNextTab(r,n),e.ctrlKey||(t.attr("aria-selected","false"),this.tabs.eq(r).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",r)},this.delay))}},_panelKeydown:function(e){this._handlePageNav(e)||e.ctrlKey&&e.keyCode===w.ui.keyCode.UP&&(e.preventDefault(),this.active.focus())},_handlePageNav:function(e){return e.altKey&&e.keyCode===w.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):e.altKey&&e.keyCode===w.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):void 0},_findNextTab:function(e,t){for(var r=this.tabs.length-1;-1!==w.inArray(e=(e=r<e?0:e)<0?r:e,this.options.disabled);)e=t?e+1:e-1;return e},_focusNextTab:function(e,t){return e=this._findNextTab(e,t),this.tabs.eq(e).focus(),e},_setOption:function(e,t){return"active"===e?void this._activate(t):"disabled"===e?void this._setupDisabled(t):(this._super(e,t),"collapsible"===e&&(this.element.toggleClass("ui-tabs-collapsible",t),t||!1!==this.options.active||this._activate(0)),"event"===e&&this._setupEvents(t),void("heightStyle"===e&&this._setupHeightStyle(t)))},_sanitizeSelector:function(e){return e?e.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var e=this.options,t=this.tablist.children(":has(a[href])");e.disabled=w.map(t.filter(".ui-state-disabled"),function(e){return t.index(e)}),this._processTabs(),!1!==e.active&&this.anchors.length?this.active.length&&!w.contains(this.tablist[0],this.active[0])?this.tabs.length===e.disabled.length?(e.active=!1,this.active=w()):this._activate(this._findNextTab(Math.max(0,e.active-1),!1)):e.active=this.tabs.index(this.active):(e.active=!1,this.active=w()),this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-hidden":"true"}),this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var u=this,e=this.tabs,t=this.anchors,r=this.panels;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist").delegate("> li","mousedown"+this.eventNamespace,function(e){w(this).is(".ui-state-disabled")&&e.preventDefault()}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){w(this).closest("li").is(".ui-state-disabled")&&this.blur()}),this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1}),this.anchors=this.tabs.map(function(){return w("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1}),this.panels=w(),this.anchors.each(function(e,t){var r,n,i,o=w(t).uniqueId().attr("id"),a=w(t).closest("li"),s=a.attr("aria-controls");u._isLocal(t)?(i=(r=t.hash).substring(1),n=u.element.find(u._sanitizeSelector(r))):(i=a.attr("aria-controls")||w({}).uniqueId()[0].id,(n=u.element.find(r="#"+i)).length||(n=u._createPanel(i)).insertAfter(u.panels[e-1]||u.tablist),n.attr("aria-live","polite")),n.length&&(u.panels=u.panels.add(n)),s&&a.data("ui-tabs-aria-controls",s),a.attr({"aria-controls":i,"aria-labelledby":o}),n.attr("aria-labelledby",o)}),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel"),e&&(this._off(e.not(this.tabs)),this._off(t.not(this.anchors)),this._off(r.not(this.panels)))},_getList:function(){return this.tablist||this.element.find("ol,ul").eq(0)},_createPanel:function(e){return w("<div>").attr("id",e).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(e){w.isArray(e)&&(e.length?e.length===this.anchors.length&&(e=!0):e=!1);for(var t,r=0;t=this.tabs[r];r++)!0===e||-1!==w.inArray(r,e)?w(t).addClass("ui-state-disabled").attr("aria-disabled","true"):w(t).removeClass("ui-state-disabled").removeAttr("aria-disabled");this.options.disabled=e},_setupEvents:function(e){var r={};e&&w.each(e.split(" "),function(e,t){r[t]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(!0,this.anchors,{click:function(e){e.preventDefault()}}),this._on(this.anchors,r),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(e){var r,t=this.element.parent();"fill"===e?(r=t.height(),r-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each(function(){var e=w(this),t=e.css("position");"absolute"!==t&&"fixed"!==t&&(r-=e.outerHeight(!0))}),this.element.children().not(this.panels).each(function(){r-=w(this).outerHeight(!0)}),this.panels.each(function(){w(this).height(Math.max(0,r-w(this).innerHeight()+w(this).height()))}).css("overflow","auto")):"auto"===e&&(r=0,this.panels.each(function(){r=Math.max(r,w(this).height("").height())}).height(r))},_eventHandler:function(e){var t=this.options,r=this.active,n=w(e.currentTarget).closest("li"),i=n[0]===r[0],o=i&&t.collapsible,a=o?w():this._getPanelForTab(n),s=r.length?this._getPanelForTab(r):w(),r={oldTab:r,oldPanel:s,newTab:o?w():n,newPanel:a};e.preventDefault(),n.hasClass("ui-state-disabled")||n.hasClass("ui-tabs-loading")||this.running||i&&!t.collapsible||!1===this._trigger("beforeActivate",e,r)||(t.active=!o&&this.tabs.index(n),this.active=i?w():n,this.xhr&&this.xhr.abort(),s.length||a.length||w.error("jQuery UI Tabs: Mismatching fragment identifier."),a.length&&this.load(this.tabs.index(n),e),this._toggle(e,r))},_toggle:function(e,t){function r(){i.running=!1,i._trigger("activate",e,t)}function n(){t.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),o.length&&i.options.show?i._show(o,i.options.show,r):(o.show(),r())}var i=this,o=t.newPanel,a=t.oldPanel;this.running=!0,a.length&&this.options.hide?this._hide(a,this.options.hide,function(){t.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),n()}):(t.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),a.hide(),n()),a.attr("aria-hidden","true"),t.oldTab.attr({"aria-selected":"false","aria-expanded":"false"}),o.length&&a.length?t.oldTab.attr("tabIndex",-1):o.length&&this.tabs.filter(function(){return 0===w(this).attr("tabIndex")}).attr("tabIndex",-1),o.attr("aria-hidden","false"),t.newTab.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_activate:function(e){var e=this._findActive(e);e[0]!==this.active[0]&&(e=(e=e.length?e:this.active).find(".ui-tabs-anchor")[0],this._eventHandler({target:e,currentTarget:e,preventDefault:w.noop}))},_findActive:function(e){return!1===e?w():this.tabs.eq(e)},_getIndex:function(e){return e="string"==typeof e?this.anchors.index(this.anchors.filter("[href$='"+e+"']")):e},_destroy:function(){this.xhr&&this.xhr.abort(),this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible"),this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role"),this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeUniqueId(),this.tablist.unbind(this.eventNamespace),this.tabs.add(this.panels).each(function(){w.data(this,"ui-tabs-destroy")?w(this).remove():w(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")}),this.tabs.each(function(){var e=w(this),t=e.data("ui-tabs-aria-controls");t?e.attr("aria-controls",t).removeData("ui-tabs-aria-controls"):e.removeAttr("aria-controls")}),this.panels.show(),"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(r){var e=this.options.disabled;!1!==e&&(e=void 0!==r&&(r=this._getIndex(r),w.isArray(e)?w.map(e,function(e){return e!==r?e:null}):w.map(this.tabs,function(e,t){return t!==r?t:null})),this._setupDisabled(e))},disable:function(e){var t=this.options.disabled;if(!0!==t){if(void 0===e)t=!0;else{if(e=this._getIndex(e),-1!==w.inArray(e,t))return;t=w.isArray(t)?w.merge([e],t).sort():[e]}this._setupDisabled(t)}},load:function(e,t){e=this._getIndex(e);var r=this,n=this.tabs.eq(e),e=n.find(".ui-tabs-anchor"),i=this._getPanelForTab(n),o={tab:n,panel:i};this._isLocal(e[0])||(this.xhr=w.ajax(this._ajaxSettings(e,t,o)),this.xhr&&"canceled"!==this.xhr.statusText&&(n.addClass("ui-tabs-loading"),i.attr("aria-busy","true"),this.xhr.success(function(e){setTimeout(function(){i.html(e),r._trigger("load",t,o)},1)}).complete(function(e,t){setTimeout(function(){"abort"===t&&r.panels.stop(!1,!0),n.removeClass("ui-tabs-loading"),i.removeAttr("aria-busy"),e===r.xhr&&delete r.xhr},1)})))},_ajaxSettings:function(e,r,n){var i=this;return{url:e.attr("href"),beforeSend:function(e,t){return i._trigger("beforeLoad",r,w.extend({jqXHR:e,ajaxSettings:t},n))}}},_getPanelForTab:function(e){e=w(e).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+e))}}),w.widget("ui.tooltip",{version:"1.11.2",options:{content:function(){var e=w(this).attr("title")||"";return w("<a>").text(e).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,tooltipClass:null,track:!1,close:null,open:null},_addDescribedBy:function(e,t){var r=(e.attr("aria-describedby")||"").split(/\s+/);r.push(t),e.data("ui-tooltip-id",t).attr("aria-describedby",w.trim(r.join(" ")))},_removeDescribedBy:function(e){var t=e.data("ui-tooltip-id"),r=(e.attr("aria-describedby")||"").split(/\s+/),t=w.inArray(t,r);-1!==t&&r.splice(t,1),e.removeData("ui-tooltip-id"),(r=w.trim(r.join(" ")))?e.attr("aria-describedby",r):e.removeAttr("aria-describedby")},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.options.disabled&&this._disable(),this.liveRegion=w("<div>").attr({role:"log","aria-live":"assertive","aria-relevant":"additions"}).addClass("ui-helper-hidden-accessible").appendTo(this.document[0].body)},_setOption:function(e,t){var r=this;return"disabled"===e?(this[t?"_disable":"_enable"](),void(this.options[e]=t)):(this._super(e,t),void("content"===e&&w.each(this.tooltips,function(e,t){r._updateContent(t.element)})))},_disable:function(){var n=this;w.each(this.tooltips,function(e,t){var r=w.Event("blur");r.target=r.currentTarget=t.element[0],n.close(r,!0)}),this.element.find(this.options.items).addBack().each(function(){var e=w(this);e.is("[title]")&&e.data("ui-tooltip-title",e.attr("title")).removeAttr("title")})},_enable:function(){this.element.find(this.options.items).addBack().each(function(){var e=w(this);e.data("ui-tooltip-title")&&e.attr("title",e.data("ui-tooltip-title"))})},open:function(e){var r=this,t=w(e?e.target:this.element).closest(this.options.items);t.length&&!t.data("ui-tooltip-id")&&(t.attr("title")&&t.data("ui-tooltip-title",t.attr("title")),t.data("ui-tooltip-open",!0),e&&"mouseover"===e.type&&t.parents().each(function(){var e,t=w(this);t.data("ui-tooltip-open")&&((e=w.Event("blur")).target=e.currentTarget=this,r.close(e,!0)),t.attr("title")&&(t.uniqueId(),r.parents[this.id]={element:this,title:t.attr("title")},t.attr("title",""))}),this._updateContent(t,e))},_updateContent:function(t,r){var e=this.options.content,n=this,i=r?r.type:null;return"string"==typeof e?this._open(r,t,e):void((e=e.call(t[0],function(e){t.data("ui-tooltip-open")&&n._delay(function(){r&&(r.type=i),this._open(r,t,e)})}))&&this._open(r,t,e))},_open:function(e,t,r){function n(e){u.of=e,i.is(":hidden")||i.position(u)}var i,o,a,s,u=w.extend({},this.options.position);r&&((o=this._find(t))?o.tooltip.find(".ui-tooltip-content").html(r):(t.is("[title]")&&(e&&"mouseover"===e.type?t.attr("title",""):t.removeAttr("title")),o=this._tooltip(t),i=o.tooltip,this._addDescribedBy(t,i.attr("id")),i.find(".ui-tooltip-content").html(r),this.liveRegion.children().hide(),r.clone?(s=r.clone()).removeAttr("id").find("[id]").removeAttr("id"):s=r,w("<div>").html(s).appendTo(this.liveRegion),this.options.track&&e&&/^mouse/.test(e.type)?(this._on(this.document,{mousemove:n}),n(e)):i.position(w.extend({of:t},this.options.position)),i.hide(),this._show(i,this.options.show),this.options.show&&this.options.show.delay&&(a=this.delayedShow=setInterval(function(){i.is(":visible")&&(n(u.of),clearInterval(a))},w.fx.interval)),this._trigger("open",e,{tooltip:i}),o={keyup:function(e){e.keyCode===w.ui.keyCode.ESCAPE&&((e=w.Event(e)).currentTarget=t[0],this.close(e,!0))}},t[0]!==this.element[0]&&(o.remove=function(){this._removeTooltip(i)}),e&&"mouseover"!==e.type||(o.mouseleave="close"),e&&"focusin"!==e.type||(o.focusout="close"),this._on(!0,t,o)))},close:function(e){var t,r=this,n=w(e?e.currentTarget:this.element),i=this._find(n);i&&(t=i.tooltip,i.closing||(clearInterval(this.delayedShow),n.data("ui-tooltip-title")&&!n.attr("title")&&n.attr("title",n.data("ui-tooltip-title")),this._removeDescribedBy(n),i.hiding=!0,t.stop(!0),this._hide(t,this.options.hide,function(){r._removeTooltip(w(this))}),n.removeData("ui-tooltip-open"),this._off(n,"mouseleave focusout keyup"),n[0]!==this.element[0]&&this._off(n,"remove"),this._off(this.document,"mousemove"),e&&"mouseleave"===e.type&&w.each(this.parents,function(e,t){w(t.element).attr("title",t.title),delete r.parents[e]}),i.closing=!0,this._trigger("close",e,{tooltip:t}),i.hiding)||(i.closing=!1))},_tooltip:function(e){var t=w("<div>").attr("role","tooltip").addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||"")),r=t.uniqueId().attr("id");return w("<div>").addClass("ui-tooltip-content").appendTo(t),t.appendTo(this.document[0].body),this.tooltips[r]={element:e,tooltip:t}},_find:function(e){e=e.data("ui-tooltip-id");return e?this.tooltips[e]:null},_removeTooltip:function(e){e.remove(),delete this.tooltips[e.attr("id")]},_destroy:function(){var n=this;w.each(this.tooltips,function(e,t){var r=w.Event("blur"),t=t.element;r.target=r.currentTarget=t[0],n.close(r,!0),w("#"+e).remove(),t.data("ui-tooltip-title")&&(t.attr("title")||t.attr("title",t.data("ui-tooltip-title")),t.removeData("ui-tooltip-title"))}),this.liveRegion.remove()}}),"ui-effects-"),he=w;function B(e,t,r,n){return e={effect:e=w.isPlainObject(e)?(t=e).effect:e},w.isFunction(t=null==t?{}:t)&&(n=t,r=null,t={}),"number"!=typeof t&&!w.fx.speeds[t]||(n=r,r=t,t={}),w.isFunction(r)&&(n=r,r=null),t&&w.extend(e,t),r=r||t.duration,e.duration=w.fx.off?0:"number"==typeof r?r:r in w.fx.speeds?w.fx.speeds[r]:w.fx.speeds._default,e.complete=n||t.complete,e}function T(e){return!e||"number"==typeof e||w.fx.speeds[e]||"string"==typeof e&&!w.effects.effect[e]||w.isFunction(e)||"object"==typeof e&&!e.effect}function pe(e){var t,r,n=e.ownerDocument.defaultView?e.ownerDocument.defaultView.getComputedStyle(e,null):e.currentStyle,i={};if(n&&n.length&&n[0]&&n[n[0]])for(r=n.length;r--;)"string"==typeof n[t=n[r]]&&(i[w.camelCase(t)]=n[t]);else for(t in n)"string"==typeof n[t]&&(i[t]=n[t]);return i}function M(e,t,r){var n=O[t.type]||{};return null==e?r||!t.def?null:t.def:(e=n.floor?~~e:parseFloat(e),isNaN(e)?t.def:n.mod?(e+n.mod)%n.mod:e<0?0:e>n.max?n.max:e)}function de(n){var i=j(),o=i._rgba=[];return n=n.toLowerCase(),k(ue,function(e,t){var r=t.re.exec(n),r=r&&t.parse(r),t=t.space||"rgba";return r?(r=i[t](r),i[x[t].cache]=r[x[t].cache],o=i._rgba=r._rgba,!1):_}),o.length?("0,0,0,0"===o.join()&&b.extend(o,S.transparent),i):S[n]}function R(e,t,r){return 6*(r=(r+1)%1)<1?e+6*(t-e)*r:2*r<1?t:3*r<2?e+6*(t-e)*(2/3-r):e}w.effects={effect:{}},se=/^([\-+])=\s*(\d+\.?\d*)/,ue=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[2.55*e[1],2.55*e[2],2.55*e[3],e[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(e){return[e[1],e[2]/100,e[3]/100,e[4]]}}],j=(b=he).Color=function(e,t,r,n){return new b.Color.fn.parse(e,t,r,n)},x={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},O={byte:{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},P=j.support={},p=b("<p>")[0],k=b.each,p.style.cssText="background-color:rgba(1,1,1,.5)",P.rgba=-1<p.style.backgroundColor.indexOf("rgba"),k(x,function(e,t){t.cache="_"+e,t.props.alpha={idx:3,type:"percent",def:1}}),(j.fn=b.extend(j.prototype,{parse:function(i,e,t,r){if(i===_)return this._rgba=[null,null,null,null],this;(i.jquery||i.nodeType)&&(i=b(i).css(e),e=_);var o=this,n=b.type(i),a=this._rgba=[];return e!==_&&(i=[i,e,t,r],n="array"),"string"===n?this.parse(de(i)||S._default):"array"===n?(k(x.rgba.props,function(e,t){a[t.idx]=M(i[t.idx],t)}),this):"object"===n?(i instanceof j?k(x,function(e,t){i[t.cache]&&(o[t.cache]=i[t.cache].slice())}):k(x,function(e,r){var n=r.cache;k(r.props,function(e,t){if(!o[n]&&r.to){if("alpha"===e||null==i[e])return;o[n]=r.to(o._rgba)}o[n][t.idx]=M(i[e],t,!0)}),o[n]&&b.inArray(null,o[n].slice(0,3))<0&&(o[n][3]=1,r.from)&&(o._rgba=r.from(o[n]))}),this):_},is:function(e){var i=j(e),o=!0,a=this;return k(x,function(e,t){var r,n=i[t.cache];return n&&(r=a[t.cache]||t.to&&t.to(a._rgba)||[],k(t.props,function(e,t){return null!=n[t.idx]?o=n[t.idx]===r[t.idx]:_})),o}),o},_space:function(){var r=[],n=this;return k(x,function(e,t){n[t.cache]&&r.push(e)}),r.pop()},transition:function(e,a){var e=(l=j(e))._space(),t=x[e],r=0===this.alpha()?j("transparent"):this,s=r[t.cache]||t.to(r._rgba),u=s.slice(),l=l[t.cache];return k(t.props,function(e,t){var r=t.idx,n=s[r],i=l[r],o=O[t.type]||{};null!==i&&(null===n?u[r]=i:(o.mod&&(i-n>o.mod/2?n+=o.mod:n-i>o.mod/2&&(n-=o.mod)),u[r]=M((i-n)*a+n,t)))}),this[e](u)},blend:function(e){var t,r,n;return 1===this._rgba[3]?this:(t=this._rgba.slice(),r=t.pop(),n=j(e)._rgba,j(b.map(t,function(e,t){return(1-r)*n[t]+r*e})))},toRgbaString:function(){var e="rgba(",t=b.map(this._rgba,function(e,t){return null==e?2<t?1:0:e});return 1===t[3]&&(t.pop(),e="rgb("),e+t.join()+")"},toHslaString:function(){var e="hsla(",t=b.map(this.hsla(),function(e,t){return null==e&&(e=2<t?1:0),e=t&&t<3?Math.round(100*e)+"%":e});return 1===t[3]&&(t.pop(),e="hsl("),e+t.join()+")"},toHexString:function(e){var t=this._rgba.slice(),r=t.pop();return e&&t.push(~~(255*r)),"#"+b.map(t,function(e){return 1===(e=(e||0).toString(16)).length?"0"+e:e}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}})).parse.prototype=j.fn,x.hsla.to=function(e){var t,r,n,i,o,a,s,u;return null==e[0]||null==e[1]||null==e[2]?[null,null,null,e[3]]:(t=e[0]/255,r=e[1]/255,n=e[2]/255,e=e[3],s=.5*(u=(i=Math.max(t,r,n))+(o=Math.min(t,r,n))),u=0==(a=i-o)?0:s<=.5?a/u:a/(2-u),[Math.round(o===i?0:t===i?60*(r-n)/a+360:r===i?60*(n-t)/a+120:60*(t-r)/a+240)%360,u,s,null==e?1:e])},x.hsla.from=function(e){var t,r,n;return null==e[0]||null==e[1]||null==e[2]?[null,null,null,e[3]]:(t=e[0]/360,n=e[1],r=e[2],e=e[3],n=2*r-(r=r<=.5?r*(1+n):r+n-r*n),[Math.round(255*R(n,r,t+1/3)),Math.round(255*R(n,r,t)),Math.round(255*R(n,r,t-1/3)),e])},k(x,function(s,e){var o=e.props,a=e.cache,u=e.to,l=e.from;j.fn[s]=function(e){var t,r,n,i;return u&&!this[a]&&(this[a]=u(this._rgba)),e===_?this[a].slice():(r=b.type(e),n="array"===r||"object"===r?e:arguments,i=this[a].slice(),k(o,function(e,t){e=n["object"===r?e:t.idx];null==e&&(e=i[t.idx]),i[t.idx]=M(e,t)}),l?((t=j(l(i)))[a]=i,t):j(i))},k(o,function(o,a){j.fn[o]||(j.fn[o]=function(e){var t=b.type(e),r="alpha"===o?this._hsla?"hsla":"rgba":s,n=this[r](),i=n[a.idx];return"undefined"===t?i:("function"===t&&(e=e.call(this,i),t=b.type(e)),null==e&&a.empty?this:("string"===t&&(t=se.exec(e))&&(e=i+parseFloat(t[2])*("+"===t[1]?1:-1)),n[a.idx]=e,this[r](n)))})})}),(j.hook=function(e){e=e.split(" ");k(e,function(e,o){b.cssHooks[o]={set:function(e,t){var r,n,i="";if("transparent"!==t&&("string"!==b.type(t)||(r=de(t)))){if(t=j(r||t),!P.rgba&&1!==t._rgba[3]){for(n="backgroundColor"===o?e.parentNode:e;(""===i||"transparent"===i)&&n&&n.style;)try{i=b.css(n,"backgroundColor"),n=n.parentNode}catch(e){}t=t.blend(i&&"transparent"!==i?i:"_default")}t=t.toRgbaString()}try{e.style[o]=t}catch(e){}}},b.fx.step[o]=function(e){e.colorInit||(e.start=j(e.elem,o),e.end=j(e.end),e.colorInit=!0),b.cssHooks[o].set(e.elem,e.start.transition(e.end,e.pos))}})})("backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor"),b.cssHooks.borderColor={expand:function(r){var n={};return k(["Top","Right","Bottom","Left"],function(e,t){n["border"+t+"Color"]=r}),n}},S=b.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"},oe=["add","remove","toggle"],ae={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1},w.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(e,t){w.fx.step[t]=function(e){("none"!==e.end&&!e.setAttr||1===e.pos&&!e.setAttr)&&(he.style(e.elem,t,e.end),e.setAttr=!0)}}),w.fn.addBack||(w.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),w.effects.animateClass=function(i,e,t,r){var o=w.speed(e,t,r);return this.queue(function(){var r=w(this),e=r.attr("class")||"",t=(t=o.children?r.find("*").addBack():r).map(function(){return{el:w(this),start:pe(this)}}),n=function(){w.each(oe,function(e,t){i[t]&&r[t+"Class"](i[t])})};n(),t=t.map(function(){return this.end=pe(this.el[0]),this.diff=function(e,t){var r,n,i={};for(r in t)n=t[r],e[r]===n||ae[r]||!w.fx.step[r]&&isNaN(parseFloat(n))||(i[r]=n);return i}(this.start,this.end),this}),r.attr("class",e),t=t.map(function(){var e=this,t=w.Deferred(),r=w.extend({},o,{queue:!1,complete:function(){t.resolve(e)}});return this.el.animate(this.diff,r),t.promise()}),w.when.apply(w,t.get()).done(function(){n(),w.each(arguments,function(){var t=this.el;w.each(this.diff,function(e){t.css(e,"")})}),o.complete.call(r[0])})})},w.fn.extend({addClass:(ie=w.fn.addClass,function(e,t,r,n){return t?w.effects.animateClass.call(this,{add:e},t,r,n):ie.apply(this,arguments)}),removeClass:(ne=w.fn.removeClass,function(e,t,r,n){return 1<arguments.length?w.effects.animateClass.call(this,{remove:e},t,r,n):ne.apply(this,arguments)}),toggleClass:(re=w.fn.toggleClass,function(e,t,r,n,i){return"boolean"==typeof t||void 0===t?r?w.effects.animateClass.call(this,t?{add:e}:{remove:e},r,n,i):re.apply(this,arguments):w.effects.animateClass.call(this,{toggle:e},t,r,n)}),switchClass:function(e,t,r,n,i){return w.effects.animateClass.call(this,{add:t,remove:e},r,n,i)}}),w.extend(w.effects,{version:"1.11.2",save:function(e,t){for(var r=0;t.length>r;r++)null!==t[r]&&e.data(fe+t[r],e[0].style[t[r]])},restore:function(e,t){for(var r,n=0;t.length>n;n++)null!==t[n]&&(r=e.data(fe+t[n]),e.css(t[n],r=void 0===r?"":r))},setMode:function(e,t){return t="toggle"===t?e.is(":hidden")?"show":"hide":t},getBaseline:function(e,t){var r,n;switch(e[0]){case"top":r=0;break;case"middle":r=.5;break;case"bottom":r=1;break;default:r=e[0]/t.height}switch(e[1]){case"left":n=0;break;case"center":n=.5;break;case"right":n=1;break;default:n=e[1]/t.width}return{x:n,y:r}},createWrapper:function(r){if(r.parent().is(".ui-effects-wrapper"))return r.parent();var n={width:r.outerWidth(!0),height:r.outerHeight(!0),float:r.css("float")},e=w("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),t={width:r.width(),height:r.height()},i=document.activeElement;try{i.id}catch(e){i=document.body}return r.wrap(e),r[0]!==i&&!w.contains(r[0],i)||w(i).focus(),e=r.parent(),"static"===r.css("position")?(e.css({position:"relative"}),r.css({position:"relative"})):(w.extend(n,{position:r.css("position"),zIndex:r.css("z-index")}),w.each(["top","left","bottom","right"],function(e,t){n[t]=r.css(t),isNaN(parseInt(n[t],10))&&(n[t]="auto")}),r.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),r.css(t),e.css(n).show()},removeWrapper:function(e){var t=document.activeElement;return e.parent().is(".ui-effects-wrapper")&&(e.parent().replaceWith(e),e[0]===t||w.contains(e[0],t))&&w(t).focus(),e},setTransition:function(n,e,i,o){return o=o||{},w.each(e,function(e,t){var r=n.cssUnit(t);0<r[0]&&(o[t]=r[0]*i+r[1])}),o}}),w.fn.extend({effect:function(){function e(e){function t(){w.isFunction(n)&&n.call(r[0]),w.isFunction(e)&&e()}var r=w(this),n=o.complete,i=o.mode;(r.is(":hidden")?"hide"===i:"show"===i)?(r[i](),t()):a.call(r[0],o,t)}var o=B.apply(this,arguments),t=o.mode,r=o.queue,a=w.effects.effect[o.effect];return w.fx.off||!a?t?this[t](o.duration,o.complete):this.each(function(){o.complete&&o.complete.call(this)}):!1===r?this.each(e):this.queue(r||"fx",e)},show:(te=w.fn.show,function(e){var t;return T(e)?te.apply(this,arguments):((t=B.apply(this,arguments)).mode="show",this.effect.call(this,t))}),hide:(ee=w.fn.hide,function(e){var t;return T(e)?ee.apply(this,arguments):((t=B.apply(this,arguments)).mode="hide",this.effect.call(this,t))}),toggle:($=w.fn.toggle,function(e){var t;return T(e)||"boolean"==typeof e?$.apply(this,arguments):((t=B.apply(this,arguments)).mode="toggle",this.effect.call(this,t))}),cssUnit:function(e){var r=this.css(e),n=[];return w.each(["em","px","%","pt"],function(e,t){0<r.indexOf(t)&&(n=[parseFloat(r),t])}),n}}),v={},w.each(["Quad","Cubic","Quart","Quint","Expo"],function(t,e){v[e]=function(e){return Math.pow(e,t+2)}}),w.extend(v,{Sine:function(e){return 1-Math.cos(e*Math.PI/2)},Circ:function(e){return 1-Math.sqrt(1-e*e)},Elastic:function(e){return 0===e||1===e?e:-Math.pow(2,8*(e-1))*Math.sin((80*(e-1)-7.5)*Math.PI/15)},Back:function(e){return e*e*(3*e-2)},Bounce:function(e){for(var t,r=4;((t=Math.pow(2,--r))-1)/11>e;);return 1/Math.pow(4,3-r)-7.5625*Math.pow((3*t-2)/22-e,2)}}),w.each(v,function(e,t){w.easing["easeIn"+e]=t,w.easing["easeOut"+e]=function(e){return 1-t(1-e)},w.easing["easeInOut"+e]=function(e){return e<.5?t(2*e)/2:1-t(-2*e+2)/2}}),w.effects,w.effects.effect.blind=function(e,t){var r,n,i,o=w(this),a=["position","top","bottom","left","right","height","width"],s=w.effects.setMode(o,e.mode||"hide"),u=e.direction||"up",l=/up|down|vertical/.test(u),c=l?"height":"width",f=l?"top":"left",u=/up|left|vertical|horizontal/.test(u),h={},p="show"===s;o.parent().is(".ui-effects-wrapper")?w.effects.save(o.parent(),a):w.effects.save(o,a),o.show(),n=(r=w.effects.createWrapper(o).css({overflow:"hidden"}))[c](),i=parseFloat(r.css(f))||0,h[c]=p?n:0,u||(o.css(l?"bottom":"right",0).css(l?"top":"left","auto").css({position:"absolute"}),h[f]=p?i:n+i),p&&(r.css(c,0),u||r.css(f,i+n)),r.animate(h,{duration:e.duration,easing:e.easing,queue:!1,complete:function(){"hide"===s&&o.hide(),w.effects.restore(o,a),w.effects.removeWrapper(o),t()}})},w.effects.effect.bounce=function(e,t){var r,n,i,o=w(this),a=["position","top","bottom","left","right","height","width"],s=w.effects.setMode(o,e.mode||"effect"),u="hide"===s,s="show"===s,l=e.direction||"up",c=e.distance,f=e.times||5,h=2*f+(s||u?1:0),p=e.duration/h,d=e.easing,g="up"===l||"down"===l?"top":"left",y="up"===l||"left"===l,e=o.queue(),l=e.length;for((s||u)&&a.push("opacity"),w.effects.save(o,a),o.show(),w.effects.createWrapper(o),c=c||o["top"==g?"outerHeight":"outerWidth"]()/3,s&&((i={opacity:1})[g]=0,o.css("opacity",0).css(g,y?2*-c:2*c).animate(i,p,d)),u&&(c/=Math.pow(2,f-1)),r=(i={})[g]=0;r<f;r++)(n={})[g]=(y?"-=":"+=")+c,o.animate(n,p,d).animate(i,p,d),c=u?2*c:c/2;u&&((n={opacity:0})[g]=(y?"-=":"+=")+c,o.animate(n,p,d)),o.queue(function(){u&&o.hide(),w.effects.restore(o,a),w.effects.removeWrapper(o),t()}),1<l&&e.splice.apply(e,[1,0].concat(e.splice(l,1+h))),o.dequeue()},w.effects.effect.clip=function(e,t){var r,n,i=w(this),o=["position","top","bottom","left","right","height","width"],a="show"===w.effects.setMode(i,e.mode||"hide"),s="vertical"===(e.direction||"vertical"),u=s?"height":"width",s=s?"top":"left",l={};w.effects.save(i,o),i.show(),r=w.effects.createWrapper(i).css({overflow:"hidden"}),n=(r="IMG"===i[0].tagName?r:i)[u](),a&&(r.css(u,0),r.css(s,n/2)),l[u]=a?n:0,l[s]=a?0:n/2,r.animate(l,{queue:!1,duration:e.duration,easing:e.easing,complete:function(){a||i.hide(),w.effects.restore(i,o),w.effects.removeWrapper(i),t()}})},w.effects.effect.drop=function(e,t){var r,n=w(this),i=["position","top","bottom","left","right","opacity","height","width"],o=w.effects.setMode(n,e.mode||"hide"),a="show"===o,s=e.direction||"left",u="up"===s||"down"===s?"top":"left",s="up"===s||"left"===s?"pos":"neg",l={opacity:a?1:0};w.effects.save(n,i),n.show(),w.effects.createWrapper(n),r=e.distance||n["top"==u?"outerHeight":"outerWidth"](!0)/2,a&&n.css("opacity",0).css(u,"pos"==s?-r:r),l[u]=(a?"pos"==s?"+=":"-=":"pos"==s?"-=":"+=")+r,n.animate(l,{queue:!1,duration:e.duration,easing:e.easing,complete:function(){"hide"===o&&n.hide(),w.effects.restore(n,i),w.effects.removeWrapper(n),t()}})},w.effects.effect.explode=function(e,t){function r(){g.push(this),g.length===u*l&&(c.css({visibility:"visible"}),w(g).remove(),f||c.hide(),t())}for(var n,i,o,a,s,u=e.pieces?Math.round(Math.sqrt(e.pieces)):3,l=u,c=w(this),f="show"===w.effects.setMode(c,e.mode||"hide"),h=c.show().css("visibility","hidden").offset(),p=Math.ceil(c.outerWidth()/l),d=Math.ceil(c.outerHeight()/u),g=[],y=0;y<u;y++)for(o=h.top+y*d,s=y-(u-1)/2,n=0;n<l;n++)i=h.left+n*p,a=n-(l-1)/2,c.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-n*p,top:-y*d}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:p,height:d,left:i+(f?a*p:0),top:o+(f?s*d:0),opacity:f?0:1}).animate({left:i+(f?0:a*p),top:o+(f?0:s*d),opacity:f?1:0},e.duration||500,e.easing,r)},w.effects.effect.fade=function(e,t){var r=w(this),n=w.effects.setMode(r,e.mode||"toggle");r.animate({opacity:n},{queue:!1,duration:e.duration,easing:e.easing,complete:t})},w.effects.effect.fold=function(e,t){var r,n=w(this),i=["position","top","bottom","left","right","height","width"],o=w.effects.setMode(n,e.mode||"hide"),a="show"===o,s="hide"===o,o=e.size||15,u=/([0-9]+)%/.exec(o),l=!!e.horizFirst,c=a!=l,f=c?["width","height"]:["height","width"],h=e.duration/2,p={},d={};w.effects.save(n,i),n.show(),r=w.effects.createWrapper(n).css({overflow:"hidden"}),c=c?[r.width(),r.height()]:[r.height(),r.width()],u&&(o=parseInt(u[1],10)/100*c[s?0:1]),a&&r.css(l?{height:0,width:o}:{height:o,width:0}),p[f[0]]=a?c[0]:o,d[f[1]]=a?c[1]:0,r.animate(p,h,e.easing).animate(d,h,e.easing,function(){s&&n.hide(),w.effects.restore(n,i),w.effects.removeWrapper(n),t()})},w.effects.effect.highlight=function(e,t){var r=w(this),n=["backgroundImage","backgroundColor","opacity"],i=w.effects.setMode(r,e.mode||"show"),o={backgroundColor:r.css("backgroundColor")};"hide"===i&&(o.opacity=0),w.effects.save(r,n),r.show().css({backgroundImage:"none",backgroundColor:e.color||"#ffff99"}).animate(o,{queue:!1,duration:e.duration,easing:e.easing,complete:function(){"hide"===i&&r.hide(),w.effects.restore(r,n),t()}})},w.effects.effect.size=function(o,e){var t,a,s=w(this),r=["position","top","bottom","left","right","width","height","overflow","opacity"],u=["width","height","overflow"],n=["fontSize"],l=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],c=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],i=w.effects.setMode(s,o.mode||"effect"),f=o.restore||"effect"!==i,h=o.scale||"both",p=o.origin||["middle","center"],d=s.css("position"),g=f?r:["position","top","bottom","left","right","overflow","opacity"],y={height:0,width:0,outerHeight:0,outerWidth:0};"show"===i&&s.show(),t={height:s.height(),width:s.width(),outerHeight:s.outerHeight(),outerWidth:s.outerWidth()},"toggle"===o.mode&&"show"===i?(s.from=o.to||y,s.to=o.from||t):(s.from=o.from||("show"===i?y:t),s.to=o.to||("hide"===i?y:t)),a={from:{y:s.from.height/t.height,x:s.from.width/t.width},to:{y:s.to.height/t.height,x:s.to.width/t.width}},"box"!==h&&"both"!==h||(a.from.y!==a.to.y&&(g=g.concat(l),s.from=w.effects.setTransition(s,l,a.from.y,s.from),s.to=w.effects.setTransition(s,l,a.to.y,s.to)),a.from.x===a.to.x)||(g=g.concat(c),s.from=w.effects.setTransition(s,c,a.from.x,s.from),s.to=w.effects.setTransition(s,c,a.to.x,s.to)),"content"!==h&&"both"!==h||a.from.y===a.to.y||(g=g.concat(n).concat(u),s.from=w.effects.setTransition(s,n,a.from.y,s.from),s.to=w.effects.setTransition(s,n,a.to.y,s.to)),w.effects.save(s,g),s.show(),w.effects.createWrapper(s),s.css("overflow","hidden").css(s.from),p&&(y=w.effects.getBaseline(p,t),s.from.top=(t.outerHeight-s.outerHeight())*y.y,s.from.left=(t.outerWidth-s.outerWidth())*y.x,s.to.top=(t.outerHeight-s.to.outerHeight)*y.y,s.to.left=(t.outerWidth-s.to.outerWidth)*y.x),s.css(s.from),"content"!==h&&"both"!==h||(l=l.concat(["marginTop","marginBottom"]).concat(n),c=c.concat(["marginLeft","marginRight"]),u=r.concat(l).concat(c),s.find("*[width]").each(function(){var e=w(this),t=e.height(),r=e.width(),n=e.outerHeight(),i=e.outerWidth();f&&w.effects.save(e,u),e.from={height:t*a.from.y,width:r*a.from.x,outerHeight:n*a.from.y,outerWidth:i*a.from.x},e.to={height:t*a.to.y,width:r*a.to.x,outerHeight:t*a.to.y,outerWidth:r*a.to.x},a.from.y!==a.to.y&&(e.from=w.effects.setTransition(e,l,a.from.y,e.from),e.to=w.effects.setTransition(e,l,a.to.y,e.to)),a.from.x!==a.to.x&&(e.from=w.effects.setTransition(e,c,a.from.x,e.from),e.to=w.effects.setTransition(e,c,a.to.x,e.to)),e.css(e.from),e.animate(e.to,o.duration,o.easing,function(){f&&w.effects.restore(e,u)})})),s.animate(s.to,{queue:!1,duration:o.duration,easing:o.easing,complete:function(){0===s.to.opacity&&s.css("opacity",s.from.opacity),"hide"===i&&s.hide(),w.effects.restore(s,g),f||("static"===d?s.css({position:"relative",top:s.to.top,left:s.to.left}):w.each(["top","left"],function(i,e){s.css(e,function(e,t){var r=parseInt(t,10),n=i?s.to.left:s.to.top;return"auto"===t?n+"px":r+n+"px"})})),w.effects.removeWrapper(s),e()}})},w.effects.effect.scale=function(e,t){var r=w(this),n=w.extend(!0,{},e),i=w.effects.setMode(r,e.mode||"effect"),o=parseInt(e.percent,10)||(0===parseInt(e.percent,10)||"hide"===i?0:100),a=e.direction||"both",s=e.origin,u={height:r.height(),width:r.width(),outerHeight:r.outerHeight(),outerWidth:r.outerWidth()},l="horizontal"!==a?o/100:1,a="vertical"!==a?o/100:1;n.effect="size",n.queue=!1,n.complete=t,"effect"!==i&&(n.origin=s||["middle","center"],n.restore=!0),n.from=e.from||("show"===i?{height:0,width:0,outerHeight:0,outerWidth:0}:u),n.to={height:u.height*l,width:u.width*a,outerHeight:u.outerHeight*l,outerWidth:u.outerWidth*a},n.fade&&("show"===i&&(n.from.opacity=0,n.to.opacity=1),"hide"===i)&&(n.from.opacity=1,n.to.opacity=0),r.effect(n)},w.effects.effect.puff=function(e,t){var r=w(this),n=w.effects.setMode(r,e.mode||"hide"),i="hide"===n,o=parseInt(e.percent,10)||150,a=o/100,s={height:r.height(),width:r.width(),outerHeight:r.outerHeight(),outerWidth:r.outerWidth()};w.extend(e,{effect:"scale",queue:!1,fade:!0,mode:n,complete:t,percent:i?o:100,from:i?s:{height:s.height*a,width:s.width*a,outerHeight:s.outerHeight*a,outerWidth:s.outerWidth*a}}),r.effect(e)},w.effects.effect.pulsate=function(e,t){var r,n=w(this),i=w.effects.setMode(n,e.mode||"show"),o="show"===i,a="hide"===i,s=2*(e.times||5)+(o||"hide"===i?1:0),u=e.duration/s,l=0,i=n.queue(),c=i.length;for(!o&&n.is(":visible")||(n.css("opacity",0).show(),l=1),r=1;r<s;r++)n.animate({opacity:l},u,e.easing),l=1-l;n.animate({opacity:l},u,e.easing),n.queue(function(){a&&n.hide(),t()}),1<c&&i.splice.apply(i,[1,0].concat(i.splice(c,1+s))),n.dequeue()},w.effects.effect.shake=function(e,t){var r,n=w(this),i=["position","top","bottom","left","right","height","width"],o=w.effects.setMode(n,e.mode||"effect"),a=e.direction||"left",s=e.distance||20,u=e.times||3,l=2*u+1,c=Math.round(e.duration/l),f="up"===a||"down"===a?"top":"left",a="up"===a||"left"===a,h={},p={},d={},g=n.queue(),y=g.length;for(w.effects.save(n,i),n.show(),w.effects.createWrapper(n),h[f]=(a?"-=":"+=")+s,p[f]=(a?"+=":"-=")+2*s,d[f]=(a?"-=":"+=")+2*s,n.animate(h,c,e.easing),r=1;r<u;r++)n.animate(p,c,e.easing).animate(d,c,e.easing);n.animate(p,c,e.easing).animate(h,c/2,e.easing).queue(function(){"hide"===o&&n.hide(),w.effects.restore(n,i),w.effects.removeWrapper(n),t()}),1<y&&g.splice.apply(g,[1,0].concat(g.splice(y,1+l))),n.dequeue()},w.effects.effect.slide=function(e,t){var r,n=w(this),i=["position","top","bottom","left","right","width","height"],o=w.effects.setMode(n,e.mode||"show"),a="show"===o,s=e.direction||"left",u="up"===s||"down"===s?"top":"left",s="up"===s||"left"===s,l={};w.effects.save(n,i),n.show(),r=e.distance||n["top"==u?"outerHeight":"outerWidth"](!0),w.effects.createWrapper(n).css({overflow:"hidden"}),a&&n.css(u,s?isNaN(r)?"-"+r:-r:r),l[u]=(a?s?"+=":"-=":s?"-=":"+=")+r,n.animate(l,{queue:!1,duration:e.duration,easing:e.easing,complete:function(){"hide"===o&&n.hide(),w.effects.restore(n,i),w.effects.removeWrapper(n),t()}})},w.effects.effect.transfer=function(e,t){var r=w(this),n=w(e.to),i="fixed"===n.css("position"),o=w("body"),a=i?o.scrollTop():0,o=i?o.scrollLeft():0,s=n.offset(),s={top:s.top-a,left:s.left-o,height:n.innerHeight(),width:n.innerWidth()},n=r.offset(),u=w("<div class='ui-effects-transfer'></div>").appendTo(document.body).addClass(e.className).css({top:n.top-a,left:n.left-o,height:r.innerHeight(),width:r.innerWidth(),position:i?"fixed":"absolute"}).animate(s,e.duration,e.easing,function(){u.remove(),t()})}}),!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?e(require("jquery")):e(jQuery)}(function(f){var r=/\+/g;function h(e){return d.raw?e:encodeURIComponent(e)}function p(e,t){e=d.raw?e:function(e){0===e.indexOf('"')&&(e=e.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return e=decodeURIComponent(e.replace(r," ")),d.json?JSON.parse(e):e}catch(e){}}(e);return f.isFunction(t)?t(e):e}var d=f.cookie=function(e,t,r){var n,i;if(void 0!==t&&!f.isFunction(t))return"number"==typeof(r=f.extend({},d.defaults,r)).expires&&(n=r.expires,(i=r.expires=new Date).setTime(+i+864e5*n)),document.cookie=[h(e),"=",(i=t,h(d.json?JSON.stringify(i):String(i))),r.expires?"; expires="+r.expires.toUTCString():"",r.path?"; path="+r.path:"",r.domain?"; domain="+r.domain:"",r.secure?"; secure":""].join("");for(var o=e?void 0:{},a=document.cookie?document.cookie.split("; "):[],s=0,u=a.length;s<u;s++){var l=a[s].split("="),c=(c=l.shift(),d.raw?c:decodeURIComponent(c)),l=l.join("=");if(e&&e===c){o=p(l,t);break}e||void 0===(l=p(l))||(o[c]=l)}return o};d.defaults={},f.removeCookie=function(e,t){return void 0!==f.cookie(e)&&(f.cookie(e,"",f.extend({},t,{expires:-1})),!f.cookie(e))}}),jQuery.fn.fullScreen=d,jQuery.fn.toggleFullScreen=function(){return d.call(this,!d.call(this))},e=document,g=e.webkitCancelFullScreen?(f="webkitfullscreenchange","webkitfullscreenerror"):e.mozCancelFullScreen?(f="mozfullscreenchange","mozfullscreenerror"):(f="fullscreenchange","fullscreenerror"),jQuery(document).bind(f,function(){jQuery(document).trigger(new jQuery.Event("fullscreenchange"))}),jQuery(document).bind(g,function(){jQuery(document).trigger(new jQuery.Event("fullscreenerror"))}),document.getElementsByTagName("script")),cookieScriptSrc=cookieScripts[cookieScripts.length-1].src,cookieQuery=null,cookieScriptPosition="bottom",cookieScriptSide="right",cookieScriptSource="cookie-script.com",cookieScriptDomain="",cookieScriptReadMore="/policies/cookie_"+App.context.languageCode+".html",cookieId="6a00eb3cf69b00d1af83ec32b891828a",cookieScriptDebug=0,cookieScriptCurrentUrl=window.location.href,cookieScriptTitle='<h4 id="cookiescript_header">'+App.translations.weUseCookies+"</h4>",cookieScriptDesc=App.translations.weUseCookiesDescription,cookieScriptAccept="×",cookieScriptMore=App.translations.readMore,cookieScriptCopyrights="",cookieScriptLoadJavaScript=function(e,t){var r=document.getElementsByTagName("head")[0],n=document.createElement("script");n.type="text/javascript",n.src=e,null!=t&&(n.onload=n.onreadystatechange=function(){n.readyState&&!/loaded|complete/.test(n.readyState)||(n.onload=n.onreadystatechange=null,r&&n.parentNode&&r.removeChild(n),n=void 0,t())}),r.insertBefore(n,r.firstChild)},InjectCookieScript=function(){function t(e){"show"==e?(cookieQuery("#cookiescript_overlay",cookieScriptWindow).show(),cookieQuery("#cookiescript_info_box",cookieScriptWindow).show()):"hide"==e&&(cookieQuery("#cookiescript_overlay",cookieScriptWindow).hide(),cookieQuery("#cookiescript_info_box",cookieScriptWindow).hide())}function e(){cookieQuery('img[data-cookiescript="accepted"]').each(function(){cookieQuery(this).attr("src",cookieQuery(this).attr("data-src"))}),cookieQuery('script[type="text/plain"][data-cookiescript="accepted"]').each(function(){cookieQuery(this).attr("src")?cookieQuery(this).after('<script type="text/javascript" src="'+cookieQuery(this).attr("src")+'"><\/script>'):cookieQuery(this).after('<script type="text/javascript">'+cookieQuery(this).html()+"<\/script>"),cookieQuery(this).empty()}),cookieQuery('iframe[data-cookiescript="accepted"]').each(function(){cookieQuery(this).attr("src",cookieQuery(this).attr("data-src"))}),cookieQuery('embed[data-cookiescript="accepted"]').each(function(){cookieQuery(this).replaceWith(cookieQuery(this).attr("src",cookieQuery(this).attr("data-src"))[0].outerHTML)}),cookieQuery('object[data-cookiescript="accepted"]').each(function(){cookieQuery(this).replaceWith(cookieQuery(this).attr("data",cookieQuery(this).attr("data-data"))[0].outerHTML)}),cookieQuery('link[data-cookiescript="accepted"]').each(function(){cookieQuery(this).attr("href",cookieQuery(this).attr("data-href"))})}cookieScriptDropfromFlag=0,cookieScriptDroptoFlag=0,cookieScriptCreateCookie=function(e,t,r){var n,i="";r&&((n=new Date).setTime(n.getTime()+864e5*r),i="; expires="+n.toGMTString()),(r="")!=cookieScriptDomain&&(r="; domain="+cookieScriptDomain),document.cookie=e+"="+t+i+r+"; path=/"},cookieScriptReadCookie=function(e){e+="=";for(var t,r=document.cookie.split(";"),n=0;n<r.length;n++){for(t=r[n];" "==t.charAt(0);)t=t.substring(1,t.length);if(0==t.indexOf(e))return t.substring(e.length,t.length)}return null},cookieQuery(function(){if(cookieScriptWindow=window.document,cookieQuery("#cookiescript_injected",cookieScriptWindow).remove(),cookieQuery("#cookiescript_overlay",cookieScriptWindow).remove(),cookieQuery("#cookiescript_info_box",cookieScriptWindow).remove(),"visit"==(cookieScriptCurrentValue=cookieScriptReadCookie("cookiescriptaccept")))return!1;if(cookieScriptCurrentValue){if("firstvisit"==cookieScriptCurrentValue.substring(0,10)&&cookieScriptCurrentValue!="firstvisit-"+cookieScriptCurrentUrl)return cookieScriptCreateCookie("cookiescriptaccept","visit",30),e(),!1}else cookieScriptCreateCookie("cookiescriptaccept","firstvisit-"+cookieScriptCurrentUrl,30);cookieQuery("body",cookieScriptWindow).append('<div id="cookiescript_injected">'+cookieScriptTitle+cookieScriptDesc+' <span id="cookiescript_readmore">'+cookieScriptMore+'</span><div id="cookiescript_accept">'+cookieScriptAccept+'</div><div style="clear:both"></div>'),cookieQuery("#cookiescript_injected",cookieScriptWindow).css({"background-color":"#111111","z-index":999999,opacity:1,position:"fixed",padding:"15px",width:"300px","font-size":"13px","font-weight":"normal","text-align":"left",color:"#FFFFFF","font-family":"Arial, sans-serif",display:"none","line-height":"15px","letter-spacing":"normal","-moz-box-shadow":"0px 0px 8px #000000","-webkit-box-shadow":"0px 0px 8px #000000","box-shadow":"0px 0px 8px #000000"}),"top"==cookieScriptPosition?cookieQuery("#cookiescript_injected",cookieScriptWindow).css("top",0):cookieQuery("#cookiescript_injected",cookieScriptWindow).css("bottom",0),"left"==cookieScriptSide?cookieQuery("#cookiescript_injected",cookieScriptWindow).css("left",0):cookieQuery("#cookiescript_injected",cookieScriptWindow).css("right",0),cookieQuery("#cookiescript_injected h4#cookiescript_header",cookieScriptWindow).css({"background-color":"#111111","z-index":999999,padding:"0 0 7px 0","text-align":"left",color:"#FFFFFF","font-family":"Arial, sans-serif",display:"block","font-size":"15px","font-weight":"bold","line-height":"normal","letter-spacing":"normal","font-style":"normal",margin:"0"}),cookieQuery("#cookiescript_injected a",cookieScriptWindow).css({"text-decoration":"underline",color:"#FFFFFF"}),cookieQuery("#cookiescript_injected a#cookiescript_link",cookieScriptWindow).css({"text-decoration":"none",color:"#FFFFFF",float:"right","font-size":"90%","margin-top":"8px"}),cookieQuery("#cookiescript_injected span#cookiescript_readmore",cookieScriptWindow).css({border:0,padding:"0","text-decoration":"underline",cursor:"pointer",margin:"0","white-space":"nowrap"}),cookieQuery("#cookiescript_injected div#cookiescript_accept",cookieScriptWindow).css({"-webkit-border-radius":"10px","-khtml-border-radius":"10px","-moz-border-radius":"10px","border-radius":"10px",border:0,padding:"0",cursor:"pointer",margin:"0","-webkit-transition":"0.25s","-moz-transition":"0.25s",transition:"0.25s",width:"20px",height:"20px",position:"absolute",top:"12px",right:"17px","text-align":"center","font-weight":"bold","line-height":"21px","font-size":"20px"}),cookieQuery("#cookiescript_injected div#cookiescript_accept",cookieScriptWindow).css({"background-color":"#5BB75B",color:"#FFFFFF",float:"left"}),cookieQuery("#cookiescript_injected span#cookiescript_readmore",cookieScriptWindow).css({}),cookieQuery("#cookiescript_injected div#cookiescript_pixel",cookieScriptWindow).css({width:"1px",height:"1px",float:"left"}),cookieQuery("#cookiescript_injected",cookieScriptWindow).fadeIn(1e3),cookieQuery("#cookiescript_injected div#cookiescript_accept",cookieScriptWindow).click(function(){"undefined"==typeof cookieScriptScrollfired&&(cookieQuery("#cookiescript_injected",cookieScriptWindow).fadeOut(200),cookieScriptCreateCookie("cookiescriptaccept","visit",30),t("hide"),e())}),cookieQuery("#cookiescript_injected span#cookiescript_readmore",cookieScriptWindow).click(function(){return window.open(cookieScriptReadMore,"_blank"),!1}),cookieQuery("#cookiescript_overlay",cookieScriptWindow).click(function(){t("hide")}),cookieQuery("#cookiescript_info_close",cookieScriptWindow).click(function(){t("hide")}),document.onkeydown=function(e){27==(e=e||window.event).keyCode&&t("hide")},cookieQuery('iframe[data-cookiescript="accepted"]').not(":has([src])").each(function(){var e=this;(e=e.contentWindow||e.contentDocument.document||e.contentDocument).document.open(),e.document.write(cookieQuery(this).attr("alt")),e.document.close()})}),"visit"!=cookieScriptReadCookie("cookiescriptaccept")&&"shown"!=cookieScriptReadCookie("cookiescriptaccept")||e()};function cof2Obj(e){"use strict";var t,r,n,i,o,a=e.split("\n"),s=[];for(t in a)a.hasOwnProperty(t)&&(3===(r=a[t].replace(/^\s+|\s+$/g,"").split(/\s+/)).length?(n=parseFloat(r[0]),i=r[1],o=r[2]):6===r.length&&s.push({n:parseInt(r[0],10),m:parseInt(r[1],10),gnm:parseFloat(r[2]),hnm:parseFloat(r[3]),dgnm:parseFloat(r[4]),dhnm:parseFloat(r[5])}));return{epoch:n,model:i,modelDate:o,wmm:s}}function geoMagFactory(e){"use strict";function E(e){return e*(180/Math.PI)}function C(e){return e*(Math.PI/180)}var t,r,I,S,n,i,o,j=e.epoch,a=[0,0,0,0,0,0,0,0,0,0,0,0,0],x=[a.slice(),a.slice(),a.slice(),a.slice(),a.slice(),a.slice(),a.slice(),a.slice(),a.slice(),a.slice(),a.slice(),a.slice(),a.slice()],O=a.slice(),P=a.slice(),k=a.slice(),B=[a.slice(),a.slice(),a.slice(),a.slice(),a.slice(),a.slice(),a.slice(),a.slice(),a.slice(),a.slice(),a.slice(),a.slice(),a.slice()],T=[a.slice(),a.slice(),a.slice(),a.slice(),a.slice(),a.slice(),a.slice(),a.slice(),a.slice(),a.slice(),a.slice(),a.slice(),a.slice()],s=6356.7523142,M=40680631.59076899,R=s*s,D=M-R,L=M*M,Q=[a.slice(),a.slice(),a.slice(),a.slice(),a.slice(),a.slice(),a.slice(),a.slice(),a.slice(),a.slice(),a.slice(),a.slice(),a.slice()],F=[a.slice(),a.slice(),a.slice(),a.slice(),a.slice(),a.slice(),a.slice(),a.slice(),a.slice(),a.slice(),a.slice(),a.slice(),a.slice()],u=[a.slice(),a.slice(),a.slice(),a.slice(),a.slice(),a.slice(),a.slice(),a.slice(),a.slice(),a.slice(),a.slice(),a.slice(),a.slice()],N=[a.slice(),a.slice(),a.slice(),a.slice(),a.slice(),a.slice(),a.slice(),a.slice(),a.slice(),a.slice(),a.slice(),a.slice(),a.slice()],G=[0,2,3,4,5,6,7,8,9,10,11,12,13],U=[0,1,2,3,4,5,6,7,8,9,10,11,12];for(t in x[0][0]=0,O[0]=0,P[0]=1,k[0]=1,B[0][0]=1,r=e.wmm)r.hasOwnProperty(t)&&r[t].m<=r[t].n&&(Q[r[t].m][r[t].n]=r[t].gnm,F[r[t].m][r[t].n]=r[t].dgnm,0!==r[t].m)&&(Q[r[t].n][r[t].m-1]=r[t].hnm,F[r[t].n][r[t].m-1]=r[t].dhnm);for(r=e=null,u[0][0]=1,I=1;I<=12;I++)for(u[0][I]=u[0][I-1]*(2*I-1)/I,n=2,o=I-(S=0)+1;0<o;o--,S++)N[S][I]=((I-1)*(I-1)-S*S)/((2*I-1)*(2*I-3)),0<S&&(i=(I-S+1)*n/(I+S),u[S][I]=u[S-1][I]*Math.sqrt(i),Q[I][S-(n=1)]=u[S][I]*Q[I][S-1],F[I][S-1]=u[S][I]*F[I][S-1]),Q[S][I]=u[S][I]*Q[S][I],F[S][I]=u[S][I]*F[S][I];return N[1][1]=0,function(e,t,r,n){r=r/3280.8399||0;d=(n=(n=n)||new Date).getFullYear(),g=24*(365+(d%400==0||d%4==0&&0<d%100?1:0))*60*60*1e3;var i,o,a,s,u,l,c,f,h,p=n.getFullYear()+(n.valueOf()-new Date(d,0).valueOf())/g-j,n=C(e),d=C(t),g=Math.sin(d),y=Math.sin(n),d=Math.cos(d),n=Math.cos(n),A=y*y,m=n*n,v=0,b=0,_=0,w=0;for(O[1]=g,P[1]=d,d=r*(g=Math.sqrt(M-D*A)),i=y/Math.sqrt((d+M)/(d+R)*((d+M)/(d+R))*m+A),o=Math.sqrt(1-i*i),d=Math.sqrt(r*r+2*d+(L-22083079019902.25*A)/(g*g)),r=(r+(g=Math.sqrt(M*m+R*A)))/d,m=D*n*y/(d*g),S=2;S<=12;S++)O[S]=O[1]*P[S-1]+P[1]*O[S-1],P[S]=P[1]*P[S-1]-O[1]*O[S-1];for(s=(a=6371.2/d)*a,I=1;I<=12;I++)for(s*=a,f=I+(S=0)+1;0<f;f--,S++)I===S?(B[S][I]=o*B[S-1][I-1],T[S][I]=o*T[S-1][I-1]+i*B[S-1][I-1]):1===I&&0===S?(B[S][I]=i*B[S][I-1],T[S][I]=i*T[S][I-1]-o*B[S][I-1]):1<I&&I!==S&&(I-2<S&&(B[S][I-2]=0),I-2<S&&(T[S][I-2]=0),B[S][I]=i*B[S][I-1]-N[S][I]*B[S][I-2],T[S][I]=i*T[S][I-1]-o*B[S][I-1]-N[S][I]*T[S][I-2]),x[S][I]=Q[S][I]+p*F[S][I],0!==S&&(x[I][S-1]=Q[I][S-1]+p*F[I][S-1]),c=s*B[S][I],l=0===S?(u=x[S][I]*P[S],x[S][I]*O[S]):(u=x[S][I]*P[S]+x[I][S-1]*O[S],x[S][I]*O[S]-x[I][S-1]*P[S]),b-=s*u*T[S][I],_+=U[S]*l*c,v+=G[I]*u*c,0===o&&1===S&&(k[I]=1===I?k[I-1]:i*k[I-1]-N[S][I]*k[I-2],c=s*k[I],w+=U[S]*l*c);return A=-b*r-v*m,n=_=0===o?w:_/o,y=b*m-v*r,g=Math.sqrt(A*A+n*n),d=Math.sqrt(g*g+y*y),m=E(Math.atan2(n,A)),r=E(Math.atan2(y,g)),55<=Math.abs(e)&&(0<e&&0<=t?h=m-t:0<e&&t<0?h=m+Math.abs(t):e<0&&0<=t?h=m+t:e<0&&t<0&&(h=m-Math.abs(t)),180<h?h-=360:h<-180&&(h+=360)),{dec:m,dip:r,ti:d,bh:g,bx:A,by:n,bz:y,lat:e,lon:t,gv:h,epoch:j}}}window.jQuery&&jQuery.fn&&/^(1\.[8-9]|2\.[0-9])/.test(jQuery.fn.jquery)?(cookieScriptDebug&&window.console&&console.log("Using existing jQuery version "+jQuery.fn.jquery),cookieQuery=window.jQuery,InjectCookieScript()):(cookieScriptDebug&&window.console&&console.log("Loading jQuery 1.8.1 from ajax.googleapis.com"),cookieScriptLoadJavaScript(("https:"==document.location.protocol?"https://":"http://")+"ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js",function(){cookieQuery=jQuery.noConflict(!0),InjectCookieScript()})),!function n(i,o,a){function s(t,e){if(!o[t]){if(!i[t]){var r="function"==typeof require&&require;if(!e&&r)return r(t,!0);if(u)return u(t,!0);throw(e=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",e}r=o[t]={exports:{}},i[t][0].call(r.exports,function(e){return s(i[t][1][e]||e)},r,r.exports,n,i,o,a)}return o[t].exports}for(var u="function"==typeof require&&require,e=0;e<a.length;e++)s(a[e]);return s}({1:[function(e,t,r){"use strict";var A,n,a,m=(e=e("proj4"))&&e.__esModule?e:{default:e};function i(e){return e=+e.toString().replace(/\,/gi,"."),isNaN(e)?0:e}function o(){return a.utils.newDeferred.apply(this,arguments)}function s(e){return 0<=e?Math.floor((e+180)/6)+1:Math.floor(e/6)+31}function u(e){return 0<=e?"n":"s"}function l(e){var t;switch(e){case"m":t=1;break;case"km":t=1e3;break;case"us-ft":t=.304800609601219;break;default:t=1e3}return t}function c(e,t){return i(e)*l(t)}A=jQuery,n=TWCCHistory,a=App,A.widget("twcc.converterSet",{options:{units:{dms:{D:"°",M:"'",S:"''"},dd:{x:{DD:"°E"},y:{DD:"°N"}},cartesian:{XY:{m:"m",km:"km","us-ft":"ft"},CONVERGENCE:"°"}},labels:{spherical:{x:"Lng = ",y:"Lat = ",convergence:"Conv. = "},cartesian:{x:"X = ",y:"Y = ",z:"Zone = ",h:"Hemisphere = ",convergence:"Conv. = "},csv:{csv:"CSV : ",l:"Format : "}},options:{x:{E:"East",W:"West"},y:{N:"North",S:"South"},o:{_DMS:"Deg. min. sec.",_DM:"Deg. min.",_DD:"Decimal deg."},h:{n:"North",s:"South"},u:{_M:"Meters",_KM:"Kilometers",_F:"Feet"}},value:{x:0,y:0},wgs84:[],defaultWgs84:[{x:0,y:0}],selections:{},definitions:{},url:"",$containers:[],masterLoadingToggleSwitch:!1,csv:!1},_create:function(){var e,t=this;if(this._bindEvents(),this._historyManager=n.getInstance(a),e=this._historyManager.getCurrentValue(),!this.options.wgs84)if(e){var r=/UD\d+/gi;if(1<e.wgs84.length)this.options.wgs84=e.wgs84,t.options.csv=!0;else{if("array"!==A.type(e.wgs84))throw"Wrong data type";this.options.wgs84=e.wgs84}this.options.selections.source=r.test(e.sc)?"WGS84":e.sc,this.options.selections.destination=r.test(e.dc)?"WGS84":e.dc}else this.options.wgs84=this.options.defaultWgs84;this.options.$containers=this.element.find(".converter-container"),this.options.$containers.each(function(e){A(this).converter({units:t.options.units,labels:t.options.labels,options:t.options.options,csv:t.options.csv,target:e?"dest":"source",selection:t.options.selections[e?"destination":"source"],value:t.options.value,wgs84:t.options.wgs84})}),this.options.masterLoadingToggleSwitch=!0,this._toggleLoading(),this._reload().progress(function(e){t._trigger(".notify",null,e)}).done(function(){t._reloadSucceeded.apply(t,arguments),t._trigger(".done",null,{wgs84:t.wgs84(),csv:t.csv(),selections:t.options.selections}),t.setConvergence()}).fail(function(){t._reloadFailed.apply(t,arguments)})},_bindEvents:function(){var r=this;this.element.on("converter.transform",function(e,t){r.transform(t)}),this.element.on("converter.source.wgs84_changed converterset.done ",function(e,t){t.wgs84.length&&(t={wgs84:t.wgs84,convergenceInDegrees:r._convergence(),srsCode:r._selection(),magneticDeclinationInDegrees:(t=t.wgs84,a.utils.getWMM()(t[0].y,t[0].x).dec)},r._addToHistory(t),r._triggerWgs84Changed(e,t))}),this.element.on("converter.source.selection_changed converter.dest.selection_changed ",function(e,t){t={wgs84:t.wgs84,srsCode:r._selection()};r._addToHistory(t),r._triggerConvergenceChange()}),this.element.on("converter.source.convergence_changed converter.dest.convergence_changed ",function(){r._triggerConvergenceChange()}),this.element.find(".history").click(function(){A(this).hasClass("next")?r._historyManager.moveToNext():r._historyManager.moveToPrevious(),r._restoreFromHistory()})},_triggerWgs84Changed:function(e,t){this._trigger(".wgs84_changed",e,t)},_triggerConvergenceChange:function(){this._trigger(".convergence_changed",null,{convergenceInDegrees:this._convergence()})},_reloadSucceeded:function(){this._loadDefinitionsObject(),this.options.masterLoadingToggleSwitch=!1,this._toggleLoading()},_reloadFailed:function(e){this._trigger(".fail",null,e)},_reload:function(){var e=this,n=o("Reload");return this._toggleLoading(!0),this._loadDefinitions().always(function(){e._toggleLoading(!1)}).done(function(){var r={};e.options.definitions.WGS84&&(e.options.definitions={"*World":e.options.definitions}),A.each(e.options.definitions,function(e,t){A.extend(r,t)}),n.resolve()}).fail(function(e,t){n.reject(t)}),n.promise()},_loadDefinitions:function(){var n=this,i=o("Load definitions");return"object"!==A.type(this.options.definitions)?i.reject("Wrong definitions type"):A.isEmptyObject(this.options.definitions)?A.ajax({url:this.options.url,data:{u:"u"},type:"POST",cache:!1,dataType:"json"}).done(function(e,t,r){void 0!==e.error?i.reject("Server Error",[r,t,e]):(n.options.definitions=e,i.resolve())}).fail(function(e,t,r){i.reject("Server Error",arguments)}):i.resolve(),i.promise()},_loadDefinitionsObject:function(){this._pushPullAll("loadDefinitionsObject",this.options.definitions)},_toggleLoading:function(e){e=this.options.masterLoadingToggleSwitch||!!e,this._pushPullAll("toggleLoading",e)},_addToHistory:function(e){this._historyManager.isEnabled()&&this._historyManager.add({wgs84:e.wgs84,sc:e.srsCode.source,dc:e.srsCode.destination})},_restoreFromHistory:function(){var t=this,r=this._historyManager.getCurrentValue();this._underTheRadar(function(){var e=1<r.wgs84.length;t.csv()!==e&&t.csv(e),t.transform(r),t.pushPullSource("selection",r.sc),t.pushPullDestination("selection",r.dc)})},_underTheRadar:function(e){if("function"!==A.type(e))throw"Invalid function";this._historyManager.toggle(!1),e(),this._historyManager.toggle(!0)},_pushPullWithCriterion:function(e,t,r,n){var i=null,o=this;return this.options.$containers.each(function(){A(this).converter("option",r)===n&&(i=o._pushPullOne(e,t,A(this)))}),i},_pushPullOne:function(e,t,r){r=void 0===t?r.converter(e):r.converter(e,t);return this.options.hasOwnProperty(e)&&(this.options[e]=r),r},pushPullSource:function(e,t){return this._pushPullWithCriterion(e,t,"target","source")},pushPullDestination:function(e,t){return this._pushPullWithCriterion(e,t,"target","dest")},_pushPullAll:function(e,t){var r=this;return this.options.$containers.each(function(){r._pushPullOne(e,t,A(this))}),this.options[e]},_pullAll:function(e){return{source:this.pushPullSource(e),destination:this.pushPullDestination(e)}},wgs84:function(e){return this._pushPullAll("wgs84",e)},toggle:function(e){return this._pushPullAll("toggle",e)},_getFirstWgs84:function(){var e=null,t=this.wgs84();return A.each(t,function(){return!!this.error||(e=this,!1)}),e||{x:0,y:0}},_convergence:function(){return this._pullAll("convergence")},_selection:function(){return this.options.selections=this._pullAll("selection"),this.options.selections},setConvergence:function(e){this._pushPullAll("setConvergence",e)},readOnly:function(){return this.options.readOnly},csv:function(e){var t;return e!=this.options.csv&&void 0!==e&&(e||(t=[this._getFirstWgs84()],JSON.stringify(t[0])===JSON.stringify(this.wgs84()[0])?this.wgs84(t):this.transform({wgs84:t})),this._trigger(".csv_changed",null,{csv:e})),this._pushPullAll("csv",e)},unloadCRS:function(e){this._pushPullAll("unloadCRS",e)},removeEmptyOptgroups:function(){this._pushPullAll("removeEmptyOptgroups")},mergeDefinitions:function(e){var t=this,r=new A.Deferred;return this.options.masterLoadingToggleSwitch=!0,this._toggleLoading(),this.options.definitions="object"!==A.type(this.options.definitions)?{}:this.options.definitions,A.extend(!0,this.options.definitions,e),this._reload().progress(function(){r.notify("Reloading")}).done(function(){t._reloadSucceeded.apply(t,arguments),r.resolve()}).fail(function(){t._reloadFailed.apply(t,arguments),r.reject.apply(null,arguments)}),r.promise()},transform:function(e){var t,r=e.hasOwnProperty("wgs84");if(!(r&&"array"===A.type(e.wgs84)||e.hasOwnProperty("target")))throw"Wrong data format";r?this._pushPullAll("transform",e):"source"===e.target?(t=this.pushPullSource("transform",{input:null}),this.pushPullDestination("transform",{wgs84:t})):(t=this.pushPullDestination("transform",{input:null}),this.pushPullSource("transform",{wgs84:t}))},_setOption:function(e,t){return this._superApply(arguments)},_destroy:function(){return this._toggleLoading(!0),this._pushPullAll("destroy"),this._super()}}),A.widget("twcc.converter",{options:{readOnly:!1,wrapper:{fieldSet:["<div>"],title:["<h3>"],info:["<a>",{name:"info",href:"#"}]},projections:{},units:{},labels:{},options:{},angleUnit:"dd",lengthUnit:"m",convergence:null,hint:"",wgs84:[{x:0,y:0}],value:{x:0,y:0},selection:null,mapping:{aea:"cartesian",aeqd:"cartesian",cass:"cartesian",cea:"cartesian",csv:"csv",eqc:"cartesian",eqdc:"cartesian",equi:"cartesian",gauss:"cartesian",geocent:"cartesian",gnom:"cartesian",gstmerc:"cartesian",laea:"cartesian",lcc:"cartesian",longlat:"spherical",merc:"cartesian",mill:"cartesian",moll:"cartesian",nzmg:"cartesian",omerc:"cartesian",ortho:"cartesian",poly:"cartesian",sinu:"cartesian",somerc:"cartesian",stere:"cartesian",sterea:"cartesian",tmerc:"cartesian",utm:"utm",vandg:"spherical",connector:"connector"},$select:null,$container:null,csv:!1},_widget:void 0,_create:function(){A.extend(this.options,{$select:this.element.find("select.crs-list"),$container:this.element.find(".container")}),this._bindEvents(),this._unload()},_triggerTransform:function(e){e.preventDefault(),this._trigger(".transform",e,{target:this.options.target})},_bindEvents:function(){var r=this;this.options.$select.on("change",function(){r.selection()}),this.element.on("angleswitchgeofield.update_display",function(e,t){r.options.angleUnit=t.value,r.value(),r.updateContainer()}),this.element.find(".convert-button").click(function(e){r._triggerTransform(e)}),this.element.on("keyup","input, select",function(e){var t;((t=e).keyCode||t.which)==a.constants.keyboard.RETURN&&r._triggerTransform(e)})},_getFieldSetUnit:function(e){var e=this._getWidgetPrefix(e),t=this._getFieldSetUnitName(e);return t||(e=e.match(/([A-Z]?[a-z]*)/g),t=this._getFieldSetUnitName(e[1]))?this.options.units[t]:void 0},_getFieldSetUnitName:function(e){var t;switch(e){case"utm":t="cartesian";break;case"Dm":t="dms";break;case"csv":case"connector":break;default:t=e.toLowerCase()}if(t&&this.options.units.hasOwnProperty(t))return t},_getFieldSetLabel:function(e){var e=this._getWidgetPrefix(e),t=this._getFieldSetLabelName(e);return t||(e=e.match(/([A-Z]?[a-z]*)/g),t=this._getFieldSetLabelName(e[0]))?this.options.labels[t]:void 0},_getFieldSetLabelName:function(e){var t;switch(e){case"utm":t="cartesian";break;case"connector":break;default:t=e.toLowerCase()}if(t&&this.options.labels.hasOwnProperty(t))return t},_getWidgetMidfix:function(e){var t="";return t="spherical"===e?(t=this.options.angleUnit).charAt(0).toUpperCase()+t.substr(1).toLowerCase():t},_getWidgetPrefix:function(e){return e=this.options.projections[this.options.selection].isConnector&&"csv"!==e?"connector":e,(e=this.options.mapping.hasOwnProperty(e)?this.options.mapping[e]:(console.error("Projection not found: "+e),"cartesian"))+this._getWidgetMidfix(e)},_getWidgetName:function(e){return this._getWidgetPrefix(e)+"FieldSet"},_unload:function(){this.element.find("select.crs-list, .container").empty(),this.projections={}},toggleLoading:function(e){this.element.find(".container").toggle(!e),this.element.find(".loading").toggle(!!e)},removeEmptyOptgroups:function(){this.options.$select.find("optgroup:empty").remove()},loadDefinitionsObject:function(e){var n,i=this,t=this.options.$select;if(this.options.definitions=e,this.removeEmptyOptgroups(),n=!1,A.each(this.options.definitions,function(r,e){A.each(e,function(e,t){i.options.$select.has('optgroup[label="'+r+'"] option[value="'+e+'"]').length||(a.utils.addOptionToSelect(r,e,i.options.$select,t.def),n=!0)})}),n){t.sortGrpsNOptionsByText();try{this.selection(this.options.selection||t.find("option:first").val())}catch(e){this.selection(t.find("option:first").val())}}},unloadCRS:function(r){var e,n=this;this.selection()===r&&(e=this._widget.options.srsCode,this.selection(e)),this.options.$select.find('option[value="'+r.toString()+'"]').remove(),m.default.defs(r,void 0),delete this.options.projections[r],A.each(this.options.definitions,function(e,t){return!t.hasOwnProperty(r)||(delete n.options.definitions[e][r],!1)}),this.removeEmptyOptgroups()},updateContainer:function(){var e,t,r,n,i,o,a,s,u,l=this,c=this.selection();this.options.value=this.options.csv||"array"!==A.type(this.options.value)?this.options.value:this.options.value[0],this.options.value=this.options.csv&&"array"!==A.type(this.options.value)?[this.options.value]:this.options.value,c&&(this.options.projections.hasOwnProperty(c)||this._registerProjection(c),r=(t=this._getProjection(c)).projName,s=this._getFieldSetUnit(r)||"",n=this._getFieldSetLabel(r)||"",i={srsCode:c,target:this.options.target,convergence:this.options.convergence,wgs84:this.options.wgs84,value:this.options.value,units:s,labels:n,lengthUnit:this.options.lengthUnit,options:this.options.options,readOnly:this.options.readOnly},u=t.title||c,o=this._getWidgetName(this.options.csv?"csv":t.projName),a=A.apply(null,this.options.wrapper.fieldSet),this.options.$container.empty(),(e=A.apply(null,this.options.wrapper.title)).append(u),(u=A.apply(null,this.options.wrapper.info)).click(function(e){l._trigger(".info",e,{srsCode:c,definitionString:t.defData})}),u.text(" [?]"),e.append(u),a.append(e),"csvFieldSet"==o&&(s=s.D?this.options.units.dd:s,u=(("utm"===r?n.h+","+n.z+",":"")+(n.x?n.x+(s.x?"("+s.x.DD+")":"("+s.XY.m+")"):"")+(n.y?","+n.y+(s.y?"("+s.y.DD+")":"("+s.XY.m+")"):"")).replace(/[\s]*=[\s]*/gi,""),A.extend(i,{originalProjection:t.isConnector?"connector":r,hint:u,units:null,labels:this.options.labels.csv})),this._widget=a[o](i).data("twcc"+((e=o).charAt(0).toUpperCase()+e.substring(1))),this.options.$container.append(a))},_registerProjection:function(e){var t,r,n,i;m.default.defs(e)||(t=0<=e.indexOf("Connector"),r=e,n=this.options.definitions,i="",A.each(n,function(e,t){return!t.hasOwnProperty(r)||(i=t[r].def,!1)}),t={defData:n=i,isConnector:t},m.default.defs(e,n),A.extend(m.default.defs(e),t)),n=A.extend({},m.default.defs(e)),this._setProjection(e,n)},_getProjection:function(e){if(this.options.projections.hasOwnProperty(e))return this.options.projections[e];throw"Unknown srsCode"},_setProjection:function(e,t){this.options.projections[e]=t},selection:function(e){var t=this.options.$select,r=!1,n=this.options.selection;if(void 0!==e){this.options.selection=e;try{t.val(this.options.selection)}catch(e){}r=!0}else t.val()&&t.val()!=this.options.selection&&(this.options.selection=t.val(),r=!0);return r&&(this.updateContainer(),t=this.options.selection,r=this.wgs84(),this.transform({wgs84:r}),this.setConvergence(),n!==t)&&this._trigger("."+this.options.target+".selection_changed",null,{wgs84:r,srsCode:t}),this.options.selection},projection:function(){return this._getProjection(this.selection())},_pushPull:function(e,t){return this._widget?(t=this._widget[e](t),this.options.hasOwnProperty(e)&&(this.options[e]=t),t):null},value:function(e){if(void 0!==e&&(!this.options.csv&&"object"!==A.type(e)||this.options.csv&&"array"!==A.type(e)))throw"Invalid type";return this._pushPull("value",e)},wgs84:function(e){return void 0!==e&&JSON.stringify(this.options.wgs84)!==JSON.stringify(e)&&(this._pushPull("wgs84",e),this._trigger("."+this.options.target+".wgs84_changed",null,{wgs84:e}),this.setConvergence()),this.options.wgs84},convergence:function(e){return this._pushPull("convergence",e),void 0!==e&&(e=this.wgs84(),this._trigger("."+this.options.target+".convergence_changed",null,{wgs84:e})),this.options.convergence},setConvergence:function(e){var t,r,n,i,o;this._widget&&"null"!==A.type(this._widget.convergence())&&(n=this.wgs84()[0],r=new m.default.Proj(this.projection().defData),i=!this._widget.zone&&r.long0||null,t=r.a,r=r.b,n=n,e=e=void 0===e||e,i=i||a.utils.degToRad(6*s(n.x)-183),o=a.utils.degToRad(n.y),n=a.utils.degToRad(n.x),t=(r=(t-r)/t)*Math.pow(Math.cos(o),2)/(1-r),r=n-i,n=Math.sin(o),i=(1+3*t+2*Math.pow(t,2))*Math.sin(o)*Math.pow(Math.cos(o),2)/3,t=(2-Math.pow(Math.tan(o),2))*Math.sin(o)*Math.pow(Math.cos(o),4)/15,o=r*n+Math.pow(r,3)*i+Math.pow(r,5)*t,n=a.utils.radToDeg(o*=e?1:-1),this.convergence(n))},csv:function(e){return void 0!==e&&(this.value(),this.options.csv=!!e,this.updateContainer()),this.options.csv},hint:function(e){return this._pushPull("hint",e)},toggle:function(e){return this._pushPull("toggle",e)},readOnly:function(){return this.options.readOnly},_formatCoordinates:function(e){if(A.inArray(A.type(e),["array","object"])<0)throw"Wrong data type";return"array"===A.type(e)?e:[e]},_setupInputProjection:function(e,t,r,n){r=r?{z:s(t.x),h:u(t.y)}:n,t=(t=(t=e.defData).replace(/\+zone=[^\s]+/gi,"+zone="+r.z)).replace("+south","");return t+="s"===r.h?" +south":"",new m.default.Proj(t)},_isValidPoint:function(e,t){var r=1,r=(r&="object"===A.type(e))&e.hasOwnProperty("x");return t?r&=e.x.indexOf("INPUT ERROR ON LINE ")<0:r=(r=(r&=e.hasOwnProperty("y"))&("number"===A.type(e.x)&&!isNaN(e.x)))&("number"===A.type(e.y)&&!isNaN(e.y)),!!r},_getConnector:function(){var e=this.selection();return window.hasOwnProperty(e)||A.ajax({url:"/js/connectors/"+e+".js",async:!1,cache:!0,dataType:"script"}),window[e].getInstance(a.context)},transform:function(e){var t,l,c,f=this,h=[],p=[],d=e.hasOwnProperty("wgs84"),g=this.value(),r=m.default.WGS84,y=this.projection(),n=-1<y.defData.indexOf("+proj=utm"),i={type:"pivot",getProjection:function(){return A.extend({isConnector:r.isConnector},new m.default.Proj(r.defData))}},o={type:"input",getProjection:function(){return n?f._setupInputProjection.apply(f,arguments):A.extend({isConnector:y.isConnector},new m.default.Proj(y.defData))}};if(!d&&!e.hasOwnProperty("input"))throw"Wrong data format";this.toggleLoading(!0);var e=d?e.wgs84:e.input;return d&&e&&this.wgs84(e),d?(t=e||this.wgs84(),c={A:i,B:o}):(t=e||g,c={A:o,B:i},l=this._widget.options.originalProjection),e=this._formatCoordinates(t),A.each(e,function(e,t){var r,n={},i=f.wgs84()[e],o="array"===A.type(g)?g[e]:g,a=c.A.getProjection(y,i,d,o),o=c.B.getProjection(y,i,d,o),s="connector"===l||!d&&a.isConnector,u=d&&o.isConnector,u=s||u;!f._isValidPoint(t,s)||d&&i.error?(p.push({x:0,y:0,error:!0}),h.push("INPUT ERROR ON LINE "+(e+1))):(u&&(r=f._getConnector()),u&&d?n[c.B.type]=r.forward(t):(u&&(t=r.inverse(t)),n[c.B.type]=(0,m.default)(a,o,A.extend({},t))),n[c.A.type]=A.extend({},t),p.push({x:n.pivot.x,y:n.pivot.y}),h.push({x:n.input.x,y:n.input.y}))}),this.csv()||(h=h[0]),d?this.value(h):this.wgs84(p),this.toggleLoading(!1),this.wgs84()},_setOption:function(e,t){return this._superApply(arguments)},_destroy:function(){return this._unload(),this._super()}}),A.widget("twcc.fieldSet",{options:{srsCode:null,value:{},units:{},target:null,wrapper:{set:["<div>",{class:"table"}],geoField:["<div>",{class:"row"}],geoCaption:["<div>",{class:"caption"}]},readOnly:!1,geoFields:{},geoFieldsIndex:0,wgs84:null},_create:function(){var e=A.apply(null,this.options.wrapper.set),t=this._getGeoFieldsOptions();this._setDefaultsGeoFieldsOptions(t),this._buildGeoFields(e,t),this._setFieldsHandlers(),this.element.append(e)},_setFieldsHandlers:function(){},_setDefaultsGeoFieldsOptions:function(r){var n=this;A.each(r,function(e,t){t={name:n.options.srsCode+"_"+n.options.target,readOnly:n.options.readOnly,unit:n.options.units,target:n.options.target,value:n.options.value[t.options.axis]};r[e].options=A.extend(t,r[e].options)})},_buildGeoField:function(e,t,r,n){var i=this.options.geoFieldsIndex++,o=0<=r.indexOf("Switch")||0<=r.indexOf("connector")?A.apply(null,this.options.wrapper.geoCaption):A.apply(null,this.options.wrapper.geoField);this.options.geoFields[i]=o[r](n),e.append(o)},_buildGeoFields:function(r,e){var n=this;A.each(e,function(e,t){n._buildGeoField(r,e,t.type,t.options)})},_getGeoFieldsOptions:function(){return{}},_getConvergenceIcon:function(){return'<img src="'+a.system.dirWsImages+"GN_"+this.options.target+'.png" alt="">'},convergence:function(){return null},hint:function(){return null},wgs84:function(e){return void 0===e?this._getWgs84():this._setWgs84(e)},_getWgs84:function(){return this.options.wgs84},_setWgs84:function(e){return this.options.wgs84=e,this.options.wgs84},value:function(e){return this.options.value=void 0===e?this._getValue():this._setValue(e),this._setToStringMethod(),this.options.value},_getValue:function(){return this.options.value},_setValue:function(e){this.options.value=e},_setToStringMethod:function(){var e=this;this.options.value.toString=function(){return e._getStringValue()}},_getStringValue:function(){return""},toggle:function(e){return e=void 0===e?this.options.readOnly:!!e,this.options.readOnly=this._toggle(e),this.options.readOnly},readOnly:function(){return this.options.readOnly},_toggle:function(e){return!e},_setOption:function(e,t){return this._superApply(arguments)},_destroy:function(){return this.element.empty(),this._super()}}),A.widget("twcc.connectorFieldSet",A.twcc.fieldSet,{options:{options:{},geoFields:{},value:{}},_getGeoFieldsOptions:function(){return[{type:"connectorGeoField",options:{axis:"x"}}]},_getValue:function(){return{x:this.options.geoFields[0].connectorGeoField("value")}},_setValue:function(e){return{x:this.options.geoFields[0].connectorGeoField("value",e.x)}},_toggle:function(e){return this.options.geoFields[0].connectorGeoField("toggle",e)},_getStringValue:function(){return this.options.geoFields[0].connectorGeoField("value")}}),A.widget("twcc.csvFieldSet",A.twcc.fieldSet,{options:{labels:{},units:{},options:{},geoFields:{},value:[],hint:"",wgs84:[],originalProjection:null},_getGeoFieldsOptions:function(){return[{type:"csvGeoField",options:{value:this._toString(this.options.value),label:this.options.labels.csv}},{type:"labelGeoField",options:{value:this.options.hint,label:this.options.labels.l}}]},_getValue:function(){return this._fromString(this.options.geoFields[0].csvGeoField("value"))},_setValue:function(e){return this._fromString(this.options.geoFields[0].csvGeoField("value",this._toString(e)))},_fromString:function(e){var n=e.split("\n"),i=this;return A.each(n,function(e,t){var r=t.split(",");switch(i.options.originalProjection){case"utm":n[e]={h:r[0],z:+r[1],x:+r[2],y:+r[3]};break;case"connector":n[e]={x:r[0],y:r[1]};break;default:n[e]={x:+r[0],y:+r[1]}}}),n},_toString:function(e){var n=[],i=this;if("array"!==A.type(e))throw"Invalid type";return A.each(e,function(e,t){var r,e=i.wgs84()[e];e.error?n.push(t.toString()):"utm"==i.options.originalProjection?(r=t.h||u(e.y),e=t.z||s(e.x),n.push(r+","+e+","+t.x+","+t.y)):n.push(t.x+","+t.y)}),n.join("\n")},originalProjection:function(e){if(void 0===e)return this.options.originalProjection;this.options.originalProjection=e},hint:function(e){if(void 0===e)return this.options.hint=this.options.geoFields[1].labelGeoField("value"),this.options.hint;this.options.hint=e,this.options.geoFields[1].labelGeoField("value",this.options.hint)},_toggle:function(e){return this.options.geoFields[0].csvGeoField("toggle",e),this.options.geoFields[1].labelGeoField("toggle",e)},_getStringValue:function(){return this.options.hint+"\n"+this.options.geoFields[0].csvGeoField("value")}}),A.widget("twcc.utmFieldSet",A.twcc.fieldSet,{options:{labels:{},options:{},geoFields:{},lengthUnit:"m",value:{},convergence:0,wgs84:[]},_getGeoFieldsOptions:function(){return[{type:"hemisphereGeoField",options:{label:this.options.labels.h,options:this.options.options.h,axis:"h"}},{type:"zoneGeoField",options:{label:this.options.labels.z,options:this.options.options.z,axis:"z"}},{type:"xyGeoField",options:{label:this.options.labels.x,lengthUnit:this.options.lengthUnit,axis:"x"}},{type:"xyGeoField",options:{label:this.options.labels.y,lengthUnit:this.options.lengthUnit,axis:"y"}},{type:"convergenceGeoField",options:{value:this.options.convergence,label:this.options.labels.convergence,icon:this._getConvergenceIcon()}},{type:"lengthSwitchGeoField",options:{value:this.options.lengthUnit,unit:this.options.options.u}}]},_setFieldsHandlers:function(){var r=this;this._super(),this.element.on("lengthswitchgeofield.update_display",function(e,t){r.options.lengthUnit=r.unit(t.value)})},_getValue:function(){return{h:this.hemisphere(),z:this.zone(),x:this.options.geoFields[2].xyGeoField("value"),y:this.options.geoFields[3].xyGeoField("value")}},_setValue:function(e){var t=this._getWgs84()[0];return e.h&&e.z||A.extend(e,{y:Math.abs(e.y),h:u(t.y),z:s(t.x)}),{h:this.hemisphere(e.h),z:this.zone(e.z),x:this.options.geoFields[2].xyGeoField("value",e.x),y:this.options.geoFields[3].xyGeoField("value",e.y)}},unit:function(e){return void 0===e?this.options.lengthUnit=this.options.geoFields[2].xyGeoField("unit"):(this.options.geoFields[2].xyGeoField("unit",e),this.options.geoFields[3].xyGeoField("unit",e),this.options.lengthUnit=this.options.geoFields[5].lengthSwitchGeoField("value",e)),this.options.lengthUnit},convergence:function(e){return this.options.convergence=void 0===e?this.options.geoFields[4].convergenceGeoField("value"):this.options.geoFields[4].convergenceGeoField("value",e),this.options.convergence},zone:function(e){return this.options.value.z=void 0===e?this.options.geoFields[1].zoneGeoField("value"):this.options.geoFields[1].zoneGeoField("value",e),this.options.value.z},hemisphere:function(e){return this.options.value.h=void 0===e?this.options.geoFields[0].hemisphereGeoField("value"):this.options.geoFields[0].hemisphereGeoField("value",e),this.options.value.h},_toggle:function(e){return this.options.geoFields[0].hemisphereGeoField("toggle",e),this.options.geoFields[1].zoneGeoField("toggle",e),this.options.geoFields[2].xyGeoField("toggle",e),this.options.geoFields[3].xyGeoField("toggle",e),this.options.geoFields[5].lengthSwitchGeoField("toggle",e)},_getStringValue:function(){var e=this.options.geoFields;return e[2].xyGeoField("getStringValue")+", "+e[3].xyGeoField("getStringValue")+" "+e[1].zoneGeoField("value")+e[0].hemisphereGeoField("value")}}),A.widget("twcc.cartesianFieldSet",A.twcc.fieldSet,{options:{labels:{},options:{},geoFields:{},lengthUnit:"m",value:{},convergence:0},_getGeoFieldsOptions:function(){return[{type:"xyGeoField",options:{label:this.options.labels.x,lengthUnit:this.options.lengthUnit,axis:"x"}},{type:"xyGeoField",options:{label:this.options.labels.y,lengthUnit:this.options.lengthUnit,axis:"y"}},{type:"convergenceGeoField",options:{value:this.options.convergence,label:this.options.labels.convergence,icon:this._getConvergenceIcon()}},{type:"lengthSwitchGeoField",options:{value:this.options.lengthUnit,unit:this.options.options.u}}]},_setFieldsHandlers:function(){var r=this;this._super(),this.element.on("lengthswitchgeofield.update_display",function(e,t){r.options.lengthUnit=r.unit(t.value)})},_getValue:function(){return{x:this.options.geoFields[0].xyGeoField("value"),y:this.options.geoFields[1].xyGeoField("value")}},_setValue:function(e){return{x:this.options.geoFields[0].xyGeoField("value",e.x),y:this.options.geoFields[1].xyGeoField("value",e.y)}},unit:function(e){return void 0===e?this.options.lengthUnit=this.options.geoFields[0].xyGeoField("unit"):(this.options.geoFields[0].xyGeoField("unit",e),this.options.geoFields[1].xyGeoField("unit",e),this.options.lengthUnit=this.options.geoFields[3].lengthSwitchGeoField("value",e)),this.options.lengthUnit},convergence:function(e){return this.options.convergence=void 0===e?this.options.geoFields[2].convergenceGeoField("value"):this.options.geoFields[2].convergenceGeoField("value",e),this.options.convergence},_toggle:function(e){return this.options.geoFields[0].xyGeoField("toggle",e),this.options.geoFields[1].xyGeoField("toggle",e),this.options.geoFields[3].lengthSwitchGeoField("toggle",e)},_getStringValue:function(){var e=this.options.geoFields;return e[0].xyGeoField("getStringValue")+", "+e[1].xyGeoField("getStringValue")}}),A.widget("twcc.sphericalDdFieldSet",A.twcc.fieldSet,{options:{labels:{},options:{},geoFields:{},value:{}},_getGeoFieldsOptions:function(){return[{type:"ddGeoField",options:{unit:this.options.units.y,label:this.options.labels.y,axis:"y"}},{type:"ddGeoField",options:{unit:this.options.units.x,label:this.options.labels.x,axis:"x"}},{type:"angleSwitchGeoField",options:{value:"dd",unit:this.options.options.o}}]},_getValue:function(){return{x:this.options.geoFields[1].ddGeoField("value"),y:this.options.geoFields[0].ddGeoField("value")}},_setValue:function(e){return{x:this.options.geoFields[1].ddGeoField("value",e.x),y:this.options.geoFields[0].ddGeoField("value",e.y)}},_toggle:function(e){return this.options.geoFields[0].ddGeoField("toggle",e),this.options.geoFields[1].ddGeoField("toggle",e),this.options.geoFields[2].angleSwitchGeoField("toggle",e)},_getStringValue:function(){var e=this.options.geoFields;return e[0].ddGeoField("getStringValue")+", "+e[1].ddGeoField("getStringValue")}}),A.widget("twcc.sphericalDmFieldSet",A.twcc.fieldSet,{options:{labels:{},options:{},geoFields:{},value:{}},_getGeoFieldsOptions:function(){return[{type:"dmGeoField",options:{label:this.options.labels.y,options:this.options.options.y,axis:"y"}},{type:"dmGeoField",options:{label:this.options.labels.x,options:this.options.options.x,axis:"x"}},{type:"angleSwitchGeoField",options:{value:"dm",unit:this.options.options.o}}]},_getValue:function(){return{x:this.options.geoFields[1].dmGeoField("value"),y:this.options.geoFields[0].dmGeoField("value")}},_setValue:function(e){return{x:this.options.geoFields[1].dmGeoField("value",e.x),y:this.options.geoFields[0].dmGeoField("value",e.y)}},_toggle:function(e){return this.options.geoFields[0].dmGeoField("toggle",e),this.options.geoFields[1].dmGeoField("toggle",e),this.options.geoFields[2].angleSwitchGeoField("toggle",e)},_getStringValue:function(){var e=this.options.geoFields;return e[0].dmGeoField("getStringValue")+", "+e[1].dmGeoField("getStringValue")}}),A.widget("twcc.sphericalDmsFieldSet",A.twcc.fieldSet,{options:{labels:{},options:{},geoFields:{},value:{}},_getGeoFieldsOptions:function(){return[{type:"dmsGeoField",options:{label:this.options.labels.y,options:this.options.options.y,axis:"y"}},{type:"dmsGeoField",options:{label:this.options.labels.x,options:this.options.options.x,axis:"x"}},{type:"angleSwitchGeoField",options:{value:"dms",unit:this.options.options.o}}]},_getValue:function(){return{x:this.options.geoFields[1].dmsGeoField("value"),y:this.options.geoFields[0].dmsGeoField("value")}},_setValue:function(e){return{x:this.options.geoFields[1].dmsGeoField("value",e.x),y:this.options.geoFields[0].dmsGeoField("value",e.y)}},_toggle:function(e){return this.options.geoFields[0].dmsGeoField("toggle",e),this.options.geoFields[1].dmsGeoField("toggle",e),this.options.geoFields[2].angleSwitchGeoField("toggle",e)},_getStringValue:function(){var e=this.options.geoFields;return e[0].dmsGeoField("getStringValue")+", "+e[1].dmsGeoField("getStringValue")}}),A.widget("twcc.geoField",{options:{name:null,unit:null,label:null,readOnly:!1,lengthUnit:"m",glue:"_",wrapper:{field:["<span>"],fields:["<div>",{class:"cell fields"}],label:["<div>",{class:"cell label"}],options:["<div>",{class:"fields"}]},attributes:{},fields:{},icon:""},_create:function(){var r,e,n=this;A.each(this.options.attributes,function(e){var t={disabled:n.options.readOnly,readonly:n.options.readOnly};n.options.attributes[e]=A.extend(t,n.options.attributes[e])}),r=this._getEmptyFieldCell(),e=this._getFieldsOptions(),this._setDefaultsFieldsOptions(e),A.each(e,function(e,t){t=n._buildField(e,t);n._setFieldHandlers(t),t.append(n._getFieldSetUnit(e)),t.append("&nbsp;"),r.append(t)}),this._appendLabelCell(),this.element.append(r)},_getFieldSetUnit:function(e){return this.options.unit[e]},_setFieldHandlers:function(){},_clean:function(e,t){return this._superClean(e,t)},_superClean:function(e,t){return isNaN(e)||null===e?"":a.math.round(e,t||0)},_buildField:function(e,t){return this.options.fields[e]=A.apply(null,this.options.wrapper.field).field(t),this.options.fields[e]},_appendLabelCell:function(){var e=this._getForId(),e=e?A("<label>",{for:e}).html(this.options.icon+this.options.label):this.options.icon+this.options.label,e=A.apply(null,this.options.wrapper.label).append(e);this.element.append(e)},_getForId:function(){},_getEmptyFieldCell:function(){return A.apply(null,this.options.wrapper.fields)},_getFieldsOptions:function(){return{}},_setDefaultsFieldsOptions:function(r){var n=this;A.each(r,function(e){var t={name:n.options.name+n.options.glue+e,attributes:n.options.attributes[e],value:n._clean(n.options.value)};r[e]=A.extend(t,r[e])})},value:function(e){return this.options.value=void 0===e?this._constraint(this._getRawValue()):this._setValue(this._clean(e)),this.options.value},toggle:function(e){return e=void 0===e?this.options.readOnly:!!e,this.options.readOnly=this._toggle(e),this.options.readOnly},readOnly:function(){return this.options.readOnly},_toggle:function(r){var n=this;return A.each(this.options.fields,function(e,t){e=n._getFieldsOptions()[e];n._toggleField(t,r,e)}),!r},_toggleField:function(e,t){e.field("toggle",t)},_getRawValue:function(){return this.options.value},getStringValue:function(){return this.options.value},_constraint:function(e){return e},_setValue:function(e){this.options.value=e},_setOption:function(e,t){this.options[e]=t,this._update()},_update:function(){this._destroy(),this._create()},_destroy:function(){return this.element.empty(),this._super()}}),A.widget("twcc.ddGeoField",A.twcc.geoField,{options:{value:0,attributes:{DD:{size:"20",class:"width_5"}}},_getFieldsOptions:function(){return{DD:{type:"text"}}},_getForId:function(){return this.options.fields.DD.field("id")},_getRawValue:function(){return a.math.parseFloat(this.options.fields.DD.field("value"))},getStringValue:function(){return this.options.value+this._getFieldSetUnit("DD")},_setValue:function(e){return this.options.fields.DD.field("value",e)},_constraint:function(e){var t="y"===this.options.axis?180*Math.atan(Math.sinh(Math.PI))/Math.PI:180;return e=Math.max(e,-t),Math.min(e,t)},_clean:function(e){return this._constraint(this._super(e,15))}}),A.widget("twcc.dmGeoField",A.twcc.ddGeoField,{options:{value:0,options:{},attributes:{C:{size:"1"},D:{size:"4",class:"width_1"},M:{size:"6",class:"width_3"}}},_buildField:function(e,t){return"option"===t.type?(this.options.fields[e]=A.apply(null,this.options.wrapper.field).optionField(t),this.options.fields[e]):this._superApply(arguments)},_getFieldsOptions:function(){var e=this._clean(this.options.value);return{C:{type:"option",value:e.C||"",options:this.options.options},D:{type:"text",value:this._superClean(e.D)},M:{type:"text",value:this._superClean(e.M,12)}}},_getForId:function(){return this.options.fields.D.field("id")},_getFieldSetUnit:function(e){return"C"!=e?this._superApply(arguments):""},_getObjectValue:function(){return{C:this.options.fields.C.optionField("value"),D:a.math.parseFloat(this.options.fields.D.field("value")),M:a.math.parseFloat(this.options.fields.M.field("value"))}},value:function(e){return void 0===e?this._clean((void 0!==(t=this._getObjectValue())&&(r=Math.abs(i(t.D)),r+=Math.abs(i(t.M))/60,n=0<=i(t.D)?1:-1,n=(n*="N"==t.C||"E"==t.C?1:-1)*r),n)):(e=this._clean(e),this.options.fields.C.optionField("value",e.C||""),this.options.fields.D.field("value",this._superClean(e.D)),this.options.fields.M.field("value",this._superClean(e.M,12))),this.options.value;var t,r,n},getStringValue:function(){var e=this._getObjectValue();return e.D+this._getFieldSetUnit("D")+e.M+this._getFieldSetUnit("M")+e.C},_clean:function(e){return this.options.value=this._constraint(e),e=this.options.value,t=this.options.options,"number"!==A.type(+e)||isNaN(e)?(n=r=0,t&&(i=t.N?"N":"E")):(t&&(i=0<=e?t.N?"N":"E":t.S?"S":"W"),n=60*((e=Math.abs(e))-(r=Math.floor(e)))),{C:i,D:r.toString(),M:n.toString()};var t,r,n,i},_toggleField:function(e,t,r){return"option"===r.type?e.optionField("toggle",t):this._superApply(arguments)}}),A.widget("twcc.dmsGeoField",A.twcc.dmGeoField,{options:{value:0,options:{},attributes:{C:{size:"1"},D:{size:"4",class:"width_1"},M:{size:"4",class:"width_1"},S:{size:"6",class:"width_3"}}},_getFieldsOptions:function(){var e=this._clean(this.options.value);return{C:{type:"option",value:e.C||"",options:this.options.options},D:{type:"text",value:this._superClean(e.D)},M:{type:"text",value:this._superClean(e.M)},S:{type:"text",value:this._superClean(e.S,12)}}},_getObjectValue:function(){return{C:this.options.fields.C.optionField("value"),D:a.math.parseFloat(this.options.fields.D.field("value")),M:a.math.parseFloat(this.options.fields.M.field("value")),S:a.math.parseFloat(this.options.fields.S.field("value"))}},value:function(e){return void 0===e?this._clean((void 0!==(t=this._getObjectValue())&&(r=Math.abs(i(t.D)),r=(r+=Math.abs(i(t.M))/60)+Math.abs(i(t.S))/3600,n=0<=i(t.D)?1:-1,n=(n*="N"==t.C||"E"==t.C?1:-1)*r),n)):(e=this._clean(e),this.options.fields.C.optionField("value",e.C||""),this.options.fields.D.field("value",this._superClean(e.D)),this.options.fields.M.field("value",this._superClean(e.M)),this.options.fields.S.field("value",this._superClean(e.S,12))),this.options.value;var t,r,n},getStringValue:function(){var e=this._getObjectValue();return e.D+this._getFieldSetUnit("D")+e.M+this._getFieldSetUnit("M")+e.S+this._getFieldSetUnit("S")+e.C},_clean:function(e){return this.options.value=this._constraint(e),e=this.options.value,t=this.options.options,"number"!==A.type(+e)||isNaN(e)?(i=n=r=0,t&&(o=t.N?"N":"E")):(t&&(o=0<=e?t.N?"N":"E":t.S?"S":"W"),i=60*((t=60*((e=Math.abs(e))-(r=Math.floor(e))))-(n=Math.floor(t)))),{C:o,D:r.toString(),M:n.toString(),S:i.toString()};var t,r,n,i,o}}),A.widget("twcc.switchGeoField",A.twcc.geoField,{_clean:function(e){return this._constraint(e)},_setFieldHandlers:function(e){var t=this;e.find(":first-child").click(function(e){t._trigger(".update_display",e,{value:t.value()})})},_appendLabelCell:function(){},_getEmptyFieldCell:function(){return A.apply(null,this.options.wrapper.options)},_setDefaultsFieldsOptions:function(){},_getRawValue:function(){return A("input:radio:checked",this.element).val()},_setValue:function(e){return this.element.find('input:radio[value="'+e+'"]').prop("checked",!0),e},_getForId:function(e){return this.options.fields[e].field("id")},_getFieldSetUnit:function(e){var t=this._superApply(arguments),e=this._getForId(e);return A("<label>",{for:e}).append(t)}}),A.widget("twcc.angleSwitchGeoField",A.twcc.switchGeoField,{options:{value:"dd"},_getFieldsOptions:function(){this.options.value=this._clean(this.options.value);var e=this.options.name+"_DMS_DM_DD",t=this.options.value,r="dd"===t,t="dm"===t;return{_DMS:{name:e,type:"radio",value:"dms",attributes:{checked:!r&&!t}},_DM:{name:e,type:"radio",value:"dm",attributes:{checked:t}},_DD:{name:e,type:"radio",value:"dd",attributes:{checked:r}}}},_constraint:function(e){return A.inArray(e,["dms","dm","dd"])<0?"dms":e}}),A.widget("twcc.lengthSwitchGeoField",A.twcc.switchGeoField,{options:{value:"m"},_getFieldsOptions:function(){this.options.value=this._clean(this.options.value);var e=this.options.name+"_M_KM_F",t=this.options.value,r="km"===t,t="us-ft"===t;return{_M:{name:e,type:"radio",value:"m",attributes:{checked:!r&&!t}},_KM:{name:e,type:"radio",value:"km",attributes:{checked:r}},_F:{name:e,type:"radio",value:"us-ft",attributes:{checked:t}}}},_constraint:function(e){return A.inArray(e,["m","km","us-ft"])<0?"m":e}}),A.widget("twcc.xyGeoField",A.twcc.geoField,{options:{value:0,attributes:{XY:{size:"20",class:"width_4"}}},_setFieldHandlers:function(){},_getFieldsOptions:function(){return{XY:{type:"text"}}},_getForId:function(){return this.options.fields.XY.field("id")},_getFieldSetUnit:function(){return this.options.unit.XY[this.options.lengthUnit]},_getRawValue:function(){return c(this.options.fields.XY.field("value"),this.options.lengthUnit)},getStringValue:function(){return this.options.fields.XY.field("value")+this.options.lengthUnit},_setValue:function(e){return c(this.options.fields.XY.field("value",e),this.options.lengthUnit)},_clean:function(e){return this._super((t=this.options.lengthUnit,i(e)/l(t)),"m"==this.options.lengthUnit?3:5);var t},unit:function(e){return void 0!==e&&(this.value(),this.options.lengthUnit=this._cleanUnit(e),this._update()),this.options.lengthUnit},_cleanUnit:function(e){return A.inArray(e,["m","km","us-ft"])<0?"m":e}}),A.widget("twcc.zoneGeoField",A.twcc.geoField,{options:{value:31,attributes:{Z:{size:"5",class:"width_2"}}},_setFieldHandlers:function(){},_getFieldsOptions:function(){return{Z:{type:"text"}}},_getForId:function(){return this.options.fields.Z.field("id")},_getRawValue:function(){return parseInt(this.options.fields.Z.field("value"))},_setValue:function(e){return this.options.fields.Z.field("value",e)},_constraint:function(e){return Math.max(e,0)},_clean:function(e){return this._constraint(this._super(e))}}),A.widget("twcc.hemisphereGeoField",A.twcc.geoField,{options:{value:"n",attributes:{E:{size:"1"}}},_setFieldHandlers:function(){},_getFieldsOptions:function(){return{E:{type:"option",options:this.options.options}}},_getForId:function(){return this.options.fields.E.optionField("id")},_getFieldSetUnit:function(){},_buildField:function(e,t){return this.options.fields[e]=A.apply(null,this.options.wrapper.field).optionField(t),this.options.fields[e]},_clean:function(e){return this._constraint(e||"n")},_getRawValue:function(){return this.options.fields.E.optionField("value")},_constraint:function(e){return A.inArray(e,["n","s"])<0?"n":e},_setValue:function(e){return this.options.fields.E.optionField("value",e)},_toggleField:function(e,t){return e.optionField("toggle",t)}}),A.widget("twcc.csvGeoField",A.twcc.geoField,{options:{value:"",attributes:{CSV:{rows:"5",wrap:"off"}}},_setFieldHandlers:function(){},_getFieldsOptions:function(){return{CSV:{type:"textarea"}}},_getFieldSetUnit:function(){return""},_getForId:function(){return this.options.fields.CSV.textareaField("id")},_buildField:function(e,t){return this.options.fields[e]=A.apply(null,this.options.wrapper.field).textareaField(t),this.options.fields[e]},_clean:function(e){return this._constraint(e||"")},_getRawValue:function(){return this.options.fields.CSV.textareaField("value")},_setValue:function(e){return this.options.fields.CSV.textareaField("value",e)},_toggleField:function(e,t){return e.textareaField("toggle",t)}}),A.widget("twcc.convergenceGeoField",A.twcc.geoField,{options:{value:0,attributes:{CONVERGENCE:{size:"10",class:"width_4",readonly:!0}}},_setFieldHandlers:function(){},_getFieldsOptions:function(){return{CONVERGENCE:{type:"text"}}},_getForId:function(){return this.options.fields.CONVERGENCE.field("id")},_getRawValue:function(){return this.options.fields.CONVERGENCE.field("value")},_constraint:function(e){return e=Math.max(e,-360),Math.min(e,360)},_setValue:function(e){return this.options.fields.CONVERGENCE.field("value",e)},_clean:function(e){return this._constraint(this._super(e,4))}}),A.widget("twcc.connectorGeoField",A.twcc.geoField,{options:{value:""},_setFieldHandlers:function(){},_getFieldsOptions:function(){return{XX:{type:"text"}}},_appendLabelCell:function(){},_getRawValue:function(){return this.options.fields.XX.field("value")},_setValue:function(e){return this.options.fields.XX.field("value",e)},_constraint:function(e){return e},_clean:function(e){return this._constraint(e)}}),A.widget("twcc.labelGeoField",A.twcc.geoField,{options:{value:""},_create:function(){this._super(),this.options.fields.L.text(this.options.value)},_buildField:function(e,t){return this.options.fields[e]=t,this.options.fields[e]},_setFieldHandlers:function(){},_getFieldsOptions:function(){return{L:A("<span>")}},_getFieldSetUnit:function(){return""},_getRawValue:function(){return this.options.fields.L.text()},_constraint:function(e){return e},_setValue:function(e){return this.options.fields.L.text(e),e},_clean:function(e){return this._constraint(e)},_toggleField:function(){return this.options.readonly}}),A.widget("twcc.field",{options:{type:null,value:null,name:null,glue:"_id_",attributes:{},readOnly:!1},_create:function(){this.options.attributes=A.extend({val:this.options.value,id:this.options.name+this.options.glue+Math.floor(10001*Math.random()),name:this.options.name,disabled:this.options.readOnly,readonly:this.options.readOnly},this.options.attributes),this._setTag()},_setTag:function(){A.extend(this.options.attributes,{type:this.options.type}),this.element.tag({name:"input",attributes:this.options.attributes})},value:function(e){return this.options.value=void 0===e?this.element.tag("value"):this.element.tag("value",e),this.options.value},toggle:function(e){return e=void 0===e?this.options.readOnly:!!e,this.options.readOnly=this._toggle(e),this.options.readOnly},_toggle:function(e){return this.element.tag("toggle",e)},readOnly:function(){return this.options.readOnly},id:function(){return this.options.attributes.id},_setOption:function(e,t){this.options[e]=t,this._update()},_update:function(){this._destroy(),this._create()},_destroy:function(){return this.element.empty(),this._super()}}),A.widget("twcc.textareaField",A.twcc.field,{options:{type:"textarea"},_setTag:function(){this.element.tag({name:"textarea",attributes:this.options.attributes})}}),A.widget("twcc.optionField",A.twcc.field,{options:{type:"option",options:{}},_setTag:function(){this.element.selectTag({attributes:this.options.attributes,options:this.options.options})},value:function(e){return this.options.value=void 0===e?this.element.selectTag("value"):this.element.selectTag("value",e),this.options.value},_toggle:function(e){return this.element.selectTag("toggle",e)}}),A.widget("twcc.tag",{options:{name:null,attributes:{},readOnly:!1},_$elt:null,_create:function(){var e;this.options.attributes.val&&(this.options.attributes.val=this._clean(this.options.attributes.val)),this.options.attributes.hasOwnProperty("checked")&&(e=this.options.attributes.checked,delete this.options.attributes.checked),this._$elt=A("<"+this.options.name+">",this.options.attributes),void 0!==e&&this._$elt.prop("checked",e),this._appendChildren(),this.value(this.options.attributes.val),this.element.append(this._$elt)},value:function(e){return void 0===e?this.options.attributes.val=this._$elt.val():(this.options.attributes.val=this._clean(e),this._$elt.val(this.options.attributes.val)),this.options.attributes.val},toggle:function(e){e=void 0===e?this.options.readOnly:!e;return this.options.readOnly=this._toggle(e),this.options.readOnly},_toggle:function(e){return this._$elt.prop("disabled",e).prop("readonly",e),e},readOnly:function(){return this.options.readOnly},_clean:function(e){return e="number"==typeof e&&1<e.toString().split("e").length?a.math.round(e):e},_appendChildren:function(){},_setOption:function(e,t){this.options[e]=t,this._update()},_update:function(){this._destroy(),this._create()},_destroy:function(){return this._$elt.remove(),this._super()}}),A.widget("twcc.selectTag",A.twcc.tag,{options:{name:"select",options:{}},_$elt:null,_appendChildren:function(){var r=this;A.each(this.options.options,function(e,t){r._$elt.append(A("<option>",{value:e,text:t}))})}})},{proj4:421}],2:[function(e,t,r){"use strict";var a,s,n,i,o,u=(e=e("proj4"))&&e.__esModule?e:{default:e};function l(e){return s.translations.hasOwnProperty(e)?s.translations[e]:e}function c(e,t,r){e.trigger(t,{data:r})}function f(e){return a.cookie(e)}function h(e,t,r){a.cookie(e,t,{expires:r=r||30})}function p(e,t,r){h(e,JSON.stringify(t),r)}function d(e){return f(e)?a.parseJSON(f(e)):{}}function g(e,t){var r,n=s.system.preferencesCookie;(r=d(n))[e]=t,p(n,r,7)}function y(e){return e=e,d(s.system.preferencesCookie)[e]}function A(e,t){return/\+title=/gi.test(e)?e.replace(/.*\+title=([^\+]+).*/gi,"$1"):t}function m(){return n.wgs84().slice()}function v(e){b([_(e)])}function b(e){n.transform({wgs84:e})}function _(e){return{x:e[0],y:e[1]}}function w(){return n.csv()}function E(){a("#map-container").length?s.initialisers.initializeMap().done(C):C()}function C(){s.initialisers.initializeConverter().done(function(e){s.context.GET.isSetGraticule&&s.TWCCMap.setGraticule(),s.TWCCUi.startHelp(),c(a("body"),"main.ready",e)})}a=jQuery,s=App,console.log("proj4 version:",u.default.version),o=s.locations.capitals,a.fn.extend({sort:function(){return this.pushStack([].sort.apply(this,arguments),[])},sortOptions:function(e){return jQuery("option",this).sort(e).appendTo(this),this},sortGroups:function(e){return jQuery("optgroup",this).sort(e).appendTo(this),this},sortOptionsByText:function(){return this.sortOptions(function(e,t){e=jQuery(e).text().toUpperCase(),t=jQuery(t).text().toUpperCase();return e<t?-1:t<e?1:0})},sortOptgroupsByLabel:function(){return this.sortGroups(function(e,t){e=jQuery(e).prop("label").toUpperCase(),t=jQuery(t).prop("label").toUpperCase();return e<t?-1:t<e?1:0})},sortGrpsNOptionsByText:function(){var t=this;return a("optgroup",this).each(function(e){a("optgroup:eq("+e+")",t).sortOptionsByText()}),this.sortOptgroupsByLabel()},getXDomain:function(e){var t=s.system.httpServer+"/"+s.system.dirWsIncludes+"proxy.php",r=e.data?"?"+a.param(e.data,!0):"";return a.ajax(a.extend({dataType:"script"},e,{url:t,cache:!0,data:{u:e.url+r}}))}}),a.extend(s,{utils:{addOptionToSelect:function(e,t,r,n){var i=u.default.defs(t),i=i?i.title||t:A(n,t),n='optgroup[label="'+e+'"]';r.find(n).length||r.append(a("<optgroup>",{label:e})),r.find(n).append(a("<option>",{val:t,text:i}))},degToRad:function r(e){var n;switch(a.type(e)){case"object":n={},a.each(e,function(e,t){if(t&&"number"!==a.type(t))throw"Wrong data type";n[e]=r(t)});break;case"number":n="number"===a.type(e)?e*Math.PI/180:void 0}return n},enableAutoZoom:function(e){s.TWCCMap.model.setBoolean("autoZoom",e)},getCookieContent:d,getPreferenceCookie:y,getRandomCityLocation:function(){var e=s.math.getRandomInteger(0,o.length-1);return{x:o[e].lng,y:o[e].lat}},getTitleFromDefinitionString:A,getWMM:function(){return i},newDeferred:function(t,r,n){var i,o=new a.Deferred(function(){c(a("body"),"main.start",{name:t})});return r=r||s.system.timeout,n=n||0,setTimeout(function e(){0<n?(n--,o.notify("retry"),setTimeout(e,r)):o.reject(t+" timed out")},r),setTimeout(function e(){"pending"===o.state()&&(o.notify(t+" pending"),setTimeout(e,500))},1),i=t,a.when(o).then(function(e){e="string"==typeof e||e instanceof String?e:null;c(a("body"),e?"main.failed":"main.succeeded",{name:i,message:e})},function(e){c(a("body"),"main.failed",{name:i,message:e})},function(e){c(a("body"),"main.progress",{name:i,message:e})}),o},radToDeg:function(e){return"number"===a.type(e)?180*e/Math.PI:void 0},sendMsg:function(e,t,r){var n,i;return t=t||s.system.applicationNoreply,i=s.system.httpServer+"/"+s.system.dirWsIncludes+"s.php",(n=a.ajax({type:"POST",url:i,async:!1,cache:!1,data:"ff=g"}).responseText).length<10?(alert(l("messageNotSent")+n),!1):(h(s.system.tokenName,n),a.post(i,{ff:"d",f:t,b:e,l:s.context.languageCode},function(e){"function"==typeof r&&r(e)}),!0)},setCookie:h,setCookieContent:p,setPreferenceCookie:g,t:l,trigger:c}}),a.extend(s,{constants:{keyboard:{RETURN:13}}}),a.extend(s,{Class:function(e){function t(){this.initialize.apply(this,arguments)}for(var r in e)e.hasOwnProperty(r)&&(t.prototype[r]=e[r]);return t.prototype.initialize=t.prototype.initialize||function(){},t}}),a.extend(s,{initialisers:{initializeMap:function(){var e=a.extend(!0,{},s,s.TWCCMapOptions);return delete e.TWCCMapOptions,s.TWCCMap=window.TWCCMap.getInstance(e),s.map=s.TWCCMap.getMap(),(e=a("#map")).on("linestring.edit_end",function(e,t){t=t.data,w()||s.TWCCUi.setCsvMode(!0),b(t.map(_))}),e.on("map.click",function(e,t){v(t.data)}),e.on("marker.drag_end",function(e,t){v(t.data)}),e.on("linestring.add_vertice",function(e,t){var r;w()&&((r=m()).push(_(t.data)),b(r))}),e.on("linestring.remove_vertice",function(e,t){var r;w()&&(r=_(t.data),b(m().filter(function(e){return!(e.x.toFixed(13)===r.x.toFixed(13)&&e.y.toFixed(13)===r.y.toFixed(13))})))}),e.on("place.changed",function(e,t){v(t.data)}),e.on("map.layer.change",function(e,t){var t=t.data.split(" "),r=y("layers")||{};-1<t.indexOf("on")||-1<t.indexOf("off")?(r.hasOwnProperty("opt")||(r.opt={}),r.opt[t[1]]="on"===t[2]):(r.base={},r.base[t[0]]=t[1]),g("layers",r)}),s.TWCCMap.promise},initializeUi:function(){var e=a.extend(!0,{},s);return s.TWCCUi=window.TWCCUi.getInstance(e),s.TWCCUi.promise},initializeConverter:function(){var e=a.extend(!0,{},s,s.TWCCConverterOptions);return delete e.TWCCConverterOptions,s.TWCCConverter=window.TWCCConverter.getInstance(e),n=s.TWCCConverter.converterWidget,s.TWCCConverter.promise}}}),a(document).ready(function(){s.context.mobileDetected&&confirm(l("redirectToMobileVersion"))&&(window.location.href="/m");var e="*GPS (WGS84) (deg)",e={title:e,defData:"+title="+e+" +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees",isConnector:!1};"function"!==a.type(Math.sinh)&&(Math.sinh=function(e){return(Math.exp(e)-Math.exp(-e))/2}),a.ajax({url:"/js/data/WMM.COF",cache:!0,dataType:"text"}).done(function(e){i=geoMagFactory(cof2Obj(e))}).fail(function(){i=function(){return{}}}),a.extend(u.default.WGS84,e),a.extend(u.default.defs("WGS84"),e),s.initialisers.initializeUi().done(E)})},{proj4:421}],3:[function(e,t,r){"use strict";var H,n,i,W=o(e("proj4")),Y=e("ol"),V=e("ol/proj/proj4.js"),K=e("ol/layer.js"),X=e("ol/source"),J=o(e("ol/source/Vector")),Z=e("ol/geom"),$=e("ol/style.js"),ee=e("ol/control.js"),te=e("ol/format.js"),re=e("ol/interaction.js"),ne=e("ol/proj.js"),ie=e("ol/coordinate.js"),oe=o(e("@kirtandesai/ol-geocoder")),ae=o(e("ol/layer/Group")),se=e("ol/sphere"),ue=o(e("ol-layerswitcher"));o(e("ol-ext/control/Graticule"));function o(e){return e&&e.__esModule?e:{default:e}}H=jQuery,void 0===window.TWCCMap&&(i=function(e){var o,n,c,r,i,a,s,u,l,f,h,p,d,g,y,A=null,m={mapOptions:{zoom:2,center:[0,0],azimuthOpacity:.7},mapContainerElt:H("#map")[0],context:{languageCode:"en"}},D={title:"Hybrid",lyrs:"y"},L={title:"Satellite",lyrs:"s"},Q={title:"Terrain",lyrs:"p"},F={title:"Road",lyrs:"m"};function N(e){this._array=e,this._index=0;var t=this;this.get=function(){var e=t._array[t._index];return++t._index,t._index===t._array.length&&(t._index=0),e}}function v(){return m.utils.t.apply(this,arguments)}function b(e,t){m.utils.trigger(H(m.mapContainerElt),e,t)}function t(e){return(0,ne.fromLonLat)(e,c.getProjection())}function _(e){return(0,ne.toLonLat)(e,c.getProjection())}function w(e){return t([e.x,e.y])}function E(e,t){o.setMetrics("length",e),o.setMetrics("area",t),b("map.metrics_changed",{length:e,area:t})}function C(){var e,t=l.getFeatures()[0];t&&((e=(t=t.getGeometry()).getCoordinates()).push(e[0]),e=new Z.Polygon([e]),E((0,se.getLength)(t),(0,se.getArea)(e)))}function I(){d.setPosition(void 0)}function S(n){u.getFeatures().forEach(function(e){e.getGeometry().setCoordinates(n||e.getGeometry().getCoordinates());var t=e.get("name"),r=o.getAngleInRadians(t)||0,t="true"===t||r?m.mapOptions.azimuthOpacity:0,e=e.get("style").getImage();e.setRotation(r),e.setOpacity(t)})}function j(e){return"data:image/svg+xml,"+escape('<?xml version="1.0" encoding="UTF-8" standalone="no"?>'+e)}function x(){u.clear()}function G(e){var r=[new $.Style({stroke:new $.Stroke({color:"rgba(0,0,0,0.5)",width:2})})],n=0,e=e.getGeometry(),i=e.getCoordinates().length-1,o={font:"10px Arial",stroke:new $.Stroke({color:"#fff",width:2}),fill:new $.Fill({color:"#000"})};return e.forEachSegment(function(e,t){++n,r.push(new $.Style({geometry:new Z.Point(e),text:new $.Text(H.extend(o,{text:n.toString()}))})),n===i&&r.push(new $.Style({geometry:new Z.Point(t),text:new $.Text(H.extend(o,{text:(n+1).toString()}))}))}),r}function O(e){var t=new H.Deferred;return c.animate({center:e,duration:200},t.resolve),t.promise()}function P(e){var t,r="",n="",i="",o=_(e),a={key:m.mapOptions.timezonedbKey,format:"json",by:"position",lng:o[0],lat:o[1],fields:"abbreviation,gmtOffset"},s=(0,ie.degreesToStringHDMS)("NS",o[1]),u=(0,ie.degreesToStringHDMS)("EW",o[0]),l=H.get("https://api.open-meteo.com/v1/elevation?latitude=".concat(o[1],"&longitude=").concat(o[0])).done(function(e){e.elevation&&(e=e.elevation[0].toString(),r='<p><img src="'.concat(m.system.dirWsImages,'elevation_icon.png" alt="').concat(v("elevation"),'" title="').concat(v("elevation"),'" width="38" height="30"> ').concat(e).concat(v("unitMeter"),"</p>"),H("#elevation").html(r))}).fail(function(){b("xhr.failed","Elevation API")}),a=H.get("https://api.timezonedb.com/v2.1/get-time-zone",a).done(function(e){var t;"OK"===e.status&&(t=e.gmtOffset/3600,i="<p>"+e.abbreviation+" (GMT",0<t&&(i+="+"),0!=t&&(i+=t),i+=")</p>",H("#timezone").html(i))}).fail(function(){b("xhr.failed","Timezonedb API")}),o=H.get("https://nominatim.openstreetmap.org/reverse",{format:"json",lat:o[1],lon:o[0],"accept-language":m.context.languageCode}).done(function(e){var t;e&&!e.error&&(t=e.address.country_code.toUpperCase(),n='<img src="'+m.system.dirWsImages+'address_icon.png" alt="'+v("address")+'" title="'+v("address")+'" width="38" height="30"><p>'+e.display_name+'   <img src="'+m.system.dirWsImages+"flags/"+t+'.png" alt="'+t+'" width="22" height="15"></p>',H("#direction").html(n))}).fail(function(){b("xhr.failed","Nominatim API")});I(),H.when(o,l,a).always(function(){t='<div id="popup" class="ol-popup">   <a href="#" id="popup-closer" class="ol-popup-closer"></a>   <div class="popup-content" dir="'+v("dir")+'">       <h3>'+v("dragMe")+'</h3>       <div><span id="direction">'+n+'</span>           <a id="zoom-btn" href="#" title="'+v("zoom")+'">'+v("zoom")+'</a>       </div>       <div>           <img src="'+m.system.dirWsImages+'gps_icon.png" alt="GPS (WGS84)" title="GPS (WGS84)" width="38" height="30">           <p>'+s+"<br>"+u+'</p><span id="timezone">'+i+'</span>           <span id="elevation">'+r+"</span>       </div>   </div></div>",p.innerHTML=t,H("#zoom-btn").button({icons:{primary:"ui-icon-zoomin"},text:!1}).click(function(){var e;H("#zoom-btn").button("option","disabled",!0),e=f.getFeatures()[0].getGeometry().getCoordinates(),H.when(O(e),(e=new H.Deferred,c.animate({zoom:10,duration:200},e.resolve),e.promise())).done(function(){H("#zoom-btn").button("option","disabled",!1)})}),H("#popup-closer").click(function(e){return I(),this.blur(),e.stopPropagation(),e.preventDefault(),!1}),b("infowindow.dom_ready"),d.setPosition(e)})}function U(e){var t,r;1===e.length?(l.clear(),n.removeInteraction(a),t=e[0],f&&(t=w(t),f.getFeatures().length?(r=t,f.getFeatures().forEach(function(e){e.getGeometry().setCoordinates(r)})):(f.addFeature(new Y.Feature({geometry:new Z.Point(t),style:new $.Style({image:new $.Icon({src:m.system.dirWsImages+"twcc_icon_with_shadow.png",anchor:[19,1],anchorXUnits:"pixels"})})})),n.addInteraction(i)),(u.getFeatures().length?S:function(e){var t,r,n=j('<svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="16" height="97" viewBox="0 0 16 97" enable-background="new 0 0 512 512" xml:space="preserve"><path style="stroke:#fff;stroke-width:2;" d="M 8,12.943205 8,96.999397"/><rect style="fill:#fff;stroke:#fff;stroke-width:1;stroke-linecap:butt;stroke-linejoin:round;stroke-miterlimit:4;" width="8.779562" height="8.2131386" x="3.610219" y="4.5313869"/></svg>'),i={true:{src:j('<svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="16" height="97" viewBox="0 0 16 97" enable-background="new 0 0 512 512" xml:space="preserve"><polygon style="fill:#fff;stroke:#fff;stroke-width:37.61520004;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10" stroke-miterlimit="10" points="374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 259.216,29.942 330.27,173.919 489.16,197.007 " transform="matrix(0.03217603,0,0,0.03217603,-0.33683664,-0.35833699)"/><path style="stroke:#fff;stroke-width:2;" d="M 8,12.943205 8,96.999397"/></svg>')},magneticDeclination:{src:j('<svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 16 97" xml:space="preserve" width="16" height="97"><g transform="matrix(0.07106223,0,0,0.07106223,-0.43846047,1.8741008e-6)"><path style="fill:#fff" d="m 7.954,226.53 c -2.23,4.623 -2.295,8.072 -0.609,9.915 3.911,4.275 15.926,-3.905 23.323,-9.051 l 58.416,-40.662 c 7.397,-5.145 20.402,-11.835 29.414,-11.993 0.897,-0.016 1.8,-0.011 2.703,0.011 9.007,0.218 21.958,7.016 29.3,12.238 l 56.403,40.151 c 7.343,5.221 19.303,13.473 23.301,9.219 1.74,-1.849 1.751,-5.33 -0.381,-9.997 L 129.648,7.047 c -4.264,-9.333 -11.335,-9.404 -15.79,-0.163 L 7.954,226.53 Z"/><path style="stroke:#fff;stroke-width:28.14434624;" d="m 118.74748,174.45383 0,1190.45957"/></g></svg>'),rotation:o.getAngleInRadians("magneticDeclination")},srcConvergence:{src:n,color:"#f00",rotation:o.getAngleInRadians("srcConvergence")},dstConvergence:{src:n,rotation:o.getAngleInRadians("dstConvergence")}};for(t in i)i.hasOwnProperty(t)&&(r=i[t],u.addFeature(new Y.Feature({geometry:new Z.Point(e),name:t,style:new $.Style({image:new $.Icon(H.extend({anchor:[.5,1],rotateWithView:!0,opacity:"true"===t||r.rotation?m.mapOptions.azimuthOpacity:0,scale:.75,color:"#000"},r))})})))})(t),O(t),P(t),E())):(I(),f.clear(),n.removeInteraction(i),x(),t=e,l&&(t=t.map(w),l.getFeatures().length?(e=t,l.getFeatures()[0].getGeometry().setCoordinates(e)):(l.addFeature(new Y.Feature({geometry:new Z.LineString(t)})),n.addInteraction(a)),C(),!0===o.getBoolean("autoZoom"))&&n.getView().fit(l.getExtent(),{duration:200,padding:[0,270,36,204]}))}function k(e,r){return e.reduce(function(e,t){return e.concat(r(t))},[])}function B(e){return k(e,function(e){return e})}function T(e){return new K.Tile({title:e.title,type:"base",visible:!1,preload:1/0,source:new X.XYZ({attributions:'© Google <a href="https://developers.google.com/maps/terms" target="_blank">Terms of Use.</a>',url:"http://mt0.google.com/vt/lyrs="+e.lyrs+"&hl=en&x={x}&y={y}&z={z}&s=Ga"})})}function M(e){if(e.features){var t;if(H.isFunction(e.features.getArray))t=e.features.getArray();else{if(!H.isArray(e.features))return;t=e.features}b("linestring.edit_end",k(t,function(e){return function e(t){switch(t.getType()){case"Point":return[t.getCoordinates()];case"LineString":case"LinearRing":case"MultiPoint":return t.getCoordinates();case"Polygon":case"MultiLineString":return B(t.getCoordinates());case"MultiPolygon":return B(B(t.getCoordinates()));case"GeometryCollection":return k(t.getGeometries(),e);case"Circle":return[t.getCenter()];default:return[]}}(e.getGeometry())}).map(_)),C()}}function z(e){var t=m.utils.degToRad(e.convergenceInDegrees);return o.setAngleInRadians("srcConvergence",t.source),o.setAngleInRadians("dstConvergence",t.destination),e}function q(){var e=H("body"),t=(r.once("tileloadend",function(){var e=m.utils.getPreferenceCookie("layers");if(e){var t,r=e.opt;if(r)for(var n in r)r.hasOwnProperty(n)&&(t=H(".ol-control.layer-switcher label:contains('"+n+"')").closest("li").children("input[type=checkbox]")).length&&t[0].checked!==r[n]&&t.click();var i=e.base;if(i)for(var o in i)i.hasOwnProperty(o)&&(o=H(".ol-control.layer-switcher label:contains('"+o+"')").closest("li").find("label:contains('"+i[o]+"')").closest("li").children("input[type=radio]")).length&&o.click()}b("map.tiles_loaded"),H(".ol-control.layer-switcher").on("change","input",function(e){var e=H(e.target),t=e.closest("li.group").children("label").text();t+=" "+e.closest("li.layer").children("label").text(),b("map.layer.change",t="checkbox"===e.attr("type")?t+" "+(this.checked?"on":"off"):t)}),A.resolve()}),r.on("tileloaderror",A.reject),n.on("singleclick",function(e){var t=n.forEachFeatureAtPixel(n.getEventPixel(e.originalEvent),function(e){return e});t?P(t.getGeometry().getCoordinates()):(I(),b("map.click",_(e.coordinate)))}),h.on("addresschosen",function(e){b("place.changed",_(e.coordinate))}),i.on("modifystart",function(){I(),x(),b("marker.drag_start")}),i.on("modifyend",function(e){b("marker.drag_end",_(e.features.getArray()[0].getGeometry().getCoordinates()))}),a.on("modifyend",M),s.on("addfeatures",M),n.getViewport().addEventListener("contextmenu",function(e){var t,r=n.forEachFeatureAtPixel(n.getEventPixel(e),function(e){return e});r?(r=r.getGeometry().getCoordinates(),Array.isArray(r[0])&&(t=n.getEventCoordinate(e),r=r.map(function(e){return{coordinates:e,distance:new Z.LineString([t,e]).getLength()}}).sort(function(e,t){return e.distance-t.distance})[0].coordinates),b("linestring.remove_vertice",_(r))):b("linestring.add_vertice",_(n.getEventCoordinate(e))),C(),e.stopPropagation(),e.preventDefault()}),e.on("converter.source.selection_changed converterset.done",function(e,t){}),e.on("converterset.wgs84_changed",function(e,t){var r,n;(t=z(t)).wgs84=(r=t.wgs84,n=[],H.each(r,function(){if(void 0===this.lat&&void 0===this.x||this.error)return!0;n.push(this)}),n),o.setAngleInDegrees("magneticDeclination",t.magneticDeclinationInDegrees),U(t.wgs84),b("converter.changed",t)}),e.on("converterset.convergence_changed",function(e,t){u.getFeatures().length&&(t=z(t),S(),b("converter.convergence_changed",t))}),e.on("ui.full_screen",function(){H(".ol-full-screen button").trigger("click")}),new N("degrees"));H(".ol-scale-line").click(function(){g.setUnits(t.get())})}function R(e){var e=e||{},t=H("#c-ads-1")[0];y.call(this,{element:t,target:e.target})}return H.extend(!0,m,e),o={anglesInRadians:{},booleans:{autoZoom:!0},metrics:{},setAngleInRadians:function(e,t){o.anglesInRadians[e]=t},setAngleInDegrees:function(e,t){o.setAngleInRadians(e,m.utils.degToRad(t))},getAngleInRadians:function(e){return o.anglesInRadians[e]},setBoolean:function(e,t){o.booleans[e]=!!t},getBoolean:function(e){return o.booleans[e]},setMetrics:function(e,t){o.metrics[e]=t},getMetrics:function(e){return o.metrics[e]}},(y=ee.Control)&&(R.__proto__=y),(R.prototype=Object.create(y&&y.prototype)).constructor=R,A=function(){return m.utils.newDeferred.apply(this,arguments)}("Map"),(0,V.register)(W.default),e=new $.Style({image:new $.Circle({radius:6,fill:null,stroke:new $.Stroke({color:"rgba(0,0,0,0.6)",width:3})})}),p=H("<div>")[0],g=new ee.ScaleLine,u=new J.default,f=new J.default,l=new J.default,i=new re.Modify({source:f,style:e,pixelTolerance:30}),a=new re.Modify({source:l,style:e}),s=new re.DragAndDrop({formatConstructors:[te.GPX,te.GeoJSON,te.IGC,te.KML,te.TopoJSON]}),r=new X.XYZ({attributions:'Tiles © <a target="_blank" href="https://services.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer">ArcGIS</a>',url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer/tile/{z}/{y}/{x}"}),c=new Y.View({zoom:m.mapOptions.zoom}),h=new oe.default("nominatim",{provider:"osm",autoComplete:!0,autoCompleteMinLength:2,placeholder:v("searchByAddress"),targetType:"glass-button",lang:m.context.languageCode,limit:5,keepOpen:!1,preventDefault:!0,debug:!1}),d=new Y.Overlay({element:p,autoPan:!0,autoPanAnimation:{duration:200}}),e=t(m.mapOptions.center),c.setCenter(e),n=new Y.Map({controls:(0,ee.defaults)().extend([new ee.FullScreen({source:"map-container"}),new ue.default,h,g]),interactions:(0,re.defaults)().extend([new re.DragRotateAndZoom,s]),target:m.mapContainerElt,loadTilesWhileAnimating:!0,overlays:[d],layers:[new ae.default({title:"Maps",layers:[new ae.default({title:"ArcGIS",layers:[new K.Tile({title:"Satellite",type:"base",visible:!1,preload:1/0,source:new X.XYZ({attributions:'Tiles © <a target="_blank" href="https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer">ArcGIS</a>',url:"http://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}.jpg"})}),new K.Tile({title:"Terrain",type:"base",preload:1/0,source:r})]}),new ae.default({title:"OSM",layers:[new K.Tile({title:"Stamen toner",type:"base",visible:!1,preload:1/0,source:new X.StadiaMaps({layer:"stamen_toner"})}),new K.Tile({title:"Stamen terrain",type:"base",visible:!1,preload:1/0,source:new X.StadiaMaps({layer:"stamen_terrain"})}),new K.Tile({title:"Open Street Map",type:"base",visible:!1,preload:1/0,source:new X.OSM})]}),new ae.default({title:"Google",layers:[T(D),T(L),T(Q),T(F)]})]}),new ae.default({title:"Features",layers:[new K.Vector({title:"Azimuths",style:function(e){return e.get("style")},source:u})]}),new K.Vector({style:function(e){return e.get("style")},source:f}),new K.Vector({style:G,source:l})],view:c}),q(),{promise:A.promise(),setGraticule:function(){new GridOverlay(n).setMap(n)},model:{setAngleInRadians:o.setAngleInRadians,setAngleInDegrees:o.setAngleInDegrees,getMetrics:o.getMetrics,setBoolean:o.setBoolean},getMap:function(){return n},olVersion:Y.VERSION}},window.TWCCMap={getInstance:function(e){return n=n||i(e)}})},{"@kirtandesai/ol-geocoder":4,ol:234,"ol-ext/control/Graticule":75,"ol-layerswitcher":77,"ol/control.js":116,"ol/coordinate.js":128,"ol/format.js":145,"ol/geom":201,"ol/interaction.js":235,"ol/layer.js":260,"ol/layer/Group":266,"ol/proj.js":283,"ol/proj/proj4.js":288,"ol/source":338,"ol/source/Vector":367,"ol/sphere":379,"ol/style.js":384,proj4:421}],4:[function(e,t,r){"use strict";function z(e,t){if(t&&("object"==X(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return q(e)}function q(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function H(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(H=function(){return!!e})()}function W(e){return(W=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Y(e,t){return(Y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function V(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=X(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=X(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==X(e)?e:e+""}(n.key),n)}}function K(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function X(e){return(X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i,o;i=void 0,o=function(e,t,r,n,i,o,a,s){function u(e){return e&&"object"==X(e)&&"default"in e?e:{default:e}}var e=u(e),c=u(t),f=u(r),l=u(n),h=u(i),p=u(o),d=u(a),g=u(s),t="gcd-container",r="gcd-button-control",n="gcd-input-query",i="gcd-input-reset",o={namespace:"ol-geocoder",spin:"gcd-pseudo-rotate",hidden:"gcd-hidden",address:"gcd-address",country:"gcd-country",city:"gcd-city",road:"gcd-road",olControl:"ol-control",glass:{container:"gcd-gl-container",control:"gcd-gl-control",button:"gcd-gl-btn",input:"gcd-gl-input",expanded:"gcd-gl-expanded",reset:"gcd-gl-reset",result:"gcd-gl-result"},inputText:{container:"gcd-txt-container",control:"gcd-txt-control",input:"gcd-txt-input",reset:"gcd-txt-reset",icon:"gcd-txt-glass",result:"gcd-txt-result"}},y=Object.freeze({__proto__:null,containerId:t,buttonControlId:r,inputQueryId:n,inputResetId:i,cssClasses:o,default:{containerId:t,buttonControlId:r,inputQueryId:n,inputResetId:i,cssClasses:o}}),A="addresschosen",m="nominatim",v="glass-button",b={provider:"osm",placeholder:"Search for an address",featureStyle:null,targetType:v,lang:"en-US",limit:5,keepOpen:!1,preventDefault:!1,autoComplete:!1,autoCompleteMinLength:2,autoCompleteTimeout:200,debug:!1};function _(e,t){t=1<arguments.length&&void 0!==t?t:"Assertion failed";if(!e){if("undefined"!=typeof Error)throw new Error(t);throw t}}function w(e){"performance"in window==0&&(window.performance={}),"now"in window.performance==0&&(t=Date.now(),performance.timing&&performance.timing.navigationStart&&(t=performance.timing.navigationStart),window.performance.now=function(){return Date.now()-t});var t,r=window.performance.now().toString(36);return e?e+r:r}function E(e){return/^[0-9]+$/.test(e)}function C(e,t,r){if(Array.isArray(e))e.forEach(function(e){return C(e,t)});else for(var n=Array.isArray(t)?t:t.split(/[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+/),i=n.length;i--;)S(e,n[i])||O(e,n[i],r)}function I(e,t,r){if(Array.isArray(e))e.forEach(function(e){return I(e,t,r)});else for(var n=Array.isArray(t)?t:t.split(/[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+/),i=n.length;i--;)S(e,n[i])&&P(e,n[i],r)}function S(e,t){return e.classList?e.classList.contains(t):x(t).test(e.className)}function j(e,t){var r;if(Array.isArray(e)){if(r=document.createElement(e[0]),e[1].id&&(r.id=e[1].id),e[1].classname&&(r.className=e[1].classname),e[1].attr){var n=e[1].attr;if(Array.isArray(n))for(var i=-1;++i<n.length;)r.setAttribute(n[i].name,n[i].value);else r.setAttribute(n.name,n.value)}}else r=document.createElement(e);r.innerHTML=t;for(var o=document.createDocumentFragment();r.childNodes[0];)o.append(r.childNodes[0]);return r.append(o),r}function x(e){return new RegExp("(^|\\s+) ".concat(e," (\\s+|$)"),"u")}function O(e,t,r){e.classList?e.classList.add(t):e.className="".concat(e.className," ").concat(t).trim(),r&&E(r)&&window.setTimeout(function(){return P(e,t)},r)}function P(e,t,r){e.classList?e.classList.remove(t):e.className=e.className.replace(x(t)," ").trim(),r&&E(r)&&window.setTimeout(function(){return O(e,t)},r)}var k=y.cssClasses,B=K(T,[{key:"createControl",value:function(){var e,t="text-input"===this.options.targetType?(t="".concat(k.namespace," ").concat(k.inputText.container),{container:e=j(["div",{id:y.containerId,classname:t}],T.input),control:e.querySelector(".".concat(k.inputText.control)),input:e.querySelector(".".concat(k.inputText.input)),reset:e.querySelector(".".concat(k.inputText.reset)),result:e.querySelector(".".concat(k.inputText.result))}):(t="".concat(k.namespace," ").concat(k.glass.container),{container:e=j(["div",{id:y.containerId,classname:t}],T.glass),control:e.querySelector(".".concat(k.glass.control)),button:e.querySelector(".".concat(k.glass.button)),input:e.querySelector(".".concat(k.glass.input)),reset:e.querySelector(".".concat(k.glass.reset)),result:e.querySelector(".".concat(k.glass.result))});return t.input.placeholder=this.options.placeholder,t}}]);function T(e){V(this,T),this.options=e,this.els=this.createControl()}B.glass='\n  <div class="'.concat(k.glass.control," ").concat(k.olControl,'">\n    <button type="button" id="').concat(y.buttonControlId,'" class="').concat(k.glass.button,'"></button>\n    <input type="text" id="').concat(y.inputQueryId,'" class="').concat(k.glass.input,'" autocomplete="off" placeholder="Search ...">\n    <a id="').concat(y.inputResetId,'" class="').concat(k.glass.reset," ").concat(k.hidden,'"></a>\n  </div>\n  <ul class="').concat(k.glass.result,'"></ul>\n'),B.input='\n  <div class="'.concat(k.inputText.control,'">\n    <input type="text" id="').concat(y.inputQueryId,'" class="').concat(k.inputText.input,'" autocomplete="off" placeholder="Search ...">\n    <span class="').concat(k.inputText.icon,'"></span>\n    <button type="button" id="').concat(y.inputResetId,'" class="').concat(k.inputText.reset," ").concat(k.hidden,'"></button>\n  </div>\n  <ul class="').concat(k.inputText.result,'"></ul>\n');var D=K(function e(){V(this,e),this.settings={url:"https://photon.komoot.io/api/",params:{q:"",limit:10,lang:"en"},langs:["de","it","fr","en"]}},[{key:"getParameters",value:function(e){return e.lang=e.lang.toLowerCase(),{url:this.settings.url,params:{q:e.query,limit:e.limit||this.settings.params.limit,lang:(this.settings.langs.includes(e.lang)?e:this.settings.params).lang}}}},{key:"handleResponse",value:function(e){return 0===e.features.length?[]:e.features.map(function(e){return{lon:e.geometry.coordinates[0],lat:e.geometry.coordinates[1],address:{name:e.properties.name,postcode:e.properties.postcode,city:e.properties.city,state:e.properties.state,country:e.properties.country},original:{formatted:e.properties.name,details:e.properties}}})}}]),L=K(function e(){V(this,e),this.settings={url:"https://nominatim.openstreetmap.org/search/",params:{q:"",format:"json",addressdetails:1,limit:10,countrycodes:"","accept-language":"en-US"}}},[{key:"getParameters",value:function(e){return{url:this.settings.url,params:{q:e.query,format:this.settings.params.format,addressdetails:this.settings.params.addressdetails,limit:e.limit||this.settings.params.limit,countrycodes:e.countrycodes||this.settings.params.countrycodes,"accept-language":e.lang||this.settings.params["accept-language"]}}}},{key:"handleResponse",value:function(e){return 0===e.length?[]:e.map(function(e){return{lon:e.lon,lat:e.lat,bbox:e.boundingbox,address:{name:e.display_name,road:e.address.road||"",houseNumber:e.address.house_number||"",postcode:e.address.postcode,city:e.address.city||e.address.town,state:e.address.state,country:e.address.country},original:{formatted:e.display_name,details:e.address}}})}}]),Q=K(function e(){V(this,e),this.settings={url:"https://open.mapquestapi.com/nominatim/v1/search.php",params:{q:"",key:"",format:"json",addressdetails:1,limit:10,countrycodes:"","accept-language":"en-US"}}},[{key:"getParameters",value:function(e){return{url:this.settings.url,params:{q:e.query,key:e.key,format:"json",addressdetails:1,limit:e.limit||this.settings.params.limit,countrycodes:e.countrycodes||this.settings.params.countrycodes,"accept-language":e.lang||this.settings.params["accept-language"]}}}},{key:"handleResponse",value:function(e){return 0===e.length?[]:e.map(function(e){return{lon:e.lon,lat:e.lat,address:{name:e.address.neighbourhood||"",road:e.address.road||"",postcode:e.address.postcode,city:e.address.city||e.address.town,state:e.address.state,country:e.address.country},original:{formatted:e.display_name,details:e.address}}})}}]),F=K(function e(){V(this,e),this.settings={url:"https://dev.virtualearth.net/REST/v1/Locations",callbackName:"jsonp",params:{query:"",key:"",includeNeighborhood:0,maxResults:10}}},[{key:"getParameters",value:function(e){return{url:this.settings.url,callbackName:this.settings.callbackName,params:{query:e.query,key:e.key,includeNeighborhood:e.includeNeighborhood||this.settings.params.includeNeighborhood,maxResults:e.maxResults||this.settings.params.maxResults}}}},{key:"handleResponse",value:function(e){e=e.resourceSets[0].resources;return 0===e.length?[]:e.map(function(e){return{lon:e.point.coordinates[1],lat:e.point.coordinates[0],address:{name:e.name},original:{formatted:e.address.formattedAddress,details:e.address}}})}}]),N=K(function e(){V(this,e),this.settings={url:"https://api.opencagedata.com/geocode/v1/json?",params:{q:"",key:"",limit:10,countrycode:"",pretty:1,no_annotations:1}}},[{key:"getParameters",value:function(e){return{url:this.settings.url,params:{q:e.query,key:e.key,limit:e.limit||this.settings.params.limit,countrycode:e.countrycodes||this.settings.params.countrycodes}}}},{key:"handleResponse",value:function(e){return 0===e.results.length?[]:e.results.map(function(e){return{lon:e.geometry.lng,lat:e.geometry.lat,address:{name:e.components.house_number||"",road:e.components.road||"",postcode:e.components.postcode,city:e.components.city||e.components.town,state:e.components.state,country:e.components.country},original:{formatted:e.formatted,details:e.components}}})}}]);function G(l){return new Promise(function(e,t){r=l.url,(u=l.data)&&"object"==X(u)&&(r+=(/\?/.test(r)?"&":"?")+function r(n){return Object.keys(n).reduce(function(e,t){return e.push("object"==X(n[t])?r(n[t]):"".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(n[t]))),e},[]).join("&")}(u));var r,n,i,o,a,s,u=r;l.jsonp?(r=u,n=l.callbackName,i=e,o=document.head,a=document.createElement("script"),s="f".concat(Math.round(Math.random()*Date.now())),a.setAttribute("src","".concat(r+(0<r.indexOf("?")?"&":"?")+n,"=").concat(s)),window[s]=function(e){window[s]=void 0,setTimeout(function(){return o.removeChild(a)},0),i(e)},o.append(a)):fetch(u,{method:"GET",mode:"cors",credentials:"same-origin"}).then(function(e){return e.json()}).then(e).catch(t)})}var M=y.cssClasses,U=K(function e(t,r){V(this,e),this.Base=t,this.layerName=w("geocoder-layer-"),this.layer=new l.default({name:this.layerName,source:new h.default}),this.options=t.options,this.options.provider="string"==typeof this.options.provider?this.options.provider.toLowerCase():this.options.provider,this.provider=this.newProvider(),this.els=r,this.lastQuery="",this.container=this.els.container,this.registeredListeners={mapClick:!1},this.setListeners()},[{key:"setListeners",value:function(){var r,n,i=this;this.els.input.addEventListener("keypress",function(e){var t=e.target.value.trim();(e.key?"Enter"===e.key:e.which?13===e.which:e.keyCode&&13===e.keyCode)&&(e.preventDefault(),i.query(t))},!1),this.els.input.addEventListener("click",function(e){return e.stopPropagation()},!1),this.els.input.addEventListener("input",function(e){var t=e.target.value.trim();(0!==t.length?I:C)(i.els.reset,M.hidden),i.options.autoComplete&&t!==n&&(n=t,r&&clearTimeout(r),r=setTimeout(function(){t.length>=i.options.autoCompleteMinLength&&i.query(t)},i.options.autoCompleteTimeout))},!1),this.els.reset.addEventListener("click",function(e){i.els.input.focus(),i.els.input.value="",i.lastQuery="",C(i.els.reset,M.hidden),i.clearResults()},!1),this.options.targetType===v&&this.els.button.addEventListener("click",function(e){e.stopPropagation(),S(i.els.control,M.glass.expanded)?i.collapse():i.expand()},!1)}},{key:"query",value:function(e){var r=this,t=(this.provider||(this.provider=this.newProvider()),this.provider.getParameters({query:e,key:this.options.key,lang:this.options.lang,countrycodes:this.options.countrycodes,limit:this.options.limit}));this.lastQuery===e&&this.els.result.firstChild||(this.lastQuery=e,this.clearResults(),C(this.els.reset,M.spin),e={url:t.url,data:t.params},t.callbackName&&(e.jsonp=!0,e.callbackName=t.callbackName),G(e).then(function(e){r.options.debug&&console.info(e),I(r.els.reset,M.spin);e=r.provider.handleResponse(e);e&&(r.createList(e),r.listenMapClick())}).catch(function(e){I(r.els.reset,M.spin);var t=j("li","<h5>Error! No internet connection?</h5>");r.els.result.append(t)}))}},{key:"createList",value:function(e){var n=this,i=this.els.result;e.forEach(function(t){var r="osm"===n.options.provider?'<span class="'.concat(M.road,'">').concat(t.address.name,"</span>"):n.addressTemplate(t.address),e=j("li",'<a href="#">'.concat(r,"</a>"));e.addEventListener("click",function(e){e.preventDefault(),n.chosen(t,r,t.address,t.original)},!1),i.append(e)})}},{key:"chosen",value:function(e,t,r,n){var i=this.Base.getMap(),o=[Number.parseFloat(e.lon),Number.parseFloat(e.lat)],a=i.getView().getProjection(),o=g.default.transform(o,"EPSG:4326",a),s=(s=e.bbox)&&g.default.transformExtent([s[2],s[1],s[3],s[0]],"EPSG:4326",a),a={formatted:t,details:r,original:n};!1===this.options.keepOpen&&this.clearResults(!0),!0===this.options.preventDefault?this.Base.dispatchEvent({type:A,address:a,coordinate:o,bbox:s,place:e}):(s?i.getView().fit(s,{duration:500}):function(e,t,r,n){r=2<arguments.length&&void 0!==r?r:500,n=3<arguments.length&&void 0!==n?n:2.388657133911758;e.getView().animate({duration:r,resolution:n},{duration:r,center:t})}(i,o),t=this.createFeature(o,a),this.Base.dispatchEvent({type:A,address:a,feature:t,coordinate:o,bbox:s,place:e}))}},{key:"createFeature",value:function(e){e=new d.default(new p.default(e));return this.addLayer(),e.setStyle(this.options.featureStyle),e.setId(w("geocoder-ft-")),this.getSource().addFeature(e),e}},{key:"addressTemplate",value:function(e){var r,t=[];return e.name&&t.push(['<span class="',M.road,'">{name}</span>'].join("")),(e.road||e.building||e.house_number)&&t.push(['<span class="',M.road,'">{building} {road} {house_number}</span>'].join("")),(e.city||e.town||e.village)&&t.push(['<span class="',M.city,'">{postcode} {city} {town} {village}</span>'].join("")),(e.state||e.country)&&t.push(['<span class="',M.country,'">{state} {country}</span>'].join("")),t=t.join("<br>"),r=e,t.replace(/\{[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*([\x2D0-9A-Z_a-z]+)[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*\}/g,function(e,t){t=void 0===r[t]?"":r[t];return String(t).replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll('"',"&quot;").replaceAll("'","&#039;")})}},{key:"newProvider",value:function(){switch(this.options.provider){case"osm":return new L;case"mapquest":return new Q;case"photon":return new D;case"bing":return new F;case"opencage":return new N;default:return this.options.provider}}},{key:"expand",value:function(){var e=this;I(this.els.input,M.spin),C(this.els.control,M.glass.expanded),window.setTimeout(function(){return e.els.input.focus()},100),this.listenMapClick()}},{key:"collapse",value:function(){this.els.input.value="",this.els.input.blur(),C(this.els.reset,M.hidden),I(this.els.control,M.glass.expanded),this.clearResults()}},{key:"listenMapClick",value:function(){var t,r;this.registeredListeners.mapClick||(r=(t=this).Base.getMap().getTargetElement(),this.registeredListeners.mapClick=!0,r.addEventListener("click",{handleEvent:function(e){t.clearResults(!0),r.removeEventListener(e.type,this,!1),t.registeredListeners.mapClick=!1}},!1))}},{key:"clearResults",value:function(e){if(e&&this.options.targetType===v)this.collapse();else for(var t=this.els.result;t.firstChild;)t.firstChild.remove()}},{key:"getSource",value:function(){return this.layer.getSource()}},{key:"addLayer",value:function(){var t=this,r=!1,e=this.Base.getMap();e.getLayers().forEach(function(e){e===t.layer&&(r=!0)}),r||e.addLayer(this.layer)}}]);function R(){var e,t,r,n,i,o,a,s=0<arguments.length&&void 0!==arguments[0]?arguments[0]:m,u=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},l=(V(this,R),_("string"==typeof s,"@param `type` should be string!"),_(s===m||"reverse"===s,"@param 'type' should be '".concat(m,"'\n      or '").concat("reverse","'!")),_("object"==X(u),"@param `options` should be object!"),b.featureStyle=[new c.default({image:new f.default({scale:.7,src:"//cdn.rawgit.com/jonataswalker/map-utils/master/images/marker.png"})})],new B(u));return s===m&&(e=l.els.container),q((i=this,a=[{element:e}],o=W(o=R),o=z(i,H()?Reflect.construct(o,a||[],W(i).constructor):o.apply(i,a))))instanceof R?(o.options=(t=b,r=u,n={},Object.keys(t).forEach(function(e){Object.prototype.hasOwnProperty.call(t,e)&&(n[e]=t[e])}),Object.keys(r).forEach(function(e){Object.prototype.hasOwnProperty.call(r,e)&&(n[e]=r[e])}),n),o.container=e,s===m&&(i=new U(q(o),l.els),o.layer=i.layer),q(o)):z(o,new R)}a=R,s=e.default;if("function"!=typeof s&&null!==s)throw new TypeError("Super expression must either be null or a function");return a.prototype=Object.create(s&&s.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),Object.defineProperty(a,"prototype",{writable:!1}),s&&Y(a,s),K(R,[{key:"getLayer",value:function(){return this.layer}},{key:"getSource",value:function(){return this.getLayer().getSource()}},{key:"setProvider",value:function(e){this.options.provider=e}},{key:"setProviderKey",value:function(e){this.options.key=e}}])},"object"==(void 0===r?"undefined":X(r))&&void 0!==t?t.exports=o(e("ol/control/Control"),e("ol/style/Style"),e("ol/style/Icon"),e("ol/layer/Vector"),e("ol/source/Vector"),e("ol/geom/Point"),e("ol/Feature"),e("ol/proj")):"function"==typeof define&&define.amd?define(["ol/control/Control","ol/style/Style","ol/style/Icon","ol/layer/Vector","ol/source/Vector","ol/geom/Point","ol/Feature","ol/proj"],o):(i="undefined"!=typeof globalThis?globalThis:self).Geocoder=o(i.ol.control.Control,i.ol.style.Style,i.ol.style.Icon,i.ol.layer.Vector,i.ol.source.Vector,i.ol.geom.Point,i.ol.Feature,i.ol.proj)},{"ol/Feature":82,"ol/control/Control":118,"ol/geom/Point":210,"ol/layer/Vector":273,"ol/proj":283,"ol/source/Vector":367,"ol/style/Icon":387,"ol/style/Style":393}],5:[function(e,t,r){"use strict";function Gt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o,a,s=[],u=!0,l=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=o.call(r)).done)&&(s.push(n.value),s.length!==t);u=!0);}catch(e){l=!0,i=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}(e,t)||s(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ut(e){return function(e){if(Array.isArray(e))return n(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||s(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Wt(n.key),n)}}function qt(e){return(qt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ht(e,t){var r,n,i,o,a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(a)return i=!(n=!0),{s:function(){a=a.call(e)},n:function(){var e=a.next();return n=e.done,e},e:function(e){i=!0,r=e},f:function(){try{n||null==a.return||a.return()}finally{if(i)throw r}}};if(Array.isArray(e)||(a=s(e))||t&&e&&"number"==typeof e.length)return a&&(e=a),o=0,{s:t=function(){},n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(e,t){var r;if(e)return"string"==typeof e?n(e,t):"Map"===(r="Object"===(r={}.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Wt(e){e=function(e,t){if("object"!=qt(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=qt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==qt(e)?e:e+""}function Yt(){Yt=function(){return a};var u,a={},e=Object.prototype,l=e.hasOwnProperty,c=Object.defineProperty||function(e,t,r){e[t]=r.value},t="function"==typeof Symbol?Symbol:{},n=t.iterator||"@@iterator",r=t.asyncIterator||"@@asyncIterator",i=t.toStringTag||"@@toStringTag";function o(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{o({},"")}catch(u){o=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var i,o,a,s,t=t&&t.prototype instanceof A?t:A,t=Object.create(t.prototype),n=new S(n||[]);return c(t,"_invoke",{value:(i=e,o=r,a=n,s=h,function(e,t){if(s===d)throw Error("Generator is already running");if(s===g){if("throw"===e)throw t;return{value:u,done:!0}}for(a.method=e,a.arg=t;;){var r=a.delegate;if(r){r=function e(t,r){var n=r.method,i=t.iterator[n];if(i===u)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=u,e(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;n=f(i,t.iterator,r.arg);if("throw"===n.type)return r.method="throw",r.arg=n.arg,r.delegate=null,y;i=n.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=u),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}(r,a);if(r){if(r===y)continue;return r}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(s===h)throw s=g,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);s=d;r=f(i,o,a);if("normal"===r.type){if(s=a.done?g:p,r.arg===y)continue;return{value:r.arg,done:a.done}}"throw"===r.type&&(s=g,a.method="throw",a.arg=r.arg)}})}),t}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}a.wrap=s;var h="suspendedStart",p="suspendedYield",d="executing",g="completed",y={};function A(){}function m(){}function v(){}var t={},b=(o(t,n,function(){return this}),Object.getPrototypeOf),b=b&&b(b(j([]))),_=(b&&b!==e&&l.call(b,n)&&(t=b),v.prototype=A.prototype=Object.create(t));function w(e){["next","throw","return"].forEach(function(t){o(e,t,function(e){return this._invoke(t,e)})})}function E(a,s){var t;c(this,"_invoke",{value:function(r,n){function e(){return new s(function(e,t){!function t(e,r,n,i){var o,e=f(a[e],a,r);if("throw"!==e.type)return(r=(o=e.arg).value)&&"object"==qt(r)&&l.call(r,"__await")?s.resolve(r.__await).then(function(e){t("next",e,n,i)},function(e){t("throw",e,n,i)}):s.resolve(r).then(function(e){o.value=e,n(o)},function(e){return t("throw",e,n,i)});i(e.arg)}(r,n,e,t)})}return t=t?t.then(e,e):e()}})}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function j(t){if(t||""===t){var r,e=t[n];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return r=-1,(e=function e(){for(;++r<t.length;)if(l.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=u,e.done=!0,e}).next=e}throw new TypeError(qt(t)+" is not iterable")}return c(_,"constructor",{value:m.prototype=v,configurable:!0}),c(v,"constructor",{value:m,configurable:!0}),m.displayName=o(v,i,"GeneratorFunction"),a.isGeneratorFunction=function(e){e="function"==typeof e&&e.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},a.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,o(e,i,"GeneratorFunction")),e.prototype=Object.create(_),e},a.awrap=function(e){return{__await:e}},w(E.prototype),o(E.prototype,r,function(){return this}),a.AsyncIterator=E,a.async=function(e,t,r,n,i){void 0===i&&(i=Promise);var o=new E(s(e,t,r,n),i);return a.isGeneratorFunction(t)?o:o.next().then(function(e){return e.done?e.value:o.next()})},w(_),o(_,i,"Generator"),o(_,n,function(){return this}),o(_,"toString",function(){return"[object Generator]"}),a.keys=function(e){var t,r=Object(e),n=[];for(t in r)n.push(t);return n.reverse(),function e(){for(;n.length;){var t=n.pop();if(t in r)return e.value=t,e.done=!1,e}return e.done=!0,e}},a.values=j,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=u,this.done=!1,this.delegate=null,this.method="next",this.arg=u,this.tryEntries.forEach(I),!e)for(var t in this)"t"===t.charAt(0)&&l.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=u)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(r){if(this.done)throw r;var n=this;function e(e,t){return o.type="throw",o.arg=r,n.next=e,t&&(n.method="next",n.arg=u),!!t}for(var t=this.tryEntries.length-1;0<=t;--t){var i=this.tryEntries[t],o=i.completion;if("root"===i.tryLoc)return e("end");if(i.tryLoc<=this.prev){var a=l.call(i,"catchLoc"),s=l.call(i,"finallyLoc");if(a&&s){if(this.prev<i.catchLoc)return e(i.catchLoc,!0);if(this.prev<i.finallyLoc)return e(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return e(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return e(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;0<=r;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&l.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}var o=(i=i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc?null:i)?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var r,n,i=this.tryEntries[t];if(i.tryLoc===e)return"throw"===(r=i.completion).type&&(n=r.arg,I(i)),n}throw Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:j(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=u),y}},a}!function(e){var D="The constructor property value is not an object",L="Attempting to access detached ArrayBuffer",Q="Cannot mix BigInt and other types, use explicit conversions",F="@@iterator property is not callable";function r(i){return function(e){for(var t=arguments.length,r=new Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return h(i,e,r)}}function t(e,t){return r(i(e,t).get)}function N(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return h(be,y,t)}var h=Reflect.apply,G=Reflect.construct,U=Reflect.defineProperty,z=Reflect.get,i=Reflect.getOwnPropertyDescriptor,q=Reflect.getPrototypeOf,H=Reflect.has,W=Reflect.ownKeys,Y=Reflect.set,V=Reflect.setPrototypeOf,K=Proxy,X=Number.EPSILON,J=Number.MAX_SAFE_INTEGER,Z=Number.isFinite,s=Number.isNaN,c=Symbol.iterator,$=Symbol.species,ee=Symbol.toStringTag,n=Symbol.for,f=Object,te=f.create,re=f.defineProperty,ne=f.freeze,ie=f.is,o=f.prototype,oe=o.__lookupGetter__?r(o.__lookupGetter__):function(e,t){if(null==e)throw m("Cannot convert undefined or null to object");var r=f(e);do{var n=i(r,t);if(void 0!==n)return a(n,"get")?n.get:void 0}while(null!==(r=q(r)))},a=f.hasOwn||r(o.hasOwnProperty),o=Array,ae=o.isArray,o=o.prototype,se=r(o.join),ue=r(o.push),le=r(o.toLocaleString),ce=o[c],fe=r(ce),he=Math.abs,pe=Math.trunc,de=ArrayBuffer,ge=de.isView,o=de.prototype,ye=r(o.slice),Ae=t(o,"byteLength"),me="undefined"!=typeof SharedArrayBuffer?SharedArrayBuffer:null,ve=me&&t(me.prototype,"byteLength"),o=q(Uint8Array),be=o.from,u=o.prototype,_e=u[c],we=r(u.keys),Ee=r(u.values),Ce=r(u.entries),Ie=r(u.set),Se=r(u.reverse),je=r(u.fill),xe=r(u.copyWithin),Oe=r(u.sort),Pe=r(u.slice),ke=r(u.subarray),p=t(u,"buffer"),d=t(u,"byteOffset"),g=t(u,"length"),Be=t(u,ee),Te=Uint8Array,y=Uint16Array,Me=Uint32Array,Re=Float32Array,A=q([][c]()),De=r(A.next),Le=r(Yt().mark(function e(){return Yt().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)})().next),Qe=q(A),Fe=DataView.prototype,Ne=r(Fe.getUint16),Ge=r(Fe.setUint16),m=TypeError,Ue=RangeError,Fe=WeakSet,l=Fe.prototype,ze=r(l.add),qe=r(l.has),l=WeakMap,v=l.prototype,He=r(v.get),We=r(v.has),Ye=r(v.set),Ve=new l,Ke=te(null,(v={next:{value:function(){var e=He(Ve,this);return De(e)}}},T={value:function(){return this}},(_=Wt(_=c))in v?Object.defineProperty(v,_,{value:T,enumerable:!0,configurable:!0,writable:!0}):v[_]=T,v));function b(e){var t;return e[c]===ce&&A.next===De?e:(t=te(Ke),Ye(Ve,t,fe(e)),t)}var Xe,Je=new l,Ze=te(Qe,{next:{value:function(){var e=He(Je,this);return Le(e)},writable:!0,configurable:!0}}),$e=Ht(W(A));try{for($e.s();!(Xe=$e.n()).done;){var et=Xe.value;"next"!==et&&re(Ze,et,i(A,et))}}catch(e){$e.e(e)}finally{$e.f()}function tt(e){var t=te(Ze);return Ye(Je,t,e),t}function rt(e){return null!==e&&"object"===qt(e)||"function"==typeof e}function nt(e){return null!==e&&"object"===qt(e)}function it(e){return void 0!==Be(e)}function ot(e){e=Be(e);return"BigInt64Array"===e||"BigUint64Array"===e}function at(e){if(null===me)return!1;try{return ve(e),!0}catch(e){return!1}}function st(e){return ae(e)&&e[c]===ce&&A.next===De}function ut(e){if("string"==typeof e)return e===(e=+e)+""&&Z(e)&&e===pe(e)}var lt=n("__Float16Array__"),ct=1/X,ft=6103515625e-14,ht=65504,pt=.0009765625*ft,dt=.0009765625*ct;function gt(e){var t,r,n,e=+e;return Z(e)&&0!=e?(t=0<e?1:-1,(r=he(e))<ft?t*(r/pt+ct-ct)*pt:ht<(n=(n=(1+dt)*r)-(n-r))||s(n)?1/0*t:t*n):e}for(var _=new de(4),yt=new Re(_),At=new Me(_),w=new y(512),E=new Te(512),C=0;C<256;++C){var I=C-127;I<-27?(w[C]=0,w[256|C]=32768,E[C]=24,E[256|C]=24):I<-14?(w[C]=1024>>-I-14,w[256|C]=1024>>-I-14|32768,E[C]=-I-1,E[256|C]=-I-1):I<=15?(w[C]=15+I<<10,w[256|C]=15+I<<10|32768,E[C]=13,E[256|C]=13):I<128?(w[C]=31744,w[256|C]=64512,E[C]=24,E[256|C]=24):(w[C]=31744,w[256|C]=64512,E[C]=13,E[256|C]=13)}function S(e){yt[0]=gt(e);var e=At[0],t=e>>23&511;return w[t]+((8388607&e)>>E[t])}for(var mt=new Me(2048),vt=1;vt<1024;++vt){for(var bt=vt<<13,_t=0;0==(8388608&bt);)bt<<=1,_t-=8388608;bt&=-8388609,_t+=947912704,mt[vt]=bt|_t}for(var wt=1024;wt<2048;++wt)mt[wt]=939524096+(wt-1024<<13);for(var j=new Me(64),Et=1;Et<31;++Et)j[Et]=Et<<23;j[31]=1199570944,j[32]=2147483648;for(var Ct=33;Ct<63;++Ct)j[Ct]=2147483648+(Ct-32<<23);j[63]=3347054592;for(var It=new y(64),St=1;St<64;++St)32!==St&&(It[St]=1024);function x(e){var t=e>>10;return At[0]=mt[It[t]+(1023&e)]+j[t],yt[0]}function O(e){e=+e;return s(e)||0==e?0:pe(e)}function jt(e){e=O(e);return e<0?0:e<J?e:J}function xt(e,t){if(!rt(e))throw m("This is not an object");var e=e.constructor;if(void 0===e)return t;if(rt(e))return null==(e=e[$])?t:e;throw m(D)}function Ot(e){if(!at(e)){try{return ye(e,0,0),0}catch(e){}return 1}}function Pt(e,t){var r=s(e),n=s(t);if(!r||!n){if(r)return 1;if(n)return-1;if(e<t)return-1;if(t<e)return 1;if(0===e&&0===t){r=ie(e,0),n=ie(t,0);if(!r&&n)return-1;if(r&&!n)return 1}}return 0}var kt=new l;function P(e){return We(kt,e)||!ge(e)&&function(e){if(!nt(e))return!1;e=q(e);if(!nt(e))return!1;e=e.constructor;if(void 0===e)return!1;if(rt(e))return H(e,lt);throw m(D)}(e)}function k(e){if(!P(e))throw m("This is not a Float16Array object")}function Bt(e,t){var r=P(e),n=it(e);if(!r&&!n)throw m("Species constructor didn't return TypedArray object");if("number"==typeof t&&(r?(n=B(e),g(n)):g(e))<t)throw m("Derived constructor created TypedArray object which was too small length");if(ot(e))throw m(Q)}function B(e){var t=He(kt,e);if(void 0!==t){if(Ot(p(t)))throw m(L);return t}t=e.buffer;if(Ot(t))throw m(L);t=G(M,[t,e.byteOffset,e.length],e.constructor);return He(kt,t)}function Tt(e){for(var t=g(e),r=[],n=0;n<t;++n)r[n]=x(e[n]);return r}var Mt,Rt=new Fe,Dt=Ht(W(u));try{for(Dt.s();!(Mt=Dt.n()).done;){var Lt,Qt=Mt.value;Qt!==ee&&(Lt=i(u,Qt),a(Lt,"get"))&&"function"==typeof Lt.get&&ze(Rt,Lt.get)}}catch(e){Dt.e(e)}finally{Dt.f()}var T,Ft=ne({get:function(e,t,r){return ut(t)&&a(e,t)?x(z(e,t)):qe(Rt,oe(e,t))?z(e,t):z(e,t,r)},set:function(e,t,r,n){return ut(t)&&a(e,t)?Y(e,t,S(r)):Y(e,t,r,n)},getOwnPropertyDescriptor:function(e,t){var r;return ut(t)&&a(e,t)?((r=i(e,t)).value=x(r.value),r):i(e,t)},defineProperty:function(e,t,r){return ut(t)&&a(e,t)&&a(r,"value")&&(r.value=S(r.value)),U(e,t,r)}}),M=(T=R,v=[{key:"from",value:function(e){var t,r,i;if(!H(this,lt))throw m("This constructor is not a subclass of Float16Array");if(this===R)return P(e)&&0==(arguments.length<=1?0:arguments.length-1)?(n=B(e),n=new y(p(n),d(n),g(n)),new R(p(Pe(n)))):0==(arguments.length<=1?0:arguments.length-1)?new R(p(N(e,S))):(i=arguments.length<=1?void 0:arguments[1],new R(p(N(e,function(e){for(var t=arguments.length,r=new Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return S(h(i,this,[e].concat(Ut(b(r)))))},arguments.length<=2?void 0:arguments[2]))));var n=e[c];if(null!=n&&"function"!=typeof n)throw m(F);if(null!=n)r=st(e)?(t=e).length:it(n=e)&&n[c]===_e&&A.next===De?g(t=e):(t=Ut(e)).length;else{if(null==e)throw m("Cannot convert undefined or null to object");r=jt((t=f(e)).length)}var o=new this(r);if(0==(arguments.length<=1?0:arguments.length-1))for(var a=0;a<r;++a)o[a]=t[a];else for(var s=arguments.length<=1?void 0:arguments[1],u=arguments.length<=2?void 0:arguments[2],l=0;l<r;++l)o[l]=h(s,u,[t[l],l]);return o}},{key:"of",value:function(){if(!H(this,lt))throw m("This constructor is not a subclass of Float16Array");var e=arguments.length;if(this===R){for(var t=new R(e),r=B(t),n=0;n<e;++n)r[n]=S(n<0||arguments.length<=n?void 0:arguments[n]);return t}for(var i=new this(e),o=0;o<e;++o)i[o]=o<0||arguments.length<=o?void 0:arguments[o];return i}}],(Qe=[{key:"keys",value:function(){k(this);var e=B(this);return we(e)}},{key:"values",value:function(){k(this);var n=B(this);return tt(Yt().mark(function e(){var t,r;return Yt().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=Ht(Ee(n)),e.prev=1,t.s();case 3:if((r=t.n()).done){e.next=9;break}return r=r.value,e.next=7,x(r);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),t.e(e.t0);case 14:return e.prev=14,t.f(),e.finish(14);case 17:case"end":return e.stop()}},e,null,[[1,11,14,17]])})())}},{key:"entries",value:function(){k(this);var i=B(this);return tt(Yt().mark(function e(){var t,r,n;return Yt().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=Ht(Ce(i)),e.prev=1,t.s();case 3:if((n=t.n()).done){e.next=9;break}return n=Gt(n.value,2),r=n[0],n=n[1],e.next=7,[r,x(n)];case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),t.e(e.t0);case 14:return e.prev=14,t.f(),e.finish(14);case 17:case"end":return e.stop()}},e,null,[[1,11,14,17]])})())}},{key:"at",value:function(e){k(this);var t=B(this),r=g(t),e=O(e),e=0<=e?e:r+e;if(!(e<0||r<=e))return x(t[e])}},{key:"with",value:function(e,t){k(this);var r=B(this),n=g(r),e=O(e),e=0<=e?e:n+e,t=+t;if(e<0||n<=e)throw Ue("Offset is out of bounds");n=new y(p(r),d(r),g(r)),r=new R(p(Pe(n)));return B(r)[e]=S(t),r}},{key:"map",value:function(e){k(this);var t=B(this),r=g(t),n=arguments.length<=1?void 0:arguments[1],i=xt(t,R);if(i===R){for(var o=new R(r),a=B(o),s=0;s<r;++s){var u=x(t[s]);a[s]=S(h(e,n,[u,s,this]))}return o}var l=new i(r);Bt(l,r);for(var c=0;c<r;++c){var f=x(t[c]);l[c]=h(e,n,[f,c,this])}return l}},{key:"filter",value:function(e){k(this);for(var t=B(this),r=g(t),n=arguments.length<=1?void 0:arguments[1],i=[],o=0;o<r;++o){var a=x(t[o]);h(e,n,[a,o,this])&&ue(i,a)}var s=new(xt(t,R))(i);return Bt(s),s}},{key:"reduce",value:function(e){k(this);var t,r=B(this),n=g(r);if(0===n&&0==(arguments.length<=1?0:arguments.length-1))throw m("Reduce of empty array with no initial value");for(var i=0==(arguments.length<=1?0:arguments.length-1)?(t=x(r[0]),1):(t=arguments.length<=1?void 0:arguments[1],0);i<n;++i)t=e(t,x(r[i]),i,this);return t}},{key:"reduceRight",value:function(e){k(this);var t,r=B(this),n=g(r);if(0===n&&0==(arguments.length<=1?0:arguments.length-1))throw m("Reduce of empty array with no initial value");for(var i=0==(arguments.length<=1?0:arguments.length-1)?(t=x(r[n-1]),n-2):(t=arguments.length<=1?void 0:arguments[1],n-1);0<=i;--i)t=e(t,x(r[i]),i,this);return t}},{key:"forEach",value:function(e){k(this);for(var t=B(this),r=g(t),n=arguments.length<=1?void 0:arguments[1],i=0;i<r;++i)h(e,n,[x(t[i]),i,this])}},{key:"find",value:function(e){k(this);for(var t=B(this),r=g(t),n=arguments.length<=1?void 0:arguments[1],i=0;i<r;++i){var o=x(t[i]);if(h(e,n,[o,i,this]))return o}}},{key:"findIndex",value:function(e){k(this);for(var t=B(this),r=g(t),n=arguments.length<=1?void 0:arguments[1],i=0;i<r;++i){var o=x(t[i]);if(h(e,n,[o,i,this]))return i}return-1}},{key:"findLast",value:function(e){k(this);for(var t=B(this),r=g(t),n=arguments.length<=1?void 0:arguments[1],i=r-1;0<=i;--i){var o=x(t[i]);if(h(e,n,[o,i,this]))return o}}},{key:"findLastIndex",value:function(e){k(this);for(var t=B(this),r=g(t),n=arguments.length<=1?void 0:arguments[1],i=r-1;0<=i;--i){var o=x(t[i]);if(h(e,n,[o,i,this]))return i}return-1}},{key:"every",value:function(e){k(this);for(var t=B(this),r=g(t),n=arguments.length<=1?void 0:arguments[1],i=0;i<r;++i)if(!h(e,n,[x(t[i]),i,this]))return!1;return!0}},{key:"some",value:function(e){k(this);for(var t=B(this),r=g(t),n=arguments.length<=1?void 0:arguments[1],i=0;i<r;++i)if(h(e,n,[x(t[i]),i,this]))return!0;return!1}},{key:"set",value:function(e){k(this);var t=B(this),r=O(arguments.length<=1?void 0:arguments[1]);if(r<0)throw Ue("Offset is out of bounds");if(null==e)throw m("Cannot convert undefined or null to object");if(ot(e))throw m(Q);if(P(e))return Ie(B(this),B(e),r);if(it(e)&&Ot(p(e)))throw m(L);var n=g(t),i=f(e),o=jt(i.length);if(r===1/0||n<o+r)throw Ue("Offset is out of bounds");for(var a=0;a<o;++a)t[a+r]=S(i[a])}},{key:"reverse",value:function(){k(this);var e=B(this);return Se(e),this}},{key:"toReversed",value:function(){k(this);var e=B(this),e=new y(p(e),d(e),g(e)),e=new R(p(Pe(e))),t=B(e);return Se(t),e}},{key:"fill",value:function(e){k(this);for(var t=B(this),r=arguments.length,n=new Array(1<r?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return je.apply(void 0,[t,S(e)].concat(Ut(b(n)))),this}},{key:"copyWithin",value:function(e,t){k(this);for(var r=B(this),n=arguments.length,i=new Array(2<n?n-2:0),o=2;o<n;o++)i[o-2]=arguments[o];return xe.apply(void 0,[r,e,t].concat(Ut(b(i)))),this}},{key:"sort",value:function(e){k(this);var t=B(this),r=void 0!==e?e:Pt;return Oe(t,function(e,t){return r(x(e),x(t))}),this}},{key:"toSorted",value:function(e){k(this);var t=B(this);if(void 0!==e&&"function"!=typeof e)throw new m("The comparison function must be either a function or undefined");var r=void 0!==e?e:Pt,e=new y(p(t),d(t),g(t)),t=new R(p(Pe(e))),e=B(t);return Oe(e,function(e,t){return r(x(e),x(t))}),t}},{key:"slice",value:function(e,t){k(this);var r=B(this),n=xt(r,R);if(n===R)return a=new y(p(r),d(r),g(r)),new R(p(Pe(a,e,t)));var i,o,a=g(r),e=O(e),t=void 0===t?a:O(t),t=0<(o=t===-1/0?0:t<0?0<a+t?a+t:0:a<t?a:t)-(i=e===-1/0?0:e<0?0<a+e?a+e:0:a<e?a:e)?o-i:0,s=new n(t);if(Bt(s,t),0!=t){if(Ot(p(r)))throw m(L);for(var u=0;i<o;)s[u]=x(r[i]),++i,++u}return s}},{key:"subarray",value:function(e,t){k(this);var r=B(this),n=xt(r,R),r=new y(p(r),d(r),g(r)),r=ke(r,e,t),e=new n(p(r),d(r),g(r));return Bt(e),e}},{key:"indexOf",value:function(e){k(this);var t=B(this),r=g(t),n=O(arguments.length<=1?void 0:arguments[1]);if(n!==1/0)for(var i=n=n<0&&(n+=r)<0?0:n;i<r;++i)if(a(t,i)&&x(t[i])===e)return i;return-1}},{key:"lastIndexOf",value:function(e){k(this);var t=B(this),r=g(t),n=1<=(arguments.length<=1?0:arguments.length-1)?O(arguments.length<=1?void 0:arguments[1]):r-1;if(n!==-1/0){0<=n?n=n<r-1?n:r-1:n+=r;for(var i=n;0<=i;--i)if(a(t,i)&&x(t[i])===e)return i}return-1}},{key:"includes",value:function(e){k(this);var t=B(this),r=g(t),n=O(arguments.length<=1?void 0:arguments[1]);if(n!==1/0){n<0&&(n+=r)<0&&(n=0);for(var i=s(e),o=n;o<r;++o){var a=x(t[o]);if(i&&s(a))return!0;if(a===e)return!0}}return!1}},{key:"join",value:function(e){k(this);var t=Tt(B(this));return se(t,e)}},{key:"toLocaleString",value:function(){k(this);for(var e=Tt(B(this)),t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return le.apply(void 0,[e].concat(Ut(b(r))))}},{key:ee,get:function(){if(P(this))return"Float16Array"}}])&&zt(T.prototype,Qe),v&&zt(T,v),Object.defineProperty(T,"prototype",{writable:!1}),T);function R(e,t,r){var n,i,o=this,a=R;if(!(o instanceof a))throw new TypeError("Cannot call a class as a function");if(P(e))s=G(y,[B(e)],this instanceof R?this.constructor:void 0);else if(!rt(e)||function(e){try{return Ae(e),1}catch(e){}}(o=e)||at(o))s=G(y,arguments,this instanceof R?this.constructor:void 0);else{if(it(e)){if(i=g(n=e),Ot(p(e)))throw m(L);if(ot(e))throw m(Q);var a=new de(2*i),s=G(y,[a],this instanceof R?this.constructor:void 0)}else{o=e[c];if(null!=o&&"function"!=typeof o)throw m(F);i=null!=o?(st(e)?n=e:n=Ut(e)).length:jt((n=e).length),s=G(y,[i],this instanceof R?this.constructor:void 0)}for(var u=0;u<i;++u)s[u]=S(n[u])}a=new K(s,Ft);return Ye(kt,a,s),a}re(M,"BYTES_PER_ELEMENT",{value:2}),re(M,lt,{}),V(M,o);n=M.prototype;function Nt(e){return gt(e)}re(n,"BYTES_PER_ELEMENT",{value:2}),re(n,c,{value:n.values,writable:!0,configurable:!0}),V(n,u),e.Float16Array=M,e.f16round=Nt,e.getFloat16=function(e,t){for(var r=arguments.length,n=new Array(2<r?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i];return x(Ne.apply(void 0,[e,t].concat(Ut(b(n)))))},e.hfround=Nt,e.isFloat16Array=P,e.isTypedArray=function(e){return it(e)||P(e)},e.setFloat16=function(e,t,r){for(var n=arguments.length,i=new Array(3<n?n-3:0),o=3;o<n;o++)i[o-3]=arguments[o];return Ge.apply(void 0,[e,t,S(r)].concat(Ut(b(i))))},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}({})},{}],6:[function(e,t,r){"use strict";r.byteLength=function(e){var e=c(e),t=e[0],e=e[1];return 3*(t+e)/4-e},r.toByteArray=function(e){var t,r,n=c(e),i=n[0],n=n[1],o=new l(function(e,t){return 3*(e+t)/4-t}(i,n)),a=0,s=0<n?i-4:i;for(r=0;r<s;r+=4)t=u[e.charCodeAt(r)]<<18|u[e.charCodeAt(r+1)]<<12|u[e.charCodeAt(r+2)]<<6|u[e.charCodeAt(r+3)],o[a++]=t>>16&255,o[a++]=t>>8&255,o[a++]=255&t;return 2===n&&(t=u[e.charCodeAt(r)]<<2|u[e.charCodeAt(r+1)]>>4,o[a++]=255&t),1===n&&(t=u[e.charCodeAt(r)]<<10|u[e.charCodeAt(r+1)]<<4|u[e.charCodeAt(r+2)]>>2,o[a++]=t>>8&255,o[a++]=255&t),o},r.fromByteArray=function(e){for(var t,r=e.length,n=r%3,i=[],o=0,a=r-n;o<a;o+=16383)i.push(function(e,t,r){for(var n,i=[],o=t;o<r;o+=3)n=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]),i.push(function(e){return s[e>>18&63]+s[e>>12&63]+s[e>>6&63]+s[63&e]}(n));return i.join("")}(e,o,a<o+16383?a:o+16383));return 1==n?(t=e[r-1],i.push(s[t>>2]+s[t<<4&63]+"==")):2==n&&(t=(e[r-2]<<8)+e[r-1],i.push(s[t>>10]+s[t>>4&63]+s[t<<2&63]+"=")),i.join("")};for(var s=[],u=[],l="undefined"!=typeof Uint8Array?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,o=n.length;i<o;++i)s[i]=n[i],u[n.charCodeAt(i)]=i;function c(e){var t=e.length;if(0<t%4)throw new Error("Invalid string. Length must be a multiple of 4");e=e.indexOf("=");return[e=-1===e?t:e,e===t?0:4-e%4]}u["-".charCodeAt(0)]=62,u["_".charCodeAt(0)]=63},{}],7:[function(e,t,r){},{}],8:[function(e,t,r){},{}],9:[function(B,e,T){!function(e){!function(){"use strict";function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var C=B("base64-js"),o=B("ieee754"),t=(T.Buffer=h,T.SlowBuffer=function(e){return h.alloc(+(e=+e!=e?0:e))},T.INSPECT_MAX_BYTES=50,2147483647);function u(e){if(t<e)throw new RangeError('The value "'+e+'" is invalid for option "size"');e=new Uint8Array(e);return e.__proto__=h.prototype,e}function h(e,t,r){if("number"!=typeof e)return n(e,t,r);if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return a(e)}function n(e,t,r){if("string"==typeof e){var n=e,i=t;if(h.isEncoding(i="string"==typeof i&&""!==i?i:"utf8"))return o=0|p(n,i),a=u(o),a=(n=a.write(n,i))!==o?a.slice(0,n):a;throw new TypeError("Unknown encoding: "+i)}if(ArrayBuffer.isView(e))return l(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+f(e));if(P(e,ArrayBuffer)||e&&P(e.buffer,ArrayBuffer)){var o=e,n=t,a=r;if(n<0||o.byteLength<n)throw new RangeError('"offset" is outside of buffer bounds');if(o.byteLength<n+(a||0))throw new RangeError('"length" is outside of buffer bounds');return(o=void 0===n&&void 0===a?new Uint8Array(o):void 0===a?new Uint8Array(o,n):new Uint8Array(o,n,a)).__proto__=h.prototype,o}if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');i=e.valueOf&&e.valueOf();if(null!=i&&i!==e)return h.from(i,t,r);var s=function(e){{var t,r;if(h.isBuffer(e))return t=0|c(e.length),0!==(r=u(t)).length&&e.copy(r,0,0,t),r}return void 0!==e.length?"number"!=typeof e.length||k(e.length)?u(0):l(e):"Buffer"===e.type&&Array.isArray(e.data)?l(e.data):void 0}(e);if(s)return s;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return h.from(e[Symbol.toPrimitive]("string"),t,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+f(e))}function i(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function a(e){return i(e),u(e<0?0:0|c(e))}function l(e){for(var t=e.length<0?0:0|c(e.length),r=u(t),n=0;n<t;n+=1)r[n]=255&e[n];return r}function c(e){if(t<=e)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+t.toString(16)+" bytes");return 0|e}function p(e,t){if(h.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||P(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+f(e));var r=e.length,n=2<arguments.length&&!0===arguments[2];if(!n&&0===r)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return j(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return x(e).length;default:if(i)return n?-1:j(e).length;t=(""+t).toLowerCase(),i=!0}}function r(e,t,r){var n,i=!1;if((t=void 0===t||t<0?0:t)>this.length)return"";if((r=void 0===r||r>this.length?this.length:r)<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e=e||"utf8";;)switch(e){case"hex":var o=this,a=t,s=r,u=o.length;(!s||s<0||u<s)&&(s=u);for(var l="",c=a=!a||a<0?0:a;c<s;++c)l+=function(e){return e<16?"0"+e.toString(16):e.toString(16)}(o[c]);return l;case"utf8":case"utf-8":return I(this,t,r);case"ascii":var f=this,u=t,h=r,p="";h=Math.min(f.length,h);for(var d=u;d<h;++d)p+=String.fromCharCode(127&f[d]);return p;case"latin1":case"binary":var g=this,a=t,y=r,A="";y=Math.min(g.length,y);for(var m=a;m<y;++m)A+=String.fromCharCode(g[m]);return A;case"base64":return v=this,n=r,0===(b=t)&&n===v.length?C.fromByteArray(v):C.fromByteArray(v.slice(b,n));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":for(var v=t,b=r,_=this.slice(v,b),w="",E=0;E<_.length;E+=2)w+=String.fromCharCode(_[E]+256*_[E+1]);return w;default:if(i)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),i=!0}}function s(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function d(e,t,r,n,i){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):2147483647<r?r=2147483647:r<-2147483648&&(r=-2147483648),(r=(r=k(r=+r)?i?0:e.length-1:r)<0?e.length+r:r)>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof t&&(t=h.from(t,n)),h.isBuffer(t))return 0===t.length?-1:g(e,t,r,n,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?(i?Uint8Array.prototype.indexOf:Uint8Array.prototype.lastIndexOf).call(e,t,r):g(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function g(e,t,r,n,i){var o=1,a=e.length,s=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;a/=o=2,s/=2,r/=2}function u(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(i)for(var l=-1,c=r;c<a;c++)if(u(e,c)===u(t,-1===l?0:c-l)){if(c-(l=-1===l?c:l)+1===s)return l*o}else-1!==l&&(c-=c-l),l=-1;else for(c=r=a<r+s?a-s:r;0<=c;c--){for(var f=!0,h=0;h<s;h++)if(u(e,c+h)!==u(t,h)){f=!1;break}if(f)return c}return-1}function y(e,t,r,n){return O(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function A(e,t,r,n){return O(function(e,t){for(var r,n,i=[],o=0;o<e.length&&!((t-=2)<0);++o)n=(r=e.charCodeAt(o))>>8,i.push(r%256),i.push(n);return i}(t,e.length-r),e,r,n)}function I(e,t,r){r=Math.min(e.length,r);for(var n=[],i=t;i<r;){var o,a,s,u,l=e[i],c=null,f=239<l?4:223<l?3:191<l?2:1;if(i+f<=r)switch(f){case 1:l<128&&(c=l);break;case 2:128==(192&(o=e[i+1]))&&127<(u=(31&l)<<6|63&o)&&(c=u);break;case 3:o=e[i+1],a=e[i+2],128==(192&o)&&128==(192&a)&&2047<(u=(15&l)<<12|(63&o)<<6|63&a)&&(u<55296||57343<u)&&(c=u);break;case 4:o=e[i+1],a=e[i+2],s=e[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&65535<(u=(15&l)<<18|(63&o)<<12|(63&a)<<6|63&s)&&u<1114112&&(c=u)}null===c?(c=65533,f=1):65535<c&&(n.push((c-=65536)>>>10&1023|55296),c=56320|1023&c),n.push(c),i+=f}var h=n,p=h.length;if(p<=m)return String.fromCharCode.apply(String,h);for(var d="",g=0;g<p;)d+=String.fromCharCode.apply(String,h.slice(g,g+=m));return d}T.kMaxLength=t,(h.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()}catch(e){return!1}}())||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(h.prototype,"parent",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.buffer}}),Object.defineProperty(h.prototype,"offset",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&h[Symbol.species]===h&&Object.defineProperty(h,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),h.poolSize=8192,h.from=n,h.prototype.__proto__=Uint8Array.prototype,h.__proto__=Uint8Array,h.alloc=function(e,t,r){return t=t,r=r,i(e=e),!(e<=0)&&void 0!==t?"string"==typeof r?u(e).fill(t,r):u(e).fill(t):u(e)},h.allocUnsafe=a,h.allocUnsafeSlow=a,h.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==h.prototype},h.compare=function(e,t){if(P(e,Uint8Array)&&(e=h.from(e,e.offset,e.byteLength)),P(t,Uint8Array)&&(t=h.from(t,t.offset,t.byteLength)),!h.isBuffer(e)||!h.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var r=e.length,n=t.length,i=0,o=Math.min(r,n);i<o;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},h.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},h.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return h.alloc(0);if(void 0===t)for(i=t=0;i<e.length;++i)t+=e[i].length;for(var r=h.allocUnsafe(t),n=0,i=0;i<e.length;++i){var o=e[i];if(P(o,Uint8Array)&&(o=h.from(o)),!h.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,n),n+=o.length}return r},h.byteLength=p,h.prototype._isBuffer=!0,h.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)s(this,t,t+1);return this},h.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)s(this,t,t+3),s(this,t+1,t+2);return this},h.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)s(this,t,t+7),s(this,t+1,t+6),s(this,t+2,t+5),s(this,t+3,t+4);return this},h.prototype.toLocaleString=h.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?I(this,0,e):r.apply(this,arguments)},h.prototype.equals=function(e){if(h.isBuffer(e))return this===e||0===h.compare(this,e);throw new TypeError("Argument must be a Buffer")},h.prototype.inspect=function(){var e="",t=T.INSPECT_MAX_BYTES,e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim();return this.length>t&&(e+=" ... "),"<Buffer "+e+">"},h.prototype.compare=function(e,t,r,n,i){if(P(e,Uint8Array)&&(e=h.from(e,e.offset,e.byteLength)),!h.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+f(e));if(void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),(t=void 0===t?0:t)<0||r>e.length||n<0||i>this.length)throw new RangeError("out of range index");if(i<=n&&r<=t)return 0;if(i<=n)return-1;if(r<=t)return 1;if(this===e)return 0;for(var o=(i>>>=0)-(n>>>=0),a=(r>>>=0)-(t>>>=0),s=Math.min(o,a),u=this.slice(n,i),l=e.slice(t,r),c=0;c<s;++c)if(u[c]!==l[c]){o=u[c],a=l[c];break}return o<a?-1:a<o?1:0},h.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},h.prototype.indexOf=function(e,t,r){return d(this,e,t,r,!0)},h.prototype.lastIndexOf=function(e,t,r){return d(this,e,t,r,!1)},h.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-t;if((void 0===r||i<r)&&(r=i),0<e.length&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n=n||"utf8";for(var o,a,s,u=!1;;)switch(n){case"hex":var l=this,c=e,f=t,h=r,p=(f=Number(f)||0,l.length-f);(!h||(h=Number(h))>p)&&(h=p),(p=c.length)/2<h&&(h=p/2);for(var d=0;d<h;++d){var g=parseInt(c.substr(2*d,2),16);if(k(g))return d;l[f+d]=g}return d;case"utf8":case"utf-8":return p=t,s=r,O(j(e,(a=this).length-p),a,p,s);case"ascii":return y(this,e,t,r);case"latin1":case"binary":return y(this,e,t,r);case"base64":return a=this,s=t,o=r,O(x(e),a,s,o);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,e,t,r);default:if(u)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),u=!0}},h.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var m=4096;function v(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(r<e+t)throw new RangeError("Trying to access beyond buffer length")}function b(e,t,r,n,i,o){if(!h.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(i<t||t<o)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function _(e,t,r,n){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function w(e,t,r,n,i){return t=+t,r>>>=0,i||_(e,0,r,4),o.write(e,t,r,n,23,4),r+4}function E(e,t,r,n,i){return t=+t,r>>>=0,i||_(e,0,r,8),o.write(e,t,r,n,52,8),r+8}h.prototype.slice=function(e,t){var r=this.length,r=((e=~~e)<0?(e+=r)<0&&(e=0):r<e&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):r<t&&(t=r),t<e&&(t=e),this.subarray(e,t));return r.__proto__=h.prototype,r},h.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||v(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return n},h.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||v(e,t,this.length);for(var n=this[e+--t],i=1;0<t&&(i*=256);)n+=this[e+--t]*i;return n},h.prototype.readUInt8=function(e,t){return e>>>=0,t||v(e,1,this.length),this[e]},h.prototype.readUInt16LE=function(e,t){return e>>>=0,t||v(e,2,this.length),this[e]|this[e+1]<<8},h.prototype.readUInt16BE=function(e,t){return e>>>=0,t||v(e,2,this.length),this[e]<<8|this[e+1]},h.prototype.readUInt32LE=function(e,t){return e>>>=0,t||v(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},h.prototype.readUInt32BE=function(e,t){return e>>>=0,t||v(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},h.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||v(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*t)),n},h.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||v(e,t,this.length);for(var n=t,i=1,o=this[e+--n];0<n&&(i*=256);)o+=this[e+--n]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},h.prototype.readInt8=function(e,t){return e>>>=0,t||v(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},h.prototype.readInt16LE=function(e,t){e>>>=0,t||v(e,2,this.length);t=this[e]|this[e+1]<<8;return 32768&t?4294901760|t:t},h.prototype.readInt16BE=function(e,t){e>>>=0,t||v(e,2,this.length);t=this[e+1]|this[e]<<8;return 32768&t?4294901760|t:t},h.prototype.readInt32LE=function(e,t){return e>>>=0,t||v(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},h.prototype.readInt32BE=function(e,t){return e>>>=0,t||v(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},h.prototype.readFloatLE=function(e,t){return e>>>=0,t||v(e,4,this.length),o.read(this,e,!0,23,4)},h.prototype.readFloatBE=function(e,t){return e>>>=0,t||v(e,4,this.length),o.read(this,e,!1,23,4)},h.prototype.readDoubleLE=function(e,t){return e>>>=0,t||v(e,8,this.length),o.read(this,e,!0,52,8)},h.prototype.readDoubleBE=function(e,t){return e>>>=0,t||v(e,8,this.length),o.read(this,e,!1,52,8)},h.prototype.writeUIntLE=function(e,t,r,n){e=+e,t>>>=0,r>>>=0,n||b(this,e,t,r,Math.pow(2,8*r)-1,0);var i=1,o=0;for(this[t]=255&e;++o<r&&(i*=256);)this[t+o]=e/i&255;return t+r},h.prototype.writeUIntBE=function(e,t,r,n){e=+e,t>>>=0,r>>>=0,n||b(this,e,t,r,Math.pow(2,8*r)-1,0);var i=r-1,o=1;for(this[t+i]=255&e;0<=--i&&(o*=256);)this[t+i]=e/o&255;return t+r},h.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||b(this,e,t,1,255,0),this[t]=255&e,t+1},h.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||b(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},h.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||b(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},h.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||b(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},h.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||b(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},h.prototype.writeIntLE=function(e,t,r,n){e=+e,t>>>=0,n||b(this,e,t,r,(n=Math.pow(2,8*r-1))-1,-n);var i=0,o=1,a=0;for(this[t]=255&e;++i<r&&(o*=256);)e<0&&0===a&&0!==this[t+i-1]&&(a=1),this[t+i]=(e/o>>0)-a&255;return t+r},h.prototype.writeIntBE=function(e,t,r,n){e=+e,t>>>=0,n||b(this,e,t,r,(n=Math.pow(2,8*r-1))-1,-n);var i=r-1,o=1,a=0;for(this[t+i]=255&e;0<=--i&&(o*=256);)e<0&&0===a&&0!==this[t+i+1]&&(a=1),this[t+i]=(e/o>>0)-a&255;return t+r},h.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||b(this,e,t,1,127,-128),this[t]=255&(e=e<0?255+e+1:e),t+1},h.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||b(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},h.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||b(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},h.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||b(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},h.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||b(this,e,t,4,2147483647,-2147483648),this[t]=(e=e<0?4294967295+e+1:e)>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},h.prototype.writeFloatLE=function(e,t,r){return w(this,e,t,!0,r)},h.prototype.writeFloatBE=function(e,t,r){return w(this,e,t,!1,r)},h.prototype.writeDoubleLE=function(e,t,r){return E(this,e,t,!0,r)},h.prototype.writeDoubleBE=function(e,t,r){return E(this,e,t,!1,r)},h.prototype.copy=function(e,t,r,n){if(!h.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r=r||0,n||0===n||(n=this.length),t>=e.length&&(t=e.length),(n=0<n&&n<r?r:n)===r)return 0;if(0===e.length||0===this.length)return 0;if((t=t||0)<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length);var i=(n=e.length-t<n-r?e.length-t+r:n)-r;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(t,r,n);else if(this===e&&r<t&&t<n)for(var o=i-1;0<=o;--o)e[o+t]=this[o+r];else Uint8Array.prototype.set.call(e,this.subarray(r,n),t);return i},h.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!h.isEncoding(n))throw new TypeError("Unknown encoding: "+n);var i;1===e.length&&(i=e.charCodeAt(0),"utf8"===n&&i<128||"latin1"===n)&&(e=i)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");var o;if(!(r<=t))if(t>>>=0,r=void 0===r?this.length:r>>>0,"number"==typeof(e=e||0))for(o=t;o<r;++o)this[o]=e;else{var a=h.isBuffer(e)?e:h.from(e,n),s=a.length;if(0===s)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<r-t;++o)this[o+t]=a[o%s]}return this};var S=/[^+/0-9A-Za-z-_]/g;function j(e,t){var r;t=t||1/0;for(var n=e.length,i=null,o=[],a=0;a<n;++a){if(55295<(r=e.charCodeAt(a))&&r<57344){if(!i){if(56319<r){-1<(t-=3)&&o.push(239,191,189);continue}if(a+1===n){-1<(t-=3)&&o.push(239,191,189);continue}i=r;continue}if(r<56320){-1<(t-=3)&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&-1<(t-=3)&&o.push(239,191,189);if(i=null,r<128){if(--t<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function x(e){return C.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(S,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function O(e,t,r,n){for(var i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}function P(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function k(e){return e!=e}}.call(this)}.call(this,B("buffer").Buffer)},{"base64-js":6,buffer:9,ieee754:71}],10:[function(e,t,r){"use strict";t.exports={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"}},{}],11:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=(e=e("color-name"))&&e.__esModule?e:{default:e};r.default=function(e){var r,t=[],n=1;if("number"==typeof e)return{space:"rgb",values:[e>>>16,(65280&e)>>>8,255&e],alpha:1};if("number"==typeof e)return{space:"rgb",values:[e>>>16,(65280&e)>>>8,255&e],alpha:1};{var i,o;e=String(e).toLowerCase(),a.default[e]?(t=a.default[e].slice(),r="rgb"):"transparent"===e?(r="rgb",t=[n=0,0,0]):"#"===e[0]?(o=e.slice(1),i=o.length,n=1,i<=4?(t=[parseInt(o[0]+o[0],16),parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16)],4===i&&(n=parseInt(o[3]+o[3],16)/255)):(t=[parseInt(o[0]+o[1],16),parseInt(o[2]+o[3],16),parseInt(o[4]+o[5],16)],8===i&&(n=parseInt(o[6]+o[7],16)/255)),t[0]||(t[0]=0),t[1]||(t[1]=0),t[2]||(t[2]=0),r="rgb"):(i=/^((?:rgba?|hs[lvb]a?|hwba?|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms|oklch|oklab|color))\s*\(([^\)]*)\)/.exec(e))?(o=i[1],o="cmyk"===(r=o.replace(/a$/,""))?4:"gray"===r?1:3,t=i[2].trim().split(/\s*[,\/]\s*|\s+/),"color"===r&&(r=t.shift()),n=(t=t.map(function(e,t){if("%"===e[e.length-1])return e=parseFloat(e)/100,3===t?e:"rgb"===r?255*e:"h"!==r[0]&&("l"!==r[0]||t)?"lab"===r?125*e:"lch"===r?t<2?150*e:360*e:"o"!==r[0]||t?"oklab"===r?.4*e:"oklch"===r?t<2?.4*e:360*e:e:e:100*e;if("h"===r[t]||2===t&&"h"===r[r.length-1]){if(void 0!==s[e])return s[e];if(e.endsWith("deg"))return parseFloat(e);if(e.endsWith("turn"))return 360*parseFloat(e);if(e.endsWith("grad"))return 360*parseFloat(e)/400;if(e.endsWith("rad"))return 180*parseFloat(e)/Math.PI}return"none"===e?0:parseFloat(e)})).length>o?t.pop():1):/[0-9](?:\s|\/|,)/.test(e)&&(t=e.match(/([0-9]+)/g).map(function(e){return parseFloat(e)}),r=(null==(i=e.match(/([a-z])/gi))||null==(i=i.join(""))?void 0:i.toLowerCase())||"rgb")}return{space:r,values:t,alpha:n}};var s={red:0,orange:60,yellow:120,green:180,blue:240,purple:300}},{"color-name":12}],12:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;r.default={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},{}],13:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){(e=Array.isArray(e)&&e.raw?String.raw.apply(String,arguments):e)instanceof Number&&(e=+e);var t,r,n,e=(0,i.default)(e);return e.space?(r=("h"===e.space[0]?a:o).default.min,n=("h"===e.space[0]?a:o).default.max,(t=Array(3))[0]=Math.min(Math.max(e.values[0],r[0]),n[0]),t[1]=Math.min(Math.max(e.values[1],r[1]),n[1]),t[2]=Math.min(Math.max(e.values[2],r[2]),n[2]),(t="h"===e.space[0]?a.default.rgb(t):t).push(Math.min(Math.max(e.alpha,0),1)),t):[]};var i=n(e("color-parse")),o=n(e("color-space/rgb.js")),a=n(e("color-space/hsl.js"));function n(e){return e&&e.__esModule?e:{default:e}}},{"color-parse":11,"color-space/hsl.js":14,"color-space/rgb.js":17}],14:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;e=(e=e("./rgb.js"))&&e.__esModule?e:{default:e};r.default={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(e){var t,r,n,i,o,a=e[0]/360,s=e[1]/100,e=e[2]/100,u=0;if(0==s)return[o=255*e,o,o];for(t=2*e-(r=e<.5?e*(1+s):e+s-e*s),i=[0,0,0];u<3;)(n=a+1/3*-(u-1))<0?n++:1<n&&n--,i[u++]=255*(o=6*n<1?t+6*(r-t)*n:2*n<1?r:3*n<2?t+(r-t)*(2/3-n)*6:t);return i}};e.default.hsl=function(e){var t,r=e[0]/255,n=e[1]/255,e=e[2]/255,i=Math.min(r,n,e),o=Math.max(r,n,e),a=o-i;return o===i?t=0:r===o?t=(n-e)/a:n===o?t=2+(e-r)/a:e===o&&(t=4+(r-n)/a),(t=Math.min(60*t,360))<0&&(t+=360),e=(i+o)/2,[t,100*(o===i?0:e<=.5?a/(o+i):a/(2-o-i)),100*e]}},{"./rgb.js":17}],15:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=o(e("./luv.js")),i=o(e("./xyz.js"));function o(e){return e&&e.__esModule?e:{default:e}}var a={name:"lchuv",channel:["lightness","chroma","hue"],alias:["LCHuv","cielchuv"],min:[0,0,0],max:[100,100,360],luv:function(e){var t=e[0],r=e[1],e=e[2]/360*2*Math.PI;return[t,r*Math.cos(e),r*Math.sin(e)]},xyz:function(e){return n.default.xyz(a.luv(e))}};r.default=a;n.default.lchuv=function(e){var t=e[0],r=e[1],e=e[2],n=Math.sqrt(r*r+e*e),e=360*Math.atan2(e,r)/2/Math.PI;return e<0&&(e+=360),[t,n,e]},i.default.lchuv=function(e){return n.default.lchuv(i.default.luv(e))}},{"./luv.js":16,"./xyz.js":18}],16:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=(e=e("./xyz.js"))&&e.__esModule?e:{default:e};r.default={name:"luv",min:[0,-134,-140],max:[100,224,122],channel:["lightness","u","v"],alias:["LUV","cieluv","cie1976"],xyz:function(e,t,r){var n,i,o;return n=e[0],i=e[1],e=e[2],0===n?[0,0,0]:(t=i/(13*n)+4*(i=s.default.whitepoint[r=r||2][t=t||"D65"][0])/(i+15*(o=s.default.whitepoint[r][t][1])+3*(r=s.default.whitepoint[r][t][2]))||0,e=e/(13*n)+9*o/(i+15*o+3*r)||0,[9*(i=8<n?o*Math.pow((n+16)/116,3):o*n*.0011070564598794539)*t/(4*e)||0,i,i*(12-3*t-20*e)/(4*e)||0])}};s.default.luv=function(e,t,r){t=4*(a=s.default.whitepoint[r=r||2][t=t||"D65"][0])/(a+15*(o=s.default.whitepoint[r][t][1])+3*(r=s.default.whitepoint[r][t][2])),a=9*o/(a+15*o+3*r),n=4*(r=e[0])/(r+15*(i=e[1])+3*(e=e[2]))||0,r=9*i/(r+15*i+3*e)||0;var n,i,o,a,e=i/o;return[i=e<=.008856451679035631?903.2962962962961*e:116*Math.pow(e,1/3)-16,13*i*(n-t),13*i*(r-a)]}},{"./xyz.js":18}],17:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;r.default={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]}},{}],18:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;e=(e=e("./rgb.js"))&&e.__esModule?e:{default:e};var o={name:"xyz",min:[0,0,0],channel:["X","Y","Z"],alias:["XYZ","ciexyz","cie1931"],whitepoint:{2:{A:[109.85,100,35.585],C:[98.074,100,118.232],D50:[96.422,100,82.521],D55:[95.682,100,92.149],D65:[95.045592705167,100,108.9057750759878],D75:[94.972,100,122.638],F2:[99.187,100,67.395],F7:[95.044,100,108.755],F11:[100.966,100,64.37],E:[100,100,100]},10:{A:[111.144,100,35.2],C:[97.285,100,116.145],D50:[96.72,100,81.427],D55:[95.799,100,90.926],D65:[94.811,100,107.304],D75:[94.416,100,120.641],F2:[103.28,100,69.026],F7:[95.792,100,107.687],F11:[103.866,100,65.627],E:[100,100,100]}}};o.max=o.whitepoint[2].D65,o.rgb=function(e,t){t=t||o.whitepoint[2].E;var r=e[0]/t[0],n=e[1]/t[1],e=e[2]/t[2],t=-.96924363628087*r+1.87596750150772*n+.041555057407175*e,i=.055630079696993*r+-.20397695888897*n+1.056971514242878*e,r=.0031308<(r=3.240969941904521*r+-1.537383177570093*n+-.498610760293*e)?1.055*Math.pow(r,1/2.4)-.055:12.92*r;return t=.0031308<t?1.055*Math.pow(t,1/2.4)-.055:12.92*t,i=.0031308<i?1.055*Math.pow(i,1/2.4)-.055:12.92*i,[255*(r=Math.min(Math.max(0,r),1)),255*(t=Math.min(Math.max(0,t),1)),255*(i=Math.min(Math.max(0,i),1))]},e.default.xyz=function(e,t){var r=e[0]/255,n=e[1]/255,e=e[2]/255,i=.21263900587151*(r=.04045<r?Math.pow((.055+r)/1.055,2.4):r/12.92)+.71516867876775*(n=.04045<n?Math.pow((.055+n)/1.055,2.4):n/12.92)+.072192315360733*(e=.04045<e?Math.pow((.055+e)/1.055,2.4):e/12.92);return[(.41239079926595*r+.35758433938387*n+.18048078840183*e)*(t=t||o.whitepoint[2].E)[0],i*t[1],(.019330818715591*r+.11919477979462*n+.95053215224966*e)*t[2]]},r.default=o},{"./rgb.js":17}],19:[function(e,t,r){"use strict";function n(e,t,r){r=r||2;var n,i,o,a,s,u=t&&t.length,l=u?t[0]*r:e.length,c=g(e,0,l,r,!0),f=[];if(c&&c.next!==c.prev){if(u&&(c=function(e,t,r,n){var i,o,a,s=[];for(i=0,o=t.length;i<o;i++)(a=g(e,t[i]*n,i<o-1?t[i+1]*n:e.length,n,!1))===a.next&&(a.steiner=!0),s.push(function(e){var t=e,r=e;for(;(t.x<r.x||t.x===r.x&&t.y<r.y)&&(r=t),t=t.next,t!==e;);return r}(a));for(s.sort(m),i=0;i<s.length;i++)r=function(e,t){var r=function(e,t){var r,n=t,i=e.x,o=e.y,a=-1/0;do{if(o<=n.y&&o>=n.next.y&&n.next.y!==n.y){var s=n.x+(o-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(s<=i&&a<s&&(a=s,r=n.x<n.next.x?n:n.next,s===i))return r}}while(n=n.next,n!==t);if(!r)return null;var u,l=r,c=r.x,f=r.y,h=1/0;n=r;for(;i>=n.x&&n.x>=c&&i!==n.x&&w(o<f?i:a,o,c,f,o<f?a:i,o,n.x,n.y)&&(u=Math.abs(o-n.y)/(i-n.x),C(n,e))&&(u<h||u===h&&(n.x>r.x||n.x===r.x&&function(e,t){return E(e.prev,e,t.prev)<0&&E(t.next,e,e.next)<0}(r,n)))&&(r=n,h=u),n=n.next,n!==l;);return r}(e,t);return r?(y(e=I(r,e),e.next),y(r,r.next)):t}(s[i],r);return r}(e,t,c,r)),e.length>80*r){for(var h=n=e[0],p=i=e[1],d=r;d<l;d+=r)(o=e[d])<h&&(h=o),(a=e[d+1])<p&&(p=a),n<o&&(n=o),i<a&&(i=a);s=0!==(s=Math.max(n-h,i-p))?32767/s:0}A(c,f,r,h,p,s,0)}return f}function g(e,t,r,n,i){var o,a;if(i===0<j(e,t,r,n))for(o=t;o<r;o+=n)a=s(o,e[o],e[o+1],a);else for(o=r-n;t<=o;o-=n)a=s(o,e[o],e[o+1],a);return a&&v(a,a.next)&&(S(a),a=a.next),a}function y(e,t){if(!e)return e;t=t||e;var r,n=e;do{if(r=!1,n.steiner||!v(n,n.next)&&0!==E(n.prev,n,n.next))n=n.next;else{if(S(n),(n=t=n.prev)===n.next)break;r=!0}}while(r||n!==t);return t}function A(e,t,r,n,i,o,a){if(e){if(!a&&o){var s=e;var u=n;var l=i;var c=o;var f=s;for(;0===f.z&&(f.z=_(f.x,f.y,u,l,c)),f.prevZ=f.prev,f.nextZ=f.next,f=f.next,f!==s;);f.prevZ.nextZ=null,f.prevZ=null,function(e){var t,r,n,i,o,a,s,u,l=1;do{for(r=e,o=e=null,a=0;r;){for(a++,n=r,t=s=0;t<l&&(s++,n=n.nextZ);t++);for(u=l;0<s||0<u&&n;)0!==s&&(0===u||!n||r.z<=n.z)?(r=(i=r).nextZ,s--):(n=(i=n).nextZ,u--),o?o.nextZ=i:e=i,i.prevZ=o,o=i;r=n}}while(o.nextZ=null,l*=2,1<a)}(f)}for(var h,p,d=e;e.prev!==e.next;)if(h=e.prev,p=e.next,o?function(e,t,r,n){var i=e.prev,o=e,a=e.next;if(0<=E(i,o,a))return;for(var s=i.x,u=o.x,l=a.x,c=i.y,f=o.y,h=a.y,p=s<u?s<l?s:l:u<l?u:l,d=c<f?c<h?c:h:f<h?f:h,g=u<s?l<s?s:l:l<u?u:l,y=f<c?h<c?c:h:h<f?f:h,A=_(p,d,t,r,n),m=_(g,y,t,r,n),v=e.prevZ,b=e.nextZ;v&&v.z>=A&&b&&b.z<=m;){if(v.x>=p&&v.x<=g&&v.y>=d&&v.y<=y&&v!==i&&v!==a&&w(s,c,u,f,l,h,v.x,v.y)&&0<=E(v.prev,v,v.next))return;if(v=v.prevZ,b.x>=p&&b.x<=g&&b.y>=d&&b.y<=y&&b!==i&&b!==a&&w(s,c,u,f,l,h,b.x,b.y)&&0<=E(b.prev,b,b.next))return;b=b.nextZ}for(;v&&v.z>=A;){if(v.x>=p&&v.x<=g&&v.y>=d&&v.y<=y&&v!==i&&v!==a&&w(s,c,u,f,l,h,v.x,v.y)&&0<=E(v.prev,v,v.next))return;v=v.prevZ}for(;b&&b.z<=m;){if(b.x>=p&&b.x<=g&&b.y>=d&&b.y<=y&&b!==i&&b!==a&&w(s,c,u,f,l,h,b.x,b.y)&&0<=E(b.prev,b,b.next))return;b=b.nextZ}return 1}(e,n,i,o):function(e){var t=e.prev,r=e,e=e.next;if(0<=E(t,r,e))return;for(var n=t.x,i=r.x,o=e.x,a=t.y,s=r.y,u=e.y,l=n<i?n<o?n:o:i<o?i:o,c=a<s?a<u?a:u:s<u?s:u,f=i<n?o<n?n:o:o<i?i:o,h=s<a?u<a?a:u:u<s?s:u,p=e.next;p!==t;){if(p.x>=l&&p.x<=f&&p.y>=c&&p.y<=h&&w(n,a,i,s,o,u,p.x,p.y)&&0<=E(p.prev,p,p.next))return;p=p.next}return 1}(e))t.push(h.i/r|0),t.push(e.i/r|0),t.push(p.i/r|0),S(e),e=p.next,d=p.next;else if((e=p)===d){a?1===a?A(e=function(e,t,r){var n=e;do{var i=n.prev,o=n.next.next}while(!v(i,o)&&b(i,n,n.next,o)&&C(i,o)&&C(o,i)&&(t.push(i.i/r|0),t.push(n.i/r|0),t.push(o.i/r|0),S(n),S(n.next),n=e=o),n=n.next,n!==e);return y(n)}(y(e),t,r),t,r,n,i,o,2):2===a&&function(e,t,r,n,i,o){var a=e;do{for(var s,u=a.next.next;u!==a.prev;){if(a.i!==u.i&&function(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var r=e;do{if(r.i!==e.i&&r.next.i!==e.i&&r.i!==t.i&&r.next.i!==t.i&&b(r,r.next,e,t))return 1}while(r=r.next,r!==e);return}(e,t)&&(C(e,t)&&C(t,e)&&function(e,t){var r=e,n=!1,i=(e.x+t.x)/2,o=(e.y+t.y)/2;for(;r.y>o!=r.next.y>o&&r.next.y!==r.y&&i<(r.next.x-r.x)*(o-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next,r!==e;);return n}(e,t)&&(E(e.prev,e,t.prev)||E(e,t.prev,t))||v(e,t)&&0<E(e.prev,e,e.next)&&0<E(t.prev,t,t.next))}(a,u))return s=I(a,u),a=y(a,a.next),s=y(s,s.next),A(a,t,r,n,i,o,0),A(s,t,r,n,i,o,0);u=u.next}}while(a=a.next,a!==e)}(e,t,r,n,i,o):A(y(e),t,r,n,i,o,1);break}}}function m(e,t){return e.x-t.x}function _(e,t,r,n,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-r)*i|0)|e<<8))|e<<4))|e<<2))|e<<1))|(1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-n)*i|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function w(e,t,r,n,i,o,a,s){return(e-a)*(o-s)<=(i-a)*(t-s)&&(r-a)*(t-s)<=(e-a)*(n-s)&&(i-a)*(n-s)<=(r-a)*(o-s)}function E(e,t,r){return(t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y)}function v(e,t){return e.x===t.x&&e.y===t.y}function b(e,t,r,n){var i=l(E(e,t,r)),o=l(E(e,t,n)),a=l(E(r,n,e)),s=l(E(r,n,t));return i!==o&&a!==s||0===i&&u(e,r,t)||0===o&&u(e,n,t)||0===a&&u(r,e,n)||0===s&&u(r,t,n)}function u(e,t,r){return t.x<=Math.max(e.x,r.x)&&t.x>=Math.min(e.x,r.x)&&t.y<=Math.max(e.y,r.y)&&t.y>=Math.min(e.y,r.y)}function l(e){return 0<e?1:e<0?-1:0}function C(e,t){return E(e.prev,e,e.next)<0?0<=E(e,t,e.next)&&0<=E(e,e.prev,t):E(e,t,e.prev)<0||E(e,e.next,t)<0}function I(e,t){var r=new a(e.i,e.x,e.y),n=new a(t.i,t.x,t.y),i=e.next,o=t.prev;return(e.next=t).prev=e,(r.next=i).prev=r,(n.next=r).prev=n,(o.next=n).prev=o,n}function s(e,t,r,n){e=new a(e,t,r);return n?(e.next=n.next,(e.prev=n).next.prev=e,n.next=e):(e.prev=e).next=e,e}function S(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function a(e,t,r){this.i=e,this.x=t,this.y=r,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function j(e,t,r,n){for(var i=0,o=t,a=r-n;o<r;o+=n)i+=(e[a]-e[o])*(e[o+1]+e[a+1]),a=o;return i}t.exports=n,(t.exports.default=n).deviation=function(e,t,r,n){var i=t&&t.length,o=i?t[0]*r:e.length,a=Math.abs(j(e,0,o,r));if(i)for(var s=0,u=t.length;s<u;s++){var l=t[s]*r,c=s<u-1?t[s+1]*r:e.length;a-=Math.abs(j(e,l,c,r))}for(var f=0,s=0;s<n.length;s+=3){var h=n[s]*r,p=n[s+1]*r,d=n[s+2]*r;f+=Math.abs((e[h]-e[d])*(e[1+p]-e[1+h])-(e[h]-e[p])*(e[1+d]-e[1+h]))}return 0===a&&0===f?0:Math.abs((f-a)/a)},n.flatten=function(e){for(var t=e[0][0].length,r={vertices:[],holes:[],dimensions:t},n=0,i=0;i<e.length;i++){for(var o=0;o<e[i].length;o++)for(var a=0;a<t;a++)r.vertices.push(e[i][o][a]);0<i&&(n+=e[i-1].length,r.holes.push(n))}return r}},{}],20:[function(e,t,r){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n="object"===("undefined"==typeof Reflect?"undefined":a(Reflect))?Reflect:null,u=n&&"function"==typeof n.apply?n.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};var i=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)},o=Number.isNaN||function(e){return e!=e};function s(){s.init.call(this)}t.exports=s,t.exports.once=function(s,u){return new Promise(function(e,t){function r(e){s.removeListener(u,n),t(e)}function n(){"function"==typeof s.removeListener&&s.removeListener("error",r),e([].slice.call(arguments))}var i,o,a;A(s,u,n,{once:!0}),"error"!==u&&(o=r,a={once:!0},"function"==typeof(i=s).on)&&A(i,"error",o,a)})},(s.EventEmitter=s).prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var l=10;function c(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+a(e))}function f(e){return void 0===e._maxListeners?s.defaultMaxListeners:e._maxListeners}function h(e,t,r,n){var i,o;return c(r),void 0===(i=e._events)?(i=e._events=Object.create(null),e._eventsCount=0):(void 0!==i.newListener&&(e.emit("newListener",t,r.listener||r),i=e._events),o=i[t]),void 0===o?(o=i[t]=r,++e._eventsCount):("function"==typeof o?o=i[t]=n?[r,o]:[o,r]:n?o.unshift(r):o.push(r),0<(i=f(e))&&o.length>i&&!o.warned&&(o.warned=!0,(n=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit")).name="MaxListenersExceededWarning",n.emitter=e,n.type=t,n.count=o.length,r=n,console)&&console.warn&&console.warn(r)),e}function p(e,t,r){e={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},t=function(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}.bind(e);return t.listener=r,e.wrapFn=t}function d(e,t,r){e=e._events;if(void 0===e)return[];e=e[t];{if(void 0===e)return[];if("function"==typeof e)return r?[e.listener||e]:[e];if(r){for(var n=e,i=new Array(n.length),o=0;o<i.length;++o)i[o]=n[o].listener||n[o];return i}return y(e,e.length)}}function g(e){var t=this._events;if(void 0!==t){t=t[e];if("function"==typeof t)return 1;if(void 0!==t)return t.length}return 0}function y(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}function A(r,n,i,o){if("function"==typeof r.on)o.once?r.once(n,i):r.on(n,i);else{if("function"!=typeof r.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+a(r));r.addEventListener(n,function e(t){o.once&&r.removeEventListener(n,e),i(t)})}}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return l},set:function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");l=e}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},s.prototype.getMaxListeners=function(){return f(this)},s.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var n="error"===e,i=this._events;if(void 0!==i)n=n&&void 0===i.error;else if(!n)return!1;if(n){if((o=0<t.length?t[0]:o)instanceof Error)throw o;n=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw n.context=o,n}var o=i[e];if(void 0===o)return!1;if("function"==typeof o)u(o,this,t);else for(var a=o.length,s=y(o,a),r=0;r<a;++r)u(s[r],this,t);return!0},s.prototype.on=s.prototype.addListener=function(e,t){return h(this,e,t,!1)},s.prototype.prependListener=function(e,t){return h(this,e,t,!0)},s.prototype.once=function(e,t){return c(t),this.on(e,p(this,e,t)),this},s.prototype.prependOnceListener=function(e,t){return c(t),this.prependListener(e,p(this,e,t)),this},s.prototype.off=s.prototype.removeListener=function(e,t){var r,n,i,o,a;if(c(t),void 0!==(n=this._events)&&void 0!==(r=n[e]))if(r===t||r.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(i=-1,o=r.length-1;0<=o;o--)if(r[o]===t||r[o].listener===t){a=r[o].listener,i=o;break}if(i<0)return this;if(0===i)r.shift();else{var s=r;var u=i;for(;u+1<s.length;u++)s[u]=s[u+1];s.pop()}1===r.length&&(n[e]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",e,a||t)}return this},s.prototype.removeAllListeners=function(e){var t,r;if(void 0!==(r=this._events))if(void 0===r.removeListener)0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[e]);else if(0===arguments.length){for(var n,i=Object.keys(r),o=0;o<i.length;++o)"removeListener"!==(n=i[o])&&this.removeAllListeners(n);this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0}else if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(o=t.length-1;0<=o;o--)this.removeListener(e,t[o]);return this},s.prototype.listeners=function(e){return d(this,e,!0)},s.prototype.rawListeners=function(e){return d(this,e,!1)},s.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):g.call(e,t)},s.prototype.listenerCount=g,s.prototype.eventNames=function(){return 0<this._eventsCount?i(this._events):[]}},{}],21:[function(e,t,r){"use strict";function x(e){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(){O=function(){return a};var u,a={},e=Object.prototype,l=e.hasOwnProperty,c=Object.defineProperty||function(e,t,r){e[t]=r.value},t="function"==typeof Symbol?Symbol:{},n=t.iterator||"@@iterator",r=t.asyncIterator||"@@asyncIterator",i=t.toStringTag||"@@toStringTag";function o(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{o({},"")}catch(u){o=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var i,o,a,s,t=t&&t.prototype instanceof A?t:A,t=Object.create(t.prototype),n=new S(n||[]);return c(t,"_invoke",{value:(i=e,o=r,a=n,s=h,function(e,t){if(s===d)throw Error("Generator is already running");if(s===g){if("throw"===e)throw t;return{value:u,done:!0}}for(a.method=e,a.arg=t;;){var r=a.delegate;if(r){r=function e(t,r){var n=r.method,i=t.iterator[n];if(i===u)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=u,e(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;n=f(i,t.iterator,r.arg);if("throw"===n.type)return r.method="throw",r.arg=n.arg,r.delegate=null,y;i=n.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=u),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}(r,a);if(r){if(r===y)continue;return r}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(s===h)throw s=g,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);s=d;r=f(i,o,a);if("normal"===r.type){if(s=a.done?g:p,r.arg===y)continue;return{value:r.arg,done:a.done}}"throw"===r.type&&(s=g,a.method="throw",a.arg=r.arg)}})}),t}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}a.wrap=s;var h="suspendedStart",p="suspendedYield",d="executing",g="completed",y={};function A(){}function m(){}function v(){}var t={},b=(o(t,n,function(){return this}),Object.getPrototypeOf),b=b&&b(b(j([]))),_=(b&&b!==e&&l.call(b,n)&&(t=b),v.prototype=A.prototype=Object.create(t));function w(e){["next","throw","return"].forEach(function(t){o(e,t,function(e){return this._invoke(t,e)})})}function E(a,s){var t;c(this,"_invoke",{value:function(r,n){function e(){return new s(function(e,t){!function t(e,r,n,i){var o,e=f(a[e],a,r);if("throw"!==e.type)return(r=(o=e.arg).value)&&"object"==x(r)&&l.call(r,"__await")?s.resolve(r.__await).then(function(e){t("next",e,n,i)},function(e){t("throw",e,n,i)}):s.resolve(r).then(function(e){o.value=e,n(o)},function(e){return t("throw",e,n,i)});i(e.arg)}(r,n,e,t)})}return t=t?t.then(e,e):e()}})}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function j(t){if(t||""===t){var r,e=t[n];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return r=-1,(e=function e(){for(;++r<t.length;)if(l.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=u,e.done=!0,e}).next=e}throw new TypeError(x(t)+" is not iterable")}return c(_,"constructor",{value:m.prototype=v,configurable:!0}),c(v,"constructor",{value:m,configurable:!0}),m.displayName=o(v,i,"GeneratorFunction"),a.isGeneratorFunction=function(e){e="function"==typeof e&&e.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},a.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,o(e,i,"GeneratorFunction")),e.prototype=Object.create(_),e},a.awrap=function(e){return{__await:e}},w(E.prototype),o(E.prototype,r,function(){return this}),a.AsyncIterator=E,a.async=function(e,t,r,n,i){void 0===i&&(i=Promise);var o=new E(s(e,t,r,n),i);return a.isGeneratorFunction(t)?o:o.next().then(function(e){return e.done?e.value:o.next()})},w(_),o(_,i,"Generator"),o(_,n,function(){return this}),o(_,"toString",function(){return"[object Generator]"}),a.keys=function(e){var t,r=Object(e),n=[];for(t in r)n.push(t);return n.reverse(),function e(){for(;n.length;){var t=n.pop();if(t in r)return e.value=t,e.done=!1,e}return e.done=!0,e}},a.values=j,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=u,this.done=!1,this.delegate=null,this.method="next",this.arg=u,this.tryEntries.forEach(I),!e)for(var t in this)"t"===t.charAt(0)&&l.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=u)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(r){if(this.done)throw r;var n=this;function e(e,t){return o.type="throw",o.arg=r,n.next=e,t&&(n.method="next",n.arg=u),!!t}for(var t=this.tryEntries.length-1;0<=t;--t){var i=this.tryEntries[t],o=i.completion;if("root"===i.tryLoc)return e("end");if(i.tryLoc<=this.prev){var a=l.call(i,"catchLoc"),s=l.call(i,"finallyLoc");if(a&&s){if(this.prev<i.catchLoc)return e(i.catchLoc,!0);if(this.prev<i.finallyLoc)return e(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return e(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return e(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;0<=r;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&l.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}var o=(i=i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc?null:i)?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var r,n,i=this.tryEntries[t];if(i.tryLoc===e)return"throw"===(r=i.completion).type&&(n=r.arg,I(i)),n}throw Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:j(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=u),y}},a}function s(e,t,r,n,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return r(e)}s.done?t(u):Promise.resolve(u).then(n,i)}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=x(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=x(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==x(e)?e:e+""}(n.key),n)}}Object.defineProperty(r,"__esModule",{value:!0});var i,u,o,l=e("../predictor.js"),a=(e=function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function")},(a=[{key:"decode",value:(u=O().mark(function e(t,r){var n,i,o,a;return O().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.decodeBlock(r);case 2:if(n=e.sent,1!==(i=t.Predictor||1))return a=!t.StripOffsets,o=a?t.TileWidth:t.ImageWidth,a=a?t.TileLength:t.RowsPerStrip||t.ImageLength,e.abrupt("return",(0,l.applyPredictor)(n,i,o,a,t.BitsPerSample,t.PlanarConfiguration));e.next=9;break;case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}},e,this)}),o=function(){var e=this,a=arguments;return new Promise(function(t,r){var n=u.apply(e,a);function i(e){s(n,t,r,i,o,"next",e)}function o(e){s(n,t,r,i,o,"throw",e)}i(void 0)})},function(e,t){return o.apply(this,arguments)})}])&&n(e.prototype,a),i&&n(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e);r.default=a},{"../predictor.js":38}],22:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function a(e,t,r){t=u(t);var n=e,t=s()?Reflect.construct(t,r||[],u(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(s=function(){return!!e})()}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}Object.defineProperty(r,"__esModule",{value:!0});var c=e("pako"),f=(e=e("./basedecoder.js"))&&e.__esModule?e:{default:e},e=function(){function r(){var e=this,t=r;if(e instanceof t)return a(this,r,arguments);throw new TypeError("Cannot call a class as a function")}var e,t=r,n=f.default;if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&l(t,n),t=r,(n=[{key:"decodeBlock",value:function(e){return(0,c.inflate)(new Uint8Array(e)).buffer}}])&&o(t.prototype,n),e&&o(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();r.default=e},{"./basedecoder.js":21,pako:54}],23:[function(e,t,r){"use strict";function x(e){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(){O=function(){return a};var u,a={},e=Object.prototype,l=e.hasOwnProperty,c=Object.defineProperty||function(e,t,r){e[t]=r.value},t="function"==typeof Symbol?Symbol:{},n=t.iterator||"@@iterator",r=t.asyncIterator||"@@asyncIterator",i=t.toStringTag||"@@toStringTag";function o(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{o({},"")}catch(u){o=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var i,o,a,s,t=t&&t.prototype instanceof A?t:A,t=Object.create(t.prototype),n=new S(n||[]);return c(t,"_invoke",{value:(i=e,o=r,a=n,s=h,function(e,t){if(s===d)throw Error("Generator is already running");if(s===g){if("throw"===e)throw t;return{value:u,done:!0}}for(a.method=e,a.arg=t;;){var r=a.delegate;if(r){r=function e(t,r){var n=r.method,i=t.iterator[n];if(i===u)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=u,e(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;n=f(i,t.iterator,r.arg);if("throw"===n.type)return r.method="throw",r.arg=n.arg,r.delegate=null,y;i=n.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=u),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}(r,a);if(r){if(r===y)continue;return r}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(s===h)throw s=g,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);s=d;r=f(i,o,a);if("normal"===r.type){if(s=a.done?g:p,r.arg===y)continue;return{value:r.arg,done:a.done}}"throw"===r.type&&(s=g,a.method="throw",a.arg=r.arg)}})}),t}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}a.wrap=s;var h="suspendedStart",p="suspendedYield",d="executing",g="completed",y={};function A(){}function m(){}function v(){}var t={},b=(o(t,n,function(){return this}),Object.getPrototypeOf),b=b&&b(b(j([]))),_=(b&&b!==e&&l.call(b,n)&&(t=b),v.prototype=A.prototype=Object.create(t));function w(e){["next","throw","return"].forEach(function(t){o(e,t,function(e){return this._invoke(t,e)})})}function E(a,s){var t;c(this,"_invoke",{value:function(r,n){function e(){return new s(function(e,t){!function t(e,r,n,i){var o,e=f(a[e],a,r);if("throw"!==e.type)return(r=(o=e.arg).value)&&"object"==x(r)&&l.call(r,"__await")?s.resolve(r.__await).then(function(e){t("next",e,n,i)},function(e){t("throw",e,n,i)}):s.resolve(r).then(function(e){o.value=e,n(o)},function(e){return t("throw",e,n,i)});i(e.arg)}(r,n,e,t)})}return t=t?t.then(e,e):e()}})}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function j(t){if(t||""===t){var r,e=t[n];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return r=-1,(e=function e(){for(;++r<t.length;)if(l.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=u,e.done=!0,e}).next=e}throw new TypeError(x(t)+" is not iterable")}return c(_,"constructor",{value:m.prototype=v,configurable:!0}),c(v,"constructor",{value:m,configurable:!0}),m.displayName=o(v,i,"GeneratorFunction"),a.isGeneratorFunction=function(e){e="function"==typeof e&&e.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},a.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,o(e,i,"GeneratorFunction")),e.prototype=Object.create(_),e},a.awrap=function(e){return{__await:e}},w(E.prototype),o(E.prototype,r,function(){return this}),a.AsyncIterator=E,a.async=function(e,t,r,n,i){void 0===i&&(i=Promise);var o=new E(s(e,t,r,n),i);return a.isGeneratorFunction(t)?o:o.next().then(function(e){return e.done?e.value:o.next()})},w(_),o(_,i,"Generator"),o(_,n,function(){return this}),o(_,"toString",function(){return"[object Generator]"}),a.keys=function(e){var t,r=Object(e),n=[];for(t in r)n.push(t);return n.reverse(),function e(){for(;n.length;){var t=n.pop();if(t in r)return e.value=t,e.done=!1,e}return e.done=!0,e}},a.values=j,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=u,this.done=!1,this.delegate=null,this.method="next",this.arg=u,this.tryEntries.forEach(I),!e)for(var t in this)"t"===t.charAt(0)&&l.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=u)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(r){if(this.done)throw r;var n=this;function e(e,t){return o.type="throw",o.arg=r,n.next=e,t&&(n.method="next",n.arg=u),!!t}for(var t=this.tryEntries.length-1;0<=t;--t){var i=this.tryEntries[t],o=i.completion;if("root"===i.tryLoc)return e("end");if(i.tryLoc<=this.prev){var a=l.call(i,"catchLoc"),s=l.call(i,"finallyLoc");if(a&&s){if(this.prev<i.catchLoc)return e(i.catchLoc,!0);if(this.prev<i.finallyLoc)return e(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return e(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return e(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;0<=r;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&l.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}var o=(i=i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc?null:i)?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var r,n,i=this.tryEntries[t];if(i.tryLoc===e)return"throw"===(r=i.completion).type&&(n=r.arg,I(i)),n}throw Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:j(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=u),y}},a}function u(e,t,r,n,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return r(e)}s.done?t(u):Promise.resolve(u).then(n,i)}function n(s){return function(){var e=this,a=arguments;return new Promise(function(t,r){var n=s.apply(e,a);function i(e){u(n,t,r,i,o,"next",e)}function o(e){u(n,t,r,i,o,"throw",e)}i(void 0)})}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&o(t,e,r);return a(t,e),t}var o=Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]},a=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},s=(Object.defineProperty(r,"__esModule",{value:!0}),r.getDecoder=r.addDecoder=void 0,new Map);function l(e,t){(e=Array.isArray(e)?e:[e]).forEach(function(e){return s.set(e,t)})}function c(){return(c=n(O().mark(function e(t){var r,n;return O().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=s.get(t.Compression)){e.next=3;break}throw new Error("Unknown compression method identifier: ".concat(t.Compression));case 3:return e.next=5,r();case 5:return n=e.sent,e.abrupt("return",new n(t));case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}r.addDecoder=l,r.getDecoder=function(e){return c.apply(this,arguments)},l([void 0,1],function(){return Promise.resolve().then(function(){return i(e("./raw.js"))}).then(function(e){return e.default})}),l(5,function(){return Promise.resolve().then(function(){return i(e("./lzw.js"))}).then(function(e){return e.default})}),l(6,function(){throw new Error("old style JPEG compression is not supported.")}),l(7,function(){return Promise.resolve().then(function(){return i(e("./jpeg.js"))}).then(function(e){return e.default})}),l([8,32946],function(){return Promise.resolve().then(function(){return i(e("./deflate.js"))}).then(function(e){return e.default})}),l(32773,function(){return Promise.resolve().then(function(){return i(e("./packbits.js"))}).then(function(e){return e.default})}),l(34887,function(){return Promise.resolve().then(function(){return i(e("./lerc.js"))}).then((t=n(O().mark(function e(t){return O().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.zstd.init();case 2:return e.abrupt("return",t);case 3:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)})).then(function(e){return e.default});var t}),l(50001,function(){return Promise.resolve().then(function(){return i(e("./webimage.js"))}).then(function(e){return e.default})})},{"./deflate.js":22,"./jpeg.js":24,"./lerc.js":25,"./lzw.js":26,"./packbits.js":27,"./raw.js":28,"./webimage.js":29}],24:[function(e,t,r){"use strict";function n(e,t,r){t=o(t);var n=e,t=i()?Reflect.construct(t,r||[],o(e).constructor):t.apply(e,r);if(t&&("object"==z(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function i(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(i=function(){return!!e})()}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a(e,t){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=z(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=z(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==z(e)?e:e+""}(n.key),n)}}function l(e,t,r){return t&&u(e.prototype,t),r&&u(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function z(e){return(z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0});var c=(e=e("./basedecoder.js"))&&e.__esModule?e:{default:e},V=new Int32Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]);function K(e,t){for(var r=0,n=[],i=16;0<i&&!e[i-1];)--i;n.push({children:[],index:0});for(var o,a=n[0],s=0;s<i;s++){for(var u=0;u<e[s];u++){for((a=n.pop()).children[a.index]=t[r];0<a.index;)a=n.pop();for(a.index++,n.push(a);n.length<=s;)n.push(o={children:[],index:0}),a.children[a.index]=o.children,a=o;r++}s+1<i&&(n.push(o={children:[],index:0}),a.children[a.index]=o.children,a=o)}return n[0].children}function X(t,e,r,n,D,l,c,i,f){var o=r.mcusPerLine,L=r.progressive,Q=e,a=e,s=0,u=0;function h(){if(0<u)return s>>--u&1;if(255===(s=t[a++])){var e=t[a++];if(e)throw new Error("unexpected marker: ".concat((s<<8|e).toString(16)))}return s>>>(u=7)}function p(e){for(var t,r=e;null!==(t=h());){if("number"==typeof(r=r[t]))return r;if("object"!==z(r))throw new Error("invalid huffman sequence")}return null}function d(e){for(var t=e,r=0;0<t;){var n=h();if(null===n)return;r=r<<1|n,--t}return r}function g(e){var t=d(e);return 1<<e-1<=t?t:t+(-1<<e)+1}var y,A=0,m=0;for(var v,b,_,w,E,C,I,S,j,x,O,P,k=n.length,B=L?0===l?0===i?function(e,t){var r=p(e.huffmanTableDC),r=0===r?0:g(r)<<f;e.pred+=r,t[0]=e.pred}:function(e,t){t[0]|=h()<<f}:0===i?function(e,t){if(0<A)A--;else for(var r=l,n=c;r<=n;){var i=p(e.huffmanTableAC),o=15&i,i=i>>4;if(0==o){if(i<15){A=d(i)+(1<<i)-1;break}r+=16}else t[V[r+=i]]=g(o)*(1<<f),r++}}:function(e,t){for(var r=l,n=c,i=0;r<=n;){var o=V[r],a=t[o]<0?-1:1;switch(m){case 0:var s=p(e.huffmanTableAC),u=15&s,i=s>>4;if(0==u)m=i<15?(A=d(i)+(1<<i),4):(i=16,1);else{if(1!=u)throw new Error("invalid ACn encoding");y=g(u),m=i?2:3}continue;case 1:case 2:t[o]?t[o]+=(h()<<f)*a:0==--i&&(m=2===m?3:0);break;case 3:t[o]?t[o]+=(h()<<f)*a:(t[o]=y<<f,m=0);break;case 4:t[o]&&(t[o]+=(h()<<f)*a)}r++}4===m&&0==--A&&(m=0)}:function(e,t){var r=p(e.huffmanTableDC),r=0===r?0:g(r);e.pred+=r,t[0]=e.pred;for(var n=1;n<64;){var i=p(e.huffmanTableAC),o=15&i,i=i>>4;if(0==o){if(i<15)break;n+=16}else t[V[n+=i]]=g(o),n++}},T=0,M=1===k?n[0].blocksPerLine*n[0].blocksPerColumn:o*r.mcusPerColumn,F=D||M;T<M;){for(b=0;b<k;b++)n[b].pred=0;if(A=0,1===k)for(v=n[0],w=0;w<F;w++)P=void 0,P=(O=T)/(x=v).blocksPerLine|0,O%=x.blocksPerLine,B(x,x.blocks[P][O]),T++;else for(w=0;w<F;w++){for(b=0;b<k;b++)for(var N=v=n[b],G=N.h,U=N.v,R=0;R<U;R++)for(_=0;_<G;_++)S=R,j=_,S=((I=T)/o|0)*(C=v).v+S,I=I%o*C.h+j,B(C,C.blocks[S][I]);if(++T==M)break}if(u=0,(E=t[a]<<8|t[a+1])<65280)throw new Error("marker was not found");if(!(65488<=E&&E<=65495))break;a+=2}return a-Q}function b(e,t){var r=[],n=t.blocksPerLine,i=t.blocksPerColumn,o=n<<3,a=new Int32Array(64),s=new Uint8Array(64);for(var u=0;u<i;u++){for(var l=u<<3,c=0;c<8;c++)r.push(new Uint8Array(o));for(var f=0;f<n;f++){O=x=j=I=C=S=b=v=m=A=y=g=d=p=h=E=w=_=void 0;for(var h,p,d,g,y,A,m,v,b,_=t.blocks[u][f],w=s,E=a,C=t.quantizationTable,I=E,S=0;S<64;S++)I[S]=_[S]*C[S];for(S=0;S<8;++S){var j=8*S;0!==I[1+j]||0!==I[2+j]||0!==I[3+j]||0!==I[4+j]||0!==I[5+j]||0!==I[6+j]||0!==I[7+j]?(h=5793*I[0+j]+128>>8,p=5793*I[4+j]+128>>8,d=I[2+j],g=I[6+j],y=2896*(I[1+j]-I[7+j])+128>>8,v=2896*(I[1+j]+I[7+j])+128>>8,A=I[3+j]<<4,b=h-p+1>>1,h=h+p+1>>1,p=b,b=3784*d+1567*g+128>>8,d=1567*d-3784*g+128>>8,g=b,b=y-(m=I[5+j]<<4)+1>>1,y=y+m+1>>1,m=b,b=v+A+1>>1,A=v-A+1>>1,v=b,b=h-g+1>>1,h=h+g+1>>1,g=b,b=p-d+1>>1,p=p+d+1>>1,d=b,b=2276*y+3406*v+2048>>12,y=3406*y-2276*v+2048>>12,v=b,b=799*A+4017*m+2048>>12,A=4017*A-799*m+2048>>12,m=b,I[0+j]=h+v,I[7+j]=h-v,I[1+j]=p+m,I[6+j]=p-m,I[2+j]=d+A,I[5+j]=d-A,I[3+j]=g+y,I[4+j]=g-y):(b=5793*I[0+j]+512>>10,I[0+j]=b,I[1+j]=b,I[2+j]=b,I[3+j]=b,I[4+j]=b,I[5+j]=b,I[6+j]=b,I[7+j]=b)}for(S=0;S<8;++S){var x=S;0!==I[8+x]||0!==I[16+x]||0!==I[24+x]||0!==I[32+x]||0!==I[40+x]||0!==I[48+x]||0!==I[56+x]?(h=5793*I[0+x]+2048>>12,p=5793*I[32+x]+2048>>12,d=I[16+x],g=I[48+x],y=2896*(I[8+x]-I[56+x])+2048>>12,v=2896*(I[8+x]+I[56+x])+2048>>12,A=I[24+x],b=h-p+1>>1,h=h+p+1>>1,p=b,b=3784*d+1567*g+2048>>12,d=1567*d-3784*g+2048>>12,g=b,b=y-(m=I[40+x])+1>>1,y=y+m+1>>1,m=b,b=v+A+1>>1,A=v-A+1>>1,v=b,b=h-g+1>>1,h=h+g+1>>1,g=b,b=p-d+1>>1,p=p+d+1>>1,d=b,b=2276*y+3406*v+2048>>12,y=3406*y-2276*v+2048>>12,v=b,b=799*A+4017*m+2048>>12,A=4017*A-799*m+2048>>12,m=b,I[0+x]=h+v,I[56+x]=h-v,I[8+x]=p+m,I[48+x]=p-m,I[16+x]=d+A,I[40+x]=d-A,I[24+x]=g+y,I[32+x]=g-y):(b=5793*E[S+0]+8192>>14,I[0+x]=b,I[8+x]=b,I[16+x]=b,I[24+x]=b,I[32+x]=b,I[40+x]=b,I[48+x]=b,I[56+x]=b)}for(S=0;S<64;++S){var O=128+(I[S]+8>>4);w[S]=O<0?0:255<O?255:O}for(var P=0,k=f<<3,B=0;B<8;B++)for(var T=r[l+B],M=0;M<8;M++)T[k+M]=s[P++]}}return r}var f=l(function e(){s(this,e),this.jfif=null,this.adobe=null,this.quantizationTables=[],this.huffmanTablesAC=[],this.huffmanTablesDC=[],this.resetFrames()},[{key:"resetFrames",value:function(){this.frames=[]}},{key:"parse",value:function(t){var r=0;function e(){var e=t[r]<<8|t[r+1];return r+=2,e}var n=e();if(65496!==n)throw new Error("SOI not found");for(n=e();65497!==n;){switch(n){case 65280:break;case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:0,R=e(),R=t.subarray(r,r+R-2),r+=R.length;65504===n&&74===R[0]&&70===R[1]&&73===R[2]&&70===R[3]&&0===R[4]&&(this.jfif={version:{major:R[5],minor:R[6]},densityUnits:R[7],xDensity:R[8]<<8|R[9],yDensity:R[10]<<8|R[11],thumbWidth:R[12],thumbHeight:R[13],thumbData:R.subarray(14,14+3*R[12]*R[13])}),65518===n&&65===R[0]&&100===R[1]&&111===R[2]&&98===R[3]&&101===R[4]&&0===R[5]&&(this.adobe={version:R[6],flags0:R[7]<<8|R[8],flags1:R[9]<<8|R[10],transformCode:R[11]});break;case 65499:for(var D=e()+r-2;r<D;){var i=t[r++],o=new Int32Array(64);if(i>>4==0)for(var a=0;a<64;a++)o[V[a]]=t[r++];else{if(i>>4!=1)throw new Error("DQT: invalid table spec");for(var s=0;s<64;s++)o[V[s]]=e()}this.quantizationTables[15&i]=o}break;case 65472:case 65473:case 65474:e();for(var u={extended:65473===n,progressive:65474===n,precision:t[r++],scanLines:e(),samplesPerLine:e(),components:{},componentsOrder:[]},L=t[r++],l=0;l<L;l++){var c=t[r],Q=t[r+1]>>4,F=15&t[r+1],N=t[r+2];u.componentsOrder.push(c),u.components[c]={h:Q,v:F,quantizationIdx:N},r+=3}I=C=E=w=_=b=v=m=y=g=d=p=f=A=h=void 0;var f,h=u,p=0,d=0;for(f in h.components)h.components.hasOwnProperty(f)&&(p<(A=h.components[f]).h&&(p=A.h),d<A.v)&&(d=A.v);var g=Math.ceil(h.samplesPerLine/8/p),y=Math.ceil(h.scanLines/8/d);for(f in h.components)if(h.components.hasOwnProperty(f)){for(var A=h.components[f],m=Math.ceil(Math.ceil(h.samplesPerLine/8)*A.h/p),v=Math.ceil(Math.ceil(h.scanLines/8)*A.v/d),b=g*A.h,_=y*A.v,w=[],E=0;E<_;E++){for(var C=[],I=0;I<b;I++)C.push(new Int32Array(64));w.push(C)}A.blocksPerLine=m,A.blocksPerColumn=v,A.blocks=w}h.maxH=p,h.maxV=d,h.mcusPerLine=g,h.mcusPerColumn=y,this.frames.push(u);break;case 65476:for(var G=e(),S=2;S<G;){for(var j=t[r++],x=new Uint8Array(16),O=0,P=0;P<16;P++,r++)x[P]=t[r],O+=x[P];for(var k=new Uint8Array(O),B=0;B<O;B++,r++)k[B]=t[r];S+=17+O,j>>4==0?this.huffmanTablesDC[15&j]=K(x,k):this.huffmanTablesAC[15&j]=K(x,k)}break;case 65501:e(),this.resetInterval=e();break;case 65498:e();for(var U=t[r++],T=[],z=this.frames[0],q=0;q<U;q++){var M=z.components[t[r++]],H=t[r++];M.huffmanTableDC=this.huffmanTablesDC[H>>4],M.huffmanTableAC=this.huffmanTablesAC[15&H],T.push(M)}var R=t[r++],W=t[r++],Y=t[r++],W=X(t,r,z,T,this.resetInterval,R,W,Y>>4,15&Y);r+=W;break;case 65535:255!==t[r]&&r--;break;default:if(255===t[r-3]&&192<=t[r-2]&&t[r-2]<=254){r-=3;break}throw new Error("unknown JPEG marker ".concat(n.toString(16)))}n=e()}}},{key:"getResult",value:function(){var e=this.frames;if(0===this.frames.length)throw new Error("no frames were decoded");1<this.frames.length&&console.warn("more than one frame is not supported");for(var t=0;t<this.frames.length;t++)for(var r=this.frames[t].components,n=0,i=Object.keys(r);n<i.length;n++){var o=i[n];r[o].quantizationTable=this.quantizationTables[r[o].quantizationIdx],delete r[o].quantizationIdx}for(var a=e[0],s=a.components,u=a.componentsOrder,l=[],c=a.samplesPerLine,f=a.scanLines,h=0;h<u.length;h++){var p=s[u[h]];l.push({lines:b(0,p),scaleX:p.h/a.maxH,scaleY:p.v/a.maxV})}for(var d=new Uint8Array(c*f*l.length),g=0,y=0;y<f;++y)for(var A=0;A<c;++A)for(var m=0;m<l.length;++m){var v=l[m];d[g]=v.lines[0|y*v.scaleY][0|A*v.scaleX],++g}return d}}]),e=function(){function r(e){var t;return s(this,r),(t=n(this,r)).reader=new f,e.JPEGTables&&t.reader.parse(e.JPEGTables),t}var e=r,t=c.default;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");return e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a(e,t),l(r,[{key:"decodeBlock",value:function(e){return this.reader.resetFrames(),this.reader.parse(new Uint8Array(e)),this.reader.getResult().buffer}}])}();r.default=e},{"./basedecoder.js":21}],25:[function(e,t,i){"use strict";function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=o(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==o(e)?e:e+""}(n.key),n)}}function s(e,t,r){t=l(t);var n=e,t=u()?Reflect.construct(t,r||[],l(e).constructor):t.apply(e,r);if(t&&("object"==o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(u=function(){return!!e})()}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(i,"__esModule",{value:!0}),i.zstd=void 0;var f=e("pako"),h=r(e("lerc")),n=e("zstddec"),p=r(e("./basedecoder.js")),d=e("../globals.js"),e=(i.zstd=new n.ZSTDDecoder,function(){function r(e){var t;if(this instanceof r)return(t=s(this,r)).planarConfiguration=void 0!==e.PlanarConfiguration?e.PlanarConfiguration:1,t.samplesPerPixel=void 0!==e.SamplesPerPixel?e.SamplesPerPixel:1,t.addCompression=e.LercParameters[d.LercParameters.AddCompression],t;throw new TypeError("Cannot call a class as a function")}var e,t=r,n=p.default;if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&c(t,n),t=r,(n=[{key:"decodeBlock",value:function(e){switch(this.addCompression){case d.LercAddCompression.None:break;case d.LercAddCompression.Deflate:e=(0,f.inflate)(new Uint8Array(e)).buffer;break;case d.LercAddCompression.Zstandard:e=i.zstd.decode(new Uint8Array(e)).buffer;break;default:throw new Error("Unsupported LERC additional compression method identifier: ".concat(this.addCompression))}return h.default.decode(e,{returnPixelInterleavedDims:1===this.planarConfiguration}).pixels[0].buffer}}])&&a(t.prototype,n),e&&a(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}());i.default=e},{"../globals.js":35,"./basedecoder.js":21,lerc:73,pako:54,zstddec:460}],26:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function a(e,t,r){t=u(t);var n=e,t=s()?Reflect.construct(t,r||[],u(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(s=function(){return!!e})()}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}Object.defineProperty(r,"__esModule",{value:!0});var c=(e=e("./basedecoder.js"))&&e.__esModule?e:{default:e},y=257;function A(e,t){for(var r=t.length-1;0<=r;r--)e.push(t[r])}function f(e){for(var n=new Uint16Array(4093),i=new Uint8Array(4093),t=0;t<=257;t++)n[t]=4096,i[t]=t;var r=258,l=9,c=0;function o(){r=258,l=9}function a(e){e=e,r=l,n=(t=c)%8,i=Math.floor(t/8),o=8-n,a=t+r-8*(i+1),u=8*(i+2)-(t+r),s=8*(i+2)-t,u=Math.max(0,u);var t,r,n,i,o,a,s,u=i>=e.length?(console.warn("ran off the end of the buffer before finding EOI_CODE (end on input code)"),y):(n=e[i]&Math.pow(2,8-n)-1,o=n<<=r-o,i+1<e.length&&(n=e[i+1]>>>u,o+=n<<=Math.max(0,r-s)),8<a&&i+2<e.length&&(o+=e[i+2]>>>8*(i+3)-(t+r)),o);return c+=l,u}function s(e,t){i[r]=t,n[r]=e,++r}function u(e){for(var t=[],r=e;4096!==r;r=n[r])t.push(i[r]);return t}var f=[];o();for(var h,p=new Uint8Array(e),d=a(p);d!==y;){if(256===d){for(o(),d=a(p);256===d;)d=a(p);if(d===y)break;if(256<d)throw new Error("corrupted code at scanline ".concat(d));A(f,u(d))}else if(d<r){var g=u(d);A(f,g),s(h,g[g.length-1])}else{g=u(h);if(!g)throw new Error("Bogus entry. Not in dictionary, ".concat(h," / ").concat(r,", position: ").concat(c));A(f,g),f.push(g[g.length-1]),s(h,g[g.length-1])}h=d,r+1>=Math.pow(2,l)&&(12===l?h=void 0:l++),d=a(p)}return new Uint8Array(f)}e=function(){function r(){var e=this,t=r;if(e instanceof t)return a(this,r,arguments);throw new TypeError("Cannot call a class as a function")}var e,t=r,n=c.default;if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&l(t,n),t=r,(n=[{key:"decodeBlock",value:function(e){return f(e).buffer}}])&&o(t.prototype,n),e&&o(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();r.default=e},{"./basedecoder.js":21}],27:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function a(e,t,r){t=u(t);var n=e,t=s()?Reflect.construct(t,r||[],u(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(s=function(){return!!e})()}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}Object.defineProperty(r,"__esModule",{value:!0});var c=(e=e("./basedecoder.js"))&&e.__esModule?e:{default:e},e=function(){function r(){var e=this,t=r;if(e instanceof t)return a(this,r,arguments);throw new TypeError("Cannot call a class as a function")}var e,t=r,n=c.default;if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&l(t,n),t=r,(n=[{key:"decodeBlock",value:function(e){for(var t=new DataView(e),r=[],n=0;n<e.byteLength;++n)if((o=t.getInt8(n))<0){for(var i=t.getUint8(n+1),o=-o,a=0;a<=o;++a)r.push(i);n+=1}else{for(var s=0;s<=o;++s)r.push(t.getUint8(n+s+1));n+=o+1}return new Uint8Array(r).buffer}}])&&o(t.prototype,n),e&&o(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();r.default=e},{"./basedecoder.js":21}],28:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function a(e,t,r){t=u(t);var n=e,t=s()?Reflect.construct(t,r||[],u(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(s=function(){return!!e})()}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}Object.defineProperty(r,"__esModule",{value:!0});var c=(e=e("./basedecoder.js"))&&e.__esModule?e:{default:e},e=function(){function r(){var e=this,t=r;if(e instanceof t)return a(this,r,arguments);throw new TypeError("Cannot call a class as a function")}var e,t=r,n=c.default;if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&l(t,n),t=r,(n=[{key:"decodeBlock",value:function(e){return e}}])&&o(t.prototype,n),e&&o(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();r.default=e},{"./basedecoder.js":21}],29:[function(e,t,r){"use strict";function x(e){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(){O=function(){return a};var u,a={},e=Object.prototype,l=e.hasOwnProperty,c=Object.defineProperty||function(e,t,r){e[t]=r.value},t="function"==typeof Symbol?Symbol:{},n=t.iterator||"@@iterator",r=t.asyncIterator||"@@asyncIterator",i=t.toStringTag||"@@toStringTag";function o(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{o({},"")}catch(u){o=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var i,o,a,s,t=t&&t.prototype instanceof A?t:A,t=Object.create(t.prototype),n=new S(n||[]);return c(t,"_invoke",{value:(i=e,o=r,a=n,s=h,function(e,t){if(s===d)throw Error("Generator is already running");if(s===g){if("throw"===e)throw t;return{value:u,done:!0}}for(a.method=e,a.arg=t;;){var r=a.delegate;if(r){r=function e(t,r){var n=r.method,i=t.iterator[n];if(i===u)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=u,e(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;n=f(i,t.iterator,r.arg);if("throw"===n.type)return r.method="throw",r.arg=n.arg,r.delegate=null,y;i=n.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=u),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}(r,a);if(r){if(r===y)continue;return r}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(s===h)throw s=g,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);s=d;r=f(i,o,a);if("normal"===r.type){if(s=a.done?g:p,r.arg===y)continue;return{value:r.arg,done:a.done}}"throw"===r.type&&(s=g,a.method="throw",a.arg=r.arg)}})}),t}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}a.wrap=s;var h="suspendedStart",p="suspendedYield",d="executing",g="completed",y={};function A(){}function m(){}function v(){}var t={},b=(o(t,n,function(){return this}),Object.getPrototypeOf),b=b&&b(b(j([]))),_=(b&&b!==e&&l.call(b,n)&&(t=b),v.prototype=A.prototype=Object.create(t));function w(e){["next","throw","return"].forEach(function(t){o(e,t,function(e){return this._invoke(t,e)})})}function E(a,s){var t;c(this,"_invoke",{value:function(r,n){function e(){return new s(function(e,t){!function t(e,r,n,i){var o,e=f(a[e],a,r);if("throw"!==e.type)return(r=(o=e.arg).value)&&"object"==x(r)&&l.call(r,"__await")?s.resolve(r.__await).then(function(e){t("next",e,n,i)},function(e){t("throw",e,n,i)}):s.resolve(r).then(function(e){o.value=e,n(o)},function(e){return t("throw",e,n,i)});i(e.arg)}(r,n,e,t)})}return t=t?t.then(e,e):e()}})}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function j(t){if(t||""===t){var r,e=t[n];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return r=-1,(e=function e(){for(;++r<t.length;)if(l.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=u,e.done=!0,e}).next=e}throw new TypeError(x(t)+" is not iterable")}return c(_,"constructor",{value:m.prototype=v,configurable:!0}),c(v,"constructor",{value:m,configurable:!0}),m.displayName=o(v,i,"GeneratorFunction"),a.isGeneratorFunction=function(e){e="function"==typeof e&&e.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},a.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,o(e,i,"GeneratorFunction")),e.prototype=Object.create(_),e},a.awrap=function(e){return{__await:e}},w(E.prototype),o(E.prototype,r,function(){return this}),a.AsyncIterator=E,a.async=function(e,t,r,n,i){void 0===i&&(i=Promise);var o=new E(s(e,t,r,n),i);return a.isGeneratorFunction(t)?o:o.next().then(function(e){return e.done?e.value:o.next()})},w(_),o(_,i,"Generator"),o(_,n,function(){return this}),o(_,"toString",function(){return"[object Generator]"}),a.keys=function(e){var t,r=Object(e),n=[];for(t in r)n.push(t);return n.reverse(),function e(){for(;n.length;){var t=n.pop();if(t in r)return e.value=t,e.done=!1,e}return e.done=!0,e}},a.values=j,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=u,this.done=!1,this.delegate=null,this.method="next",this.arg=u,this.tryEntries.forEach(I),!e)for(var t in this)"t"===t.charAt(0)&&l.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=u)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(r){if(this.done)throw r;var n=this;function e(e,t){return o.type="throw",o.arg=r,n.next=e,t&&(n.method="next",n.arg=u),!!t}for(var t=this.tryEntries.length-1;0<=t;--t){var i=this.tryEntries[t],o=i.completion;if("root"===i.tryLoc)return e("end");if(i.tryLoc<=this.prev){var a=l.call(i,"catchLoc"),s=l.call(i,"finallyLoc");if(a&&s){if(this.prev<i.catchLoc)return e(i.catchLoc,!0);if(this.prev<i.finallyLoc)return e(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return e(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return e(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;0<=r;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&l.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}var o=(i=i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc?null:i)?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var r,n,i=this.tryEntries[t];if(i.tryLoc===e)return"throw"===(r=i.completion).type&&(n=r.arg,I(i)),n}throw Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:j(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=u),y}},a}function u(e,t,r,n,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return r(e)}s.done?t(u):Promise.resolve(u).then(n,i)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=x(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=x(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==x(e)?e:e+""}(n.key),n)}}function a(e,t,r){t=s(t);var n=e,t=i()?Reflect.construct(t,r||[],s(e).constructor):t.apply(e,r);if(t&&("object"==x(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function i(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(i=function(){return!!e})()}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}Object.defineProperty(r,"__esModule",{value:!0});var c=(e=e("./basedecoder.js"))&&e.__esModule?e:{default:e},e=function(){function t(){var e;if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");if(e=a(this,t),"undefined"==typeof createImageBitmap)throw new Error("Cannot decode WebImage as `createImageBitmap` is not available");if("undefined"==typeof document&&"undefined"==typeof OffscreenCanvas)throw new Error("Cannot decode WebImage as neither `document` nor `OffscreenCanvas` is not available");return e}var e,s,r,n=t,i=c.default;if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function");return n.prototype=Object.create(i&&i.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),i&&l(n,i),n=t,(i=[{key:"decode",value:(s=O().mark(function e(t,r){var n,i,o;return O().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=new Blob([r]),e.next=3,createImageBitmap(n);case 3:return n=e.sent,"undefined"!=typeof document?((i=document.createElement("canvas")).width=n.width,i.height=n.height):i=new OffscreenCanvas(n.width,n.height),(o=i.getContext("2d")).drawImage(n,0,0),e.abrupt("return",o.getImageData(0,0,n.width,n.height).data.buffer);case 8:case"end":return e.stop()}},e)}),r=function(){var e=this,a=arguments;return new Promise(function(t,r){var n=s.apply(e,a);function i(e){u(n,t,r,i,o,"next",e)}function o(e){u(n,t,r,i,o,"throw",e)}i(void 0)})},function(e,t){return r.apply(this,arguments)})}])&&o(n.prototype,i),e&&o(n,e),Object.defineProperty(n,"prototype",{writable:!1}),n}();r.default=e},{"./basedecoder.js":21}],30:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}Object.defineProperty(r,"__esModule",{value:!0});o=function e(t,r,n,i){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this._dataView=new DataView(t),this._sliceOffset=r,this._littleEndian=n,this._bigTiff=i},(s=[{key:"sliceOffset",get:function(){return this._sliceOffset}},{key:"sliceTop",get:function(){return this._sliceOffset+this.buffer.byteLength}},{key:"littleEndian",get:function(){return this._littleEndian}},{key:"bigTiff",get:function(){return this._bigTiff}},{key:"buffer",get:function(){return this._dataView.buffer}},{key:"covers",value:function(e,t){return this.sliceOffset<=e&&this.sliceTop>=e+t}},{key:"readUint8",value:function(e){return this._dataView.getUint8(e-this._sliceOffset,this._littleEndian)}},{key:"readInt8",value:function(e){return this._dataView.getInt8(e-this._sliceOffset,this._littleEndian)}},{key:"readUint16",value:function(e){return this._dataView.getUint16(e-this._sliceOffset,this._littleEndian)}},{key:"readInt16",value:function(e){return this._dataView.getInt16(e-this._sliceOffset,this._littleEndian)}},{key:"readUint32",value:function(e){return this._dataView.getUint32(e-this._sliceOffset,this._littleEndian)}},{key:"readInt32",value:function(e){return this._dataView.getInt32(e-this._sliceOffset,this._littleEndian)}},{key:"readFloat32",value:function(e){return this._dataView.getFloat32(e-this._sliceOffset,this._littleEndian)}},{key:"readFloat64",value:function(e){return this._dataView.getFloat64(e-this._sliceOffset,this._littleEndian)}},{key:"readUint64",value:function(e){var t,r=this.readUint32(e),e=this.readUint32(e+4);if(this._littleEndian){if(t=r+Math.pow(2,32)*e,Number.isSafeInteger(t))return t}else if(t=Math.pow(2,32)*r+e,Number.isSafeInteger(t))return t;throw new Error("".concat(t," exceeds MAX_SAFE_INTEGER. ")+"Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues")}},{key:"readInt64",value:function(e){for(var t=0,r=0<(128&this._dataView.getUint8(e+(this._littleEndian?7:0))),n=!0,i=0;i<8;i++){var o=this._dataView.getUint8(e+(this._littleEndian?i:7-i));r&&(n?0!==o&&(o=255&~(o-1),n=!1):o=255&~o),t+=o*Math.pow(256,i)}return t=r?-t:t}},{key:"readOffset",value:function(e){return this._bigTiff?this.readUint64(e):this.readUint32(e)}}])&&n(o.prototype,s),a&&n(o,a),Object.defineProperty(o,"prototype",{writable:!1});var o,a,s=o;r.default=s},{}],31:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}Object.defineProperty(r,"__esModule",{value:!0});var o,a=e("@petamoriken/float16"),s=(e=function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this._dataView=new DataView(t)},(s=[{key:"buffer",get:function(){return this._dataView.buffer}},{key:"getUint64",value:function(e,t){var r,n=this.getUint32(e,t),e=this.getUint32(e+4,t);if(t){if(r=n+Math.pow(2,32)*e,Number.isSafeInteger(r))return r}else if(r=Math.pow(2,32)*n+e,Number.isSafeInteger(r))return r;throw new Error("".concat(r," exceeds MAX_SAFE_INTEGER. ")+"Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues")}},{key:"getInt64",value:function(e,t){for(var r=0,n=0<(128&this._dataView.getUint8(e+(t?7:0))),i=!0,o=0;o<8;o++){var a=this._dataView.getUint8(e+(t?o:7-o));n&&(i?0!==a&&(a=255&~(a-1),i=!1):a=255&~a),r+=a*Math.pow(256,o)}return r=n?-r:r}},{key:"getUint8",value:function(e,t){return this._dataView.getUint8(e,t)}},{key:"getInt8",value:function(e,t){return this._dataView.getInt8(e,t)}},{key:"getUint16",value:function(e,t){return this._dataView.getUint16(e,t)}},{key:"getInt16",value:function(e,t){return this._dataView.getInt16(e,t)}},{key:"getUint32",value:function(e,t){return this._dataView.getUint32(e,t)}},{key:"getInt32",value:function(e,t){return this._dataView.getInt32(e,t)}},{key:"getFloat16",value:function(e,t){return(0,a.getFloat16)(this._dataView,e,t)}},{key:"getFloat32",value:function(e,t){return this._dataView.getFloat32(e,t)}},{key:"getFloat64",value:function(e,t){return this._dataView.getFloat64(e,t)}}])&&n(e.prototype,s),o&&n(e,o),Object.defineProperty(e,"prototype",{writable:!1}),e);r.default=s},{"@petamoriken/float16":5}],32:[function(e,D,t){"use strict";function x(e){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(){O=function(){return a};var u,a={},e=Object.prototype,l=e.hasOwnProperty,c=Object.defineProperty||function(e,t,r){e[t]=r.value},t="function"==typeof Symbol?Symbol:{},n=t.iterator||"@@iterator",r=t.asyncIterator||"@@asyncIterator",i=t.toStringTag||"@@toStringTag";function o(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{o({},"")}catch(u){o=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var i,o,a,s,t=t&&t.prototype instanceof A?t:A,t=Object.create(t.prototype),n=new S(n||[]);return c(t,"_invoke",{value:(i=e,o=r,a=n,s=h,function(e,t){if(s===d)throw Error("Generator is already running");if(s===g){if("throw"===e)throw t;return{value:u,done:!0}}for(a.method=e,a.arg=t;;){var r=a.delegate;if(r){r=function e(t,r){var n=r.method,i=t.iterator[n];if(i===u)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=u,e(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;n=f(i,t.iterator,r.arg);if("throw"===n.type)return r.method="throw",r.arg=n.arg,r.delegate=null,y;i=n.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=u),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}(r,a);if(r){if(r===y)continue;return r}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(s===h)throw s=g,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);s=d;r=f(i,o,a);if("normal"===r.type){if(s=a.done?g:p,r.arg===y)continue;return{value:r.arg,done:a.done}}"throw"===r.type&&(s=g,a.method="throw",a.arg=r.arg)}})}),t}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}a.wrap=s;var h="suspendedStart",p="suspendedYield",d="executing",g="completed",y={};function A(){}function m(){}function v(){}var t={},b=(o(t,n,function(){return this}),Object.getPrototypeOf),b=b&&b(b(j([]))),_=(b&&b!==e&&l.call(b,n)&&(t=b),v.prototype=A.prototype=Object.create(t));function w(e){["next","throw","return"].forEach(function(t){o(e,t,function(e){return this._invoke(t,e)})})}function E(a,s){var t;c(this,"_invoke",{value:function(r,n){function e(){return new s(function(e,t){!function t(e,r,n,i){var o,e=f(a[e],a,r);if("throw"!==e.type)return(r=(o=e.arg).value)&&"object"==x(r)&&l.call(r,"__await")?s.resolve(r.__await).then(function(e){t("next",e,n,i)},function(e){t("throw",e,n,i)}):s.resolve(r).then(function(e){o.value=e,n(o)},function(e){return t("throw",e,n,i)});i(e.arg)}(r,n,e,t)})}return t=t?t.then(e,e):e()}})}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function j(t){if(t||""===t){var r,e=t[n];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return r=-1,(e=function e(){for(;++r<t.length;)if(l.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=u,e.done=!0,e}).next=e}throw new TypeError(x(t)+" is not iterable")}return c(_,"constructor",{value:m.prototype=v,configurable:!0}),c(v,"constructor",{value:m,configurable:!0}),m.displayName=o(v,i,"GeneratorFunction"),a.isGeneratorFunction=function(e){e="function"==typeof e&&e.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},a.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,o(e,i,"GeneratorFunction")),e.prototype=Object.create(_),e},a.awrap=function(e){return{__await:e}},w(E.prototype),o(E.prototype,r,function(){return this}),a.AsyncIterator=E,a.async=function(e,t,r,n,i){void 0===i&&(i=Promise);var o=new E(s(e,t,r,n),i);return a.isGeneratorFunction(t)?o:o.next().then(function(e){return e.done?e.value:o.next()})},w(_),o(_,i,"Generator"),o(_,n,function(){return this}),o(_,"toString",function(){return"[object Generator]"}),a.keys=function(e){var t,r=Object(e),n=[];for(t in r)n.push(t);return n.reverse(),function e(){for(;n.length;){var t=n.pop();if(t in r)return e.value=t,e.done=!1,e}return e.done=!0,e}},a.values=j,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=u,this.done=!1,this.delegate=null,this.method="next",this.arg=u,this.tryEntries.forEach(I),!e)for(var t in this)"t"===t.charAt(0)&&l.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=u)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(r){if(this.done)throw r;var n=this;function e(e,t){return o.type="throw",o.arg=r,n.next=e,t&&(n.method="next",n.arg=u),!!t}for(var t=this.tryEntries.length-1;0<=t;--t){var i=this.tryEntries[t],o=i.completion;if("root"===i.tryLoc)return e("end");if(i.tryLoc<=this.prev){var a=l.call(i,"catchLoc"),s=l.call(i,"finallyLoc");if(a&&s){if(this.prev<i.catchLoc)return e(i.catchLoc,!0);if(this.prev<i.finallyLoc)return e(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return e(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return e(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;0<=r;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&l.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}var o=(i=i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc?null:i)?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var r,n,i=this.tryEntries[t];if(i.tryLoc===e)return"throw"===(r=i.completion).type&&(n=r.arg,I(i)),n}throw Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:j(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=u),y}},a}function r(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function j(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?r(Object(i),!0).forEach(function(e){var t,r;t=n,r=i[e=e],(e=p(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):r(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))})}return n}function P(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o,a,s=[],u=!0,l=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=o.call(r)).done)&&(s.push(n.value),s.length!==t);u=!0);}catch(e){l=!0,i=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}(e,t)||function(e,t){{var r;if(e)return"string"==typeof e?n(e,t):"Map"===(r="Object"===(r={}.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function u(e,t,r,n,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return r(e)}s.done?t(u):Promise.resolve(u).then(n,i)}function i(s){return function(){var e=this,a=arguments;return new Promise(function(t,r){var n=s.apply(e,a);function i(e){u(n,t,r,i,o,"next",e)}function o(e){u(n,t,r,i,o,"throw",e)}i(void 0)})}}function a(e,t,r){t=c(t);var n=e,t=s()?Reflect.construct(t,r||[],c(e).constructor):t.apply(e,r);if(t&&("object"==x(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t)}function L(e){var r="function"==typeof Map?new Map:void 0;return function(e){if(null===e||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(e){return"function"==typeof t}}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==r){if(r.has(e))return r.get(e);r.set(e,t)}function t(){return function(e,t,r){var n;return s()?Reflect.construct.apply(null,arguments):((n=[null]).push.apply(n,t),t=new(e.bind.apply(e,n)),r&&l(t,r.prototype),t)}(e,arguments,c(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),l(t,e)}(e)}function s(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(s=function(){return!!e})()}function l(e,t){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,p(n.key),n)}}function h(e,t,r){return t&&f(e.prototype,t),r&&f(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function p(e){e=function(e,t){if("object"!=x(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=x(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==x(e)?e:e+""}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&Q(t,e,r);return F(t,e),t}function y(e){return e&&e.__esModule?e:{default:e}}var Q=Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]},F=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},A=(Object.defineProperty(t,"__esModule",{value:!0}),t.BaseResponse=t.BaseClient=t.GeoTIFFImage=t.Pool=t.writeArrayBuffer=t.fromUrls=t.fromBlob=t.fromFile=t.fromArrayBuffer=t.fromCustomClient=t.fromUrl=t.MultiGeoTIFF=t.GeoTIFF=t.setLogger=t.addDecoder=t.getDecoder=t.BaseDecoder=t.rgb=t.globals=void 0,y(e("./geotiffimage.js"))),N=(t.GeoTIFFImage=A.default,y(e("./dataview64.js"))),G=y(e("./dataslice.js")),m=y(e("./pool.js")),v=(t.Pool=m.default,e("./source/remote.js")),U=e("./source/arraybuffer.js"),z=e("./source/filereader.js"),q=e("./source/file.js"),b=e("./source/client/base.js"),_=(Object.defineProperty(t,"BaseClient",{enumerable:!0,get:function(){return b.BaseClient}}),Object.defineProperty(t,"BaseResponse",{enumerable:!0,get:function(){return b.BaseResponse}}),e("./globals.js")),H=e("./geotiffwriter.js"),m=g(e("./globals.js")),m=(t.globals=m,g(e("./rgb.js"))),w=(t.rgb=m,e("./compression/index.js")),W=(Object.defineProperty(t,"getDecoder",{enumerable:!0,get:function(){return w.getDecoder}}),Object.defineProperty(t,"addDecoder",{enumerable:!0,get:function(){return w.addDecoder}}),e("./logging.js")),Y=(Object.defineProperty(t,"setLogger",{enumerable:!0,get:function(){return W.setLogger}}),e("./compression/basedecoder.js"));function E(e){switch(e){case _.fieldTypes.BYTE:case _.fieldTypes.ASCII:case _.fieldTypes.SBYTE:case _.fieldTypes.UNDEFINED:return 1;case _.fieldTypes.SHORT:case _.fieldTypes.SSHORT:return 2;case _.fieldTypes.LONG:case _.fieldTypes.SLONG:case _.fieldTypes.FLOAT:case _.fieldTypes.IFD:return 4;case _.fieldTypes.RATIONAL:case _.fieldTypes.SRATIONAL:case _.fieldTypes.DOUBLE:case _.fieldTypes.LONG8:case _.fieldTypes.SLONG8:case _.fieldTypes.IFD8:return 8;default:throw new RangeError("Invalid field type: ".concat(e))}}function C(e,t,r,n){var i=null,o=null,a=E(t);switch(t){case _.fieldTypes.BYTE:case _.fieldTypes.ASCII:case _.fieldTypes.UNDEFINED:i=new Uint8Array(r),o=e.readUint8;break;case _.fieldTypes.SBYTE:i=new Int8Array(r),o=e.readInt8;break;case _.fieldTypes.SHORT:i=new Uint16Array(r),o=e.readUint16;break;case _.fieldTypes.SSHORT:i=new Int16Array(r),o=e.readInt16;break;case _.fieldTypes.LONG:case _.fieldTypes.IFD:i=new Uint32Array(r),o=e.readUint32;break;case _.fieldTypes.SLONG:i=new Int32Array(r),o=e.readInt32;break;case _.fieldTypes.LONG8:case _.fieldTypes.IFD8:i=new Array(r),o=e.readUint64;break;case _.fieldTypes.SLONG8:i=new Array(r),o=e.readInt64;break;case _.fieldTypes.RATIONAL:i=new Uint32Array(2*r),o=e.readUint32;break;case _.fieldTypes.SRATIONAL:i=new Int32Array(2*r),o=e.readInt32;break;case _.fieldTypes.FLOAT:i=new Float32Array(r),o=e.readFloat32;break;case _.fieldTypes.DOUBLE:i=new Float64Array(r),o=e.readFloat64;break;default:throw new RangeError("Invalid field type: ".concat(t))}if(t!==_.fieldTypes.RATIONAL&&t!==_.fieldTypes.SRATIONAL)for(var s=0;s<r;++s)i[s]=o.call(e,n+s*a);else for(var u=0;u<r;u+=2)i[u]=o.call(e,n+u*a),i[u+1]=o.call(e,n+(u*a+4));return t===_.fieldTypes.ASCII?new TextDecoder("utf-8").decode(i):i}Object.defineProperty(t,"BaseDecoder",{enumerable:!0,get:function(){return y(Y).default}});var I,S,V,K,X,J,Z,$,ee=h(function e(t,r,n){d(this,e),this.fileDirectory=t,this.geoKeyDirectory=r,this.nextIFDByteOffset=n}),k=(o(M,L(Error)),h(M)),m=h(function e(){d(this,e)},[{key:"readRasters",value:($=i(O().mark(function e(){var t,r,n,i,o,a,s,u,l,c,f,h,p,d,g,y,A,m,v,b,_,w,E,C,I,S=arguments;return O().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=(t=0<S.length&&void 0!==S[0]?S[0]:{}).window,n=t.width,i=t.height,o=t.resX,a=t.resY,s=t.bbox,e.next=5,this.getImage();case 5:return u=e.sent,l=u,e.next=9,this.getImageCount();case 9:if(c=e.sent,f=u.getBoundingBox(),r&&s)throw new Error('Both "bbox" and "window" passed.');e.next=13;break;case 13:if(n||i)if(r&&(y=u.getOrigin(),y=P(y,2),h=y[0],y=y[1],A=u.getResolution(),A=P(A,2),g=A[0],A=A[1],s=[h+r[0]*g,y+r[1]*A,h+r[2]*g,y+r[3]*A]),h=s||f,n){if(o)throw new Error("Both width and resX passed");e.next=19}else e.next=20;else e.next=24;break;case 19:o=(h[2]-h[0])/n;case 20:if(i){if(a)throw new Error("Both width and resY passed");e.next=23}else e.next=24;break;case 23:a=(h[3]-h[1])/i;case 24:if(!o&&!a){e.next=48;break}p=[],d=0;case 27:if(d<c)return e.next=30,this.getImage(d);e.next=36;break;case 30:g=e.sent,y=g.fileDirectory,A=y.SubfileType,v=y.NewSubfileType,(0===d||2===A||1&v)&&p.push(g);case 33:++d,e.next=27;break;case 36:p.sort(function(e,t){return e.getWidth()-t.getWidth()}),m=0;case 38:if(m<p.length){if(v=p[m],b=(f[2]-f[0])/v.getWidth(),_=(f[3]-f[1])/v.getHeight(),l=v,o&&b<o||a&&_<a)return e.abrupt("break",48);e.next=45}else e.next=48;break;case 45:++m,e.next=38;break;case 48:return b=r,s&&(_=u.getOrigin(),E=P(_,2),w=E[0],E=E[1],I=l.getResolution(u),I=P(I,2),C=I[0],I=I[1],b=[Math.round((s[0]-w)/C),Math.round((s[1]-E)/I),Math.round((s[2]-w)/C),Math.round((s[3]-E)/I)],b=[Math.min(b[0],b[2]),Math.min(b[1],b[3]),Math.max(b[0],b[2]),Math.max(b[1],b[3])]),e.abrupt("return",l.readRasters(j(j({},t),{},{window:b})));case 51:case"end":return e.stop()}},e,this)})),function(){return $.apply(this,arguments)})}]),B=(o(T,m),h(T,[{key:"getSlice",value:(Z=i(O().mark(function e(t,r){var n;return O().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.bigTiff?4048:1024,e.t0=G.default,e.next=4,this.source.fetch([{offset:t,length:void 0!==r?r:n}]);case 4:return e.t1=e.sent[0],e.t2=t,e.t3=this.littleEndian,e.t4=this.bigTiff,e.abrupt("return",new e.t0(e.t1,e.t2,e.t3,e.t4));case 9:case"end":return e.stop()}},e,this)})),function(e,t){return Z.apply(this,arguments)})},{key:"parseFileDirectoryAt",value:(J=i(O().mark(function e(t){var r,n,i,o,a,s,u,l,c,f,h,p,d,g,y,A,m,v;return O().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.bigTiff?20:12,n=this.bigTiff?8:2,e.next=4,this.getSlice(t);case 4:if(i=e.sent,o=this.bigTiff?i.readUint64(t):i.readUint16(t),d=o*r+(this.bigTiff?16:6),i.covers(t,d)){e.next=11;break}return e.next=10,this.getSlice(t,d);case 10:i=e.sent;case 11:a={},s=t+(this.bigTiff?8:2),u=0;case 14:u<o?(l=i.readUint16(s),c=i.readUint16(s+2),f=this.bigTiff?i.readUint64(s+4):i.readUint32(s+4),p=h=void 0,d=E(c),g=s+(this.bigTiff?12:8),d*f<=(this.bigTiff?8:4)?(h=C(i,c,f,g),e.next=36):e.next=26):e.next=41;break;case 26:(y=i.readOffset(g),A=E(c)*f,i.covers(y,A))?(h=C(i,c,f,y),e.next=36):e.next=32;break;case 32:return e.next=34,this.getSlice(y,A);case 34:m=e.sent,h=C(m,c,f,y);case 36:p=1===f&&-1===_.arrayFields.indexOf(l)&&c!==_.fieldTypes.RATIONAL&&c!==_.fieldTypes.SRATIONAL?h[0]:h,a[_.fieldTagNames[l]]=p;case 38:s+=r,++u,e.next=14;break;case 41:return m=function(e){var t=e.GeoKeyDirectory;if(!t)return null;for(var r={},n=4;n<=4*t[3];n+=4){var i=_.geoKeyNames[t[n]],o=t[n+1]?_.fieldTagNames[t[n+1]]:null,a=t[n+2],s=t[n+3],u=null;if(o){if(null==(u=e[o]))throw new Error("Could not get value of geoKey '".concat(i,"'."));"string"==typeof u?u=u.substring(s,s+a-1):u.subarray&&(u=u.subarray(s,s+a),1===a)&&(u=u[0])}else u=s;r[i]=u}return r}(a),v=i.readOffset(t+n+r*o),e.abrupt("return",new ee(a,m,v));case 44:case"end":return e.stop()}},e,this)})),function(e){return J.apply(this,arguments)})},{key:"requestIFD",value:(X=i(O().mark(function e(r){var n=this;return O().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ifdRequests[r])return e.abrupt("return",this.ifdRequests[r]);e.next=4;break;case 4:if(0===r)return this.ifdRequests[r]=this.parseFileDirectoryAt(this.firstIFDOffset),e.abrupt("return",this.ifdRequests[r]);e.next=9;break;case 9:this.ifdRequests[r-1]?e.next=19:(e.prev=10,this.ifdRequests[r-1]=this.requestIFD(r-1),e.next=19);break;case 14:if(e.prev=14,e.t0=e.catch(10),e.t0 instanceof k)throw new k(r);e.next=18;break;case 18:throw e.t0;case 19:return this.ifdRequests[r]=i(O().mark(function e(){var t;return O().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.ifdRequests[r-1];case 2:if(0===(t=e.sent).nextIFDByteOffset)throw new k(r);e.next=5;break;case 5:return e.abrupt("return",n.parseFileDirectoryAt(t.nextIFDByteOffset));case 6:case"end":return e.stop()}},e)}))(),e.abrupt("return",this.ifdRequests[r]);case 21:case"end":return e.stop()}},e,this,[[10,14]])})),function(e){return X.apply(this,arguments)})},{key:"getImage",value:(K=i(O().mark(function e(){var t,r=arguments;return O().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=0<r.length&&void 0!==r[0]?r[0]:0,e.next=3,this.requestIFD(t);case 3:return t=e.sent,e.abrupt("return",new A.default(t.fileDirectory,t.geoKeyDirectory,this.dataView,this.littleEndian,this.cache,this.source));case 5:case"end":return e.stop()}},e,this)})),function(){return K.apply(this,arguments)})},{key:"getImageCount",value:(V=i(O().mark(function e(){var t,r;return O().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=!(t=0);case 2:if(r)return e.prev=3,e.next=6,this.requestIFD(t);e.next=18;break;case 6:++t,e.next=16;break;case 9:(e.prev=9,e.t0=e.catch(3),e.t0 instanceof k)?(r=!1,e.next=16):e.next=15;break;case 15:throw e.t0;case 16:e.next=2;break;case 18:return e.abrupt("return",t);case 19:case"end":return e.stop()}},e,this,[[3,9]])})),function(){return V.apply(this,arguments)})},{key:"getGhostValues",value:(S=i(O().mark(function e(){var t,r,n,i,o,a,s=this;return O().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.bigTiff?16:8,this.ghostValues)return e.abrupt("return",this.ghostValues);e.next=3;break;case 3:return n=(r="GDAL_STRUCTURAL_METADATA_SIZE=").length+100,e.next=7,this.getSlice(t,n);case 7:if(i=e.sent,r!==C(i,_.fieldTypes.ASCII,r.length,t))e.next=19;else{if(o=C(i,_.fieldTypes.ASCII,n,t),o=o.split("\n")[0],(o=Number(o.split("=")[1].split(" ")[0])+o.length)>n)return e.next=15,this.getSlice(t,o);e.next=16}break;case 15:i=e.sent;case 16:a=C(i,_.fieldTypes.ASCII,o,t),this.ghostValues={},a.split("\n").filter(function(e){return 0<e.length}).map(function(e){return e.split("=")}).forEach(function(e){var e=P(e,2),t=e[0],e=e[1];s.ghostValues[t]=e});case 19:return e.abrupt("return",this.ghostValues);case 20:case"end":return e.stop()}},e,this)})),function(){return S.apply(this,arguments)})},{key:"close",value:function(){return"function"==typeof this.source.close&&this.source.close()}}],[{key:"fromSource",value:(I=i(O().mark(function e(t,r,n){var i,o,a,s,u,l;return O().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.fetch([{offset:0,length:1024}],n);case 2:(i=e.sent[0],i=new N.default(i),18761!==(o=i.getUint16(0,0)))?e.next=9:(a=!0,e.next=14);break;case 9:19789!==o?e.next=13:(a=!1,e.next=14);break;case 13:throw new TypeError("Invalid byte order value.");case 14:42!==(s=i.getUint16(2,a))?e.next=19:(u=!1,e.next=27);break;case 19:if(43!==s)e.next=26;else{if(u=!0,8!==i.getUint16(4,a))throw new Error("Unsupported offset byte-size.");e.next=24}break;case 24:e.next=27;break;case 26:throw new TypeError("Invalid magic number.");case 27:return l=u?i.getUint64(8,a):i.getUint32(4,a),e.abrupt("return",new T(t,a,u,l,r));case 29:case"end":return e.stop()}},e)})),function(e,t,r){return I.apply(this,arguments)})}]));function T(e,t,r,n){var i,o=4<arguments.length&&void 0!==arguments[4]?arguments[4]:{};return d(this,T),(i=a(this,T)).source=e,i.littleEndian=t,i.bigTiff=r,i.firstIFDOffset=n,i.cache=o.cache||!1,i.ifdRequests=[],i.ghostValues=null,i}function M(e){var t;return d(this,M),(t=a(this,M,["No image at index ".concat(e)])).index=e,t}t.GeoTIFF=B,t.default=B;o(R,m);var te,re,ne,ie=h(R,[{key:"parseFileDirectoriesPerFile",value:(ne=i(O().mark(function e(){var t;return O().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=[this.mainFile.parseFileDirectoryAt(this.mainFile.firstIFDOffset)].concat(this.overviewFiles.map(function(e){return e.parseFileDirectoryAt(e.firstIFDOffset)})),e.next=3,Promise.all(t);case 3:return this.fileDirectoriesPerFile=e.sent,e.abrupt("return",this.fileDirectoriesPerFile);case 5:case"end":return e.stop()}},e,this)})),function(){return ne.apply(this,arguments)})},{key:"getImage",value:(re=i(O().mark(function e(){var t,r,n,i,o,a,s,u=arguments;return O().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=0<u.length&&void 0!==u[0]?u[0]:0,e.next=3,this.getImageCount();case 3:return e.next=5,this.parseFileDirectoriesPerFile();case 5:i=n=r=0;case 8:if(!(i<this.imageFiles.length)){e.next=26;break}o=this.imageFiles[i],a=0;case 11:if(a<this.imageCounts[i]){if(t===r)return e.next=15,o.requestIFD(n);e.next=17}else e.next=22;break;case 15:return s=e.sent,e.abrupt("return",new A.default(s.fileDirectory,s.geoKeyDirectory,o.dataView,o.littleEndian,o.cache,o.source));case 17:r++,n++;case 19:a++,e.next=11;break;case 22:n=0;case 23:i++,e.next=8;break;case 26:throw new RangeError("Invalid image index");case 27:case"end":return e.stop()}},e,this)})),function(){return re.apply(this,arguments)})},{key:"getImageCount",value:(te=i(O().mark(function e(){var t;return O().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this.imageCount)return e.abrupt("return",this.imageCount);e.next=2;break;case 2:return t=[this.mainFile.getImageCount()].concat(this.overviewFiles.map(function(e){return e.getImageCount()})),e.next=5,Promise.all(t);case 5:return this.imageCounts=e.sent,this.imageCount=this.imageCounts.reduce(function(e,t){return e+t},0),e.abrupt("return",this.imageCount);case 8:case"end":return e.stop()}},e,this)})),function(){return te.apply(this,arguments)})}]);function R(e,t){var r;return d(this,R),(r=a(this,R)).mainFile=e,r.overviewFiles=t,r.imageFiles=[e].concat(t),r.fileDirectoriesPerFile=null,r.fileDirectoriesPerFileParsing=null,r.imageCount=null,r}function oe(){return(oe=i(O().mark(function e(t){var r,n,i=arguments;return O().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=1<i.length&&void 0!==i[1]?i[1]:{},n=2<i.length?i[2]:void 0,e.abrupt("return",B.fromSource((0,v.makeRemoteSource)(t,r),n));case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ae(){return(ae=i(O().mark(function e(t){var r,n,i=arguments;return O().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=1<i.length&&void 0!==i[1]?i[1]:{},n=2<i.length?i[2]:void 0,e.abrupt("return",B.fromSource((0,v.makeCustomSource)(t,r),n));case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}function se(){return(se=i(O().mark(function e(t,r){return O().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",B.fromSource((0,U.makeBufferSource)(t),r));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ue(){return(ue=i(O().mark(function e(t,r){return O().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",B.fromSource((0,q.makeFileSource)(t),r));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function le(){return(le=i(O().mark(function e(t,r){return O().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",B.fromSource((0,z.makeFileReaderSource)(t),r));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ce(){return(ce=i(O().mark(function e(t){var r,n,i,o,a=arguments;return O().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=1<a.length&&void 0!==a[1]?a[1]:[],n=2<a.length&&void 0!==a[2]?a[2]:{},o=3<a.length?a[3]:void 0,e.next=5,B.fromSource((0,v.makeRemoteSource)(t,n),o);case 5:return i=e.sent,e.next=8,Promise.all(r.map(function(e){return B.fromSource((0,v.makeRemoteSource)(e,n))}));case 8:return o=e.sent,e.abrupt("return",new ie(i,o));case 10:case"end":return e.stop()}},e)}))).apply(this,arguments)}t.MultiGeoTIFF=ie,t.fromUrl=function(e){return oe.apply(this,arguments)},t.fromCustomClient=function(e){return ae.apply(this,arguments)},t.fromArrayBuffer=function(e,t){return se.apply(this,arguments)},t.fromFile=function(e,t){return ue.apply(this,arguments)},t.fromBlob=function(e,t){return le.apply(this,arguments)},t.fromUrls=function(e){return ce.apply(this,arguments)},t.writeArrayBuffer=function(e,t){return(0,H.writeGeotiff)(e,t)}},{"./compression/basedecoder.js":21,"./compression/index.js":23,"./dataslice.js":30,"./dataview64.js":31,"./geotiffimage.js":33,"./geotiffwriter.js":34,"./globals.js":35,"./logging.js":36,"./pool.js":37,"./rgb.js":40,"./source/arraybuffer.js":41,"./source/client/base.js":44,"./source/file.js":48,"./source/filereader.js":49,"./source/remote.js":51}],33:[function(e,t,r){"use strict";function x(e){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||n(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o,a,s=[],u=!0,l=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=o.call(r)).done)&&(s.push(n.value),s.length!==t);u=!0);}catch(e){l=!0,i=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}(e,t)||n(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,t){var r;if(e)return"string"==typeof e?i(e,t):"Map"===(r="Object"===(r={}.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(e,t):void 0}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function k(){k=function(){return a};var u,a={},e=Object.prototype,l=e.hasOwnProperty,c=Object.defineProperty||function(e,t,r){e[t]=r.value},t="function"==typeof Symbol?Symbol:{},n=t.iterator||"@@iterator",r=t.asyncIterator||"@@asyncIterator",i=t.toStringTag||"@@toStringTag";function o(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{o({},"")}catch(u){o=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var i,o,a,s,t=t&&t.prototype instanceof A?t:A,t=Object.create(t.prototype),n=new S(n||[]);return c(t,"_invoke",{value:(i=e,o=r,a=n,s=h,function(e,t){if(s===d)throw Error("Generator is already running");if(s===g){if("throw"===e)throw t;return{value:u,done:!0}}for(a.method=e,a.arg=t;;){var r=a.delegate;if(r){r=function e(t,r){var n=r.method,i=t.iterator[n];if(i===u)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=u,e(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;n=f(i,t.iterator,r.arg);if("throw"===n.type)return r.method="throw",r.arg=n.arg,r.delegate=null,y;i=n.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=u),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}(r,a);if(r){if(r===y)continue;return r}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(s===h)throw s=g,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);s=d;r=f(i,o,a);if("normal"===r.type){if(s=a.done?g:p,r.arg===y)continue;return{value:r.arg,done:a.done}}"throw"===r.type&&(s=g,a.method="throw",a.arg=r.arg)}})}),t}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}a.wrap=s;var h="suspendedStart",p="suspendedYield",d="executing",g="completed",y={};function A(){}function m(){}function v(){}var t={},b=(o(t,n,function(){return this}),Object.getPrototypeOf),b=b&&b(b(j([]))),_=(b&&b!==e&&l.call(b,n)&&(t=b),v.prototype=A.prototype=Object.create(t));function w(e){["next","throw","return"].forEach(function(t){o(e,t,function(e){return this._invoke(t,e)})})}function E(a,s){var t;c(this,"_invoke",{value:function(r,n){function e(){return new s(function(e,t){!function t(e,r,n,i){var o,e=f(a[e],a,r);if("throw"!==e.type)return(r=(o=e.arg).value)&&"object"==x(r)&&l.call(r,"__await")?s.resolve(r.__await).then(function(e){t("next",e,n,i)},function(e){t("throw",e,n,i)}):s.resolve(r).then(function(e){o.value=e,n(o)},function(e){return t("throw",e,n,i)});i(e.arg)}(r,n,e,t)})}return t=t?t.then(e,e):e()}})}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function j(t){if(t||""===t){var r,e=t[n];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return r=-1,(e=function e(){for(;++r<t.length;)if(l.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=u,e.done=!0,e}).next=e}throw new TypeError(x(t)+" is not iterable")}return c(_,"constructor",{value:m.prototype=v,configurable:!0}),c(v,"constructor",{value:m,configurable:!0}),m.displayName=o(v,i,"GeneratorFunction"),a.isGeneratorFunction=function(e){e="function"==typeof e&&e.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},a.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,o(e,i,"GeneratorFunction")),e.prototype=Object.create(_),e},a.awrap=function(e){return{__await:e}},w(E.prototype),o(E.prototype,r,function(){return this}),a.AsyncIterator=E,a.async=function(e,t,r,n,i){void 0===i&&(i=Promise);var o=new E(s(e,t,r,n),i);return a.isGeneratorFunction(t)?o:o.next().then(function(e){return e.done?e.value:o.next()})},w(_),o(_,i,"Generator"),o(_,n,function(){return this}),o(_,"toString",function(){return"[object Generator]"}),a.keys=function(e){var t,r=Object(e),n=[];for(t in r)n.push(t);return n.reverse(),function e(){for(;n.length;){var t=n.pop();if(t in r)return e.value=t,e.done=!1,e}return e.done=!0,e}},a.values=j,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=u,this.done=!1,this.delegate=null,this.method="next",this.arg=u,this.tryEntries.forEach(I),!e)for(var t in this)"t"===t.charAt(0)&&l.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=u)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(r){if(this.done)throw r;var n=this;function e(e,t){return o.type="throw",o.arg=r,n.next=e,t&&(n.method="next",n.arg=u),!!t}for(var t=this.tryEntries.length-1;0<=t;--t){var i=this.tryEntries[t],o=i.completion;if("root"===i.tryLoc)return e("end");if(i.tryLoc<=this.prev){var a=l.call(i,"catchLoc"),s=l.call(i,"finallyLoc");if(a&&s){if(this.prev<i.catchLoc)return e(i.catchLoc,!0);if(this.prev<i.finallyLoc)return e(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return e(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return e(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;0<=r;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&l.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}var o=(i=i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc?null:i)?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var r,n,i=this.tryEntries[t];if(i.tryLoc===e)return"throw"===(r=i.completion).type&&(n=r.arg,I(i)),n}throw Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:j(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=u),y}},a}function u(e,t,r,n,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return r(e)}s.done?t(u):Promise.resolve(u).then(n,i)}function d(s){return function(){var e=this,a=arguments;return new Promise(function(t,r){var n=s.apply(e,a);function i(e){u(n,t,r,i,o,"next",e)}function o(e){u(n,t,r,i,o,"throw",e)}i(void 0)})}}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=x(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=x(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==x(e)?e:e+""}(n.key),n)}}function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var s=e("@petamoriken/float16"),l=a(e("xml-utils/get-attribute.js")),h=a(e("xml-utils/find-tags-by-name.js")),I=e("./globals.js"),S=e("./rgb.js"),_=e("./compression/index.js"),B=e("./resample.js");function w(e,t,r){switch(e){case 1:if(t<=8)return new Uint8Array(r);if(t<=16)return new Uint16Array(r);if(t<=32)return new Uint32Array(r);break;case 2:if(8===t)return new Int8Array(r);if(16===t)return new Int16Array(r);if(32===t)return new Int32Array(r);break;case 3:switch(t){case 16:case 32:return new Float32Array(r);case 64:return new Float64Array(r)}}throw Error("Unsupported data format/bitsPerSample")}e=function e(t,r,n,i,o,a){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.fileDirectory=t,this.geoKeys=r,this.dataView=n,this.littleEndian=i,this.tiles=o?{}:null,this.isTiled=!t.StripOffsets;r=t.PlanarConfiguration;if(this.planarConfiguration=void 0===r?1:r,1!==this.planarConfiguration&&2!==this.planarConfiguration)throw new Error("Invalid planar configuration.");this.source=a},(v=[{key:"getFileDirectory",value:function(){return this.fileDirectory}},{key:"getGeoKeys",value:function(){return this.geoKeys}},{key:"getWidth",value:function(){return this.fileDirectory.ImageWidth}},{key:"getHeight",value:function(){return this.fileDirectory.ImageLength}},{key:"getSamplesPerPixel",value:function(){return void 0!==this.fileDirectory.SamplesPerPixel?this.fileDirectory.SamplesPerPixel:1}},{key:"getTileWidth",value:function(){return this.isTiled?this.fileDirectory.TileWidth:this.getWidth()}},{key:"getTileHeight",value:function(){return this.isTiled?this.fileDirectory.TileLength:void 0!==this.fileDirectory.RowsPerStrip?Math.min(this.fileDirectory.RowsPerStrip,this.getHeight()):this.getHeight()}},{key:"getBlockWidth",value:function(){return this.getTileWidth()}},{key:"getBlockHeight",value:function(e){return this.isTiled||(e+1)*this.getTileHeight()<=this.getHeight()?this.getTileHeight():this.getHeight()-e*this.getTileHeight()}},{key:"getBytesPerPixel",value:function(){for(var e=0,t=0;t<this.fileDirectory.BitsPerSample.length;++t)e+=this.getSampleByteSize(t);return e}},{key:"getSampleByteSize",value:function(e){if(e>=this.fileDirectory.BitsPerSample.length)throw new RangeError("Sample index ".concat(e," is out of range."));return Math.ceil(this.fileDirectory.BitsPerSample[e]/8)}},{key:"getReaderForSample",value:function(e){var t=this.fileDirectory.SampleFormat?this.fileDirectory.SampleFormat[e]:1,r=this.fileDirectory.BitsPerSample[e];switch(t){case 1:if(r<=8)return DataView.prototype.getUint8;if(r<=16)return DataView.prototype.getUint16;if(r<=32)return DataView.prototype.getUint32;break;case 2:if(r<=8)return DataView.prototype.getInt8;if(r<=16)return DataView.prototype.getInt16;if(r<=32)return DataView.prototype.getInt32;break;case 3:switch(r){case 16:return function(e,t){return(0,s.getFloat16)(this,e,t)};case 32:return DataView.prototype.getFloat32;case 64:return DataView.prototype.getFloat64}}throw Error("Unsupported data format/bitsPerSample")}},{key:"getSampleFormat",value:function(){return this.fileDirectory.SampleFormat?this.fileDirectory.SampleFormat[0<arguments.length&&void 0!==arguments[0]?arguments[0]:0]:1}},{key:"getBitsPerSample",value:function(){return this.fileDirectory.BitsPerSample[0<arguments.length&&void 0!==arguments[0]?arguments[0]:0]}},{key:"getArrayForSample",value:function(e,t){return w(this.getSampleFormat(e),this.getBitsPerSample(e),t)}},{key:"getTileOrStrip",value:(m=d(k().mark(function e(t,a,r,s,n){var i,o,u,l,c,f,h,p=this;return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=Math.ceil(this.getWidth()/this.getTileWidth()),c=Math.ceil(this.getHeight()/this.getTileHeight()),u=this.tiles,1===this.planarConfiguration?o=a*i+t:2===this.planarConfiguration&&(o=r*i*c+a*i+t),c=(this.isTiled?(l=this.fileDirectory.TileOffsets[o],this.fileDirectory.TileByteCounts):(l=this.fileDirectory.StripOffsets[o],this.fileDirectory.StripByteCounts))[o],e.next=7,this.source.fetch([{offset:l,length:c}],n);case 7:return f=e.sent[0],null!==u&&u[o]?h=u[o]:(h=d(k().mark(function e(){var n,i,o;return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.decode(p.fileDirectory,f);case 2:return n=e.sent,i=p.getSampleFormat(),o=p.getBitsPerSample(),r=o,(1===(t=i)||2===t)&&r<=32&&r%8==0||3===t&&(16===r||32===r||64===r)||(n=function(e,t,r,n,i,o,a){var s=new DataView(e),u=2===r?1:n,l=w(t,i,2===r?a*o:a*o*n),c=parseInt("1".repeat(i),2);if(1===t){var f=o*(1===r?n*i:i);0!=(7&f)&&(f=f+7&-8);for(var h=0;h<a;++h)for(var p=h*f,d=0;d<o;++d)for(var g=p+d*u*i,y=0;y<u;++y){var A,m=g+y*i,v=(h*o+d)*u+y,b=Math.floor(m/8),m=m%8;m+i<=8?l[v]=s.getUint8(b)>>8-i-m&c:m+i<=16?l[v]=s.getUint16(b)>>16-i-m&c:m+i<=24?(A=s.getUint16(b)<<8|s.getUint8(b+2),l[v]=A>>24-i-m&c):l[v]=s.getUint32(b)>>32-i-m&c}}return l.buffer}(n,i,p.planarConfiguration,p.getSamplesPerPixel(),o,p.getTileWidth(),p.getBlockHeight(a))),e.abrupt("return",n);case 7:case"end":return e.stop()}var t,r},e)}))(),null!==u&&(u[o]=h)),e.t0=t,e.t1=a,e.t2=r,e.next=14,h;case 14:return e.t3=e.sent,e.abrupt("return",{x:e.t0,y:e.t1,sample:e.t2,data:e.t3});case 16:case"end":return e.stop()}},e,this)})),function(e,t,r,n,i){return m.apply(this,arguments)})},{key:"_readRaster",value:(A=d(k().mark(function e(p,d,g,y,r,t,n,i,o){var A,m,v,b,a,s,u,_,w,E,C,l,c,I,f,S,j,h,x,O,P=this;return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(A=this.getTileWidth(),m=this.getTileHeight(),v=this.getWidth(),b=this.getHeight(),a=Math.max(Math.floor(p[0]/A),0),s=Math.min(Math.ceil(p[2]/A),Math.ceil(v/A)),O=Math.max(Math.floor(p[1]/m),0),u=Math.min(Math.ceil(p[3]/m),Math.ceil(b/m)),_=p[2]-p[0],w=this.getBytesPerPixel(),E=[],C=[],l=0;l<d.length;++l)1===this.planarConfiguration?E.push(function(e,t,r){for(var n=0,i=t;i<r;++i)n+=e[i];return n}(this.fileDirectory.BitsPerSample,0,d[l])/8):E.push(0),C.push(this.getReaderForSample(d[l]));c=[],I=this.littleEndian,f=O;case 16:if(!(f<u)){e.next=34;break}S=a;case 18:if(!(S<s)){e.next=31;break}j=void 0,1===this.planarConfiguration&&(j=this.getTileOrStrip(S,f,0,r,o)),h=k().mark(function e(){var h,t;return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=d[h=x],2===P.planarConfiguration&&(w=P.getSampleByteSize(t),j=P.getTileOrStrip(S,f,t,r,o)),t=j.then(function(e){for(var t=e.data,r=new DataView(t),t=P.getBlockHeight(e.y),n=e.y*m,i=e.x*A,e=(e.x+1)*A,o=C[h],a=Math.min(t,t-(n+t-p[3]),b-n),s=Math.min(A,A-(e-p[2]),v-i),u=Math.max(0,p[1]-n);u<a;++u)for(var l=Math.max(0,p[0]-i);l<s;++l){var c=(u*A+l)*w,c=o.call(r,c+E[h],I),f=void 0;y?(f=(u+n-p[1])*_*d.length+(l+i-p[0])*d.length+h,g[f]=c):(f=(u+n-p[1])*_+l+i-p[0],g[h][f]=c)}}),c.push(t);case 5:case"end":return e.stop()}},e)}),x=0;case 23:if(x<d.length)return e.delegateYield(h(),"t0",25);e.next=28;break;case 25:++x,e.next=23;break;case 28:++S,e.next=18;break;case 31:++f,e.next=16;break;case 34:return e.next=36,Promise.all(c);case 36:if(t&&p[2]-p[0]!==t||n&&p[3]-p[1]!==n)return(O=y?(0,B.resampleInterleaved)(g,p[2]-p[0],p[3]-p[1],t,n,d.length,i):(0,B.resample)(g,p[2]-p[0],p[3]-p[1],t,n,i)).width=t,O.height=n,e.abrupt("return",O);e.next=41;break;case 41:return g.width=t||p[2]-p[0],g.height=n||p[3]-p[1],e.abrupt("return",g);case 44:case"end":return e.stop()}},e,this)})),function(e,t,r,n,i,o,a,s,u){return A.apply(this,arguments)})},{key:"readRasters",value:(y=d(k().mark(function e(){var t,r,n,i,o,a,s,u,l,c,f,h,p,d,g,y,A,m,v,b=arguments;return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(l=(u=0<b.length&&void 0!==b[0]?b[0]:{}).window,r=u.samples,t=void 0===r?[]:r,r=u.interleave,n=u.pool,n=void 0===n?null:n,i=u.width,o=u.height,a=u.resampleMethod,s=u.fillValue,u=u.signal,(l=l||[0,0,this.getWidth(),this.getHeight()])[0]>l[2]||l[1]>l[3])throw new Error("Invalid subsets");e.next=4;break;case 4:if(g=l[2]-l[0],y=l[3]-l[1],c=g*y,f=this.getSamplesPerPixel(),t&&t.length)e.next=12;else{for(h=0;h<f;++h)t.push(h);e.next=19}break;case 12:p=0;case 13:if(p<t.length){if(t[p]>=f)return e.abrupt("return",Promise.reject(new RangeError("Invalid sample index '".concat(t[p],"'."))));e.next=16}else e.next=19;break;case 16:++p,e.next=13;break;case 19:if(r)g=this.fileDirectory.SampleFormat?Math.max.apply(null,this.fileDirectory.SampleFormat):1,y=Math.max.apply(null,this.fileDirectory.BitsPerSample),d=w(g,y,c*t.length),s&&d.fill(s);else for(d=[],A=0;A<t.length;++A)m=this.getArrayForSample(t[A],c),Array.isArray(s)&&A<s.length?m.fill(s[A]):s&&!Array.isArray(s)&&m.fill(s),d.push(m);if(e.t0=n,e.t0){e.next=25;break}return e.next=24,(0,_.getDecoder)(this.fileDirectory);case 24:e.t0=e.sent;case 25:return v=e.t0,e.next=28,this._readRaster(l,t,d,r,v,i,o,a,u);case 28:return v=e.sent,e.abrupt("return",v);case 30:case"end":return e.stop()}},e,this)})),function(){return y.apply(this,arguments)})},{key:"readRGB",value:(g=d(k().mark(function e(){var t,r,n,i,o,a,s,u,l,c,f,h,p,d,g,y,A,m,v,b,_,w,E,C=arguments;return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=(u=0<C.length&&void 0!==C[0]?C[0]:{}).window,r=u.interleave,r=void 0===r||r,n=u.pool,n=void 0===n?null:n,i=u.width,o=u.height,a=u.resampleMethod,s=u.enableAlpha,s=void 0!==s&&s,u=u.signal,(l=t||[0,0,this.getWidth(),this.getHeight()])[0]>l[2]||l[1]>l[3])throw new Error("Invalid subsets");e.next=4;break;case 4:if((c=this.fileDirectory.PhotometricInterpretation)!==I.photometricInterpretations.RGB){e.next=9;break}if(f=[0,1,2],this.fileDirectory.ExtraSamples!==I.ExtraSamplesValues.Unspecified&&s)for(f=[],h=0;h<this.fileDirectory.BitsPerSample.length;h+=1)f.push(h);return e.abrupt("return",this.readRasters({window:t,interleave:r,samples:f,pool:n,width:i,height:o,resampleMethod:a,signal:u}));case 9:e.t0=c,e.next=e.t0===I.photometricInterpretations.WhiteIsZero||e.t0===I.photometricInterpretations.BlackIsZero||e.t0===I.photometricInterpretations.Palette?12:e.t0===I.photometricInterpretations.CMYK?14:e.t0===I.photometricInterpretations.YCbCr||e.t0===I.photometricInterpretations.CIELab?16:18;break;case 12:return p=[0],e.abrupt("break",19);case 14:return p=[0,1,2,3],e.abrupt("break",19);case 16:return p=[0,1,2],e.abrupt("break",19);case 18:throw new Error("Invalid or unsupported photometric interpretation.");case 19:return d={window:l,interleave:!0,samples:p,pool:n,width:i,height:o,resampleMethod:a,signal:u},g=this.fileDirectory,e.next=23,this.readRasters(d);case 23:y=e.sent,A=Math.pow(2,this.fileDirectory.BitsPerSample[0]),e.t1=c,e.next=e.t1===I.photometricInterpretations.WhiteIsZero?28:e.t1===I.photometricInterpretations.BlackIsZero?30:e.t1===I.photometricInterpretations.Palette?32:e.t1===I.photometricInterpretations.CMYK?34:e.t1===I.photometricInterpretations.YCbCr?36:e.t1===I.photometricInterpretations.CIELab?38:40;break;case 28:return m=(0,S.fromWhiteIsZero)(y,A),e.abrupt("break",41);case 30:return m=(0,S.fromBlackIsZero)(y,A),e.abrupt("break",41);case 32:return m=(0,S.fromPalette)(y,g.ColorMap),e.abrupt("break",41);case 34:return m=(0,S.fromCMYK)(y),e.abrupt("break",41);case 36:return m=(0,S.fromYCbCr)(y),e.abrupt("break",41);case 38:return m=(0,S.fromCIELab)(y),e.abrupt("break",41);case 40:throw new Error("Unsupported photometric interpretation.");case 41:if(!r){for(v=new Uint8Array(m.length/3),b=new Uint8Array(m.length/3),_=new Uint8Array(m.length/3),E=w=0;w<m.length;w+=3,++E)v[E]=m[w],b[E]=m[w+1],_[E]=m[w+2];m=[v,b,_]}return m.width=y.width,m.height=y.height,e.abrupt("return",m);case 45:case"end":return e.stop()}},e,this)})),function(){return g.apply(this,arguments)})},{key:"getTiePoints",value:function(){if(!this.fileDirectory.ModelTiepoint)return[];for(var e=[],t=0;t<this.fileDirectory.ModelTiepoint.length;t+=6)e.push({i:this.fileDirectory.ModelTiepoint[t],j:this.fileDirectory.ModelTiepoint[t+1],k:this.fileDirectory.ModelTiepoint[t+2],x:this.fileDirectory.ModelTiepoint[t+3],y:this.fileDirectory.ModelTiepoint[t+4],z:this.fileDirectory.ModelTiepoint[t+5]});return e}},{key:"getGDALMetadata",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,e={};if(!this.fileDirectory.GDAL_METADATA)return null;for(var r=this.fileDirectory.GDAL_METADATA,n=(0,h.default)(r,"Item"),n=null===t?n.filter(function(e){return void 0===(0,l.default)(e,"sample")}):n.filter(function(e){return Number((0,l.default)(e,"sample"))===t}),i=0;i<n.length;++i){var o=n[i];e[(0,l.default)(o,"name")]=o.inner}return e}},{key:"getGDALNoData",value:function(){var e;return this.fileDirectory.GDAL_NODATA?(e=this.fileDirectory.GDAL_NODATA,Number(e.substring(0,e.length-1))):null}},{key:"getOrigin",value:function(){var e=this.fileDirectory.ModelTiepoint,t=this.fileDirectory.ModelTransformation;if(e&&6===e.length)return[e[3],e[4],e[5]];if(t)return[t[3],t[7],t[11]];throw new Error("The image does not have an affine transformation.")}},{key:"getResolution",value:function(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,r=this.fileDirectory.ModelPixelScale,n=this.fileDirectory.ModelTransformation;if(r)return[r[0],-r[1],r[2]];if(n)return[n[0],-n[5],n[10]];if(t)return n=(r=f(t.getResolution(),3))[0],e=r[1],r=r[2],[n*t.getWidth()/this.getWidth(),e*t.getHeight()/this.getHeight(),r*t.getWidth()/this.getWidth()];throw new Error("The image does not have an affine transformation.")}},{key:"pixelIsArea",value:function(){return 1===this.geoKeys.GTRasterTypeGeoKey}},{key:"getBoundingBox",value:function(){var r,n,i,o,a,s,e,t,u=this.getHeight(),l=this.getWidth();return this.fileDirectory.ModelTransformation?(e=f(this.fileDirectory.ModelTransformation,8),r=e[0],n=e[1],e[2],i=e[3],o=e[4],a=e[5],e[6],s=e[7],l=(e=[[0,0],[0,u],[l,0],[l,u]].map(function(e){var e=f(e,2),t=e[0],e=e[1];return[i+r*t+n*e,s+o*t+a*e]})).map(function(e){return e[0]}),u=e.map(function(e){return e[1]}),[Math.min.apply(Math,c(l)),Math.min.apply(Math,c(u)),Math.max.apply(Math,c(l)),Math.max.apply(Math,c(u))]):(e=this.getOrigin(),l=this.getResolution(),u=e[0],e=e[1],t=u+l[0]*this.getWidth(),l=e+l[1]*this.getHeight(),[Math.min(u,t),Math.min(e,l),Math.max(u,t),Math.max(e,l)])}}])&&o(e.prototype,v),p&&o(e,p),Object.defineProperty(e,"prototype",{writable:!1});var p,g,y,A,m,v=e;r.default=v},{"./compression/index.js":23,"./globals.js":35,"./resample.js":39,"./rgb.js":40,"@petamoriken/float16":5,"xml-utils/find-tags-by-name.js":455,"xml-utils/get-attribute.js":456}],34:[function(e,t,r){"use strict";function v(e,t){var r,n,i,o,a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(a)return i=!(n=!0),{s:function(){a=a.call(e)},n:function(){var e=a.next();return n=e.done,e},e:function(e){i=!0,r=e},f:function(){try{n||null==a.return||a.return()}finally{if(i)throw r}}};if(Array.isArray(e)||(a=function(e,t){{var r;if(e)return"string"==typeof e?s(e,t):"Map"===(r="Object"===(r={}.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length)return a&&(e=a),o=0,{s:t=function(){},n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}Object.defineProperty(r,"__esModule",{value:!0}),r.writeGeotiff=void 0;function a(a,s,e,u){var l=e,e=Object.keys(u).filter(function(e){return null!=e&&"undefined"!==e});a.writeUshort(s,l,e.length);var c,f=(l+=2)+12*e.length+4,t=v(e);try{for(t.s();!(c=t.n()).done;)!function(){var e=c.value,t=null,r=("number"==typeof e?t=e:"string"==typeof e&&(t=parseInt(e,10)),b.fieldTagTypes[t]),n=h[r];if(null==r||void 0===r)throw new Error("unknown type of tag: ".concat(t));var i=u[e];if(void 0===i)throw new Error("failed to get value for key ".concat(e));"ASCII"===r&&"string"==typeof i&&!1===(0,_.endsWith)(i,"\0")&&(i+="\0");var e=i.length,t=(a.writeUshort(s,l,t),l+=2,a.writeUshort(s,l,n),l+=2,a.writeUint(s,l,e),[-1,1,1,2,4,8,0,0,0,0,0,0,8][n]*e),o=l+=4;4<t&&(a.writeUint(s,l,f),o=f),"ASCII"===r?a.writeASCII(s,o,i):"SHORT"===r?(0,_.times)(e,function(e){a.writeUshort(s,o+2*e,i[e])}):"LONG"===r?(0,_.times)(e,function(e){a.writeUint(s,o+4*e,i[e])}):"RATIONAL"===r?(0,_.times)(e,function(e){a.writeUint(s,o+8*e,Math.round(1e4*i[e])),a.writeUint(s,o+8*e+4,1e4)}):"DOUBLE"===r&&(0,_.times)(e,function(e){a.writeDouble(s,o+8*e,i[e])}),4<t&&(f+=t+=1&t),l+=4}()}catch(a){t.e(a)}finally{t.f()}return[l,f]}var b=e("./globals.js"),_=e("./utils.js"),e=(0,_.invert)(b.fieldTagNames),n=(0,_.invert)(b.geoKeyNames),w={},h=((0,_.assign)(w,e),(0,_.assign)(w,n),(0,_.invert)(b.fieldTypeNames)),E=1e3,u={nextZero:function(e,t){for(var r=t;0!==e[r];)r++;return r},readUshort:function(e,t){return e[t]<<8|e[t+1]},readShort:function(e,t){var r=u.ui8;return r[0]=e[t+1],r[1]=e[t+0],u.i16[0]},readInt:function(e,t){var r=u.ui8;return r[0]=e[t+3],r[1]=e[t+2],r[2]=e[t+1],r[3]=e[t+0],u.i32[0]},readUint:function(e,t){var r=u.ui8;return r[0]=e[t+3],r[1]=e[t+2],r[2]=e[t+1],r[3]=e[t+0],u.ui32[0]},readASCII:function(t,r,e){return e.map(function(e){return String.fromCharCode(t[r+e])}).join("")},readFloat:function(t,r){var n=u.ui8;return(0,_.times)(4,function(e){n[e]=t[r+3-e]}),u.fl32[0]},readDouble:function(t,r){var n=u.ui8;return(0,_.times)(8,function(e){n[e]=t[r+7-e]}),u.fl64[0]},writeUshort:function(e,t,r){e[t]=r>>8&255,e[t+1]=255&r},writeUint:function(e,t,r){e[t]=r>>24&255,e[t+1]=r>>16&255,e[t+2]=r>>8&255,e[t+3]=r>>0&255},writeASCII:function(t,r,n){(0,_.times)(n.length,function(e){t[r+e]=n.charCodeAt(e)})},ui8:new Uint8Array(8)},C=(u.fl64=new Float64Array(u.ui8.buffer),u.writeDouble=function(t,r,e){u.fl64[0]=e,(0,_.times)(8,function(e){t[r+e]=u.ui8[7-e]})},function(r){var n=new Uint8Array(E),i=u,o=(n[0]=77,n[1]=77,n[3]=42,8);if(i.writeUint(n,4,o),r.forEach(function(e,t){e=a(i,n,o,e);o=e[1],t<r.length-1&&i.writeUint(n,e[0],o)}),n.slice)return n.slice(0,o).buffer;for(var e=new Uint8Array(o),t=0;t<o;t++)e[t]=n[t];return e.buffer}),I=[["Compression",1],["PlanarConfiguration",1],["ExtraSamples",0]];r.writeGeotiff=function(n,o){"number"==typeof n[0]?(f=o.height||o.ImageLength,t=o.width||o.ImageWidth,e=n.length/(f*t),i=n):(e=n.length,f=n[0].length,t=n[0][0].length,i=[],(0,_.times)(f,function(r){(0,_.times)(t,function(t){(0,_.times)(e,function(e){i.push(n[e][r][t])})})})),o.ImageLength=f,delete o.height,o.ImageWidth=t,delete o.width,o.BitsPerSample||(o.BitsPerSample=(0,_.times)(e,function(){return 8})),I.forEach(function(e){var t=e[0];o[t]||(e=e[1],o[t]=e)}),o.PhotometricInterpretation||(o.PhotometricInterpretation=3===o.BitsPerSample.length?2:1),o.SamplesPerPixel||(o.SamplesPerPixel=[e]),o.StripByteCounts||(o.StripByteCounts=[e*f*t]),o.ModelPixelScale||(o.ModelPixelScale=[360/t,180/f,0]),o.SampleFormat||(o.SampleFormat=(0,_.times)(e,function(){return 1})),o.hasOwnProperty("GeographicTypeGeoKey")||o.hasOwnProperty("ProjectedCSTypeGeoKey")||(o.GeographicTypeGeoKey=4326,o.ModelTiepoint=[0,0,0,-180,90,0],o.GeogCitationGeoKey="WGS 84",o.GTModelTypeGeoKey=2);var e,t,i,r,a,s=Object.keys(o).filter(function(e){return(0,_.endsWith)(e,"GeoKey")}).sort(function(e,t){return w[e]-w[t]});o.GeoAsciiParams||(r="",s.forEach(function(e){var t=Number(w[e]);"ASCII"===b.fieldTagTypes[t]&&(r+="".concat(o[e].toString(),"\0"))}),0<r.length&&(o.GeoAsciiParams=r)),o.GeoKeyDirectory||(a=[1,1,0,s.length],s.forEach(function(e){var t,r,n,i=Number(w[e]);a.push(i),"SHORT"===b.fieldTagTypes[i]?(t=1,r=0,n=o[e]):"GeogCitationGeoKey"===e?(t=o.GeoAsciiParams.length,r=Number(w.GeoAsciiParams),n=0):console.log("[geotiff.js] couldn't get TIFFTagLocation for ".concat(e)),a.push(r),a.push(t),a.push(n)}),o.GeoKeyDirectory=a);var u,l=v(s);try{for(l.s();!(u=l.n()).done;){var c=u.value;o.hasOwnProperty(c)&&delete o[c]}}catch(n){l.e(n)}finally{l.f()}["Compression","ExtraSamples","GeographicTypeGeoKey","GTModelTypeGeoKey","GTRasterTypeGeoKey","ImageLength","ImageWidth","Orientation","PhotometricInterpretation","ProjectedCSTypeGeoKey","PlanarConfiguration","ResolutionUnit","SamplesPerPixel","XPosition","YPosition","RowsPerStrip"].forEach(function(e){o[e]&&(o[e]=(e=o[e],Array.isArray(e)?e:[e]))});var f,s=function(e){var t,r={};for(t in e)"StripOffsets"!==t&&(w[t]||console.error(t,"not in name2code:",Object.keys(w)),r[w[t]]=e[t]);return r}(o),h=i,p=t,d=s;if(null==f)throw new Error("you passed into encodeImage a width of type ".concat(f));if(null==p)throw new Error("you passed into encodeImage a width of type ".concat(p));var g={256:[p],257:[f],273:[E],278:[f],305:"geotiff.js"};if(d)for(var y in d)d.hasOwnProperty(y)&&(g[y]=d[y]);var A=new Uint8Array(C([g])),h=new Uint8Array(h),m=new Uint8Array(E+p*f*g[277]);return(0,_.times)(A.length,function(e){m[e]=A[e]}),(0,_.forEach)(h,function(e,t){m[E+t]=e}),m.buffer}},{"./globals.js":35,"./utils.js":52}],35:[function(e,t,r){"use strict";for(var n in Object.defineProperty(r,"__esModule",{value:!0}),r.geoKeys=r.geoKeyNames=r.LercAddCompression=r.LercParameters=r.ExtraSamplesValues=r.photometricInterpretations=r.fieldTypes=r.fieldTypeNames=r.arrayFields=r.fieldTagTypes=r.fieldTags=r.fieldTagNames=void 0,r.fieldTagNames={315:"Artist",258:"BitsPerSample",265:"CellLength",264:"CellWidth",320:"ColorMap",259:"Compression",33432:"Copyright",306:"DateTime",338:"ExtraSamples",266:"FillOrder",289:"FreeByteCounts",288:"FreeOffsets",291:"GrayResponseCurve",290:"GrayResponseUnit",316:"HostComputer",270:"ImageDescription",257:"ImageLength",256:"ImageWidth",271:"Make",281:"MaxSampleValue",280:"MinSampleValue",272:"Model",254:"NewSubfileType",274:"Orientation",262:"PhotometricInterpretation",284:"PlanarConfiguration",296:"ResolutionUnit",278:"RowsPerStrip",277:"SamplesPerPixel",305:"Software",279:"StripByteCounts",273:"StripOffsets",255:"SubfileType",263:"Threshholding",282:"XResolution",283:"YResolution",326:"BadFaxLines",327:"CleanFaxData",343:"ClipPath",328:"ConsecutiveBadFaxLines",433:"Decode",434:"DefaultImageColor",269:"DocumentName",336:"DotRange",321:"HalftoneHints",346:"Indexed",347:"JPEGTables",285:"PageName",297:"PageNumber",317:"Predictor",319:"PrimaryChromaticities",532:"ReferenceBlackWhite",339:"SampleFormat",340:"SMinSampleValue",341:"SMaxSampleValue",559:"StripRowCounts",330:"SubIFDs",292:"T4Options",293:"T6Options",325:"TileByteCounts",323:"TileLength",324:"TileOffsets",322:"TileWidth",301:"TransferFunction",318:"WhitePoint",344:"XClipPathUnits",286:"XPosition",529:"YCbCrCoefficients",531:"YCbCrPositioning",530:"YCbCrSubSampling",345:"YClipPathUnits",287:"YPosition",37378:"ApertureValue",40961:"ColorSpace",36868:"DateTimeDigitized",36867:"DateTimeOriginal",34665:"Exif IFD",36864:"ExifVersion",33434:"ExposureTime",41728:"FileSource",37385:"Flash",40960:"FlashpixVersion",33437:"FNumber",42016:"ImageUniqueID",37384:"LightSource",37500:"MakerNote",37377:"ShutterSpeedValue",37510:"UserComment",33723:"IPTC",34675:"ICC Profile",700:"XMP",42112:"GDAL_METADATA",42113:"GDAL_NODATA",34377:"Photoshop",33550:"ModelPixelScale",33922:"ModelTiepoint",34264:"ModelTransformation",34735:"GeoKeyDirectory",34736:"GeoDoubleParams",34737:"GeoAsciiParams",50674:"LercParameters"},r.fieldTags={},r.fieldTagNames)r.fieldTagNames.hasOwnProperty(n)&&(r.fieldTags[r.fieldTagNames[n]]=parseInt(n,10));for(var i in r.fieldTagTypes={256:"SHORT",257:"SHORT",258:"SHORT",259:"SHORT",262:"SHORT",273:"LONG",274:"SHORT",277:"SHORT",278:"LONG",279:"LONG",282:"RATIONAL",283:"RATIONAL",284:"SHORT",286:"SHORT",287:"RATIONAL",296:"SHORT",297:"SHORT",305:"ASCII",306:"ASCII",338:"SHORT",339:"SHORT",513:"LONG",514:"LONG",1024:"SHORT",1025:"SHORT",2048:"SHORT",2049:"ASCII",3072:"SHORT",3073:"ASCII",33550:"DOUBLE",33922:"DOUBLE",34264:"DOUBLE",34665:"LONG",34735:"SHORT",34736:"DOUBLE",34737:"ASCII",42113:"ASCII"},r.arrayFields=[r.fieldTags.BitsPerSample,r.fieldTags.ExtraSamples,r.fieldTags.SampleFormat,r.fieldTags.StripByteCounts,r.fieldTags.StripOffsets,r.fieldTags.StripRowCounts,r.fieldTags.TileByteCounts,r.fieldTags.TileOffsets,r.fieldTags.SubIFDs],r.fieldTypeNames={1:"BYTE",2:"ASCII",3:"SHORT",4:"LONG",5:"RATIONAL",6:"SBYTE",7:"UNDEFINED",8:"SSHORT",9:"SLONG",10:"SRATIONAL",11:"FLOAT",12:"DOUBLE",13:"IFD",16:"LONG8",17:"SLONG8",18:"IFD8"},r.fieldTypes={},r.fieldTypeNames)r.fieldTypeNames.hasOwnProperty(i)&&(r.fieldTypes[r.fieldTypeNames[i]]=parseInt(i,10));for(var o in r.photometricInterpretations={WhiteIsZero:0,BlackIsZero:1,RGB:2,Palette:3,TransparencyMask:4,CMYK:5,YCbCr:6,CIELab:8,ICCLab:9},r.ExtraSamplesValues={Unspecified:0,Assocalpha:1,Unassalpha:2},r.LercParameters={Version:0,AddCompression:1},r.LercAddCompression={None:0,Deflate:1,Zstandard:2},r.geoKeyNames={1024:"GTModelTypeGeoKey",1025:"GTRasterTypeGeoKey",1026:"GTCitationGeoKey",2048:"GeographicTypeGeoKey",2049:"GeogCitationGeoKey",2050:"GeogGeodeticDatumGeoKey",2051:"GeogPrimeMeridianGeoKey",2052:"GeogLinearUnitsGeoKey",2053:"GeogLinearUnitSizeGeoKey",2054:"GeogAngularUnitsGeoKey",2055:"GeogAngularUnitSizeGeoKey",2056:"GeogEllipsoidGeoKey",2057:"GeogSemiMajorAxisGeoKey",2058:"GeogSemiMinorAxisGeoKey",2059:"GeogInvFlatteningGeoKey",2060:"GeogAzimuthUnitsGeoKey",2061:"GeogPrimeMeridianLongGeoKey",2062:"GeogTOWGS84GeoKey",3072:"ProjectedCSTypeGeoKey",3073:"PCSCitationGeoKey",3074:"ProjectionGeoKey",3075:"ProjCoordTransGeoKey",3076:"ProjLinearUnitsGeoKey",3077:"ProjLinearUnitSizeGeoKey",3078:"ProjStdParallel1GeoKey",3079:"ProjStdParallel2GeoKey",3080:"ProjNatOriginLongGeoKey",3081:"ProjNatOriginLatGeoKey",3082:"ProjFalseEastingGeoKey",3083:"ProjFalseNorthingGeoKey",3084:"ProjFalseOriginLongGeoKey",3085:"ProjFalseOriginLatGeoKey",3086:"ProjFalseOriginEastingGeoKey",3087:"ProjFalseOriginNorthingGeoKey",3088:"ProjCenterLongGeoKey",3089:"ProjCenterLatGeoKey",3090:"ProjCenterEastingGeoKey",3091:"ProjCenterNorthingGeoKey",3092:"ProjScaleAtNatOriginGeoKey",3093:"ProjScaleAtCenterGeoKey",3094:"ProjAzimuthAngleGeoKey",3095:"ProjStraightVertPoleLongGeoKey",3096:"ProjRectifiedGridAngleGeoKey",4096:"VerticalCSTypeGeoKey",4097:"VerticalCitationGeoKey",4098:"VerticalDatumGeoKey",4099:"VerticalUnitsGeoKey"},r.geoKeys={},r.geoKeyNames)r.geoKeyNames.hasOwnProperty(o)&&(r.geoKeys[r.geoKeyNames[o]]=parseInt(o,10))},{}],36:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}Object.defineProperty(r,"__esModule",{value:!0}),r.timeEnd=r.time=r.error=r.warn=r.info=r.log=r.debug=r.setLogger=void 0;o=function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function")},(a=[{key:"log",value:function(){}},{key:"debug",value:function(){}},{key:"info",value:function(){}},{key:"warn",value:function(){}},{key:"error",value:function(){}},{key:"time",value:function(){}},{key:"timeEnd",value:function(){}}])&&n(o.prototype,a),s&&n(o,s),Object.defineProperty(o,"prototype",{writable:!1});var o,a,s,u=o,l=new u;r.setLogger=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new u;l=e},r.debug=function(){return l.debug.apply(l,arguments)},r.log=function(){return l.log.apply(l,arguments)},r.info=function(){return l.info.apply(l,arguments)},r.warn=function(){return l.warn.apply(l,arguments)},r.error=function(){return l.error.apply(l,arguments)},r.time=function(){return l.time.apply(l,arguments)},r.timeEnd=function(){return l.timeEnd.apply(l,arguments)}},{}],37:[function(a,e,t){"use strict";function x(e){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(){O=function(){return a};var u,a={},e=Object.prototype,l=e.hasOwnProperty,c=Object.defineProperty||function(e,t,r){e[t]=r.value},t="function"==typeof Symbol?Symbol:{},n=t.iterator||"@@iterator",r=t.asyncIterator||"@@asyncIterator",i=t.toStringTag||"@@toStringTag";function o(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{o({},"")}catch(u){o=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var i,o,a,s,t=t&&t.prototype instanceof A?t:A,t=Object.create(t.prototype),n=new S(n||[]);return c(t,"_invoke",{value:(i=e,o=r,a=n,s=h,function(e,t){if(s===d)throw Error("Generator is already running");if(s===g){if("throw"===e)throw t;return{value:u,done:!0}}for(a.method=e,a.arg=t;;){var r=a.delegate;if(r){r=function e(t,r){var n=r.method,i=t.iterator[n];if(i===u)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=u,e(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;n=f(i,t.iterator,r.arg);if("throw"===n.type)return r.method="throw",r.arg=n.arg,r.delegate=null,y;i=n.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=u),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}(r,a);if(r){if(r===y)continue;return r}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(s===h)throw s=g,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);s=d;r=f(i,o,a);if("normal"===r.type){if(s=a.done?g:p,r.arg===y)continue;return{value:r.arg,done:a.done}}"throw"===r.type&&(s=g,a.method="throw",a.arg=r.arg)}})}),t}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}a.wrap=s;var h="suspendedStart",p="suspendedYield",d="executing",g="completed",y={};function A(){}function m(){}function v(){}var t={},b=(o(t,n,function(){return this}),Object.getPrototypeOf),b=b&&b(b(j([]))),_=(b&&b!==e&&l.call(b,n)&&(t=b),v.prototype=A.prototype=Object.create(t));function w(e){["next","throw","return"].forEach(function(t){o(e,t,function(e){return this._invoke(t,e)})})}function E(a,s){var t;c(this,"_invoke",{value:function(r,n){function e(){return new s(function(e,t){!function t(e,r,n,i){var o,e=f(a[e],a,r);if("throw"!==e.type)return(r=(o=e.arg).value)&&"object"==x(r)&&l.call(r,"__await")?s.resolve(r.__await).then(function(e){t("next",e,n,i)},function(e){t("throw",e,n,i)}):s.resolve(r).then(function(e){o.value=e,n(o)},function(e){return t("throw",e,n,i)});i(e.arg)}(r,n,e,t)})}return t=t?t.then(e,e):e()}})}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function j(t){if(t||""===t){var r,e=t[n];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return r=-1,(e=function e(){for(;++r<t.length;)if(l.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=u,e.done=!0,e}).next=e}throw new TypeError(x(t)+" is not iterable")}return c(_,"constructor",{value:m.prototype=v,configurable:!0}),c(v,"constructor",{value:m,configurable:!0}),m.displayName=o(v,i,"GeneratorFunction"),a.isGeneratorFunction=function(e){e="function"==typeof e&&e.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},a.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,o(e,i,"GeneratorFunction")),e.prototype=Object.create(_),e},a.awrap=function(e){return{__await:e}},w(E.prototype),o(E.prototype,r,function(){return this}),a.AsyncIterator=E,a.async=function(e,t,r,n,i){void 0===i&&(i=Promise);var o=new E(s(e,t,r,n),i);return a.isGeneratorFunction(t)?o:o.next().then(function(e){return e.done?e.value:o.next()})},w(_),o(_,i,"Generator"),o(_,n,function(){return this}),o(_,"toString",function(){return"[object Generator]"}),a.keys=function(e){var t,r=Object(e),n=[];for(t in r)n.push(t);return n.reverse(),function e(){for(;n.length;){var t=n.pop();if(t in r)return e.value=t,e.done=!1,e}return e.done=!0,e}},a.values=j,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=u,this.done=!1,this.delegate=null,this.method="next",this.arg=u,this.tryEntries.forEach(I),!e)for(var t in this)"t"===t.charAt(0)&&l.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=u)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(r){if(this.done)throw r;var n=this;function e(e,t){return o.type="throw",o.arg=r,n.next=e,t&&(n.method="next",n.arg=u),!!t}for(var t=this.tryEntries.length-1;0<=t;--t){var i=this.tryEntries[t],o=i.completion;if("root"===i.tryLoc)return e("end");if(i.tryLoc<=this.prev){var a=l.call(i,"catchLoc"),s=l.call(i,"finallyLoc");if(a&&s){if(this.prev<i.catchLoc)return e(i.catchLoc,!0);if(this.prev<i.finallyLoc)return e(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return e(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return e(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;0<=r;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&l.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}var o=(i=i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc?null:i)?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var r,n,i=this.tryEntries[t];if(i.tryLoc===e)return"throw"===(r=i.completion).type&&(n=r.arg,I(i)),n}throw Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:j(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=u),y}},a}function s(e,t,r,n,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return r(e)}s.done?t(u):Promise.resolve(u).then(n,i)}function r(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=x(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=x(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==x(e)?e:e+""}(n.key),n)}}var n,i,u,o,l=Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]},c=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},f=(Object.defineProperty(t,"__esModule",{value:!0}),a("./compression/index.js")),h="undefined"!=typeof navigator&&navigator.hardwareConcurrency||2,p=(n=function e(){var r=this,n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:h,t=1<arguments.length?arguments[1]:void 0,i=this,o=e;if(!(i instanceof o))throw new TypeError("Cannot call a class as a function");this.workers=null,this._awaitingDecoder=null,this.size=n,this.messageId=0,n&&(this._awaitingDecoder=t?Promise.resolve(t):new Promise(function(t){Promise.resolve().then(function(){var e=a("./worker/decoder.js");if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&l(t,e,r);return c(t,e),t}).then(function(e){t(e.create)})}),this._awaitingDecoder.then(function(e){r._awaitingDecoder=null,r.workers=[];for(var t=0;t<n;t++)r.workers.push({worker:e(),idle:!0})}))},(p=[{key:"decode",value:(u=O().mark(function e(t,o){var a=this;return O().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this._awaitingDecoder)return e.next=3,this._awaitingDecoder;e.next=3;break;case 3:return e.abrupt("return",0===this.size?(0,f.getDecoder)(t).then(function(e){return e.decode(t,o)}):new Promise(function(r){var n=a.workers.find(function(e){return e.idle})||a.workers[Math.floor(Math.random()*a.size)],i=(n.idle=!1,a.messageId++);n.worker.addEventListener("message",function e(t){t.data.id===i&&(n.idle=!0,r(t.data.decoded),n.worker.removeEventListener("message",e))}),n.worker.postMessage({fileDirectory:t,buffer:o,id:i},[o])}));case 4:case"end":return e.stop()}},e,this)}),o=function(){var e=this,a=arguments;return new Promise(function(t,r){var n=u.apply(e,a);function i(e){s(n,t,r,i,o,"next",e)}function o(e){s(n,t,r,i,o,"throw",e)}i(void 0)})},function(e,t){return o.apply(this,arguments)})},{key:"destroy",value:function(){this.workers&&(this.workers.forEach(function(e){e.worker.terminate()}),this.workers=null)}}])&&r(n.prototype,p),i&&r(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n);t.default=p},{"./compression/index.js":23,"./worker/decoder.js":53}],38:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.applyPredictor=void 0,r.applyPredictor=function(e,t,r,n,i,o){if(t&&1!==t){for(var a=0;a<i.length;++a){if(i[a]%8!=0)throw new Error("When decoding with predictor, only multiple of 8 bits are supported.");if(i[a]!==i[0])throw new Error("When decoding with predictor, all samples must have the same size.")}for(var s=i[0]/8,u=2===o?1:i.length,l=0;l<n&&!(l*u*r*s>=e.byteLength);++l){var c=void 0;if(2===t){switch(i[0]){case 8:c=new Uint8Array(e,l*u*r*s,u*r*s);break;case 16:c=new Uint16Array(e,l*u*r*s,u*r*s/2);break;case 32:c=new Uint32Array(e,l*u*r*s,u*r*s/4);break;default:throw new Error("Predictor 2 not allowed with ".concat(i[0]," bits per sample."))}g=d=p=h=f=void 0;var f=c,h=u,p=f.length-h,d=0;do{for(var g=h;0<g;g--)f[d+h]+=f[d],d++}while(0<(p-=h))}else if(3===t){y=void 0;A=void 0;m=void 0;v=void 0;b=void 0;_=void 0;w=void 0;E=void 0;C=void 0;I=void 0;var y=c=new Uint8Array(e,l*u*r*s,u*r*s);var A=u;var m=s;for(var v=0,b=y.length,_=b/m;A<b;){for(var w=A;0<w;--w)y[v+A]+=y[v],++v;b-=A}for(var E=y.slice(),C=0;C<_;++C)for(var I=0;I<m;++I)y[m*C+I]=E[(m-I-1)*_+C]}}}return e}},{}],39:[function(e,t,r){"use strict";function E(e,t,r,n){n=3<arguments.length&&void 0!==n?n:1;return new(Object.getPrototypeOf(e).constructor)(t*r*n)}function a(e,a,s,u,l){var c=a/u,f=s/l;return e.map(function(e){for(var t=E(e,u,l),r=0;r<l;++r)for(var n=Math.min(Math.round(f*r),s-1),i=0;i<u;++i){var o=Math.min(Math.round(c*i),a-1),o=e[n*a+o];t[r*u+i]=o}return t})}function C(e,t,r){return(1-r)*e+r*t}function s(e,h,p,d,g){var y=h/d,A=p/g;return e.map(function(e){for(var t=E(e,d,g),r=0;r<g;++r)for(var n=A*r,i=Math.floor(n),o=Math.min(Math.ceil(n),p-1),a=0;a<d;++a){var s=y*a,u=s%1,l=Math.floor(s),s=Math.min(Math.ceil(s),h-1),c=e[i*h+l],f=e[i*h+s],l=e[o*h+l],s=e[o*h+s],c=C(C(c,f,u),C(l,s,u),n%1);t[r*d+a]=c}return t})}function u(e,t,r,n,i,o){for(var a=t/n,s=r/i,u=E(e,n,i,o),l=0;l<i;++l)for(var c=Math.min(Math.round(s*l),r-1),f=0;f<n;++f)for(var h=Math.min(Math.round(a*f),t-1),p=0;p<o;++p){var d=e[c*t*o+h*o+p];u[l*n*o+f*o+p]=d}return u}function l(e,t,r,n,i,o){for(var a=t/n,s=r/i,u=E(e,n,i,o),l=0;l<i;++l)for(var c=s*l,f=Math.floor(c),h=Math.min(Math.ceil(c),r-1),p=0;p<n;++p)for(var d=a*p,g=d%1,y=Math.floor(d),A=Math.min(Math.ceil(d),t-1),m=0;m<o;++m){var v=e[f*t*o+y*o+m],b=e[f*t*o+A*o+m],_=e[h*t*o+y*o+m],w=e[h*t*o+A*o+m],v=C(C(v,b,g),C(_,w,g),c%1);u[l*n*o+p*o+m]=v}return u}Object.defineProperty(r,"__esModule",{value:!0}),r.resampleInterleaved=r.resampleBilinearInterleaved=r.resampleNearestInterleaved=r.resample=r.resampleBilinear=r.resampleNearest=void 0,r.resampleNearest=a,r.resampleBilinear=s,r.resample=function(e,t,r,n,i){var o=5<arguments.length&&void 0!==arguments[5]?arguments[5]:"nearest";switch(o.toLowerCase()){case"nearest":return a(e,t,r,n,i);case"bilinear":case"linear":return s(e,t,r,n,i);default:throw new Error("Unsupported resampling method: '".concat(o,"'"))}},r.resampleNearestInterleaved=u,r.resampleBilinearInterleaved=l,r.resampleInterleaved=function(e,t,r,n,i,o){var a=6<arguments.length&&void 0!==arguments[6]?arguments[6]:"nearest";switch(a.toLowerCase()){case"nearest":return u(e,t,r,n,i,o);case"bilinear":case"linear":return l(e,t,r,n,i,o);default:throw new Error("Unsupported resampling method: '".concat(a,"'"))}}},{}],40:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.fromCIELab=r.fromYCbCr=r.fromCMYK=r.fromPalette=r.fromBlackIsZero=r.fromWhiteIsZero=void 0,r.fromWhiteIsZero=function(e,t){for(var r,n=e.width,i=e.height,o=new Uint8Array(n*i*3),a=0,s=0;a<e.length;++a,s+=3)r=256-e[a]/t*256,o[s]=r,o[s+1]=r,o[s+2]=r;return o},r.fromBlackIsZero=function(e,t){for(var r,n=e.width,i=e.height,o=new Uint8Array(n*i*3),a=0,s=0;a<e.length;++a,s+=3)r=e[a]/t*256,o[s]=r,o[s+1]=r,o[s+2]=r;return o},r.fromPalette=function(e,t){for(var r=e.width,n=e.height,i=new Uint8Array(r*n*3),o=t.length/3,a=t.length/3*2,s=0,u=0;s<e.length;++s,u+=3){var l=e[s];i[u]=t[l]/65536*256,i[u+1]=t[l+o]/65536*256,i[u+2]=t[l+a]/65536*256}return i},r.fromCMYK=function(e){for(var t=e.width,r=e.height,n=new Uint8Array(t*r*3),i=0,o=0;i<e.length;i+=4,o+=3){var a=e[i],s=e[i+1],u=e[i+2],l=e[i+3];n[o]=(255-a)/256*255*((255-l)/256),n[o+1]=(255-s)/256*255*((255-l)/256),n[o+2]=(255-u)/256*255*((255-l)/256)}return n},r.fromYCbCr=function(e){for(var t=e.width,r=e.height,n=new Uint8ClampedArray(t*r*3),i=0,o=0;i<e.length;i+=3,o+=3){var a=e[i],s=e[i+1],u=e[i+2];n[o]=a+1.402*(u-128),n[o+1]=a-.34414*(s-128)-.71414*(u-128),n[o+2]=a+1.772*(s-128)}return n};r.fromCIELab=function(e){for(var t=e.width,r=e.height,n=new Uint8Array(t*r*3),i=0,o=0;i<e.length;i+=3,o+=3){var a=(e[i+0]+16)/116,s=(e[i+1]<<24>>24)/500+a,u=a-(e[i+2]<<24>>24)/200,l=-.9689*(s=.95047*(.008856<s*s*s?s*s*s:(s-16/116)/7.787))+1.8758*(a=.008856<a*a*a?a*a*a:(a-16/116)/7.787)+.0415*(u=1.08883*(.008856<u*u*u?u*u*u:(u-16/116)/7.787)),c=.0557*s+-.204*a+1.057*u,s=.0031308<(s=3.2406*s+-1.5372*a+-.4986*u)?1.055*Math.pow(s,1/2.4)-.055:12.92*s;l=.0031308<l?1.055*Math.pow(l,1/2.4)-.055:12.92*l,c=.0031308<c?1.055*Math.pow(c,1/2.4)-.055:12.92*c,n[o]=255*Math.max(0,Math.min(1,s)),n[o+1]=255*Math.max(0,Math.min(1,l)),n[o+2]=255*Math.max(0,Math.min(1,c))}return n}},{}],41:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function a(e,t,r){t=u(t);var n=e,t=s()?Reflect.construct(t,r||[],u(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(s=function(){return!!e})()}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}Object.defineProperty(r,"__esModule",{value:!0}),r.makeBufferSource=void 0;var c=e("./basesource.js"),f=e("../utils.js"),n=function(){function r(e){var t;if(this instanceof r)return(t=a(this,r)).arrayBuffer=e,t;throw new TypeError("Cannot call a class as a function")}var e,t=r,n=c.BaseSource;if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&l(t,n),t=r,(n=[{key:"fetchSlice",value:function(e,t){if(t&&t.aborted)throw new f.AbortError("Request aborted");return this.arrayBuffer.slice(e.offset,e.offset+e.length)}}])&&o(t.prototype,n),e&&o(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();r.makeBufferSource=function(e){return new n(e)}},{"../utils.js":52,"./basesource.js":42}],42:[function(e,t,r){"use strict";function x(e){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(){O=function(){return a};var u,a={},e=Object.prototype,l=e.hasOwnProperty,c=Object.defineProperty||function(e,t,r){e[t]=r.value},t="function"==typeof Symbol?Symbol:{},n=t.iterator||"@@iterator",r=t.asyncIterator||"@@asyncIterator",i=t.toStringTag||"@@toStringTag";function o(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{o({},"")}catch(u){o=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var i,o,a,s,t=t&&t.prototype instanceof A?t:A,t=Object.create(t.prototype),n=new S(n||[]);return c(t,"_invoke",{value:(i=e,o=r,a=n,s=h,function(e,t){if(s===d)throw Error("Generator is already running");if(s===g){if("throw"===e)throw t;return{value:u,done:!0}}for(a.method=e,a.arg=t;;){var r=a.delegate;if(r){r=function e(t,r){var n=r.method,i=t.iterator[n];if(i===u)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=u,e(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;n=f(i,t.iterator,r.arg);if("throw"===n.type)return r.method="throw",r.arg=n.arg,r.delegate=null,y;i=n.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=u),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}(r,a);if(r){if(r===y)continue;return r}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(s===h)throw s=g,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);s=d;r=f(i,o,a);if("normal"===r.type){if(s=a.done?g:p,r.arg===y)continue;return{value:r.arg,done:a.done}}"throw"===r.type&&(s=g,a.method="throw",a.arg=r.arg)}})}),t}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}a.wrap=s;var h="suspendedStart",p="suspendedYield",d="executing",g="completed",y={};function A(){}function m(){}function v(){}var t={},b=(o(t,n,function(){return this}),Object.getPrototypeOf),b=b&&b(b(j([]))),_=(b&&b!==e&&l.call(b,n)&&(t=b),v.prototype=A.prototype=Object.create(t));function w(e){["next","throw","return"].forEach(function(t){o(e,t,function(e){return this._invoke(t,e)})})}function E(a,s){var t;c(this,"_invoke",{value:function(r,n){function e(){return new s(function(e,t){!function t(e,r,n,i){var o,e=f(a[e],a,r);if("throw"!==e.type)return(r=(o=e.arg).value)&&"object"==x(r)&&l.call(r,"__await")?s.resolve(r.__await).then(function(e){t("next",e,n,i)},function(e){t("throw",e,n,i)}):s.resolve(r).then(function(e){o.value=e,n(o)},function(e){return t("throw",e,n,i)});i(e.arg)}(r,n,e,t)})}return t=t?t.then(e,e):e()}})}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function j(t){if(t||""===t){var r,e=t[n];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return r=-1,(e=function e(){for(;++r<t.length;)if(l.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=u,e.done=!0,e}).next=e}throw new TypeError(x(t)+" is not iterable")}return c(_,"constructor",{value:m.prototype=v,configurable:!0}),c(v,"constructor",{value:m,configurable:!0}),m.displayName=o(v,i,"GeneratorFunction"),a.isGeneratorFunction=function(e){e="function"==typeof e&&e.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},a.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,o(e,i,"GeneratorFunction")),e.prototype=Object.create(_),e},a.awrap=function(e){return{__await:e}},w(E.prototype),o(E.prototype,r,function(){return this}),a.AsyncIterator=E,a.async=function(e,t,r,n,i){void 0===i&&(i=Promise);var o=new E(s(e,t,r,n),i);return a.isGeneratorFunction(t)?o:o.next().then(function(e){return e.done?e.value:o.next()})},w(_),o(_,i,"Generator"),o(_,n,function(){return this}),o(_,"toString",function(){return"[object Generator]"}),a.keys=function(e){var t,r=Object(e),n=[];for(t in r)n.push(t);return n.reverse(),function e(){for(;n.length;){var t=n.pop();if(t in r)return e.value=t,e.done=!1,e}return e.done=!0,e}},a.values=j,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=u,this.done=!1,this.delegate=null,this.method="next",this.arg=u,this.tryEntries.forEach(I),!e)for(var t in this)"t"===t.charAt(0)&&l.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=u)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(r){if(this.done)throw r;var n=this;function e(e,t){return o.type="throw",o.arg=r,n.next=e,t&&(n.method="next",n.arg=u),!!t}for(var t=this.tryEntries.length-1;0<=t;--t){var i=this.tryEntries[t],o=i.completion;if("root"===i.tryLoc)return e("end");if(i.tryLoc<=this.prev){var a=l.call(i,"catchLoc"),s=l.call(i,"finallyLoc");if(a&&s){if(this.prev<i.catchLoc)return e(i.catchLoc,!0);if(this.prev<i.finallyLoc)return e(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return e(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return e(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;0<=r;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&l.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}var o=(i=i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc?null:i)?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var r,n,i=this.tryEntries[t];if(i.tryLoc===e)return"throw"===(r=i.completion).type&&(n=r.arg,I(i)),n}throw Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:j(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=u),y}},a}function u(e,t,r,n,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return r(e)}s.done?t(u):Promise.resolve(u).then(n,i)}function n(s){return function(){var e=this,a=arguments;return new Promise(function(t,r){var n=s.apply(e,a);function i(e){u(n,t,r,i,o,"next",e)}function o(e){u(n,t,r,i,o,"throw",e)}i(void 0)})}}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=x(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=x(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==x(e)?e:e+""}(n.key),n)}}Object.defineProperty(r,"__esModule",{value:!0}),r.BaseSource=void 0;o=function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function")},(f=[{key:"fetch",value:(c=n(O().mark(function e(t){var r,n=this,i=arguments;return O().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=1<i.length&&void 0!==i[1]?i[1]:void 0,e.abrupt("return",Promise.all(t.map(function(e){return n.fetchSlice(e,r)})));case 2:case"end":return e.stop()}},e)})),function(e){return c.apply(this,arguments)})},{key:"fetchSlice",value:(l=n(O().mark(function e(t){return O().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("fetching of slice ".concat(t," not possible, not implemented"));case 1:case"end":return e.stop()}},e)})),function(e){return l.apply(this,arguments)})},{key:"fileSize",get:function(){return null}},{key:"close",value:(s=n(O().mark(function e(){return O().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)})),function(){return s.apply(this,arguments)})}])&&i(o.prototype,f),a&&i(o,a),Object.defineProperty(o,"prototype",{writable:!1});var o,a,s,l,c,f=o;r.BaseSource=f},{}],43:[function(e,t,r){"use strict";function x(){x=function(){return a};var u,a={},e=Object.prototype,l=e.hasOwnProperty,c=Object.defineProperty||function(e,t,r){e[t]=r.value},t="function"==typeof Symbol?Symbol:{},n=t.iterator||"@@iterator",r=t.asyncIterator||"@@asyncIterator",i=t.toStringTag||"@@toStringTag";function o(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{o({},"")}catch(u){o=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var i,o,a,s,t=t&&t.prototype instanceof A?t:A,t=Object.create(t.prototype),n=new S(n||[]);return c(t,"_invoke",{value:(i=e,o=r,a=n,s=h,function(e,t){if(s===d)throw Error("Generator is already running");if(s===g){if("throw"===e)throw t;return{value:u,done:!0}}for(a.method=e,a.arg=t;;){var r=a.delegate;if(r){r=function e(t,r){var n=r.method,i=t.iterator[n];if(i===u)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=u,e(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;n=f(i,t.iterator,r.arg);if("throw"===n.type)return r.method="throw",r.arg=n.arg,r.delegate=null,y;i=n.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=u),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}(r,a);if(r){if(r===y)continue;return r}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(s===h)throw s=g,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);s=d;r=f(i,o,a);if("normal"===r.type){if(s=a.done?g:p,r.arg===y)continue;return{value:r.arg,done:a.done}}"throw"===r.type&&(s=g,a.method="throw",a.arg=r.arg)}})}),t}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}a.wrap=s;var h="suspendedStart",p="suspendedYield",d="executing",g="completed",y={};function A(){}function m(){}function v(){}var t={},b=(o(t,n,function(){return this}),Object.getPrototypeOf),b=b&&b(b(j([]))),_=(b&&b!==e&&l.call(b,n)&&(t=b),v.prototype=A.prototype=Object.create(t));function w(e){["next","throw","return"].forEach(function(t){o(e,t,function(e){return this._invoke(t,e)})})}function E(a,s){var t;c(this,"_invoke",{value:function(r,n){function e(){return new s(function(e,t){!function t(e,r,n,i){var o,e=f(a[e],a,r);if("throw"!==e.type)return(r=(o=e.arg).value)&&"object"==O(r)&&l.call(r,"__await")?s.resolve(r.__await).then(function(e){t("next",e,n,i)},function(e){t("throw",e,n,i)}):s.resolve(r).then(function(e){o.value=e,n(o)},function(e){return t("throw",e,n,i)});i(e.arg)}(r,n,e,t)})}return t=t?t.then(e,e):e()}})}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function j(t){if(t||""===t){var r,e=t[n];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return r=-1,(e=function e(){for(;++r<t.length;)if(l.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=u,e.done=!0,e}).next=e}throw new TypeError(O(t)+" is not iterable")}return c(_,"constructor",{value:m.prototype=v,configurable:!0}),c(v,"constructor",{value:m,configurable:!0}),m.displayName=o(v,i,"GeneratorFunction"),a.isGeneratorFunction=function(e){e="function"==typeof e&&e.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},a.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,o(e,i,"GeneratorFunction")),e.prototype=Object.create(_),e},a.awrap=function(e){return{__await:e}},w(E.prototype),o(E.prototype,r,function(){return this}),a.AsyncIterator=E,a.async=function(e,t,r,n,i){void 0===i&&(i=Promise);var o=new E(s(e,t,r,n),i);return a.isGeneratorFunction(t)?o:o.next().then(function(e){return e.done?e.value:o.next()})},w(_),o(_,i,"Generator"),o(_,n,function(){return this}),o(_,"toString",function(){return"[object Generator]"}),a.keys=function(e){var t,r=Object(e),n=[];for(t in r)n.push(t);return n.reverse(),function e(){for(;n.length;){var t=n.pop();if(t in r)return e.value=t,e.done=!1,e}return e.done=!0,e}},a.values=j,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=u,this.done=!1,this.delegate=null,this.method="next",this.arg=u,this.tryEntries.forEach(I),!e)for(var t in this)"t"===t.charAt(0)&&l.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=u)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(r){if(this.done)throw r;var n=this;function e(e,t){return o.type="throw",o.arg=r,n.next=e,t&&(n.method="next",n.arg=u),!!t}for(var t=this.tryEntries.length-1;0<=t;--t){var i=this.tryEntries[t],o=i.completion;if("root"===i.tryLoc)return e("end");if(i.tryLoc<=this.prev){var a=l.call(i,"catchLoc"),s=l.call(i,"finallyLoc");if(a&&s){if(this.prev<i.catchLoc)return e(i.catchLoc,!0);if(this.prev<i.finallyLoc)return e(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return e(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return e(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;0<=r;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&l.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}var o=(i=i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc?null:i)?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var r,n,i=this.tryEntries[t];if(i.tryLoc===e)return"throw"===(r=i.completion).type&&(n=r.arg,I(i)),n}throw Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:j(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=u),y}},a}function j(e,t){var r,n,i,o,a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(a)return i=!(n=!0),{s:function(){a=a.call(e)},n:function(){var e=a.next();return n=e.done,e},e:function(e){i=!0,r=e},f:function(){try{n||null==a.return||a.return()}finally{if(i)throw r}}};if(Array.isArray(e)||(a=function(e,t){{var r;if(e)return"string"==typeof e?s(e,t):"Map"===(r="Object"===(r={}.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length)return a&&(e=a),o=0,{s:t=function(){},n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function u(e,t,r,n,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return r(e)}s.done?t(u):Promise.resolve(u).then(n,i)}function n(s){return function(){var e=this,a=arguments;return new Promise(function(t,r){var n=s.apply(e,a);function i(e){u(n,t,r,i,o,"next",e)}function o(e){u(n,t,r,i,o,"throw",e)}i(void 0)})}}function o(e,t,r){t=a(t);var n=e,t=i()?Reflect.construct(t,r||[],a(e).constructor):t.apply(e,r);if(t&&("object"==O(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function i(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(i=function(){return!!e})()}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=O(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=O(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==O(e)?e:e+""}(n.key),n)}}function h(e,t,r){return t&&f(e.prototype,t),r&&f(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}Object.defineProperty(r,"__esModule",{value:!0}),r.BlockedSource=void 0;var p=(A=e("quick-lru"))&&A.__esModule?A:{default:A},d=e("./basesource.js"),P=e("../utils.js"),g=h(function e(t,r){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;c(this,e),this.offset=t,this.length=r,this.data=n},[{key:"top",get:function(){return this.offset+this.length}}]),y=h(function e(t,r,n){c(this,e),this.offset=t,this.length=r,this.blockIds=n}),A=function(){function i(e){var r,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=t.blockSize,n=void 0===n?65536:n,t=t.cacheSize,t=void 0===t?100:t;return c(this,i),(r=o(this,i)).source=e,r.blockSize=n,r.blockCache=new p.default({maxSize:t,onEviction:function(e,t){r.evictedBlocks.set(e,t)}}),r.evictedBlocks=new Map,r.blockRequests=new Map,r.blockIdsToFetch=new Set,r.abortedBlockIds=new Set,r}var r,e=i,t=d.BaseSource;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");return e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t),h(i,[{key:"fileSize",get:function(){return this.source.fileSize}},{key:"fetch",value:(r=n(x().mark(function e(t,r){var n,i,o,a,s,u,l,c,f,h,p,d,g,y,A,m,v,b,_,w,E,C,I,S=this;return x().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=[],i=[],o=[],this.evictedBlocks.clear(),a=j(t);try{for(a.s();!(s=a.n()).done;)for(u=s.value,l=u.offset,c=u.length,f=l+c,null!==(h=this.fileSize)&&(f=Math.min(f,h)),p=Math.floor(l/this.blockSize)*this.blockSize,d=p;d<f;d+=this.blockSize)g=Math.floor(d/this.blockSize),this.blockCache.has(g)||this.blockRequests.has(g)||(this.blockIdsToFetch.add(g),i.push(g)),this.blockRequests.has(g)&&n.push(this.blockRequests.get(g)),o.push(g)}catch(e){a.e(e)}finally{a.f()}return e.next=8,(0,P.wait)();case 8:for(this.fetchBlocks(r),y=[],A=0,m=i;A<m.length;A++)v=m[A],this.blockRequests.has(v)&&y.push(this.blockRequests.get(v));return e.next=13,Promise.allSettled(n);case 13:return e.next=15,Promise.allSettled(y);case 15:if(b=[],(_=o.filter(function(e){return S.abortedBlockIds.has(e)||!S.blockCache.has(e)})).forEach(function(e){return S.blockIdsToFetch.add(e)}),!(0<_.length&&r)||r.aborted){e.next=41;break}this.fetchBlocks(null),_=j(_),e.prev=21,_.s();case 23:if((C=_.n()).done){e.next=31;break}if(C=C.value,w=this.blockRequests.get(C)){e.next=28;break}throw new Error("Block ".concat(C," is not in the block requests"));case 28:b.push(w);case 29:e.next=23;break;case 31:e.next=36;break;case 33:e.prev=33,e.t0=e.catch(21),_.e(e.t0);case 36:return e.prev=36,_.f(),e.finish(36);case 39:return e.next=41,Promise.allSettled(b);case 41:if(r&&r.aborted)throw new P.AbortError("Request was aborted");e.next=43;break;case 43:if(E=o.map(function(e){return S.blockCache.get(e)||S.evictedBlocks.get(e)}),(C=E.filter(function(e){return!e})).length)throw new P.AggregateError(C,"Request failed");e.next=47;break;case 47:return I=new Map((0,P.zip)(o,E)),e.abrupt("return",this.readSliceData(t,I));case 49:case"end":return e.stop()}},e,this,[[21,33,36,39]])})),function(e,t){return r.apply(this,arguments)})},{key:"fetchBlocks",value:function(s){var u=this;if(0<this.blockIdsToFetch.size){for(var r=this.groupBlocks(this.blockIdsToFetch),l=this.source.fetch(r,s),e=function(a){var e,t=j(r[a].blockIds);try{for(t.s();!(e=t.n()).done;)!function(){var o=e.value;u.blockRequests.set(o,n(x().mark(function e(){var t,r,n,i;return x().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l;case 3:e.t0=a,n=e.sent[e.t0],t=o*u.blockSize,i=t-n.offset,r=Math.min(i+u.blockSize,n.data.byteLength),n=n.data.slice(i,r),i=new g(t,n.byteLength,n,o),u.blockCache.set(o,i),u.abortedBlockIds.delete(o),e.next=23;break;case 14:(e.prev=14,e.t1=e.catch(0),"AbortError"!==e.t1.name)?e.next=22:(e.t1.signal=s,u.blockCache.delete(o),u.abortedBlockIds.add(o),e.next=23);break;case 22:throw e.t1;case 23:return e.prev=23,u.blockRequests.delete(o),e.finish(23);case 26:case"end":return e.stop()}},e,null,[[0,14,23,26]])}))())}()}catch(e){t.e(e)}finally{t.f()}},t=0;t<r.length;++t)e(t);this.blockIdsToFetch.clear()}}},{key:"groupBlocks",value:function(e){var t=Array.from(e).sort(function(e,t){return e-t});if(0===t.length)return[];var r,n=[],i=null,o=[],a=j(t);try{for(a.s();!(r=a.n()).done;)var s=r.value,i=(null===i||i+1===s?n.push(s):(o.push(new y(n[0]*this.blockSize,n.length*this.blockSize,n)),n=[s]),s)}catch(e){a.e(e)}finally{a.f()}return o.push(new y(n[0]*this.blockSize,n.length*this.blockSize,n)),o}},{key:"readSliceData",value:function(e,f){var h=this;return e.map(function(e){var t=e.offset+e.length;null!==h.fileSize&&(t=Math.min(h.fileSize,t));for(var r=Math.floor(e.offset/h.blockSize),n=Math.floor(t/h.blockSize),i=new ArrayBuffer(e.length),o=new Uint8Array(i),a=r;a<=n;++a){var s=f.get(a),u=s.offset-e.offset,l=0,c=0,s=(u<0?l=-u:0<u&&(c=u),u=s.top-t<0?s.length-l:t-s.offset-l,new Uint8Array(s.data,l,u));o.set(s,c)}return i})}}])}();r.BlockedSource=A},{"../utils.js":52,"./basesource.js":42,"quick-lru":426}],44:[function(e,t,r){"use strict";function x(e){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(){O=function(){return a};var u,a={},e=Object.prototype,l=e.hasOwnProperty,c=Object.defineProperty||function(e,t,r){e[t]=r.value},t="function"==typeof Symbol?Symbol:{},n=t.iterator||"@@iterator",r=t.asyncIterator||"@@asyncIterator",i=t.toStringTag||"@@toStringTag";function o(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{o({},"")}catch(u){o=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var i,o,a,s,t=t&&t.prototype instanceof A?t:A,t=Object.create(t.prototype),n=new S(n||[]);return c(t,"_invoke",{value:(i=e,o=r,a=n,s=h,function(e,t){if(s===d)throw Error("Generator is already running");if(s===g){if("throw"===e)throw t;return{value:u,done:!0}}for(a.method=e,a.arg=t;;){var r=a.delegate;if(r){r=function e(t,r){var n=r.method,i=t.iterator[n];if(i===u)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=u,e(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;n=f(i,t.iterator,r.arg);if("throw"===n.type)return r.method="throw",r.arg=n.arg,r.delegate=null,y;i=n.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=u),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}(r,a);if(r){if(r===y)continue;return r}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(s===h)throw s=g,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);s=d;r=f(i,o,a);if("normal"===r.type){if(s=a.done?g:p,r.arg===y)continue;return{value:r.arg,done:a.done}}"throw"===r.type&&(s=g,a.method="throw",a.arg=r.arg)}})}),t}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}a.wrap=s;var h="suspendedStart",p="suspendedYield",d="executing",g="completed",y={};function A(){}function m(){}function v(){}var t={},b=(o(t,n,function(){return this}),Object.getPrototypeOf),b=b&&b(b(j([]))),_=(b&&b!==e&&l.call(b,n)&&(t=b),v.prototype=A.prototype=Object.create(t));function w(e){["next","throw","return"].forEach(function(t){o(e,t,function(e){return this._invoke(t,e)})})}function E(a,s){var t;c(this,"_invoke",{value:function(r,n){function e(){return new s(function(e,t){!function t(e,r,n,i){var o,e=f(a[e],a,r);if("throw"!==e.type)return(r=(o=e.arg).value)&&"object"==x(r)&&l.call(r,"__await")?s.resolve(r.__await).then(function(e){t("next",e,n,i)},function(e){t("throw",e,n,i)}):s.resolve(r).then(function(e){o.value=e,n(o)},function(e){return t("throw",e,n,i)});i(e.arg)}(r,n,e,t)})}return t=t?t.then(e,e):e()}})}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function j(t){if(t||""===t){var r,e=t[n];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return r=-1,(e=function e(){for(;++r<t.length;)if(l.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=u,e.done=!0,e}).next=e}throw new TypeError(x(t)+" is not iterable")}return c(_,"constructor",{value:m.prototype=v,configurable:!0}),c(v,"constructor",{value:m,configurable:!0}),m.displayName=o(v,i,"GeneratorFunction"),a.isGeneratorFunction=function(e){e="function"==typeof e&&e.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},a.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,o(e,i,"GeneratorFunction")),e.prototype=Object.create(_),e},a.awrap=function(e){return{__await:e}},w(E.prototype),o(E.prototype,r,function(){return this}),a.AsyncIterator=E,a.async=function(e,t,r,n,i){void 0===i&&(i=Promise);var o=new E(s(e,t,r,n),i);return a.isGeneratorFunction(t)?o:o.next().then(function(e){return e.done?e.value:o.next()})},w(_),o(_,i,"Generator"),o(_,n,function(){return this}),o(_,"toString",function(){return"[object Generator]"}),a.keys=function(e){var t,r=Object(e),n=[];for(t in r)n.push(t);return n.reverse(),function e(){for(;n.length;){var t=n.pop();if(t in r)return e.value=t,e.done=!1,e}return e.done=!0,e}},a.values=j,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=u,this.done=!1,this.delegate=null,this.method="next",this.arg=u,this.tryEntries.forEach(I),!e)for(var t in this)"t"===t.charAt(0)&&l.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=u)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(r){if(this.done)throw r;var n=this;function e(e,t){return o.type="throw",o.arg=r,n.next=e,t&&(n.method="next",n.arg=u),!!t}for(var t=this.tryEntries.length-1;0<=t;--t){var i=this.tryEntries[t],o=i.completion;if("root"===i.tryLoc)return e("end");if(i.tryLoc<=this.prev){var a=l.call(i,"catchLoc"),s=l.call(i,"finallyLoc");if(a&&s){if(this.prev<i.catchLoc)return e(i.catchLoc,!0);if(this.prev<i.finallyLoc)return e(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return e(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return e(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;0<=r;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&l.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}var o=(i=i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc?null:i)?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var r,n,i=this.tryEntries[t];if(i.tryLoc===e)return"throw"===(r=i.completion).type&&(n=r.arg,I(i)),n}throw Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:j(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=u),y}},a}function u(e,t,r,n,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return r(e)}s.done?t(u):Promise.resolve(u).then(n,i)}function n(s){return function(){var e=this,a=arguments;return new Promise(function(t,r){var n=s.apply(e,a);function i(e){u(n,t,r,i,o,"next",e)}function o(e){u(n,t,r,i,o,"throw",e)}i(void 0)})}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=x(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=x(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==x(e)?e:e+""}(n.key),n)}}function a(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}Object.defineProperty(r,"__esModule",{value:!0}),r.BaseClient=r.BaseResponse=void 0;var s,l,c=a(function e(){i(this,e)},[{key:"ok",get:function(){return 200<=this.status&&this.status<=299}},{key:"status",get:function(){throw new Error("not implemented")}},{key:"getHeader",value:function(e){throw new Error("not implemented")}},{key:"getData",value:(s=n(O().mark(function e(){return O().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("not implemented");case 1:case"end":return e.stop()}},e)})),function(){return s.apply(this,arguments)})}]),c=(r.BaseResponse=c,a(function e(t){i(this,e),this.url=t},[{key:"request",value:(l=n(O().mark(function e(){var t,r=arguments;return O().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:throw(t=0<r.length&&void 0!==r[0]?r[0]:{}).headers,t.credentials,t.signal,new Error("request is not implemented");case 2:case"end":return e.stop()}},e)})),function(){return l.apply(this,arguments)})}]));r.BaseClient=c},{}],45:[function(e,t,r){"use strict";function x(e){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(){O=function(){return a};var u,a={},e=Object.prototype,l=e.hasOwnProperty,c=Object.defineProperty||function(e,t,r){e[t]=r.value},t="function"==typeof Symbol?Symbol:{},n=t.iterator||"@@iterator",r=t.asyncIterator||"@@asyncIterator",i=t.toStringTag||"@@toStringTag";function o(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{o({},"")}catch(u){o=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var i,o,a,s,t=t&&t.prototype instanceof A?t:A,t=Object.create(t.prototype),n=new S(n||[]);return c(t,"_invoke",{value:(i=e,o=r,a=n,s=h,function(e,t){if(s===d)throw Error("Generator is already running");if(s===g){if("throw"===e)throw t;return{value:u,done:!0}}for(a.method=e,a.arg=t;;){var r=a.delegate;if(r){r=function e(t,r){var n=r.method,i=t.iterator[n];if(i===u)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=u,e(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;n=f(i,t.iterator,r.arg);if("throw"===n.type)return r.method="throw",r.arg=n.arg,r.delegate=null,y;i=n.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=u),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}(r,a);if(r){if(r===y)continue;return r}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(s===h)throw s=g,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);s=d;r=f(i,o,a);if("normal"===r.type){if(s=a.done?g:p,r.arg===y)continue;return{value:r.arg,done:a.done}}"throw"===r.type&&(s=g,a.method="throw",a.arg=r.arg)}})}),t}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}a.wrap=s;var h="suspendedStart",p="suspendedYield",d="executing",g="completed",y={};function A(){}function m(){}function v(){}var t={},b=(o(t,n,function(){return this}),Object.getPrototypeOf),b=b&&b(b(j([]))),_=(b&&b!==e&&l.call(b,n)&&(t=b),v.prototype=A.prototype=Object.create(t));function w(e){["next","throw","return"].forEach(function(t){o(e,t,function(e){return this._invoke(t,e)})})}function E(a,s){var t;c(this,"_invoke",{value:function(r,n){function e(){return new s(function(e,t){!function t(e,r,n,i){var o,e=f(a[e],a,r);if("throw"!==e.type)return(r=(o=e.arg).value)&&"object"==x(r)&&l.call(r,"__await")?s.resolve(r.__await).then(function(e){t("next",e,n,i)},function(e){t("throw",e,n,i)}):s.resolve(r).then(function(e){o.value=e,n(o)},function(e){return t("throw",e,n,i)});i(e.arg)}(r,n,e,t)})}return t=t?t.then(e,e):e()}})}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function j(t){if(t||""===t){var r,e=t[n];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return r=-1,(e=function e(){for(;++r<t.length;)if(l.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=u,e.done=!0,e}).next=e}throw new TypeError(x(t)+" is not iterable")}return c(_,"constructor",{value:m.prototype=v,configurable:!0}),c(v,"constructor",{value:m,configurable:!0}),m.displayName=o(v,i,"GeneratorFunction"),a.isGeneratorFunction=function(e){e="function"==typeof e&&e.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},a.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,o(e,i,"GeneratorFunction")),e.prototype=Object.create(_),e},a.awrap=function(e){return{__await:e}},w(E.prototype),o(E.prototype,r,function(){return this}),a.AsyncIterator=E,a.async=function(e,t,r,n,i){void 0===i&&(i=Promise);var o=new E(s(e,t,r,n),i);return a.isGeneratorFunction(t)?o:o.next().then(function(e){return e.done?e.value:o.next()})},w(_),o(_,i,"Generator"),o(_,n,function(){return this}),o(_,"toString",function(){return"[object Generator]"}),a.keys=function(e){var t,r=Object(e),n=[];for(t in r)n.push(t);return n.reverse(),function e(){for(;n.length;){var t=n.pop();if(t in r)return e.value=t,e.done=!1,e}return e.done=!0,e}},a.values=j,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=u,this.done=!1,this.delegate=null,this.method="next",this.arg=u,this.tryEntries.forEach(I),!e)for(var t in this)"t"===t.charAt(0)&&l.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=u)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(r){if(this.done)throw r;var n=this;function e(e,t){return o.type="throw",o.arg=r,n.next=e,t&&(n.method="next",n.arg=u),!!t}for(var t=this.tryEntries.length-1;0<=t;--t){var i=this.tryEntries[t],o=i.completion;if("root"===i.tryLoc)return e("end");if(i.tryLoc<=this.prev){var a=l.call(i,"catchLoc"),s=l.call(i,"finallyLoc");if(a&&s){if(this.prev<i.catchLoc)return e(i.catchLoc,!0);if(this.prev<i.finallyLoc)return e(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return e(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return e(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;0<=r;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&l.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}var o=(i=i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc?null:i)?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var r,n,i=this.tryEntries[t];if(i.tryLoc===e)return"throw"===(r=i.completion).type&&(n=r.arg,I(i)),n}throw Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:j(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=u),y}},a}function u(e,t,r,n,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return r(e)}s.done?t(u):Promise.resolve(u).then(n,i)}function n(s){return function(){var e=this,a=arguments;return new Promise(function(t,r){var n=s.apply(e,a);function i(e){u(n,t,r,i,o,"next",e)}function o(e){u(n,t,r,i,o,"throw",e)}i(void 0)})}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=x(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=x(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==x(e)?e:e+""}(n.key),n)}}function a(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function s(e,t,r){t=c(t);var n=e,t=l()?Reflect.construct(t,r||[],c(e).constructor):t.apply(e,r);if(t&&("object"==x(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(l=function(){return!!e})()}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}function h(e,t){return(h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}Object.defineProperty(r,"__esModule",{value:!0}),r.FetchClient=void 0;var p,d,e=e("./base.js"),g=(f(A,e.BaseResponse),a(A,[{key:"status",get:function(){return this.response.status}},{key:"getHeader",value:function(e){return this.response.headers.get(e)}},{key:"getData",value:(d=n(O().mark(function e(){var t;return O().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.response.arrayBuffer)return e.next=3,this.response.arrayBuffer();e.next=6;break;case 3:e.t0=e.sent,e.next=9;break;case 6:return e.next=8,this.response.buffer();case 8:e.t0=e.sent.buffer;case 9:return t=e.t0,e.abrupt("return",t);case 11:case"end":return e.stop()}},e,this)})),function(){return d.apply(this,arguments)})}])),e=(f(y,e.BaseClient),a(y,[{key:"request",value:(p=n(O().mark(function e(){var t,r,n,i=arguments;return O().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=(r=0<i.length&&void 0!==i[0]?i[0]:{}).headers,t=r.credentials,r=r.signal,e.next=3,fetch(this.url,{headers:n,credentials:t,signal:r});case 3:return n=e.sent,e.abrupt("return",new g(n));case 5:case"end":return e.stop()}},e,this)})),function(){return p.apply(this,arguments)})}]));function y(e,t){return i(this,y),(e=s(this,y,[e])).credentials=t,e}function A(e){var t;return i(this,A),(t=s(this,A)).response=e,t}r.FetchClient=e},{"./base.js":44}],46:[function(I,e,S){!function(C){!function(){"use strict";function x(e){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function t(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function a(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?t(Object(i),!0).forEach(function(e){var t,r;t=n,r=i[e=e],(e=o(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):t(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))})}return n}function O(){O=function(){return a};var u,a={},e=Object.prototype,l=e.hasOwnProperty,c=Object.defineProperty||function(e,t,r){e[t]=r.value},t="function"==typeof Symbol?Symbol:{},n=t.iterator||"@@iterator",r=t.asyncIterator||"@@asyncIterator",i=t.toStringTag||"@@toStringTag";function o(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{o({},"")}catch(u){o=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var i,o,a,s,t=t&&t.prototype instanceof A?t:A,t=Object.create(t.prototype),n=new S(n||[]);return c(t,"_invoke",{value:(i=e,o=r,a=n,s=h,function(e,t){if(s===d)throw Error("Generator is already running");if(s===g){if("throw"===e)throw t;return{value:u,done:!0}}for(a.method=e,a.arg=t;;){var r=a.delegate;if(r){r=function e(t,r){var n=r.method,i=t.iterator[n];if(i===u)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=u,e(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;n=f(i,t.iterator,r.arg);if("throw"===n.type)return r.method="throw",r.arg=n.arg,r.delegate=null,y;i=n.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=u),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}(r,a);if(r){if(r===y)continue;return r}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(s===h)throw s=g,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);s=d;r=f(i,o,a);if("normal"===r.type){if(s=a.done?g:p,r.arg===y)continue;return{value:r.arg,done:a.done}}"throw"===r.type&&(s=g,a.method="throw",a.arg=r.arg)}})}),t}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}a.wrap=s;var h="suspendedStart",p="suspendedYield",d="executing",g="completed",y={};function A(){}function m(){}function v(){}var t={},b=(o(t,n,function(){return this}),Object.getPrototypeOf),b=b&&b(b(j([]))),_=(b&&b!==e&&l.call(b,n)&&(t=b),v.prototype=A.prototype=Object.create(t));function w(e){["next","throw","return"].forEach(function(t){o(e,t,function(e){return this._invoke(t,e)})})}function E(a,s){var t;c(this,"_invoke",{value:function(r,n){function e(){return new s(function(e,t){!function t(e,r,n,i){var o,e=f(a[e],a,r);if("throw"!==e.type)return(r=(o=e.arg).value)&&"object"==x(r)&&l.call(r,"__await")?s.resolve(r.__await).then(function(e){t("next",e,n,i)},function(e){t("throw",e,n,i)}):s.resolve(r).then(function(e){o.value=e,n(o)},function(e){return t("throw",e,n,i)});i(e.arg)}(r,n,e,t)})}return t=t?t.then(e,e):e()}})}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function j(t){if(t||""===t){var r,e=t[n];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return r=-1,(e=function e(){for(;++r<t.length;)if(l.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=u,e.done=!0,e}).next=e}throw new TypeError(x(t)+" is not iterable")}return c(_,"constructor",{value:m.prototype=v,configurable:!0}),c(v,"constructor",{value:m,configurable:!0}),m.displayName=o(v,i,"GeneratorFunction"),a.isGeneratorFunction=function(e){e="function"==typeof e&&e.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},a.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,o(e,i,"GeneratorFunction")),e.prototype=Object.create(_),e},a.awrap=function(e){return{__await:e}},w(E.prototype),o(E.prototype,r,function(){return this}),a.AsyncIterator=E,a.async=function(e,t,r,n,i){void 0===i&&(i=Promise);var o=new E(s(e,t,r,n),i);return a.isGeneratorFunction(t)?o:o.next().then(function(e){return e.done?e.value:o.next()})},w(_),o(_,i,"Generator"),o(_,n,function(){return this}),o(_,"toString",function(){return"[object Generator]"}),a.keys=function(e){var t,r=Object(e),n=[];for(t in r)n.push(t);return n.reverse(),function e(){for(;n.length;){var t=n.pop();if(t in r)return e.value=t,e.done=!1,e}return e.done=!0,e}},a.values=j,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=u,this.done=!1,this.delegate=null,this.method="next",this.arg=u,this.tryEntries.forEach(I),!e)for(var t in this)"t"===t.charAt(0)&&l.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=u)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(r){if(this.done)throw r;var n=this;function e(e,t){return o.type="throw",o.arg=r,n.next=e,t&&(n.method="next",n.arg=u),!!t}for(var t=this.tryEntries.length-1;0<=t;--t){var i=this.tryEntries[t],o=i.completion;if("root"===i.tryLoc)return e("end");if(i.tryLoc<=this.prev){var a=l.call(i,"catchLoc"),s=l.call(i,"finallyLoc");if(a&&s){if(this.prev<i.catchLoc)return e(i.catchLoc,!0);if(this.prev<i.finallyLoc)return e(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return e(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return e(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;0<=r;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&l.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}var o=(i=i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc?null:i)?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var r,n,i=this.tryEntries[t];if(i.tryLoc===e)return"throw"===(r=i.completion).type&&(n=r.arg,I(i)),n}throw Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:j(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=u),y}},a}function u(e,t,r,n,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return r(e)}s.done?t(u):Promise.resolve(u).then(n,i)}function e(s){return function(){var e=this,a=arguments;return new Promise(function(t,r){var n=s.apply(e,a);function i(e){u(n,t,r,i,o,"next",e)}function o(e){u(n,t,r,i,o,"throw",e)}i(void 0)})}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,o(n.key),n)}}function r(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function o(e){e=function(e,t){if("object"!=x(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=x(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==x(e)?e:e+""}function s(e,t,r){t=c(t);var n=e,t=l()?Reflect.construct(t,r||[],c(e).constructor):t.apply(e,r);if(t&&("object"==x(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(l=function(){return!!e})()}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}function h(e,t){return(h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function p(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(S,"__esModule",{value:!0}),S.HttpClient=void 0;var d,g,y=p(I("http")),A=p(I("https")),m=p(I("url")),v=I("./base.js"),b=I("../../utils.js"),_=(f(E,v.BaseResponse),r(E,[{key:"status",get:function(){return this.response.statusCode}},{key:"getHeader",value:function(e){return this.response.headers[e]}},{key:"getData",value:(g=e(O().mark(function e(){var t;return O().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.dataPromise;case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}},e,this)})),function(){return g.apply(this,arguments)})}])),v=(f(w,v.BaseClient),r(w,[{key:"constructRequest",value:function(t,i){var o=this;return new Promise(function(r,n){var e=o.httpApi.get(a(a({},o.parsedUrl),{},{headers:t}),function(e){var t=new Promise(function(t){var r=[];e.on("data",function(e){r.push(e)}),e.on("end",function(){var e=C.concat(r).buffer;t(e)}),e.on("error",n)});r(new _(e,t))});e.on("error",n),i&&(i.aborted&&e.destroy(new b.AbortError("Request aborted")),i.addEventListener("abort",function(){return e.destroy(new b.AbortError("Request aborted"))}))})}},{key:"request",value:(d=e(O().mark(function e(){var t,r,n=arguments;return O().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=(t=0<n.length&&void 0!==n[0]?n[0]:{}).headers,t=t.signal,e.next=3,this.constructRequest(r,t);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}},e,this)})),function(){return d.apply(this,arguments)})}]));function w(e){return n(this,w),(e=s(this,w,[e])).parsedUrl=m.default.parse(e.url),e.httpApi=("http:"===e.parsedUrl.protocol?y:A).default,e}function E(e,t){var r;return n(this,E),(r=s(this,E)).response=e,r.dataPromise=t,r}S.HttpClient=v}.call(this)}.call(this,I("buffer").Buffer)},{"../../utils.js":52,"./base.js":44,buffer:9,http:428,https:70,url:449}],47:[function(e,t,r){"use strict";function x(e){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o,a,s=[],u=!0,l=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=o.call(r)).done)&&(s.push(n.value),s.length!==t);u=!0);}catch(e){l=!0,i=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}(e,t)||function(e,t){{var r;if(e)return"string"==typeof e?n(e,t):"Map"===(r="Object"===(r={}.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function O(){O=function(){return a};var u,a={},e=Object.prototype,l=e.hasOwnProperty,c=Object.defineProperty||function(e,t,r){e[t]=r.value},t="function"==typeof Symbol?Symbol:{},n=t.iterator||"@@iterator",r=t.asyncIterator||"@@asyncIterator",i=t.toStringTag||"@@toStringTag";function o(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{o({},"")}catch(u){o=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var i,o,a,s,t=t&&t.prototype instanceof A?t:A,t=Object.create(t.prototype),n=new S(n||[]);return c(t,"_invoke",{value:(i=e,o=r,a=n,s=h,function(e,t){if(s===d)throw Error("Generator is already running");if(s===g){if("throw"===e)throw t;return{value:u,done:!0}}for(a.method=e,a.arg=t;;){var r=a.delegate;if(r){r=function e(t,r){var n=r.method,i=t.iterator[n];if(i===u)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=u,e(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;n=f(i,t.iterator,r.arg);if("throw"===n.type)return r.method="throw",r.arg=n.arg,r.delegate=null,y;i=n.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=u),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}(r,a);if(r){if(r===y)continue;return r}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(s===h)throw s=g,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);s=d;r=f(i,o,a);if("normal"===r.type){if(s=a.done?g:p,r.arg===y)continue;return{value:r.arg,done:a.done}}"throw"===r.type&&(s=g,a.method="throw",a.arg=r.arg)}})}),t}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}a.wrap=s;var h="suspendedStart",p="suspendedYield",d="executing",g="completed",y={};function A(){}function m(){}function v(){}var t={},b=(o(t,n,function(){return this}),Object.getPrototypeOf),b=b&&b(b(j([]))),_=(b&&b!==e&&l.call(b,n)&&(t=b),v.prototype=A.prototype=Object.create(t));function w(e){["next","throw","return"].forEach(function(t){o(e,t,function(e){return this._invoke(t,e)})})}function E(a,s){var t;c(this,"_invoke",{value:function(r,n){function e(){return new s(function(e,t){!function t(e,r,n,i){var o,e=f(a[e],a,r);if("throw"!==e.type)return(r=(o=e.arg).value)&&"object"==x(r)&&l.call(r,"__await")?s.resolve(r.__await).then(function(e){t("next",e,n,i)},function(e){t("throw",e,n,i)}):s.resolve(r).then(function(e){o.value=e,n(o)},function(e){return t("throw",e,n,i)});i(e.arg)}(r,n,e,t)})}return t=t?t.then(e,e):e()}})}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function j(t){if(t||""===t){var r,e=t[n];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return r=-1,(e=function e(){for(;++r<t.length;)if(l.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=u,e.done=!0,e}).next=e}throw new TypeError(x(t)+" is not iterable")}return c(_,"constructor",{value:m.prototype=v,configurable:!0}),c(v,"constructor",{value:m,configurable:!0}),m.displayName=o(v,i,"GeneratorFunction"),a.isGeneratorFunction=function(e){e="function"==typeof e&&e.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},a.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,o(e,i,"GeneratorFunction")),e.prototype=Object.create(_),e},a.awrap=function(e){return{__await:e}},w(E.prototype),o(E.prototype,r,function(){return this}),a.AsyncIterator=E,a.async=function(e,t,r,n,i){void 0===i&&(i=Promise);var o=new E(s(e,t,r,n),i);return a.isGeneratorFunction(t)?o:o.next().then(function(e){return e.done?e.value:o.next()})},w(_),o(_,i,"Generator"),o(_,n,function(){return this}),o(_,"toString",function(){return"[object Generator]"}),a.keys=function(e){var t,r=Object(e),n=[];for(t in r)n.push(t);return n.reverse(),function e(){for(;n.length;){var t=n.pop();if(t in r)return e.value=t,e.done=!1,e}return e.done=!0,e}},a.values=j,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=u,this.done=!1,this.delegate=null,this.method="next",this.arg=u,this.tryEntries.forEach(I),!e)for(var t in this)"t"===t.charAt(0)&&l.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=u)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(r){if(this.done)throw r;var n=this;function e(e,t){return o.type="throw",o.arg=r,n.next=e,t&&(n.method="next",n.arg=u),!!t}for(var t=this.tryEntries.length-1;0<=t;--t){var i=this.tryEntries[t],o=i.completion;if("root"===i.tryLoc)return e("end");if(i.tryLoc<=this.prev){var a=l.call(i,"catchLoc"),s=l.call(i,"finallyLoc");if(a&&s){if(this.prev<i.catchLoc)return e(i.catchLoc,!0);if(this.prev<i.finallyLoc)return e(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return e(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return e(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;0<=r;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&l.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}var o=(i=i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc?null:i)?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var r,n,i=this.tryEntries[t];if(i.tryLoc===e)return"throw"===(r=i.completion).type&&(n=r.arg,I(i)),n}throw Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:j(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=u),y}},a}function u(e,t,r,n,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return r(e)}s.done?t(u):Promise.resolve(u).then(n,i)}function i(s){return function(){var e=this,a=arguments;return new Promise(function(t,r){var n=s.apply(e,a);function i(e){u(n,t,r,i,o,"next",e)}function o(e){u(n,t,r,i,o,"throw",e)}i(void 0)})}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=x(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=x(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==x(e)?e:e+""}(n.key),n)}}function s(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function l(e,t,r){t=h(t);var n=e,t=f()?Reflect.construct(t,r||[],h(e).constructor):t.apply(e,r);if(t&&("object"==x(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(f=function(){return!!e})()}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}function d(e,t){return(d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}Object.defineProperty(r,"__esModule",{value:!0}),r.XHRClient=void 0;var g,y,A=e("./base.js"),m=e("../../utils.js"),v=(p(_,A.BaseResponse),s(_,[{key:"status",get:function(){return this.xhr.status}},{key:"getHeader",value:function(e){return this.xhr.getResponseHeader(e)}},{key:"getData",value:(y=i(O().mark(function e(){return O().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.data);case 1:case"end":return e.stop()}},e,this)})),function(){return y.apply(this,arguments)})}])),e=(p(b,A.BaseClient),s(b,[{key:"constructRequest",value:function(s,u){var l=this;return new Promise(function(t,e){var r=new XMLHttpRequest;r.open("GET",l.url),r.responseType="arraybuffer";for(var n=0,i=Object.entries(s);n<i.length;n++){var o=c(i[n],2),a=o[0],o=o[1];r.setRequestHeader(a,o)}r.onload=function(){var e=r.response;t(new v(r,e))},r.onerror=e,r.onabort=function(){return e(new m.AbortError("Request aborted"))},r.send(),u&&(u.aborted&&r.abort(),u.addEventListener("abort",function(){return r.abort()}))})}},{key:"request",value:(g=i(O().mark(function e(){var t,r,n=arguments;return O().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=(t=0<n.length&&void 0!==n[0]?n[0]:{}).headers,t=t.signal,e.next=3,this.constructRequest(r,t);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}},e,this)})),function(){return g.apply(this,arguments)})}]));function b(){return o(this,b),l(this,b,arguments)}function _(e,t){var r;return o(this,_),(r=l(this,_)).xhr=e,r.data=t,r}r.XHRClient=e},{"../../utils.js":52,"./base.js":44}],48:[function(r,e,n){!function(p){!function(){"use strict";function x(e){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(){O=function(){return a};var u,a={},e=Object.prototype,l=e.hasOwnProperty,c=Object.defineProperty||function(e,t,r){e[t]=r.value},t="function"==typeof Symbol?Symbol:{},n=t.iterator||"@@iterator",r=t.asyncIterator||"@@asyncIterator",i=t.toStringTag||"@@toStringTag";function o(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{o({},"")}catch(u){o=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var i,o,a,s,t=t&&t.prototype instanceof A?t:A,t=Object.create(t.prototype),n=new S(n||[]);return c(t,"_invoke",{value:(i=e,o=r,a=n,s=h,function(e,t){if(s===d)throw Error("Generator is already running");if(s===g){if("throw"===e)throw t;return{value:u,done:!0}}for(a.method=e,a.arg=t;;){var r=a.delegate;if(r){r=function e(t,r){var n=r.method,i=t.iterator[n];if(i===u)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=u,e(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;n=f(i,t.iterator,r.arg);if("throw"===n.type)return r.method="throw",r.arg=n.arg,r.delegate=null,y;i=n.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=u),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}(r,a);if(r){if(r===y)continue;return r}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(s===h)throw s=g,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);s=d;r=f(i,o,a);if("normal"===r.type){if(s=a.done?g:p,r.arg===y)continue;return{value:r.arg,done:a.done}}"throw"===r.type&&(s=g,a.method="throw",a.arg=r.arg)}})}),t}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}a.wrap=s;var h="suspendedStart",p="suspendedYield",d="executing",g="completed",y={};function A(){}function m(){}function v(){}var t={},b=(o(t,n,function(){return this}),Object.getPrototypeOf),b=b&&b(b(j([]))),_=(b&&b!==e&&l.call(b,n)&&(t=b),v.prototype=A.prototype=Object.create(t));function w(e){["next","throw","return"].forEach(function(t){o(e,t,function(e){return this._invoke(t,e)})})}function E(a,s){var t;c(this,"_invoke",{value:function(r,n){function e(){return new s(function(e,t){!function t(e,r,n,i){var o,e=f(a[e],a,r);if("throw"!==e.type)return(r=(o=e.arg).value)&&"object"==x(r)&&l.call(r,"__await")?s.resolve(r.__await).then(function(e){t("next",e,n,i)},function(e){t("throw",e,n,i)}):s.resolve(r).then(function(e){o.value=e,n(o)},function(e){return t("throw",e,n,i)});i(e.arg)}(r,n,e,t)})}return t=t?t.then(e,e):e()}})}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function j(t){if(t||""===t){var r,e=t[n];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return r=-1,(e=function e(){for(;++r<t.length;)if(l.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=u,e.done=!0,e}).next=e}throw new TypeError(x(t)+" is not iterable")}return c(_,"constructor",{value:m.prototype=v,configurable:!0}),c(v,"constructor",{value:m,configurable:!0}),m.displayName=o(v,i,"GeneratorFunction"),a.isGeneratorFunction=function(e){e="function"==typeof e&&e.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},a.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,o(e,i,"GeneratorFunction")),e.prototype=Object.create(_),e},a.awrap=function(e){return{__await:e}},w(E.prototype),o(E.prototype,r,function(){return this}),a.AsyncIterator=E,a.async=function(e,t,r,n,i){void 0===i&&(i=Promise);var o=new E(s(e,t,r,n),i);return a.isGeneratorFunction(t)?o:o.next().then(function(e){return e.done?e.value:o.next()})},w(_),o(_,i,"Generator"),o(_,n,function(){return this}),o(_,"toString",function(){return"[object Generator]"}),a.keys=function(e){var t,r=Object(e),n=[];for(t in r)n.push(t);return n.reverse(),function e(){for(;n.length;){var t=n.pop();if(t in r)return e.value=t,e.done=!1,e}return e.done=!0,e}},a.values=j,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=u,this.done=!1,this.delegate=null,this.method="next",this.arg=u,this.tryEntries.forEach(I),!e)for(var t in this)"t"===t.charAt(0)&&l.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=u)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(r){if(this.done)throw r;var n=this;function e(e,t){return o.type="throw",o.arg=r,n.next=e,t&&(n.method="next",n.arg=u),!!t}for(var t=this.tryEntries.length-1;0<=t;--t){var i=this.tryEntries[t],o=i.completion;if("root"===i.tryLoc)return e("end");if(i.tryLoc<=this.prev){var a=l.call(i,"catchLoc"),s=l.call(i,"finallyLoc");if(a&&s){if(this.prev<i.catchLoc)return e(i.catchLoc,!0);if(this.prev<i.finallyLoc)return e(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return e(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return e(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;0<=r;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&l.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}var o=(i=i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc?null:i)?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var r,n,i=this.tryEntries[t];if(i.tryLoc===e)return"throw"===(r=i.completion).type&&(n=r.arg,I(i)),n}throw Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:j(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=u),y}},a}function u(e,t,r,n,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return r(e)}s.done?t(u):Promise.resolve(u).then(n,i)}function a(s){return function(){var e=this,a=arguments;return new Promise(function(t,r){var n=s.apply(e,a);function i(e){u(n,t,r,i,o,"next",e)}function o(e){u(n,t,r,i,o,"throw",e)}i(void 0)})}}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=x(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=x(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==x(e)?e:e+""}(n.key),n)}}function l(e,t,r){t=o(t);var n=e,t=i()?Reflect.construct(t,r||[],o(e).constructor):t.apply(e,r);if(t&&("object"==x(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function i(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(i=function(){return!!e})()}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}Object.defineProperty(n,"__esModule",{value:!0}),n.makeFileSource=void 0;var e,f=(e=r("fs"))&&e.__esModule?e:{default:e},h=r("./basesource.js");var t=function(){function r(e){var t;if(this instanceof r)return(t=l(this,r)).path=e,t.openRequest=function(e,t,r){var i=2<arguments.length&&void 0!==r?r:void 0;return new Promise(function(r,n){f.default.open(e,t,i,function(e,t){e?n(e):r(t)})})}(e,"r"),t;throw new TypeError("Cannot call a class as a function")}var e,t,n,i=r,o=h.BaseSource;if("function"!=typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function");return i.prototype=Object.create(o&&o.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),o&&c(i,o),i=r,(o=[{key:"fetchSlice",value:(n=a(O().mark(function e(t){var r,n;return O().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.openRequest;case 2:return r=e.sent,e.next=5,function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return new Promise(function(n,i){var e;(e=f.default).read.apply(e,t.concat([function(e,t,r){e?i(e):n({bytesRead:t,buffer:r})}]))})}(r,p.alloc(t.length),0,t.length,t.offset);case 5:return r=e.sent,n=r.buffer,e.abrupt("return",n.buffer);case 8:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)})},{key:"close",value:(t=a(O().mark(function e(){var t;return O().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.openRequest;case 2:t=e.sent,e.next=5;var n=t;return new Promise(function(t,r){f.default.close(n,function(e){e?r(e):t()})});case 5:case"end":return e.stop()}},e,this)})),function(){return t.apply(this,arguments)})}])&&s(i.prototype,o),e&&s(i,e),Object.defineProperty(i,"prototype",{writable:!1}),i}();n.makeFileSource=function(e){return new t(e)}}.call(this)}.call(this,r("buffer").Buffer)},{"./basesource.js":42,buffer:9,fs:8}],49:[function(e,t,r){"use strict";function x(e){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(){O=function(){return a};var u,a={},e=Object.prototype,l=e.hasOwnProperty,c=Object.defineProperty||function(e,t,r){e[t]=r.value},t="function"==typeof Symbol?Symbol:{},n=t.iterator||"@@iterator",r=t.asyncIterator||"@@asyncIterator",i=t.toStringTag||"@@toStringTag";function o(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{o({},"")}catch(u){o=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var i,o,a,s,t=t&&t.prototype instanceof A?t:A,t=Object.create(t.prototype),n=new S(n||[]);return c(t,"_invoke",{value:(i=e,o=r,a=n,s=h,function(e,t){if(s===d)throw Error("Generator is already running");if(s===g){if("throw"===e)throw t;return{value:u,done:!0}}for(a.method=e,a.arg=t;;){var r=a.delegate;if(r){r=function e(t,r){var n=r.method,i=t.iterator[n];if(i===u)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=u,e(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;n=f(i,t.iterator,r.arg);if("throw"===n.type)return r.method="throw",r.arg=n.arg,r.delegate=null,y;i=n.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=u),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}(r,a);if(r){if(r===y)continue;return r}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(s===h)throw s=g,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);s=d;r=f(i,o,a);if("normal"===r.type){if(s=a.done?g:p,r.arg===y)continue;return{value:r.arg,done:a.done}}"throw"===r.type&&(s=g,a.method="throw",a.arg=r.arg)}})}),t}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}a.wrap=s;var h="suspendedStart",p="suspendedYield",d="executing",g="completed",y={};function A(){}function m(){}function v(){}var t={},b=(o(t,n,function(){return this}),Object.getPrototypeOf),b=b&&b(b(j([]))),_=(b&&b!==e&&l.call(b,n)&&(t=b),v.prototype=A.prototype=Object.create(t));function w(e){["next","throw","return"].forEach(function(t){o(e,t,function(e){return this._invoke(t,e)})})}function E(a,s){var t;c(this,"_invoke",{value:function(r,n){function e(){return new s(function(e,t){!function t(e,r,n,i){var o,e=f(a[e],a,r);if("throw"!==e.type)return(r=(o=e.arg).value)&&"object"==x(r)&&l.call(r,"__await")?s.resolve(r.__await).then(function(e){t("next",e,n,i)},function(e){t("throw",e,n,i)}):s.resolve(r).then(function(e){o.value=e,n(o)},function(e){return t("throw",e,n,i)});i(e.arg)}(r,n,e,t)})}return t=t?t.then(e,e):e()}})}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function j(t){if(t||""===t){var r,e=t[n];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return r=-1,(e=function e(){for(;++r<t.length;)if(l.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=u,e.done=!0,e}).next=e}throw new TypeError(x(t)+" is not iterable")}return c(_,"constructor",{value:m.prototype=v,configurable:!0}),c(v,"constructor",{value:m,configurable:!0}),m.displayName=o(v,i,"GeneratorFunction"),a.isGeneratorFunction=function(e){e="function"==typeof e&&e.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},a.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,o(e,i,"GeneratorFunction")),e.prototype=Object.create(_),e},a.awrap=function(e){return{__await:e}},w(E.prototype),o(E.prototype,r,function(){return this}),a.AsyncIterator=E,a.async=function(e,t,r,n,i){void 0===i&&(i=Promise);var o=new E(s(e,t,r,n),i);return a.isGeneratorFunction(t)?o:o.next().then(function(e){return e.done?e.value:o.next()})},w(_),o(_,i,"Generator"),o(_,n,function(){return this}),o(_,"toString",function(){return"[object Generator]"}),a.keys=function(e){var t,r=Object(e),n=[];for(t in r)n.push(t);return n.reverse(),function e(){for(;n.length;){var t=n.pop();if(t in r)return e.value=t,e.done=!1,e}return e.done=!0,e}},a.values=j,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=u,this.done=!1,this.delegate=null,this.method="next",this.arg=u,this.tryEntries.forEach(I),!e)for(var t in this)"t"===t.charAt(0)&&l.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=u)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(r){if(this.done)throw r;var n=this;function e(e,t){return o.type="throw",o.arg=r,n.next=e,t&&(n.method="next",n.arg=u),!!t}for(var t=this.tryEntries.length-1;0<=t;--t){var i=this.tryEntries[t],o=i.completion;if("root"===i.tryLoc)return e("end");if(i.tryLoc<=this.prev){var a=l.call(i,"catchLoc"),s=l.call(i,"finallyLoc");if(a&&s){if(this.prev<i.catchLoc)return e(i.catchLoc,!0);if(this.prev<i.finallyLoc)return e(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return e(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return e(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;0<=r;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&l.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}var o=(i=i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc?null:i)?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var r,n,i=this.tryEntries[t];if(i.tryLoc===e)return"throw"===(r=i.completion).type&&(n=r.arg,I(i)),n}throw Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:j(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=u),y}},a}function u(e,t,r,n,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return r(e)}s.done?t(u):Promise.resolve(u).then(n,i)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=x(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=x(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==x(e)?e:e+""}(n.key),n)}}function a(e,t,r){t=s(t);var n=e,t=i()?Reflect.construct(t,r||[],s(e).constructor):t.apply(e,r);if(t&&("object"==x(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function i(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(i=function(){return!!e})()}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}Object.defineProperty(r,"__esModule",{value:!0}),r.makeFileReaderSource=void 0;var c=e("./basesource.js"),n=function(){function r(e){var t;if(this instanceof r)return(t=a(this,r)).file=e,t;throw new TypeError("Cannot call a class as a function")}var e,s,n,t=r,i=c.BaseSource;if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(i&&i.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),i&&l(t,i),t=r,(i=[{key:"fetchSlice",value:(s=O().mark(function e(i,o){var a=this;return O().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(t,e){var r=a.file.slice(i.offset,i.offset+i.length),n=new FileReader;n.onload=function(e){return t(e.target.result)},n.onerror=e,n.onabort=e,n.readAsArrayBuffer(r),o&&o.addEventListener("abort",function(){return n.abort()})}));case 1:case"end":return e.stop()}},e)}),n=function(){var e=this,a=arguments;return new Promise(function(t,r){var n=s.apply(e,a);function i(e){u(n,t,r,i,o,"next",e)}function o(e){u(n,t,r,i,o,"throw",e)}i(void 0)})},function(e,t){return n.apply(this,arguments)})}])&&o(t.prototype,i),e&&o(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();r.makeFileReaderSource=function(e){return new n(e)}},{"./basesource.js":42}],50:[function(e,t,r){"use strict";function n(e){return o(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||u(e)||i()}function s(e,t){return o(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o,a,s=[],u=!0,l=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=o.call(r)).done)&&(s.push(n.value),s.length!==t);u=!0);}catch(e){l=!0,i=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}(e,t)||u(e,t)||i()}function i(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(e){if(Array.isArray(e))return e}function u(e,t){var r;if(e)return"string"==typeof e?a(e,t):"Map"===(r="Object"===(r={}.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(e,t):void 0}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}Object.defineProperty(r,"__esModule",{value:!0}),r.parseByteRanges=r.parseContentRange=r.parseContentType=void 0;function p(e){if(void 0!==Object.fromEntries)return Object.fromEntries(e);var t,r={},n=function(e,t){var r,n,i,o,a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(a)return i=!(n=!0),{s:function(){a=a.call(e)},n:function(){var e=a.next();return n=e.done,e},e:function(e){i=!0,r=e},f:function(){try{n||null==a.return||a.return()}finally{if(i)throw r}}};if(Array.isArray(e)||(a=u(e))||t&&e&&"number"==typeof e.length)return a&&(e=a),o=0,{s:t=function(){},n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(e);try{for(n.s();!(t=n.n()).done;){var i=s(t.value,2),o=i[0],a=i[1];r[o.toLowerCase()]=a}}catch(e){n.e(e)}finally{n.f()}return r}function d(e){var t,r,n;return e&&(t=(e=s(e.match(/bytes (\d+)-(\d+)\/(\d+)/),4))[1],r=e[2],n=e[3],t=parseInt(t,10),r=parseInt(r,10),n=parseInt(n,10)),{start:t,end:r,total:n}}r.parseContentType=function(e){return{type:(e=n(e.split(";").map(function(e){return e.trim()})))[0],params:p(e.slice(1).map(function(e){return e.split("=")}))}},r.parseContentRange=d,r.parseByteRanges=function(e,t){for(var r=null,n=new TextDecoder("ascii"),i=[],o="--".concat(t),a="".concat(o,"--"),s=0;s<10;++s)n.decode(new Uint8Array(e,s,o.length))===o&&(r=s);if(null===r)throw new Error("Could not find initial boundary");for(;r<e.byteLength;){var u=n.decode(new Uint8Array(e,r,Math.min(o.length+1024,e.byteLength-r)));if(0===u.length||u.startsWith(a))break;if(!u.startsWith(o))throw new Error("Part does not start with boundary");u=u.substr(o.length+2);if(0===u.length)break;var l=u.indexOf("\r\n\r\n"),u=p(u.substr(0,l).split("\r\n").map(function(e){e=e.split(":").map(function(e){return e.trim()});return e[0]=e[0].toLowerCase(),e})),c=d(u["content-range"]),f=c.start,h=c.end,c=c.total,l=r+o.length+l+"\r\n\r\n".length,h=parseInt(h,10)+1-parseInt(f,10);i.push({headers:u,data:e.slice(l,l+h),offset:f,length:h,fileSize:c}),r=l+h+4}return i}},{}],51:[function(e,t,r){"use strict";function x(e){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var a=["headers","credentials","maxRanges","allowFullFile"],o=["headers","maxRanges","allowFullFile"],s=["headers","maxRanges","allowFullFile"],u=["headers","maxRanges","allowFullFile"],n=["forceXHR"];function l(e,t){if(null==e)return{};var r,n=function(e,t){if(null==e)return{};var r,n={};for(r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols)for(var i=Object.getOwnPropertySymbols(e),o=0;o<i.length;o++)r=i[o],t.includes(r)||{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r]);return n}function c(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function f(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?c(Object(i),!0).forEach(function(e){var t,r;t=n,r=i[e=e],(e=g(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):c(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))})}return n}function O(){O=function(){return a};var u,a={},e=Object.prototype,l=e.hasOwnProperty,c=Object.defineProperty||function(e,t,r){e[t]=r.value},t="function"==typeof Symbol?Symbol:{},n=t.iterator||"@@iterator",r=t.asyncIterator||"@@asyncIterator",i=t.toStringTag||"@@toStringTag";function o(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{o({},"")}catch(u){o=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var i,o,a,s,t=t&&t.prototype instanceof A?t:A,t=Object.create(t.prototype),n=new S(n||[]);return c(t,"_invoke",{value:(i=e,o=r,a=n,s=h,function(e,t){if(s===d)throw Error("Generator is already running");if(s===g){if("throw"===e)throw t;return{value:u,done:!0}}for(a.method=e,a.arg=t;;){var r=a.delegate;if(r){r=function e(t,r){var n=r.method,i=t.iterator[n];if(i===u)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=u,e(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;n=f(i,t.iterator,r.arg);if("throw"===n.type)return r.method="throw",r.arg=n.arg,r.delegate=null,y;i=n.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=u),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}(r,a);if(r){if(r===y)continue;return r}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(s===h)throw s=g,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);s=d;r=f(i,o,a);if("normal"===r.type){if(s=a.done?g:p,r.arg===y)continue;return{value:r.arg,done:a.done}}"throw"===r.type&&(s=g,a.method="throw",a.arg=r.arg)}})}),t}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}a.wrap=s;var h="suspendedStart",p="suspendedYield",d="executing",g="completed",y={};function A(){}function m(){}function v(){}var t={},b=(o(t,n,function(){return this}),Object.getPrototypeOf),b=b&&b(b(j([]))),_=(b&&b!==e&&l.call(b,n)&&(t=b),v.prototype=A.prototype=Object.create(t));function w(e){["next","throw","return"].forEach(function(t){o(e,t,function(e){return this._invoke(t,e)})})}function E(a,s){var t;c(this,"_invoke",{value:function(r,n){function e(){return new s(function(e,t){!function t(e,r,n,i){var o,e=f(a[e],a,r);if("throw"!==e.type)return(r=(o=e.arg).value)&&"object"==x(r)&&l.call(r,"__await")?s.resolve(r.__await).then(function(e){t("next",e,n,i)},function(e){t("throw",e,n,i)}):s.resolve(r).then(function(e){o.value=e,n(o)},function(e){return t("throw",e,n,i)});i(e.arg)}(r,n,e,t)})}return t=t?t.then(e,e):e()}})}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function j(t){if(t||""===t){var r,e=t[n];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return r=-1,(e=function e(){for(;++r<t.length;)if(l.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=u,e.done=!0,e}).next=e}throw new TypeError(x(t)+" is not iterable")}return c(_,"constructor",{value:m.prototype=v,configurable:!0}),c(v,"constructor",{value:m,configurable:!0}),m.displayName=o(v,i,"GeneratorFunction"),a.isGeneratorFunction=function(e){e="function"==typeof e&&e.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},a.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,o(e,i,"GeneratorFunction")),e.prototype=Object.create(_),e},a.awrap=function(e){return{__await:e}},w(E.prototype),o(E.prototype,r,function(){return this}),a.AsyncIterator=E,a.async=function(e,t,r,n,i){void 0===i&&(i=Promise);var o=new E(s(e,t,r,n),i);return a.isGeneratorFunction(t)?o:o.next().then(function(e){return e.done?e.value:o.next()})},w(_),o(_,i,"Generator"),o(_,n,function(){return this}),o(_,"toString",function(){return"[object Generator]"}),a.keys=function(e){var t,r=Object(e),n=[];for(t in r)n.push(t);return n.reverse(),function e(){for(;n.length;){var t=n.pop();if(t in r)return e.value=t,e.done=!1,e}return e.done=!0,e}},a.values=j,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=u,this.done=!1,this.delegate=null,this.method="next",this.arg=u,this.tryEntries.forEach(I),!e)for(var t in this)"t"===t.charAt(0)&&l.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=u)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(r){if(this.done)throw r;var n=this;function e(e,t){return o.type="throw",o.arg=r,n.next=e,t&&(n.method="next",n.arg=u),!!t}for(var t=this.tryEntries.length-1;0<=t;--t){var i=this.tryEntries[t],o=i.completion;if("root"===i.tryLoc)return e("end");if(i.tryLoc<=this.prev){var a=l.call(i,"catchLoc"),s=l.call(i,"finallyLoc");if(a&&s){if(this.prev<i.catchLoc)return e(i.catchLoc,!0);if(this.prev<i.finallyLoc)return e(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return e(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return e(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;0<=r;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&l.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}var o=(i=i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc?null:i)?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var r,n,i=this.tryEntries[t];if(i.tryLoc===e)return"throw"===(r=i.completion).type&&(n=r.arg,I(i)),n}throw Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:j(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=u),y}},a}function h(e,t,r,n,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return r(e)}s.done?t(u):Promise.resolve(u).then(n,i)}function p(s){return function(){var e=this,a=arguments;return new Promise(function(t,r){var n=s.apply(e,a);function i(e){h(n,t,r,i,o,"next",e)}function o(e){h(n,t,r,i,o,"throw",e)}i(void 0)})}}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,g(n.key),n)}}function g(e){e=function(e,t){if("object"!=x(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=x(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==x(e)?e:e+""}function y(e,t,r){t=A(t);var n=e,t=i()?Reflect.construct(t,r||[],A(e).constructor):t.apply(e,r);if(t&&("object"==x(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function i(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(i=function(){return!!e})()}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}Object.defineProperty(r,"__esModule",{value:!0}),r.makeRemoteSource=r.makeCustomSource=r.makeHttpSource=r.makeXHRSource=r.makeFetchSource=void 0;var v=e("./httputils.js"),b=e("./basesource.js"),_=e("./blockedsource.js"),w=e("./client/fetch.js"),E=e("./client/xhr.js"),C=e("./client/http.js"),I=function(){function o(e,t,r,n){var i;if(this instanceof o)return(i=y(this,o)).client=e,i.headers=t,i.maxRanges=r,i.allowFullFile=n,i._fileSize=null,i;throw new TypeError("Cannot call a class as a function")}var e,r,n,i,t=o,a=b.BaseSource;if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(a&&a.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),a&&m(t,a),t=o,(a=[{key:"fetch",value:(i=p(O().mark(function e(t,r){var n=this;return O().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.maxRanges>=t.length)return e.abrupt("return",this.fetchSlices(t,r));e.next=4;break;case 4:0<this.maxRanges&&t.length;case 5:return e.abrupt("return",Promise.all(t.map(function(e){return n.fetchSlice(e,r)})));case 6:case"end":return e.stop()}},e,this)})),function(e,t){return i.apply(this,arguments)})},{key:"fetchSlices",value:(n=p(O().mark(function e(t,r){var n,i,o,a,s,u,l,c=this;return O().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.client.request({headers:f(f({},this.headers),{},{Range:"bytes=".concat(t.map(function(e){var t=e.offset,e=e.length;return"".concat(t,"-").concat(t+e)}).join(","))}),signal:r});case 2:if((n=e.sent).ok){e.next=7;break}throw new Error("Error fetching data.");case 7:if(206!==n.status)e.next=32;else{if(i=(0,v.parseContentType)(n.getHeader("content-type")),o=i.type,i=i.params,"multipart/byteranges"===o)return e.t0=v.parseByteRanges,e.next=13,n.getData();e.next=18}break;case 13:return e.t1=e.sent,e.t2=i.boundary,o=(0,e.t0)(e.t1,e.t2),this._fileSize=o[0].fileSize||null,e.abrupt("return",o);case 18:return e.next=20,n.getData();case 20:if(u=e.sent,s=(0,v.parseContentRange)(n.getHeader("content-range")),a=s.start,l=s.end,s=s.total,this._fileSize=s||null,s=[{data:u,offset:a,length:l-a}],1<t.length)return e.next=27,Promise.all(t.slice(1).map(function(e){return c.fetchSlice(e,r)}));e.next=29;break;case 27:return u=e.sent,e.abrupt("return",s.concat(u));case 29:return e.abrupt("return",s);case 32:if(this.allowFullFile){e.next=34;break}throw new Error("Server responded with full file");case 34:return e.next=36,n.getData();case 36:return l=e.sent,this._fileSize=l.byteLength,e.abrupt("return",[{data:l,offset:0,length:l.byteLength}]);case 39:case"end":return e.stop()}},e,this)})),function(e,t){return n.apply(this,arguments)})},{key:"fetchSlice",value:(r=p(O().mark(function e(t,r){var n,i,o,a,s;return O().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.offset,i=t.length,e.next=3,this.client.request({headers:f(f({},this.headers),{},{Range:"bytes=".concat(n,"-").concat(n+i)}),signal:r});case 3:if((o=e.sent).ok){e.next=8;break}throw new Error("Error fetching data.");case 8:if(206===o.status)return e.next=11,o.getData();e.next=17;break;case 11:return a=e.sent,s=(0,v.parseContentRange)(o.getHeader("content-range")),s=s.total,this._fileSize=s||null,e.abrupt("return",{data:a,offset:n,length:i});case 17:if(this.allowFullFile){e.next=19;break}throw new Error("Server responded with full file");case 19:return e.next=21,o.getData();case 21:return s=e.sent,this._fileSize=s.byteLength,e.abrupt("return",{data:s,offset:0,length:s.byteLength});case 24:case"end":return e.stop()}},e,this)})),function(e,t){return r.apply(this,arguments)})},{key:"fileSize",get:function(){return this._fileSize}}])&&d(t.prototype,a),e&&d(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();function S(e,t){var r=t.blockSize,t=t.cacheSize;return null===r?e:new _.BlockedSource(e,{blockSize:r,cacheSize:t})}function j(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=t.headers,r=void 0===r?{}:r,n=t.credentials,i=t.maxRanges,i=void 0===i?0:i,o=t.allowFullFile,o=void 0!==o&&o,t=l(t,a),e=new w.FetchClient(e,n);return S(new I(e,r,i,o),t)}function P(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=t.headers,r=void 0===r?{}:r,n=t.maxRanges,n=void 0===n?0:n,i=t.allowFullFile,i=void 0!==i&&i,t=l(t,o),e=new E.XHRClient(e);return S(new I(e,r,n,i),t)}function k(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=t.headers,r=void 0===r?{}:r,n=t.maxRanges,n=void 0===n?0:n,i=t.allowFullFile,i=void 0!==i&&i,t=l(t,s),e=new C.HttpClient(e);return S(new I(e,r,n,i),t)}r.makeFetchSource=j,r.makeXHRSource=P,r.makeHttpSource=k,r.makeCustomSource=function(e){var t=void 0===(t=(i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).headers)?{}:t,r=void 0===(r=i.maxRanges)?0:r,n=void 0!==(n=i.allowFullFile)&&n,i=l(i,u);return S(new I(e,t,r,n),i)},r.makeRemoteSource=function(e){var t=void 0!==(t=(r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).forceXHR)&&t,r=l(r,n);return("function"!=typeof fetch||t?"undefined"!=typeof XMLHttpRequest?P:k:j)(e,r)}},{"./basesource.js":42,"./blockedsource.js":43,"./client/fetch.js":45,"./client/http.js":46,"./client/xhr.js":47,"./httputils.js":50}],52:[function(e,t,r){"use strict";function x(e){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(){O=function(){return a};var u,a={},e=Object.prototype,l=e.hasOwnProperty,c=Object.defineProperty||function(e,t,r){e[t]=r.value},t="function"==typeof Symbol?Symbol:{},n=t.iterator||"@@iterator",r=t.asyncIterator||"@@asyncIterator",i=t.toStringTag||"@@toStringTag";function o(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{o({},"")}catch(u){o=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var i,o,a,s,t=t&&t.prototype instanceof A?t:A,t=Object.create(t.prototype),n=new S(n||[]);return c(t,"_invoke",{value:(i=e,o=r,a=n,s=h,function(e,t){if(s===d)throw Error("Generator is already running");if(s===g){if("throw"===e)throw t;return{value:u,done:!0}}for(a.method=e,a.arg=t;;){var r=a.delegate;if(r){r=function e(t,r){var n=r.method,i=t.iterator[n];if(i===u)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=u,e(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;n=f(i,t.iterator,r.arg);if("throw"===n.type)return r.method="throw",r.arg=n.arg,r.delegate=null,y;i=n.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=u),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}(r,a);if(r){if(r===y)continue;return r}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(s===h)throw s=g,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);s=d;r=f(i,o,a);if("normal"===r.type){if(s=a.done?g:p,r.arg===y)continue;return{value:r.arg,done:a.done}}"throw"===r.type&&(s=g,a.method="throw",a.arg=r.arg)}})}),t}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}a.wrap=s;var h="suspendedStart",p="suspendedYield",d="executing",g="completed",y={};function A(){}function m(){}function v(){}var t={},b=(o(t,n,function(){return this}),Object.getPrototypeOf),b=b&&b(b(j([]))),_=(b&&b!==e&&l.call(b,n)&&(t=b),v.prototype=A.prototype=Object.create(t));function w(e){["next","throw","return"].forEach(function(t){o(e,t,function(e){return this._invoke(t,e)})})}function E(a,s){var t;c(this,"_invoke",{value:function(r,n){function e(){return new s(function(e,t){!function t(e,r,n,i){var o,e=f(a[e],a,r);if("throw"!==e.type)return(r=(o=e.arg).value)&&"object"==x(r)&&l.call(r,"__await")?s.resolve(r.__await).then(function(e){t("next",e,n,i)},function(e){t("throw",e,n,i)}):s.resolve(r).then(function(e){o.value=e,n(o)},function(e){return t("throw",e,n,i)});i(e.arg)}(r,n,e,t)})}return t=t?t.then(e,e):e()}})}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function j(t){if(t||""===t){var r,e=t[n];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return r=-1,(e=function e(){for(;++r<t.length;)if(l.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=u,e.done=!0,e}).next=e}throw new TypeError(x(t)+" is not iterable")}return c(_,"constructor",{value:m.prototype=v,configurable:!0}),c(v,"constructor",{value:m,configurable:!0}),m.displayName=o(v,i,"GeneratorFunction"),a.isGeneratorFunction=function(e){e="function"==typeof e&&e.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},a.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,o(e,i,"GeneratorFunction")),e.prototype=Object.create(_),e},a.awrap=function(e){return{__await:e}},w(E.prototype),o(E.prototype,r,function(){return this}),a.AsyncIterator=E,a.async=function(e,t,r,n,i){void 0===i&&(i=Promise);var o=new E(s(e,t,r,n),i);return a.isGeneratorFunction(t)?o:o.next().then(function(e){return e.done?e.value:o.next()})},w(_),o(_,i,"Generator"),o(_,n,function(){return this}),o(_,"toString",function(){return"[object Generator]"}),a.keys=function(e){var t,r=Object(e),n=[];for(t in r)n.push(t);return n.reverse(),function e(){for(;n.length;){var t=n.pop();if(t in r)return e.value=t,e.done=!1,e}return e.done=!0,e}},a.values=j,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=u,this.done=!1,this.delegate=null,this.method="next",this.arg=u,this.tryEntries.forEach(I),!e)for(var t in this)"t"===t.charAt(0)&&l.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=u)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(r){if(this.done)throw r;var n=this;function e(e,t){return o.type="throw",o.arg=r,n.next=e,t&&(n.method="next",n.arg=u),!!t}for(var t=this.tryEntries.length-1;0<=t;--t){var i=this.tryEntries[t],o=i.completion;if("root"===i.tryLoc)return e("end");if(i.tryLoc<=this.prev){var a=l.call(i,"catchLoc"),s=l.call(i,"finallyLoc");if(a&&s){if(this.prev<i.catchLoc)return e(i.catchLoc,!0);if(this.prev<i.finallyLoc)return e(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return e(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return e(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;0<=r;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&l.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}var o=(i=i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc?null:i)?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var r,n,i=this.tryEntries[t];if(i.tryLoc===e)return"throw"===(r=i.completion).type&&(n=r.arg,I(i)),n}throw Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:j(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=u),y}},a}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=x(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=x(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==x(e)?e:e+""}(n.key),n)}}function i(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t,r){t=f(t);var n=e,t=l()?Reflect.construct(t,r||[],f(e).constructor):t.apply(e,r);if(t&&("object"==x(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}function u(e){var r="function"==typeof Map?new Map:void 0;return(u=function(e){if(null===e||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(e){return"function"==typeof t}}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==r){if(r.has(e))return r.get(e);r.set(e,t)}function t(){return function(e,t,r){var n;return l()?Reflect.construct.apply(null,arguments):((n=[null]).push.apply(n,t),t=new(e.bind.apply(e,n)),r&&c(t,r.prototype),t)}(e,arguments,f(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),c(t,e)})(e)}function l(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(l=function(){return!!e})()}function c(e,t){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t,r,n,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return r(e)}s.done?t(u):Promise.resolve(u).then(n,i)}function p(e){for(var t=[],r=e.length,n=0;n<r;n++)t.push(e[n]);return t}function d(){return s=O().mark(function e(t){return O().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e){return setTimeout(e,t)}));case 1:case"end":return e.stop()}},e)}),(d=function(){var e=this,a=arguments;return new Promise(function(t,r){var n=s.apply(e,a);function i(e){h(n,t,r,i,o,"next",e)}function o(e){h(n,t,r,i,o,"throw",e)}i(void 0)})}).apply(this,arguments);var s}Object.defineProperty(r,"__esModule",{value:!0}),r.AggregateError=r.CustomAggregateError=r.AbortError=r.zip=r.wait=r.parseContentRange=r.toArrayRecursively=r.toArray=r.times=r.range=r.invert=r.forEach=r.endsWith=r.chunk=r.assign=void 0,r.assign=function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},r.chunk=function(e,t){for(var r=[],n=e.length,i=0;i<n;i+=t){for(var o=[],a=i;a<i+t;a++)o.push(e[a]);r.push(o)}return r},r.endsWith=function(e,t){return!(e.length<t.length)&&e.substr(e.length-t.length)===t},r.forEach=function(e,t){for(var r=e.length,n=0;n<r;n++)t(e[n],n)},r.invert=function(e){var t,r={};for(t in e)e.hasOwnProperty(t)&&(r[e[t]]=t);return r},r.range=function(e){for(var t=[],r=0;r<e;r++)t.push(r);return t},r.times=function(e,t){for(var r=[],n=0;n<e;n++)r.push(t(n));return r},r.toArray=p,r.toArrayRecursively=function e(t){return t.length?p(t).map(e):t},r.parseContentRange=function(e){if(!e)return null;if("string"!=typeof e)throw new Error("invalid argument");function t(e){return Number.parseInt(e,10)}var r=e.match(/^(\w*) /),n=r&&r[1];return(r=e.match(/(\d+)-(\d+)\/(\d+|\*)/))?{unit:n,first:t(r[1]),last:t(r[2]),length:"*"===r[3]?null:t(r[3])}:(r=e.match(/(\d+|\*)/))?{unit:n,first:null,last:null,length:"*"===r[1]?null:t(r[1])}:null},r.wait=function(e){return d.apply(this,arguments)},r.zip=function(e,t){var e=Array.isArray(e)?e:Array.from(e),r=Array.isArray(t)?t:Array.from(t);return e.map(function(e,t){return[e,r[t]]})};s(y,u(Error));var g=i(y);function y(e){return o(this,y),e=a(this,y,[e]),Error.captureStackTrace&&Error.captureStackTrace(e,y),e.name="AbortError",e}r.AbortError=g;s(A,u(Error));g=i(A);function A(e,t){var r;return o(this,A),(r=a(this,A,[t])).errors=e,r.message=t,r.name="AggregateError",r}r.CustomAggregateError=g,r.AggregateError=g},{}],53:[function(n,e,i){!function(r){!function(){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.create=void 0;var e,t=(e=n("web-worker"))&&e.__esModule?e:{default:e};i.create=function(){var e='function A(A,e,t,i,r,I,g){try{var n=A[I](g),a=n.value}catch(A){return void t(A)}n.done?e(a):Promise.resolve(a).then(i,r)}function e(e){return function(){var t=this,i=arguments;return new Promise((function(r,I){var g=e.apply(t,i);function n(e){A(g,r,I,n,a,"next",e)}function a(e){A(g,r,I,n,a,"throw",e)}n(void 0)}))}}function t(A){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(A){return typeof A}:function(A){return A&&"function"==typeof Symbol&&A.constructor===Symbol&&A!==Symbol.prototype?"symbol":typeof A},t(A)}var i={exports:{}};!function(A){var e=function(A){var e,i=Object.prototype,r=i.hasOwnProperty,I="function"==typeof Symbol?Symbol:{},g=I.iterator||"@@iterator",n=I.asyncIterator||"@@asyncIterator",a=I.toStringTag||"@@toStringTag";function o(A,e,t){return Object.defineProperty(A,e,{value:t,enumerable:!0,configurable:!0,writable:!0}),A[e]}try{o({},"")}catch(A){o=function(A,e,t){return A[e]=t}}function B(A,e,t,i){var r=e&&e.prototype instanceof h?e:h,I=Object.create(r.prototype),g=new S(i||[]);return I._invoke=function(A,e,t){var i=Q;return function(r,I){if(i===s)throw new Error("Generator is already running");if(i===f){if("throw"===r)throw I;return R()}for(t.method=r,t.arg=I;;){var g=t.delegate;if(g){var n=m(g,t);if(n){if(n===c)continue;return n}}if("next"===t.method)t.sent=t._sent=t.arg;else if("throw"===t.method){if(i===Q)throw i=f,t.arg;t.dispatchException(t.arg)}else"return"===t.method&&t.abrupt("return",t.arg);i=s;var a=C(A,e,t);if("normal"===a.type){if(i=t.done?f:E,a.arg===c)continue;return{value:a.arg,done:t.done}}"throw"===a.type&&(i=f,t.method="throw",t.arg=a.arg)}}}(A,t,g),I}function C(A,e,t){try{return{type:"normal",arg:A.call(e,t)}}catch(A){return{type:"throw",arg:A}}}A.wrap=B;var Q="suspendedStart",E="suspendedYield",s="executing",f="completed",c={};function h(){}function l(){}function u(){}var w={};o(w,g,(function(){return this}));var d=Object.getPrototypeOf,D=d&&d(d(v([])));D&&D!==i&&r.call(D,g)&&(w=D);var y=u.prototype=h.prototype=Object.create(w);function k(A){["next","throw","return"].forEach((function(e){o(A,e,(function(A){return this._invoke(e,A)}))}))}function p(A,e){function i(I,g,n,a){var o=C(A[I],A,g);if("throw"!==o.type){var B=o.arg,Q=B.value;return Q&&"object"===t(Q)&&r.call(Q,"__await")?e.resolve(Q.__await).then((function(A){i("next",A,n,a)}),(function(A){i("throw",A,n,a)})):e.resolve(Q).then((function(A){B.value=A,n(B)}),(function(A){return i("throw",A,n,a)}))}a(o.arg)}var I;this._invoke=function(A,t){function r(){return new e((function(e,r){i(A,t,e,r)}))}return I=I?I.then(r,r):r()}}function m(A,t){var i=A.iterator[t.method];if(i===e){if(t.delegate=null,"throw"===t.method){if(A.iterator.return&&(t.method="return",t.arg=e,m(A,t),"throw"===t.method))return c;t.method="throw",t.arg=new TypeError("The iterator does not provide a \'throw\' method")}return c}var r=C(i,A.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,c;var I=r.arg;return I?I.done?(t[A.resultName]=I.value,t.next=A.nextLoc,"return"!==t.method&&(t.method="next",t.arg=e),t.delegate=null,c):I:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,c)}function G(A){var e={tryLoc:A[0]};1 in A&&(e.catchLoc=A[1]),2 in A&&(e.finallyLoc=A[2],e.afterLoc=A[3]),this.tryEntries.push(e)}function F(A){var e=A.completion||{};e.type="normal",delete e.arg,A.completion=e}function S(A){this.tryEntries=[{tryLoc:"root"}],A.forEach(G,this),this.reset(!0)}function v(A){if(A){var t=A[g];if(t)return t.call(A);if("function"==typeof A.next)return A;if(!isNaN(A.length)){var i=-1,I=function t(){for(;++i<A.length;)if(r.call(A,i))return t.value=A[i],t.done=!1,t;return t.value=e,t.done=!0,t};return I.next=I}}return{next:R}}function R(){return{value:e,done:!0}}return l.prototype=u,o(y,"constructor",u),o(u,"constructor",l),l.displayName=o(u,a,"GeneratorFunction"),A.isGeneratorFunction=function(A){var e="function"==typeof A&&A.constructor;return!!e&&(e===l||"GeneratorFunction"===(e.displayName||e.name))},A.mark=function(A){return Object.setPrototypeOf?Object.setPrototypeOf(A,u):(A.__proto__=u,o(A,a,"GeneratorFunction")),A.prototype=Object.create(y),A},A.awrap=function(A){return{__await:A}},k(p.prototype),o(p.prototype,n,(function(){return this})),A.AsyncIterator=p,A.async=function(e,t,i,r,I){void 0===I&&(I=Promise);var g=new p(B(e,t,i,r),I);return A.isGeneratorFunction(t)?g:g.next().then((function(A){return A.done?A.value:g.next()}))},k(y),o(y,a,"Generator"),o(y,g,(function(){return this})),o(y,"toString",(function(){return"[object Generator]"})),A.keys=function(A){var e=[];for(var t in A)e.push(t);return e.reverse(),function t(){for(;e.length;){var i=e.pop();if(i in A)return t.value=i,t.done=!1,t}return t.done=!0,t}},A.values=v,S.prototype={constructor:S,reset:function(A){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(F),!A)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=e)},stop:function(){this.done=!0;var A=this.tryEntries[0].completion;if("throw"===A.type)throw A.arg;return this.rval},dispatchException:function(A){if(this.done)throw A;var t=this;function i(i,r){return n.type="throw",n.arg=A,t.next=i,r&&(t.method="next",t.arg=e),!!r}for(var I=this.tryEntries.length-1;I>=0;--I){var g=this.tryEntries[I],n=g.completion;if("root"===g.tryLoc)return i("end");if(g.tryLoc<=this.prev){var a=r.call(g,"catchLoc"),o=r.call(g,"finallyLoc");if(a&&o){if(this.prev<g.catchLoc)return i(g.catchLoc,!0);if(this.prev<g.finallyLoc)return i(g.finallyLoc)}else if(a){if(this.prev<g.catchLoc)return i(g.catchLoc,!0)}else{if(!o)throw new Error("try statement without catch or finally");if(this.prev<g.finallyLoc)return i(g.finallyLoc)}}}},abrupt:function(A,e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var I=i;break}}I&&("break"===A||"continue"===A)&&I.tryLoc<=e&&e<=I.finallyLoc&&(I=null);var g=I?I.completion:{};return g.type=A,g.arg=e,I?(this.method="next",this.next=I.finallyLoc,c):this.complete(g)},complete:function(A,e){if("throw"===A.type)throw A.arg;return"break"===A.type||"continue"===A.type?this.next=A.arg:"return"===A.type?(this.rval=this.arg=A.arg,this.method="return",this.next="end"):"normal"===A.type&&e&&(this.next=e),c},finish:function(A){for(var e=this.tryEntries.length-1;e>=0;--e){var t=this.tryEntries[e];if(t.finallyLoc===A)return this.complete(t.completion,t.afterLoc),F(t),c}},catch:function(A){for(var e=this.tryEntries.length-1;e>=0;--e){var t=this.tryEntries[e];if(t.tryLoc===A){var i=t.completion;if("throw"===i.type){var r=i.arg;F(t)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(A,t,i){return this.delegate={iterator:v(A),resultName:t,nextLoc:i},"next"===this.method&&(this.arg=e),c}},A}(A.exports);try{regeneratorRuntime=e}catch(A){"object"===("undefined"==typeof globalThis?"undefined":t(globalThis))?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}}(i);var r=i.exports,I=new Map;function g(A,e){Array.isArray(A)||(A=[A]),A.forEach((function(A){return I.set(A,e)}))}function n(A){return a.apply(this,arguments)}function a(){return(a=e(r.mark((function A(e){var t,i;return r.wrap((function(A){for(;;)switch(A.prev=A.next){case 0:if(t=I.get(e.Compression)){A.next=3;break}throw new Error("Unknown compression method identifier: ".concat(e.Compression));case 3:return A.next=5,t();case 5:return i=A.sent,A.abrupt("return",new i(e));case 7:case"end":return A.stop()}}),A)})))).apply(this,arguments)}g([void 0,1],(function(){return Promise.resolve().then((function(){return y})).then((function(A){return A.default}))})),g(5,(function(){return Promise.resolve().then((function(){return F})).then((function(A){return A.default}))})),g(6,(function(){throw new Error("old style JPEG compression is not supported.")})),g(7,(function(){return Promise.resolve().then((function(){return N})).then((function(A){return A.default}))})),g([8,32946],(function(){return Promise.resolve().then((function(){return OA})).then((function(A){return A.default}))})),g(32773,(function(){return Promise.resolve().then((function(){return _A})).then((function(A){return A.default}))})),g(34887,(function(){return Promise.resolve().then((function(){return le})).then(function(){var A=e(r.mark((function A(e){return r.wrap((function(A){for(;;)switch(A.prev=A.next){case 0:return A.next=2,e.zstd.init();case 2:return A.abrupt("return",e);case 3:case"end":return A.stop()}}),A)})));return function(e){return A.apply(this,arguments)}}()).then((function(A){return A.default}))})),g(50001,(function(){return Promise.resolve().then((function(){return de})).then((function(A){return A.default}))}));var o=globalThis;function B(A,e){if(!(A instanceof e))throw new TypeError("Cannot call a class as a function")}function C(A,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(A,i.key,i)}}function Q(A,e,t){return e&&C(A.prototype,e),t&&C(A,t),A}function E(A,e){return E=Object.setPrototypeOf||function(A,e){return A.__proto__=e,A},E(A,e)}function s(A,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");A.prototype=Object.create(e&&e.prototype,{constructor:{value:A,writable:!0,configurable:!0}}),e&&E(A,e)}function f(A,e){if(e&&("object"===t(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(A){if(void 0===A)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return A}(A)}function c(A){return c=Object.setPrototypeOf?Object.getPrototypeOf:function(A){return A.__proto__||Object.getPrototypeOf(A)},c(A)}function h(A,e){var t=A.length-e,i=0;do{for(var r=e;r>0;r--)A[i+e]+=A[i],i++;t-=e}while(t>0)}function l(A,e,t){for(var i=0,r=A.length,I=r/t;r>e;){for(var g=e;g>0;--g)A[i+e]+=A[i],++i;r-=e}for(var n=A.slice(),a=0;a<I;++a)for(var o=0;o<t;++o)A[t*a+o]=n[(t-o-1)*I+a]}function u(A,e,t,i,r,I){if(!e||1===e)return A;for(var g=0;g<r.length;++g){if(r[g]%8!=0)throw new Error("When decoding with predictor, only multiple of 8 bits are supported.");if(r[g]!==r[0])throw new Error("When decoding with predictor, all samples must have the same size.")}for(var n=r[0]/8,a=2===I?1:r.length,o=0;o<i&&!(o*a*t*n>=A.byteLength);++o){var B=void 0;if(2===e){switch(r[0]){case 8:B=new Uint8Array(A,o*a*t*n,a*t*n);break;case 16:B=new Uint16Array(A,o*a*t*n,a*t*n/2);break;case 32:B=new Uint32Array(A,o*a*t*n,a*t*n/4);break;default:throw new Error("Predictor 2 not allowed with ".concat(r[0]," bits per sample."))}h(B,a)}else 3===e&&l(B=new Uint8Array(A,o*a*t*n,a*t*n),a,n)}return A}o.addEventListener("message",function(){var A=e(r.mark((function A(e){var t,i,I,g,a,B;return r.wrap((function(A){for(;;)switch(A.prev=A.next){case 0:return t=e.data,i=t.id,I=t.fileDirectory,g=t.buffer,A.next=3,n(I);case 3:return a=A.sent,A.next=6,a.decode(I,g);case 6:B=A.sent,o.postMessage({decoded:B,id:i},[B]);case 8:case"end":return A.stop()}}),A)})));return function(e){return A.apply(this,arguments)}}());var w=function(){function A(){B(this,A)}var t;return Q(A,[{key:"decode",value:(t=e(r.mark((function A(e,t){var i,I,g,n,a;return r.wrap((function(A){for(;;)switch(A.prev=A.next){case 0:return A.next=2,this.decodeBlock(t);case 2:if(i=A.sent,1===(I=e.Predictor||1)){A.next=9;break}return g=!e.StripOffsets,n=g?e.TileWidth:e.ImageWidth,a=g?e.TileLength:e.RowsPerStrip||e.ImageLength,A.abrupt("return",u(i,I,n,a,e.BitsPerSample,e.PlanarConfiguration));case 9:return A.abrupt("return",i);case 10:case"end":return A.stop()}}),A,this)}))),function(A,e){return t.apply(this,arguments)})}]),A}();function d(A){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(A){return!1}}();return function(){var t,i=c(A);if(e){var r=c(this).constructor;t=Reflect.construct(i,arguments,r)}else t=i.apply(this,arguments);return f(this,t)}}var D=function(A){s(t,w);var e=d(t);function t(){return B(this,t),e.apply(this,arguments)}return Q(t,[{key:"decodeBlock",value:function(A){return A}}]),t}(),y=Object.freeze({__proto__:null,default:D});function k(A){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(A){return!1}}();return function(){var t,i=c(A);if(e){var r=c(this).constructor;t=Reflect.construct(i,arguments,r)}else t=i.apply(this,arguments);return f(this,t)}}function p(A,e){for(var t=e.length-1;t>=0;t--)A.push(e[t]);return A}function m(A){for(var e=new Uint16Array(4093),t=new Uint8Array(4093),i=0;i<=257;i++)e[i]=4096,t[i]=i;var r=258,I=9,g=0;function n(){r=258,I=9}function a(A){var e=function(A,e,t){var i=e%8,r=Math.floor(e/8),I=8-i,g=e+t-8*(r+1),n=8*(r+2)-(e+t),a=8*(r+2)-e;if(n=Math.max(0,n),r>=A.length)return console.warn("ran off the end of the buffer before finding EOI_CODE (end on input code)"),257;var o=A[r]&Math.pow(2,8-i)-1,B=o<<=t-I;if(r+1<A.length){var C=A[r+1]>>>n;B+=C<<=Math.max(0,t-a)}if(g>8&&r+2<A.length){var Q=8*(r+3)-(e+t);B+=A[r+2]>>>Q}return B}(A,g,I);return g+=I,e}function o(A,i){return t[r]=i,e[r]=A,++r-1}function B(A){for(var i=[],r=A;4096!==r;r=e[r])i.push(t[r]);return i}var C=[];n();for(var Q,E=new Uint8Array(A),s=a(E);257!==s;){if(256===s){for(n(),s=a(E);256===s;)s=a(E);if(257===s)break;if(s>256)throw new Error("corrupted code at scanline ".concat(s));p(C,B(s)),Q=s}else if(s<r){var f=B(s);p(C,f),o(Q,f[f.length-1]),Q=s}else{var c=B(Q);if(!c)throw new Error("Bogus entry. Not in dictionary, ".concat(Q," / ").concat(r,", position: ").concat(g));p(C,c),C.push(c[c.length-1]),o(Q,c[c.length-1]),Q=s}r+1>=Math.pow(2,I)&&(12===I?Q=void 0:I++),s=a(E)}return new Uint8Array(C)}var G=function(A){s(t,w);var e=k(t);function t(){return B(this,t),e.apply(this,arguments)}return Q(t,[{key:"decodeBlock",value:function(A){return m(A).buffer}}]),t}(),F=Object.freeze({__proto__:null,default:G});function S(A){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(A){return!1}}();return function(){var t,i=c(A);if(e){var r=c(this).constructor;t=Reflect.construct(i,arguments,r)}else t=i.apply(this,arguments);return f(this,t)}}var v=new Int32Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]);function R(A,e){for(var t=0,i=[],r=16;r>0&&!A[r-1];)--r;i.push({children:[],index:0});for(var I,g=i[0],n=0;n<r;n++){for(var a=0;a<A[n];a++){for((g=i.pop()).children[g.index]=e[t];g.index>0;)g=i.pop();for(g.index++,i.push(g);i.length<=n;)i.push(I={children:[],index:0}),g.children[g.index]=I.children,g=I;t++}n+1<r&&(i.push(I={children:[],index:0}),g.children[g.index]=I.children,g=I)}return i[0].children}function U(A,e,i,r,I,g,n,a,o){var B=i.mcusPerLine,C=i.progressive,Q=e,E=e,s=0,f=0;function c(){if(f>0)return f--,s>>f&1;if(255===(s=A[E++])){var e=A[E++];if(e)throw new Error("unexpected marker: ".concat((s<<8|e).toString(16)))}return f=7,s>>>7}function h(A){for(var e,i=A;null!==(e=c());){if("number"==typeof(i=i[e]))return i;if("object"!==t(i))throw new Error("invalid huffman sequence")}return null}function l(A){for(var e=A,t=0;e>0;){var i=c();if(null===i)return;t=t<<1|i,--e}return t}function u(A){var e=l(A);return e>=1<<A-1?e:e+(-1<<A)+1}var w=0;var d,D=0;function y(A,e,t,i,r){var I=t%B,g=(t/B|0)*A.v+i,n=I*A.h+r;e(A,A.blocks[g][n])}function k(A,e,t){var i=t/A.blocksPerLine|0,r=t%A.blocksPerLine;e(A,A.blocks[i][r])}var p,m,G,F,S,R,U=r.length;R=C?0===g?0===a?function(A,e){var t=h(A.huffmanTableDC),i=0===t?0:u(t)<<o;A.pred+=i,e[0]=A.pred}:function(A,e){e[0]|=c()<<o}:0===a?function(A,e){if(w>0)w--;else for(var t=g,i=n;t<=i;){var r=h(A.huffmanTableAC),I=15&r,a=r>>4;if(0===I){if(a<15){w=l(a)+(1<<a)-1;break}t+=16}else e[v[t+=a]]=u(I)*(1<<o),t++}}:function(A,e){for(var t=g,i=n,r=0;t<=i;){var I=v[t],a=e[I]<0?-1:1;switch(D){case 0:var B=h(A.huffmanTableAC),C=15&B;if(r=B>>4,0===C)r<15?(w=l(r)+(1<<r),D=4):(r=16,D=1);else{if(1!==C)throw new Error("invalid ACn encoding");d=u(C),D=r?2:3}continue;case 1:case 2:e[I]?e[I]+=(c()<<o)*a:0==--r&&(D=2===D?3:0);break;case 3:e[I]?e[I]+=(c()<<o)*a:(e[I]=d<<o,D=0);break;case 4:e[I]&&(e[I]+=(c()<<o)*a)}t++}4===D&&0==--w&&(D=0)}:function(A,e){var t=h(A.huffmanTableDC),i=0===t?0:u(t);A.pred+=i,e[0]=A.pred;for(var r=1;r<64;){var I=h(A.huffmanTableAC),g=15&I,n=I>>4;if(0===g){if(n<15)break;r+=16}else e[v[r+=n]]=u(g),r++}};var L,b,M=0;b=1===U?r[0].blocksPerLine*r[0].blocksPerColumn:B*i.mcusPerColumn;for(var N=I||b;M<b;){for(m=0;m<U;m++)r[m].pred=0;if(w=0,1===U)for(p=r[0],S=0;S<N;S++)k(p,R,M),M++;else for(S=0;S<N;S++){for(m=0;m<U;m++){var x=p=r[m],J=x.h,q=x.v;for(G=0;G<q;G++)for(F=0;F<J;F++)y(p,R,M,G,F)}if(++M===b)break}if(f=0,(L=A[E]<<8|A[E+1])<65280)throw new Error("marker was not found");if(!(L>=65488&&L<=65495))break;E+=2}return E-Q}function L(A,e){var t=[],i=e.blocksPerLine,r=e.blocksPerColumn,I=i<<3,g=new Int32Array(64),n=new Uint8Array(64);function a(A,t,i){var r,I,g,n,a,o,B,C,Q,E,s=e.quantizationTable,f=i;for(E=0;E<64;E++)f[E]=A[E]*s[E];for(E=0;E<8;++E){var c=8*E;0!==f[1+c]||0!==f[2+c]||0!==f[3+c]||0!==f[4+c]||0!==f[5+c]||0!==f[6+c]||0!==f[7+c]?(r=5793*f[0+c]+128>>8,I=5793*f[4+c]+128>>8,g=f[2+c],n=f[6+c],a=2896*(f[1+c]-f[7+c])+128>>8,C=2896*(f[1+c]+f[7+c])+128>>8,o=f[3+c]<<4,Q=r-I+1>>1,r=r+I+1>>1,I=Q,Q=3784*g+1567*n+128>>8,g=1567*g-3784*n+128>>8,n=Q,Q=a-(B=f[5+c]<<4)+1>>1,a=a+B+1>>1,B=Q,Q=C+o+1>>1,o=C-o+1>>1,C=Q,Q=r-n+1>>1,r=r+n+1>>1,n=Q,Q=I-g+1>>1,I=I+g+1>>1,g=Q,Q=2276*a+3406*C+2048>>12,a=3406*a-2276*C+2048>>12,C=Q,Q=799*o+4017*B+2048>>12,o=4017*o-799*B+2048>>12,B=Q,f[0+c]=r+C,f[7+c]=r-C,f[1+c]=I+B,f[6+c]=I-B,f[2+c]=g+o,f[5+c]=g-o,f[3+c]=n+a,f[4+c]=n-a):(Q=5793*f[0+c]+512>>10,f[0+c]=Q,f[1+c]=Q,f[2+c]=Q,f[3+c]=Q,f[4+c]=Q,f[5+c]=Q,f[6+c]=Q,f[7+c]=Q)}for(E=0;E<8;++E){var h=E;0!==f[8+h]||0!==f[16+h]||0!==f[24+h]||0!==f[32+h]||0!==f[40+h]||0!==f[48+h]||0!==f[56+h]?(r=5793*f[0+h]+2048>>12,I=5793*f[32+h]+2048>>12,g=f[16+h],n=f[48+h],a=2896*(f[8+h]-f[56+h])+2048>>12,C=2896*(f[8+h]+f[56+h])+2048>>12,o=f[24+h],Q=r-I+1>>1,r=r+I+1>>1,I=Q,Q=3784*g+1567*n+2048>>12,g=1567*g-3784*n+2048>>12,n=Q,Q=a-(B=f[40+h])+1>>1,a=a+B+1>>1,B=Q,Q=C+o+1>>1,o=C-o+1>>1,C=Q,Q=r-n+1>>1,r=r+n+1>>1,n=Q,Q=I-g+1>>1,I=I+g+1>>1,g=Q,Q=2276*a+3406*C+2048>>12,a=3406*a-2276*C+2048>>12,C=Q,Q=799*o+4017*B+2048>>12,o=4017*o-799*B+2048>>12,B=Q,f[0+h]=r+C,f[56+h]=r-C,f[8+h]=I+B,f[48+h]=I-B,f[16+h]=g+o,f[40+h]=g-o,f[24+h]=n+a,f[32+h]=n-a):(Q=5793*i[E+0]+8192>>14,f[0+h]=Q,f[8+h]=Q,f[16+h]=Q,f[24+h]=Q,f[32+h]=Q,f[40+h]=Q,f[48+h]=Q,f[56+h]=Q)}for(E=0;E<64;++E){var l=128+(f[E]+8>>4);t[E]=l<0?0:l>255?255:l}}for(var o=0;o<r;o++){for(var B=o<<3,C=0;C<8;C++)t.push(new Uint8Array(I));for(var Q=0;Q<i;Q++){a(e.blocks[o][Q],n,g);for(var E=0,s=Q<<3,f=0;f<8;f++)for(var c=t[B+f],h=0;h<8;h++)c[s+h]=n[E++]}}return t}var b=function(){function A(){B(this,A),this.jfif=null,this.adobe=null,this.quantizationTables=[],this.huffmanTablesAC=[],this.huffmanTablesDC=[],this.resetFrames()}return Q(A,[{key:"resetFrames",value:function(){this.frames=[]}},{key:"parse",value:function(A){var e=0;function t(){var t=A[e]<<8|A[e+1];return e+=2,t}function i(A){var e,t,i=0,r=0;for(t in A.components)A.components.hasOwnProperty(t)&&(i<(e=A.components[t]).h&&(i=e.h),r<e.v&&(r=e.v));var I=Math.ceil(A.samplesPerLine/8/i),g=Math.ceil(A.scanLines/8/r);for(t in A.components)if(A.components.hasOwnProperty(t)){e=A.components[t];for(var n=Math.ceil(Math.ceil(A.samplesPerLine/8)*e.h/i),a=Math.ceil(Math.ceil(A.scanLines/8)*e.v/r),o=I*e.h,B=g*e.v,C=[],Q=0;Q<B;Q++){for(var E=[],s=0;s<o;s++)E.push(new Int32Array(64));C.push(E)}e.blocksPerLine=n,e.blocksPerColumn=a,e.blocks=C}A.maxH=i,A.maxV=r,A.mcusPerLine=I,A.mcusPerColumn=g}var r,I,g=t();if(65496!==g)throw new Error("SOI not found");for(g=t();65497!==g;){switch(g){case 65280:break;case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var n=(r=void 0,I=void 0,r=t(),I=A.subarray(e,e+r-2),e+=I.length,I);65504===g&&74===n[0]&&70===n[1]&&73===n[2]&&70===n[3]&&0===n[4]&&(this.jfif={version:{major:n[5],minor:n[6]},densityUnits:n[7],xDensity:n[8]<<8|n[9],yDensity:n[10]<<8|n[11],thumbWidth:n[12],thumbHeight:n[13],thumbData:n.subarray(14,14+3*n[12]*n[13])}),65518===g&&65===n[0]&&100===n[1]&&111===n[2]&&98===n[3]&&101===n[4]&&0===n[5]&&(this.adobe={version:n[6],flags0:n[7]<<8|n[8],flags1:n[9]<<8|n[10],transformCode:n[11]});break;case 65499:for(var a=t()+e-2;e<a;){var o=A[e++],B=new Int32Array(64);if(o>>4==0)for(var C=0;C<64;C++){B[v[C]]=A[e++]}else{if(o>>4!=1)throw new Error("DQT: invalid table spec");for(var Q=0;Q<64;Q++){B[v[Q]]=t()}}this.quantizationTables[15&o]=B}break;case 65472:case 65473:case 65474:t();for(var E={extended:65473===g,progressive:65474===g,precision:A[e++],scanLines:t(),samplesPerLine:t(),components:{},componentsOrder:[]},s=A[e++],f=void 0,c=0;c<s;c++){f=A[e];var h=A[e+1]>>4,l=15&A[e+1],u=A[e+2];E.componentsOrder.push(f),E.components[f]={h:h,v:l,quantizationIdx:u},e+=3}i(E),this.frames.push(E);break;case 65476:for(var w=t(),d=2;d<w;){for(var D=A[e++],y=new Uint8Array(16),k=0,p=0;p<16;p++,e++)y[p]=A[e],k+=y[p];for(var m=new Uint8Array(k),G=0;G<k;G++,e++)m[G]=A[e];d+=17+k,D>>4==0?this.huffmanTablesDC[15&D]=R(y,m):this.huffmanTablesAC[15&D]=R(y,m)}break;case 65501:t(),this.resetInterval=t();break;case 65498:t();for(var F=A[e++],S=[],L=this.frames[0],b=0;b<F;b++){var M=L.components[A[e++]],N=A[e++];M.huffmanTableDC=this.huffmanTablesDC[N>>4],M.huffmanTableAC=this.huffmanTablesAC[15&N],S.push(M)}var x=A[e++],J=A[e++],q=A[e++],Y=U(A,e,L,S,this.resetInterval,x,J,q>>4,15&q);e+=Y;break;case 65535:255!==A[e]&&e--;break;default:if(255===A[e-3]&&A[e-2]>=192&&A[e-2]<=254){e-=3;break}throw new Error("unknown JPEG marker ".concat(g.toString(16)))}g=t()}}},{key:"getResult",value:function(){var A=this.frames;if(0===this.frames.length)throw new Error("no frames were decoded");this.frames.length>1&&console.warn("more than one frame is not supported");for(var e=0;e<this.frames.length;e++)for(var t=this.frames[e].components,i=0,r=Object.keys(t);i<r.length;i++){var I=r[i];t[I].quantizationTable=this.quantizationTables[t[I].quantizationIdx],delete t[I].quantizationIdx}for(var g=A[0],n=g.components,a=g.componentsOrder,o=[],B=g.samplesPerLine,C=g.scanLines,Q=0;Q<a.length;Q++){var E=n[a[Q]];o.push({lines:L(0,E),scaleX:E.h/g.maxH,scaleY:E.v/g.maxV})}for(var s=new Uint8Array(B*C*o.length),f=0,c=0;c<C;++c)for(var h=0;h<B;++h)for(var l=0;l<o.length;++l){var u=o[l];s[f]=u.lines[0|c*u.scaleY][0|h*u.scaleX],++f}return s}}]),A}(),M=function(A){s(t,w);var e=S(t);function t(A){var i;return B(this,t),(i=e.call(this)).reader=new b,A.JPEGTables&&i.reader.parse(A.JPEGTables),i}return Q(t,[{key:"decodeBlock",value:function(A){return this.reader.resetFrames(),this.reader.parse(new Uint8Array(A)),this.reader.getResult().buffer}}]),t}(),N=Object.freeze({__proto__:null,default:M});function x(A){for(var e=A.length;--e>=0;)A[e]=0}x(new Array(576)),x(new Array(60)),x(new Array(512)),x(new Array(256)),x(new Array(29)),x(new Array(30));var J=function(A,e,t,i){for(var r=65535&A|0,I=A>>>16&65535|0,g=0;0!==t;){t-=g=t>2e3?2e3:t;do{I=I+(r=r+e[i++]|0)|0}while(--g);r%=65521,I%=65521}return r|I<<16|0},q=new Uint32Array(function(){for(var A,e=[],t=0;t<256;t++){A=t;for(var i=0;i<8;i++)A=1&A?3988292384^A>>>1:A>>>1;e[t]=A}return e}()),Y=function(A,e,t,i){var r=q,I=i+t;A^=-1;for(var g=i;g<I;g++)A=A>>>8^r[255&(A^e[g])];return-1^A},K={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},H={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},O=function(A,e){return Object.prototype.hasOwnProperty.call(A,e)},P=function(A){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var i=e.shift();if(i){if("object"!==t(i))throw new TypeError(i+"must be non-object");for(var r in i)O(i,r)&&(A[r]=i[r])}}return A},T=function(A){for(var e=0,t=0,i=A.length;t<i;t++)e+=A[t].length;for(var r=new Uint8Array(e),I=0,g=0,n=A.length;I<n;I++){var a=A[I];r.set(a,g),g+=a.length}return r},V=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(A){V=!1}for(var _=new Uint8Array(256),X=0;X<256;X++)_[X]=X>=252?6:X>=248?5:X>=240?4:X>=224?3:X>=192?2:1;_[254]=_[254]=1;var Z=function(A){if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(A);var e,t,i,r,I,g=A.length,n=0;for(r=0;r<g;r++)55296==(64512&(t=A.charCodeAt(r)))&&r+1<g&&56320==(64512&(i=A.charCodeAt(r+1)))&&(t=65536+(t-55296<<10)+(i-56320),r++),n+=t<128?1:t<2048?2:t<65536?3:4;for(e=new Uint8Array(n),I=0,r=0;I<n;r++)55296==(64512&(t=A.charCodeAt(r)))&&r+1<g&&56320==(64512&(i=A.charCodeAt(r+1)))&&(t=65536+(t-55296<<10)+(i-56320),r++),t<128?e[I++]=t:t<2048?(e[I++]=192|t>>>6,e[I++]=128|63&t):t<65536?(e[I++]=224|t>>>12,e[I++]=128|t>>>6&63,e[I++]=128|63&t):(e[I++]=240|t>>>18,e[I++]=128|t>>>12&63,e[I++]=128|t>>>6&63,e[I++]=128|63&t);return e},j=function(A,e){var t,i,r=e||A.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(A.subarray(0,e));var I=new Array(2*r);for(i=0,t=0;t<r;){var g=A[t++];if(g<128)I[i++]=g;else{var n=_[g];if(n>4)I[i++]=65533,t+=n-1;else{for(g&=2===n?31:3===n?15:7;n>1&&t<r;)g=g<<6|63&A[t++],n--;n>1?I[i++]=65533:g<65536?I[i++]=g:(g-=65536,I[i++]=55296|g>>10&1023,I[i++]=56320|1023&g)}}}return function(A,e){if(e<65534&&A.subarray&&V)return String.fromCharCode.apply(null,A.length===e?A:A.subarray(0,e));for(var t="",i=0;i<e;i++)t+=String.fromCharCode(A[i]);return t}(I,i)},W=function(A,e){(e=e||A.length)>A.length&&(e=A.length);for(var t=e-1;t>=0&&128==(192&A[t]);)t--;return t<0||0===t?e:t+_[A[t]]>e?t:e};var z=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0},$=function(A,e){var t,i,r,I,g,n,a,o,B,C,Q,E,s,f,c,h,l,u,w,d,D,y,k,p,m=A.state;t=A.next_in,k=A.input,i=t+(A.avail_in-5),r=A.next_out,p=A.output,I=r-(e-A.avail_out),g=r+(A.avail_out-257),n=m.dmax,a=m.wsize,o=m.whave,B=m.wnext,C=m.window,Q=m.hold,E=m.bits,s=m.lencode,f=m.distcode,c=(1<<m.lenbits)-1,h=(1<<m.distbits)-1;A:do{E<15&&(Q+=k[t++]<<E,E+=8,Q+=k[t++]<<E,E+=8),l=s[Q&c];e:for(;;){if(Q>>>=u=l>>>24,E-=u,0===(u=l>>>16&255))p[r++]=65535&l;else{if(!(16&u)){if(0==(64&u)){l=s[(65535&l)+(Q&(1<<u)-1)];continue e}if(32&u){m.mode=12;break A}A.msg="invalid literal/length code",m.mode=30;break A}w=65535&l,(u&=15)&&(E<u&&(Q+=k[t++]<<E,E+=8),w+=Q&(1<<u)-1,Q>>>=u,E-=u),E<15&&(Q+=k[t++]<<E,E+=8,Q+=k[t++]<<E,E+=8),l=f[Q&h];t:for(;;){if(Q>>>=u=l>>>24,E-=u,!(16&(u=l>>>16&255))){if(0==(64&u)){l=f[(65535&l)+(Q&(1<<u)-1)];continue t}A.msg="invalid distance code",m.mode=30;break A}if(d=65535&l,E<(u&=15)&&(Q+=k[t++]<<E,(E+=8)<u&&(Q+=k[t++]<<E,E+=8)),(d+=Q&(1<<u)-1)>n){A.msg="invalid distance too far back",m.mode=30;break A}if(Q>>>=u,E-=u,d>(u=r-I)){if((u=d-u)>o&&m.sane){A.msg="invalid distance too far back",m.mode=30;break A}if(D=0,y=C,0===B){if(D+=a-u,u<w){w-=u;do{p[r++]=C[D++]}while(--u);D=r-d,y=p}}else if(B<u){if(D+=a+B-u,(u-=B)<w){w-=u;do{p[r++]=C[D++]}while(--u);if(D=0,B<w){w-=u=B;do{p[r++]=C[D++]}while(--u);D=r-d,y=p}}}else if(D+=B-u,u<w){w-=u;do{p[r++]=C[D++]}while(--u);D=r-d,y=p}for(;w>2;)p[r++]=y[D++],p[r++]=y[D++],p[r++]=y[D++],w-=3;w&&(p[r++]=y[D++],w>1&&(p[r++]=y[D++]))}else{D=r-d;do{p[r++]=p[D++],p[r++]=p[D++],p[r++]=p[D++],w-=3}while(w>2);w&&(p[r++]=p[D++],w>1&&(p[r++]=p[D++]))}break}}break}}while(t<i&&r<g);t-=w=E>>3,Q&=(1<<(E-=w<<3))-1,A.next_in=t,A.next_out=r,A.avail_in=t<i?i-t+5:5-(t-i),A.avail_out=r<g?g-r+257:257-(r-g),m.hold=Q,m.bits=E},AA=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),eA=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),tA=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),iA=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),rA=function(A,e,t,i,r,I,g,n){var a,o,B,C,Q,E,s,f,c,h=n.bits,l=0,u=0,w=0,d=0,D=0,y=0,k=0,p=0,m=0,G=0,F=null,S=0,v=new Uint16Array(16),R=new Uint16Array(16),U=null,L=0;for(l=0;l<=15;l++)v[l]=0;for(u=0;u<i;u++)v[e[t+u]]++;for(D=h,d=15;d>=1&&0===v[d];d--);if(D>d&&(D=d),0===d)return r[I++]=20971520,r[I++]=20971520,n.bits=1,0;for(w=1;w<d&&0===v[w];w++);for(D<w&&(D=w),p=1,l=1;l<=15;l++)if(p<<=1,(p-=v[l])<0)return-1;if(p>0&&(0===A||1!==d))return-1;for(R[1]=0,l=1;l<15;l++)R[l+1]=R[l]+v[l];for(u=0;u<i;u++)0!==e[t+u]&&(g[R[e[t+u]]++]=u);if(0===A?(F=U=g,E=19):1===A?(F=AA,S-=257,U=eA,L-=257,E=256):(F=tA,U=iA,E=-1),G=0,u=0,l=w,Q=I,y=D,k=0,B=-1,C=(m=1<<D)-1,1===A&&m>852||2===A&&m>592)return 1;for(;;){s=l-k,g[u]<E?(f=0,c=g[u]):g[u]>E?(f=U[L+g[u]],c=F[S+g[u]]):(f=96,c=0),a=1<<l-k,w=o=1<<y;do{r[Q+(G>>k)+(o-=a)]=s<<24|f<<16|c|0}while(0!==o);for(a=1<<l-1;G&a;)a>>=1;if(0!==a?(G&=a-1,G+=a):G=0,u++,0==--v[l]){if(l===d)break;l=e[t+g[u]]}if(l>D&&(G&C)!==B){for(0===k&&(k=D),Q+=w,p=1<<(y=l-k);y+k<d&&!((p-=v[y+k])<=0);)y++,p<<=1;if(m+=1<<y,1===A&&m>852||2===A&&m>592)return 1;r[B=G&C]=D<<24|y<<16|Q-I|0}}return 0!==G&&(r[Q+G]=l-k<<24|64<<16|0),n.bits=D,0},IA=H.Z_FINISH,gA=H.Z_BLOCK,nA=H.Z_TREES,aA=H.Z_OK,oA=H.Z_STREAM_END,BA=H.Z_NEED_DICT,CA=H.Z_STREAM_ERROR,QA=H.Z_DATA_ERROR,EA=H.Z_MEM_ERROR,sA=H.Z_BUF_ERROR,fA=H.Z_DEFLATED,cA=function(A){return(A>>>24&255)+(A>>>8&65280)+((65280&A)<<8)+((255&A)<<24)};function hA(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}var lA,uA,wA=function(A){if(!A||!A.state)return CA;var e=A.state;return A.total_in=A.total_out=e.total=0,A.msg="",e.wrap&&(A.adler=1&e.wrap),e.mode=1,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(852),e.distcode=e.distdyn=new Int32Array(592),e.sane=1,e.back=-1,aA},dA=function(A){if(!A||!A.state)return CA;var e=A.state;return e.wsize=0,e.whave=0,e.wnext=0,wA(A)},DA=function(A,e){var t;if(!A||!A.state)return CA;var i=A.state;return e<0?(t=0,e=-e):(t=1+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?CA:(null!==i.window&&i.wbits!==e&&(i.window=null),i.wrap=t,i.wbits=e,dA(A))},yA=function(A,e){if(!A)return CA;var t=new hA;A.state=t,t.window=null;var i=DA(A,e);return i!==aA&&(A.state=null),i},kA=!0,pA=function(A){if(kA){lA=new Int32Array(512),uA=new Int32Array(32);for(var e=0;e<144;)A.lens[e++]=8;for(;e<256;)A.lens[e++]=9;for(;e<280;)A.lens[e++]=7;for(;e<288;)A.lens[e++]=8;for(rA(1,A.lens,0,288,lA,0,A.work,{bits:9}),e=0;e<32;)A.lens[e++]=5;rA(2,A.lens,0,32,uA,0,A.work,{bits:5}),kA=!1}A.lencode=lA,A.lenbits=9,A.distcode=uA,A.distbits=5},mA=function(A,e,t,i){var r,I=A.state;return null===I.window&&(I.wsize=1<<I.wbits,I.wnext=0,I.whave=0,I.window=new Uint8Array(I.wsize)),i>=I.wsize?(I.window.set(e.subarray(t-I.wsize,t),0),I.wnext=0,I.whave=I.wsize):((r=I.wsize-I.wnext)>i&&(r=i),I.window.set(e.subarray(t-i,t-i+r),I.wnext),(i-=r)?(I.window.set(e.subarray(t-i,t),0),I.wnext=i,I.whave=I.wsize):(I.wnext+=r,I.wnext===I.wsize&&(I.wnext=0),I.whave<I.wsize&&(I.whave+=r))),0},GA={inflateReset:dA,inflateReset2:DA,inflateResetKeep:wA,inflateInit:function(A){return yA(A,15)},inflateInit2:yA,inflate:function(A,e){var t,i,r,I,g,n,a,o,B,C,Q,E,s,f,c,h,l,u,w,d,D,y,k,p,m=0,G=new Uint8Array(4),F=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(!A||!A.state||!A.output||!A.input&&0!==A.avail_in)return CA;12===(t=A.state).mode&&(t.mode=13),g=A.next_out,r=A.output,a=A.avail_out,I=A.next_in,i=A.input,n=A.avail_in,o=t.hold,B=t.bits,C=n,Q=a,y=aA;A:for(;;)switch(t.mode){case 1:if(0===t.wrap){t.mode=13;break}for(;B<16;){if(0===n)break A;n--,o+=i[I++]<<B,B+=8}if(2&t.wrap&&35615===o){t.check=0,G[0]=255&o,G[1]=o>>>8&255,t.check=Y(t.check,G,2,0),o=0,B=0,t.mode=2;break}if(t.flags=0,t.head&&(t.head.done=!1),!(1&t.wrap)||(((255&o)<<8)+(o>>8))%31){A.msg="incorrect header check",t.mode=30;break}if((15&o)!==fA){A.msg="unknown compression method",t.mode=30;break}if(B-=4,D=8+(15&(o>>>=4)),0===t.wbits)t.wbits=D;else if(D>t.wbits){A.msg="invalid window size",t.mode=30;break}t.dmax=1<<t.wbits,A.adler=t.check=1,t.mode=512&o?10:12,o=0,B=0;break;case 2:for(;B<16;){if(0===n)break A;n--,o+=i[I++]<<B,B+=8}if(t.flags=o,(255&t.flags)!==fA){A.msg="unknown compression method",t.mode=30;break}if(57344&t.flags){A.msg="unknown header flags set",t.mode=30;break}t.head&&(t.head.text=o>>8&1),512&t.flags&&(G[0]=255&o,G[1]=o>>>8&255,t.check=Y(t.check,G,2,0)),o=0,B=0,t.mode=3;case 3:for(;B<32;){if(0===n)break A;n--,o+=i[I++]<<B,B+=8}t.head&&(t.head.time=o),512&t.flags&&(G[0]=255&o,G[1]=o>>>8&255,G[2]=o>>>16&255,G[3]=o>>>24&255,t.check=Y(t.check,G,4,0)),o=0,B=0,t.mode=4;case 4:for(;B<16;){if(0===n)break A;n--,o+=i[I++]<<B,B+=8}t.head&&(t.head.xflags=255&o,t.head.os=o>>8),512&t.flags&&(G[0]=255&o,G[1]=o>>>8&255,t.check=Y(t.check,G,2,0)),o=0,B=0,t.mode=5;case 5:if(1024&t.flags){for(;B<16;){if(0===n)break A;n--,o+=i[I++]<<B,B+=8}t.length=o,t.head&&(t.head.extra_len=o),512&t.flags&&(G[0]=255&o,G[1]=o>>>8&255,t.check=Y(t.check,G,2,0)),o=0,B=0}else t.head&&(t.head.extra=null);t.mode=6;case 6:if(1024&t.flags&&((E=t.length)>n&&(E=n),E&&(t.head&&(D=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Uint8Array(t.head.extra_len)),t.head.extra.set(i.subarray(I,I+E),D)),512&t.flags&&(t.check=Y(t.check,i,E,I)),n-=E,I+=E,t.length-=E),t.length))break A;t.length=0,t.mode=7;case 7:if(2048&t.flags){if(0===n)break A;E=0;do{D=i[I+E++],t.head&&D&&t.length<65536&&(t.head.name+=String.fromCharCode(D))}while(D&&E<n);if(512&t.flags&&(t.check=Y(t.check,i,E,I)),n-=E,I+=E,D)break A}else t.head&&(t.head.name=null);t.length=0,t.mode=8;case 8:if(4096&t.flags){if(0===n)break A;E=0;do{D=i[I+E++],t.head&&D&&t.length<65536&&(t.head.comment+=String.fromCharCode(D))}while(D&&E<n);if(512&t.flags&&(t.check=Y(t.check,i,E,I)),n-=E,I+=E,D)break A}else t.head&&(t.head.comment=null);t.mode=9;case 9:if(512&t.flags){for(;B<16;){if(0===n)break A;n--,o+=i[I++]<<B,B+=8}if(o!==(65535&t.check)){A.msg="header crc mismatch",t.mode=30;break}o=0,B=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),A.adler=t.check=0,t.mode=12;break;case 10:for(;B<32;){if(0===n)break A;n--,o+=i[I++]<<B,B+=8}A.adler=t.check=cA(o),o=0,B=0,t.mode=11;case 11:if(0===t.havedict)return A.next_out=g,A.avail_out=a,A.next_in=I,A.avail_in=n,t.hold=o,t.bits=B,BA;A.adler=t.check=1,t.mode=12;case 12:if(e===gA||e===nA)break A;case 13:if(t.last){o>>>=7&B,B-=7&B,t.mode=27;break}for(;B<3;){if(0===n)break A;n--,o+=i[I++]<<B,B+=8}switch(t.last=1&o,B-=1,3&(o>>>=1)){case 0:t.mode=14;break;case 1:if(pA(t),t.mode=20,e===nA){o>>>=2,B-=2;break A}break;case 2:t.mode=17;break;case 3:A.msg="invalid block type",t.mode=30}o>>>=2,B-=2;break;case 14:for(o>>>=7&B,B-=7&B;B<32;){if(0===n)break A;n--,o+=i[I++]<<B,B+=8}if((65535&o)!=(o>>>16^65535)){A.msg="invalid stored block lengths",t.mode=30;break}if(t.length=65535&o,o=0,B=0,t.mode=15,e===nA)break A;case 15:t.mode=16;case 16:if(E=t.length){if(E>n&&(E=n),E>a&&(E=a),0===E)break A;r.set(i.subarray(I,I+E),g),n-=E,I+=E,a-=E,g+=E,t.length-=E;break}t.mode=12;break;case 17:for(;B<14;){if(0===n)break A;n--,o+=i[I++]<<B,B+=8}if(t.nlen=257+(31&o),o>>>=5,B-=5,t.ndist=1+(31&o),o>>>=5,B-=5,t.ncode=4+(15&o),o>>>=4,B-=4,t.nlen>286||t.ndist>30){A.msg="too many length or distance symbols",t.mode=30;break}t.have=0,t.mode=18;case 18:for(;t.have<t.ncode;){for(;B<3;){if(0===n)break A;n--,o+=i[I++]<<B,B+=8}t.lens[F[t.have++]]=7&o,o>>>=3,B-=3}for(;t.have<19;)t.lens[F[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,k={bits:t.lenbits},y=rA(0,t.lens,0,19,t.lencode,0,t.work,k),t.lenbits=k.bits,y){A.msg="invalid code lengths set",t.mode=30;break}t.have=0,t.mode=19;case 19:for(;t.have<t.nlen+t.ndist;){for(;h=(m=t.lencode[o&(1<<t.lenbits)-1])>>>16&255,l=65535&m,!((c=m>>>24)<=B);){if(0===n)break A;n--,o+=i[I++]<<B,B+=8}if(l<16)o>>>=c,B-=c,t.lens[t.have++]=l;else{if(16===l){for(p=c+2;B<p;){if(0===n)break A;n--,o+=i[I++]<<B,B+=8}if(o>>>=c,B-=c,0===t.have){A.msg="invalid bit length repeat",t.mode=30;break}D=t.lens[t.have-1],E=3+(3&o),o>>>=2,B-=2}else if(17===l){for(p=c+3;B<p;){if(0===n)break A;n--,o+=i[I++]<<B,B+=8}B-=c,D=0,E=3+(7&(o>>>=c)),o>>>=3,B-=3}else{for(p=c+7;B<p;){if(0===n)break A;n--,o+=i[I++]<<B,B+=8}B-=c,D=0,E=11+(127&(o>>>=c)),o>>>=7,B-=7}if(t.have+E>t.nlen+t.ndist){A.msg="invalid bit length repeat",t.mode=30;break}for(;E--;)t.lens[t.have++]=D}}if(30===t.mode)break;if(0===t.lens[256]){A.msg="invalid code -- missing end-of-block",t.mode=30;break}if(t.lenbits=9,k={bits:t.lenbits},y=rA(1,t.lens,0,t.nlen,t.lencode,0,t.work,k),t.lenbits=k.bits,y){A.msg="invalid literal/lengths set",t.mode=30;break}if(t.distbits=6,t.distcode=t.distdyn,k={bits:t.distbits},y=rA(2,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,k),t.distbits=k.bits,y){A.msg="invalid distances set",t.mode=30;break}if(t.mode=20,e===nA)break A;case 20:t.mode=21;case 21:if(n>=6&&a>=258){A.next_out=g,A.avail_out=a,A.next_in=I,A.avail_in=n,t.hold=o,t.bits=B,$(A,Q),g=A.next_out,r=A.output,a=A.avail_out,I=A.next_in,i=A.input,n=A.avail_in,o=t.hold,B=t.bits,12===t.mode&&(t.back=-1);break}for(t.back=0;h=(m=t.lencode[o&(1<<t.lenbits)-1])>>>16&255,l=65535&m,!((c=m>>>24)<=B);){if(0===n)break A;n--,o+=i[I++]<<B,B+=8}if(h&&0==(240&h)){for(u=c,w=h,d=l;h=(m=t.lencode[d+((o&(1<<u+w)-1)>>u)])>>>16&255,l=65535&m,!(u+(c=m>>>24)<=B);){if(0===n)break A;n--,o+=i[I++]<<B,B+=8}o>>>=u,B-=u,t.back+=u}if(o>>>=c,B-=c,t.back+=c,t.length=l,0===h){t.mode=26;break}if(32&h){t.back=-1,t.mode=12;break}if(64&h){A.msg="invalid literal/length code",t.mode=30;break}t.extra=15&h,t.mode=22;case 22:if(t.extra){for(p=t.extra;B<p;){if(0===n)break A;n--,o+=i[I++]<<B,B+=8}t.length+=o&(1<<t.extra)-1,o>>>=t.extra,B-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=23;case 23:for(;h=(m=t.distcode[o&(1<<t.distbits)-1])>>>16&255,l=65535&m,!((c=m>>>24)<=B);){if(0===n)break A;n--,o+=i[I++]<<B,B+=8}if(0==(240&h)){for(u=c,w=h,d=l;h=(m=t.distcode[d+((o&(1<<u+w)-1)>>u)])>>>16&255,l=65535&m,!(u+(c=m>>>24)<=B);){if(0===n)break A;n--,o+=i[I++]<<B,B+=8}o>>>=u,B-=u,t.back+=u}if(o>>>=c,B-=c,t.back+=c,64&h){A.msg="invalid distance code",t.mode=30;break}t.offset=l,t.extra=15&h,t.mode=24;case 24:if(t.extra){for(p=t.extra;B<p;){if(0===n)break A;n--,o+=i[I++]<<B,B+=8}t.offset+=o&(1<<t.extra)-1,o>>>=t.extra,B-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){A.msg="invalid distance too far back",t.mode=30;break}t.mode=25;case 25:if(0===a)break A;if(E=Q-a,t.offset>E){if((E=t.offset-E)>t.whave&&t.sane){A.msg="invalid distance too far back",t.mode=30;break}E>t.wnext?(E-=t.wnext,s=t.wsize-E):s=t.wnext-E,E>t.length&&(E=t.length),f=t.window}else f=r,s=g-t.offset,E=t.length;E>a&&(E=a),a-=E,t.length-=E;do{r[g++]=f[s++]}while(--E);0===t.length&&(t.mode=21);break;case 26:if(0===a)break A;r[g++]=t.length,a--,t.mode=21;break;case 27:if(t.wrap){for(;B<32;){if(0===n)break A;n--,o|=i[I++]<<B,B+=8}if(Q-=a,A.total_out+=Q,t.total+=Q,Q&&(A.adler=t.check=t.flags?Y(t.check,r,Q,g-Q):J(t.check,r,Q,g-Q)),Q=a,(t.flags?o:cA(o))!==t.check){A.msg="incorrect data check",t.mode=30;break}o=0,B=0}t.mode=28;case 28:if(t.wrap&&t.flags){for(;B<32;){if(0===n)break A;n--,o+=i[I++]<<B,B+=8}if(o!==(4294967295&t.total)){A.msg="incorrect length check",t.mode=30;break}o=0,B=0}t.mode=29;case 29:y=oA;break A;case 30:y=QA;break A;case 31:return EA;default:return CA}return A.next_out=g,A.avail_out=a,A.next_in=I,A.avail_in=n,t.hold=o,t.bits=B,(t.wsize||Q!==A.avail_out&&t.mode<30&&(t.mode<27||e!==IA))&&mA(A,A.output,A.next_out,Q-A.avail_out),C-=A.avail_in,Q-=A.avail_out,A.total_in+=C,A.total_out+=Q,t.total+=Q,t.wrap&&Q&&(A.adler=t.check=t.flags?Y(t.check,r,Q,A.next_out-Q):J(t.check,r,Q,A.next_out-Q)),A.data_type=t.bits+(t.last?64:0)+(12===t.mode?128:0)+(20===t.mode||15===t.mode?256:0),(0===C&&0===Q||e===IA)&&y===aA&&(y=sA),y},inflateEnd:function(A){if(!A||!A.state)return CA;var e=A.state;return e.window&&(e.window=null),A.state=null,aA},inflateGetHeader:function(A,e){if(!A||!A.state)return CA;var t=A.state;return 0==(2&t.wrap)?CA:(t.head=e,e.done=!1,aA)},inflateSetDictionary:function(A,e){var t,i=e.length;return A&&A.state?0!==(t=A.state).wrap&&11!==t.mode?CA:11===t.mode&&J(1,e,i,0)!==t.check?QA:mA(A,e,i,i)?(t.mode=31,EA):(t.havedict=1,aA):CA},inflateInfo:"pako inflate (from Nodeca project)"};var FA=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1},SA=Object.prototype.toString,vA=H.Z_NO_FLUSH,RA=H.Z_FINISH,UA=H.Z_OK,LA=H.Z_STREAM_END,bA=H.Z_NEED_DICT,MA=H.Z_STREAM_ERROR,NA=H.Z_DATA_ERROR,xA=H.Z_MEM_ERROR;function JA(A){this.options=P({chunkSize:65536,windowBits:15,to:""},A||{});var e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||A&&A.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&0==(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new z,this.strm.avail_out=0;var t=GA.inflateInit2(this.strm,e.windowBits);if(t!==UA)throw new Error(K[t]);if(this.header=new FA,GA.inflateGetHeader(this.strm,this.header),e.dictionary&&("string"==typeof e.dictionary?e.dictionary=Z(e.dictionary):"[object ArrayBuffer]"===SA.call(e.dictionary)&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(t=GA.inflateSetDictionary(this.strm,e.dictionary))!==UA))throw new Error(K[t])}function qA(A,e){var t=new JA(e);if(t.push(A),t.err)throw t.msg||K[t.err];return t.result}JA.prototype.push=function(A,e){var t,i,r,I=this.strm,g=this.options.chunkSize,n=this.options.dictionary;if(this.ended)return!1;for(i=e===~~e?e:!0===e?RA:vA,"[object ArrayBuffer]"===SA.call(A)?I.input=new Uint8Array(A):I.input=A,I.next_in=0,I.avail_in=I.input.length;;){for(0===I.avail_out&&(I.output=new Uint8Array(g),I.next_out=0,I.avail_out=g),(t=GA.inflate(I,i))===bA&&n&&((t=GA.inflateSetDictionary(I,n))===UA?t=GA.inflate(I,i):t===NA&&(t=bA));I.avail_in>0&&t===LA&&I.state.wrap>0&&0!==A[I.next_in];)GA.inflateReset(I),t=GA.inflate(I,i);switch(t){case MA:case NA:case bA:case xA:return this.onEnd(t),this.ended=!0,!1}if(r=I.avail_out,I.next_out&&(0===I.avail_out||t===LA))if("string"===this.options.to){var a=W(I.output,I.next_out),o=I.next_out-a,B=j(I.output,a);I.next_out=o,I.avail_out=g-o,o&&I.output.set(I.output.subarray(a,a+o),0),this.onData(B)}else this.onData(I.output.length===I.next_out?I.output:I.output.subarray(0,I.next_out));if(t!==UA||0!==r){if(t===LA)return t=GA.inflateEnd(this.strm),this.onEnd(t),this.ended=!0,!0;if(0===I.avail_in)break}}return!0},JA.prototype.onData=function(A){this.chunks.push(A)},JA.prototype.onEnd=function(A){A===UA&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=T(this.chunks)),this.chunks=[],this.err=A,this.msg=this.strm.msg};var YA={Inflate:JA,inflate:qA,inflateRaw:function(A,e){return(e=e||{}).raw=!0,qA(A,e)},ungzip:qA,constants:H}.inflate;function KA(A){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(A){return!1}}();return function(){var t,i=c(A);if(e){var r=c(this).constructor;t=Reflect.construct(i,arguments,r)}else t=i.apply(this,arguments);return f(this,t)}}var HA=function(A){s(t,w);var e=KA(t);function t(){return B(this,t),e.apply(this,arguments)}return Q(t,[{key:"decodeBlock",value:function(A){return YA(new Uint8Array(A)).buffer}}]),t}(),OA=Object.freeze({__proto__:null,default:HA});function PA(A){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(A){return!1}}();return function(){var t,i=c(A);if(e){var r=c(this).constructor;t=Reflect.construct(i,arguments,r)}else t=i.apply(this,arguments);return f(this,t)}}var TA,VA=function(A){s(t,w);var e=PA(t);function t(){return B(this,t),e.apply(this,arguments)}return Q(t,[{key:"decodeBlock",value:function(A){for(var e=new DataView(A),t=[],i=0;i<A.byteLength;++i){var r=e.getInt8(i);if(r<0){var I=e.getUint8(i+1);r=-r;for(var g=0;g<=r;++g)t.push(I);i+=1}else{for(var n=0;n<=r;++n)t.push(e.getUint8(i+n+1));i+=r+1}}return new Uint8Array(t).buffer}}]),t}(),_A=Object.freeze({__proto__:null,default:VA}),XA={exports:{}};TA=XA,\n/* Copyright 2015-2021 Esri. Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except in compliance with the License. You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0 @preserve */\nfunction(){var A,e,t,i,r,I,g,n,a,o,B,C,Q,E,s,f,c=(A={defaultNoDataValue:-34027999387901484e22,decode:function(I,g){var n=(g=g||{}).encodedMaskData||null===g.encodedMaskData,a=r(I,g.inputOffset||0,n),o=null!==g.noDataValue?g.noDataValue:A.defaultNoDataValue,B=e(a,g.pixelType||Float32Array,g.encodedMaskData,o,g.returnMask),C={width:a.width,height:a.height,pixelData:B.resultPixels,minValue:B.minValue,maxValue:a.pixels.maxValue,noDataValue:o};return B.resultMask&&(C.maskData=B.resultMask),g.returnEncodedMask&&a.mask&&(C.encodedMaskData=a.mask.bitset?a.mask.bitset:null),g.returnFileInfo&&(C.fileInfo=t(a),g.computeUsedBitDepths&&(C.fileInfo.bitDepths=i(a))),C}},e=function(A,e,t,i,r){var g,n,a,o=0,B=A.pixels.numBlocksX,C=A.pixels.numBlocksY,Q=Math.floor(A.width/B),E=Math.floor(A.height/C),s=2*A.maxZError,f=Number.MAX_VALUE;t=t||(A.mask?A.mask.bitset:null),n=new e(A.width*A.height),r&&t&&(a=new Uint8Array(A.width*A.height));for(var c,h,l=new Float32Array(Q*E),u=0;u<=C;u++){var w=u!==C?E:A.height%C;if(0!==w)for(var d=0;d<=B;d++){var D=d!==B?Q:A.width%B;if(0!==D){var y,k,p,m,G=u*A.width*E+d*Q,F=A.width-D,S=A.pixels.blocks[o];if(S.encoding<2?(0===S.encoding?y=S.rawData:(I(S.stuffedData,S.bitsPerPixel,S.numValidPixels,S.offset,s,l,A.pixels.maxValue),y=l),k=0):p=2===S.encoding?0:S.offset,t)for(h=0;h<w;h++){for(7&G&&(m=t[G>>3],m<<=7&G),c=0;c<D;c++)7&G||(m=t[G>>3]),128&m?(a&&(a[G]=1),f=f>(g=S.encoding<2?y[k++]:p)?g:f,n[G++]=g):(a&&(a[G]=0),n[G++]=i),m<<=1;G+=F}else if(S.encoding<2)for(h=0;h<w;h++){for(c=0;c<D;c++)f=f>(g=y[k++])?g:f,n[G++]=g;G+=F}else for(f=f>p?p:f,h=0;h<w;h++){for(c=0;c<D;c++)n[G++]=p;G+=F}if(1===S.encoding&&k!==S.numValidPixels)throw"Block and Mask do not match";o++}}}return{resultPixels:n,resultMask:a,minValue:f}},t=function(A){return{fileIdentifierString:A.fileIdentifierString,fileVersion:A.fileVersion,imageType:A.imageType,height:A.height,width:A.width,maxZError:A.maxZError,eofOffset:A.eofOffset,mask:A.mask?{numBlocksX:A.mask.numBlocksX,numBlocksY:A.mask.numBlocksY,numBytes:A.mask.numBytes,maxValue:A.mask.maxValue}:null,pixels:{numBlocksX:A.pixels.numBlocksX,numBlocksY:A.pixels.numBlocksY,numBytes:A.pixels.numBytes,maxValue:A.pixels.maxValue,noDataValue:A.noDataValue}}},i=function(A){for(var e=A.pixels.numBlocksX*A.pixels.numBlocksY,t={},i=0;i<e;i++){var r=A.pixels.blocks[i];0===r.encoding?t.float32=!0:1===r.encoding?t[r.bitsPerPixel]=!0:t[0]=!0}return Object.keys(t)},r=function(A,e,t){var i={},r=new Uint8Array(A,e,10);if(i.fileIdentifierString=String.fromCharCode.apply(null,r),"CntZImage"!==i.fileIdentifierString.trim())throw"Unexpected file identifier string: "+i.fileIdentifierString;e+=10;var I=new DataView(A,e,24);if(i.fileVersion=I.getInt32(0,!0),i.imageType=I.getInt32(4,!0),i.height=I.getUint32(8,!0),i.width=I.getUint32(12,!0),i.maxZError=I.getFloat64(16,!0),e+=24,!t)if(I=new DataView(A,e,16),i.mask={},i.mask.numBlocksY=I.getUint32(0,!0),i.mask.numBlocksX=I.getUint32(4,!0),i.mask.numBytes=I.getUint32(8,!0),i.mask.maxValue=I.getFloat32(12,!0),e+=16,i.mask.numBytes>0){var g=new Uint8Array(Math.ceil(i.width*i.height/8)),n=(I=new DataView(A,e,i.mask.numBytes)).getInt16(0,!0),a=2,o=0;do{if(n>0)for(;n--;)g[o++]=I.getUint8(a++);else{var B=I.getUint8(a++);for(n=-n;n--;)g[o++]=B}n=I.getInt16(a,!0),a+=2}while(a<i.mask.numBytes);if(-32768!==n||o<g.length)throw"Unexpected end of mask RLE encoding";i.mask.bitset=g,e+=i.mask.numBytes}else 0==(i.mask.numBytes|i.mask.numBlocksY|i.mask.maxValue)&&(i.mask.bitset=new Uint8Array(Math.ceil(i.width*i.height/8)));I=new DataView(A,e,16),i.pixels={},i.pixels.numBlocksY=I.getUint32(0,!0),i.pixels.numBlocksX=I.getUint32(4,!0),i.pixels.numBytes=I.getUint32(8,!0),i.pixels.maxValue=I.getFloat32(12,!0),e+=16;var C=i.pixels.numBlocksX,Q=i.pixels.numBlocksY,E=C+(i.width%C>0?1:0),s=Q+(i.height%Q>0?1:0);i.pixels.blocks=new Array(E*s);for(var f=0,c=0;c<s;c++)for(var h=0;h<E;h++){var l=0,u=A.byteLength-e;I=new DataView(A,e,Math.min(10,u));var w={};i.pixels.blocks[f++]=w;var d=I.getUint8(0);if(l++,w.encoding=63&d,w.encoding>3)throw"Invalid block encoding ("+w.encoding+")";if(2!==w.encoding){if(0!==d&&2!==d){if(d>>=6,w.offsetType=d,2===d)w.offset=I.getInt8(1),l++;else if(1===d)w.offset=I.getInt16(1,!0),l+=2;else{if(0!==d)throw"Invalid block offset type";w.offset=I.getFloat32(1,!0),l+=4}if(1===w.encoding)if(d=I.getUint8(l),l++,w.bitsPerPixel=63&d,d>>=6,w.numValidPixelsType=d,2===d)w.numValidPixels=I.getUint8(l),l++;else if(1===d)w.numValidPixels=I.getUint16(l,!0),l+=2;else{if(0!==d)throw"Invalid valid pixel count type";w.numValidPixels=I.getUint32(l,!0),l+=4}}var D;if(e+=l,3!==w.encoding)if(0===w.encoding){var y=(i.pixels.numBytes-1)/4;if(y!==Math.floor(y))throw"uncompressed block has invalid length";D=new ArrayBuffer(4*y),new Uint8Array(D).set(new Uint8Array(A,e,4*y));var k=new Float32Array(D);w.rawData=k,e+=4*y}else if(1===w.encoding){var p=Math.ceil(w.numValidPixels*w.bitsPerPixel/8),m=Math.ceil(p/4);D=new ArrayBuffer(4*m),new Uint8Array(D).set(new Uint8Array(A,e,p)),w.stuffedData=new Uint32Array(D),e+=p}}else e++}return i.eofOffset=e,i},I=function(A,e,t,i,r,I,g){var n,a,o,B=(1<<e)-1,C=0,Q=0,E=Math.ceil((g-i)/r),s=4*A.length-Math.ceil(e*t/8);for(A[A.length-1]<<=8*s,n=0;n<t;n++){if(0===Q&&(o=A[C++],Q=32),Q>=e)a=o>>>Q-e&B,Q-=e;else{var f=e-Q;a=(o&B)<<f&B,a+=(o=A[C++])>>>(Q=32-f)}I[n]=a<E?i+a*r:g}return I},A),h=(g=function(A,e,t,i,r,I,g,n){var a,o,B,C,Q,E=(1<<t)-1,s=0,f=0,c=4*A.length-Math.ceil(t*i/8);if(A[A.length-1]<<=8*c,r)for(a=0;a<i;a++)0===f&&(B=A[s++],f=32),f>=t?(o=B>>>f-t&E,f-=t):(o=(B&E)<<(C=t-f)&E,o+=(B=A[s++])>>>(f=32-C)),e[a]=r[o];else for(Q=Math.ceil((n-I)/g),a=0;a<i;a++)0===f&&(B=A[s++],f=32),f>=t?(o=B>>>f-t&E,f-=t):(o=(B&E)<<(C=t-f)&E,o+=(B=A[s++])>>>(f=32-C)),e[a]=o<Q?I+o*g:n},n=function(A,e,t,i,r,I){var g,n=(1<<e)-1,a=0,o=0,B=0,C=0,Q=0,E=[],s=4*A.length-Math.ceil(e*t/8);A[A.length-1]<<=8*s;var f=Math.ceil((I-i)/r);for(o=0;o<t;o++)0===C&&(g=A[a++],C=32),C>=e?(Q=g>>>C-e&n,C-=e):(Q=(g&n)<<(B=e-C)&n,Q+=(g=A[a++])>>>(C=32-B)),E[o]=Q<f?i+Q*r:I;return E.unshift(i),E},a=function(A,e,t,i,r,I,g,n){var a,o,B,C,Q=(1<<t)-1,E=0,s=0,f=0;if(r)for(a=0;a<i;a++)0===s&&(B=A[E++],s=32,f=0),s>=t?(o=B>>>f&Q,s-=t,f+=t):(o=B>>>f&Q,s=32-(C=t-s),o|=((B=A[E++])&(1<<C)-1)<<t-C,f=C),e[a]=r[o];else{var c=Math.ceil((n-I)/g);for(a=0;a<i;a++)0===s&&(B=A[E++],s=32,f=0),s>=t?(o=B>>>f&Q,s-=t,f+=t):(o=B>>>f&Q,s=32-(C=t-s),o|=((B=A[E++])&(1<<C)-1)<<t-C,f=C),e[a]=o<c?I+o*g:n}return e},o=function(A,e,t,i,r,I){var g,n=(1<<e)-1,a=0,o=0,B=0,C=0,Q=0,E=0,s=[],f=Math.ceil((I-i)/r);for(o=0;o<t;o++)0===C&&(g=A[a++],C=32,E=0),C>=e?(Q=g>>>E&n,C-=e,E+=e):(Q=g>>>E&n,C=32-(B=e-C),Q|=((g=A[a++])&(1<<B)-1)<<e-B,E=B),s[o]=Q<f?i+Q*r:I;return s.unshift(i),s},B=function(A,e,t,i){var r,I,g,n,a=(1<<t)-1,o=0,B=0,C=4*A.length-Math.ceil(t*i/8);for(A[A.length-1]<<=8*C,r=0;r<i;r++)0===B&&(g=A[o++],B=32),B>=t?(I=g>>>B-t&a,B-=t):(I=(g&a)<<(n=t-B)&a,I+=(g=A[o++])>>>(B=32-n)),e[r]=I;return e},C=function(A,e,t,i){var r,I,g,n,a=(1<<t)-1,o=0,B=0,C=0;for(r=0;r<i;r++)0===B&&(g=A[o++],B=32,C=0),B>=t?(I=g>>>C&a,B-=t,C+=t):(I=g>>>C&a,B=32-(n=t-B),I|=((g=A[o++])&(1<<n)-1)<<t-n,C=n),e[r]=I;return e},Q={HUFFMAN_LUT_BITS_MAX:12,computeChecksumFletcher32:function(A){for(var e=65535,t=65535,i=A.length,r=Math.floor(i/2),I=0;r;){var g=r>=359?359:r;r-=g;do{e+=A[I++]<<8,t+=e+=A[I++]}while(--g);e=(65535&e)+(e>>>16),t=(65535&t)+(t>>>16)}return 1&i&&(t+=e+=A[I]<<8),((t=(65535&t)+(t>>>16))<<16|(e=(65535&e)+(e>>>16)))>>>0},readHeaderInfo:function(A,e){var t=e.ptr,i=new Uint8Array(A,t,6),r={};if(r.fileIdentifierString=String.fromCharCode.apply(null,i),0!==r.fileIdentifierString.lastIndexOf("Lerc2",0))throw"Unexpected file identifier string (expect Lerc2 ): "+r.fileIdentifierString;t+=6;var I,g=new DataView(A,t,8),n=g.getInt32(0,!0);if(r.fileVersion=n,t+=4,n>=3&&(r.checksum=g.getUint32(4,!0),t+=4),g=new DataView(A,t,12),r.height=g.getUint32(0,!0),r.width=g.getUint32(4,!0),t+=8,n>=4?(r.numDims=g.getUint32(8,!0),t+=4):r.numDims=1,g=new DataView(A,t,40),r.numValidPixel=g.getUint32(0,!0),r.microBlockSize=g.getInt32(4,!0),r.blobSize=g.getInt32(8,!0),r.imageType=g.getInt32(12,!0),r.maxZError=g.getFloat64(16,!0),r.zMin=g.getFloat64(24,!0),r.zMax=g.getFloat64(32,!0),t+=40,e.headerInfo=r,e.ptr=t,n>=3&&(I=n>=4?52:48,this.computeChecksumFletcher32(new Uint8Array(A,t-I,r.blobSize-14))!==r.checksum))throw"Checksum failed.";return!0},checkMinMaxRanges:function(A,e){var t=e.headerInfo,i=this.getDataTypeArray(t.imageType),r=t.numDims*this.getDataTypeSize(t.imageType),I=this.readSubArray(A,e.ptr,i,r),g=this.readSubArray(A,e.ptr+r,i,r);e.ptr+=2*r;var n,a=!0;for(n=0;n<t.numDims;n++)if(I[n]!==g[n]){a=!1;break}return t.minValues=I,t.maxValues=g,a},readSubArray:function(A,e,t,i){var r;if(t===Uint8Array)r=new Uint8Array(A,e,i);else{var I=new ArrayBuffer(i);new Uint8Array(I).set(new Uint8Array(A,e,i)),r=new t(I)}return r},readMask:function(A,e){var t,i,r=e.ptr,I=e.headerInfo,g=I.width*I.height,n=I.numValidPixel,a=new DataView(A,r,4),o={};if(o.numBytes=a.getUint32(0,!0),r+=4,(0===n||g===n)&&0!==o.numBytes)throw"invalid mask";if(0===n)t=new Uint8Array(Math.ceil(g/8)),o.bitset=t,i=new Uint8Array(g),e.pixels.resultMask=i,r+=o.numBytes;else if(o.numBytes>0){t=new Uint8Array(Math.ceil(g/8));var B=(a=new DataView(A,r,o.numBytes)).getInt16(0,!0),C=2,Q=0,E=0;do{if(B>0)for(;B--;)t[Q++]=a.getUint8(C++);else for(E=a.getUint8(C++),B=-B;B--;)t[Q++]=E;B=a.getInt16(C,!0),C+=2}while(C<o.numBytes);if(-32768!==B||Q<t.length)throw"Unexpected end of mask RLE encoding";i=new Uint8Array(g);var s=0,f=0;for(f=0;f<g;f++)7&f?(s=t[f>>3],s<<=7&f):s=t[f>>3],128&s&&(i[f]=1);e.pixels.resultMask=i,o.bitset=t,r+=o.numBytes}return e.ptr=r,e.mask=o,!0},readDataOneSweep:function(A,e,t,i){var r,I=e.ptr,g=e.headerInfo,n=g.numDims,a=g.width*g.height,o=g.imageType,B=g.numValidPixel*Q.getDataTypeSize(o)*n,C=e.pixels.resultMask;if(t===Uint8Array)r=new Uint8Array(A,I,B);else{var E=new ArrayBuffer(B);new Uint8Array(E).set(new Uint8Array(A,I,B)),r=new t(E)}if(r.length===a*n)e.pixels.resultPixels=i?Q.swapDimensionOrder(r,a,n,t,!0):r;else{e.pixels.resultPixels=new t(a*n);var s=0,f=0,c=0,h=0;if(n>1){if(i){for(f=0;f<a;f++)if(C[f])for(h=f,c=0;c<n;c++,h+=a)e.pixels.resultPixels[h]=r[s++]}else for(f=0;f<a;f++)if(C[f])for(h=f*n,c=0;c<n;c++)e.pixels.resultPixels[h+c]=r[s++]}else for(f=0;f<a;f++)C[f]&&(e.pixels.resultPixels[f]=r[s++])}return I+=B,e.ptr=I,!0},readHuffmanTree:function(A,e){var t=this.HUFFMAN_LUT_BITS_MAX,i=new DataView(A,e.ptr,16);if(e.ptr+=16,i.getInt32(0,!0)<2)throw"unsupported Huffman version";var r=i.getInt32(4,!0),I=i.getInt32(8,!0),g=i.getInt32(12,!0);if(I>=g)return!1;var n=new Uint32Array(g-I);Q.decodeBits(A,e,n);var a,o,B,C,s=[];for(a=I;a<g;a++)s[o=a-(a<r?0:r)]={first:n[a-I],second:null};var f=A.byteLength-e.ptr,c=Math.ceil(f/4),h=new ArrayBuffer(4*c);new Uint8Array(h).set(new Uint8Array(A,e.ptr,f));var l,u=new Uint32Array(h),w=0,d=0;for(l=u[0],a=I;a<g;a++)(C=s[o=a-(a<r?0:r)].first)>0&&(s[o].second=l<<w>>>32-C,32-w>=C?32===(w+=C)&&(w=0,l=u[++d]):(w+=C-32,l=u[++d],s[o].second|=l>>>32-w));var D=0,y=0,k=new E;for(a=0;a<s.length;a++)void 0!==s[a]&&(D=Math.max(D,s[a].first));y=D>=t?t:D;var p,m,G,F,S,v=[];for(a=I;a<g;a++)if((C=s[o=a-(a<r?0:r)].first)>0)if(p=[C,o],C<=y)for(m=s[o].second<<y-C,G=1<<y-C,B=0;B<G;B++)v[m|B]=p;else for(m=s[o].second,S=k,F=C-1;F>=0;F--)m>>>F&1?(S.right||(S.right=new E),S=S.right):(S.left||(S.left=new E),S=S.left),0!==F||S.val||(S.val=p[1]);return{decodeLut:v,numBitsLUTQick:y,numBitsLUT:D,tree:k,stuffedData:u,srcPtr:d,bitPos:w}},readHuffman:function(A,e,t,i){var r,I,g,n,a,o,B,C,E,s=e.headerInfo.numDims,f=e.headerInfo.height,c=e.headerInfo.width,h=c*f,l=this.readHuffmanTree(A,e),u=l.decodeLut,w=l.tree,d=l.stuffedData,D=l.srcPtr,y=l.bitPos,k=l.numBitsLUTQick,p=l.numBitsLUT,m=0===e.headerInfo.imageType?128:0,G=e.pixels.resultMask,F=0;y>0&&(D++,y=0);var S,v=d[D],R=1===e.encodeMode,U=new t(h*s),L=U;if(s<2||R){for(S=0;S<s;S++)if(s>1&&(L=new t(U.buffer,h*S,h),F=0),e.headerInfo.numValidPixel===c*f)for(C=0,o=0;o<f;o++)for(B=0;B<c;B++,C++){if(I=0,a=n=v<<y>>>32-k,32-y<k&&(a=n|=d[D+1]>>>64-y-k),u[a])I=u[a][1],y+=u[a][0];else for(a=n=v<<y>>>32-p,32-y<p&&(a=n|=d[D+1]>>>64-y-p),r=w,E=0;E<p;E++)if(!(r=n>>>p-E-1&1?r.right:r.left).left&&!r.right){I=r.val,y=y+E+1;break}y>=32&&(y-=32,v=d[++D]),g=I-m,R?(g+=B>0?F:o>0?L[C-c]:F,g&=255,L[C]=g,F=g):L[C]=g}else for(C=0,o=0;o<f;o++)for(B=0;B<c;B++,C++)if(G[C]){if(I=0,a=n=v<<y>>>32-k,32-y<k&&(a=n|=d[D+1]>>>64-y-k),u[a])I=u[a][1],y+=u[a][0];else for(a=n=v<<y>>>32-p,32-y<p&&(a=n|=d[D+1]>>>64-y-p),r=w,E=0;E<p;E++)if(!(r=n>>>p-E-1&1?r.right:r.left).left&&!r.right){I=r.val,y=y+E+1;break}y>=32&&(y-=32,v=d[++D]),g=I-m,R?(B>0&&G[C-1]?g+=F:o>0&&G[C-c]?g+=L[C-c]:g+=F,g&=255,L[C]=g,F=g):L[C]=g}}else for(C=0,o=0;o<f;o++)for(B=0;B<c;B++)if(C=o*c+B,!G||G[C])for(S=0;S<s;S++,C+=h){if(I=0,a=n=v<<y>>>32-k,32-y<k&&(a=n|=d[D+1]>>>64-y-k),u[a])I=u[a][1],y+=u[a][0];else for(a=n=v<<y>>>32-p,32-y<p&&(a=n|=d[D+1]>>>64-y-p),r=w,E=0;E<p;E++)if(!(r=n>>>p-E-1&1?r.right:r.left).left&&!r.right){I=r.val,y=y+E+1;break}y>=32&&(y-=32,v=d[++D]),g=I-m,L[C]=g}e.ptr=e.ptr+4*(D+1)+(y>0?4:0),e.pixels.resultPixels=U,s>1&&!i&&(e.pixels.resultPixels=Q.swapDimensionOrder(U,h,s,t))},decodeBits:function(A,e,t,i,r){var I=e.headerInfo,Q=I.fileVersion,E=0,s=A.byteLength-e.ptr>=5?5:A.byteLength-e.ptr,f=new DataView(A,e.ptr,s),c=f.getUint8(0);E++;var h=c>>6,l=0===h?4:3-h,u=(32&c)>0,w=31&c,d=0;if(1===l)d=f.getUint8(E),E++;else if(2===l)d=f.getUint16(E,!0),E+=2;else{if(4!==l)throw"Invalid valid pixel count type";d=f.getUint32(E,!0),E+=4}var D,y,k,p,m,G,F,S,v,R=2*I.maxZError,U=I.numDims>1?I.maxValues[r]:I.zMax;if(u){for(e.counter.lut++,S=f.getUint8(E),E++,p=Math.ceil((S-1)*w/8),m=Math.ceil(p/4),y=new ArrayBuffer(4*m),k=new Uint8Array(y),e.ptr+=E,k.set(new Uint8Array(A,e.ptr,p)),F=new Uint32Array(y),e.ptr+=p,v=0;S-1>>>v;)v++;p=Math.ceil(d*v/8),m=Math.ceil(p/4),y=new ArrayBuffer(4*m),(k=new Uint8Array(y)).set(new Uint8Array(A,e.ptr,p)),D=new Uint32Array(y),e.ptr+=p,G=Q>=3?o(F,w,S-1,i,R,U):n(F,w,S-1,i,R,U),Q>=3?a(D,t,v,d,G):g(D,t,v,d,G)}else e.counter.bitstuffer++,v=w,e.ptr+=E,v>0&&(p=Math.ceil(d*v/8),m=Math.ceil(p/4),y=new ArrayBuffer(4*m),(k=new Uint8Array(y)).set(new Uint8Array(A,e.ptr,p)),D=new Uint32Array(y),e.ptr+=p,Q>=3?null==i?C(D,t,v,d):a(D,t,v,d,!1,i,R,U):null==i?B(D,t,v,d):g(D,t,v,d,!1,i,R,U))},readTiles:function(A,e,t,i){var r=e.headerInfo,I=r.width,g=r.height,n=I*g,a=r.microBlockSize,o=r.imageType,B=Q.getDataTypeSize(o),C=Math.ceil(I/a),E=Math.ceil(g/a);e.pixels.numBlocksY=E,e.pixels.numBlocksX=C,e.pixels.ptr=0;var s,f,c,h,l,u,w,d,D,y,k=0,p=0,m=0,G=0,F=0,S=0,v=0,R=0,U=0,L=0,b=0,M=0,N=0,x=0,J=0,q=new t(a*a),Y=g%a||a,K=I%a||a,H=r.numDims,O=e.pixels.resultMask,P=e.pixels.resultPixels,T=r.fileVersion>=5?14:15,V=r.zMax;for(m=0;m<E;m++)for(F=m!==E-1?a:Y,G=0;G<C;G++)for(L=m*I*a+G*a,b=I-(S=G!==C-1?a:K),d=0;d<H;d++){if(H>1?(y=P,L=m*I*a+G*a,P=new t(e.pixels.resultPixels.buffer,n*d*B,n),V=r.maxValues[d]):y=null,v=A.byteLength-e.ptr,f={},J=0,R=(s=new DataView(A,e.ptr,Math.min(10,v))).getUint8(0),J++,D=r.fileVersion>=5?4&R:0,U=R>>6&255,(R>>2&T)!=(G*a>>3&T))throw"integrity issue";if(D&&0===d)throw"integrity issue";if((l=3&R)>3)throw e.ptr+=J,"Invalid block encoding ("+l+")";if(2!==l)if(0===l){if(D)throw"integrity issue";if(e.counter.uncompressed++,e.ptr+=J,M=(M=F*S*B)<(N=A.byteLength-e.ptr)?M:N,c=new ArrayBuffer(M%B==0?M:M+B-M%B),new Uint8Array(c).set(new Uint8Array(A,e.ptr,M)),h=new t(c),x=0,O)for(k=0;k<F;k++){for(p=0;p<S;p++)O[L]&&(P[L]=h[x++]),L++;L+=b}else for(k=0;k<F;k++){for(p=0;p<S;p++)P[L++]=h[x++];L+=b}e.ptr+=x*B}else if(u=Q.getDataTypeUsed(D&&o<6?4:o,U),w=Q.getOnePixel(f,J,u,s),J+=Q.getDataTypeSize(u),3===l)if(e.ptr+=J,e.counter.constantoffset++,O)for(k=0;k<F;k++){for(p=0;p<S;p++)O[L]&&(P[L]=D?Math.min(V,y[L]+w):w),L++;L+=b}else for(k=0;k<F;k++){for(p=0;p<S;p++)P[L]=D?Math.min(V,y[L]+w):w,L++;L+=b}else if(e.ptr+=J,Q.decodeBits(A,e,q,w,d),J=0,D)if(O)for(k=0;k<F;k++){for(p=0;p<S;p++)O[L]&&(P[L]=q[J++]+y[L]),L++;L+=b}else for(k=0;k<F;k++){for(p=0;p<S;p++)P[L]=q[J++]+y[L],L++;L+=b}else if(O)for(k=0;k<F;k++){for(p=0;p<S;p++)O[L]&&(P[L]=q[J++]),L++;L+=b}else for(k=0;k<F;k++){for(p=0;p<S;p++)P[L++]=q[J++];L+=b}else{if(D)if(O)for(k=0;k<F;k++)for(p=0;p<S;p++)O[L]&&(P[L]=y[L]),L++;else for(k=0;k<F;k++)for(p=0;p<S;p++)P[L]=y[L],L++;e.counter.constant++,e.ptr+=J}}H>1&&!i&&(e.pixels.resultPixels=Q.swapDimensionOrder(e.pixels.resultPixels,n,H,t))},formatFileInfo:function(A){return{fileIdentifierString:A.headerInfo.fileIdentifierString,fileVersion:A.headerInfo.fileVersion,imageType:A.headerInfo.imageType,height:A.headerInfo.height,width:A.headerInfo.width,numValidPixel:A.headerInfo.numValidPixel,microBlockSize:A.headerInfo.microBlockSize,blobSize:A.headerInfo.blobSize,maxZError:A.headerInfo.maxZError,pixelType:Q.getPixelType(A.headerInfo.imageType),eofOffset:A.eofOffset,mask:A.mask?{numBytes:A.mask.numBytes}:null,pixels:{numBlocksX:A.pixels.numBlocksX,numBlocksY:A.pixels.numBlocksY,maxValue:A.headerInfo.zMax,minValue:A.headerInfo.zMin,noDataValue:A.noDataValue}}},constructConstantSurface:function(A,e){var t=A.headerInfo.zMax,i=A.headerInfo.zMin,r=A.headerInfo.maxValues,I=A.headerInfo.numDims,g=A.headerInfo.height*A.headerInfo.width,n=0,a=0,o=0,B=A.pixels.resultMask,C=A.pixels.resultPixels;if(B)if(I>1){if(e)for(n=0;n<I;n++)for(o=n*g,t=r[n],a=0;a<g;a++)B[a]&&(C[o+a]=t);else for(a=0;a<g;a++)if(B[a])for(o=a*I,n=0;n<I;n++)C[o+I]=r[n]}else for(a=0;a<g;a++)B[a]&&(C[a]=t);else if(I>1&&i!==t)if(e)for(n=0;n<I;n++)for(o=n*g,t=r[n],a=0;a<g;a++)C[o+a]=t;else for(a=0;a<g;a++)for(o=a*I,n=0;n<I;n++)C[o+n]=r[n];else for(a=0;a<g*I;a++)C[a]=t},getDataTypeArray:function(A){var e;switch(A){case 0:e=Int8Array;break;case 1:e=Uint8Array;break;case 2:e=Int16Array;break;case 3:e=Uint16Array;break;case 4:e=Int32Array;break;case 5:e=Uint32Array;break;case 6:default:e=Float32Array;break;case 7:e=Float64Array}return e},getPixelType:function(A){var e;switch(A){case 0:e="S8";break;case 1:e="U8";break;case 2:e="S16";break;case 3:e="U16";break;case 4:e="S32";break;case 5:e="U32";break;case 6:default:e="F32";break;case 7:e="F64"}return e},isValidPixelValue:function(A,e){if(null==e)return!1;var t;switch(A){case 0:t=e>=-128&&e<=127;break;case 1:t=e>=0&&e<=255;break;case 2:t=e>=-32768&&e<=32767;break;case 3:t=e>=0&&e<=65536;break;case 4:t=e>=-2147483648&&e<=2147483647;break;case 5:t=e>=0&&e<=4294967296;break;case 6:t=e>=-34027999387901484e22&&e<=34027999387901484e22;break;case 7:t=e>=-17976931348623157e292&&e<=17976931348623157e292;break;default:t=!1}return t},getDataTypeSize:function(A){var e=0;switch(A){case 0:case 1:e=1;break;case 2:case 3:e=2;break;case 4:case 5:case 6:e=4;break;case 7:e=8;break;default:e=A}return e},getDataTypeUsed:function(A,e){var t=A;switch(A){case 2:case 4:t=A-e;break;case 3:case 5:t=A-2*e;break;case 6:t=0===e?A:1===e?2:1;break;case 7:t=0===e?A:A-2*e+1;break;default:t=A}return t},getOnePixel:function(A,e,t,i){var r=0;switch(t){case 0:r=i.getInt8(e);break;case 1:r=i.getUint8(e);break;case 2:r=i.getInt16(e,!0);break;case 3:r=i.getUint16(e,!0);break;case 4:r=i.getInt32(e,!0);break;case 5:r=i.getUInt32(e,!0);break;case 6:r=i.getFloat32(e,!0);break;case 7:r=i.getFloat64(e,!0);break;default:throw"the decoder does not understand this pixel type"}return r},swapDimensionOrder:function(A,e,t,i,r){var I=0,g=0,n=0,a=0,o=A;if(t>1)if(o=new i(e*t),r)for(I=0;I<e;I++)for(a=I,n=0;n<t;n++,a+=e)o[a]=A[g++];else for(I=0;I<e;I++)for(a=I,n=0;n<t;n++,a+=e)o[g++]=A[a];return o}},E=function(A,e,t){this.val=A,this.left=e,this.right=t},{decode:function(A,e){var t=(e=e||{}).noDataValue,i=0,r={};r.ptr=e.inputOffset||0,r.pixels={},Q.readHeaderInfo(A,r);var I=r.headerInfo,g=I.fileVersion,n=Q.getDataTypeArray(I.imageType);if(g>5)throw"unsupported lerc version 2."+g;Q.readMask(A,r),I.numValidPixel===I.width*I.height||r.pixels.resultMask||(r.pixels.resultMask=e.maskData);var a=I.width*I.height;r.pixels.resultPixels=new n(a*I.numDims),r.counter={onesweep:0,uncompressed:0,lut:0,bitstuffer:0,constant:0,constantoffset:0};var o,B=!e.returnPixelInterleavedDims;if(0!==I.numValidPixel)if(I.zMax===I.zMin)Q.constructConstantSurface(r,B);else if(g>=4&&Q.checkMinMaxRanges(A,r))Q.constructConstantSurface(r,B);else{var C=new DataView(A,r.ptr,2),E=C.getUint8(0);if(r.ptr++,E)Q.readDataOneSweep(A,r,n,B);else if(g>1&&I.imageType<=1&&Math.abs(I.maxZError-.5)<1e-5){var s=C.getUint8(1);if(r.ptr++,r.encodeMode=s,s>2||g<4&&s>1)throw"Invalid Huffman flag "+s;s?Q.readHuffman(A,r,n,B):Q.readTiles(A,r,n,B)}else Q.readTiles(A,r,n,B)}r.eofOffset=r.ptr,e.inputOffset?(o=r.headerInfo.blobSize+e.inputOffset-r.ptr,Math.abs(o)>=1&&(r.eofOffset=e.inputOffset+r.headerInfo.blobSize)):(o=r.headerInfo.blobSize-r.ptr,Math.abs(o)>=1&&(r.eofOffset=r.headerInfo.blobSize));var f={width:I.width,height:I.height,pixelData:r.pixels.resultPixels,minValue:I.zMin,maxValue:I.zMax,validPixelCount:I.numValidPixel,dimCount:I.numDims,dimStats:{minValues:I.minValues,maxValues:I.maxValues},maskData:r.pixels.resultMask};if(r.pixels.resultMask&&Q.isValidPixelValue(I.imageType,t)){var c=r.pixels.resultMask;for(i=0;i<a;i++)c[i]||(f.pixelData[i]=t);f.noDataValue=t}return r.noDataValue=t,e.returnFileInfo&&(f.fileInfo=Q.formatFileInfo(r)),f},getBandCount:function(A){for(var e=0,t=0,i={ptr:0,pixels:{}};t<A.byteLength-58;)Q.readHeaderInfo(A,i),t+=i.headerInfo.blobSize,e++,i.ptr=t;return e}}),l=(s=new ArrayBuffer(4),f=new Uint8Array(s),new Uint32Array(s)[0]=1,1===f[0]),u={decode:function(A,e){if(!l)throw"Big endian system is not supported.";var t,i,r=(e=e||{}).inputOffset||0,I=new Uint8Array(A,r,10),g=String.fromCharCode.apply(null,I);if("CntZImage"===g.trim())t=c,i=1;else{if("Lerc2"!==g.substring(0,5))throw"Unexpected file identifier string: "+g;t=h,i=2}for(var n,a,o,B,C,Q,E=0,s=A.byteLength-10,f=[],u={width:0,height:0,pixels:[],pixelType:e.pixelType,mask:null,statistics:[]},w=0;r<s;){var d=t.decode(A,{inputOffset:r,encodedMaskData:n,maskData:o,returnMask:0===E,returnEncodedMask:0===E,returnFileInfo:!0,returnPixelInterleavedDims:e.returnPixelInterleavedDims,pixelType:e.pixelType||null,noDataValue:e.noDataValue||null});r=d.fileInfo.eofOffset,o=d.maskData,0===E&&(n=d.encodedMaskData,u.width=d.width,u.height=d.height,u.dimCount=d.dimCount||1,u.pixelType=d.pixelType||d.fileInfo.pixelType,u.mask=o),i>1&&(o&&f.push(o),d.fileInfo.mask&&d.fileInfo.mask.numBytes>0&&w++),E++,u.pixels.push(d.pixelData),u.statistics.push({minValue:d.minValue,maxValue:d.maxValue,noDataValue:d.noDataValue,dimStats:d.dimStats})}if(i>1&&w>1){for(Q=u.width*u.height,u.bandMasks=f,(o=new Uint8Array(Q)).set(f[0]),B=1;B<f.length;B++)for(a=f[B],C=0;C<Q;C++)o[C]=o[C]&a[C];u.maskData=o}return u}};TA.exports?TA.exports=u:this.Lerc=u}();var ZA,jA,WA,zA=XA.exports,$A={env:{emscripten_notify_memory_growth:function(A){WA=new Uint8Array(jA.exports.memory.buffer)}}},Ae=function(){function A(){B(this,A)}return Q(A,[{key:"init",value:function(){return ZA||(ZA="undefined"!=typeof fetch?fetch("data:application/wasm;base64,"+ee).then((function(A){return A.arrayBuffer()})).then((function(A){return WebAssembly.instantiate(A,$A)})).then(this._init):WebAssembly.instantiate(Buffer.from(ee,"base64"),$A).then(this._init))}},{key:"_init",value:function(A){jA=A.instance,$A.env.emscripten_notify_memory_growth(0)}},{key:"decode",value:function(A){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!jA)throw new Error("ZSTDDecoder: Await .init() before decoding.");var t=A.byteLength,i=jA.exports.malloc(t);WA.set(A,i),e=e||Number(jA.exports.ZSTD_findDecompressedSize(i,t));var r=jA.exports.malloc(e),I=jA.exports.ZSTD_decompress(r,e,i,t),g=WA.slice(r,r+I);return jA.exports.free(i),jA.exports.free(r),g}}]),A}(),ee="AGFzbQEAAAABpQEVYAF/AX9gAn9/AGADf39/AX9gBX9/f39/AX9gAX8AYAJ/fwF/YAR/f39/AX9gA39/fwBgBn9/f39/fwF/YAd/f39/f39/AX9gAn9/AX5gAn5+AX5gAABgBX9/f39/AGAGf39/f39/AGAIf39/f39/f38AYAl/f39/f39/f38AYAABf2AIf39/f39/f38Bf2ANf39/f39/f39/f39/fwF/YAF/AX4CJwEDZW52H2Vtc2NyaXB0ZW5fbm90aWZ5X21lbW9yeV9ncm93dGgABANpaAEFAAAFAgEFCwACAQABAgIFBQcAAwABDgsBAQcAEhMHAAUBDAQEAAANBwQCAgYCBAgDAwMDBgEACQkHBgICAAYGAgQUBwYGAwIGAAMCAQgBBwUGCgoEEQAEBAEIAwgDBQgDEA8IAAcABAUBcAECAgUEAQCAAgYJAX8BQaCgwAILB2AHBm1lbW9yeQIABm1hbGxvYwAoBGZyZWUAJgxaU1REX2lzRXJyb3IAaBlaU1REX2ZpbmREZWNvbXByZXNzZWRTaXplAFQPWlNURF9kZWNvbXByZXNzAEoGX3N0YXJ0ACQJBwEAQQELASQKussBaA8AIAAgACgCBCABajYCBAsZACAAKAIAIAAoAgRBH3F0QQAgAWtBH3F2CwgAIABBiH9LC34BBH9BAyEBIAAoAgQiA0EgTQRAIAAoAggiASAAKAIQTwRAIAAQDQ8LIAAoAgwiAiABRgRAQQFBAiADQSBJGw8LIAAgASABIAJrIANBA3YiBCABIARrIAJJIgEbIgJrIgQ2AgggACADIAJBA3RrNgIEIAAgBCgAADYCAAsgAQsUAQF/IAAgARACIQIgACABEAEgAgv3AQECfyACRQRAIABCADcCACAAQQA2AhAgAEIANwIIQbh/DwsgACABNgIMIAAgAUEEajYCECACQQRPBEAgACABIAJqIgFBfGoiAzYCCCAAIAMoAAA2AgAgAUF/ai0AACIBBEAgAEEIIAEQFGs2AgQgAg8LIABBADYCBEF/DwsgACABNgIIIAAgAS0AACIDNgIAIAJBfmoiBEEBTQRAIARBAWtFBEAgACABLQACQRB0IANyIgM2AgALIAAgAS0AAUEIdCADajYCAAsgASACakF/ai0AACIBRQRAIABBADYCBEFsDwsgAEEoIAEQFCACQQN0ams2AgQgAgsWACAAIAEpAAA3AAAgACABKQAINwAICy8BAX8gAUECdEGgHWooAgAgACgCAEEgIAEgACgCBGprQR9xdnEhAiAAIAEQASACCyEAIAFCz9bTvtLHq9lCfiAAfEIfiUKHla+vmLbem55/fgsdAQF/IAAoAgggACgCDEYEfyAAKAIEQSBGBUEACwuCBAEDfyACQYDAAE8EQCAAIAEgAhBnIAAPCyAAIAJqIQMCQCAAIAFzQQNxRQRAAkAgAkEBSARAIAAhAgwBCyAAQQNxRQRAIAAhAgwBCyAAIQIDQCACIAEtAAA6AAAgAUEBaiEBIAJBAWoiAiADTw0BIAJBA3ENAAsLAkAgA0F8cSIEQcAASQ0AIAIgBEFAaiIFSw0AA0AgAiABKAIANgIAIAIgASgCBDYCBCACIAEoAgg2AgggAiABKAIMNgIMIAIgASgCEDYCECACIAEoAhQ2AhQgAiABKAIYNgIYIAIgASgCHDYCHCACIAEoAiA2AiAgAiABKAIkNgIkIAIgASgCKDYCKCACIAEoAiw2AiwgAiABKAIwNgIwIAIgASgCNDYCNCACIAEoAjg2AjggAiABKAI8NgI8IAFBQGshASACQUBrIgIgBU0NAAsLIAIgBE8NAQNAIAIgASgCADYCACABQQRqIQEgAkEEaiICIARJDQALDAELIANBBEkEQCAAIQIMAQsgA0F8aiIEIABJBEAgACECDAELIAAhAgNAIAIgAS0AADoAACACIAEtAAE6AAEgAiABLQACOgACIAIgAS0AAzoAAyABQQRqIQEgAkEEaiICIARNDQALCyACIANJBEADQCACIAEtAAA6AAAgAUEBaiEBIAJBAWoiAiADRw0ACwsgAAsMACAAIAEpAAA3AAALQQECfyAAKAIIIgEgACgCEEkEQEEDDwsgACAAKAIEIgJBB3E2AgQgACABIAJBA3ZrIgE2AgggACABKAAANgIAQQALDAAgACABKAIANgAAC/cCAQJ/AkAgACABRg0AAkAgASACaiAASwRAIAAgAmoiBCABSw0BCyAAIAEgAhALDwsgACABc0EDcSEDAkACQCAAIAFJBEAgAwRAIAAhAwwDCyAAQQNxRQRAIAAhAwwCCyAAIQMDQCACRQ0EIAMgAS0AADoAACABQQFqIQEgAkF/aiECIANBAWoiA0EDcQ0ACwwBCwJAIAMNACAEQQNxBEADQCACRQ0FIAAgAkF/aiICaiIDIAEgAmotAAA6AAAgA0EDcQ0ACwsgAkEDTQ0AA0AgACACQXxqIgJqIAEgAmooAgA2AgAgAkEDSw0ACwsgAkUNAgNAIAAgAkF/aiICaiABIAJqLQAAOgAAIAINAAsMAgsgAkEDTQ0AIAIhBANAIAMgASgCADYCACABQQRqIQEgA0EEaiEDIARBfGoiBEEDSw0ACyACQQNxIQILIAJFDQADQCADIAEtAAA6AAAgA0EBaiEDIAFBAWohASACQX9qIgINAAsLIAAL8wICAn8BfgJAIAJFDQAgACACaiIDQX9qIAE6AAAgACABOgAAIAJBA0kNACADQX5qIAE6AAAgACABOgABIANBfWogAToAACAAIAE6AAIgAkEHSQ0AIANBfGogAToAACAAIAE6AAMgAkEJSQ0AIABBACAAa0EDcSIEaiIDIAFB/wFxQYGChAhsIgE2AgAgAyACIARrQXxxIgRqIgJBfGogATYCACAEQQlJDQAgAyABNgIIIAMgATYCBCACQXhqIAE2AgAgAkF0aiABNgIAIARBGUkNACADIAE2AhggAyABNgIUIAMgATYCECADIAE2AgwgAkFwaiABNgIAIAJBbGogATYCACACQWhqIAE2AgAgAkFkaiABNgIAIAQgA0EEcUEYciIEayICQSBJDQAgAa0iBUIghiAFhCEFIAMgBGohAQNAIAEgBTcDGCABIAU3AxAgASAFNwMIIAEgBTcDACABQSBqIQEgAkFgaiICQR9LDQALCyAACy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAIajYCACADCy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAFajYCACADCx8AIAAgASACKAIEEAg2AgAgARAEGiAAIAJBCGo2AgQLCAAgAGdBH3MLugUBDX8jAEEQayIKJAACfyAEQQNNBEAgCkEANgIMIApBDGogAyAEEAsaIAAgASACIApBDGpBBBAVIgBBbCAAEAMbIAAgACAESxsMAQsgAEEAIAEoAgBBAXRBAmoQECENQVQgAygAACIGQQ9xIgBBCksNABogAiAAQQVqNgIAIAMgBGoiAkF8aiEMIAJBeWohDiACQXtqIRAgAEEGaiELQQQhBSAGQQR2IQRBICAAdCIAQQFyIQkgASgCACEPQQAhAiADIQYCQANAIAlBAkggAiAPS3JFBEAgAiEHAkAgCARAA0AgBEH//wNxQf//A0YEQCAHQRhqIQcgBiAQSQR/IAZBAmoiBigAACAFdgUgBUEQaiEFIARBEHYLIQQMAQsLA0AgBEEDcSIIQQNGBEAgBUECaiEFIARBAnYhBCAHQQNqIQcMAQsLIAcgCGoiByAPSw0EIAVBAmohBQNAIAIgB0kEQCANIAJBAXRqQQA7AQAgAkEBaiECDAELCyAGIA5LQQAgBiAFQQN1aiIHIAxLG0UEQCAHKAAAIAVBB3EiBXYhBAwCCyAEQQJ2IQQLIAYhBwsCfyALQX9qIAQgAEF/anEiBiAAQQF0QX9qIgggCWsiEUkNABogBCAIcSIEQQAgESAEIABIG2shBiALCyEIIA0gAkEBdGogBkF/aiIEOwEAIAlBASAGayAEIAZBAUgbayEJA0AgCSAASARAIABBAXUhACALQX9qIQsMAQsLAn8gByAOS0EAIAcgBSAIaiIFQQN1aiIGIAxLG0UEQCAFQQdxDAELIAUgDCIGIAdrQQN0awshBSACQQFqIQIgBEUhCCAGKAAAIAVBH3F2IQQMAQsLQWwgCUEBRyAFQSBKcg0BGiABIAJBf2o2AgAgBiAFQQdqQQN1aiADawwBC0FQCyEAIApBEGokACAACwkAQQFBBSAAGwsMACAAIAEoAAA2AAALqgMBCn8jAEHwAGsiCiQAIAJBAWohDiAAQQhqIQtBgIAEIAVBf2p0QRB1IQxBACECQQEhBkEBIAV0IglBf2oiDyEIA0AgAiAORkUEQAJAIAEgAkEBdCINai8BACIHQf//A0YEQCALIAhBA3RqIAI2AgQgCEF/aiEIQQEhBwwBCyAGQQAgDCAHQRB0QRB1ShshBgsgCiANaiAHOwEAIAJBAWohAgwBCwsgACAFNgIEIAAgBjYCACAJQQN2IAlBAXZqQQNqIQxBACEAQQAhBkEAIQIDQCAGIA5GBEADQAJAIAAgCUYNACAKIAsgAEEDdGoiASgCBCIGQQF0aiICIAIvAQAiAkEBajsBACABIAUgAhAUayIIOgADIAEgAiAIQf8BcXQgCWs7AQAgASAEIAZBAnQiAmooAgA6AAIgASACIANqKAIANgIEIABBAWohAAwBCwsFIAEgBkEBdGouAQAhDUEAIQcDQCAHIA1ORQRAIAsgAkEDdGogBjYCBANAIAIgDGogD3EiAiAISw0ACyAHQQFqIQcMAQsLIAZBAWohBgwBCwsgCkHwAGokAAsjAEIAIAEQCSAAhUKHla+vmLbem55/fkLj3MqV/M7y9YV/fAsQACAAQn43AwggACABNgIACyQBAX8gAARAIAEoAgQiAgRAIAEoAgggACACEQEADwsgABAmCwsfACAAIAEgAi8BABAINgIAIAEQBBogACACQQRqNgIEC0oBAX9BoCAoAgAiASAAaiIAQX9MBEBBiCBBMDYCAEF/DwsCQCAAPwBBEHRNDQAgABBmDQBBiCBBMDYCAEF/DwtBoCAgADYCACABC9cBAQh/Qbp/IQoCQCACKAIEIgggAigCACIJaiIOIAEgAGtLDQBBbCEKIAkgBCADKAIAIgtrSw0AIAAgCWoiBCACKAIIIgxrIQ0gACABQWBqIg8gCyAJQQAQKSADIAkgC2o2AgACQAJAIAwgBCAFa00EQCANIQUMAQsgDCAEIAZrSw0CIAcgDSAFayIAaiIBIAhqIAdNBEAgBCABIAgQDxoMAgsgBCABQQAgAGsQDyEBIAIgACAIaiIINgIEIAEgAGshBAsgBCAPIAUgCEEBECkLIA4hCgsgCgubAgEBfyMAQYABayINJAAgDSADNgJ8AkAgAkEDSwRAQX8hCQwBCwJAAkACQAJAIAJBAWsOAwADAgELIAZFBEBBuH8hCQwEC0FsIQkgBS0AACICIANLDQMgACAHIAJBAnQiAmooAgAgAiAIaigCABA7IAEgADYCAEEBIQkMAwsgASAJNgIAQQAhCQwCCyAKRQRAQWwhCQwCC0EAIQkgC0UgDEEZSHINAUEIIAR0QQhqIQBBACECA0AgAiAATw0CIAJBQGshAgwAAAsAC0FsIQkgDSANQfwAaiANQfgAaiAFIAYQFSICEAMNACANKAJ4IgMgBEsNACAAIA0gDSgCfCAHIAggAxAYIAEgADYCACACIQkLIA1BgAFqJAAgCQsLACAAIAEgAhALGgsQACAALwAAIAAtAAJBEHRyCy8AAn9BuH8gAUEISQ0AGkFyIAAoAAQiAEF3Sw0AGkG4fyAAQQhqIgAgACABSxsLCwkAIAAgATsAAAsDAAELigYBBX8gACAAKAIAIgVBfnE2AgBBACAAIAVBAXZqQYQgKAIAIgQgAEYbIQECQAJAIAAoAgQiAkUNACACKAIAIgNBAXENACACQQhqIgUgA0EBdkF4aiIDQQggA0EISxtnQR9zQQJ0QYAfaiIDKAIARgRAIAMgAigCDDYCAAsgAigCCCIDBEAgAyACKAIMNgIECyACKAIMIgMEQCADIAIoAgg2AgALIAIgAigCACAAKAIAQX5xajYCAEGEICEAAkACQCABRQ0AIAEgAjYCBCABKAIAIgNBAXENASADQQF2QXhqIgNBCCADQQhLG2dBH3NBAnRBgB9qIgMoAgAgAUEIakYEQCADIAEoAgw2AgALIAEoAggiAwRAIAMgASgCDDYCBAsgASgCDCIDBEAgAyABKAIINgIAQYQgKAIAIQQLIAIgAigCACABKAIAQX5xajYCACABIARGDQAgASABKAIAQQF2akEEaiEACyAAIAI2AgALIAIoAgBBAXZBeGoiAEEIIABBCEsbZ0Efc0ECdEGAH2oiASgCACEAIAEgBTYCACACIAA2AgwgAkEANgIIIABFDQEgACAFNgIADwsCQCABRQ0AIAEoAgAiAkEBcQ0AIAJBAXZBeGoiAkEIIAJBCEsbZ0Efc0ECdEGAH2oiAigCACABQQhqRgRAIAIgASgCDDYCAAsgASgCCCICBEAgAiABKAIMNgIECyABKAIMIgIEQCACIAEoAgg2AgBBhCAoAgAhBAsgACAAKAIAIAEoAgBBfnFqIgI2AgACQCABIARHBEAgASABKAIAQQF2aiAANgIEIAAoAgAhAgwBC0GEICAANgIACyACQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgIoAgAhASACIABBCGoiAjYCACAAIAE2AgwgAEEANgIIIAFFDQEgASACNgIADwsgBUEBdkF4aiIBQQggAUEISxtnQR9zQQJ0QYAfaiICKAIAIQEgAiAAQQhqIgI2AgAgACABNgIMIABBADYCCCABRQ0AIAEgAjYCAAsLDgAgAARAIABBeGoQJQsLgAIBA38CQCAAQQ9qQXhxQYQgKAIAKAIAQQF2ayICEB1Bf0YNAAJAQYQgKAIAIgAoAgAiAUEBcQ0AIAFBAXZBeGoiAUEIIAFBCEsbZ0Efc0ECdEGAH2oiASgCACAAQQhqRgRAIAEgACgCDDYCAAsgACgCCCIBBEAgASAAKAIMNgIECyAAKAIMIgFFDQAgASAAKAIINgIAC0EBIQEgACAAKAIAIAJBAXRqIgI2AgAgAkEBcQ0AIAJBAXZBeGoiAkEIIAJBCEsbZ0Efc0ECdEGAH2oiAygCACECIAMgAEEIaiIDNgIAIAAgAjYCDCAAQQA2AgggAkUNACACIAM2AgALIAELtwIBA38CQAJAIABBASAAGyICEDgiAA0AAkACQEGEICgCACIARQ0AIAAoAgAiA0EBcQ0AIAAgA0EBcjYCACADQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgEoAgAgAEEIakYEQCABIAAoAgw2AgALIAAoAggiAQRAIAEgACgCDDYCBAsgACgCDCIBBEAgASAAKAIINgIACyACECchAkEAIQFBhCAoAgAhACACDQEgACAAKAIAQX5xNgIAQQAPCyACQQ9qQXhxIgMQHSICQX9GDQIgAkEHakF4cSIAIAJHBEAgACACaxAdQX9GDQMLAkBBhCAoAgAiAUUEQEGAICAANgIADAELIAAgATYCBAtBhCAgADYCACAAIANBAXRBAXI2AgAMAQsgAEUNAQsgAEEIaiEBCyABC7kDAQJ/IAAgA2ohBQJAIANBB0wEQANAIAAgBU8NAiAAIAItAAA6AAAgAEEBaiEAIAJBAWohAgwAAAsACyAEQQFGBEACQCAAIAJrIgZBB00EQCAAIAItAAA6AAAgACACLQABOgABIAAgAi0AAjoAAiAAIAItAAM6AAMgAEEEaiACIAZBAnQiBkHAHmooAgBqIgIQFyACIAZB4B5qKAIAayECDAELIAAgAhAMCyACQQhqIQIgAEEIaiEACwJAAkACQAJAIAUgAU0EQCAAIANqIQEgBEEBRyAAIAJrQQ9Kcg0BA0AgACACEAwgAkEIaiECIABBCGoiACABSQ0ACwwFCyAAIAFLBEAgACEBDAQLIARBAUcgACACa0EPSnINASAAIQMgAiEEA0AgAyAEEAwgBEEIaiEEIANBCGoiAyABSQ0ACwwCCwNAIAAgAhAHIAJBEGohAiAAQRBqIgAgAUkNAAsMAwsgACEDIAIhBANAIAMgBBAHIARBEGohBCADQRBqIgMgAUkNAAsLIAIgASAAa2ohAgsDQCABIAVPDQEgASACLQAAOgAAIAFBAWohASACQQFqIQIMAAALAAsLQQECfyAAIAAoArjgASIDNgLE4AEgACgCvOABIQQgACABNgK84AEgACABIAJqNgK44AEgACABIAQgA2tqNgLA4AELpgEBAX8gACAAKALs4QEQFjYCyOABIABCADcD+OABIABCADcDuOABIABBwOABakIANwMAIABBqNAAaiIBQYyAgOAANgIAIABBADYCmOIBIABCADcDiOEBIABCAzcDgOEBIABBrNABakHgEikCADcCACAAQbTQAWpB6BIoAgA2AgAgACABNgIMIAAgAEGYIGo2AgggACAAQaAwajYCBCAAIABBEGo2AgALYQEBf0G4fyEDAkAgAUEDSQ0AIAIgABAhIgFBA3YiADYCCCACIAFBAXE2AgQgAiABQQF2QQNxIgM2AgACQCADQX9qIgFBAksNAAJAIAFBAWsOAgEAAgtBbA8LIAAhAwsgAwsMACAAIAEgAkEAEC4LiAQCA38CfiADEBYhBCAAQQBBKBAQIQAgBCACSwRAIAQPCyABRQRAQX8PCwJAAkAgA0EBRg0AIAEoAAAiBkGo6r5pRg0AQXYhAyAGQXBxQdDUtMIBRw0BQQghAyACQQhJDQEgAEEAQSgQECEAIAEoAAQhASAAQQE2AhQgACABrTcDAEEADwsgASACIAMQLyIDIAJLDQAgACADNgIYQXIhAyABIARqIgVBf2otAAAiAkEIcQ0AIAJBIHEiBkUEQEFwIQMgBS0AACIFQacBSw0BIAVBB3GtQgEgBUEDdkEKaq2GIgdCA4h+IAd8IQggBEEBaiEECyACQQZ2IQMgAkECdiEFAkAgAkEDcUF/aiICQQJLBEBBACECDAELAkACQAJAIAJBAWsOAgECAAsgASAEai0AACECIARBAWohBAwCCyABIARqLwAAIQIgBEECaiEEDAELIAEgBGooAAAhAiAEQQRqIQQLIAVBAXEhBQJ+AkACQAJAIANBf2oiA0ECTQRAIANBAWsOAgIDAQtCfyAGRQ0DGiABIARqMQAADAMLIAEgBGovAACtQoACfAwCCyABIARqKAAArQwBCyABIARqKQAACyEHIAAgBTYCICAAIAI2AhwgACAHNwMAQQAhAyAAQQA2AhQgACAHIAggBhsiBzcDCCAAIAdCgIAIIAdCgIAIVBs+AhALIAMLWwEBf0G4fyEDIAIQFiICIAFNBH8gACACakF/ai0AACIAQQNxQQJ0QaAeaigCACACaiAAQQZ2IgFBAnRBsB5qKAIAaiAAQSBxIgBFaiABRSAAQQV2cWoFQbh/CwsdACAAKAKQ4gEQWiAAQQA2AqDiASAAQgA3A5DiAQu1AwEFfyMAQZACayIKJABBuH8hBgJAIAVFDQAgBCwAACIIQf8BcSEHAkAgCEF/TARAIAdBgn9qQQF2IgggBU8NAkFsIQYgB0GBf2oiBUGAAk8NAiAEQQFqIQdBACEGA0AgBiAFTwRAIAUhBiAIIQcMAwUgACAGaiAHIAZBAXZqIgQtAABBBHY6AAAgACAGQQFyaiAELQAAQQ9xOgAAIAZBAmohBgwBCwAACwALIAcgBU8NASAAIARBAWogByAKEFMiBhADDQELIAYhBEEAIQYgAUEAQTQQECEJQQAhBQNAIAQgBkcEQCAAIAZqIggtAAAiAUELSwRAQWwhBgwDBSAJIAFBAnRqIgEgASgCAEEBajYCACAGQQFqIQZBASAILQAAdEEBdSAFaiEFDAILAAsLQWwhBiAFRQ0AIAUQFEEBaiIBQQxLDQAgAyABNgIAQQFBASABdCAFayIDEBQiAXQgA0cNACAAIARqIAFBAWoiADoAACAJIABBAnRqIgAgACgCAEEBajYCACAJKAIEIgBBAkkgAEEBcXINACACIARBAWo2AgAgB0EBaiEGCyAKQZACaiQAIAYLxhEBDH8jAEHwAGsiBSQAQWwhCwJAIANBCkkNACACLwAAIQogAi8AAiEJIAIvAAQhByAFQQhqIAQQDgJAIAMgByAJIApqakEGaiIMSQ0AIAUtAAohCCAFQdgAaiACQQZqIgIgChAGIgsQAw0BIAVBQGsgAiAKaiICIAkQBiILEAMNASAFQShqIAIgCWoiAiAHEAYiCxADDQEgBUEQaiACIAdqIAMgDGsQBiILEAMNASAAIAFqIg9BfWohECAEQQRqIQZBASELIAAgAUEDakECdiIDaiIMIANqIgIgA2oiDiEDIAIhBCAMIQcDQCALIAMgEElxBEAgACAGIAVB2ABqIAgQAkECdGoiCS8BADsAACAFQdgAaiAJLQACEAEgCS0AAyELIAcgBiAFQUBrIAgQAkECdGoiCS8BADsAACAFQUBrIAktAAIQASAJLQADIQogBCAGIAVBKGogCBACQQJ0aiIJLwEAOwAAIAVBKGogCS0AAhABIAktAAMhCSADIAYgBUEQaiAIEAJBAnRqIg0vAQA7AAAgBUEQaiANLQACEAEgDS0AAyENIAAgC2oiCyAGIAVB2ABqIAgQAkECdGoiAC8BADsAACAFQdgAaiAALQACEAEgAC0AAyEAIAcgCmoiCiAGIAVBQGsgCBACQQJ0aiIHLwEAOwAAIAVBQGsgBy0AAhABIActAAMhByAEIAlqIgkgBiAFQShqIAgQAkECdGoiBC8BADsAACAFQShqIAQtAAIQASAELQADIQQgAyANaiIDIAYgBUEQaiAIEAJBAnRqIg0vAQA7AAAgBUEQaiANLQACEAEgACALaiEAIAcgCmohByAEIAlqIQQgAyANLQADaiEDIAVB2ABqEA0gBUFAaxANciAFQShqEA1yIAVBEGoQDXJFIQsMAQsLIAQgDksgByACS3INAEFsIQsgACAMSw0BIAxBfWohCQNAQQAgACAJSSAFQdgAahAEGwRAIAAgBiAFQdgAaiAIEAJBAnRqIgovAQA7AAAgBUHYAGogCi0AAhABIAAgCi0AA2oiACAGIAVB2ABqIAgQAkECdGoiCi8BADsAACAFQdgAaiAKLQACEAEgACAKLQADaiEADAEFIAxBfmohCgNAIAVB2ABqEAQgACAKS3JFBEAgACAGIAVB2ABqIAgQAkECdGoiCS8BADsAACAFQdgAaiAJLQACEAEgACAJLQADaiEADAELCwNAIAAgCk0EQCAAIAYgBUHYAGogCBACQQJ0aiIJLwEAOwAAIAVB2ABqIAktAAIQASAAIAktAANqIQAMAQsLAkAgACAMTw0AIAAgBiAFQdgAaiAIEAIiAEECdGoiDC0AADoAACAMLQADQQFGBEAgBUHYAGogDC0AAhABDAELIAUoAlxBH0sNACAFQdgAaiAGIABBAnRqLQACEAEgBSgCXEEhSQ0AIAVBIDYCXAsgAkF9aiEMA0BBACAHIAxJIAVBQGsQBBsEQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiIAIAYgBUFAayAIEAJBAnRqIgcvAQA7AAAgBUFAayAHLQACEAEgACAHLQADaiEHDAEFIAJBfmohDANAIAVBQGsQBCAHIAxLckUEQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiEHDAELCwNAIAcgDE0EQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiEHDAELCwJAIAcgAk8NACAHIAYgBUFAayAIEAIiAEECdGoiAi0AADoAACACLQADQQFGBEAgBUFAayACLQACEAEMAQsgBSgCREEfSw0AIAVBQGsgBiAAQQJ0ai0AAhABIAUoAkRBIUkNACAFQSA2AkQLIA5BfWohAgNAQQAgBCACSSAFQShqEAQbBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2oiACAGIAVBKGogCBACQQJ0aiIELwEAOwAAIAVBKGogBC0AAhABIAAgBC0AA2ohBAwBBSAOQX5qIQIDQCAFQShqEAQgBCACS3JFBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2ohBAwBCwsDQCAEIAJNBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2ohBAwBCwsCQCAEIA5PDQAgBCAGIAVBKGogCBACIgBBAnRqIgItAAA6AAAgAi0AA0EBRgRAIAVBKGogAi0AAhABDAELIAUoAixBH0sNACAFQShqIAYgAEECdGotAAIQASAFKAIsQSFJDQAgBUEgNgIsCwNAQQAgAyAQSSAFQRBqEAQbBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2oiACAGIAVBEGogCBACQQJ0aiICLwEAOwAAIAVBEGogAi0AAhABIAAgAi0AA2ohAwwBBSAPQX5qIQIDQCAFQRBqEAQgAyACS3JFBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2ohAwwBCwsDQCADIAJNBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2ohAwwBCwsCQCADIA9PDQAgAyAGIAVBEGogCBACIgBBAnRqIgItAAA6AAAgAi0AA0EBRgRAIAVBEGogAi0AAhABDAELIAUoAhRBH0sNACAFQRBqIAYgAEECdGotAAIQASAFKAIUQSFJDQAgBUEgNgIUCyABQWwgBUHYAGoQCiAFQUBrEApxIAVBKGoQCnEgBUEQahAKcRshCwwJCwAACwALAAALAAsAAAsACwAACwALQWwhCwsgBUHwAGokACALC7UEAQ5/IwBBEGsiBiQAIAZBBGogABAOQVQhBQJAIARB3AtJDQAgBi0ABCEHIANB8ARqQQBB7AAQECEIIAdBDEsNACADQdwJaiIJIAggBkEIaiAGQQxqIAEgAhAxIhAQA0UEQCAGKAIMIgQgB0sNASADQdwFaiEPIANBpAVqIREgAEEEaiESIANBqAVqIQEgBCEFA0AgBSICQX9qIQUgCCACQQJ0aigCAEUNAAsgAkEBaiEOQQEhBQNAIAUgDk9FBEAgCCAFQQJ0IgtqKAIAIQwgASALaiAKNgIAIAVBAWohBSAKIAxqIQoMAQsLIAEgCjYCAEEAIQUgBigCCCELA0AgBSALRkUEQCABIAUgCWotAAAiDEECdGoiDSANKAIAIg1BAWo2AgAgDyANQQF0aiINIAw6AAEgDSAFOgAAIAVBAWohBQwBCwtBACEBIANBADYCqAUgBEF/cyAHaiEJQQEhBQNAIAUgDk9FBEAgCCAFQQJ0IgtqKAIAIQwgAyALaiABNgIAIAwgBSAJanQgAWohASAFQQFqIQUMAQsLIAcgBEEBaiIBIAJrIgRrQQFqIQgDQEEBIQUgBCAIT0UEQANAIAUgDk9FBEAgBUECdCIJIAMgBEE0bGpqIAMgCWooAgAgBHY2AgAgBUEBaiEFDAELCyAEQQFqIQQMAQsLIBIgByAPIAogESADIAIgARBkIAZBAToABSAGIAc6AAYgACAGKAIENgIACyAQIQULIAZBEGokACAFC8ENAQt/IwBB8ABrIgUkAEFsIQkCQCADQQpJDQAgAi8AACEKIAIvAAIhDCACLwAEIQYgBUEIaiAEEA4CQCADIAYgCiAMampBBmoiDUkNACAFLQAKIQcgBUHYAGogAkEGaiICIAoQBiIJEAMNASAFQUBrIAIgCmoiAiAMEAYiCRADDQEgBUEoaiACIAxqIgIgBhAGIgkQAw0BIAVBEGogAiAGaiADIA1rEAYiCRADDQEgACABaiIOQX1qIQ8gBEEEaiEGQQEhCSAAIAFBA2pBAnYiAmoiCiACaiIMIAJqIg0hAyAMIQQgCiECA0AgCSADIA9JcQRAIAYgBUHYAGogBxACQQF0aiIILQAAIQsgBUHYAGogCC0AARABIAAgCzoAACAGIAVBQGsgBxACQQF0aiIILQAAIQsgBUFAayAILQABEAEgAiALOgAAIAYgBUEoaiAHEAJBAXRqIggtAAAhCyAFQShqIAgtAAEQASAEIAs6AAAgBiAFQRBqIAcQAkEBdGoiCC0AACELIAVBEGogCC0AARABIAMgCzoAACAGIAVB2ABqIAcQAkEBdGoiCC0AACELIAVB2ABqIAgtAAEQASAAIAs6AAEgBiAFQUBrIAcQAkEBdGoiCC0AACELIAVBQGsgCC0AARABIAIgCzoAASAGIAVBKGogBxACQQF0aiIILQAAIQsgBUEoaiAILQABEAEgBCALOgABIAYgBUEQaiAHEAJBAXRqIggtAAAhCyAFQRBqIAgtAAEQASADIAs6AAEgA0ECaiEDIARBAmohBCACQQJqIQIgAEECaiEAIAkgBUHYAGoQDUVxIAVBQGsQDUVxIAVBKGoQDUVxIAVBEGoQDUVxIQkMAQsLIAQgDUsgAiAMS3INAEFsIQkgACAKSw0BIApBfWohCQNAIAVB2ABqEAQgACAJT3JFBEAgBiAFQdgAaiAHEAJBAXRqIggtAAAhCyAFQdgAaiAILQABEAEgACALOgAAIAYgBUHYAGogBxACQQF0aiIILQAAIQsgBUHYAGogCC0AARABIAAgCzoAASAAQQJqIQAMAQsLA0AgBUHYAGoQBCAAIApPckUEQCAGIAVB2ABqIAcQAkEBdGoiCS0AACEIIAVB2ABqIAktAAEQASAAIAg6AAAgAEEBaiEADAELCwNAIAAgCkkEQCAGIAVB2ABqIAcQAkEBdGoiCS0AACEIIAVB2ABqIAktAAEQASAAIAg6AAAgAEEBaiEADAELCyAMQX1qIQADQCAFQUBrEAQgAiAAT3JFBEAgBiAFQUBrIAcQAkEBdGoiCi0AACEJIAVBQGsgCi0AARABIAIgCToAACAGIAVBQGsgBxACQQF0aiIKLQAAIQkgBUFAayAKLQABEAEgAiAJOgABIAJBAmohAgwBCwsDQCAFQUBrEAQgAiAMT3JFBEAgBiAFQUBrIAcQAkEBdGoiAC0AACEKIAVBQGsgAC0AARABIAIgCjoAACACQQFqIQIMAQsLA0AgAiAMSQRAIAYgBUFAayAHEAJBAXRqIgAtAAAhCiAFQUBrIAAtAAEQASACIAo6AAAgAkEBaiECDAELCyANQX1qIQADQCAFQShqEAQgBCAAT3JFBEAgBiAFQShqIAcQAkEBdGoiAi0AACEKIAVBKGogAi0AARABIAQgCjoAACAGIAVBKGogBxACQQF0aiICLQAAIQogBUEoaiACLQABEAEgBCAKOgABIARBAmohBAwBCwsDQCAFQShqEAQgBCANT3JFBEAgBiAFQShqIAcQAkEBdGoiAC0AACECIAVBKGogAC0AARABIAQgAjoAACAEQQFqIQQMAQsLA0AgBCANSQRAIAYgBUEoaiAHEAJBAXRqIgAtAAAhAiAFQShqIAAtAAEQASAEIAI6AAAgBEEBaiEEDAELCwNAIAVBEGoQBCADIA9PckUEQCAGIAVBEGogBxACQQF0aiIALQAAIQIgBUEQaiAALQABEAEgAyACOgAAIAYgBUEQaiAHEAJBAXRqIgAtAAAhAiAFQRBqIAAtAAEQASADIAI6AAEgA0ECaiEDDAELCwNAIAVBEGoQBCADIA5PckUEQCAGIAVBEGogBxACQQF0aiIALQAAIQIgBUEQaiAALQABEAEgAyACOgAAIANBAWohAwwBCwsDQCADIA5JBEAgBiAFQRBqIAcQAkEBdGoiAC0AACECIAVBEGogAC0AARABIAMgAjoAACADQQFqIQMMAQsLIAFBbCAFQdgAahAKIAVBQGsQCnEgBUEoahAKcSAFQRBqEApxGyEJDAELQWwhCQsgBUHwAGokACAJC8oCAQR/IwBBIGsiBSQAIAUgBBAOIAUtAAIhByAFQQhqIAIgAxAGIgIQA0UEQCAEQQRqIQIgACABaiIDQX1qIQQDQCAFQQhqEAQgACAET3JFBEAgAiAFQQhqIAcQAkEBdGoiBi0AACEIIAVBCGogBi0AARABIAAgCDoAACACIAVBCGogBxACQQF0aiIGLQAAIQggBUEIaiAGLQABEAEgACAIOgABIABBAmohAAwBCwsDQCAFQQhqEAQgACADT3JFBEAgAiAFQQhqIAcQAkEBdGoiBC0AACEGIAVBCGogBC0AARABIAAgBjoAACAAQQFqIQAMAQsLA0AgACADT0UEQCACIAVBCGogBxACQQF0aiIELQAAIQYgBUEIaiAELQABEAEgACAGOgAAIABBAWohAAwBCwsgAUFsIAVBCGoQChshAgsgBUEgaiQAIAILtgMBCX8jAEEQayIGJAAgBkEANgIMIAZBADYCCEFUIQQCQAJAIANBQGsiDCADIAZBCGogBkEMaiABIAIQMSICEAMNACAGQQRqIAAQDiAGKAIMIgcgBi0ABEEBaksNASAAQQRqIQogBkEAOgAFIAYgBzoABiAAIAYoAgQ2AgAgB0EBaiEJQQEhBANAIAQgCUkEQCADIARBAnRqIgEoAgAhACABIAU2AgAgACAEQX9qdCAFaiEFIARBAWohBAwBCwsgB0EBaiEHQQAhBSAGKAIIIQkDQCAFIAlGDQEgAyAFIAxqLQAAIgRBAnRqIgBBASAEdEEBdSILIAAoAgAiAWoiADYCACAHIARrIQhBACEEAkAgC0EDTQRAA0AgBCALRg0CIAogASAEakEBdGoiACAIOgABIAAgBToAACAEQQFqIQQMAAALAAsDQCABIABPDQEgCiABQQF0aiIEIAg6AAEgBCAFOgAAIAQgCDoAAyAEIAU6AAIgBCAIOgAFIAQgBToABCAEIAg6AAcgBCAFOgAGIAFBBGohAQwAAAsACyAFQQFqIQUMAAALAAsgAiEECyAGQRBqJAAgBAutAQECfwJAQYQgKAIAIABHIAAoAgBBAXYiAyABa0F4aiICQXhxQQhHcgR/IAIFIAMQJ0UNASACQQhqC0EQSQ0AIAAgACgCACICQQFxIAAgAWpBD2pBeHEiASAAa0EBdHI2AgAgASAANgIEIAEgASgCAEEBcSAAIAJBAXZqIAFrIgJBAXRyNgIAQYQgIAEgAkH/////B3FqQQRqQYQgKAIAIABGGyABNgIAIAEQJQsLygIBBX8CQAJAAkAgAEEIIABBCEsbZ0EfcyAAaUEBR2oiAUEESSAAIAF2cg0AIAFBAnRB/B5qKAIAIgJFDQADQCACQXhqIgMoAgBBAXZBeGoiBSAATwRAIAIgBUEIIAVBCEsbZ0Efc0ECdEGAH2oiASgCAEYEQCABIAIoAgQ2AgALDAMLIARBHksNASAEQQFqIQQgAigCBCICDQALC0EAIQMgAUEgTw0BA0AgAUECdEGAH2ooAgAiAkUEQCABQR5LIQIgAUEBaiEBIAJFDQEMAwsLIAIgAkF4aiIDKAIAQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgEoAgBGBEAgASACKAIENgIACwsgAigCACIBBEAgASACKAIENgIECyACKAIEIgEEQCABIAIoAgA2AgALIAMgAygCAEEBcjYCACADIAAQNwsgAwvhCwINfwV+IwBB8ABrIgckACAHIAAoAvDhASIINgJcIAEgAmohDSAIIAAoAoDiAWohDwJAAkAgBUUEQCABIQQMAQsgACgCxOABIRAgACgCwOABIREgACgCvOABIQ4gAEEBNgKM4QFBACEIA0AgCEEDRwRAIAcgCEECdCICaiAAIAJqQazQAWooAgA2AkQgCEEBaiEIDAELC0FsIQwgB0EYaiADIAQQBhADDQEgB0EsaiAHQRhqIAAoAgAQEyAHQTRqIAdBGGogACgCCBATIAdBPGogB0EYaiAAKAIEEBMgDUFgaiESIAEhBEEAIQwDQCAHKAIwIAcoAixBA3RqKQIAIhRCEIinQf8BcSEIIAcoAkAgBygCPEEDdGopAgAiFUIQiKdB/wFxIQsgBygCOCAHKAI0QQN0aikCACIWQiCIpyEJIBVCIIghFyAUQiCIpyECAkAgFkIQiKdB/wFxIgNBAk8EQAJAIAZFIANBGUlyRQRAIAkgB0EYaiADQSAgBygCHGsiCiAKIANLGyIKEAUgAyAKayIDdGohCSAHQRhqEAQaIANFDQEgB0EYaiADEAUgCWohCQwBCyAHQRhqIAMQBSAJaiEJIAdBGGoQBBoLIAcpAkQhGCAHIAk2AkQgByAYNwNIDAELAkAgA0UEQCACBEAgBygCRCEJDAMLIAcoAkghCQwBCwJAAkAgB0EYakEBEAUgCSACRWpqIgNBA0YEQCAHKAJEQX9qIgMgA0VqIQkMAQsgA0ECdCAHaigCRCIJIAlFaiEJIANBAUYNAQsgByAHKAJINgJMCwsgByAHKAJENgJIIAcgCTYCRAsgF6chAyALBEAgB0EYaiALEAUgA2ohAwsgCCALakEUTwRAIAdBGGoQBBoLIAgEQCAHQRhqIAgQBSACaiECCyAHQRhqEAQaIAcgB0EYaiAUQhiIp0H/AXEQCCAUp0H//wNxajYCLCAHIAdBGGogFUIYiKdB/wFxEAggFadB//8DcWo2AjwgB0EYahAEGiAHIAdBGGogFkIYiKdB/wFxEAggFqdB//8DcWo2AjQgByACNgJgIAcoAlwhCiAHIAk2AmggByADNgJkAkACQAJAIAQgAiADaiILaiASSw0AIAIgCmoiEyAPSw0AIA0gBGsgC0Egak8NAQsgByAHKQNoNwMQIAcgBykDYDcDCCAEIA0gB0EIaiAHQdwAaiAPIA4gESAQEB4hCwwBCyACIARqIQggBCAKEAcgAkERTwRAIARBEGohAgNAIAIgCkEQaiIKEAcgAkEQaiICIAhJDQALCyAIIAlrIQIgByATNgJcIAkgCCAOa0sEQCAJIAggEWtLBEBBbCELDAILIBAgAiAOayICaiIKIANqIBBNBEAgCCAKIAMQDxoMAgsgCCAKQQAgAmsQDyEIIAcgAiADaiIDNgJkIAggAmshCCAOIQILIAlBEE8EQCADIAhqIQMDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALDAELAkAgCUEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgCUECdCIDQcAeaigCAGoiAhAXIAIgA0HgHmooAgBrIQIgBygCZCEDDAELIAggAhAMCyADQQlJDQAgAyAIaiEDIAhBCGoiCCACQQhqIgJrQQ9MBEADQCAIIAIQDCACQQhqIQIgCEEIaiIIIANJDQAMAgALAAsDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALCyAHQRhqEAQaIAsgDCALEAMiAhshDCAEIAQgC2ogAhshBCAFQX9qIgUNAAsgDBADDQFBbCEMIAdBGGoQBEECSQ0BQQAhCANAIAhBA0cEQCAAIAhBAnQiAmpBrNABaiACIAdqKAJENgIAIAhBAWohCAwBCwsgBygCXCEIC0G6fyEMIA8gCGsiACANIARrSw0AIAQEfyAEIAggABALIABqBUEACyABayEMCyAHQfAAaiQAIAwLkRcCFn8FfiMAQdABayIHJAAgByAAKALw4QEiCDYCvAEgASACaiESIAggACgCgOIBaiETAkACQCAFRQRAIAEhAwwBCyAAKALE4AEhESAAKALA4AEhFSAAKAK84AEhDyAAQQE2AozhAUEAIQgDQCAIQQNHBEAgByAIQQJ0IgJqIAAgAmpBrNABaigCADYCVCAIQQFqIQgMAQsLIAcgETYCZCAHIA82AmAgByABIA9rNgJoQWwhECAHQShqIAMgBBAGEAMNASAFQQQgBUEESBshFyAHQTxqIAdBKGogACgCABATIAdBxABqIAdBKGogACgCCBATIAdBzABqIAdBKGogACgCBBATQQAhBCAHQeAAaiEMIAdB5ABqIQoDQCAHQShqEARBAksgBCAXTnJFBEAgBygCQCAHKAI8QQN0aikCACIdQhCIp0H/AXEhCyAHKAJQIAcoAkxBA3RqKQIAIh5CEIinQf8BcSEJIAcoAkggBygCREEDdGopAgAiH0IgiKchCCAeQiCIISAgHUIgiKchAgJAIB9CEIinQf8BcSIDQQJPBEACQCAGRSADQRlJckUEQCAIIAdBKGogA0EgIAcoAixrIg0gDSADSxsiDRAFIAMgDWsiA3RqIQggB0EoahAEGiADRQ0BIAdBKGogAxAFIAhqIQgMAQsgB0EoaiADEAUgCGohCCAHQShqEAQaCyAHKQJUISEgByAINgJUIAcgITcDWAwBCwJAIANFBEAgAgRAIAcoAlQhCAwDCyAHKAJYIQgMAQsCQAJAIAdBKGpBARAFIAggAkVqaiIDQQNGBEAgBygCVEF/aiIDIANFaiEIDAELIANBAnQgB2ooAlQiCCAIRWohCCADQQFGDQELIAcgBygCWDYCXAsLIAcgBygCVDYCWCAHIAg2AlQLICCnIQMgCQRAIAdBKGogCRAFIANqIQMLIAkgC2pBFE8EQCAHQShqEAQaCyALBEAgB0EoaiALEAUgAmohAgsgB0EoahAEGiAHIAcoAmggAmoiCSADajYCaCAKIAwgCCAJSxsoAgAhDSAHIAdBKGogHUIYiKdB/wFxEAggHadB//8DcWo2AjwgByAHQShqIB5CGIinQf8BcRAIIB6nQf//A3FqNgJMIAdBKGoQBBogB0EoaiAfQhiIp0H/AXEQCCEOIAdB8ABqIARBBHRqIgsgCSANaiAIazYCDCALIAg2AgggCyADNgIEIAsgAjYCACAHIA4gH6dB//8DcWo2AkQgBEEBaiEEDAELCyAEIBdIDQEgEkFgaiEYIAdB4ABqIRogB0HkAGohGyABIQMDQCAHQShqEARBAksgBCAFTnJFBEAgBygCQCAHKAI8QQN0aikCACIdQhCIp0H/AXEhCyAHKAJQIAcoAkxBA3RqKQIAIh5CEIinQf8BcSEIIAcoAkggBygCREEDdGopAgAiH0IgiKchCSAeQiCIISAgHUIgiKchDAJAIB9CEIinQf8BcSICQQJPBEACQCAGRSACQRlJckUEQCAJIAdBKGogAkEgIAcoAixrIgogCiACSxsiChAFIAIgCmsiAnRqIQkgB0EoahAEGiACRQ0BIAdBKGogAhAFIAlqIQkMAQsgB0EoaiACEAUgCWohCSAHQShqEAQaCyAHKQJUISEgByAJNgJUIAcgITcDWAwBCwJAIAJFBEAgDARAIAcoAlQhCQwDCyAHKAJYIQkMAQsCQAJAIAdBKGpBARAFIAkgDEVqaiICQQNGBEAgBygCVEF/aiICIAJFaiEJDAELIAJBAnQgB2ooAlQiCSAJRWohCSACQQFGDQELIAcgBygCWDYCXAsLIAcgBygCVDYCWCAHIAk2AlQLICCnIRQgCARAIAdBKGogCBAFIBRqIRQLIAggC2pBFE8EQCAHQShqEAQaCyALBEAgB0EoaiALEAUgDGohDAsgB0EoahAEGiAHIAcoAmggDGoiGSAUajYCaCAbIBogCSAZSxsoAgAhHCAHIAdBKGogHUIYiKdB/wFxEAggHadB//8DcWo2AjwgByAHQShqIB5CGIinQf8BcRAIIB6nQf//A3FqNgJMIAdBKGoQBBogByAHQShqIB9CGIinQf8BcRAIIB+nQf//A3FqNgJEIAcgB0HwAGogBEEDcUEEdGoiDSkDCCIdNwPIASAHIA0pAwAiHjcDwAECQAJAAkAgBygCvAEiDiAepyICaiIWIBNLDQAgAyAHKALEASIKIAJqIgtqIBhLDQAgEiADayALQSBqTw0BCyAHIAcpA8gBNwMQIAcgBykDwAE3AwggAyASIAdBCGogB0G8AWogEyAPIBUgERAeIQsMAQsgAiADaiEIIAMgDhAHIAJBEU8EQCADQRBqIQIDQCACIA5BEGoiDhAHIAJBEGoiAiAISQ0ACwsgCCAdpyIOayECIAcgFjYCvAEgDiAIIA9rSwRAIA4gCCAVa0sEQEFsIQsMAgsgESACIA9rIgJqIhYgCmogEU0EQCAIIBYgChAPGgwCCyAIIBZBACACaxAPIQggByACIApqIgo2AsQBIAggAmshCCAPIQILIA5BEE8EQCAIIApqIQoDQCAIIAIQByACQRBqIQIgCEEQaiIIIApJDQALDAELAkAgDkEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgDkECdCIKQcAeaigCAGoiAhAXIAIgCkHgHmooAgBrIQIgBygCxAEhCgwBCyAIIAIQDAsgCkEJSQ0AIAggCmohCiAIQQhqIgggAkEIaiICa0EPTARAA0AgCCACEAwgAkEIaiECIAhBCGoiCCAKSQ0ADAIACwALA0AgCCACEAcgAkEQaiECIAhBEGoiCCAKSQ0ACwsgCxADBEAgCyEQDAQFIA0gDDYCACANIBkgHGogCWs2AgwgDSAJNgIIIA0gFDYCBCAEQQFqIQQgAyALaiEDDAILAAsLIAQgBUgNASAEIBdrIQtBACEEA0AgCyAFSARAIAcgB0HwAGogC0EDcUEEdGoiAikDCCIdNwPIASAHIAIpAwAiHjcDwAECQAJAAkAgBygCvAEiDCAepyICaiIKIBNLDQAgAyAHKALEASIJIAJqIhBqIBhLDQAgEiADayAQQSBqTw0BCyAHIAcpA8gBNwMgIAcgBykDwAE3AxggAyASIAdBGGogB0G8AWogEyAPIBUgERAeIRAMAQsgAiADaiEIIAMgDBAHIAJBEU8EQCADQRBqIQIDQCACIAxBEGoiDBAHIAJBEGoiAiAISQ0ACwsgCCAdpyIGayECIAcgCjYCvAEgBiAIIA9rSwRAIAYgCCAVa0sEQEFsIRAMAgsgESACIA9rIgJqIgwgCWogEU0EQCAIIAwgCRAPGgwCCyAIIAxBACACaxAPIQggByACIAlqIgk2AsQBIAggAmshCCAPIQILIAZBEE8EQCAIIAlqIQYDQCAIIAIQByACQRBqIQIgCEEQaiIIIAZJDQALDAELAkAgBkEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgBkECdCIGQcAeaigCAGoiAhAXIAIgBkHgHmooAgBrIQIgBygCxAEhCQwBCyAIIAIQDAsgCUEJSQ0AIAggCWohBiAIQQhqIgggAkEIaiICa0EPTARAA0AgCCACEAwgAkEIaiECIAhBCGoiCCAGSQ0ADAIACwALA0AgCCACEAcgAkEQaiECIAhBEGoiCCAGSQ0ACwsgEBADDQMgC0EBaiELIAMgEGohAwwBCwsDQCAEQQNHBEAgACAEQQJ0IgJqQazQAWogAiAHaigCVDYCACAEQQFqIQQMAQsLIAcoArwBIQgLQbp/IRAgEyAIayIAIBIgA2tLDQAgAwR/IAMgCCAAEAsgAGoFQQALIAFrIRALIAdB0AFqJAAgEAslACAAQgA3AgAgAEEAOwEIIABBADoACyAAIAE2AgwgACACOgAKC7QFAQN/IwBBMGsiBCQAIABB/wFqIgVBfWohBgJAIAMvAQIEQCAEQRhqIAEgAhAGIgIQAw0BIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahASOgAAIAMgBEEIaiAEQRhqEBI6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0FIAEgBEEQaiAEQRhqEBI6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBSABIARBCGogBEEYahASOgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEjoAACABIAJqIABrIQIMAwsgAyAEQRBqIARBGGoQEjoAAiADIARBCGogBEEYahASOgADIANBBGohAwwAAAsACyAEQRhqIAEgAhAGIgIQAw0AIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahAROgAAIAMgBEEIaiAEQRhqEBE6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0EIAEgBEEQaiAEQRhqEBE6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBCABIARBCGogBEEYahAROgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEToAACABIAJqIABrIQIMAgsgAyAEQRBqIARBGGoQEToAAiADIARBCGogBEEYahAROgADIANBBGohAwwAAAsACyAEQTBqJAAgAgtpAQF/An8CQAJAIAJBB00NACABKAAAQbfIwuF+Rw0AIAAgASgABDYCmOIBQWIgAEEQaiABIAIQPiIDEAMNAhogAEKBgICAEDcDiOEBIAAgASADaiACIANrECoMAQsgACABIAIQKgtBAAsLrQMBBn8jAEGAAWsiAyQAQWIhCAJAIAJBCUkNACAAQZjQAGogAUEIaiIEIAJBeGogAEGY0AAQMyIFEAMiBg0AIANBHzYCfCADIANB/ABqIANB+ABqIAQgBCAFaiAGGyIEIAEgAmoiAiAEaxAVIgUQAw0AIAMoAnwiBkEfSw0AIAMoAngiB0EJTw0AIABBiCBqIAMgBkGAC0GADCAHEBggA0E0NgJ8IAMgA0H8AGogA0H4AGogBCAFaiIEIAIgBGsQFSIFEAMNACADKAJ8IgZBNEsNACADKAJ4IgdBCk8NACAAQZAwaiADIAZBgA1B4A4gBxAYIANBIzYCfCADIANB/ABqIANB+ABqIAQgBWoiBCACIARrEBUiBRADDQAgAygCfCIGQSNLDQAgAygCeCIHQQpPDQAgACADIAZBwBBB0BEgBxAYIAQgBWoiBEEMaiIFIAJLDQAgAiAFayEFQQAhAgNAIAJBA0cEQCAEKAAAIgZBf2ogBU8NAiAAIAJBAnRqQZzQAWogBjYCACACQQFqIQIgBEEEaiEEDAELCyAEIAFrIQgLIANBgAFqJAAgCAtGAQN/IABBCGohAyAAKAIEIQJBACEAA0AgACACdkUEQCABIAMgAEEDdGotAAJBFktqIQEgAEEBaiEADAELCyABQQggAmt0C4YDAQV/Qbh/IQcCQCADRQ0AIAItAAAiBEUEQCABQQA2AgBBAUG4fyADQQFGGw8LAn8gAkEBaiIFIARBGHRBGHUiBkF/Sg0AGiAGQX9GBEAgA0EDSA0CIAUvAABBgP4BaiEEIAJBA2oMAQsgA0ECSA0BIAItAAEgBEEIdHJBgIB+aiEEIAJBAmoLIQUgASAENgIAIAVBAWoiASACIANqIgNLDQBBbCEHIABBEGogACAFLQAAIgVBBnZBI0EJIAEgAyABa0HAEEHQEUHwEiAAKAKM4QEgACgCnOIBIAQQHyIGEAMiCA0AIABBmCBqIABBCGogBUEEdkEDcUEfQQggASABIAZqIAgbIgEgAyABa0GAC0GADEGAFyAAKAKM4QEgACgCnOIBIAQQHyIGEAMiCA0AIABBoDBqIABBBGogBUECdkEDcUE0QQkgASABIAZqIAgbIgEgAyABa0GADUHgDkGQGSAAKAKM4QEgACgCnOIBIAQQHyIAEAMNACAAIAFqIAJrIQcLIAcLrQMBCn8jAEGABGsiCCQAAn9BUiACQf8BSw0AGkFUIANBDEsNABogAkEBaiELIABBBGohCUGAgAQgA0F/anRBEHUhCkEAIQJBASEEQQEgA3QiB0F/aiIMIQUDQCACIAtGRQRAAkAgASACQQF0Ig1qLwEAIgZB//8DRgRAIAkgBUECdGogAjoAAiAFQX9qIQVBASEGDAELIARBACAKIAZBEHRBEHVKGyEECyAIIA1qIAY7AQAgAkEBaiECDAELCyAAIAQ7AQIgACADOwEAIAdBA3YgB0EBdmpBA2ohBkEAIQRBACECA0AgBCALRkUEQCABIARBAXRqLgEAIQpBACEAA0AgACAKTkUEQCAJIAJBAnRqIAQ6AAIDQCACIAZqIAxxIgIgBUsNAAsgAEEBaiEADAELCyAEQQFqIQQMAQsLQX8gAg0AGkEAIQIDfyACIAdGBH9BAAUgCCAJIAJBAnRqIgAtAAJBAXRqIgEgAS8BACIBQQFqOwEAIAAgAyABEBRrIgU6AAMgACABIAVB/wFxdCAHazsBACACQQFqIQIMAQsLCyEFIAhBgARqJAAgBQvjBgEIf0FsIQcCQCACQQNJDQACQAJAAkACQCABLQAAIgNBA3EiCUEBaw4DAwEAAgsgACgCiOEBDQBBYg8LIAJBBUkNAkEDIQYgASgAACEFAn8CQAJAIANBAnZBA3EiCEF+aiIEQQFNBEAgBEEBaw0BDAILIAVBDnZB/wdxIQQgBUEEdkH/B3EhAyAIRQwCCyAFQRJ2IQRBBCEGIAVBBHZB//8AcSEDQQAMAQsgBUEEdkH//w9xIgNBgIAISw0DIAEtAARBCnQgBUEWdnIhBEEFIQZBAAshBSAEIAZqIgogAksNAgJAIANBgQZJDQAgACgCnOIBRQ0AQQAhAgNAIAJBg4ABSw0BIAJBQGshAgwAAAsACwJ/IAlBA0YEQCABIAZqIQEgAEHw4gFqIQIgACgCDCEGIAUEQCACIAMgASAEIAYQXwwCCyACIAMgASAEIAYQXQwBCyAAQbjQAWohAiABIAZqIQEgAEHw4gFqIQYgAEGo0ABqIQggBQRAIAggBiADIAEgBCACEF4MAQsgCCAGIAMgASAEIAIQXAsQAw0CIAAgAzYCgOIBIABBATYCiOEBIAAgAEHw4gFqNgLw4QEgCUECRgRAIAAgAEGo0ABqNgIMCyAAIANqIgBBiOMBakIANwAAIABBgOMBakIANwAAIABB+OIBakIANwAAIABB8OIBakIANwAAIAoPCwJ/AkACQAJAIANBAnZBA3FBf2oiBEECSw0AIARBAWsOAgACAQtBASEEIANBA3YMAgtBAiEEIAEvAABBBHYMAQtBAyEEIAEQIUEEdgsiAyAEaiIFQSBqIAJLBEAgBSACSw0CIABB8OIBaiABIARqIAMQCyEBIAAgAzYCgOIBIAAgATYC8OEBIAEgA2oiAEIANwAYIABCADcAECAAQgA3AAggAEIANwAAIAUPCyAAIAM2AoDiASAAIAEgBGo2AvDhASAFDwsCfwJAAkACQCADQQJ2QQNxQX9qIgRBAksNACAEQQFrDgIAAgELQQEhByADQQN2DAILQQIhByABLwAAQQR2DAELIAJBBEkgARAhIgJBj4CAAUtyDQFBAyEHIAJBBHYLIQIgAEHw4gFqIAEgB2otAAAgAkEgahAQIQEgACACNgKA4gEgACABNgLw4QEgB0EBaiEHCyAHC0sAIABC+erQ0OfJoeThADcDICAAQgA3AxggAELP1tO+0ser2UI3AxAgAELW64Lu6v2J9eAANwMIIABCADcDACAAQShqQQBBKBAQGgviAgICfwV+IABBKGoiASAAKAJIaiECAn4gACkDACIDQiBaBEAgACkDECIEQgeJIAApAwgiBUIBiXwgACkDGCIGQgyJfCAAKQMgIgdCEol8IAUQGSAEEBkgBhAZIAcQGQwBCyAAKQMYQsXP2bLx5brqJ3wLIAN8IQMDQCABQQhqIgAgAk0EQEIAIAEpAAAQCSADhUIbiUKHla+vmLbem55/fkLj3MqV/M7y9YV/fCEDIAAhAQwBCwsCQCABQQRqIgAgAksEQCABIQAMAQsgASgAAK1Ch5Wvr5i23puef34gA4VCF4lCz9bTvtLHq9lCfkL5893xmfaZqxZ8IQMLA0AgACACSQRAIAAxAABCxc/ZsvHluuonfiADhUILiUKHla+vmLbem55/fiEDIABBAWohAAwBCwsgA0IhiCADhULP1tO+0ser2UJ+IgNCHYggA4VC+fPd8Zn2masWfiIDQiCIIAOFC+8CAgJ/BH4gACAAKQMAIAKtfDcDAAJAAkAgACgCSCIDIAJqIgRBH00EQCABRQ0BIAAgA2pBKGogASACECAgACgCSCACaiEEDAELIAEgAmohAgJ/IAMEQCAAQShqIgQgA2ogAUEgIANrECAgACAAKQMIIAQpAAAQCTcDCCAAIAApAxAgACkAMBAJNwMQIAAgACkDGCAAKQA4EAk3AxggACAAKQMgIABBQGspAAAQCTcDICAAKAJIIQMgAEEANgJIIAEgA2tBIGohAQsgAUEgaiACTQsEQCACQWBqIQMgACkDICEFIAApAxghBiAAKQMQIQcgACkDCCEIA0AgCCABKQAAEAkhCCAHIAEpAAgQCSEHIAYgASkAEBAJIQYgBSABKQAYEAkhBSABQSBqIgEgA00NAAsgACAFNwMgIAAgBjcDGCAAIAc3AxAgACAINwMICyABIAJPDQEgAEEoaiABIAIgAWsiBBAgCyAAIAQ2AkgLCy8BAX8gAEUEQEG2f0EAIAMbDwtBun8hBCADIAFNBH8gACACIAMQEBogAwVBun8LCy8BAX8gAEUEQEG2f0EAIAMbDwtBun8hBCADIAFNBH8gACACIAMQCxogAwVBun8LC6gCAQZ/IwBBEGsiByQAIABB2OABaikDAEKAgIAQViEIQbh/IQUCQCAEQf//B0sNACAAIAMgBBBCIgUQAyIGDQAgACgCnOIBIQkgACAHQQxqIAMgAyAFaiAGGyIKIARBACAFIAYbayIGEEAiAxADBEAgAyEFDAELIAcoAgwhBCABRQRAQbp/IQUgBEEASg0BCyAGIANrIQUgAyAKaiEDAkAgCQRAIABBADYCnOIBDAELAkACQAJAIARBBUgNACAAQdjgAWopAwBCgICACFgNAAwBCyAAQQA2ApziAQwBCyAAKAIIED8hBiAAQQA2ApziASAGQRRPDQELIAAgASACIAMgBSAEIAgQOSEFDAELIAAgASACIAMgBSAEIAgQOiEFCyAHQRBqJAAgBQtnACAAQdDgAWogASACIAAoAuzhARAuIgEQAwRAIAEPC0G4fyECAkAgAQ0AIABB7OABaigCACIBBEBBYCECIAAoApjiASABRw0BC0EAIQIgAEHw4AFqKAIARQ0AIABBkOEBahBDCyACCycBAX8QVyIERQRAQUAPCyAEIAAgASACIAMgBBBLEE8hACAEEFYgAAs/AQF/AkACQAJAIAAoAqDiAUEBaiIBQQJLDQAgAUEBaw4CAAECCyAAEDBBAA8LIABBADYCoOIBCyAAKAKU4gELvAMCB38BfiMAQRBrIgkkAEG4fyEGAkAgBCgCACIIQQVBCSAAKALs4QEiBRtJDQAgAygCACIHQQFBBSAFGyAFEC8iBRADBEAgBSEGDAELIAggBUEDakkNACAAIAcgBRBJIgYQAw0AIAEgAmohCiAAQZDhAWohCyAIIAVrIQIgBSAHaiEHIAEhBQNAIAcgAiAJECwiBhADDQEgAkF9aiICIAZJBEBBuH8hBgwCCyAJKAIAIghBAksEQEFsIQYMAgsgB0EDaiEHAn8CQAJAAkAgCEEBaw4CAgABCyAAIAUgCiAFayAHIAYQSAwCCyAFIAogBWsgByAGEEcMAQsgBSAKIAVrIActAAAgCSgCCBBGCyIIEAMEQCAIIQYMAgsgACgC8OABBEAgCyAFIAgQRQsgAiAGayECIAYgB2ohByAFIAhqIQUgCSgCBEUNAAsgACkD0OABIgxCf1IEQEFsIQYgDCAFIAFrrFINAQsgACgC8OABBEBBaiEGIAJBBEkNASALEEQhDCAHKAAAIAynRw0BIAdBBGohByACQXxqIQILIAMgBzYCACAEIAI2AgAgBSABayEGCyAJQRBqJAAgBgsuACAAECsCf0EAQQAQAw0AGiABRSACRXJFBEBBYiAAIAEgAhA9EAMNARoLQQALCzcAIAEEQCAAIAAoAsTgASABKAIEIAEoAghqRzYCnOIBCyAAECtBABADIAFFckUEQCAAIAEQWwsL0QIBB38jAEEQayIGJAAgBiAENgIIIAYgAzYCDCAFBEAgBSgCBCEKIAUoAgghCQsgASEIAkACQANAIAAoAuzhARAWIQsCQANAIAQgC0kNASADKAAAQXBxQdDUtMIBRgRAIAMgBBAiIgcQAw0EIAQgB2shBCADIAdqIQMMAQsLIAYgAzYCDCAGIAQ2AggCQCAFBEAgACAFEE5BACEHQQAQA0UNAQwFCyAAIAogCRBNIgcQAw0ECyAAIAgQUCAMQQFHQQAgACAIIAIgBkEMaiAGQQhqEEwiByIDa0EAIAMQAxtBCkdyRQRAQbh/IQcMBAsgBxADDQMgAiAHayECIAcgCGohCEEBIQwgBigCDCEDIAYoAgghBAwBCwsgBiADNgIMIAYgBDYCCEG4fyEHIAQNASAIIAFrIQcMAQsgBiADNgIMIAYgBDYCCAsgBkEQaiQAIAcLRgECfyABIAAoArjgASICRwRAIAAgAjYCxOABIAAgATYCuOABIAAoArzgASEDIAAgATYCvOABIAAgASADIAJrajYCwOABCwutAgIEfwF+IwBBQGoiBCQAAkACQCACQQhJDQAgASgAAEFwcUHQ1LTCAUcNACABIAIQIiEBIABCADcDCCAAQQA2AgQgACABNgIADAELIARBGGogASACEC0iAxADBEAgACADEBoMAQsgAwRAIABBuH8QGgwBCyACIAQoAjAiA2shAiABIANqIQMDQAJAIAAgAyACIARBCGoQLCIFEAMEfyAFBSACIAVBA2oiBU8NAUG4fwsQGgwCCyAGQQFqIQYgAiAFayECIAMgBWohAyAEKAIMRQ0ACyAEKAI4BEAgAkEDTQRAIABBuH8QGgwCCyADQQRqIQMLIAQoAighAiAEKQMYIQcgAEEANgIEIAAgAyABazYCACAAIAIgBmytIAcgB0J/URs3AwgLIARBQGskAAslAQF/IwBBEGsiAiQAIAIgACABEFEgAigCACEAIAJBEGokACAAC30BBH8jAEGQBGsiBCQAIARB/wE2AggCQCAEQRBqIARBCGogBEEMaiABIAIQFSIGEAMEQCAGIQUMAQtBVCEFIAQoAgwiB0EGSw0AIAMgBEEQaiAEKAIIIAcQQSIFEAMNACAAIAEgBmogAiAGayADEDwhBQsgBEGQBGokACAFC4cBAgJ/An5BABAWIQMCQANAIAEgA08EQAJAIAAoAABBcHFB0NS0wgFGBEAgACABECIiAhADRQ0BQn4PCyAAIAEQVSIEQn1WDQMgBCAFfCIFIARUIQJCfiEEIAINAyAAIAEQUiICEAMNAwsgASACayEBIAAgAmohAAwBCwtCfiAFIAEbIQQLIAQLPwIBfwF+IwBBMGsiAiQAAn5CfiACQQhqIAAgARAtDQAaQgAgAigCHEEBRg0AGiACKQMICyEDIAJBMGokACADC40BAQJ/IwBBMGsiASQAAkAgAEUNACAAKAKI4gENACABIABB/OEBaigCADYCKCABIAApAvThATcDICAAEDAgACgCqOIBIQIgASABKAIoNgIYIAEgASkDIDcDECACIAFBEGoQGyAAQQA2AqjiASABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALKgECfyMAQRBrIgAkACAAQQA2AgggAEIANwMAIAAQWCEBIABBEGokACABC4cBAQN/IwBBEGsiAiQAAkAgACgCAEUgACgCBEVzDQAgAiAAKAIINgIIIAIgACkCADcDAAJ/IAIoAgAiAQRAIAIoAghBqOMJIAERBQAMAQtBqOMJECgLIgFFDQAgASAAKQIANwL04QEgAUH84QFqIAAoAgg2AgAgARBZIAEhAwsgAkEQaiQAIAMLywEBAn8jAEEgayIBJAAgAEGBgIDAADYCtOIBIABBADYCiOIBIABBADYC7OEBIABCADcDkOIBIABBADYCpOMJIABBADYC3OIBIABCADcCzOIBIABBADYCvOIBIABBADYCxOABIABCADcCnOIBIABBpOIBakIANwIAIABBrOIBakEANgIAIAFCADcCECABQgA3AhggASABKQMYNwMIIAEgASkDEDcDACABKAIIQQh2QQFxIQIgAEEANgLg4gEgACACNgKM4gEgAUEgaiQAC3YBA38jAEEwayIBJAAgAARAIAEgAEHE0AFqIgIoAgA2AiggASAAKQK80AE3AyAgACgCACEDIAEgAigCADYCGCABIAApArzQATcDECADIAFBEGoQGyABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALzAEBAX8gACABKAK00AE2ApjiASAAIAEoAgQiAjYCwOABIAAgAjYCvOABIAAgAiABKAIIaiICNgK44AEgACACNgLE4AEgASgCuNABBEAgAEKBgICAEDcDiOEBIAAgAUGk0ABqNgIMIAAgAUGUIGo2AgggACABQZwwajYCBCAAIAFBDGo2AgAgAEGs0AFqIAFBqNABaigCADYCACAAQbDQAWogAUGs0AFqKAIANgIAIABBtNABaiABQbDQAWooAgA2AgAPCyAAQgA3A4jhAQs7ACACRQRAQbp/DwsgBEUEQEFsDwsgAiAEEGAEQCAAIAEgAiADIAQgBRBhDwsgACABIAIgAyAEIAUQZQtGAQF/IwBBEGsiBSQAIAVBCGogBBAOAn8gBS0ACQRAIAAgASACIAMgBBAyDAELIAAgASACIAMgBBA0CyEAIAVBEGokACAACzQAIAAgAyAEIAUQNiIFEAMEQCAFDwsgBSAESQR/IAEgAiADIAVqIAQgBWsgABA1BUG4fwsLRgEBfyMAQRBrIgUkACAFQQhqIAQQDgJ/IAUtAAkEQCAAIAEgAiADIAQQYgwBCyAAIAEgAiADIAQQNQshACAFQRBqJAAgAAtZAQF/QQ8hAiABIABJBEAgAUEEdCAAbiECCyAAQQh2IgEgAkEYbCIAQYwIaigCAGwgAEGICGooAgBqIgJBA3YgAmogAEGACGooAgAgAEGECGooAgAgAWxqSQs3ACAAIAMgBCAFQYAQEDMiBRADBEAgBQ8LIAUgBEkEfyABIAIgAyAFaiAEIAVrIAAQMgVBuH8LC78DAQN/IwBBIGsiBSQAIAVBCGogAiADEAYiAhADRQRAIAAgAWoiB0F9aiEGIAUgBBAOIARBBGohAiAFLQACIQMDQEEAIAAgBkkgBUEIahAEGwRAIAAgAiAFQQhqIAMQAkECdGoiBC8BADsAACAFQQhqIAQtAAIQASAAIAQtAANqIgQgAiAFQQhqIAMQAkECdGoiAC8BADsAACAFQQhqIAAtAAIQASAEIAAtAANqIQAMAQUgB0F+aiEEA0AgBUEIahAEIAAgBEtyRQRAIAAgAiAFQQhqIAMQAkECdGoiBi8BADsAACAFQQhqIAYtAAIQASAAIAYtAANqIQAMAQsLA0AgACAES0UEQCAAIAIgBUEIaiADEAJBAnRqIgYvAQA7AAAgBUEIaiAGLQACEAEgACAGLQADaiEADAELCwJAIAAgB08NACAAIAIgBUEIaiADEAIiA0ECdGoiAC0AADoAACAALQADQQFGBEAgBUEIaiAALQACEAEMAQsgBSgCDEEfSw0AIAVBCGogAiADQQJ0ai0AAhABIAUoAgxBIUkNACAFQSA2AgwLIAFBbCAFQQhqEAobIQILCwsgBUEgaiQAIAILkgIBBH8jAEFAaiIJJAAgCSADQTQQCyEDAkAgBEECSA0AIAMgBEECdGooAgAhCSADQTxqIAgQIyADQQE6AD8gAyACOgA+QQAhBCADKAI8IQoDQCAEIAlGDQEgACAEQQJ0aiAKNgEAIARBAWohBAwAAAsAC0EAIQkDQCAGIAlGRQRAIAMgBSAJQQF0aiIKLQABIgtBAnRqIgwoAgAhBCADQTxqIAotAABBCHQgCGpB//8DcRAjIANBAjoAPyADIAcgC2siCiACajoAPiAEQQEgASAKa3RqIQogAygCPCELA0AgACAEQQJ0aiALNgEAIARBAWoiBCAKSQ0ACyAMIAo2AgAgCUEBaiEJDAELCyADQUBrJAALowIBCX8jAEHQAGsiCSQAIAlBEGogBUE0EAsaIAcgBmshDyAHIAFrIRADQAJAIAMgCkcEQEEBIAEgByACIApBAXRqIgYtAAEiDGsiCGsiC3QhDSAGLQAAIQ4gCUEQaiAMQQJ0aiIMKAIAIQYgCyAPTwRAIAAgBkECdGogCyAIIAUgCEE0bGogCCAQaiIIQQEgCEEBShsiCCACIAQgCEECdGooAgAiCEEBdGogAyAIayAHIA4QYyAGIA1qIQgMAgsgCUEMaiAOECMgCUEBOgAPIAkgCDoADiAGIA1qIQggCSgCDCELA0AgBiAITw0CIAAgBkECdGogCzYBACAGQQFqIQYMAAALAAsgCUHQAGokAA8LIAwgCDYCACAKQQFqIQoMAAALAAs0ACAAIAMgBCAFEDYiBRADBEAgBQ8LIAUgBEkEfyABIAIgAyAFaiAEIAVrIAAQNAVBuH8LCyMAIAA/AEEQdGtB//8DakEQdkAAQX9GBEBBAA8LQQAQAEEBCzsBAX8gAgRAA0AgACABIAJBgCAgAkGAIEkbIgMQCyEAIAFBgCBqIQEgAEGAIGohACACIANrIgINAAsLCwYAIAAQAwsLqBUJAEGICAsNAQAAAAEAAAACAAAAAgBBoAgLswYBAAAAAQAAAAIAAAACAAAAJgAAAIIAAAAhBQAASgAAAGcIAAAmAAAAwAEAAIAAAABJBQAASgAAAL4IAAApAAAALAIAAIAAAABJBQAASgAAAL4IAAAvAAAAygIAAIAAAACKBQAASgAAAIQJAAA1AAAAcwMAAIAAAACdBQAASgAAAKAJAAA9AAAAgQMAAIAAAADrBQAASwAAAD4KAABEAAAAngMAAIAAAABNBgAASwAAAKoKAABLAAAAswMAAIAAAADBBgAATQAAAB8NAABNAAAAUwQAAIAAAAAjCAAAUQAAAKYPAABUAAAAmQQAAIAAAABLCQAAVwAAALESAABYAAAA2gQAAIAAAABvCQAAXQAAACMUAABUAAAARQUAAIAAAABUCgAAagAAAIwUAABqAAAArwUAAIAAAAB2CQAAfAAAAE4QAAB8AAAA0gIAAIAAAABjBwAAkQAAAJAHAACSAAAAAAAAAAEAAAABAAAABQAAAA0AAAAdAAAAPQAAAH0AAAD9AAAA/QEAAP0DAAD9BwAA/Q8AAP0fAAD9PwAA/X8AAP3/AAD9/wEA/f8DAP3/BwD9/w8A/f8fAP3/PwD9/38A/f//AP3//wH9//8D/f//B/3//w/9//8f/f//P/3//38AAAAAAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABEAAAASAAAAEwAAABQAAAAVAAAAFgAAABcAAAAYAAAAGQAAABoAAAAbAAAAHAAAAB0AAAAeAAAAHwAAAAMAAAAEAAAABQAAAAYAAAAHAAAACAAAAAkAAAAKAAAACwAAAAwAAAANAAAADgAAAA8AAAAQAAAAEQAAABIAAAATAAAAFAAAABUAAAAWAAAAFwAAABgAAAAZAAAAGgAAABsAAAAcAAAAHQAAAB4AAAAfAAAAIAAAACEAAAAiAAAAIwAAACUAAAAnAAAAKQAAACsAAAAvAAAAMwAAADsAAABDAAAAUwAAAGMAAACDAAAAAwEAAAMCAAADBAAAAwgAAAMQAAADIAAAA0AAAAOAAAADAAEAQeAPC1EBAAAAAQAAAAEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAEAAAABQAAAAcAAAAIAAAACQAAAAoAAAALAAAADAAAAA0AAAAOAAAADwAAABAAQcQQC4sBAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABIAAAAUAAAAFgAAABgAAAAcAAAAIAAAACgAAAAwAAAAQAAAAIAAAAAAAQAAAAIAAAAEAAAACAAAABAAAAAgAAAAQAAAAIAAAAAAAQBBkBIL5gQBAAAAAQAAAAEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAAAEAAAAEAAAACAAAAAAAAAABAAEBBgAAAAAAAAQAAAAAEAAABAAAAAAgAAAFAQAAAAAAAAUDAAAAAAAABQQAAAAAAAAFBgAAAAAAAAUHAAAAAAAABQkAAAAAAAAFCgAAAAAAAAUMAAAAAAAABg4AAAAAAAEFEAAAAAAAAQUUAAAAAAABBRYAAAAAAAIFHAAAAAAAAwUgAAAAAAAEBTAAAAAgAAYFQAAAAAAABwWAAAAAAAAIBgABAAAAAAoGAAQAAAAADAYAEAAAIAAABAAAAAAAAAAEAQAAAAAAAAUCAAAAIAAABQQAAAAAAAAFBQAAACAAAAUHAAAAAAAABQgAAAAgAAAFCgAAAAAAAAULAAAAAAAABg0AAAAgAAEFEAAAAAAAAQUSAAAAIAABBRYAAAAAAAIFGAAAACAAAwUgAAAAAAADBSgAAAAAAAYEQAAAABAABgRAAAAAIAAHBYAAAAAAAAkGAAIAAAAACwYACAAAMAAABAAAAAAQAAAEAQAAACAAAAUCAAAAIAAABQMAAAAgAAAFBQAAACAAAAUGAAAAIAAABQgAAAAgAAAFCQAAACAAAAULAAAAIAAABQwAAAAAAAAGDwAAACAAAQUSAAAAIAABBRQAAAAgAAIFGAAAACAAAgUcAAAAIAADBSgAAAAgAAQFMAAAAAAAEAYAAAEAAAAPBgCAAAAAAA4GAEAAAAAADQYAIABBgBcLhwIBAAEBBQAAAAAAAAUAAAAAAAAGBD0AAAAAAAkF/QEAAAAADwX9fwAAAAAVBf3/HwAAAAMFBQAAAAAABwR9AAAAAAAMBf0PAAAAABIF/f8DAAAAFwX9/38AAAAFBR0AAAAAAAgE/QAAAAAADgX9PwAAAAAUBf3/DwAAAAIFAQAAABAABwR9AAAAAAALBf0HAAAAABEF/f8BAAAAFgX9/z8AAAAEBQ0AAAAQAAgE/QAAAAAADQX9HwAAAAATBf3/BwAAAAEFAQAAABAABgQ9AAAAAAAKBf0DAAAAABAF/f8AAAAAHAX9//8PAAAbBf3//wcAABoF/f//AwAAGQX9//8BAAAYBf3//wBBkBkLhgQBAAEBBgAAAAAAAAYDAAAAAAAABAQAAAAgAAAFBQAAAAAAAAUGAAAAAAAABQgAAAAAAAAFCQAAAAAAAAULAAAAAAAABg0AAAAAAAAGEAAAAAAAAAYTAAAAAAAABhYAAAAAAAAGGQAAAAAAAAYcAAAAAAAABh8AAAAAAAAGIgAAAAAAAQYlAAAAAAABBikAAAAAAAIGLwAAAAAAAwY7AAAAAAAEBlMAAAAAAAcGgwAAAAAACQYDAgAAEAAABAQAAAAAAAAEBQAAACAAAAUGAAAAAAAABQcAAAAgAAAFCQAAAAAAAAUKAAAAAAAABgwAAAAAAAAGDwAAAAAAAAYSAAAAAAAABhUAAAAAAAAGGAAAAAAAAAYbAAAAAAAABh4AAAAAAAAGIQAAAAAAAQYjAAAAAAABBicAAAAAAAIGKwAAAAAAAwYzAAAAAAAEBkMAAAAAAAUGYwAAAAAACAYDAQAAIAAABAQAAAAwAAAEBAAAABAAAAQFAAAAIAAABQcAAAAgAAAFCAAAACAAAAUKAAAAIAAABQsAAAAAAAAGDgAAAAAAAAYRAAAAAAAABhQAAAAAAAAGFwAAAAAAAAYaAAAAAAAABh0AAAAAAAAGIAAAAAAAEAYDAAEAAAAPBgOAAAAAAA4GA0AAAAAADQYDIAAAAAAMBgMQAAAAAAsGAwgAAAAACgYDBABBpB0L2QEBAAAAAwAAAAcAAAAPAAAAHwAAAD8AAAB/AAAA/wAAAP8BAAD/AwAA/wcAAP8PAAD/HwAA/z8AAP9/AAD//wAA//8BAP//AwD//wcA//8PAP//HwD//z8A//9/AP///wD///8B////A////wf///8P////H////z////9/AAAAAAEAAAACAAAABAAAAAAAAAACAAAABAAAAAgAAAAAAAAAAQAAAAIAAAABAAAABAAAAAQAAAAEAAAABAAAAAgAAAAIAAAACAAAAAcAAAAIAAAACQAAAAoAAAALAEGgIAsDwBBQ",te={315:"Artist",258:"BitsPerSample",265:"CellLength",264:"CellWidth",320:"ColorMap",259:"Compression",33432:"Copyright",306:"DateTime",338:"ExtraSamples",266:"FillOrder",289:"FreeByteCounts",288:"FreeOffsets",291:"GrayResponseCurve",290:"GrayResponseUnit",316:"HostComputer",270:"ImageDescription",257:"ImageLength",256:"ImageWidth",271:"Make",281:"MaxSampleValue",280:"MinSampleValue",272:"Model",254:"NewSubfileType",274:"Orientation",262:"PhotometricInterpretation",284:"PlanarConfiguration",296:"ResolutionUnit",278:"RowsPerStrip",277:"SamplesPerPixel",305:"Software",279:"StripByteCounts",273:"StripOffsets",255:"SubfileType",263:"Threshholding",282:"XResolution",283:"YResolution",326:"BadFaxLines",327:"CleanFaxData",343:"ClipPath",328:"ConsecutiveBadFaxLines",433:"Decode",434:"DefaultImageColor",269:"DocumentName",336:"DotRange",321:"HalftoneHints",346:"Indexed",347:"JPEGTables",285:"PageName",297:"PageNumber",317:"Predictor",319:"PrimaryChromaticities",532:"ReferenceBlackWhite",339:"SampleFormat",340:"SMinSampleValue",341:"SMaxSampleValue",559:"StripRowCounts",330:"SubIFDs",292:"T4Options",293:"T6Options",325:"TileByteCounts",323:"TileLength",324:"TileOffsets",322:"TileWidth",301:"TransferFunction",318:"WhitePoint",344:"XClipPathUnits",286:"XPosition",529:"YCbCrCoefficients",531:"YCbCrPositioning",530:"YCbCrSubSampling",345:"YClipPathUnits",287:"YPosition",37378:"ApertureValue",40961:"ColorSpace",36868:"DateTimeDigitized",36867:"DateTimeOriginal",34665:"Exif IFD",36864:"ExifVersion",33434:"ExposureTime",41728:"FileSource",37385:"Flash",40960:"FlashpixVersion",33437:"FNumber",42016:"ImageUniqueID",37384:"LightSource",37500:"MakerNote",37377:"ShutterSpeedValue",37510:"UserComment",33723:"IPTC",34675:"ICC Profile",700:"XMP",42112:"GDAL_METADATA",42113:"GDAL_NODATA",34377:"Photoshop",33550:"ModelPixelScale",33922:"ModelTiepoint",34264:"ModelTransformation",34735:"GeoKeyDirectory",34736:"GeoDoubleParams",34737:"GeoAsciiParams",50674:"LercParameters"},ie={};for(var re in te)te.hasOwnProperty(re)&&(ie[te[re]]=parseInt(re,10));ie.BitsPerSample,ie.ExtraSamples,ie.SampleFormat,ie.StripByteCounts,ie.StripOffsets,ie.StripRowCounts,ie.TileByteCounts,ie.TileOffsets,ie.SubIFDs;var Ie={1:"BYTE",2:"ASCII",3:"SHORT",4:"LONG",5:"RATIONAL",6:"SBYTE",7:"UNDEFINED",8:"SSHORT",9:"SLONG",10:"SRATIONAL",11:"FLOAT",12:"DOUBLE",13:"IFD",16:"LONG8",17:"SLONG8",18:"IFD8"},ge={};for(var ne in Ie)Ie.hasOwnProperty(ne)&&(ge[Ie[ne]]=parseInt(ne,10));var ae=1,oe=0,Be=1,Ce=2,Qe={1024:"GTModelTypeGeoKey",1025:"GTRasterTypeGeoKey",1026:"GTCitationGeoKey",2048:"GeographicTypeGeoKey",2049:"GeogCitationGeoKey",2050:"GeogGeodeticDatumGeoKey",2051:"GeogPrimeMeridianGeoKey",2052:"GeogLinearUnitsGeoKey",2053:"GeogLinearUnitSizeGeoKey",2054:"GeogAngularUnitsGeoKey",2055:"GeogAngularUnitSizeGeoKey",2056:"GeogEllipsoidGeoKey",2057:"GeogSemiMajorAxisGeoKey",2058:"GeogSemiMinorAxisGeoKey",2059:"GeogInvFlatteningGeoKey",2060:"GeogAzimuthUnitsGeoKey",2061:"GeogPrimeMeridianLongGeoKey",2062:"GeogTOWGS84GeoKey",3072:"ProjectedCSTypeGeoKey",3073:"PCSCitationGeoKey",3074:"ProjectionGeoKey",3075:"ProjCoordTransGeoKey",3076:"ProjLinearUnitsGeoKey",3077:"ProjLinearUnitSizeGeoKey",3078:"ProjStdParallel1GeoKey",3079:"ProjStdParallel2GeoKey",3080:"ProjNatOriginLongGeoKey",3081:"ProjNatOriginLatGeoKey",3082:"ProjFalseEastingGeoKey",3083:"ProjFalseNorthingGeoKey",3084:"ProjFalseOriginLongGeoKey",3085:"ProjFalseOriginLatGeoKey",3086:"ProjFalseOriginEastingGeoKey",3087:"ProjFalseOriginNorthingGeoKey",3088:"ProjCenterLongGeoKey",3089:"ProjCenterLatGeoKey",3090:"ProjCenterEastingGeoKey",3091:"ProjCenterNorthingGeoKey",3092:"ProjScaleAtNatOriginGeoKey",3093:"ProjScaleAtCenterGeoKey",3094:"ProjAzimuthAngleGeoKey",3095:"ProjStraightVertPoleLongGeoKey",3096:"ProjRectifiedGridAngleGeoKey",4096:"VerticalCSTypeGeoKey",4097:"VerticalCitationGeoKey",4098:"VerticalDatumGeoKey",4099:"VerticalUnitsGeoKey"},Ee={};for(var se in Qe)Qe.hasOwnProperty(se)&&(Ee[Qe[se]]=parseInt(se,10));function fe(A){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(A){return!1}}();return function(){var t,i=c(A);if(e){var r=c(this).constructor;t=Reflect.construct(i,arguments,r)}else t=i.apply(this,arguments);return f(this,t)}}var ce=new Ae,he=function(A){s(t,w);var e=fe(t);function t(A){var i;return B(this,t),(i=e.call(this)).planarConfiguration=void 0!==A.PlanarConfiguration?A.PlanarConfiguration:1,i.samplesPerPixel=void 0!==A.SamplesPerPixel?A.SamplesPerPixel:1,i.addCompression=A.LercParameters[ae],i}return Q(t,[{key:"decodeBlock",value:function(A){switch(this.addCompression){case oe:break;case Be:A=YA(new Uint8Array(A)).buffer;break;case Ce:A=ce.decode(new Uint8Array(A)).buffer;break;default:throw new Error("Unsupported LERC additional compression method identifier: ".concat(this.addCompression))}return zA.decode(A,{returnPixelInterleavedDims:1===this.planarConfiguration}).pixels[0].buffer}}]),t}(),le=Object.freeze({__proto__:null,zstd:ce,default:he});function ue(A){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(A){return!1}}();return function(){var t,i=c(A);if(e){var r=c(this).constructor;t=Reflect.construct(i,arguments,r)}else t=i.apply(this,arguments);return f(this,t)}}var we=function(A){s(I,w);var t,i=ue(I);function I(){var A;if(B(this,I),A=i.call(this),"undefined"==typeof createImageBitmap)throw new Error("Cannot decode WebImage as `createImageBitmap` is not available");if("undefined"==typeof document&&"undefined"==typeof OffscreenCanvas)throw new Error("Cannot decode WebImage as neither `document` nor `OffscreenCanvas` is not available");return A}return Q(I,[{key:"decode",value:(t=e(r.mark((function A(e,t){var i,I,g,n;return r.wrap((function(A){for(;;)switch(A.prev=A.next){case 0:return i=new Blob([t]),A.next=3,createImageBitmap(i);case 3:return I=A.sent,"undefined"!=typeof document?((g=document.createElement("canvas")).width=I.width,g.height=I.height):g=new OffscreenCanvas(I.width,I.height),(n=g.getContext("2d")).drawImage(I,0,0),A.abrupt("return",n.getImageData(0,0,I.width,I.height).data.buffer);case 8:case"end":return A.stop()}}),A)}))),function(A,e){return t.apply(this,arguments)})}]),I}(),de=Object.freeze({__proto__:null,default:we});';return new t.default(void 0!==r?"data:application/javascript;base64,"+r.from(e,"binary").toString("base64"):URL.createObjectURL(new Blob([e],{type:"application/javascript"})))}}.call(this)}.call(this,n("buffer").Buffer)},{buffer:9,"web-worker":452}],54:[function(e,t,r){"use strict";var n=e("./lib/deflate"),i=n.Deflate,o=n.deflate,a=n.deflateRaw,n=n.gzip,s=e("./lib/inflate"),u=s.Inflate,l=s.inflate,c=s.inflateRaw,s=s.ungzip,e=e("./lib/zlib/constants");t.exports.Deflate=i,t.exports.deflate=o,t.exports.deflateRaw=a,t.exports.gzip=n,t.exports.Inflate=u,t.exports.inflate=l,t.exports.inflateRaw=c,t.exports.ungzip=s,t.exports.constants=e},{"./lib/deflate":55,"./lib/inflate":56,"./lib/zlib/constants":60}],55:[function(e,t,r){"use strict";var a=e("./zlib/deflate"),n=e("./utils/common"),s=e("./utils/strings"),i=e("./zlib/messages"),o=e("./zlib/zstream"),u=Object.prototype.toString,l=e("./zlib/constants"),c=l.Z_NO_FLUSH,f=l.Z_SYNC_FLUSH,h=l.Z_FULL_FLUSH,p=l.Z_FINISH,d=l.Z_OK,g=l.Z_STREAM_END,y=l.Z_DEFAULT_COMPRESSION,A=l.Z_DEFAULT_STRATEGY,m=l.Z_DEFLATED;function v(e){this.options=n.assign({level:y,method:m,chunkSize:16384,windowBits:15,memLevel:8,strategy:A},e||{});var e=this.options,t=(e.raw&&0<e.windowBits?e.windowBits=-e.windowBits:e.gzip&&0<e.windowBits&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new o,this.strm.avail_out=0,a.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy));if(t!==d)throw new Error(i[t]);if(e.header&&a.deflateSetHeader(this.strm,e.header),e.dictionary){e="string"==typeof e.dictionary?s.string2buf(e.dictionary):"[object ArrayBuffer]"===u.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary;if((t=a.deflateSetDictionary(this.strm,e))!==d)throw new Error(i[t]);this._dict_set=!0}}function b(e,t){t=new v(t);if(t.push(e,!0),t.err)throw t.msg||i[t.err];return t.result}v.prototype.push=function(e,t){var r,n,i=this.strm,o=this.options.chunkSize;if(this.ended)return!1;for(n=t===~~t?t:!0===t?p:c,"string"==typeof e?i.input=s.string2buf(e):"[object ArrayBuffer]"===u.call(e)?i.input=new Uint8Array(e):i.input=e,i.next_in=0,i.avail_in=i.input.length;;)if(0===i.avail_out&&(i.output=new Uint8Array(o),i.next_out=0,i.avail_out=o),(n===f||n===h)&&i.avail_out<=6)this.onData(i.output.subarray(0,i.next_out)),i.avail_out=0;else{if(a.deflate(i,n)===g)return 0<i.next_out&&this.onData(i.output.subarray(0,i.next_out)),r=a.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===d;if(0!==i.avail_out){if(0<n&&0<i.next_out)this.onData(i.output.subarray(0,i.next_out)),i.avail_out=0;else if(0===i.avail_in)break}else this.onData(i.output)}return!0},v.prototype.onData=function(e){this.chunks.push(e)},v.prototype.onEnd=function(e){e===d&&(this.result=n.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},t.exports.Deflate=v,t.exports.deflate=b,t.exports.deflateRaw=function(e,t){return(t=t||{}).raw=!0,b(e,t)},t.exports.gzip=function(e,t){return(t=t||{}).gzip=!0,b(e,t)},t.exports.constants=e("./zlib/constants")},{"./utils/common":57,"./utils/strings":58,"./zlib/constants":60,"./zlib/deflate":62,"./zlib/messages":67,"./zlib/zstream":69}],56:[function(e,t,r){"use strict";var f=e("./zlib/inflate"),n=e("./utils/common"),h=e("./utils/strings"),i=e("./zlib/messages"),o=e("./zlib/zstream"),a=e("./zlib/gzheader"),p=Object.prototype.toString,s=e("./zlib/constants"),d=s.Z_NO_FLUSH,g=s.Z_FINISH,y=s.Z_OK,A=s.Z_STREAM_END,m=s.Z_NEED_DICT,v=s.Z_STREAM_ERROR,b=s.Z_DATA_ERROR,_=s.Z_MEM_ERROR;function u(e){this.options=n.assign({chunkSize:65536,windowBits:15,to:""},e||{});var t=this.options,e=(t.raw&&0<=t.windowBits&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits)&&(t.windowBits=-15),!(0<=t.windowBits&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),15<t.windowBits&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new o,this.strm.avail_out=0,f.inflateInit2(this.strm,t.windowBits));if(e!==y)throw new Error(i[e]);if(this.header=new a,f.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=h.string2buf(t.dictionary):"[object ArrayBuffer]"===p.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw)&&(e=f.inflateSetDictionary(this.strm,t.dictionary))!==y)throw new Error(i[e])}function l(e,t){t=new u(t);if(t.push(e),t.err)throw t.msg||i[t.err];return t.result}u.prototype.push=function(e,t){var r,n,i=this.strm,o=this.options.chunkSize,a=this.options.dictionary;if(this.ended)return!1;for(n=t===~~t?t:!0===t?g:d,"[object ArrayBuffer]"===p.call(e)?i.input=new Uint8Array(e):i.input=e,i.next_in=0,i.avail_in=i.input.length;;){for(0===i.avail_out&&(i.output=new Uint8Array(o),i.next_out=0,i.avail_out=o),(r=f.inflate(i,n))===m&&a&&((r=f.inflateSetDictionary(i,a))===y?r=f.inflate(i,n):r===b&&(r=m));0<i.avail_in&&r===A&&0<i.state.wrap&&0!==e[i.next_in];)f.inflateReset(i),r=f.inflate(i,n);switch(r){case v:case b:case m:case _:return this.onEnd(r),!(this.ended=!0)}var s,u,l,c=i.avail_out;if(!i.next_out||0!==i.avail_out&&r!==A||("string"===this.options.to?(s=h.utf8border(i.output,i.next_out),u=i.next_out-s,l=h.buf2string(i.output,s),i.next_out=u,i.avail_out=o-u,u&&i.output.set(i.output.subarray(s,s+u),0),this.onData(l)):this.onData(i.output.length===i.next_out?i.output:i.output.subarray(0,i.next_out))),r!==y||0!==c){if(r===A)return r=f.inflateEnd(this.strm),this.onEnd(r),this.ended=!0;if(0===i.avail_in)break}}return!0},u.prototype.onData=function(e){this.chunks.push(e)},u.prototype.onEnd=function(e){e===y&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=n.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},t.exports.Inflate=u,t.exports.inflate=l,t.exports.inflateRaw=function(e,t){return(t=t||{}).raw=!0,l(e,t)},t.exports.ungzip=l,t.exports.constants=e("./zlib/constants")},{"./utils/common":57,"./utils/strings":58,"./zlib/constants":60,"./zlib/gzheader":63,"./zlib/inflate":65,"./zlib/messages":67,"./zlib/zstream":69}],57:[function(e,t,r){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}t.exports.assign=function(e){for(var t,r,n=Array.prototype.slice.call(arguments,1);n.length;){var i=n.shift();if(i){if("object"!==a(i))throw new TypeError(i+"must be non-object");for(var o in i)t=i,r=o,Object.prototype.hasOwnProperty.call(t,r)&&(e[o]=i[o])}}return e},t.exports.flattenChunks=function(e){for(var t=0,r=0,n=e.length;r<n;r++)t+=e[r].length;for(var i=new Uint8Array(t),o=0,a=0,s=e.length;o<s;o++){var u=e[o];i.set(u,a),a+=u.length}return i}},{}],58:[function(e,t,r){"use strict";var h=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){h=!1}for(var p=new Uint8Array(256),n=0;n<256;n++)p[n]=252<=n?6:248<=n?5:240<=n?4:224<=n?3:192<=n?2:1;p[254]=p[254]=1,t.exports.string2buf=function(e){if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(e);for(var t,r,n,i,o=e.length,a=0,s=0;s<o;s++)55296==(64512&(r=e.charCodeAt(s)))&&s+1<o&&56320==(64512&(n=e.charCodeAt(s+1)))&&(r=65536+(r-55296<<10)+(n-56320),s++),a+=r<128?1:r<2048?2:r<65536?3:4;for(t=new Uint8Array(a),s=i=0;i<a;s++)55296==(64512&(r=e.charCodeAt(s)))&&s+1<o&&56320==(64512&(n=e.charCodeAt(s+1)))&&(r=65536+(r-55296<<10)+(n-56320),s++),r<128?t[i++]=r:(r<2048?t[i++]=192|r>>>6:(r<65536?t[i++]=224|r>>>12:(t[i++]=240|r>>>18,t[i++]=128|r>>>12&63),t[i++]=128|r>>>6&63),t[i++]=128|63&r);return t};t.exports.buf2string=function(e,t){var r=t||e.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(e.subarray(0,t));for(var n=new Array(2*r),i=0,o=0;o<r;){var a=e[o++];if(a<128)n[i++]=a;else{var s=p[a];if(4<s)n[i++]=65533,o+=s-1;else{for(a&=2===s?31:3===s?15:7;1<s&&o<r;)a=a<<6|63&e[o++],s--;1<s?n[i++]=65533:a<65536?n[i++]=a:(a-=65536,n[i++]=55296|a>>10&1023,n[i++]=56320|1023&a)}}}var u=n,l=i;if(l<65534&&u.subarray&&h)return String.fromCharCode.apply(null,u.length===l?u:u.subarray(0,l));for(var c="",f=0;f<l;f++)c+=String.fromCharCode(u[f]);return c},t.exports.utf8border=function(e,t){for(var r=(t=(t=t||e.length)>e.length?e.length:t)-1;0<=r&&128==(192&e[r]);)r--;return!(r<0)&&0!==r&&r+p[e[r]]>t?r:t}},{}],59:[function(e,t,r){"use strict";t.exports=function(e,t,r,n){for(var i=65535&e|0,o=e>>>16&65535|0,a=0;0!==r;){for(r-=a=2e3<r?2e3:r;o=o+(i=i+t[n++]|0)|0,--a;);i%=65521,o%=65521}return i|o<<16|0}},{}],60:[function(e,t,r){"use strict";t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],61:[function(e,t,r){"use strict";var s=new Uint32Array(function(){for(var e=[],t=0;t<256;t++){for(var r=t,n=0;n<8;n++)r=1&r?3988292384^r>>>1:r>>>1;e[t]=r}return e}());t.exports=function(e,t,r,n){var i=s,o=n+r;e^=-1;for(var a=n;a<o;a++)e=e>>>8^i[255&(e^t[a])];return-1^e}},{}],62:[function(e,t,a){"use strict";function N(e){return 2*e-(4<e?9:0)}function f(e,t){e.pending_buf[e.pending++]=t}function h(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function s(e,t){var r,n,i=e.max_chain_length,o=e.strstart,a=e.prev_length,s=e.nice_match,u=e.strstart>e.w_size-I?e.strstart-(e.w_size-I):0,l=e.window,c=e.w_mask,f=e.prev,h=e.strstart+C,p=l[o+a-1],d=l[o+a];e.prev_length>=e.good_match&&(i>>=2),s>e.lookahead&&(s=e.lookahead);do{if(l[(r=t)+a]===d&&l[r+a-1]===p&&l[r]===l[o]&&l[++r]===l[o+1]){for(o+=2,r++;l[++o]===l[++r]&&l[++o]===l[++r]&&l[++o]===l[++r]&&l[++o]===l[++r]&&l[++o]===l[++r]&&l[++o]===l[++r]&&l[++o]===l[++r]&&l[++o]===l[++r]&&o<h;);if(n=C-(h-o),o=h-C,a<n){if(e.match_start=t,s<=(a=n))break;p=l[o+a-1],d=l[o+a]}}}while((t=f[t&c])>u&&0!=--i);return a<=e.lookahead?a:e.lookahead}function G(e,t){for(var r,n,i,o=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,a=0,s=e.strm.avail_in;r=65535,i=e.bi_valid+42>>3,!(e.strm.avail_out<i||(r=(i=e.strm.avail_out-i)<(r=r>(n=e.strstart-e.block_start)+e.strm.avail_in?n+e.strm.avail_in:r)?i:r)<o&&(0===r&&t!==A||t===y||r!==n+e.strm.avail_in)||(a=t===A&&r===n+e.strm.avail_in?1:0,p(e,0,0,a),e.pending_buf[e.pending-4]=r,e.pending_buf[e.pending-3]=r>>8,e.pending_buf[e.pending-2]=~r,e.pending_buf[e.pending-1]=~r>>8,R(e.strm),n&&(r<n&&(n=r),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+n),e.strm.next_out),e.strm.next_out+=n,e.strm.avail_out-=n,e.strm.total_out+=n,e.block_start+=n,r-=n),r&&(de(e.strm,e.strm.output,e.strm.next_out,r),e.strm.next_out+=r,e.strm.avail_out-=r,e.strm.total_out+=r),0!==a)););return(s-=e.strm.avail_in)&&(s>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=s&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart)&&(e.insert=e.strstart),e.window.set(e.strm.input.subarray(e.strm.next_in-s,e.strm.next_in),e.strstart),e.strstart+=s,e.insert+=s>e.w_size-e.insert?e.w_size-e.insert:s),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),a?B:t!==y&&t!==A&&0===e.strm.avail_in&&e.strstart===e.block_start?P:(i=e.window_size-e.strstart,e.strm.avail_in>i&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,i+=e.w_size,e.insert>e.strstart)&&(e.insert=e.strstart),(i=i>e.strm.avail_in?e.strm.avail_in:i)&&(de(e.strm,e.window,e.strstart,i),e.strstart+=i,e.insert+=i>e.w_size-e.insert?e.w_size-e.insert:i),e.high_water<e.strstart&&(e.high_water=e.strstart),i=e.bi_valid+42>>3,o=(i=65535<e.pending_buf_size-i?65535:e.pending_buf_size-i)>e.w_size?e.w_size:i,((n=e.strstart-e.block_start)>=o||(n||t===A)&&t!==y&&0===e.strm.avail_in&&n<=i)&&(r=i<n?i:n,a=t===A&&0===e.strm.avail_in&&r===n?1:0,p(e,e.block_start,r,a),e.block_start+=r,R(e.strm)),a?k:O)}function r(e,t){for(var r,n;;){if(e.lookahead<I){if(L(e),e.lookahead<I&&t===y)return O;if(0===e.lookahead)break}if(r=0,e.lookahead>=E&&(e.ins_h=c(e,e.ins_h,e.window[e.strstart+E-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==r&&e.strstart-r<=e.w_size-I&&(e.match_length=s(e,r)),e.match_length>=E)if(n=d(e,e.strstart-e.match_start,e.match_length-E),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=E){for(e.match_length--;e.strstart++,e.ins_h=c(e,e.ins_h,e.window[e.strstart+E-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart,0!=--e.match_length;);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=c(e,e.ins_h,e.window[e.strstart+1]);else n=d(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(D(e,!1),0===e.strm.avail_out))return O}return e.insert=e.strstart<E-1?e.strstart:E-1,t===A?(D(e,!0),0===e.strm.avail_out?k:B):e.sym_next&&(D(e,!1),0===e.strm.avail_out)?O:P}function n(e,t){for(var r,n,i;;){if(e.lookahead<I){if(L(e),e.lookahead<I&&t===y)return O;if(0===e.lookahead)break}if(r=0,e.lookahead>=E&&(e.ins_h=c(e,e.ins_h,e.window[e.strstart+E-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=E-1,0!==r&&e.prev_length<e.max_lazy_match&&e.strstart-r<=e.w_size-I&&(e.match_length=s(e,r),e.match_length<=5)&&(e.strategy===J||e.match_length===E&&4096<e.strstart-e.match_start)&&(e.match_length=E-1),e.prev_length>=E&&e.match_length<=e.prev_length){for(i=e.strstart+e.lookahead-E,n=d(e,e.strstart-1-e.prev_match,e.prev_length-E),e.lookahead-=e.prev_length-1,e.prev_length-=2;++e.strstart<=i&&(e.ins_h=c(e,e.ins_h,e.window[e.strstart+E-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!=--e.prev_length;);if(e.match_available=0,e.match_length=E-1,e.strstart++,n&&(D(e,!1),0===e.strm.avail_out))return O}else if(e.match_available){if((n=d(e,0,e.window[e.strstart-1]))&&D(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return O}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(n=d(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<E-1?e.strstart:E-1,t===A?(D(e,!0),0===e.strm.avail_out?k:B):e.sym_next&&(D(e,!1),0===e.strm.avail_out)?O:P}var i=e("./trees"),u=i._tr_init,p=i._tr_stored_block,l=i._tr_flush_block,d=i._tr_tally,U=i._tr_align,z=e("./adler32"),g=e("./crc32"),q=e("./messages"),i=e("./constants"),y=i.Z_NO_FLUSH,H=i.Z_PARTIAL_FLUSH,W=i.Z_FULL_FLUSH,A=i.Z_FINISH,Y=i.Z_BLOCK,m=i.Z_OK,V=i.Z_STREAM_END,v=i.Z_STREAM_ERROR,K=i.Z_DATA_ERROR,b=i.Z_BUF_ERROR,X=i.Z_DEFAULT_COMPRESSION,J=i.Z_FILTERED,_=i.Z_HUFFMAN_ONLY,Z=i.Z_RLE,$=i.Z_FIXED,ee=i.Z_DEFAULT_STRATEGY,te=i.Z_UNKNOWN,w=i.Z_DEFLATED,re=9,ne=286,ie=30,oe=19,ae=2*ne+1,se=15,E=3,C=258,I=C+E+1,S=42,ue=57,le=69,ce=73,fe=91,he=103,j=113,x=666,O=1,P=2,k=3,B=4,T=function(e,t){return e.msg=q[t],t},M=function(e){for(var t=e.length;0<=--t;)e[t]=0},pe=function(e){for(var t,r,n=e.w_size,i=t=e.hash_size;r=e.head[--i],e.head[i]=n<=r?r-n:0,--t;);for(i=t=n;r=e.prev[--i],e.prev[i]=n<=r?r-n:0,--t;);},c=function(e,t,r){return(t<<e.hash_shift^r)&e.hash_mask},R=function(e){var t=e.state,r=t.pending;0!==(r=r>e.avail_out?e.avail_out:r)&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+r),e.next_out),e.next_out+=r,t.pending_out+=r,e.total_out+=r,e.avail_out-=r,t.pending-=r,0===t.pending)&&(t.pending_out=0)},D=function(e,t){l(e,0<=e.block_start?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,R(e.strm)},de=function(e,t,r,n){var i=e.avail_in;return 0===(i=n<i?n:i)?0:(e.avail_in-=i,t.set(e.input.subarray(e.next_in,e.next_in+i),r),1===e.state.wrap?e.adler=z(e.adler,t,i,r):2===e.state.wrap&&(e.adler=g(e.adler,t,i,r)),e.next_in+=i,e.total_in+=i,i)},L=function(e){var t,r,n=e.w_size;do{if(t=e.window_size-e.lookahead-e.strstart,e.strstart>=n+(n-I)&&(e.window.set(e.window.subarray(n,n+n-t),0),e.match_start-=n,e.strstart-=n,e.block_start-=n,e.insert>e.strstart&&(e.insert=e.strstart),pe(e),t+=n),0===e.strm.avail_in)break;if(t=de(e.strm,e.window,e.strstart+e.lookahead,t),e.lookahead+=t,e.lookahead+e.insert>=E)for(r=e.strstart-e.insert,e.ins_h=e.window[r],e.ins_h=c(e,e.ins_h,e.window[r+1]);e.insert&&(e.ins_h=c(e,e.ins_h,e.window[r+E-1]),e.prev[r&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=r,r++,e.insert--,!(e.lookahead+e.insert<E)););}while(e.lookahead<I&&0!==e.strm.avail_in)};function o(e,t,r,n,i){this.good_length=e,this.max_lazy=t,this.nice_length=r,this.max_chain=n,this.func=i}var Q=[new o(0,0,0,0,G),new o(4,4,8,4,r),new o(4,5,16,8,r),new o(4,6,32,32,r),new o(4,4,16,16,n),new o(8,16,32,32,n),new o(8,16,128,128,n),new o(8,32,128,256,n),new o(32,128,258,1024,n),new o(32,258,258,4096,n)];function ge(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=w,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(2*ae),this.dyn_dtree=new Uint16Array(2*(2*ie+1)),this.bl_tree=new Uint16Array(2*(2*oe+1)),M(this.dyn_ltree),M(this.dyn_dtree),M(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(se+1),this.heap=new Uint16Array(2*ne+1),M(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*ne+1),M(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function ye(e){if(F(e))return T(e,v);e.total_in=e.total_out=0,e.data_type=te;var t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=2===t.wrap?ue:t.wrap?S:j,e.adler=2===t.wrap?0:1,t.last_flush=-2,u(t),m}function Ae(e,t,r,n,i,o){if(!e)return v;var a=1;if(t===X&&(t=6),n<0?(a=0,n=-n):15<n&&(a=2,n-=16),i<1||re<i||r!==w||n<8||15<n||t<0||9<t||o<0||$<o||8===n&&1!==a)return T(e,v);8===n&&(n=9);var s=new ge;return(e.state=s).strm=e,s.status=S,s.wrap=a,s.gzhead=null,s.w_bits=n,s.w_size=1<<s.w_bits,s.w_mask=s.w_size-1,s.hash_bits=i+7,s.hash_size=1<<s.hash_bits,s.hash_mask=s.hash_size-1,s.hash_shift=~~((s.hash_bits+E-1)/E),s.window=new Uint8Array(2*s.w_size),s.head=new Uint16Array(s.hash_size),s.prev=new Uint16Array(s.w_size),s.lit_bufsize=1<<i+6,s.pending_buf_size=4*s.lit_bufsize,s.pending_buf=new Uint8Array(s.pending_buf_size),s.sym_buf=s.lit_bufsize,s.sym_end=3*(s.lit_bufsize-1),s.level=t,s.strategy=o,s.method=r,me(e)}var F=function(e){var t;return!e||!(t=e.state)||t.strm!==e||t.status!==S&&t.status!==ue&&t.status!==le&&t.status!==ce&&t.status!==fe&&t.status!==he&&t.status!==j&&t.status!==x?1:0},me=function(e){var t=ye(e);return t===m&&((e=e.state).window_size=2*e.w_size,M(e.head),e.max_lazy_match=Q[e.level].max_lazy,e.good_match=Q[e.level].good_length,e.nice_match=Q[e.level].nice_length,e.max_chain_length=Q[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=E-1,e.match_available=0,e.ins_h=0),t};t.exports.deflateInit=function(e,t){return Ae(e,t,w,15,8,ee)},t.exports.deflateInit2=Ae,t.exports.deflateReset=me,t.exports.deflateResetKeep=ye,t.exports.deflateSetHeader=function(e,t){return F(e)||2!==e.state.wrap?v:(e.state.gzhead=t,m)},t.exports.deflate=function(e,t){if(F(e)||Y<t||t<0)return e?T(e,v):v;var r=e.state;if(!e.output||0!==e.avail_in&&!e.input||r.status===x&&t!==A)return T(e,0===e.avail_out?b:v);var n=r.last_flush;if(r.last_flush=t,0!==r.pending){if(R(e),0===e.avail_out)return r.last_flush=-1,m}else if(0===e.avail_in&&N(t)<=N(n)&&t!==A)return T(e,b);if(r.status===x&&0!==e.avail_in)return T(e,b);if(r.status===S&&0===r.wrap&&(r.status=j),r.status===S){n=w+(r.w_bits-8<<4)<<8;if(n|=(r.strategy>=_||r.level<2?0:r.level<6?1:6===r.level?2:3)<<6,0!==r.strstart&&(n|=32),h(r,n+=31-n%31),0!==r.strstart&&(h(r,e.adler>>>16),h(r,65535&e.adler)),e.adler=1,r.status=j,R(e),0!==r.pending)return r.last_flush=-1,m}if(r.status===ue)if(e.adler=0,f(r,31),f(r,139),f(r,8),r.gzhead)f(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),f(r,255&r.gzhead.time),f(r,r.gzhead.time>>8&255),f(r,r.gzhead.time>>16&255),f(r,r.gzhead.time>>24&255),f(r,9===r.level?2:r.strategy>=_||r.level<2?4:0),f(r,255&r.gzhead.os),r.gzhead.extra&&r.gzhead.extra.length&&(f(r,255&r.gzhead.extra.length),f(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(e.adler=g(e.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=le;else if(f(r,0),f(r,0),f(r,0),f(r,0),f(r,0),f(r,9===r.level?2:r.strategy>=_||r.level<2?4:0),f(r,3),r.status=j,R(e),0!==r.pending)return r.last_flush=-1,m;if(r.status===le){if(r.gzhead.extra){for(var i=r.pending,o=(65535&r.gzhead.extra.length)-r.gzindex;r.pending+o>r.pending_buf_size;){var a=r.pending_buf_size-r.pending;if(r.pending_buf.set(r.gzhead.extra.subarray(r.gzindex,r.gzindex+a),r.pending),r.pending=r.pending_buf_size,r.gzhead.hcrc&&r.pending>i&&(e.adler=g(e.adler,r.pending_buf,r.pending-i,i)),r.gzindex+=a,R(e),0!==r.pending)return r.last_flush=-1,m;i=0,o-=a}n=new Uint8Array(r.gzhead.extra);r.pending_buf.set(n.subarray(r.gzindex,r.gzindex+o),r.pending),r.pending+=o,r.gzhead.hcrc&&r.pending>i&&(e.adler=g(e.adler,r.pending_buf,r.pending-i,i)),r.gzindex=0}r.status=ce}if(r.status===ce){if(r.gzhead.name){var s,u=r.pending;do{if(r.pending===r.pending_buf_size){if(r.gzhead.hcrc&&r.pending>u&&(e.adler=g(e.adler,r.pending_buf,r.pending-u,u)),R(e),0!==r.pending)return r.last_flush=-1,m;u=0}}while(s=r.gzindex<r.gzhead.name.length?255&r.gzhead.name.charCodeAt(r.gzindex++):0,f(r,s),0!=s);r.gzhead.hcrc&&r.pending>u&&(e.adler=g(e.adler,r.pending_buf,r.pending-u,u)),r.gzindex=0}r.status=fe}if(r.status===fe){if(r.gzhead.comment){var l,c=r.pending;do{if(r.pending===r.pending_buf_size){if(r.gzhead.hcrc&&r.pending>c&&(e.adler=g(e.adler,r.pending_buf,r.pending-c,c)),R(e),0!==r.pending)return r.last_flush=-1,m;c=0}}while(l=r.gzindex<r.gzhead.comment.length?255&r.gzhead.comment.charCodeAt(r.gzindex++):0,f(r,l),0!=l);r.gzhead.hcrc&&r.pending>c&&(e.adler=g(e.adler,r.pending_buf,r.pending-c,c))}r.status=he}if(r.status===he){if(r.gzhead.hcrc){if(r.pending+2>r.pending_buf_size&&(R(e),0!==r.pending))return r.last_flush=-1,m;f(r,255&e.adler),f(r,e.adler>>8&255),e.adler=0}if(r.status=j,R(e),0!==r.pending)return r.last_flush=-1,m}if(0!==e.avail_in||0!==r.lookahead||t!==y&&r.status!==x){n=0===r.level?G(r,t):r.strategy===_?function(e,t){for(var r;;){if(0===e.lookahead&&(L(e),0===e.lookahead)){if(t===y)return O;break}if(e.match_length=0,r=d(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,r&&(D(e,!1),0===e.strm.avail_out))return O}return e.insert=0,t===A?(D(e,!0),0===e.strm.avail_out?k:B):e.sym_next&&(D(e,!1),0===e.strm.avail_out)?O:P}(r,t):r.strategy===Z?function(e,t){for(var r,n,i,o,a=e.window;;){if(e.lookahead<=C){if(L(e),e.lookahead<=C&&t===y)return O;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=E&&0<e.strstart&&(n=a[i=e.strstart-1])===a[++i]&&n===a[++i]&&n===a[++i]){for(o=e.strstart+C;n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&i<o;);e.match_length=C-(o-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=E?(r=d(e,1,e.match_length-E),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(r=d(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),r&&(D(e,!1),0===e.strm.avail_out))return O}return e.insert=0,t===A?(D(e,!0),0===e.strm.avail_out?k:B):e.sym_next&&(D(e,!1),0===e.strm.avail_out)?O:P}(r,t):Q[r.level].func(r,t);if(n!==k&&n!==B||(r.status=x),n===O||n===k)return 0===e.avail_out&&(r.last_flush=-1),m;if(n===P&&(t===H?U(r):t!==Y&&(p(r,0,0,!1),t===W)&&(M(r.head),0===r.lookahead)&&(r.strstart=0,r.block_start=0,r.insert=0),R(e),0===e.avail_out))return r.last_flush=-1,m}return t!==A||!(r.wrap<=0)&&(2===r.wrap?(f(r,255&e.adler),f(r,e.adler>>8&255),f(r,e.adler>>16&255),f(r,e.adler>>24&255),f(r,255&e.total_in),f(r,e.total_in>>8&255),f(r,e.total_in>>16&255),f(r,e.total_in>>24&255)):(h(r,e.adler>>>16),h(r,65535&e.adler)),R(e),0<r.wrap&&(r.wrap=-r.wrap),0!==r.pending)?m:V},t.exports.deflateEnd=function(e){var t;return F(e)?v:(t=e.state.status,e.state=null,t===j?T(e,K):m)},t.exports.deflateSetDictionary=function(e,t){var r=t.length;if(F(e))return v;var n=e.state,i=n.wrap;if(2===i||1===i&&n.status!==S||n.lookahead)return v;1===i&&(e.adler=z(e.adler,t,r,0)),n.wrap=0,r>=n.w_size&&(0===i&&(M(n.head),n.strstart=0,n.block_start=0,n.insert=0),(o=new Uint8Array(n.w_size)).set(t.subarray(r-n.w_size,r),0),t=o,r=n.w_size);var o=e.avail_in,a=e.next_in,s=e.input;for(e.avail_in=r,e.next_in=0,e.input=t,L(n);n.lookahead>=E;){for(var u=n.strstart,l=n.lookahead-(E-1);n.ins_h=c(n,n.ins_h,n.window[u+E-1]),n.prev[u&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=u,u++,--l;);n.strstart=u,n.lookahead=E-1,L(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=E-1,n.match_available=0,e.next_in=a,e.input=s,e.avail_in=o,n.wrap=i,m},t.exports.deflateInfo="pako deflate (from Nodeca project)"},{"./adler32":59,"./constants":60,"./crc32":61,"./messages":67,"./trees":68}],63:[function(e,t,r){"use strict";t.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],64:[function(e,t,r){"use strict";t.exports=function(e,t){var r,n,i,o,a,s,u=e.state,l=e.next_in,c=e.input,f=l+(e.avail_in-5),h=e.next_out,p=e.output,d=h-(t-e.avail_out),g=h+(e.avail_out-257),y=u.dmax,A=u.wsize,m=u.whave,v=u.wnext,b=u.window,_=u.hold,w=u.bits,E=u.lencode,C=u.distcode,I=(1<<u.lenbits)-1,S=(1<<u.distbits)-1;e:do{for(w<15&&(_+=c[l++]<<w,w+=8,_+=c[l++]<<w,w+=8),r=E[_&I];;){if(_>>>=n=r>>>24,w-=n,0==(n=r>>>16&255))p[h++]=65535&r;else{if(!(16&n)){if(0==(64&n)){r=E[(65535&r)+(_&(1<<n)-1)];continue}if(32&n){u.mode=16191;break e}e.msg="invalid literal/length code",u.mode=16209;break e}for(i=65535&r,(n&=15)&&(w<n&&(_+=c[l++]<<w,w+=8),i+=_&(1<<n)-1,_>>>=n,w-=n),w<15&&(_+=c[l++]<<w,w+=8,_+=c[l++]<<w,w+=8),r=C[_&S];;){if(_>>>=n=r>>>24,w-=n,!(16&(n=r>>>16&255))){if(0==(64&n)){r=C[(65535&r)+(_&(1<<n)-1)];continue}e.msg="invalid distance code",u.mode=16209;break e}if(o=65535&r,w<(n&=15)&&(_+=c[l++]<<w,(w+=8)<n)&&(_+=c[l++]<<w,w+=8),(o+=_&(1<<n)-1)>y){e.msg="invalid distance too far back",u.mode=16209;break e}if(_>>>=n,w-=n,o>(n=h-d)){if((n=o-n)>m&&u.sane){e.msg="invalid distance too far back",u.mode=16209;break e}if(s=b,(a=0)===v){if(a+=A-n,n<i){for(i-=n;p[h++]=b[a++],--n;);a=h-o,s=p}}else if(v<n){if(a+=A+v-n,(n-=v)<i){for(i-=n;p[h++]=b[a++],--n;);if(a=0,v<i){for(i-=n=v;p[h++]=b[a++],--n;);a=h-o,s=p}}}else if(a+=v-n,n<i){for(i-=n;p[h++]=b[a++],--n;);a=h-o,s=p}for(;2<i;)p[h++]=s[a++],p[h++]=s[a++],p[h++]=s[a++],i-=3;i&&(p[h++]=s[a++],1<i)&&(p[h++]=s[a++])}else{for(a=h-o;p[h++]=p[a++],p[h++]=p[a++],p[h++]=p[a++],2<(i-=3););i&&(p[h++]=p[a++],1<i)&&(p[h++]=p[a++])}break}}break}}while(l<f&&h<g);l-=i=w>>3,_&=(1<<(w-=i<<3))-1,e.next_in=l,e.next_out=h,e.avail_in=l<f?f-l+5:5-(l-f),e.avail_out=h<g?g-h+257:257-(h-g),u.hold=_,u.bits=w}},{}],65:[function(e,t,c){"use strict";function k(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}var B=e("./adler32"),T=e("./crc32"),M=e("./inffast"),R=e("./inftrees"),D=1,L=2,e=e("./constants"),Q=e.Z_FINISH,F=e.Z_BLOCK,N=e.Z_TREES,G=e.Z_OK,U=e.Z_STREAM_END,z=e.Z_NEED_DICT,q=e.Z_STREAM_ERROR,H=e.Z_DATA_ERROR,W=e.Z_MEM_ERROR,Y=e.Z_BUF_ERROR,V=e.Z_DEFLATED,K=16180,X=16191,J=16209,r=16211,n=852,i=592;function o(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function a(e){var t;return te(e)?q:(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=K,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(n),t.distcode=t.distdyn=new Int32Array(i),t.sane=1,t.back=-1,G)}function s(e){var t;return te(e)?q:((t=e.state).wsize=0,t.whave=0,t.wnext=0,a(e))}function u(e,t){var r;return e?(r=new o,(e.state=r).strm=e,r.window=null,r.mode=K,(r=l(e,t))!==G&&(e.state=null),r):q}function Z(e,t,r,n){var i;return null===(e=e.state).window&&(e.wsize=1<<e.wbits,e.wnext=0,e.whave=0,e.window=new Uint8Array(e.wsize)),n>=e.wsize?(e.window.set(t.subarray(r-e.wsize,r),0),e.wnext=0,e.whave=e.wsize):((i=e.wsize-e.wnext)>n&&(i=n),e.window.set(t.subarray(r-n,r-n+i),e.wnext),(n-=i)?(e.window.set(t.subarray(r-n,r),0),e.wnext=n,e.whave=e.wsize):(e.wnext+=i,e.wnext===e.wsize&&(e.wnext=0),e.whave<e.wsize&&(e.whave+=i))),0}var $,ee,te=function(e){var t;return!e||!(t=e.state)||t.strm!==e||t.mode<K||t.mode>r?1:0},l=function(e,t){var r,n;return te(e)||(n=e.state,t<0?(r=0,t=-t):(r=5+(t>>4),t<48&&(t&=15)),t&&(t<8||15<t))?q:(null!==n.window&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,s(e))},re=!0;t.exports.inflateReset=s,t.exports.inflateReset2=l,t.exports.inflateResetKeep=a,t.exports.inflateInit=function(e){return u(e,15)},t.exports.inflateInit2=u,t.exports.inflate=function(e,t){var r,n,i,o,a,s,u,l,c,f,h,p,d,g,y,A,m,v,b,_,w,E,C,I,S=0,j=new Uint8Array(4),x=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(te(e)||!e.output||!e.input&&0!==e.avail_in)return q;(r=e.state).mode===X&&(r.mode=16192),a=e.next_out,i=e.output,u=e.avail_out,o=e.next_in,n=e.input,s=e.avail_in,l=r.hold,c=r.bits,f=s,h=u,E=G;e:for(;;)switch(r.mode){case K:if(0===r.wrap)r.mode=16192;else{for(;c<16;){if(0===s)break e;s--,l+=n[o++]<<c,c+=8}2&r.wrap&&35615===l?(0===r.wbits&&(r.wbits=15),j[r.check=0]=255&l,j[1]=l>>>8&255,r.check=T(r.check,j,2,0),c=l=0,r.mode=16181):(r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&l)<<8)+(l>>8))%31?(e.msg="incorrect header check",r.mode=J):(15&l)!==V?(e.msg="unknown compression method",r.mode=J):(c-=4,w=8+(15&(l>>>=4)),0===r.wbits&&(r.wbits=w),15<w||w>r.wbits?(e.msg="invalid window size",r.mode=J):(r.dmax=1<<r.wbits,r.flags=0,e.adler=r.check=1,r.mode=512&l?16189:X,c=l=0)))}break;case 16181:for(;c<16;){if(0===s)break e;s--,l+=n[o++]<<c,c+=8}if(r.flags=l,(255&r.flags)!==V){e.msg="unknown compression method",r.mode=J;break}if(57344&r.flags){e.msg="unknown header flags set",r.mode=J;break}r.head&&(r.head.text=l>>8&1),512&r.flags&&4&r.wrap&&(j[0]=255&l,j[1]=l>>>8&255,r.check=T(r.check,j,2,0)),c=l=0,r.mode=16182;case 16182:for(;c<32;){if(0===s)break e;s--,l+=n[o++]<<c,c+=8}r.head&&(r.head.time=l),512&r.flags&&4&r.wrap&&(j[0]=255&l,j[1]=l>>>8&255,j[2]=l>>>16&255,j[3]=l>>>24&255,r.check=T(r.check,j,4,0)),c=l=0,r.mode=16183;case 16183:for(;c<16;){if(0===s)break e;s--,l+=n[o++]<<c,c+=8}r.head&&(r.head.xflags=255&l,r.head.os=l>>8),512&r.flags&&4&r.wrap&&(j[0]=255&l,j[1]=l>>>8&255,r.check=T(r.check,j,2,0)),c=l=0,r.mode=16184;case 16184:if(1024&r.flags){for(;c<16;){if(0===s)break e;s--,l+=n[o++]<<c,c+=8}r.length=l,r.head&&(r.head.extra_len=l),512&r.flags&&4&r.wrap&&(j[0]=255&l,j[1]=l>>>8&255,r.check=T(r.check,j,2,0)),c=l=0}else r.head&&(r.head.extra=null);r.mode=16185;case 16185:if(1024&r.flags&&((p=(p=r.length)>s?s:p)&&(r.head&&(w=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(n.subarray(o,o+p),w)),512&r.flags&&4&r.wrap&&(r.check=T(r.check,n,p,o)),s-=p,o+=p,r.length-=p),r.length))break e;r.length=0,r.mode=16186;case 16186:if(2048&r.flags){if(0===s)break e;for(p=0;w=n[o+p++],r.head&&w&&r.length<65536&&(r.head.name+=String.fromCharCode(w)),w&&p<s;);if(512&r.flags&&4&r.wrap&&(r.check=T(r.check,n,p,o)),s-=p,o+=p,w)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=16187;case 16187:if(4096&r.flags){if(0===s)break e;for(p=0;w=n[o+p++],r.head&&w&&r.length<65536&&(r.head.comment+=String.fromCharCode(w)),w&&p<s;);if(512&r.flags&&4&r.wrap&&(r.check=T(r.check,n,p,o)),s-=p,o+=p,w)break e}else r.head&&(r.head.comment=null);r.mode=16188;case 16188:if(512&r.flags){for(;c<16;){if(0===s)break e;s--,l+=n[o++]<<c,c+=8}if(4&r.wrap&&l!==(65535&r.check)){e.msg="header crc mismatch",r.mode=J;break}c=l=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=X;break;case 16189:for(;c<32;){if(0===s)break e;s--,l+=n[o++]<<c,c+=8}e.adler=r.check=k(l),c=l=0,r.mode=16190;case 16190:if(0===r.havedict)return e.next_out=a,e.avail_out=u,e.next_in=o,e.avail_in=s,r.hold=l,r.bits=c,z;e.adler=r.check=1,r.mode=X;case X:if(t===F||t===N)break e;case 16192:if(r.last)l>>>=7&c,c-=7&c,r.mode=16206;else{for(;c<3;){if(0===s)break e;s--,l+=n[o++]<<c,c+=8}switch(r.last=1&l,--c,3&(l>>>=1)){case 0:r.mode=16193;break;case 1:P=void 0;var O=r;if(re){$=new Int32Array(512),ee=new Int32Array(32);for(var P=0;P<144;)O.lens[P++]=8;for(;P<256;)O.lens[P++]=9;for(;P<280;)O.lens[P++]=7;for(;P<288;)O.lens[P++]=8;for(R(D,O.lens,0,288,$,0,O.work,{bits:9}),P=0;P<32;)O.lens[P++]=5;R(L,O.lens,0,32,ee,0,O.work,{bits:5}),re=!1}if(O.lencode=$,O.lenbits=9,O.distcode=ee,O.distbits=5,r.mode=16199,t!==N)break;l>>>=2,c-=2;break e;case 2:r.mode=16196;break;case 3:e.msg="invalid block type",r.mode=J}l>>>=2,c-=2}break;case 16193:for(l>>>=7&c,c-=7&c;c<32;){if(0===s)break e;s--,l+=n[o++]<<c,c+=8}if((65535&l)!=(l>>>16^65535)){e.msg="invalid stored block lengths",r.mode=J;break}if(r.length=65535&l,c=l=0,r.mode=16194,t===N)break e;case 16194:r.mode=16195;case 16195:if(p=r.length){if(0===(p=u<(p=s<p?s:p)?u:p))break e;i.set(n.subarray(o,o+p),a),s-=p,o+=p,u-=p,a+=p,r.length-=p}else r.mode=X;break;case 16196:for(;c<14;){if(0===s)break e;s--,l+=n[o++]<<c,c+=8}if(r.nlen=257+(31&l),l>>>=5,c-=5,r.ndist=1+(31&l),l>>>=5,c-=5,r.ncode=4+(15&l),l>>>=4,c-=4,286<r.nlen||30<r.ndist){e.msg="too many length or distance symbols",r.mode=J;break}r.have=0,r.mode=16197;case 16197:for(;r.have<r.ncode;){for(;c<3;){if(0===s)break e;s--,l+=n[o++]<<c,c+=8}r.lens[x[r.have++]]=7&l,l>>>=3,c-=3}for(;r.have<19;)r.lens[x[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,C={bits:r.lenbits},E=R(0,r.lens,0,19,r.lencode,0,r.work,C),r.lenbits=C.bits,E){e.msg="invalid code lengths set",r.mode=J;break}r.have=0,r.mode=16198;case 16198:for(;r.have<r.nlen+r.ndist;){for(;A=(S=r.lencode[l&(1<<r.lenbits)-1])>>>16&255,m=65535&S,!((y=S>>>24)<=c);){if(0===s)break e;s--,l+=n[o++]<<c,c+=8}if(m<16)l>>>=y,c-=y,r.lens[r.have++]=m;else{if(16===m){for(I=y+2;c<I;){if(0===s)break e;s--,l+=n[o++]<<c,c+=8}if(l>>>=y,c-=y,0===r.have){e.msg="invalid bit length repeat",r.mode=J;break}w=r.lens[r.have-1],p=3+(3&l),l>>>=2,c-=2}else if(17===m){for(I=y+3;c<I;){if(0===s)break e;s--,l+=n[o++]<<c,c+=8}w=0,p=3+(7&(l>>>=y)),l>>>=3,c=c-y-3}else{for(I=y+7;c<I;){if(0===s)break e;s--,l+=n[o++]<<c,c+=8}w=0,p=11+(127&(l>>>=y)),l>>>=7,c=c-y-7}if(r.have+p>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=J;break}for(;p--;)r.lens[r.have++]=w}}if(r.mode===J)break;if(0===r.lens[256]){e.msg="invalid code -- missing end-of-block",r.mode=J;break}if(r.lenbits=9,C={bits:r.lenbits},E=R(D,r.lens,0,r.nlen,r.lencode,0,r.work,C),r.lenbits=C.bits,E){e.msg="invalid literal/lengths set",r.mode=J;break}if(r.distbits=6,r.distcode=r.distdyn,C={bits:r.distbits},E=R(L,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,C),r.distbits=C.bits,E){e.msg="invalid distances set",r.mode=J;break}if(r.mode=16199,t===N)break e;case 16199:r.mode=16200;case 16200:if(6<=s&&258<=u){e.next_out=a,e.avail_out=u,e.next_in=o,e.avail_in=s,r.hold=l,r.bits=c,M(e,h),a=e.next_out,i=e.output,u=e.avail_out,o=e.next_in,n=e.input,s=e.avail_in,l=r.hold,c=r.bits,r.mode===X&&(r.back=-1);break}for(r.back=0;A=(S=r.lencode[l&(1<<r.lenbits)-1])>>>16&255,m=65535&S,!((y=S>>>24)<=c);){if(0===s)break e;s--,l+=n[o++]<<c,c+=8}if(A&&0==(240&A)){for(v=y,b=A,_=m;A=(S=r.lencode[_+((l&(1<<v+b)-1)>>v)])>>>16&255,m=65535&S,!(v+(y=S>>>24)<=c);){if(0===s)break e;s--,l+=n[o++]<<c,c+=8}l>>>=v,c-=v,r.back+=v}if(l>>>=y,c-=y,r.back+=y,r.length=m,0===A){r.mode=16205;break}if(32&A){r.back=-1,r.mode=X;break}if(64&A){e.msg="invalid literal/length code",r.mode=J;break}r.extra=15&A,r.mode=16201;case 16201:if(r.extra){for(I=r.extra;c<I;){if(0===s)break e;s--,l+=n[o++]<<c,c+=8}r.length+=l&(1<<r.extra)-1,l>>>=r.extra,c-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=16202;case 16202:for(;A=(S=r.distcode[l&(1<<r.distbits)-1])>>>16&255,m=65535&S,!((y=S>>>24)<=c);){if(0===s)break e;s--,l+=n[o++]<<c,c+=8}if(0==(240&A)){for(v=y,b=A,_=m;A=(S=r.distcode[_+((l&(1<<v+b)-1)>>v)])>>>16&255,m=65535&S,!(v+(y=S>>>24)<=c);){if(0===s)break e;s--,l+=n[o++]<<c,c+=8}l>>>=v,c-=v,r.back+=v}if(l>>>=y,c-=y,r.back+=y,64&A){e.msg="invalid distance code",r.mode=J;break}r.offset=m,r.extra=15&A,r.mode=16203;case 16203:if(r.extra){for(I=r.extra;c<I;){if(0===s)break e;s--,l+=n[o++]<<c,c+=8}r.offset+=l&(1<<r.extra)-1,l>>>=r.extra,c-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=J;break}r.mode=16204;case 16204:if(0===u)break e;if(r.offset>(p=h-u)){if((p=r.offset-p)>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=J;break}d=p>r.wnext?(p-=r.wnext,r.wsize-p):r.wnext-p,p>r.length&&(p=r.length),g=r.window}else g=i,d=a-r.offset,p=r.length;for(u-=p=u<p?u:p,r.length-=p;i[a++]=g[d++],--p;);0===r.length&&(r.mode=16200);break;case 16205:if(0===u)break e;i[a++]=r.length,u--,r.mode=16200;break;case 16206:if(r.wrap){for(;c<32;){if(0===s)break e;s--,l|=n[o++]<<c,c+=8}if(h-=u,e.total_out+=h,r.total+=h,4&r.wrap&&h&&(e.adler=r.check=(r.flags?T:B)(r.check,i,h,a-h)),h=u,4&r.wrap&&(r.flags?l:k(l))!==r.check){e.msg="incorrect data check",r.mode=J;break}c=l=0}r.mode=16207;case 16207:if(r.wrap&&r.flags){for(;c<32;){if(0===s)break e;s--,l+=n[o++]<<c,c+=8}if(4&r.wrap&&l!==(4294967295&r.total)){e.msg="incorrect length check",r.mode=J;break}c=l=0}r.mode=16208;case 16208:E=U;break e;case J:E=H;break e;case 16210:return W;default:return q}return e.next_out=a,e.avail_out=u,e.next_in=o,e.avail_in=s,r.hold=l,r.bits=c,(r.wsize||h!==e.avail_out&&r.mode<J&&(r.mode<16206||t!==Q))&&Z(e,e.output,e.next_out,h-e.avail_out)?(r.mode=16210,W):(f-=e.avail_in,h-=e.avail_out,e.total_in+=f,e.total_out+=h,r.total+=h,4&r.wrap&&h&&(e.adler=r.check=(r.flags?T:B)(r.check,i,h,e.next_out-h)),e.data_type=r.bits+(r.last?64:0)+(r.mode===X?128:0)+(16199===r.mode||16194===r.mode?256:0),E=(0==f&&0===h||t===Q)&&E===G?Y:E)},t.exports.inflateEnd=function(e){var t;return te(e)?q:((t=e.state).window&&(t.window=null),e.state=null,G)},t.exports.inflateGetHeader=function(e,t){return te(e)||0==(2&(e=e.state).wrap)?q:((e.head=t).done=!1,G)},t.exports.inflateSetDictionary=function(e,t){var r,n=t.length;return te(e)||0!==(r=e.state).wrap&&16190!==r.mode?q:16190===r.mode&&B(1,t,n,0)!==r.check?H:Z(e,t,n,n)?(r.mode=16210,W):(r.havedict=1,G)},t.exports.inflateInfo="pako inflate (from Nodeca project)"},{"./adler32":59,"./constants":60,"./crc32":61,"./inffast":64,"./inftrees":66}],66:[function(e,t,r){"use strict";var B=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),T=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),M=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),R=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);t.exports=function(e,t,r,n,i,o,a,s){for(var u,l,c,f,h,p,d,g,y,A=s.bits,m=0,v=0,b=0,_=0,w=0,E=0,C=0,I=0,S=0,j=0,x=null,O=new Uint16Array(16),P=new Uint16Array(16),k=null,m=0;m<=15;m++)O[m]=0;for(v=0;v<n;v++)O[t[r+v]]++;for(w=A,_=15;1<=_&&0===O[_];_--);if(_<w&&(w=_),0===_)i[o++]=20971520,i[o++]=20971520,s.bits=1;else{for(b=1;b<_&&0===O[b];b++);for(w<b&&(w=b),m=I=1;m<=15;m++)if((I=(I<<1)-O[m])<0)return-1;if(0<I&&(0===e||1!==_))return-1;for(P[1]=0,m=1;m<15;m++)P[m+1]=P[m]+O[m];for(v=0;v<n;v++)0!==t[r+v]&&(a[P[t[r+v]]++]=v);if(p=0===e?(x=k=a,20):1===e?(x=B,k=T,257):(x=M,k=R,0),m=b,h=o,C=v=j=0,c=-1,f=(S=1<<(E=w))-1,1===e&&852<S||2===e&&592<S)return 1;for(;;){for(y=a[v]+1<p?(g=0,a[v]):a[v]>=p?(g=k[a[v]-p],x[a[v]-p]):(g=96,0),u=1<<(d=m-C),b=l=1<<E;i[h+(j>>C)+(l-=u)]=d<<24|g<<16|y|0,0!==l;);for(u=1<<m-1;j&u;)u>>=1;if(0!==u?j=(j&u-1)+u:j=0,v++,0==--O[m]){if(m===_)break;m=t[r+a[v]]}if(w<m&&(j&f)!==c){for(h+=b,I=1<<(E=m-(C=0===C?w:C));E+C<_&&!((I-=O[E+C])<=0);)E++,I<<=1;if(S+=1<<E,1===e&&852<S||2===e&&592<S)return 1;i[c=j&f]=w<<24|E<<16|h-o|0}}0!==j&&(i[h+j]=m-C<<24|64<<16|0),s.bits=w}return 0}},{}],67:[function(e,t,r){"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],68:[function(r,e,a){"use strict";var c=0,f=1;function t(e){for(var t=e.length;0<=--t;)e[t]=0}var s=29,h=256,u=h+1+s,l=30,p=19,y=2*u+1,A=15,n=16,Q=7,d=256,g=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),m=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),F=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),v=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),b=new Array(2*(u+2)),_=(t(b),new Array(2*l)),w=(t(_),new Array(512)),E=(t(w),new Array(256)),C=(t(E),new Array(s));t(C);var I,S,j,x=new Array(l);function O(e,t,r,n,i){this.static_tree=e,this.extra_bits=t,this.extra_base=r,this.elems=n,this.max_length=i,this.has_stree=e&&e.length}function P(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}t(x);function k(e){for(var t=0;t<u;t++)e.dyn_ltree[2*t]=0;for(t=0;t<l;t++)e.dyn_dtree[2*t]=0;for(t=0;t<p;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*d]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0}function B(e){8<e.bi_valid?i(e,e.bi_buf):0<e.bi_valid&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function o(e,t,r,n){var i=2*t,o=2*r;return e[i]<e[o]||e[i]===e[o]&&n[t]<=n[r]}function T(e,t,r){var n,i,o,a,s=0;if(0!==e.sym_next)for(;n=255&e.pending_buf[e.sym_buf+s++],n+=(255&e.pending_buf[e.sym_buf+s++])<<8,i=e.pending_buf[e.sym_buf+s++],0==n?R(e,i,t):(o=E[i],R(e,o+h+1,t),0!==(a=g[o])&&(i-=C[o],M(e,i,a)),o=G(--n),R(e,o,r),0!==(a=m[o])&&(n-=x[o],M(e,n,a))),s<e.sym_next;);R(e,d,t)}function N(e,t,r,n){M(e,0+(n?1:0),3),B(e),i(e,r),i(e,~r),r&&e.pending_buf.set(e.window.subarray(t,t+r),e.pending),e.pending+=r}var G=function(e){return e<256?w[e]:w[256+(e>>>7)]},i=function(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255},M=function(e,t,r){e.bi_valid>n-r?(e.bi_buf|=t<<e.bi_valid&65535,i(e,e.bi_buf),e.bi_buf=t>>n-e.bi_valid,e.bi_valid+=r-n):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=r)},R=function(e,t,r){M(e,r[2*t],r[2*t+1])},U=function(e,t){for(var r=0;r|=1&e,e>>>=1,r<<=1,0<--t;);return r>>>1},z=function(e,t){for(var r,n,i,o,a,s=t.dyn_tree,u=t.max_code,l=t.stat_desc.static_tree,c=t.stat_desc.has_stree,f=t.stat_desc.extra_bits,h=t.stat_desc.extra_base,p=t.stat_desc.max_length,d=0,g=0;g<=A;g++)e.bl_count[g]=0;for(s[2*e.heap[e.heap_max]+1]=0,r=e.heap_max+1;r<y;r++)(g=s[2*s[2*(n=e.heap[r])+1]+1]+1)>p&&(g=p,d++),s[2*n+1]=g,u<n||(e.bl_count[g]++,o=0,h<=n&&(o=f[n-h]),a=s[2*n],e.opt_len+=a*(g+o),c&&(e.static_len+=a*(l[2*n+1]+o)));if(0!==d){do{for(g=p-1;0===e.bl_count[g];)g--}while(e.bl_count[g]--,e.bl_count[g+1]+=2,e.bl_count[p]--,0<(d-=2));for(g=p;0!==g;g--)for(n=e.bl_count[g];0!==n;)(i=e.heap[--r])>u||(s[2*i+1]!==g&&(e.opt_len+=(g-s[2*i+1])*s[2*i],s[2*i+1]=g),n--)}},q=function(e,t,r){for(var n,i=new Array(A+1),o=0,a=1;a<=A;a++)o=o+r[a-1]<<1,i[a]=o;for(n=0;n<=t;n++){var s=e[2*n+1];0!==s&&(e[2*n]=U(i[s]++,s))}},D=function(e,t,r){for(var n=e.heap[r],i=r<<1;i<=e.heap_len&&(i<e.heap_len&&o(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!o(t,n,e.heap[i],e.depth));)e.heap[r]=e.heap[i],r=i,i<<=1;e.heap[r]=n},L=function(e,t){var r,n,i,o=t.dyn_tree,a=t.stat_desc.static_tree,s=t.stat_desc.has_stree,u=t.stat_desc.elems,l=-1;for(e.heap_len=0,e.heap_max=y,r=0;r<u;r++)0!==o[2*r]?(e.heap[++e.heap_len]=l=r,e.depth[r]=0):o[2*r+1]=0;for(;e.heap_len<2;)o[2*(i=e.heap[++e.heap_len]=l<2?++l:0)]=1,e.depth[i]=0,e.opt_len--,s&&(e.static_len-=a[2*i+1]);for(t.max_code=l,r=e.heap_len>>1;1<=r;r--)D(e,o,r);for(i=u;r=e.heap[1],e.heap[1]=e.heap[e.heap_len--],D(e,o,1),n=e.heap[1],e.heap[--e.heap_max]=r,e.heap[--e.heap_max]=n,o[2*i]=o[2*r]+o[2*n],e.depth[i]=(e.depth[r]>=e.depth[n]?e.depth[r]:e.depth[n])+1,o[2*r+1]=o[2*n+1]=i,e.heap[1]=i++,D(e,o,1),2<=e.heap_len;);e.heap[--e.heap_max]=e.heap[1],z(e,t),q(o,l,e.bl_count)},H=function(e,t,r){var n,i,o=-1,a=t[1],s=0,u=7,l=4;for(0===a&&(u=138,l=3),t[2*(r+1)+1]=65535,n=0;n<=r;n++)i=a,a=t[2*(n+1)+1],++s<u&&i===a||(s<l?e.bl_tree[2*i]+=s:0!==i?(i!==o&&e.bl_tree[2*i]++,e.bl_tree[32]++):s<=10?e.bl_tree[34]++:e.bl_tree[36]++,o=i,l=(s=0)===a?(u=138,3):i===a?(u=6,3):(u=7,4))},W=function(e,t,r){var n,i,o=-1,a=t[1],s=0,u=7,l=4;for(0===a&&(u=138,l=3),n=0;n<=r;n++)if(i=a,a=t[2*(n+1)+1],!(++s<u&&i===a)){if(s<l)for(;R(e,i,e.bl_tree),0!=--s;);else 0!==i?(i!==o&&(R(e,i,e.bl_tree),s--),R(e,16,e.bl_tree),M(e,s-3,2)):s<=10?(R(e,17,e.bl_tree),M(e,s-3,3)):(R(e,18,e.bl_tree),M(e,s-11,7));o=i,l=(s=0)===a?(u=138,3):i===a?(u=6,3):(u=7,4)}},Y=!1;e.exports._tr_init=function(e){if(!Y){for(var t,r,n,i=new Array(A+1),o=0,a=0;a<s-1;a++)for(C[a]=o,t=0;t<1<<g[a];t++)E[o++]=a;for(E[o-1]=a,a=n=0;a<16;a++)for(x[a]=n,t=0;t<1<<m[a];t++)w[n++]=a;for(n>>=7;a<l;a++)for(x[a]=n<<7,t=0;t<1<<m[a]-7;t++)w[256+n++]=a;for(r=0;r<=A;r++)i[r]=0;for(t=0;t<=143;)b[2*t+1]=8,t++,i[8]++;for(;t<=255;)b[2*t+1]=9,t++,i[9]++;for(;t<=279;)b[2*t+1]=7,t++,i[7]++;for(;t<=287;)b[2*t+1]=8,t++,i[8]++;for(q(b,u+1,i),t=0;t<l;t++)_[2*t+1]=5,_[2*t]=U(t,5);I=new O(b,g,h+1,u,A),S=new O(_,m,0,l,A),j=new O(new Array(0),F,0,p,Q),Y=!0}e.l_desc=new P(e.dyn_ltree,I),e.d_desc=new P(e.dyn_dtree,S),e.bl_desc=new P(e.bl_tree,j),e.bi_buf=0,e.bi_valid=0,k(e)},e.exports._tr_stored_block=N,e.exports._tr_flush_block=function(e,t,r,n){var i,o,a,s=0;if(0<e.level?(2===e.strm.data_type&&(e.strm.data_type=function(e){for(var t=4093624447,r=0;r<=31;r++,t>>>=1)if(1&t&&0!==e.dyn_ltree[2*r])return c;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return f;for(r=32;r<h;r++)if(0!==e.dyn_ltree[2*r])return f;return c}(e)),L(e,e.l_desc),L(e,e.d_desc),s=function(e){var t;for(H(e,e.dyn_ltree,e.l_desc.max_code),H(e,e.dyn_dtree,e.d_desc.max_code),L(e,e.bl_desc),t=p-1;3<=t&&0===e.bl_tree[2*v[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),i=e.opt_len+3+7>>>3,(o=e.static_len+3+7>>>3)<=i&&(i=o)):i=o=r+5,r+4<=i&&-1!==t)N(e,t,r,n);else if(4===e.strategy||o===i)M(e,2+(n?1:0),3),T(e,b,_);else{M(e,4+(n?1:0),3);var u=e,l=(t=e.l_desc.max_code+1,r=e.d_desc.max_code+1,s+1);for(M(u,t-257,5),M(u,r-1,5),M(u,l-4,4),a=0;a<l;a++)M(u,u.bl_tree[2*v[a]+1],3);W(u,u.dyn_ltree,t-1),W(u,u.dyn_dtree,r-1),T(e,e.dyn_ltree,e.dyn_dtree)}k(e),n&&B(e)},e.exports._tr_tally=function(e,t,r){return e.pending_buf[e.sym_buf+e.sym_next++]=t,e.pending_buf[e.sym_buf+e.sym_next++]=t>>8,e.pending_buf[e.sym_buf+e.sym_next++]=r,0===t?e.dyn_ltree[2*r]++:(e.matches++,t--,e.dyn_ltree[2*(E[r]+h+1)]++,e.dyn_dtree[2*G(t)]++),e.sym_next===e.sym_end},e.exports._tr_align=function(e){M(e,2,3),R(e,d,b),16===(e=e).bi_valid?(i(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):8<=e.bi_valid&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}},{}],69:[function(e,t,r){"use strict";t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],70:[function(e,t,r){"use strict";var n,i=e("http"),o=e("url"),a=t.exports;for(n in i)i.hasOwnProperty(n)&&(a[n]=i[n]);function s(e){if((e="string"==typeof e?o.parse(e):e).protocol||(e.protocol="https:"),"https:"!==e.protocol)throw new Error('Protocol "'+e.protocol+'" not supported. Expected "https:"');return e}a.request=function(e,t){return e=s(e),i.request.call(this,e,t)},a.get=function(e,t){return e=s(e),i.get.call(this,e,t)}},{http:428,url:449}],71:[function(e,t,r){"use strict";r.read=function(e,t,r,n,i){var o,a,s=8*i-n-1,u=(1<<s)-1,l=u>>1,c=-7,f=r?i-1:0,h=r?-1:1,i=e[t+f];for(f+=h,o=i&(1<<-c)-1,i>>=-c,c+=s;0<c;o=256*o+e[t+f],f+=h,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=n;0<c;a=256*a+e[t+f],f+=h,c-=8);if(0===o)o=1-l;else{if(o===u)return a?NaN:1/0*(i?-1:1);a+=Math.pow(2,n),o-=l}return(i?-1:1)*a*Math.pow(2,o-n)},r.write=function(e,t,r,n,i,o){var a,s,u=8*o-i-1,l=(1<<u)-1,c=l>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=n?0:o-1,p=n?1:-1,o=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=l):(a=Math.floor(Math.log(t)/Math.LN2),t*(n=Math.pow(2,-a))<1&&(a--,n*=2),2<=(t+=1<=a+c?f/n:f*Math.pow(2,1-c))*n&&(a++,n/=2),l<=a+c?(s=0,a=l):1<=a+c?(s=(t*n-1)*Math.pow(2,i),a+=c):(s=t*Math.pow(2,c-1)*Math.pow(2,i),a=0));8<=i;e[r+h]=255&s,h+=p,s/=256,i-=8);for(a=a<<i|s,u+=i;0<u;e[r+h]=255&a,h+=p,a/=256,u-=8);e[r+h-p]|=128*o}},{}],72:[function(e,t,r){"use strict";"function"==typeof Object.create?t.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(e,t){var r;t&&(e.super_=t,(r=function(){}).prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e)}},{}],73:[function(e,n,t){"use strict";!function(){o=function(e,t,r,n,i){var o,a,s,u=0,l=e.pixels.numBlocksX,c=e.pixels.numBlocksY,f=Math.floor(e.width/l),h=Math.floor(e.height/c),p=2*e.maxZError,d=Number.MAX_VALUE;r=r||(e.mask?e.mask.bitset:null),a=new t(e.width*e.height),i&&r&&(s=new Uint8Array(e.width*e.height));for(var g,y,A=new Float32Array(f*h),m=0;m<=c;m++){var v=m!==c?h:e.height%c;if(0!==v)for(var b=0;b<=l;b++){var _=b!==l?f:e.width%l;if(0!==_){var w,E,C,I,S=m*e.width*h+b*f,j=e.width-_,x=e.pixels.blocks[u];if(x.encoding<2?(w=0===x.encoding?x.rawData:(O(x.stuffedData,x.bitsPerPixel,x.numValidPixels,x.offset,p,A,e.pixels.maxValue),A),E=0):C=2===x.encoding?0:x.offset,r)for(y=0;y<v;y++){for(7&S&&(I=r[S>>3],I<<=7&S),g=0;g<_;g++)128&(I=7&S?I:r[S>>3])?(s&&(s[S]=1),d=d>(o=x.encoding<2?w[E++]:C)?o:d,a[S++]=o):(s&&(s[S]=0),a[S++]=n),I<<=1;S+=j}else if(x.encoding<2)for(y=0;y<v;y++){for(g=0;g<_;g++)d=d>(o=w[E++])?o:d,a[S++]=o;S+=j}else for(d=C<d?C:d,y=0;y<v;y++){for(g=0;g<_;g++)a[S++]=C;S+=j}if(1===x.encoding&&E!==x.numValidPixels)throw"Block and Mask do not match";u++}}}return{resultPixels:a,resultMask:s,minValue:d}},a=function(e){return{fileIdentifierString:e.fileIdentifierString,fileVersion:e.fileVersion,imageType:e.imageType,height:e.height,width:e.width,maxZError:e.maxZError,eofOffset:e.eofOffset,mask:e.mask?{numBlocksX:e.mask.numBlocksX,numBlocksY:e.mask.numBlocksY,numBytes:e.mask.numBytes,maxValue:e.mask.maxValue}:null,pixels:{numBlocksX:e.pixels.numBlocksX,numBlocksY:e.pixels.numBlocksY,numBytes:e.pixels.numBytes,maxValue:e.pixels.maxValue,noDataValue:e.noDataValue}}},s=function(e){for(var t=e.pixels.numBlocksX*e.pixels.numBlocksY,r={},n=0;n<t;n++){var i=e.pixels.blocks[n];0===i.encoding?r.float32=!0:1===i.encoding?r[i.bitsPerPixel]=!0:r[0]=!0}return Object.keys(r)},u=function(e,t,r){var n={},i=new Uint8Array(e,t,10);if(n.fileIdentifierString=String.fromCharCode.apply(null,i),"CntZImage"!==n.fileIdentifierString.trim())throw"Unexpected file identifier string: "+n.fileIdentifierString;t+=10;var o=new DataView(e,t,24);if(n.fileVersion=o.getInt32(0,!0),n.imageType=o.getInt32(4,!0),n.height=o.getUint32(8,!0),n.width=o.getUint32(12,!0),n.maxZError=o.getFloat64(16,!0),t+=24,!r)if(o=new DataView(e,t,16),n.mask={},n.mask.numBlocksY=o.getUint32(0,!0),n.mask.numBlocksX=o.getUint32(4,!0),n.mask.numBytes=o.getUint32(8,!0),n.mask.maxValue=o.getFloat32(12,!0),t+=16,0<n.mask.numBytes){var a=new Uint8Array(Math.ceil(n.width*n.height/8)),s=(o=new DataView(e,t,n.mask.numBytes)).getInt16(0,!0),u=2,l=0;do{if(0<s)for(;s--;)a[l++]=o.getUint8(u++);else for(var c=o.getUint8(u++),s=-s;s--;)a[l++]=c}while(s=o.getInt16(u,!0),(u+=2)<n.mask.numBytes);if(-32768!==s||l<a.length)throw"Unexpected end of mask RLE encoding";n.mask.bitset=a,t+=n.mask.numBytes}else 0==(n.mask.numBytes|n.mask.numBlocksY|n.mask.maxValue)&&(n.mask.bitset=new Uint8Array(Math.ceil(n.width*n.height/8)));o=new DataView(e,t,16),n.pixels={},n.pixels.numBlocksY=o.getUint32(0,!0),n.pixels.numBlocksX=o.getUint32(4,!0),n.pixels.numBytes=o.getUint32(8,!0),n.pixels.maxValue=o.getFloat32(12,!0),t+=16;var i=n.pixels.numBlocksX,r=n.pixels.numBlocksY,f=i+(0<n.width%i?1:0),h=r+(0<n.height%r?1:0);n.pixels.blocks=new Array(f*h);for(var p=0,d=0;d<h;d++)for(var g=0;g<f;g++){var y,A=0,m=e.byteLength-t,o=new DataView(e,t,Math.min(10,m)),m={},v=(n.pixels.blocks[p++]=m,o.getUint8(0));if(A++,m.encoding=63&v,3<m.encoding)throw"Invalid block encoding ("+m.encoding+")";if(2!==m.encoding){if(0!==v&&2!==v){if(v>>=6,2==(m.offsetType=v))m.offset=o.getInt8(1),A++;else if(1==v)m.offset=o.getInt16(1,!0),A+=2;else{if(0!=v)throw"Invalid block offset type";m.offset=o.getFloat32(1,!0),A+=4}if(1===m.encoding)if(v=o.getUint8(A),A++,m.bitsPerPixel=63&v,v>>=6,2==(m.numValidPixelsType=v))m.numValidPixels=o.getUint8(A),A++;else if(1==v)m.numValidPixels=o.getUint16(A,!0),A+=2;else{if(0!=v)throw"Invalid valid pixel count type";m.numValidPixels=o.getUint32(A,!0),A+=4}}if(t+=A,3!==m.encoding)if(0===m.encoding){var v=(n.pixels.numBytes-1)/4;if(v!==Math.floor(v))throw"uncompressed block has invalid length";y=new ArrayBuffer(4*v),new Uint8Array(y).set(new Uint8Array(e,t,4*v));var A=new Float32Array(y);m.rawData=A,t+=4*v}else 1===m.encoding&&(A=Math.ceil(m.numValidPixels*m.bitsPerPixel/8),v=Math.ceil(A/4),y=new ArrayBuffer(4*v),new Uint8Array(y).set(new Uint8Array(e,t,A)),m.stuffedData=new Uint32Array(y),t+=A)}else t++}return n.eofOffset=t,n},O=function(e,t,r,n,i,o,a){var s,u,l,c,f=(1<<t)-1,h=0,p=0,d=Math.ceil((a-n)/i),g=4*e.length-Math.ceil(t*r/8);for(e[e.length-1]<<=8*g,s=0;s<r;s++)0===p&&(u=e[h++],p=32),t<=p?(c=u>>>p-t&f,p-=t):(c=(u&f)<<(l=t-p)&f,c+=(u=e[h++])>>>(p=32-l)),o[s]=c<d?n+c*i:a;return o};var i,o,a,s,u,O,b,_,w,E,C,I,U,j,e,t,m=i={defaultNoDataValue:-34027999387901484e22,decode:function(e,t){var r=(t=t||{}).encodedMaskData||null===t.encodedMaskData,e=u(e,t.inputOffset||0,r),r=null!==t.noDataValue?t.noDataValue:i.defaultNoDataValue,n=o(e,t.pixelType||Float32Array,t.encodedMaskData,r,t.returnMask),r={width:e.width,height:e.height,pixelData:n.resultPixels,minValue:n.minValue,maxValue:e.pixels.maxValue,noDataValue:r};return n.resultMask&&(r.maskData=n.resultMask),t.returnEncodedMask&&e.mask&&(r.encodedMaskData=e.mask.bitset||null),t.returnFileInfo&&(r.fileInfo=a(e),t.computeUsedBitDepths)&&(r.fileInfo.bitDepths=s(e)),r}},v=(b=function(e,t,r,n,i,o,a,s){var u,l,c,f,h,p=(1<<r)-1,d=0,g=0,y=4*e.length-Math.ceil(r*n/8);if(e[e.length-1]<<=8*y,i)for(u=0;u<n;u++)0===g&&(c=e[d++],g=32),r<=g?(l=c>>>g-r&p,g-=r):(l=(c&p)<<(f=r-g)&p,l+=(c=e[d++])>>>(g=32-f)),t[u]=i[l];else for(h=Math.ceil((s-o)/a),u=0;u<n;u++)0===g&&(c=e[d++],g=32),r<=g?(l=c>>>g-r&p,g-=r):(l=(c&p)<<(f=r-g)&p,l+=(c=e[d++])>>>(g=32-f)),t[u]=l<h?o+l*a:s},_=function(e,t,r,n,i,o){for(var a,s,u=(1<<t)-1,l=0,c=0,f=0,h=0,p=[],d=4*e.length-Math.ceil(t*r/8),g=(e[e.length-1]<<=8*d,Math.ceil((o-n)/i)),c=0;c<r;c++)0===f&&(a=e[l++],f=32),t<=f?(h=a>>>f-t&u,f-=t):(h=(a&u)<<(s=t-f)&u,h+=(a=e[l++])>>>(f=32-s)),p[c]=h<g?n+h*i:o;return p.unshift(n),p},w=function(e,t,r,n,i,o,a,s){var u,l,c,f=(1<<r)-1,h=0,p=0,d=0;if(i)for(y=0;y<n;y++)0===p&&(l=e[h++],p=32,d=0),r<=p?(u=l>>>d&f,p-=r,d+=r):(u=l>>>d&f,p=32-(c=r-p),u|=((l=e[h++])&(1<<c)-1)<<r-c,d=c),t[y]=i[u];else for(var g=Math.ceil((s-o)/a),y=0;y<n;y++)0===p&&(l=e[h++],p=32,d=0),r<=p?(u=l>>>d&f,p-=r,d+=r):(u=l>>>d&f,p=32-(c=r-p),u|=((l=e[h++])&(1<<c)-1)<<r-c,d=c),t[y]=u<g?o+u*a:s;return t},E=function(e,t,r,n,i,o){for(var a,s,u=(1<<t)-1,l=0,c=0,f=0,h=0,p=0,d=[],g=Math.ceil((o-n)/i),c=0;c<r;c++)0===f&&(a=e[l++],f=32,p=0),t<=f?(h=a>>>p&u,f-=t,p+=t):(h=a>>>p&u,f=32-(s=t-f),h|=((a=e[l++])&(1<<s)-1)<<t-s,p=s),d[c]=h<g?n+h*i:o;return d.unshift(n),d},C=function(e,t,r,n){var i,o,a,s,u=(1<<r)-1,l=0,c=0,f=4*e.length-Math.ceil(r*n/8);for(e[e.length-1]<<=8*f,i=0;i<n;i++)0===c&&(a=e[l++],c=32),r<=c?(o=a>>>c-r&u,c-=r):(o=(a&u)<<(s=r-c)&u,o+=(a=e[l++])>>>(c=32-s)),t[i]=o;return t},I=function(e,t,r,n){for(var i,o,a,s=(1<<r)-1,u=0,l=0,c=0,f=0;f<n;f++)0===l&&(o=e[u++],l=32,c=0),r<=l?(i=o>>>c&s,l-=r,c+=r):(i=o>>>c&s,l=32-(a=r-l),i|=((o=e[u++])&(1<<a)-1)<<r-a,c=a),t[f]=i;return t},U={HUFFMAN_LUT_BITS_MAX:12,computeChecksumFletcher32:function(e){for(var t=65535,r=65535,n=e.length,i=Math.floor(n/2),o=0;i;){var a=359<=i?359:i;for(i-=a;r+=t=(t+=e[o++]<<8)+e[o++],--a;);t=(65535&t)+(t>>>16),r=(65535&r)+(r>>>16)}return 1&n&&(r+=t+=e[o]<<8),((r=(65535&r)+(r>>>16))<<16|(65535&t)+(t>>>16))>>>0},readHeaderInfo:function(e,t){var r=t.ptr,n=new Uint8Array(e,r,6),i={};if(i.fileIdentifierString=String.fromCharCode.apply(null,n),0!==i.fileIdentifierString.lastIndexOf("Lerc2",0))throw"Unexpected file identifier string (expect Lerc2 ): "+i.fileIdentifierString;r+=6;var n=new DataView(e,r,8),o=n.getInt32(0,!0);if(r+=4,3<=(i.fileVersion=o)&&(i.checksum=n.getUint32(4,!0),r+=4),n=new DataView(e,r,12),i.height=n.getUint32(0,!0),i.width=n.getUint32(4,!0),r+=8,4<=o?(i.numDims=n.getUint32(8,!0),r+=4):i.numDims=1,n=new DataView(e,r,40),i.numValidPixel=n.getUint32(0,!0),i.microBlockSize=n.getInt32(4,!0),i.blobSize=n.getInt32(8,!0),i.imageType=n.getInt32(12,!0),i.maxZError=n.getFloat64(16,!0),i.zMin=n.getFloat64(24,!0),i.zMax=n.getFloat64(32,!0),r+=40,t.headerInfo=i,t.ptr=r,3<=o&&this.computeChecksumFletcher32(new Uint8Array(e,r-(4<=o?52:48),i.blobSize-14))!==i.checksum)throw"Checksum failed.";return!0},checkMinMaxRanges:function(e,t){var r=t.headerInfo,n=this.getDataTypeArray(r.imageType),i=r.numDims*this.getDataTypeSize(r.imageType),o=this.readSubArray(e,t.ptr,n,i),a=this.readSubArray(e,t.ptr+i,n,i);t.ptr+=2*i;for(var s=!0,u=0;u<r.numDims;u++)if(o[u]!==a[u]){s=!1;break}return r.minValues=o,r.maxValues=a,s},readSubArray:function(e,t,r,n){var i,e=r===Uint8Array?new Uint8Array(e,t,n):(i=new ArrayBuffer(n),new Uint8Array(i).set(new Uint8Array(e,t,n)),new r(i));return e},readMask:function(e,t){var r=t.ptr,n=t.headerInfo,i=n.width*n.height,n=n.numValidPixel,o=new DataView(e,r,4),a={};if(a.numBytes=o.getUint32(0,!0),r+=4,(0===n||i===n)&&0!==a.numBytes)throw"invalid mask";if(0===n)u=new Uint8Array(Math.ceil(i/8)),a.bitset=u,h=new Uint8Array(i),t.pixels.resultMask=h,r+=a.numBytes;else if(0<a.numBytes){var s,u=new Uint8Array(Math.ceil(i/8)),l=(o=new DataView(e,r,a.numBytes)).getInt16(0,!0),c=2,f=0;do{if(0<l)for(;l--;)u[f++]=o.getUint8(c++);else for(s=o.getUint8(c++),l=-l;l--;)u[f++]=s}while(l=o.getInt16(c,!0),(c+=2)<a.numBytes);if(-32768!==l||f<u.length)throw"Unexpected end of mask RLE encoding";for(var h=new Uint8Array(i),p=0,d=0,d=0;d<i;d++)7&d?(p=u[d>>3],p<<=7&d):p=u[d>>3],128&p&&(h[d]=1);t.pixels.resultMask=h,a.bitset=u,r+=a.numBytes}return t.ptr=r,t.mask=a,!0},readDataOneSweep:function(e,t,r,n){var i=t.ptr,o=t.headerInfo,a=o.numDims,s=o.width*o.height,u=o.imageType,o=o.numValidPixel*U.getDataTypeSize(u)*a,l=t.pixels.resultMask,c=r===Uint8Array?new Uint8Array(e,i,o):(u=new ArrayBuffer(o),new Uint8Array(u).set(new Uint8Array(e,i,o)),new r(u));if(c.length===s*a)t.pixels.resultPixels=n?U.swapDimensionOrder(c,s,a,r,!0):c;else{t.pixels.resultPixels=new r(s*a);var f=0,h=0,p=0,d=0;if(1<a){if(n){for(h=0;h<s;h++)if(l[h])for(d=h,p=0;p<a;p++,d+=s)t.pixels.resultPixels[d]=c[f++]}else for(h=0;h<s;h++)if(l[h])for(d=h*a,p=0;p<a;p++)t.pixels.resultPixels[d+p]=c[f++]}else for(h=0;h<s;h++)l[h]&&(t.pixels.resultPixels[h]=c[f++])}return t.ptr=i+=o,!0},readHuffmanTree:function(e,t){var r=this.HUFFMAN_LUT_BITS_MAX,n=new DataView(e,t.ptr,16);if(t.ptr+=16,n.getInt32(0,!0)<2)throw"unsupported Huffman version";var i=n.getInt32(4,!0),o=n.getInt32(8,!0),a=n.getInt32(12,!0);if(a<=o)return!1;var s=new Uint32Array(a-o);U.decodeBits(e,t,s);for(var u,l,c,f=[],h=o;h<a;h++)f[u=h-(h<i?0:i)]={first:s[h-o],second:null};var n=e.byteLength-t.ptr,p=Math.ceil(n/4),p=new ArrayBuffer(4*p);new Uint8Array(p).set(new Uint8Array(e,t.ptr,n));var d=new Uint32Array(p),g=0,y=0,A=d[0];for(h=o;h<a;h++)0<(c=f[u=h-(h<i?0:i)].first)&&(f[u].second=A<<g>>>32-c,c<=32-g?32===(g+=c)&&(g=0,A=d[++y]):(A=d[++y],f[u].second|=A>>>32-(g+=c-32)));var m=0,v=new j;for(h=0;h<f.length;h++)void 0!==f[h]&&(m=Math.max(m,f[h].first));var b,_,w,E,C,I=r<=m?r:m,S=[];for(h=o;h<a;h++)if(0<(c=f[u=h-(h<i?0:i)].first))if(b=[c,u],c<=I)for(_=f[u].second<<I-c,w=1<<I-c,l=0;l<w;l++)S[_|l]=b;else for(_=f[u].second,C=v,E=c-1;0<=E;E--)C=_>>>E&1?(C.right||(C.right=new j),C.right):(C.left||(C.left=new j),C.left),0!==E||C.val||(C.val=b[1]);return{decodeLut:S,numBitsLUTQick:I,numBitsLUT:m,tree:v,stuffedData:d,srcPtr:y,bitPos:g}},readHuffman:function(e,t,r,n){var i,o,a,s,u,l,c,f,h,p=t.headerInfo.numDims,d=t.headerInfo.height,g=t.headerInfo.width,y=g*d,e=this.readHuffmanTree(e,t),A=e.decodeLut,m=e.tree,v=e.stuffedData,b=e.srcPtr,_=e.bitPos,w=e.numBitsLUTQick,E=e.numBitsLUT,C=0===t.headerInfo.imageType?128:0,I=t.pixels.resultMask,S=0;0<_&&(b++,_=0);var j,x=v[b],O=1===t.encodeMode,P=new r(y*p),k=P;if(p<2||O){for(j=0;j<p;j++)if(1<p&&(k=new r(P.buffer,y*j,y),S=0),t.headerInfo.numValidPixel===g*d)for(l=f=0;l<d;l++)for(c=0;c<g;c++,f++){if(o=0,u=s=x<<_>>>32-w,A[u=32-_<w?s|=v[b+1]>>>64-_-w:u])o=A[u][1],_+=A[u][0];else for(u=s=x<<_>>>32-E,32-_<E&&(u=s|=v[b+1]>>>64-_-E),i=m,h=0;h<E;h++)if(!(i=s>>>E-h-1&1?i.right:i.left).left&&!i.right){o=i.val,_=_+h+1;break}32<=_&&(_-=32,x=v[++b]),a=o-C,O?(a=a+(!(0<c)&&0<l?k[f-g]:S)&255,S=k[f]=a):k[f]=a}else for(l=f=0;l<d;l++)for(c=0;c<g;c++,f++)if(I[f]){if(o=0,u=s=x<<_>>>32-w,A[u=32-_<w?s|=v[b+1]>>>64-_-w:u])o=A[u][1],_+=A[u][0];else for(u=s=x<<_>>>32-E,32-_<E&&(u=s|=v[b+1]>>>64-_-E),i=m,h=0;h<E;h++)if(!(i=s>>>E-h-1&1?i.right:i.left).left&&!i.right){o=i.val,_=_+h+1;break}32<=_&&(_-=32,x=v[++b]),a=o-C,O?(!(0<c&&I[f-1])&&0<l&&I[f-g]?a+=k[f-g]:a+=S,a&=255,S=k[f]=a):k[f]=a}}else for(l=f=0;l<d;l++)for(c=0;c<g;c++)if(f=l*g+c,!I||I[f])for(j=0;j<p;j++,f+=y){if(o=0,u=s=x<<_>>>32-w,A[u=32-_<w?s|=v[b+1]>>>64-_-w:u])o=A[u][1],_+=A[u][0];else for(u=s=x<<_>>>32-E,32-_<E&&(u=s|=v[b+1]>>>64-_-E),i=m,h=0;h<E;h++)if(!(i=s>>>E-h-1&1?i.right:i.left).left&&!i.right){o=i.val,_=_+h+1;break}32<=_&&(_-=32,x=v[++b]),k[f]=a=o-C}t.ptr=t.ptr+4*(b+1)+(0<_?4:0),t.pixels.resultPixels=P,1<p&&!n&&(t.pixels.resultPixels=U.swapDimensionOrder(P,y,p,r))},decodeBits:function(e,t,r,n,i){var o=t.headerInfo,a=o.fileVersion,s=0,u=5<=e.byteLength-t.ptr?5:e.byteLength-t.ptr,u=new DataView(e,t.ptr,u),l=u.getUint8(0),c=(s++,l>>6),c=0==c?4:3-c,f=0<(32&l),l=31&l,h=0;if(1==c)h=u.getUint8(s),s++;else if(2==c)h=u.getUint16(s,!0),s+=2;else{if(4!=c)throw"Invalid valid pixel count type";h=u.getUint32(s,!0),s+=4}var p,d,g,y,A,m,v,c=2*o.maxZError,i=1<o.numDims?o.maxValues[i]:o.zMax;if(f){for(t.counter.lut++,m=u.getUint8(s),s++,y=Math.ceil((m-1)*l/8),A=Math.ceil(y/4),d=new ArrayBuffer(4*A),g=new Uint8Array(d),t.ptr+=s,g.set(new Uint8Array(e,t.ptr,y)),o=new Uint32Array(d),t.ptr+=y,v=0;m-1>>>v;)v++;y=Math.ceil(h*v/8),A=Math.ceil(y/4),d=new ArrayBuffer(4*A),(g=new Uint8Array(d)).set(new Uint8Array(e,t.ptr,y)),p=new Uint32Array(d),t.ptr+=y,f=(3<=a?E:_)(o,l,m-1,n,c,i),(3<=a?w:b)(p,r,v,h,f)}else t.counter.bitstuffer++,v=l,t.ptr+=s,0<v&&(y=Math.ceil(h*v/8),A=Math.ceil(y/4),d=new ArrayBuffer(4*A),(g=new Uint8Array(d)).set(new Uint8Array(e,t.ptr,y)),p=new Uint32Array(d),t.ptr+=y,3<=a?null==n?I(p,r,v,h):w(p,r,v,h,!1,n,c,i):null==n?C(p,r,v,h):b(p,r,v,h,!1,n,c,i))},readTiles:function(e,t,r,D){var n=t.headerInfo,i=n.width,o=n.height,a=i*o,s=n.microBlockSize,u=n.imageType,l=U.getDataTypeSize(u),c=Math.ceil(i/s),f=Math.ceil(o/s);t.pixels.numBlocksY=f,t.pixels.numBlocksX=c;for(var L,h,p,d,g,y,A,m,v,b,Q,_,w,E,C=t.pixels.ptr=0,I=0,S=0,j=0,x=0,O=0,P=0,k=new r(s*s),F=o%s||s,N=i%s||s,B=n.numDims,T=t.pixels.resultMask,M=t.pixels.resultPixels,G=5<=n.fileVersion?14:15,R=n.zMax,S=0;S<f;S++)for(A=S!==f-1?s:F,j=0;j<c;j++)for(x=S*i*s+j*s,_=i-(m=j!==c-1?s:N),d=0;d<B;d++){if(1<B?(y=M,x=S*i*s+j*s,M=new r(t.pixels.resultPixels.buffer,a*d*l,a),R=n.maxValues[d]):y=null,v=e.byteLength-t.ptr,L={},P=0,b=(v=new DataView(e,t.ptr,Math.min(10,v))).getUint8(0),P++,g=5<=n.fileVersion?4&b:0,Q=b>>6&255,(b>>2&G)!=(j*s>>3&G))throw"integrity issue";if(g&&0===d)throw"integrity issue";if(3<(b=3&b))throw t.ptr+=P,"Invalid block encoding ("+b+")";if(2!=b)if(0==b){if(g)throw"integrity issue";if(t.counter.uncompressed++,t.ptr+=P,w=(w=A*m*l)<(E=e.byteLength-t.ptr)?w:E,E=new ArrayBuffer(w%l==0?w:w+l-w%l),new Uint8Array(E).set(new Uint8Array(e,t.ptr,w)),h=new r(E),O=0,T)for(C=0;C<A;C++){for(I=0;I<m;I++)T[x]&&(M[x]=h[O++]),x++;x+=_}else for(C=0;C<A;C++){for(I=0;I<m;I++)M[x++]=h[O++];x+=_}t.ptr+=O*l}else if(w=U.getDataTypeUsed(g&&u<6?4:u,Q),p=U.getOnePixel(L,P,w,v),P+=U.getDataTypeSize(w),3==b)if(t.ptr+=P,t.counter.constantoffset++,T)for(C=0;C<A;C++){for(I=0;I<m;I++)T[x]&&(M[x]=g?Math.min(R,y[x]+p):p),x++;x+=_}else for(C=0;C<A;C++){for(I=0;I<m;I++)M[x]=g?Math.min(R,y[x]+p):p,x++;x+=_}else if(t.ptr+=P,U.decodeBits(e,t,k,p,d),P=0,g)if(T)for(C=0;C<A;C++){for(I=0;I<m;I++)T[x]&&(M[x]=k[P++]+y[x]),x++;x+=_}else for(C=0;C<A;C++){for(I=0;I<m;I++)M[x]=k[P++]+y[x],x++;x+=_}else if(T)for(C=0;C<A;C++){for(I=0;I<m;I++)T[x]&&(M[x]=k[P++]),x++;x+=_}else for(C=0;C<A;C++){for(I=0;I<m;I++)M[x++]=k[P++];x+=_}else{if(g)if(T)for(C=0;C<A;C++)for(I=0;I<m;I++)T[x]&&(M[x]=y[x]),x++;else for(C=0;C<A;C++)for(I=0;I<m;I++)M[x]=y[x],x++;t.counter.constant++,t.ptr+=P}}1<B&&!D&&(t.pixels.resultPixels=U.swapDimensionOrder(t.pixels.resultPixels,a,B,r))},formatFileInfo:function(e){return{fileIdentifierString:e.headerInfo.fileIdentifierString,fileVersion:e.headerInfo.fileVersion,imageType:e.headerInfo.imageType,height:e.headerInfo.height,width:e.headerInfo.width,numValidPixel:e.headerInfo.numValidPixel,microBlockSize:e.headerInfo.microBlockSize,blobSize:e.headerInfo.blobSize,maxZError:e.headerInfo.maxZError,pixelType:U.getPixelType(e.headerInfo.imageType),eofOffset:e.eofOffset,mask:e.mask?{numBytes:e.mask.numBytes}:null,pixels:{numBlocksX:e.pixels.numBlocksX,numBlocksY:e.pixels.numBlocksY,maxValue:e.headerInfo.zMax,minValue:e.headerInfo.zMin,noDataValue:e.noDataValue}}},constructConstantSurface:function(e,t){var r=e.headerInfo.zMax,n=e.headerInfo.zMin,i=e.headerInfo.maxValues,o=e.headerInfo.numDims,a=e.headerInfo.height*e.headerInfo.width,s=0,u=0,l=0,c=e.pixels.resultMask,f=e.pixels.resultPixels;if(c)if(1<o){if(t)for(s=0;s<o;s++)for(l=s*a,r=i[s],u=0;u<a;u++)c[u]&&(f[l+u]=r);else for(u=0;u<a;u++)if(c[u])for(l=u*o,s=0;s<o;s++)f[l+o]=i[s]}else for(u=0;u<a;u++)c[u]&&(f[u]=r);else if(1<o&&n!==r)if(t)for(s=0;s<o;s++)for(l=s*a,r=i[s],u=0;u<a;u++)f[l+u]=r;else for(u=0;u<a;u++)for(l=u*o,s=0;s<o;s++)f[l+s]=i[s];else for(u=0;u<a*o;u++)f[u]=r},getDataTypeArray:function(e){var t;switch(e){case 0:t=Int8Array;break;case 1:t=Uint8Array;break;case 2:t=Int16Array;break;case 3:t=Uint16Array;break;case 4:t=Int32Array;break;case 5:t=Uint32Array;break;case 6:t=Float32Array;break;case 7:t=Float64Array;break;default:t=Float32Array}return t},getPixelType:function(e){var t;switch(e){case 0:t="S8";break;case 1:t="U8";break;case 2:t="S16";break;case 3:t="U16";break;case 4:t="S32";break;case 5:t="U32";break;case 6:t="F32";break;case 7:t="F64";break;default:t="F32"}return t},isValidPixelValue:function(e,t){if(null==t)return!1;var r;switch(e){case 0:r=-128<=t&&t<=127;break;case 1:r=0<=t&&t<=255;break;case 2:r=-32768<=t&&t<=32767;break;case 3:r=0<=t&&t<=65536;break;case 4:r=-2147483648<=t&&t<=2147483647;break;case 5:r=0<=t&&t<=4294967296;break;case 6:r=-34027999387901484e22<=t&&t<=34027999387901484e22;break;case 7:r=-17976931348623157e292<=t&&t<=17976931348623157e292;break;default:r=!1}return r},getDataTypeSize:function(e){var t=0;switch(e){case 0:case 1:t=1;break;case 2:case 3:t=2;break;case 4:case 5:case 6:t=4;break;case 7:t=8;break;default:t=e}return t},getDataTypeUsed:function(e,t){var r=e;switch(e){case 2:case 4:r=e-t;break;case 3:case 5:r=e-2*t;break;case 6:r=0===t?e:1===t?2:1;break;case 7:r=0===t?e:e-2*t+1;break;default:r=e}return r},getOnePixel:function(e,t,r,n){var i=0;switch(r){case 0:i=n.getInt8(t);break;case 1:i=n.getUint8(t);break;case 2:i=n.getInt16(t,!0);break;case 3:i=n.getUint16(t,!0);break;case 4:i=n.getInt32(t,!0);break;case 5:i=n.getUInt32(t,!0);break;case 6:i=n.getFloat32(t,!0);break;case 7:i=n.getFloat64(t,!0);break;default:throw"the decoder does not understand this pixel type"}return i},swapDimensionOrder:function(e,t,r,n,i){var o=0,a=0,s=0,u=0,l=e;if(1<r)if(l=new n(t*r),i)for(o=0;o<t;o++)for(u=o,s=0;s<r;s++,u+=t)l[u]=e[a++];else for(o=0;o<t;o++)for(u=o,s=0;s<r;s++,u+=t)l[a++]=e[u];return l}},j=function(e,t,r){this.val=e,this.left=t,this.right=r},{decode:function(e,t){var r=(t=t||{}).noDataValue,n=0,i={};if(i.ptr=t.inputOffset||0,i.pixels={},U.readHeaderInfo(e,i)){var o=i.headerInfo,a=o.fileVersion,s=U.getDataTypeArray(o.imageType);if(5<a)throw"unsupported lerc version 2."+a;U.readMask(e,i),o.numValidPixel===o.width*o.height||i.pixels.resultMask||(i.pixels.resultMask=t.maskData);var u=o.width*o.height;i.pixels.resultPixels=new s(u*o.numDims),i.counter={onesweep:0,uncompressed:0,lut:0,bitstuffer:0,constant:0,constantoffset:0};var l,c=!t.returnPixelInterleavedDims;if(0!==o.numValidPixel)if(o.zMax===o.zMin)U.constructConstantSurface(i,c);else if(4<=a&&U.checkMinMaxRanges(e,i))U.constructConstantSurface(i,c);else{var f=new DataView(e,i.ptr,2),h=f.getUint8(0);if(i.ptr++,h)U.readDataOneSweep(e,i,s,c);else if(1<a&&o.imageType<=1&&Math.abs(o.maxZError-.5)<1e-5){h=f.getUint8(1);if(i.ptr++,2<(i.encodeMode=h)||a<4&&1<h)throw"Invalid Huffman flag "+h;h?U.readHuffman(e,i,s,c):U.readTiles(e,i,s,c)}else U.readTiles(e,i,s,c)}i.eofOffset=i.ptr,t.inputOffset?(l=i.headerInfo.blobSize+t.inputOffset-i.ptr,1<=Math.abs(l)&&(i.eofOffset=t.inputOffset+i.headerInfo.blobSize)):(l=i.headerInfo.blobSize-i.ptr,1<=Math.abs(l)&&(i.eofOffset=i.headerInfo.blobSize));var p={width:o.width,height:o.height,pixelData:i.pixels.resultPixels,minValue:o.zMin,maxValue:o.zMax,validPixelCount:o.numValidPixel,dimCount:o.numDims,dimStats:{minValues:o.minValues,maxValues:o.maxValues},maskData:i.pixels.resultMask};if(i.pixels.resultMask&&U.isValidPixelValue(o.imageType,r)){for(var d=i.pixels.resultMask,n=0;n<u;n++)d[n]||(p.pixelData[n]=r);p.noDataValue=r}return i.noDataValue=r,t.returnFileInfo&&(p.fileInfo=U.formatFileInfo(i)),p}},getBandCount:function(e){for(var t=0,r=0,n={ptr:0,pixels:{}};r<e.byteLength-58;)U.readHeaderInfo(e,n),r+=n.headerInfo.blobSize,t++,n.ptr=r;return t}}),S=(e=new ArrayBuffer(4),t=new Uint8Array(e),(new Uint32Array(e)[0]=1)===t[0]),r={decode:function(e,t){if(!S)throw"Big endian system is not supported.";var r,n,i=(t=t||{}).inputOffset||0,o=new Uint8Array(e,i,10),o=String.fromCharCode.apply(null,o);if("CntZImage"===o.trim())r=m,n=1;else{if("Lerc2"!==o.substring(0,5))throw"Unexpected file identifier string: "+o;r=v,n=2}for(var a,s,u,l,c,f=0,h=e.byteLength-10,p=[],d={width:0,height:0,pixels:[],pixelType:t.pixelType,mask:null,statistics:[]},g=0;i<h;){var y=r.decode(e,{inputOffset:i,encodedMaskData:a,maskData:A,returnMask:0===f,returnEncodedMask:0===f,returnFileInfo:!0,returnPixelInterleavedDims:t.returnPixelInterleavedDims,pixelType:t.pixelType||null,noDataValue:t.noDataValue||null}),i=y.fileInfo.eofOffset,A=y.maskData;0===f&&(a=y.encodedMaskData,d.width=y.width,d.height=y.height,d.dimCount=y.dimCount||1,d.pixelType=y.pixelType||y.fileInfo.pixelType,d.mask=A),1<n&&(A&&p.push(A),y.fileInfo.mask)&&0<y.fileInfo.mask.numBytes&&g++,f++,d.pixels.push(y.pixelData),d.statistics.push({minValue:y.minValue,maxValue:y.maxValue,noDataValue:y.noDataValue,dimStats:y.dimStats})}if(1<n&&1<g){for(c=d.width*d.height,d.bandMasks=p,(A=new Uint8Array(c)).set(p[0]),u=1;u<p.length;u++)for(s=p[u],l=0;l<c;l++)A[l]=A[l]&s[l];d.maskData=A}return d}};"function"==typeof define&&define.amd?define([],function(){return r}):void 0!==n&&n.exports?n.exports=r:this.Lerc=r}()},{}],74:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("ol/control/Control.js")),a=e("ol/Observable.js"),s=n(e("ol/style/Style.js")),u=n(e("ol/style/Fill.js")),l=n(e("ol/style/Stroke.js")),c=n(e("ol/style/Text.js")),f=n(e("../util/getMapCanvas.js"));function n(e){return e&&e.__esModule?e:{default:e}}function h(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function p(e,t,r){t=y(t);var n=e,t=d()?Reflect.construct(t,r||[],y(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(d=function(){return!!e})()}function g(){return(g="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=y(e)););return e}(e,t);if(n)return(n=Object.getOwnPropertyDescriptor(n,t)).get?n.get.call(arguments.length<3?e:r):n.value}).apply(null,arguments)}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function A(e,t){return(A=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}e=function(){function r(e){var t;if(this instanceof r)return(t=p(this,r,[e=e||{}])).setStyle(e.style),t;throw new TypeError("Cannot call a class as a function")}var e,t=r,n=o.default;if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&A(t,n),t=r,(n=[{key:"setMap",value:function(e){this.getCanvas(e);var t=this.getMap();if(this._listener&&((0,a.unByKey)(this._listener),this._listener=null),g(y(r.prototype),"setMap",this).call(this,e),t)try{t.renderSync()}catch(e){}e&&(this._listener=e.on("postcompose",this._draw.bind(this)))}},{key:"getCanvas",value:function(e){return(0,f.default)(e)}},{key:"getContext",value:function(e){var t,e=e.context;return e=!e&&this.getMap()?(t=this.getMap().getViewport().getElementsByClassName("ol-fixedoverlay")[0])?t.getContext("2d"):null:e}},{key:"setStyle",value:function(e){this._style=e||new s.default({})}},{key:"getStyle",value:function(){return this._style}},{key:"getStroke",value:function(){return this._style.getStroke()||this._style.setStroke(new l.default({color:"#000",width:1.25})),this._style.getStroke()}},{key:"getFill",value:function(){return this._style.getFill()||this._style.setFill(new u.default({color:"#fff"})),this._style.getFill()}},{key:"getTextStroke",value:function(){var e=this._style.getText();return(e=e||new c.default({})).getStroke()||e.setStroke(new l.default({color:"#fff",width:3})),e.getStroke()}},{key:"getTextFill",value:function(){var e=this._style.getText();return(e=e||new c.default({})).getFill()||e.setFill(new u.default({color:"#fff"})),e.getFill()}},{key:"getTextFont",value:function(){var e=this._style.getText();return(e=e||new c.default({})).getFont()||e.setFont("12px sans-serif"),e.getFont()}},{key:"_draw",value:function(){console.warn("[CanvasBase] draw function not implemented.")}}])&&h(t.prototype,n),e&&h(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();r.default=e},{"../util/getMapCanvas.js":76,"ol/Observable.js":98,"ol/control/Control.js":118,"ol/style/Fill.js":386,"ol/style/Stroke.js":392,"ol/style/Style.js":393,"ol/style/Text.js":394}],75:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=c(e("ol/proj/Projection.js")),a=c(e("ol/style/Style.js")),s=c(e("ol/style/Stroke.js")),u=c(e("ol/style/Fill.js")),l=c(e("ol/style/Text.js")),D=e("ol/proj.js"),n=c(e("./CanvasBase.js"));function c(e){return e&&e.__esModule?e:{default:e}}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function h(e,t,r){t=d(t);var n=e,t=p()?Reflect.construct(t,r||[],d(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(p=function(){return!!e})()}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){return(g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}e=function(){function i(e){var t;if(!(this instanceof i))throw new TypeError("Cannot call a class as a function");e=e||{};var r=document.createElement("div"),n=(r.className="ol-graticule ol-unselectable ol-hidden",(t=h(this,i,[{element:r}])).set("projection",e.projection||"EPSG:4326"),new o.default({code:t.get("projection")}).getMetersPerUnit());for(t.fac=1;10<n/t.fac;)t.fac*=10;return t.fac=1e4/t.fac,t.set("maxResolution",e.maxResolution||1/0),t.set("step",e.step||.1),t.set("stepCoord",e.stepCoord||1),t.set("spacing",e.spacing||40),t.set("intervals",e.intervals),t.set("precision",e.precision),t.set("margin",e.margin||0),t.set("borderWidth",e.borderWidth||5),t.set("stroke",!1!==e.stroke),t.formatCoord=e.formatCoord||function(e){return e},e.style instanceof a.default?t.setStyle(e.style):t.setStyle(new a.default({stroke:new s.default({color:"#000",width:1}),fill:new u.default({color:"#fff"}),text:new l.default({stroke:new s.default({color:"#fff",width:2}),fill:new u.default({color:"#000"})})})),t}var e,t=i,r=n.default;if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&g(t,r),t=i,(r=[{key:"setStyle",value:function(e){this._style=e}},{key:"_draw",value:function(e){if(!(this.get("maxResolution")<e.frameState.viewState.resolution)){for(var t,r=this.getContext(e),n=r.canvas,e=e.frameState.pixelRatio,i=n.width/e,o=n.height/e,a=this.get("projection"),s=this.getMap(),u=[s.getCoordinateFromPixel([0,0]),s.getCoordinateFromPixel([i,0]),s.getCoordinateFromPixel([i,o]),s.getCoordinateFromPixel([0,o])],l=-1/0,c=1/0,f=-1/0,h=1/0,p=0;t=u[p];p++)u[p]=(0,D.transform)(t,s.getView().getProjection(),a),l=Math.max(l,u[p][0]),c=Math.min(c,u[p][0]),f=Math.max(f,u[p][1]),h=Math.min(h,u[p][1]);var n=this.get("spacing"),d=this.get("step"),g=this.get("stepCoord"),y=this.get("borderWidth"),A=this.get("margin"),m=(i<(l-c)/d*n&&(d*=Math.round((l-c)/i*n/d))>this.fac&&(d=Math.round(d/this.fac)*this.fac),this.get("intervals"));if(Array.isArray(m)){for(var v=m[0],b=0,_=m.length;b<_&&!(d>=m[b]);++b)v=m[b];d=v}var n=this.get("precision"),w=d,n=(0<n&&n<d&&(w=d/Math.ceil(d/n)),c=Math.floor(c/d)*d-d,h=Math.floor(h/d)*d-d,l=Math.floor(l/d)*d+2*d,f=Math.floor(f/d)*d+2*d,(0,D.get)(a).getExtent()),E=(n&&(c<n[0]&&(c=n[0]),h<n[1]&&(h=n[1]),l>n[2]&&(l=n[2]+d),f>n[3])&&(f=n[3]+d),this.getStyle().getStroke()&&this.get("stroke")),n=this.getStyle().getText(),C=this.getStyle().getFill();r.save(),r.scale(e,e),r.beginPath(),r.rect(A,A,i-2*A,o-2*A),r.clip(),r.beginPath();for(var I,S,j,x,O={top:[],left:[],bottom:[],right:[]},P=c;P<l;P+=d)for(j=(0,D.transform)([P,h],a,s.getView().getProjection()),j=s.getPixelFromCoordinate(j),E&&r.moveTo(j[0],j[1]),S=j,I=h+w;I<=f;I+=w)x=(0,D.transform)([P,I],a,s.getView().getProjection()),x=s.getPixelFromCoordinate(x),E&&r.lineTo(x[0],x[1]),0<S[1]&&x[1]<0&&O.top.push([P,S]),S[1]>o&&x[1]<o&&O.bottom.push([P,S]),S=x;for(I=h;I<f;I+=d)for(j=(0,D.transform)([c,I],a,s.getView().getProjection()),j=s.getPixelFromCoordinate(j),E&&r.moveTo(j[0],j[1]),S=j,P=c+w;P<=l;P+=w)x=(0,D.transform)([P,I],a,s.getView().getProjection()),x=s.getPixelFromCoordinate(x),E&&r.lineTo(x[0],x[1]),S[0]<0&&0<x[0]&&O.left.push([I,S]),S[0]<i&&x[0]>i&&O.right.push([I,S]),S=x;if(E&&(r.strokeStyle=this.getStyle().getStroke().getColor(),r.lineWidth=this.getStyle().getStroke().getWidth(),r.stroke()),n){r.fillStyle=this.getStyle().getText().getFill().getColor(),r.strokeStyle=this.getStyle().getText().getStroke().getColor(),r.lineWidth=this.getStyle().getText().getStroke().getWidth(),r.font=this.getStyle().getText().getFont(),r.textAlign="center",r.textBaseline="hanging";for(var k,B,T=(C?y:0)+A+2,p=0;k=O.top[p];p++)Math.round(k[0]/this.get("step"))%g||(B=this.formatCoord(k[0],"top"),r.strokeText(B,k[1][0],T),r.fillText(B,k[1][0],T));for(r.textBaseline="alphabetic",p=0;k=O.bottom[p];p++)Math.round(k[0]/this.get("step"))%g||(B=this.formatCoord(k[0],"bottom"),r.strokeText(B,k[1][0],o-T),r.fillText(B,k[1][0],o-T));for(r.textBaseline="middle",r.textAlign="left",p=0;k=O.left[p];p++)Math.round(k[0]/this.get("step"))%g||(B=this.formatCoord(k[0],"left"),r.strokeText(B,T,k[1][1]),r.fillText(B,T,k[1][1]));for(r.textAlign="right",p=0;k=O.right[p];p++)Math.round(k[0]/this.get("step"))%g||(B=this.formatCoord(k[0],"right"),r.strokeText(B,i-T,k[1][1]),r.fillText(B,i-T,k[1][1]))}if(C){var M,R=this.getStyle().getFill().getColor();for((e=this.getStyle().getStroke())?M=this.getStyle().getStroke().getColor():(M=R,R="#fff"),r.strokeStyle=M,r.lineWidth=e?e.getWidth():1,p=1;p<O.top.length;p++)r.beginPath(),r.rect(O.top[p-1][1][0],A,O.top[p][1][0]-O.top[p-1][1][0],y),r.fillStyle=Math.round(O.top[p][0]/d)%2?M:R,r.fill(),r.stroke();for(p=1;p<O.bottom.length;p++)r.beginPath(),r.rect(O.bottom[p-1][1][0],o-y-A,O.bottom[p][1][0]-O.bottom[p-1][1][0],y),r.fillStyle=Math.round(O.bottom[p][0]/d)%2?M:R,r.fill(),r.stroke();for(p=1;p<O.left.length;p++)r.beginPath(),r.rect(A,O.left[p-1][1][1],y,O.left[p][1][1]-O.left[p-1][1][1]),r.fillStyle=Math.round(O.left[p][0]/d)%2?M:R,r.fill(),r.stroke();for(p=1;p<O.right.length;p++)r.beginPath(),r.rect(i-y-A,O.right[p-1][1][1],y,O.right[p][1][1]-O.right[p-1][1][1]),r.fillStyle=Math.round(O.right[p][0]/d)%2?M:R,r.fill(),r.stroke();r.beginPath(),r.fillStyle=M,r.rect(A,A,y,y),r.rect(A,o-y-A,y,y),r.rect(i-y-A,A,y,y),r.rect(i-y-A,o-y-A,y,y),r.fill()}r.restore()}}}])&&f(t.prototype,r),e&&f(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();r.default=e},{"./CanvasBase.js":74,"ol/proj.js":283,"ol/proj/Projection.js":284,"ol/style/Fill.js":386,"ol/style/Stroke.js":392,"ol/style/Style.js":393,"ol/style/Text.js":394}],76:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;r.default=function(t){var r;return t?((r=t.getViewport().getElementsByClassName("ol-fixedoverlay")[0])||(t.getViewport().querySelector(".ol-layers")?((r=document.createElement("canvas")).className="ol-fixedoverlay",t.getViewport().querySelector(".ol-layers").after(r),t.on("precompose",function(e){r.width=t.getSize()[0]*e.frameState.pixelRatio,r.height=t.getSize()[1]*e.frameState.pixelRatio})):r=t.getViewport().querySelector("canvas")),r):null}},{}],77:[function(e,t,r){"use strict";function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=c(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==c(e)?e:e+""}(n.key),n)}}function a(e,t,r){t=u(t);var n=e,t=i()?Reflect.construct(t,r||[],u(e).constructor):t.apply(e,r);if(t&&("object"==c(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function i(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(i=function(){return!!e})()}function s(){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=u(e)););return e}(e,t);if(n)return(n=Object.getOwnPropertyDescriptor(n,t)).get?n.get.call(arguments.length<3?e:r):n.value}).apply(null,arguments)}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n;n=function(n,i,h){n="default"in n?n.default:n,h="default"in h?h.default:h;var p="layer-switcher-",e=function(){function f(e){var t,r;if(this instanceof f)return e=Object.assign({},e),r=document.createElement("div"),(t=a(this,f,[{element:r,target:e.target}])).activationMode=e.activationMode||"mouseover",t.startActive=!0===e.startActive,t.label=void 0!==e.label?e.label:"",t.collapseLabel=void 0!==e.collapseLabel?e.collapseLabel:"»",t.tipLabel=e.tipLabel||"Legend",t.collapseTipLabel=e.collapseTipLabel||"Collapse legend",t.groupSelectStyle=f.getGroupSelectStyle(e.groupSelectStyle),t.reverse=!1!==e.reverse,t.mapListeners=[],t.hiddenClassName="ol-unselectable ol-control layer-switcher",f.isTouchDevice_()&&(t.hiddenClassName+=" touch"),t.shownClassName="shown",r.className=t.hiddenClassName,t.button=document.createElement("button"),r.appendChild(t.button),t.panel=document.createElement("div"),t.panel.className="panel",r.appendChild(t.panel),f.enableTouchScroll_(t.panel),r.classList.add(p+"group-select-style-"+t.groupSelectStyle),r.classList.add(p+"activation-mode-"+t.activationMode),"click"===t.activationMode?(r.classList.add("activationModeClick"),t.button.onclick=function(e){e=e||window.event;t.element.classList.contains(t.shownClassName)?t.hidePanel():t.showPanel(),e.preventDefault()}):(t.button.onmouseover=function(){t.showPanel()},t.button.onclick=function(e){e=e||window.event;t.showPanel(),e.preventDefault()},t.panel.onmouseout=function(e){t.panel.contains(e.relatedTarget)||t.hidePanel()}),t.updateButton(),t;throw new TypeError("Cannot call a class as a function")}var e,t=f,r=n;if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&l(t,r),t=f,r=[{key:"renderPanel",value:function(t,r,n){var e=new Event("render");for(r.dispatchEvent(e),(n=n||{}).groupSelectStyle=f.getGroupSelectStyle(n.groupSelectStyle),f.ensureTopVisibleBaseLayerShown(t,n.groupSelectStyle);r.firstChild;)r.removeChild(r.firstChild);f.forEachRecursive(t,function(e,t,r){e.set("indeterminate",!1)}),"children"===n.groupSelectStyle||"none"===n.groupSelectStyle?f.setGroupVisibility(t):"group"===n.groupSelectStyle&&f.setChildVisibility(t);e=document.createElement("ul"),r.appendChild(e),f.renderLayers_(t,t,e,n,function(e){f.renderPanel(t,r,n)}),e=new Event("rendercomplete");r.dispatchEvent(e)}},{key:"isBaseGroup",value:function(e){return e instanceof h&&(e=e.getLayers().getArray()).length&&"base"===e[0].get("type")}},{key:"setGroupVisibility",value:function(e){f.getGroupsAndLayers(e,function(e){return e instanceof h&&!e.get("combine")&&!f.isBaseGroup(e)}).reverse().forEach(function(e){var t=e.getLayersArray().map(function(e){return e.getVisible()});t.every(function(e){return!0===e})?(e.setVisible(!0),e.set("indeterminate",!1)):t.every(function(e){return!1===e})?(e.setVisible(!1),e.set("indeterminate",!1)):(e.setVisible(!0),e.set("indeterminate",!0))})}},{key:"setChildVisibility",value:function(e){f.getGroupsAndLayers(e,function(e){return e instanceof h&&!e.get("combine")&&!f.isBaseGroup(e)}).forEach(function(e){var t=e.getVisible(),r=e.get("indeterminate");e.getLayers().getArray().forEach(function(e){e.set("indeterminate",!1),t&&!r||!e.getVisible()||e.set("indeterminate",!0)})})}},{key:"ensureTopVisibleBaseLayerShown",value:function(e,t){var n;f.forEachRecursive(e,function(e,t,r){"base"===e.get("type")&&e.getVisible()&&(n=e)}),n&&f.setVisible_(e,n,!0,t)}},{key:"getGroupsAndLayers",value:function(e,n){var i=[];return n=n||function(e,t,r){return!0},f.forEachRecursive(e,function(e,t,r){e.get("title")&&n(e,t,r)&&i.push(e)}),i}},{key:"setVisible_",value:function(t,n,e,r){n.setVisible(e),e&&"base"===n.get("type")&&f.forEachRecursive(t,function(e,t,r){e!=n&&"base"===e.get("type")&&e.setVisible(!1)}),n instanceof h&&!n.get("combine")&&"children"===r&&n.getLayers().forEach(function(e){f.setVisible_(t,e,n.getVisible(),r)})}},{key:"renderLayer_",value:function(t,r,e,n,i){var o,a,s=document.createElement("li"),u=r.get("title"),l=f.uuid(),c=document.createElement("label");return r instanceof h&&!r.get("combine")?(o=f.isBaseGroup(r),s.classList.add("group"),o&&s.classList.add(p+"base-group"),r.get("fold")&&(s.classList.add(p+"fold"),s.classList.add(p+r.get("fold")),(a=document.createElement("button")).onclick=function(e){e=e||window.event;f.toggleFold_(r,s),e.preventDefault()},s.appendChild(a)),o||"none"==n.groupSelectStyle||((a=document.createElement("input")).type="checkbox",a.id=l,a.checked=r.getVisible(),a.indeterminate=r.get("indeterminate"),a.onchange=function(e){e=e.target;f.setVisible_(t,r,e.checked,n.groupSelectStyle),i(r)},s.appendChild(a),c.htmlFor=l),c.innerHTML=u,s.appendChild(c),o=document.createElement("ul"),s.appendChild(o),f.renderLayers_(t,r,o,n,i)):(s.className="layer",a=document.createElement("input"),"base"===r.get("type")?a.type="radio":a.type="checkbox",a.id=l,a.checked=r.get("visible"),a.indeterminate=r.get("indeterminate"),a.onchange=function(e){e=e.target;f.setVisible_(t,r,e.checked,n.groupSelectStyle),i(r)},s.appendChild(a),c.htmlFor=l,c.innerHTML=u,((o=t.getView().getResolution())>=r.getMaxResolution()||o<r.getMinResolution()||r.getMinZoom&&r.getMaxZoom&&((a=t.getView().getZoom())<=r.getMinZoom()||a>r.getMaxZoom()))&&(c.className+=" disabled"),s.appendChild(c)),s}},{key:"renderLayers_",value:function(e,t,r,n,i){var o=t.getLayers().getArray().slice();n.reverse&&(o=o.reverse());for(var a,s=0;s<o.length;s++)(a=o[s]).get("title")&&r.appendChild(f.renderLayer_(e,a,s,n,i))}},{key:"forEachRecursive",value:function(e,n){e.getLayers().forEach(function(e,t,r){n(e,t,r),e instanceof h&&f.forEachRecursive(e,n)})}},{key:"uuid",value:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})}},{key:"enableTouchScroll_",value:function(e){var t;f.isTouchDevice_()&&(t=0,e.addEventListener("touchstart",function(e){t=this.scrollTop+e.touches[0].pageY},!1),e.addEventListener("touchmove",function(e){this.scrollTop=t-e.touches[0].pageY},!1))}},{key:"isTouchDevice_",value:function(){try{return document.createEvent("TouchEvent"),!0}catch(e){return!1}}},{key:"toggleFold_",value:function(e,t){t.classList.remove(p+e.get("fold")),e.set("fold","open"===e.get("fold")?"close":"open"),t.classList.add(p+e.get("fold"))}},{key:"getGroupSelectStyle",value:function(e){return 0<=["none","children","group"].indexOf(e)?e:"children"}}],(e=[{key:"setMap",value:function(e){for(var t=this,r=0;r<this.mapListeners.length;r++)i.unByKey(this.mapListeners[r]);this.mapListeners.length=0,s(u(f.prototype),"setMap",this).call(this,e),e&&(this.startActive?this.showPanel():this.renderPanel(),"click"!==this.activationMode)&&this.mapListeners.push(e.on("pointerdown",function(){t.hidePanel()}))}},{key:"showPanel",value:function(){this.element.classList.contains(this.shownClassName)||(this.element.classList.add(this.shownClassName),this.updateButton(),this.renderPanel()),this.dispatchEvent("show")}},{key:"hidePanel",value:function(){this.element.classList.contains(this.shownClassName)&&(this.element.classList.remove(this.shownClassName),this.updateButton()),this.dispatchEvent("hide")}},{key:"updateButton",value:function(){this.element.classList.contains(this.shownClassName)?(this.button.textContent=this.collapseLabel,this.button.setAttribute("title",this.collapseTipLabel),this.button.setAttribute("aria-label",this.collapseTipLabel)):(this.button.textContent=this.label,this.button.setAttribute("title",this.tipLabel),this.button.setAttribute("aria-label",this.tipLabel))}},{key:"renderPanel",value:function(){this.dispatchEvent("render"),f.renderPanel(this.getMap(),this.panel,{groupSelectStyle:this.groupSelectStyle,reverse:this.reverse}),this.dispatchEvent("rendercomplete")}}])&&o(t.prototype,e),r&&o(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}();return window.ol&&window.ol.control&&(window.ol.control.LayerSwitcher=e),e},"object"===(void 0===r?"undefined":c(r))&&void 0!==t?t.exports=n(e("ol/control/Control"),e("ol/Observable"),e("ol/layer/Group")):"function"==typeof define&&define.amd?define(["ol/control/Control","ol/Observable","ol/layer/Group"],n):(void 0).LayerSwitcher=n((void 0).ol.control.Control,(void 0).ol.Observable,(void 0).ol.layer.Group)},{"ol/Observable":98,"ol/control/Control":118,"ol/layer/Group":266}],78:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.CollectionEvent=void 0;var n=a(e("./Object.js")),o=a(e("./CollectionEventType.js")),e=a(e("./events/Event.js"));function a(e){return e&&e.__esModule?e:{default:e}}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function u(e,t,r){return t&&s(e.prototype,t),r&&s(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t,r){t=h(t);var n=e,t=f()?Reflect.construct(t,r||[],h(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(f=function(){return!!e})()}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}function d(e,t){return(d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var g="length",y=r.CollectionEvent=(p(m,e.default),u(m)),e=(p(A,n.default),u(A,[{key:"clear",value:function(){for(;0<this.getLength();)this.pop()}},{key:"extend",value:function(e){for(var t=0,r=e.length;t<r;++t)this.push(e[t]);return this}},{key:"forEach",value:function(e){for(var t=this.array_,r=0,n=t.length;r<n;++r)e(t[r],r,t)}},{key:"getArray",value:function(){return this.array_}},{key:"item",value:function(e){return this.array_[e]}},{key:"getLength",value:function(){return this.get(g)}},{key:"insertAt",value:function(e,t){if(e<0||e>this.getLength())throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t),this.array_.splice(e,0,t),this.updateLength_(),this.dispatchEvent(new y(o.default.ADD,t,e))}},{key:"pop",value:function(){return this.removeAt(this.getLength()-1)}},{key:"push",value:function(e){this.unique_&&this.assertUnique_(e);var t=this.getLength();return this.insertAt(t,e),this.getLength()}},{key:"remove",value:function(e){for(var t=this.array_,r=0,n=t.length;r<n;++r)if(t[r]===e)return this.removeAt(r)}},{key:"removeAt",value:function(e){var t;if(!(e<0||e>=this.getLength()))return t=this.array_[e],this.array_.splice(e,1),this.updateLength_(),this.dispatchEvent(new y(o.default.REMOVE,t,e)),t}},{key:"setAt",value:function(e,t){if(e>=this.getLength())this.insertAt(e,t);else{if(e<0)throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t,e);var r=this.array_[e];this.array_[e]=t,this.dispatchEvent(new y(o.default.REMOVE,r,e)),this.dispatchEvent(new y(o.default.ADD,t,e))}}},{key:"updateLength_",value:function(){this.set(g,this.array_.length)}},{key:"assertUnique_",value:function(e,t){for(var r=0,n=this.array_.length;r<n;++r)if(this.array_[r]===e&&r!==t)throw new Error("Duplicate item added to a unique collection")}}]));r.default=e;function A(e,t){var r;if(l(this,A),(r=c(this,A)).on,r.once,r.un,r.unique_=!!(t=t||{}).unique,r.array_=e||[],r.unique_)for(var n=0,i=r.array_.length;n<i;++n)r.assertUnique_(r.array_[n],n);return r.updateLength_(),r}function m(e,t,r){return l(this,m),(e=c(this,m,[e])).element=t,e.index=r,e}},{"./CollectionEventType.js":79,"./Object.js":96,"./events/Event.js":133}],79:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;r.default={ADD:"add",REMOVE:"remove"}},{}],80:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.asArrayLike=function(e){return e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Float32Array||e instanceof DataView?e:null},r.asImageLike=p,r.default=void 0,r.toArray=function(e){var t=(d=d||(0,s.createCanvasContext2D)(e.width,e.height,void 0,{willReadFrequently:!0})).canvas,r=e.width,n=(t.width!==r&&(t.width=r),e.height);return t.height!==n&&(t.height=n),d.clearRect(0,0,r,n),d.drawImage(e,0,0),d.getImageData(0,0,r,n).data};var o=n(e("./Tile.js")),a=n(e("./TileState.js")),s=e("./dom.js");function n(e){return e&&e.__esModule?e:{default:e}}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function l(e,t,r){t=f(t);var n=e,t=c()?Reflect.construct(t,r||[],f(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(c=function(){return!!e})()}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function p(e){return e instanceof Image||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement||e instanceof ImageBitmap?e:null}var d=null;var g=[256,256],e=function(){function r(e){var t;if(this instanceof r)return t=a.default.IDLE,(t=l(this,r,[e.tileCoord,t,{transition:e.transition,interpolate:e.interpolate}])).loader_=e.loader,t.data_=null,t.error_=null,t.size_=e.size||null,t;throw new TypeError("Cannot call a class as a function")}var e,t=r,n=o.default;if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&h(t,n),t=r,(n=[{key:"getSize",value:function(){var e;return this.size_||((e=p(this.data_))?[e.width,e.height]:g)}},{key:"getData",value:function(){return this.data_}},{key:"getError",value:function(){return this.error_}},{key:"load",value:function(){var t;this.state!==a.default.IDLE&&this.state!==a.default.ERROR||(this.state=a.default.LOADING,this.changed(),(t=this).loader_().then(function(e){t.data_=e,t.state=a.default.LOADED,t.changed()}).catch(function(e){t.error_=e,t.state=a.default.ERROR,t.changed()}))}}])&&u(t.prototype,n),e&&u(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();r.default=e},{"./Tile.js":100,"./TileState.js":104,"./dom.js":130}],81:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;o=function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.disposed=!1},(s=[{key:"dispose",value:function(){this.disposed||(this.disposed=!0,this.disposeInternal())}},{key:"disposeInternal",value:function(){}}])&&n(o.prototype,s),a&&n(o,a),Object.defineProperty(o,"prototype",{writable:!1});var o,a,s=o;r.default=s},{}],82:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.createStyleFunction=d,r.default=void 0;var o=u(e("./Object.js")),a=u(e("./events/EventType.js")),n=e("./asserts.js"),s=e("./events.js");function u(e){return e&&e.__esModule?e:{default:e}}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function c(e,t,r){t=h(t);var n=e,t=f()?Reflect.construct(t,r||[],h(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(f=function(){return!!e})()}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}e=function(){function r(e){var t;if(this instanceof r)return(t=c(this,r)).on,t.once,t.un,t.id_=void 0,t.geometryName_="geometry",t.style_=null,t.styleFunction_=void 0,t.geometryChangeKey_=null,t.addChangeListener(t.geometryName_,t.handleGeometryChanged_),e&&("function"==typeof e.getSimplifiedGeometry?t.setGeometry(e):t.setProperties(e)),t;throw new TypeError("Cannot call a class as a function")}var e,t=r,n=o.default;if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&p(t,n),t=r,(n=[{key:"clone",value:function(){var e=new r(this.hasProperties()?this.getProperties():null),t=(e.setGeometryName(this.getGeometryName()),this.getGeometry()),t=(t&&e.setGeometry(t.clone()),this.getStyle());return t&&e.setStyle(t),e}},{key:"getGeometry",value:function(){return this.get(this.geometryName_)}},{key:"getId",value:function(){return this.id_}},{key:"getGeometryName",value:function(){return this.geometryName_}},{key:"getStyle",value:function(){return this.style_}},{key:"getStyleFunction",value:function(){return this.styleFunction_}},{key:"handleGeometryChange_",value:function(){this.changed()}},{key:"handleGeometryChanged_",value:function(){this.geometryChangeKey_&&((0,s.unlistenByKey)(this.geometryChangeKey_),this.geometryChangeKey_=null);var e=this.getGeometry();e&&(this.geometryChangeKey_=(0,s.listen)(e,a.default.CHANGE,this.handleGeometryChange_,this)),this.changed()}},{key:"setGeometry",value:function(e){this.set(this.geometryName_,e)}},{key:"setStyle",value:function(e){this.style_=e,this.styleFunction_=e?d(e):void 0,this.changed()}},{key:"setId",value:function(e){this.id_=e,this.changed()}},{key:"setGeometryName",value:function(e){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=e,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}])&&l(t.prototype,n),e&&l(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();function d(e){var t;return"function"==typeof e?e:(t=Array.isArray(e)?e:((0,n.assert)("function"==typeof e.getZIndex,"Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),[e]),function(){return t})}r.default=e},{"./Object.js":96,"./asserts.js":111,"./events.js":132,"./events/EventType.js":134}],83:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.GeolocationError=void 0;var n=l(e("./events/Event.js")),o=l(e("./Object.js")),a=e("./geom/Polygon.js"),s=e("./proj.js"),u=e("./math.js");function l(e){return e&&e.__esModule?e:{default:e}}function c(){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=y(e)););return e}(e,t);if(n)return(n=Object.getOwnPropertyDescriptor(n,t)).get?n.get.call(arguments.length<3?e:r):n.value}).apply(null,arguments)}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function h(e,t,r){return t&&f(e.prototype,t),r&&f(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t,r){t=y(t);var n=e,t=g()?Reflect.construct(t,r||[],y(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(g=function(){return!!e})()}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function A(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&m(e,t)}function m(e,t){return(m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var v="accuracy",b="accuracyGeometry",_="altitude",w="altitudeAccuracy",E="heading",C="position",I="projection",S="speed",j="tracking",x="trackingOptions",O="error",P=r.GeolocationError=(A(B,n.default),h(B)),e=(A(k,o.default),h(k,[{key:"disposeInternal",value:function(){this.setTracking(!1),c(y(k.prototype),"disposeInternal",this).call(this)}},{key:"handleProjectionChanged_",value:function(){var e=this.getProjection();e&&(this.transform_=(0,s.getTransformFromProjections)((0,s.get)("EPSG:4326"),e),this.position_)&&this.set(C,this.transform_(this.position_))}},{key:"handleTrackingChanged_",value:function(){var e;"geolocation"in navigator&&((e=this.getTracking())&&void 0===this.watchId_?this.watchId_=navigator.geolocation.watchPosition(this.positionChange_.bind(this),this.positionError_.bind(this),this.getTrackingOptions()):e||void 0===this.watchId_||(navigator.geolocation.clearWatch(this.watchId_),this.watchId_=void 0))}},{key:"positionChange_",value:function(e){var e=e.coords,t=(this.set(v,e.accuracy),this.set(_,null===e.altitude?void 0:e.altitude),this.set(w,null===e.altitudeAccuracy?void 0:e.altitudeAccuracy),this.set(E,null===e.heading?void 0:(0,u.toRadians)(e.heading)),this.position_?(this.position_[0]=e.longitude,this.position_[1]=e.latitude):this.position_=[e.longitude,e.latitude],this.transform_(this.position_)),t=(this.set(C,t.slice()),this.set(S,null===e.speed?void 0:e.speed),(0,a.circular)(this.position_,e.accuracy));t.applyTransform(this.transform_),this.set(b,t),this.changed()}},{key:"positionError_",value:function(e){this.dispatchEvent(new P(e))}},{key:"getAccuracy",value:function(){return this.get(v)}},{key:"getAccuracyGeometry",value:function(){return this.get(b)||null}},{key:"getAltitude",value:function(){return this.get(_)}},{key:"getAltitudeAccuracy",value:function(){return this.get(w)}},{key:"getHeading",value:function(){return this.get(E)}},{key:"getPosition",value:function(){return this.get(C)}},{key:"getProjection",value:function(){return this.get(I)}},{key:"getSpeed",value:function(){return this.get(S)}},{key:"getTracking",value:function(){return this.get(j)}},{key:"getTrackingOptions",value:function(){return this.get(x)}},{key:"setProjection",value:function(e){this.set(I,(0,s.get)(e))}},{key:"setTracking",value:function(e){this.set(j,e)}},{key:"setTrackingOptions",value:function(e){this.set(x,e)}}]));r.default=e;function k(e){var t;return p(this,k),(t=d(this,k)).on,t.once,t.un,e=e||{},t.position_=null,t.transform_=s.identityTransform,t.watchId_=void 0,t.addChangeListener(I,t.handleProjectionChanged_),t.addChangeListener(j,t.handleTrackingChanged_),void 0!==e.projection&&t.setProjection(e.projection),void 0!==e.trackingOptions&&t.setTrackingOptions(e.trackingOptions),t.setTracking(void 0!==e.tracking&&e.tracking),t}function B(e){var t;return p(this,B),(t=d(this,B,[O])).code=e.code,t.message=e.message,t}},{"./Object.js":96,"./events/Event.js":133,"./geom/Polygon.js":211,"./math.js":279,"./proj.js":283}],84:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.decode=function(t,e){return e&&(t.src=e),t.src&&u.IMAGE_DECODE&&u.CREATE_IMAGE_BITMAP?t.decode().then(function(){return createImageBitmap(t)}).catch(function(e){if(t.complete&&t.width)return t;throw e}):A(t)},r.decodeFallback=A,r.default=void 0,r.listenImage=function(e,t,r){var n=!0,i=!1,o=!1,a=[(0,l.listenOnce)(e,s.default.LOAD,function(){o=!0,i||t()})];return e.src&&u.IMAGE_DECODE?(i=!0,e.decode().then(function(){n&&t()}).catch(function(e){n&&(o?t:r)()})):a.push((0,l.listenOnce)(e,s.default.ERROR,r)),function(){n=!1,a.forEach(l.unlistenByKey)}},r.load=y;var n=o(e("./events/Target.js")),s=o(e("./events/EventType.js")),a=o(e("./ImageState.js")),u=e("./has.js"),l=e("./events.js"),c=e("./functions.js");function o(e){return e&&e.__esModule?e:{default:e}}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function h(e,t,r){t=d(t);var n=e,t=p()?Reflect.construct(t,r||[],d(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(p=function(){return!!e})()}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){return(g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}e=function(){function o(e,t,r,n){var i;if(this instanceof o)return(i=h(this,o)).extent=e,i.pixelRatio_=r,i.resolution=t,i.state="function"==typeof n?a.default.IDLE:n,i.image_=null,i.loader="function"==typeof n?n:null,i;throw new TypeError("Cannot call a class as a function")}var e,t=o,r=n.default;if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&g(t,r),t=o,(r=[{key:"changed",value:function(){this.dispatchEvent(s.default.CHANGE)}},{key:"getExtent",value:function(){return this.extent}},{key:"getImage",value:function(){return this.image_}},{key:"getPixelRatio",value:function(){return this.pixelRatio_}},{key:"getResolution",value:function(){return this.resolution}},{key:"getState",value:function(){return this.state}},{key:"load",value:function(){var e,t,r=this;this.state==a.default.IDLE&&this.loader&&(this.state=a.default.LOADING,this.changed(),e=this.getResolution(),t=Array.isArray(e)?e[0]:e,(0,c.toPromise)(function(){return r.loader(r.getExtent(),t,r.getPixelRatio())}).then(function(e){"image"in e&&(r.image_=e.image),"extent"in e&&(r.extent=e.extent),"resolution"in e&&(r.resolution=e.resolution),"pixelRatio"in e&&(r.pixelRatio_=e.pixelRatio),(e instanceof HTMLImageElement||e instanceof ImageBitmap||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement)&&(r.image_=e),r.state=a.default.LOADED}).catch(function(e){r.state=a.default.ERROR,console.error(e)}).finally(function(){return r.changed()}))}},{key:"setImage",value:function(e){this.image_=e}},{key:"setResolution",value:function(e){this.resolution=e}}])&&f(t.prototype,r),e&&f(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();function y(o,a){return new Promise(function(e,t){function r(){i(),e(o)}function n(){i(),t(new Error("Image load error"))}function i(){o.removeEventListener("load",r),o.removeEventListener("error",n)}o.addEventListener("load",r),o.addEventListener("error",n),a&&(o.src=a)})}function A(n,e){return e&&(n.src=e),n.src&&u.IMAGE_DECODE?new Promise(function(t,r){return n.decode().then(function(){return t(n)}).catch(function(e){return n.complete&&n.width?t(n):r(e)})}):y(n)}r.default=e},{"./ImageState.js":86,"./events.js":132,"./events/EventType.js":134,"./events/Target.js":137,"./functions.js":200,"./has.js":233}],85:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=o(e("./ImageState.js")),n=o(e("./Image.js"));function o(e){return e&&e.__esModule?e:{default:e}}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function u(e,t,r){t=c(t);var n=e,t=l()?Reflect.construct(t,r||[],c(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(l=function(){return!!e})()}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}e=function(){function o(e,t,r,n,i){if(this instanceof o)return(e=u(this,o,[e,t,r,void 0!==i?a.default.IDLE:a.default.LOADED])).loader_=void 0!==i?i:null,e.canvas_=n,e.error_=null,e;throw new TypeError("Cannot call a class as a function")}var e,t=o,r=n.default;if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&f(t,r),t=o,(r=[{key:"getError",value:function(){return this.error_}},{key:"handleLoad_",value:function(e){e?(this.error_=e,this.state=a.default.ERROR):this.state=a.default.LOADED,this.changed()}},{key:"load",value:function(){this.state==a.default.IDLE&&(this.state=a.default.LOADING,this.changed(),this.loader_(this.handleLoad_.bind(this)))}},{key:"getImage",value:function(){return this.canvas_}}])&&s(t.prototype,r),e&&s(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();r.default=e},{"./Image.js":84,"./ImageState.js":86}],86:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;r.default={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4}},{}],87:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=a(e("./Tile.js")),o=a(e("./TileState.js")),s=e("./dom.js"),u=e("./Image.js");function a(e){return e&&e.__esModule?e:{default:e}}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function c(e,t,r){t=h(t);var n=e,t=f()?Reflect.construct(t,r||[],h(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(f=function(){return!!e})()}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}e=function(){function a(e,t,r,n,i,o){if(this instanceof a)return(e=c(this,a,[e,t,o])).crossOrigin_=n,e.src_=r,e.key=r,e.image_=new Image,null!==n&&(e.image_.crossOrigin=n),e.unlisten_=null,e.tileLoadFunction_=i,e;throw new TypeError("Cannot call a class as a function")}var e,t=a,r=n.default;if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&p(t,r),t=a,(r=[{key:"getImage",value:function(){return this.image_}},{key:"setImage",value:function(e){this.image_=e,this.state=o.default.LOADED,this.unlistenImage_(),this.changed()}},{key:"handleImageError_",value:function(){var e;this.state=o.default.ERROR,this.unlistenImage_(),this.image_=((e=(0,s.createCanvasContext2D)(1,1)).fillStyle="rgba(0,0,0,0)",e.fillRect(0,0,1,1),e.canvas),this.changed()}},{key:"handleImageLoad_",value:function(){var e=this.image_;e.naturalWidth&&e.naturalHeight?this.state=o.default.LOADED:this.state=o.default.EMPTY,this.unlistenImage_(),this.changed()}},{key:"load",value:function(){this.state==o.default.ERROR&&(this.state=o.default.IDLE,this.image_=new Image,null!==this.crossOrigin_)&&(this.image_.crossOrigin=this.crossOrigin_),this.state==o.default.IDLE&&(this.state=o.default.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=(0,u.listenImage)(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}},{key:"unlistenImage_",value:function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}])&&l(t.prototype,r),e&&l(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();r.default=e},{"./Image.js":84,"./Tile.js":100,"./TileState.js":104,"./dom.js":130}],88:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;o=function e(t,r,n){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.decay_=t,this.minVelocity_=r,this.delay_=n,this.points_=[],this.angle_=0,this.initialVelocity_=0},(s=[{key:"begin",value:function(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}},{key:"update",value:function(e,t){this.points_.push(e,t,Date.now())}},{key:"end",value:function(){if(this.points_.length<6)return!1;var e=Date.now()-this.delay_,t=this.points_.length-3;if(this.points_[2+t]<e)return!1;for(var r=t-3;0<r&&this.points_[r+2]>e;)r-=3;var n,i=this.points_[2+t]-this.points_[r+2];return!(i<1e3/60)&&(n=this.points_[t]-this.points_[r],t=this.points_[1+t]-this.points_[r+1],this.angle_=Math.atan2(t,n),this.initialVelocity_=Math.sqrt(n*n+t*t)/i,this.initialVelocity_>this.minVelocity_)}},{key:"getDistance",value:function(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}},{key:"getAngle",value:function(){return this.angle_}}])&&n(o.prototype,s),a&&n(o,a),Object.defineProperty(o,"prototype",{writable:!1});var o,a,s=o;r.default=s},{}],89:[function(e,D,t){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=O(e("./Object.js")),c=O(e("./Collection.js")),f=O(e("./CollectionEventType.js")),o=O(e("./renderer/Composite.js")),s=O(e("./events/EventType.js")),u=O(e("./layer/Layer.js")),h=r(e("./layer/Group.js")),L=O(e("./MapBrowserEvent.js")),Q=O(e("./MapBrowserEventHandler.js")),p=O(e("./MapBrowserEventType.js")),d=O(e("./MapEvent.js")),g=O(e("./MapEventType.js")),y=O(e("./MapProperty.js")),i=O(e("./ObjectEventType.js")),F=O(e("./pointer/EventType.js")),A=O(e("./render/EventType.js")),m=r(e("./TileQueue.js")),v=O(e("./View.js")),b=O(e("./ViewHint.js")),_=e("./has.js"),w=e("./functions.js"),E=e("./transform.js"),C=e("./asserts.js"),I=e("./extent.js"),N=e("./control/defaults.js"),G=e("./interaction/defaults.js"),U=e("./array.js"),S=e("./proj.js"),z=e("./util.js"),j=e("./size.js"),x=e("./events.js"),q=e("./dom.js"),H=e("./console.js");function l(e){var t,r;return"function"!=typeof WeakMap?null:(t=new WeakMap,r=new WeakMap,(l=function(e){return e?r:t})(e))}function r(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};t=l(t);if(t&&t.has(e))return t.get(e);var r,n,i={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in e)"default"!==r&&{}.hasOwnProperty.call(e,r)&&((n=o?Object.getOwnPropertyDescriptor(e,r):null)&&(n.get||n.set)?Object.defineProperty(i,r,n):i[r]=e[r]);return i.default=e,t&&t.set(e,i),i}function O(e){return e&&e.__esModule?e:{default:e}}function P(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=a(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==a(e)?e:e+""}(n.key),n)}}function W(e,t,r){t=T(t);var n=e,t=k()?Reflect.construct(t,r||[],T(e).constructor):t.apply(e,r);if(t&&("object"==a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(k=function(){return!!e})()}function B(){return(B="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=T(e)););return e}(e,t);if(n)return(n=Object.getOwnPropertyDescriptor(n,t)).get?n.get.call(arguments.length<3?e:r):n.value}).apply(null,arguments)}function T(e){return(T=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function M(e,t){return(M=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function R(e){e instanceof u.default?e.setMapInternal(null):e instanceof h.default&&e.getLayers().forEach(R)}e=function(){function l(e){var r;if(!(this instanceof l))throw new TypeError("Cannot call a class as a function");e=e||{},(r=W(this,l)).on,r.once,r.un;t=null,void 0!==(s=e).keyboardEventTarget&&(t="string"==typeof s.keyboardEventTarget?document.getElementById(s.keyboardEventTarget):s.keyboardEventTarget),o={},a=s.layers&&"function"==typeof s.layers.getLayers?s.layers:new h.default({layers:s.layers}),o[y.default.LAYERGROUP]=a,o[y.default.TARGET]=s.target,o[y.default.VIEW]=s.view instanceof v.default?s.view:new v.default,void 0!==s.controls&&(n=Array.isArray(s.controls)?new c.default(s.controls.slice()):((0,C.assert)("function"==typeof s.controls.getArray,"Expected `controls` to be an array or an `ol/Collection.js`"),s.controls)),void 0!==s.interactions&&(i=Array.isArray(s.interactions)?new c.default(s.interactions.slice()):((0,C.assert)("function"==typeof s.interactions.getArray,"Expected `interactions` to be an array or an `ol/Collection.js`"),s.interactions)),a=void 0!==s.overlays?Array.isArray(s.overlays)?new c.default(s.overlays.slice()):((0,C.assert)("function"==typeof s.overlays.getArray,"Expected `overlays` to be an array or an `ol/Collection.js`"),s.overlays):new c.default;var t,n,i,o,a,s={controls:n,interactions:i,keyboardEventTarget:t,overlays:a,values:o},u=(r.renderComplete_,r.loaded_=!0,r.boundHandleBrowserEvent_=r.handleBrowserEvent.bind(r),r.maxTilesLoading_=void 0!==e.maxTilesLoading?e.maxTilesLoading:16,r.pixelRatio_=void 0!==e.pixelRatio?e.pixelRatio:_.DEVICE_PIXEL_RATIO,r.postRenderTimeoutHandle_,r.animationDelayKey_,r.animationDelay_=r.animationDelay_.bind(r),r.coordinateToPixelTransform_=(0,E.create)(),r.pixelToCoordinateTransform_=(0,E.create)(),r.frameIndex_=0,r.frameState_=null,r.previousExtent_=null,r.viewPropertyListenerKey_=null,r.viewChangeListenerKey_=null,r.layerGroupPropertyListenerKeys_=null,r.viewport_=document.createElement("div"),r.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),r.viewport_.style.position="relative",r.viewport_.style.overflow="hidden",r.viewport_.style.width="100%",r.viewport_.style.height="100%",r.overlayContainer_=document.createElement("div"),r.overlayContainer_.style.position="absolute",r.overlayContainer_.style.zIndex="0",r.overlayContainer_.style.width="100%",r.overlayContainer_.style.height="100%",r.overlayContainer_.style.pointerEvents="none",r.overlayContainer_.className="ol-overlaycontainer",r.viewport_.appendChild(r.overlayContainer_),r.overlayContainerStopEvent_=document.createElement("div"),r.overlayContainerStopEvent_.style.position="absolute",r.overlayContainerStopEvent_.style.zIndex="0",r.overlayContainerStopEvent_.style.width="100%",r.overlayContainerStopEvent_.style.height="100%",r.overlayContainerStopEvent_.style.pointerEvents="none",r.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",r.viewport_.appendChild(r.overlayContainerStopEvent_),r.mapBrowserEventHandler_=null,r.moveTolerance_=e.moveTolerance,r.keyboardEventTarget_=s.keyboardEventTarget,r.targetChangeHandlerKeys_=null,r.targetElement_=null,r.resizeObserver_=new ResizeObserver(function(){return r.updateSize()}),r.controls=s.controls||(0,N.defaults)(),r.interactions=s.interactions||(0,G.defaults)({onFocusOnly:!0}),r.overlays_=s.overlays,r.overlayIdIndex_={},r.renderer_=null,r.postRenderFunctions_=[],r.tileQueue_=new m.default(r.getTilePriority.bind(r),r.handleTileChange_.bind(r)),r.addChangeListener(y.default.LAYERGROUP,r.handleLayerGroupChanged_),r.addChangeListener(y.default.VIEW,r.handleViewChanged_),r.addChangeListener(y.default.SIZE,r.handleSizeChanged_),r.addChangeListener(y.default.TARGET,r.handleTargetChanged_),r.setProperties(s.values),r);return!e.view||e.view instanceof v.default||e.view.then(function(e){u.setView(new v.default(e))}),r.controls.addEventListener(f.default.ADD,function(e){e.element.setMap(r)}),r.controls.addEventListener(f.default.REMOVE,function(e){e.element.setMap(null)}),r.interactions.addEventListener(f.default.ADD,function(e){e.element.setMap(r)}),r.interactions.addEventListener(f.default.REMOVE,function(e){e.element.setMap(null)}),r.overlays_.addEventListener(f.default.ADD,function(e){r.addOverlayInternal_(e.element)}),r.overlays_.addEventListener(f.default.REMOVE,function(e){var t=e.element.getId();void 0!==t&&delete r.overlayIdIndex_[t.toString()],e.element.setMap(null)}),r.controls.forEach(function(e){e.setMap(r)}),r.interactions.forEach(function(e){e.setMap(r)}),r.overlays_.forEach(r.addOverlayInternal_.bind(r)),r}var e,t=l,r=n.default;if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&M(t,r),t=l,(r=[{key:"addControl",value:function(e){this.getControls().push(e)}},{key:"addInteraction",value:function(e){this.getInteractions().push(e)}},{key:"addLayer",value:function(e){this.getLayerGroup().getLayers().push(e)}},{key:"handleLayerAdd_",value:function(e){!function e(t,r){if(t instanceof u.default)t.setMapInternal(r);else if(t instanceof h.default)for(var n=t.getLayers().getArray(),i=0,o=n.length;i<o;++i)e(n[i],r)}(e.layer,this)}},{key:"addOverlay",value:function(e){this.getOverlays().push(e)}},{key:"addOverlayInternal_",value:function(e){var t=e.getId();void 0!==t&&(this.overlayIdIndex_[t.toString()]=e),e.setMap(this)}},{key:"disposeInternal",value:function(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),B(T(l.prototype),"disposeInternal",this).call(this)}},{key:"forEachFeatureAtPixel",value:function(e,t,r){var n,i;if(this.frameState_&&this.renderer_)return e=this.getCoordinateFromPixelInternal(e),n=void 0!==(r=void 0!==r?r:{}).hitTolerance?r.hitTolerance:0,i=void 0!==r.layerFilter?r.layerFilter:w.TRUE,r=!1!==r.checkWrapped,this.renderer_.forEachFeatureAtCoordinate(e,this.frameState_,n,r,t,null,i,null)}},{key:"getFeaturesAtPixel",value:function(e,t){var r=[];return this.forEachFeatureAtPixel(e,function(e){r.push(e)},t),r}},{key:"getAllLayers",value:function(){var r=[];return function t(e){e.forEach(function(e){e instanceof h.default?t(e.getLayers()):r.push(e)})}(this.getLayers()),r}},{key:"hasFeatureAtPixel",value:function(e,t){var r,n;return!(!this.frameState_||!this.renderer_)&&(e=this.getCoordinateFromPixelInternal(e),r=void 0!==(t=void 0!==t?t:{}).layerFilter?t.layerFilter:w.TRUE,n=void 0!==t.hitTolerance?t.hitTolerance:0,t=!1!==t.checkWrapped,this.renderer_.hasFeatureAtCoordinate(e,this.frameState_,n,t,r,null))}},{key:"getEventCoordinate",value:function(e){return this.getCoordinateFromPixel(this.getEventPixel(e))}},{key:"getEventCoordinateInternal",value:function(e){return this.getCoordinateFromPixelInternal(this.getEventPixel(e))}},{key:"getEventPixel",value:function(e){var t=this.viewport_.getBoundingClientRect(),r=this.getSize(),n=t.width/r[0],r=t.height/r[1],e="changedTouches"in e?e.changedTouches[0]:e;return[(e.clientX-t.left)/n,(e.clientY-t.top)/r]}},{key:"getTarget",value:function(){return this.get(y.default.TARGET)}},{key:"getTargetElement",value:function(){return this.targetElement_}},{key:"getCoordinateFromPixel",value:function(e){return(0,S.toUserCoordinate)(this.getCoordinateFromPixelInternal(e),this.getView().getProjection())}},{key:"getCoordinateFromPixelInternal",value:function(e){var t=this.frameState_;return t?(0,E.apply)(t.pixelToCoordinateTransform,e.slice()):null}},{key:"getControls",value:function(){return this.controls}},{key:"getOverlays",value:function(){return this.overlays_}},{key:"getOverlayById",value:function(e){e=this.overlayIdIndex_[e.toString()];return void 0!==e?e:null}},{key:"getInteractions",value:function(){return this.interactions}},{key:"getLayerGroup",value:function(){return this.get(y.default.LAYERGROUP)}},{key:"setLayers",value:function(e){var t=this.getLayerGroup();e instanceof c.default?t.setLayers(e):((t=t.getLayers()).clear(),t.extend(e))}},{key:"getLayers",value:function(){return this.getLayerGroup().getLayers()}},{key:"getLoadingOrNotReady",value:function(){for(var e=this.getLayerGroup().getLayerStatesArray(),t=0,r=e.length;t<r;++t){var n=e[t];if(n.visible){var i=n.layer.getRenderer();if(i&&!i.ready)return!0;i=n.layer.getSource();if(i&&i.loading)return!0}}return!1}},{key:"getPixelFromCoordinate",value:function(e){e=(0,S.fromUserCoordinate)(e,this.getView().getProjection());return this.getPixelFromCoordinateInternal(e)}},{key:"getPixelFromCoordinateInternal",value:function(e){var t=this.frameState_;return t?(0,E.apply)(t.coordinateToPixelTransform,e.slice(0,2)):null}},{key:"getRenderer",value:function(){return this.renderer_}},{key:"getSize",value:function(){return this.get(y.default.SIZE)}},{key:"getView",value:function(){return this.get(y.default.VIEW)}},{key:"getViewport",value:function(){return this.viewport_}},{key:"getOverlayContainer",value:function(){return this.overlayContainer_}},{key:"getOverlayContainerStopEvent",value:function(){return this.overlayContainerStopEvent_}},{key:"getOwnerDocument",value:function(){var e=this.getTargetElement();return e?e.ownerDocument:document}},{key:"getTilePriority",value:function(e,t,r,n){return(0,m.getTilePriority)(this.frameState_,e,t,r,n)}},{key:"handleBrowserEvent",value:function(e,t){t=t||e.type;t=new L.default(t,this,e);this.handleMapBrowserEvent(t)}},{key:"handleMapBrowserEvent",value:function(e){if(this.frameState_){var t=e.originalEvent,r=t.type;if(r===F.default.POINTERDOWN||r===s.default.WHEEL||r===s.default.KEYDOWN){var r=this.getOwnerDocument(),n=this.viewport_.getRootNode?this.viewport_.getRootNode():r,t=t.target;if(this.overlayContainerStopEvent_.contains(t)||!(n===r?r.documentElement:n).contains(t))return}if(e.frameState=this.frameState_,!1!==this.dispatchEvent(e))for(var i=this.getInteractions().getArray().slice(),o=i.length-1;0<=o;o--){var a=i[o];if(a.getMap()===this&&a.getActive()&&this.getTargetElement()&&(!a.handleEvent(e)||e.propagationStopped))break}}}},{key:"handlePostRender",value:function(){var e,t,r,n=this.frameState_,i=this.tileQueue_;i.isEmpty()||(r=t=this.maxTilesLoading_,n&&((e=n.viewHints)[b.default.ANIMATING]||e[b.default.INTERACTING])&&(t=(e=8<Date.now()-n.time)?0:8,r=e?0:2),i.getTilesLoading()<t&&(i.reprioritize(),i.loadMoreTiles(t,r))),n&&this.renderer_&&!n.animate&&(!0===this.renderComplete_?(this.hasListener(A.default.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(A.default.RENDERCOMPLETE,n),!1===this.loaded_&&(this.loaded_=!0,this.dispatchEvent(new d.default(g.default.LOADEND,this,n)))):!0===this.loaded_&&(this.loaded_=!1,this.dispatchEvent(new d.default(g.default.LOADSTART,this,n))));for(var o=this.postRenderFunctions_,a=0,s=o.length;a<s;++a)o[a](this,n);o.length=0}},{key:"handleSizeChanged_",value:function(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}},{key:"handleTargetChanged_",value:function(){if(this.mapBrowserEventHandler_){for(var e=0,t=this.targetChangeHandlerKeys_.length;e<t;++e)(0,x.unlistenByKey)(this.targetChangeHandlerKeys_[e]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(s.default.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(s.default.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),(this.mapBrowserEventHandler_=null,q.removeNode)(this.viewport_)}this.targetElement_&&(this.resizeObserver_.unobserve(this.targetElement_),(r=this.targetElement_.getRootNode())instanceof ShadowRoot&&this.resizeObserver_.unobserve(r.host),this.setSize(void 0));var r=this.getTarget(),r="string"==typeof r?document.getElementById(r):r;if(this.targetElement_=r){for(var n in r.appendChild(this.viewport_),this.renderer_||(this.renderer_=new o.default(this)),this.mapBrowserEventHandler_=new Q.default(this,this.moveTolerance_),p.default)this.mapBrowserEventHandler_.addEventListener(p.default[n],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(s.default.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(s.default.WHEEL,this.boundHandleBrowserEvent_,!!_.PASSIVE_EVENT_LISTENERS&&{passive:!1});var i=this.keyboardEventTarget_||r,i=(this.targetChangeHandlerKeys_=[(0,x.listen)(i,s.default.KEYDOWN,this.handleBrowserEvent,this),(0,x.listen)(i,s.default.KEYPRESS,this.handleBrowserEvent,this)],r.getRootNode());i instanceof ShadowRoot&&this.resizeObserver_.observe(i.host),this.resizeObserver_.observe(r)}else this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);this.updateSize()}},{key:"handleTileChange_",value:function(){this.render()}},{key:"handleViewPropertyChanged_",value:function(){this.render()}},{key:"handleViewChanged_",value:function(){this.viewPropertyListenerKey_&&((0,x.unlistenByKey)(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&((0,x.unlistenByKey)(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);var e=this.getView();e&&(this.updateViewportSize_(this.getSize()),this.viewPropertyListenerKey_=(0,x.listen)(e,i.default.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=(0,x.listen)(e,s.default.CHANGE,this.handleViewPropertyChanged_,this),e.resolveConstraints(0)),this.render()}},{key:"handleLayerGroupChanged_",value:function(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(x.unlistenByKey),this.layerGroupPropertyListenerKeys_=null);var e=this.getLayerGroup();e&&(this.handleLayerAdd_(new h.GroupEvent("addlayer",e)),this.layerGroupPropertyListenerKeys_=[(0,x.listen)(e,i.default.PROPERTYCHANGE,this.render,this),(0,x.listen)(e,s.default.CHANGE,this.render,this),(0,x.listen)(e,"addlayer",this.handleLayerAdd_,this),(0,x.listen)(e,"removelayer",this.handleLayerRemove_,this)]),this.render()}},{key:"isRendered",value:function(){return!!this.frameState_}},{key:"animationDelay_",value:function(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}},{key:"renderSync",value:function(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}},{key:"redrawText",value:function(){for(var e=this.getLayerGroup().getLayerStatesArray(),t=0,r=e.length;t<r;++t){var n=e[t].layer;n.hasRenderer()&&n.getRenderer().handleFontsChanged()}}},{key:"render",value:function(){this.renderer_&&void 0===this.animationDelayKey_&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}},{key:"removeControl",value:function(e){return this.getControls().remove(e)}},{key:"removeInteraction",value:function(e){return this.getInteractions().remove(e)}},{key:"removeLayer",value:function(e){return this.getLayerGroup().getLayers().remove(e)}},{key:"handleLayerRemove_",value:function(e){R(e.layer)}},{key:"removeOverlay",value:function(e){return this.getOverlays().remove(e)}},{key:"renderFrame_",value:function(e){var t,r=this,n=this.getSize(),i=this.getView(),o=this.frameState_,a=null;void 0!==n&&(0,j.hasArea)(n)&&i&&i.isDef()&&(t=i.getHints(this.frameState_?this.frameState_.viewHints:void 0),i=i.getState(),a={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutter:null,extent:(0,I.getForViewAndSize)(i.center,i.resolution,i.rotation,n),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:n,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:i,viewHints:t,wantedTiles:{},mapId:(0,z.getUid)(this),renderTargets:{}},i.nextCenter)&&i.nextResolution&&(e=isNaN(i.nextRotation)?i.rotation:i.nextRotation,a.nextExtent=(0,I.getForViewAndSize)(i.nextCenter,i.nextResolution,e,n)),this.frameState_=a,this.renderer_.renderFrame(a),a&&(a.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,a.postRenderFunctions),!o||this.previousExtent_&&((0,I.isEmpty)(this.previousExtent_)||(0,I.equals)(a.extent,this.previousExtent_))||(this.dispatchEvent(new d.default(g.default.MOVESTART,this,o)),this.previousExtent_=(0,I.createOrUpdateEmpty)(this.previousExtent_)),!this.previousExtent_||a.viewHints[b.default.ANIMATING]||a.viewHints[b.default.INTERACTING]||(0,I.equals)(a.extent,this.previousExtent_)||(this.dispatchEvent(new d.default(g.default.MOVEEND,this,a)),(0,I.clone)(a.extent,this.previousExtent_))),this.dispatchEvent(new d.default(g.default.POSTRENDER,this,a)),this.renderComplete_=this.hasListener(g.default.LOADSTART)||this.hasListener(g.default.LOADEND)||this.hasListener(A.default.RENDERCOMPLETE)?!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady():void 0,this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(function(){r.postRenderTimeoutHandle_=void 0,r.handlePostRender()},0))}},{key:"setLayerGroup",value:function(e){var t=this.getLayerGroup();t&&this.handleLayerRemove_(new h.GroupEvent("removelayer",t)),this.set(y.default.LAYERGROUP,e)}},{key:"setSize",value:function(e){this.set(y.default.SIZE,e)}},{key:"setTarget",value:function(e){this.set(y.default.TARGET,e)}},{key:"setView",value:function(e){var t;!e||e instanceof v.default?this.set(y.default.VIEW,e):(this.set(y.default.VIEW,new v.default),t=this,e.then(function(e){t.setView(new v.default(e))}))}},{key:"updateSize",value:function(){var e,t=this.getTargetElement(),r=void 0,n=(t&&(e=getComputedStyle(t),n=t.offsetWidth-parseFloat(e.borderLeftWidth)-parseFloat(e.paddingLeft)-parseFloat(e.paddingRight)-parseFloat(e.borderRightWidth),e=t.offsetHeight-parseFloat(e.borderTopWidth)-parseFloat(e.paddingTop)-parseFloat(e.paddingBottom)-parseFloat(e.borderBottomWidth),isNaN(n)||isNaN(e)||!(0,j.hasArea)(r=[n,e])&&(t.offsetWidth||t.offsetHeight||t.getClientRects().length)&&(0,H.warn)("No map visible because the map container's width or height are 0.")),this.getSize());!r||n&&(0,U.equals)(r,n)||(this.setSize(r),this.updateViewportSize_(r))}},{key:"updateViewportSize_",value:function(e){var t=this.getView();t&&t.setViewportSize(e)}}])&&P(t.prototype,r),e&&P(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();t.default=e},{"./Collection.js":78,"./CollectionEventType.js":79,"./MapBrowserEvent.js":90,"./MapBrowserEventHandler.js":91,"./MapBrowserEventType.js":92,"./MapEvent.js":93,"./MapEventType.js":94,"./MapProperty.js":95,"./Object.js":96,"./ObjectEventType.js":97,"./TileQueue.js":102,"./View.js":107,"./ViewHint.js":108,"./array.js":110,"./asserts.js":111,"./console.js":115,"./control/defaults.js":127,"./dom.js":130,"./events.js":132,"./events/EventType.js":134,"./extent.js":142,"./functions.js":200,"./has.js":233,"./interaction/defaults.js":259,"./layer/Group.js":266,"./layer/Layer.js":269,"./pointer/EventType.js":282,"./proj.js":283,"./render/EventType.js":294,"./renderer/Composite.js":313,"./size.js":337,"./transform.js":402,"./util.js":404}],90:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=(e=e("./MapEvent.js"))&&e.__esModule?e:{default:e};function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function s(e,t,r){t=l(t);var n=e,t=a()?Reflect.construct(t,r||[],l(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function a(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(a=function(){return!!e})()}function u(){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=l(e)););return e}(e,t);if(n)return(n=Object.getOwnPropertyDescriptor(n,t)).get?n.get.call(arguments.length<3?e:r):n.value}).apply(null,arguments)}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}e=function(){function a(e,t,r,n,i,o){if(this instanceof a)return(e=s(this,a,[e,t,i])).originalEvent=r,e.pixel_=null,e.coordinate_=null,e.dragging=void 0!==n&&n,e.activePointers=o,e;throw new TypeError("Cannot call a class as a function")}var e,t=a,r=n.default;if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&c(t,r),t=a,(r=[{key:"pixel",get:function(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_},set:function(e){this.pixel_=e}},{key:"coordinate",get:function(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_},set:function(e){this.coordinate_=e}},{key:"preventDefault",value:function(){u(l(a.prototype),"preventDefault",this).call(this),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}},{key:"stopPropagation",value:function(){u(l(a.prototype),"stopPropagation",this).call(this),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}])&&o(t.prototype,r),e&&o(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();r.default=e},{"./MapEvent.js":93}],91:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("./events/EventType.js")),a=n(e("./MapBrowserEvent.js")),s=n(e("./MapBrowserEventType.js")),u=n(e("./pointer/EventType.js")),l=n(e("./events/Target.js")),c=e("./has.js"),f=e("./events.js");function n(e){return e&&e.__esModule?e:{default:e}}function h(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function p(e,t,r){t=y(t);var n=e,t=d()?Reflect.construct(t,r||[],y(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(d=function(){return!!e})()}function g(){return(g="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=y(e)););return e}(e,t);if(n)return(n=Object.getOwnPropertyDescriptor(n,t)).get?n.get.call(arguments.length<3?e:r):n.value}).apply(null,arguments)}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function A(e,t){return(A=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}e=function(){function n(e,t){var r;if(!(this instanceof n))throw new TypeError("Cannot call a class as a function");(r=p(this,n,[e])).map_=e,r.clickTimeoutId_,r.emulateClicks_=!1,r.dragging_=!1,r.dragListenerKeys_=[],r.moveTolerance_=void 0===t?1:t,r.down_=null;e=r.map_.getViewport();return r.activePointers_=[],r.trackedTouches_={},r.element_=e,r.pointerdownListenerKey_=(0,f.listen)(e,u.default.POINTERDOWN,r.handlePointerDown_,r),r.originalPointerMoveEvent_,r.relayedListenerKey_=(0,f.listen)(e,u.default.POINTERMOVE,r.relayMoveEvent_,r),r.boundHandleTouchMove_=r.handleTouchMove_.bind(r),r.element_.addEventListener(o.default.TOUCHMOVE,r.boundHandleTouchMove_,!!c.PASSIVE_EVENT_LISTENERS&&{passive:!1}),r}var e,t=n,r=l.default;if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&A(t,r),t=n,(r=[{key:"emulateClick_",value:function(t){var r=this,e=new a.default(s.default.CLICK,this.map_,t);this.dispatchEvent(e),void 0!==this.clickTimeoutId_?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,e=new a.default(s.default.DBLCLICK,this.map_,t),this.dispatchEvent(e)):this.clickTimeoutId_=setTimeout(function(){r.clickTimeoutId_=void 0;var e=new a.default(s.default.SINGLECLICK,r.map_,t);r.dispatchEvent(e)},250)}},{key:"updateActivePointers_",value:function(e){var t=e,e=t.pointerId;if(t.type==s.default.POINTERUP||t.type==s.default.POINTERCANCEL){for(var r in delete this.trackedTouches_[e],this.trackedTouches_)if(this.trackedTouches_[r].target!==t.target){delete this.trackedTouches_[r];break}}else t.type!=s.default.POINTERDOWN&&t.type!=s.default.POINTERMOVE||(this.trackedTouches_[e]=t);this.activePointers_=Object.values(this.trackedTouches_)}},{key:"handlePointerUp_",value:function(e){this.updateActivePointers_(e);var t=new a.default(s.default.POINTERUP,this.map_,e,void 0,void 0,this.activePointers_);this.dispatchEvent(t),this.emulateClicks_&&!t.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(e)&&this.emulateClick_(this.down_),0===this.activePointers_.length&&(this.dragListenerKeys_.forEach(f.unlistenByKey),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}},{key:"isMouseActionButton_",value:function(e){return 0===e.button}},{key:"handlePointerDown_",value:function(e){this.emulateClicks_=0===this.activePointers_.length,this.updateActivePointers_(e);var t=new a.default(s.default.POINTERDOWN,this.map_,e,void 0,void 0,this.activePointers_);this.dispatchEvent(t),this.down_=new PointerEvent(e.type,e),Object.defineProperty(this.down_,"target",{writable:!1,value:e.target}),0===this.dragListenerKeys_.length&&(t=this.map_.getOwnerDocument(),this.dragListenerKeys_.push((0,f.listen)(t,s.default.POINTERMOVE,this.handlePointerMove_,this),(0,f.listen)(t,s.default.POINTERUP,this.handlePointerUp_,this),(0,f.listen)(this.element_,s.default.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode)&&this.element_.getRootNode()!==t&&this.dragListenerKeys_.push((0,f.listen)(this.element_.getRootNode(),s.default.POINTERUP,this.handlePointerUp_,this))}},{key:"handlePointerMove_",value:function(e){this.isMoving_(e)&&(this.updateActivePointers_(e),this.dragging_=!0,e=new a.default(s.default.POINTERDRAG,this.map_,e,this.dragging_,void 0,this.activePointers_),this.dispatchEvent(e))}},{key:"relayMoveEvent_",value:function(e){this.originalPointerMoveEvent_=e;var t=!(!this.down_||!this.isMoving_(e));this.dispatchEvent(new a.default(s.default.POINTERMOVE,this.map_,e,t))}},{key:"handleTouchMove_",value:function(e){var t=this.originalPointerMoveEvent_;t&&!t.defaultPrevented||"boolean"==typeof e.cancelable&&!0!==e.cancelable||e.preventDefault()}},{key:"isMoving_",value:function(e){return this.dragging_||Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_}},{key:"disposeInternal",value:function(){this.relayedListenerKey_&&((0,f.unlistenByKey)(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(o.default.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&((0,f.unlistenByKey)(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(f.unlistenByKey),this.dragListenerKeys_.length=0,this.element_=null,g(y(n.prototype),"disposeInternal",this).call(this)}}])&&h(t.prototype,r),e&&h(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();r.default=e},{"./MapBrowserEvent.js":90,"./MapBrowserEventType.js":92,"./events.js":132,"./events/EventType.js":134,"./events/Target.js":137,"./has.js":233,"./pointer/EventType.js":282}],92:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;e=(e=e("./events/EventType.js"))&&e.__esModule?e:{default:e};r.default={SINGLECLICK:"singleclick",CLICK:e.default.CLICK,DBLCLICK:e.default.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"}},{"./events/EventType.js":134}],93:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=(e=e("./events/Event.js"))&&e.__esModule?e:{default:e};function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function s(e,t,r){t=l(t);var n=e,t=u()?Reflect.construct(t,r||[],l(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(u=function(){return!!e})()}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}e=function(){function n(e,t,r){if(this instanceof n)return(e=s(this,n,[e])).map=t,e.frameState=void 0!==r?r:null,e;throw new TypeError("Cannot call a class as a function")}var e,t,r=n,i=o.default;if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function");return r.prototype=Object.create(i&&i.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),i&&c(r,i),r=n,e&&a(r.prototype,e),t&&a(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}();r.default=e},{"./events/Event.js":133}],94:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;r.default={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"}},{}],95:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;r.default={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"}},{}],96:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.ObjectEvent=void 0;var n=l(e("./events/Event.js")),o=l(e("./ObjectEventType.js")),a=l(e("./Observable.js")),s=e("./util.js"),u=e("./obj.js");function l(e){return e&&e.__esModule?e:{default:e}}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function f(e,t,r){return t&&c(e.prototype,t),r&&c(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t,r){t=g(t);var n=e,t=d()?Reflect.construct(t,r||[],g(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(d=function(){return!!e})()}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&A(e,t)}function A(e,t){return(A=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var m=r.ObjectEvent=(y(b,n.default),f(b)),e=(y(v,a.default),f(v,[{key:"get",value:function(e){var t;return t=this.values_&&this.values_.hasOwnProperty(e)?this.values_[e]:t}},{key:"getKeys",value:function(){return this.values_&&Object.keys(this.values_)||[]}},{key:"getProperties",value:function(){return this.values_&&Object.assign({},this.values_)||{}}},{key:"getPropertiesInternal",value:function(){return this.values_}},{key:"hasProperties",value:function(){return!!this.values_}},{key:"notify",value:function(e,t){var r="change:".concat(e);this.hasListener(r)&&this.dispatchEvent(new m(r,e,t)),r=o.default.PROPERTYCHANGE,this.hasListener(r)&&this.dispatchEvent(new m(r,e,t))}},{key:"addChangeListener",value:function(e,t){this.addEventListener("change:".concat(e),t)}},{key:"removeChangeListener",value:function(e,t){this.removeEventListener("change:".concat(e),t)}},{key:"set",value:function(e,t,r){var n=this.values_||(this.values_={});r?n[e]=t:(r=n[e])!==(n[e]=t)&&this.notify(e,r)}},{key:"setProperties",value:function(e,t){for(var r in e)this.set(r,e[r],t)}},{key:"applyProperties",value:function(e){e.values_&&Object.assign(this.values_||(this.values_={}),e.values_)}},{key:"unset",value:function(e,t){var r;this.values_&&e in this.values_&&(r=this.values_[e],delete this.values_[e],(0,u.isEmpty)(this.values_)&&(this.values_=null),t||this.notify(e,r))}}]));r.default=e;function v(e){var t;return h(this,v),(t=p(this,v)).on,t.once,t.un,(0,s.getUid)(t),t.values_=null,void 0!==e&&t.setProperties(e),t}function b(e,t,r){return h(this,b),(e=p(this,b,[e])).key=t,e.oldValue=r,e}},{"./ObjectEventType.js":97,"./Observable.js":98,"./events/Event.js":133,"./obj.js":281,"./util.js":404}],97:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;r.default={PROPERTYCHANGE:"propertychange"}},{}],98:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,r.unByKey=p;var o=n(e("./events/Target.js")),a=n(e("./events/EventType.js")),s=e("./events.js");function n(e){return e&&e.__esModule?e:{default:e}}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function l(e,t,r){t=f(t);var n=e,t=c()?Reflect.construct(t,r||[],f(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(c=function(){return!!e})()}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}e=function(){function t(){var e;if(this instanceof t)return(e=l(this,t)).on=e.onInternal,e.once=e.onceInternal,e.un=e.unInternal,e.revision_=0,e;throw new TypeError("Cannot call a class as a function")}var e,r=t,n=o.default;if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");return r.prototype=Object.create(n&&n.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),n&&h(r,n),r=t,(n=[{key:"changed",value:function(){++this.revision_,this.dispatchEvent(a.default.CHANGE)}},{key:"getRevision",value:function(){return this.revision_}},{key:"onInternal",value:function(e,t){if(Array.isArray(e)){for(var r=e.length,n=new Array(r),i=0;i<r;++i)n[i]=(0,s.listen)(this,e[i],t);return n}return(0,s.listen)(this,e,t)}},{key:"onceInternal",value:function(e,t){if(Array.isArray(e))for(var r=e.length,n=new Array(r),i=0;i<r;++i)n[i]=(0,s.listenOnce)(this,e[i],t);else n=(0,s.listenOnce)(this,e,t);return t.ol_key=n}},{key:"unInternal",value:function(e,t){var r=t.ol_key;if(r)p(r);else if(Array.isArray(e))for(var n=0,i=e.length;n<i;++n)this.removeEventListener(e[n],t);else this.removeEventListener(e,t)}}])&&u(r.prototype,n),e&&u(r,e),Object.defineProperty(r,"prototype",{writable:!1}),r}();function p(e){if(Array.isArray(e))for(var t=0,r=e.length;t<r;++t)(0,s.unlistenByKey)(e[t]);else(0,s.unlistenByKey)(e)}e.prototype.on,e.prototype.once,e.prototype.un;r.default=e},{"./events.js":132,"./events/EventType.js":134,"./events/Target.js":137}],99:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("./Object.js")),a=n(e("./MapEventType.js")),s=e("./css.js"),u=e("./extent.js"),l=e("./events.js"),c=e("./dom.js");function n(e){return e&&e.__esModule?e:{default:e}}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function h(e,t,r){t=d(t);var n=e,t=p()?Reflect.construct(t,r||[],d(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(p=function(){return!!e})()}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){return(g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var y="element",A="map",m="offset",v="position",b="positioning",e=function(){function r(e){var t;if(this instanceof r)return(t=h(this,r)).on,t.once,t.un,t.options=e,t.id=e.id,t.insertFirst=void 0===e.insertFirst||e.insertFirst,t.stopEvent=void 0===e.stopEvent||e.stopEvent,t.element=document.createElement("div"),t.element.className=void 0!==e.className?e.className:"ol-overlay-container "+s.CLASS_SELECTABLE,t.element.style.position="absolute",t.element.style.pointerEvents="auto",t.autoPan=!0===e.autoPan?{}:e.autoPan||void 0,t.rendered={transform_:"",visible:!0},t.mapPostrenderListenerKey=null,t.addChangeListener(y,t.handleElementChanged),t.addChangeListener(A,t.handleMapChanged),t.addChangeListener(m,t.handleOffsetChanged),t.addChangeListener(v,t.handlePositionChanged),t.addChangeListener(b,t.handlePositioningChanged),void 0!==e.element&&t.setElement(e.element),t.setOffset(void 0!==e.offset?e.offset:[0,0]),t.setPositioning(e.positioning||"top-left"),void 0!==e.position&&t.setPosition(e.position),t;throw new TypeError("Cannot call a class as a function")}var e,t=r,n=o.default;if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&g(t,n),t=r,(n=[{key:"getElement",value:function(){return this.get(y)}},{key:"getId",value:function(){return this.id}},{key:"getMap",value:function(){return this.get(A)||null}},{key:"getOffset",value:function(){return this.get(m)}},{key:"getPosition",value:function(){return this.get(v)}},{key:"getPositioning",value:function(){return this.get(b)}},{key:"handleElementChanged",value:function(){(0,c.removeChildren)(this.element);var e=this.getElement();e&&this.element.appendChild(e)}},{key:"handleMapChanged",value:function(){this.mapPostrenderListenerKey&&((0,c.removeNode)(this.element),(0,l.unlistenByKey)(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);var e=this.getMap();e&&(this.mapPostrenderListenerKey=(0,l.listen)(e,a.default.POSTRENDER,this.render,this),this.updatePixelPosition(),e=this.stopEvent?e.getOverlayContainerStopEvent():e.getOverlayContainer(),this.insertFirst?e.insertBefore(this.element,e.childNodes[0]||null):e.appendChild(this.element),this.performAutoPan())}},{key:"render",value:function(){this.updatePixelPosition()}},{key:"handleOffsetChanged",value:function(){this.updatePixelPosition()}},{key:"handlePositionChanged",value:function(){this.updatePixelPosition(),this.performAutoPan()}},{key:"handlePositioningChanged",value:function(){this.updatePixelPosition()}},{key:"setElement",value:function(e){this.set(y,e)}},{key:"setMap",value:function(e){this.set(A,e)}},{key:"setOffset",value:function(e){this.set(m,e)}},{key:"setPosition",value:function(e){this.set(v,e)}},{key:"performAutoPan",value:function(){this.autoPan&&this.panIntoView(this.autoPan)}},{key:"panIntoView",value:function(e){var t,r,n,i,o,a,s=this.getMap();s&&s.getTargetElement()&&this.get(v)&&(a=this.getRect(s.getTargetElement(),s.getSize()),r=this.getElement(),r=this.getRect(r,[(0,c.outerWidth)(r),(0,c.outerHeight)(r)]),t=void 0===(e=e||{}).margin?20:e.margin,(0,u.containsExtent)(a,r)||(n=r[0]-a[0],i=a[2]-r[2],o=r[1]-a[1],a=a[3]-r[3],r=[0,0],n<0?r[0]=n-t:i<0&&(r[0]=Math.abs(i)+t),o<0?r[1]=o-t:a<0&&(r[1]=Math.abs(a)+t),(0!==r[0]||0!==r[1])&&(n=s.getView().getCenterInternal(),i=s.getPixelFromCoordinateInternal(n))&&(o=[i[0]+r[0],i[1]+r[1]],a=e.animation||{},s.getView().animateInternal({center:s.getCoordinateFromPixelInternal(o),duration:a.duration,easing:a.easing}))))}},{key:"getRect",value:function(e,t){var e=e.getBoundingClientRect(),r=e.left+window.pageXOffset,e=e.top+window.pageYOffset;return[r,e,r+t[0],e+t[1]]}},{key:"setPositioning",value:function(e){this.set(b,e)}},{key:"setVisible",value:function(e){this.rendered.visible!==e&&(this.element.style.display=e?"":"none",this.rendered.visible=e)}},{key:"updatePixelPosition",value:function(){var e=this.getMap(),t=this.getPosition();e&&e.isRendered()&&t?(t=e.getPixelFromCoordinate(t),e=e.getSize(),this.updateRenderedPosition(t,e)):this.setVisible(!1)}},{key:"updateRenderedPosition",value:function(e,t){var r=this.element.style,n=this.getOffset(),i=this.getPositioning(),o=(this.setVisible(!0),Math.round(e[0]+n[0])+"px"),e=Math.round(e[1]+n[1])+"px",n="0%",a="0%",i=("bottom-right"==i||"center-right"==i||"top-right"==i?n="-100%":"bottom-center"!=i&&"center-center"!=i&&"top-center"!=i||(n="-50%"),"bottom-left"==i||"bottom-center"==i||"bottom-right"==i?a="-100%":"center-left"!=i&&"center-center"!=i&&"center-right"!=i||(a="-50%"),"translate(".concat(n,", ").concat(a,") translate(").concat(o,", ").concat(e,")"));this.rendered.transform_!=i&&(this.rendered.transform_=i,r.transform=i)}},{key:"getOptions",value:function(){return this.options}}])&&f(t.prototype,n),e&&f(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();r.default=e},{"./MapEventType.js":94,"./Object.js":96,"./css.js":129,"./dom.js":130,"./events.js":132,"./extent.js":142}],100:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=l(e("./events/Target.js")),o=l(e("./events/EventType.js")),a=l(e("./TileState.js")),s=e("./util.js"),u=e("./easing.js");function l(e){return e&&e.__esModule?e:{default:e}}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function f(e,t,r){t=p(t);var n=e,t=h()?Reflect.construct(t,r||[],p(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(h=function(){return!!e})()}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}e=function(){function i(e,t,r){var n;if(this instanceof i)return r=r||{},(n=f(this,i)).tileCoord=e,n.state=t,n.interimTile=null,n.key="",n.transition_=void 0===r.transition?250:r.transition,n.transitionStarts_={},n.interpolate=!!r.interpolate,n;throw new TypeError("Cannot call a class as a function")}var e,t=i,r=n.default;if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&d(t,r),t=i,(r=[{key:"changed",value:function(){this.dispatchEvent(o.default.CHANGE)}},{key:"release",value:function(){this.state===a.default.ERROR&&this.setState(a.default.EMPTY)}},{key:"getKey",value:function(){return this.key+"/"+this.tileCoord}},{key:"getInterimTile",value:function(){var e=this.interimTile;if(e)do{if(e.getState()==a.default.LOADED)return this.transition_=0,e}while(e=e.interimTile);return this}},{key:"refreshInterimChain",value:function(){var e=this.interimTile;if(e){var t=this;do{if(e.getState()==a.default.LOADED){e.interimTile=null;break}}while(e.getState()!=a.default.LOADING&&e.getState()==a.default.IDLE?t.interimTile=e.interimTile:t=e,e=t.interimTile)}}},{key:"getTileCoord",value:function(){return this.tileCoord}},{key:"getState",value:function(){return this.state}},{key:"setState",value:function(e){if(this.state!==a.default.ERROR&&this.state>e)throw new Error("Tile load sequence violation");this.state=e,this.changed()}},{key:"load",value:function(){(0,s.abstract)()}},{key:"getAlpha",value:function(e,t){if(!this.transition_)return 1;var r=this.transitionStarts_[e];if(r){if(-1===r)return 1}else this.transitionStarts_[e]=r=t;e=t-r+1e3/60;return e>=this.transition_?1:(0,u.easeIn)(e/this.transition_)}},{key:"inTransition",value:function(e){return!!this.transition_&&-1!==this.transitionStarts_[e]}},{key:"endTransition",value:function(e){this.transition_&&(this.transitionStarts_[e]=-1)}}])&&c(t.prototype,r),e&&c(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();r.default=e},{"./TileState.js":104,"./easing.js":131,"./events/EventType.js":134,"./events/Target.js":137,"./util.js":404}],101:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=(n=e("./structs/LRUCache.js"))&&n.__esModule?n:{default:n},a=e("./tilecoord.js");function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function u(e,t,r){t=f(t);var n=e,t=l()?Reflect.construct(t,r||[],f(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(l=function(){return!!e})()}function c(){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=f(e)););return e}(e,t);if(n)return(n=Object.getOwnPropertyDescriptor(n,t)).get?n.get.call(arguments.length<3?e:r):n.value}).apply(null,arguments)}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var n=function(){function r(){var e=this,t=r;if(e instanceof t)return u(this,r,arguments);throw new TypeError("Cannot call a class as a function")}var e,t=r,n=o.default;if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&h(t,n),t=r,(n=[{key:"clear",value:function(){for(;0<this.getCount();)this.pop().release();c(f(r.prototype),"clear",this).call(this)}},{key:"expireCache",value:function(e){for(;this.canExpireCache()&&!(this.peekLast().getKey()in e);)this.pop().release()}},{key:"pruneExceptNewestZ",value:function(){var e,t,r=this;0!==this.getCount()&&(e=this.peekFirstKey(),t=(0,a.fromKey)(e)[0],this.forEach(function(e){e.tileCoord[0]!==t&&(r.remove((0,a.getKey)(e.tileCoord)),e.release())}))}}])&&s(t.prototype,n),e&&s(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();r.default=n},{"./structs/LRUCache.js":381,"./tilecoord.js":396}],102:[function(e,t,r){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,r.getTilePriority=function(e,t,r,n,i){return e&&r in e.wantedTiles&&e.wantedTiles[r][t.getKey()]?(r=e.viewState.center,t=n[0]-r[0],e=n[1]-r[1],65536*Math.log(i)+Math.sqrt(t*t+e*e)/i):o.DROP};var i=n(e("./events/EventType.js")),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};t=u(t);if(t&&t.has(e))return t.get(e);var r,n={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in e){var o;"default"!==r&&{}.hasOwnProperty.call(e,r)&&((o=i?Object.getOwnPropertyDescriptor(e,r):null)&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=e[r])}return n.default=e,t&&t.set(e,n),n}(e("./structs/PriorityQueue.js")),s=n(e("./TileState.js"));function u(e){var t,r;return"function"!=typeof WeakMap?null:(t=new WeakMap,r=new WeakMap,(u=function(e){return e?r:t})(e))}function n(e){return e&&e.__esModule?e:{default:e}}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=a(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==a(e)?e:e+""}(n.key),n)}}function c(e,t,r){t=p(t);var n=e,t=f()?Reflect.construct(t,r||[],p(e).constructor):t.apply(e,r);if(t&&("object"==a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(f=function(){return!!e})()}function h(){return(h="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=p(e)););return e}(e,t);if(n)return(n=Object.getOwnPropertyDescriptor(n,t)).get?n.get.call(arguments.length<3?e:r):n.value}).apply(null,arguments)}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}e=function(){function n(t,e){var r;if(this instanceof n)return(r=c(this,n,[function(e){return t.apply(null,e)},function(e){return e[0].getKey()}])).boundHandleTileChange_=r.handleTileChange.bind(r),r.tileChangeCallback_=e,r.tilesLoading_=0,r.tilesLoadingKeys_={},r;throw new TypeError("Cannot call a class as a function")}var e,t=n,r=o.default;if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&d(t,r),t=n,(r=[{key:"enqueue",value:function(e){var t=h(p(n.prototype),"enqueue",this).call(this,e);return t&&e[0].addEventListener(i.default.CHANGE,this.boundHandleTileChange_),t}},{key:"getTilesLoading",value:function(){return this.tilesLoading_}},{key:"handleTileChange",value:function(e){var e=e.target,t=e.getState();t!==s.default.LOADED&&t!==s.default.ERROR&&t!==s.default.EMPTY||(t!==s.default.ERROR&&e.removeEventListener(i.default.CHANGE,this.boundHandleTileChange_),(t=e.getKey())in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[t],--this.tilesLoading_),this.tileChangeCallback_())}},{key:"loadMoreTiles",value:function(e,t){for(var r,n,i=0;this.tilesLoading_<e&&i<t&&0<this.getCount();)n=(r=this.dequeue()[0]).getKey(),r.getState()!==s.default.IDLE||n in this.tilesLoadingKeys_||(this.tilesLoadingKeys_[n]=!0,++this.tilesLoading_,++i,r.load())}}])&&l(t.prototype,r),e&&l(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();r.default=e},{"./TileState.js":104,"./events/EventType.js":134,"./structs/PriorityQueue.js":382}],103:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}Object.defineProperty(r,"__esModule",{value:!0}),r.createOrUpdate=function(e,t,r,n,i){return void 0!==i?(i.minX=e,i.maxX=t,i.minY=r,i.maxY=n,i):new u(e,t,r,n)},r.default=void 0;o=function e(t,r,n,i){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.minX=t,this.maxX=r,this.minY=n,this.maxY=i},(a=[{key:"contains",value:function(e){return this.containsXY(e[1],e[2])}},{key:"containsTileRange",value:function(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY}},{key:"containsXY",value:function(e,t){return this.minX<=e&&e<=this.maxX&&this.minY<=t&&t<=this.maxY}},{key:"equals",value:function(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY}},{key:"extend",value:function(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)}},{key:"getHeight",value:function(){return this.maxY-this.minY+1}},{key:"getSize",value:function(){return[this.getWidth(),this.getHeight()]}},{key:"getWidth",value:function(){return this.maxX-this.minX+1}},{key:"intersects",value:function(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY}}])&&n(o.prototype,a),s&&n(o,s),Object.defineProperty(o,"prototype",{writable:!1});var o,a,s,u=o;r.default=u},{}],104:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;r.default={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4}},{}],105:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=(d=e("./Tile.js"))&&d.__esModule?d:{default:d},o=e("./dom.js"),a=e("./util.js");function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function u(e,t,r){t=f(t);var n=e,t=l()?Reflect.construct(t,r||[],f(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(l=function(){return!!e})()}function c(){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=f(e)););return e}(e,t);if(n)return(n=Object.getOwnPropertyDescriptor(n,t)).get?n.get.call(arguments.length<3?e:r):n.value}).apply(null,arguments)}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var p=[],d=function(){function i(e,t,r,n){if(this instanceof i)return(e=u(this,i,[e,t,{transition:0}])).context_={},e.executorGroups={},e.loadingSourceTiles=0,e.hitDetectionImageData={},e.replayState_={},e.sourceTiles=[],e.errorTileKeys={},e.wantedResolution,e.getSourceTiles=n.bind(void 0,e),e.wrappedTileCoord=r,e;throw new TypeError("Cannot call a class as a function")}var e,t=i,r=n.default;if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&h(t,r),t=i,(r=[{key:"getContext",value:function(e){e=(0,a.getUid)(e);return e in this.context_||(this.context_[e]=(0,o.createCanvasContext2D)(1,1,p)),this.context_[e]}},{key:"hasContext",value:function(e){return(0,a.getUid)(e)in this.context_}},{key:"getImage",value:function(e){return this.hasContext(e)?this.getContext(e).canvas:null}},{key:"getReplayState",value:function(e){e=(0,a.getUid)(e);return e in this.replayState_||(this.replayState_[e]={dirty:!1,renderedRenderOrder:null,renderedResolution:NaN,renderedRevision:-1,renderedTileResolution:NaN,renderedTileRevision:-1,renderedTileZ:-1}),this.replayState_[e]}},{key:"load",value:function(){this.getSourceTiles()}},{key:"release",value:function(){for(var e in this.context_){var t=this.context_[e];(0,o.releaseCanvas)(t),p.push(t.canvas),delete this.context_[e]}c(f(i.prototype),"release",this).call(this)}}])&&s(t.prototype,r),e&&s(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();r.default=d},{"./Tile.js":100,"./dom.js":130,"./util.js":404}],106:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=a(e("./Tile.js")),o=a(e("./TileState.js"));function a(e){return e&&e.__esModule?e:{default:e}}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function u(e,t,r){t=c(t);var n=e,t=l()?Reflect.construct(t,r||[],c(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(l=function(){return!!e})()}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}e=function(){function a(e,t,r,n,i,o){if(this instanceof a)return(e=u(this,a,[e,t,o])).extent=null,e.format_=n,e.features_=null,e.loader_,e.projection=null,e.resolution,e.tileLoadFunction_=i,e.url_=r,e.key=r,e;throw new TypeError("Cannot call a class as a function")}var e,t=a,r=n.default;if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&f(t,r),t=a,(r=[{key:"getFormat",value:function(){return this.format_}},{key:"getFeatures",value:function(){return this.features_}},{key:"load",value:function(){this.state==o.default.IDLE&&(this.setState(o.default.LOADING),this.tileLoadFunction_(this,this.url_),this.loader_)&&this.loader_(this.extent,this.resolution,this.projection)}},{key:"onLoad",value:function(e,t){this.setFeatures(e)}},{key:"onError",value:function(){this.setState(o.default.ERROR)}},{key:"setFeatures",value:function(e){this.features_=e,this.setState(o.default.LOADED)}},{key:"setLoader",value:function(e){this.loader_=e}}])&&s(t.prototype,r),e&&s(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();r.default=e},{"./Tile.js":100,"./TileState.js":104}],107:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.createCenterConstraint=x,r.createResolutionConstraint=O,r.createRotationConstraint=P,r.default=void 0,r.isNoopAnimation=k;var o=b(e("./Object.js")),d=b(e("./ViewHint.js")),a=b(e("./ViewProperty.js")),p=e("./tilegrid/common.js"),g=e("./proj.js"),s=e("./functions.js"),u=e("./coordinate.js"),l=e("./asserts.js"),n=e("./centerconstraint.js"),y=e("./math.js"),A=e("./resolutionconstraint.js"),c=e("./rotationconstraint.js"),h=e("./easing.js"),m=e("./extent.js"),f=e("./array.js"),v=e("./geom/Polygon.js");function b(e){return e&&e.__esModule?e:{default:e}}function _(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function w(e,t,r){t=C(t);var n=e,t=E()?Reflect.construct(t,r||[],C(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(E=function(){return!!e})()}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function I(e,t){return(I=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var S=0,e=function(){function r(e){var t;if(this instanceof r)return(t=w(this,r)).on,t.once,t.un,e=Object.assign({},e),t.hints_=[0,0],t.animations_=[],t.updateAnimationKey_,t.projection_=(0,g.createProjection)(e.projection,"EPSG:3857"),t.viewportSize_=[100,100],t.targetCenter_=null,t.targetResolution_,t.targetRotation_,t.nextCenter_=null,t.nextResolution_,t.nextRotation_,t.cancelAnchor_=void 0,e.projection&&(0,g.disableCoordinateWarning)(),e.center&&(e.center=(0,g.fromUserCoordinate)(e.center,t.projection_)),e.extent&&(e.extent=(0,g.fromUserExtent)(e.extent,t.projection_)),t.applyOptions_(e),t;throw new TypeError("Cannot call a class as a function")}var e,t=r,n=o.default;if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&I(t,n),t=r,(n=[{key:"applyOptions_",value:function(e){var t,r=Object.assign({},e);for(t in a.default)delete r[t];this.setProperties(r,!0);var n=O(e),i=(this.maxResolution_=n.maxResolution,this.minResolution_=n.minResolution,this.zoomFactor_=n.zoomFactor,this.resolutions_=e.resolutions,this.padding_=e.padding,this.minZoom_=n.minZoom,x(e)),n=n.constraint,o=P(e);this.constraints_={center:i,resolution:n,rotation:o},this.setRotation(void 0!==e.rotation?e.rotation:0),this.setCenterInternal(void 0!==e.center?e.center:null),void 0!==e.resolution?this.setResolution(e.resolution):void 0!==e.zoom&&this.setZoom(e.zoom)}},{key:"padding",get:function(){return this.padding_},set:function(e){var t,r,n=this.padding_,i=(this.padding_=e,this.getCenterInternal());i&&(e=e||[0,0,0,0],n=n||[0,0,0,0],t=(r=this.getResolution())/2*(e[3]-n[3]+n[1]-e[1]),r=r/2*(e[0]-n[0]+n[2]-e[2]),this.setCenterInternal([i[0]+t,i[1]-r]))}},{key:"getUpdatedOptions_",value:function(e){var t=this.getProperties();return void 0!==t.resolution?t.resolution=this.getResolution():t.zoom=this.getZoom(),t.center=this.getCenterInternal(),t.rotation=this.getRotation(),Object.assign({},t,e)}},{key:"animate",value:function(e){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);for(var t=new Array(arguments.length),r=0;r<t.length;++r){var n=arguments[r];n.center&&((n=Object.assign({},n)).center=(0,g.fromUserCoordinate)(n.center,this.getProjection())),n.anchor&&((n=Object.assign({},n)).anchor=(0,g.fromUserCoordinate)(n.anchor,this.getProjection())),t[r]=n}this.animateInternal.apply(this,t)}},{key:"animateInternal",value:function(e){var t,r=arguments.length;1<r&&"function"==typeof arguments[r-1]&&(t=arguments[r-1],--r);for(var n=0;n<r&&!this.isDef();++n){var i=arguments[n];i.center&&this.setCenterInternal(i.center),void 0!==i.zoom?this.setZoom(i.zoom):i.resolution&&this.setResolution(i.resolution),void 0!==i.rotation&&this.setRotation(i.rotation)}if(n!==r){for(var o=Date.now(),a=this.targetCenter_.slice(),s=this.targetResolution_,u=this.targetRotation_,l=[];n<r;++n){var c=arguments[n],f={start:o,complete:!1,anchor:c.anchor,duration:void 0!==c.duration?c.duration:1e3,easing:c.easing||h.inAndOut,callback:t};c.center&&(f.sourceCenter=a,f.targetCenter=c.center.slice(),a=f.targetCenter),void 0!==c.zoom?(f.sourceResolution=s,f.targetResolution=this.getResolutionForZoom(c.zoom),s=f.targetResolution):c.resolution&&(f.sourceResolution=s,f.targetResolution=c.resolution,s=f.targetResolution),void 0!==c.rotation&&(f.sourceRotation=u,c=(0,y.modulo)(c.rotation-u+Math.PI,2*Math.PI)-Math.PI,f.targetRotation=u+c,u=f.targetRotation),k(f)?f.complete=!0:o+=f.duration,l.push(f)}this.animations_.push(l),this.setHint(d.default.ANIMATING,1),this.updateAnimations_()}else t&&j(t,!0)}},{key:"getAnimating",value:function(){return 0<this.hints_[d.default.ANIMATING]}},{key:"getInteracting",value:function(){return 0<this.hints_[d.default.INTERACTING]}},{key:"cancelAnimations",value:function(){var e;this.setHint(d.default.ANIMATING,-this.hints_[d.default.ANIMATING]);for(var t=0,r=this.animations_.length;t<r;++t){var n=this.animations_[t];if(n[0].callback&&j(n[0].callback,!1),!e)for(var i=0,o=n.length;i<o;++i){var a=n[i];if(!a.complete){e=a.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=e,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}},{key:"updateAnimations_",value:function(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),this.getAnimating()){for(var e=Date.now(),t=!1,r=this.animations_.length-1;0<=r;--r){for(var n,i=this.animations_[r],o=!0,a=0,s=i.length;a<s;++a){var u=i[a];if(!u.complete){var l,c,f,h,p=e-u.start,p=0<u.duration?p/u.duration:1,p=(1<=p?(u.complete=!0,p=1):o=!1,u.easing(p));if(u.sourceCenter&&(c=u.sourceCenter[0],h=u.sourceCenter[1],l=u.targetCenter[0],f=u.targetCenter[1],this.nextCenter_=u.targetCenter,this.targetCenter_=[c+p*(l-c),h+p*(f-h)]),u.sourceResolution&&u.targetResolution&&(l=1===p?u.targetResolution:u.sourceResolution+p*(u.targetResolution-u.sourceResolution),u.anchor&&(c=this.getViewportSize_(this.getRotation()),f=this.constraints_.resolution(l,0,c,!0),this.targetCenter_=this.calculateCenterZoom(f,u.anchor)),this.nextResolution_=u.targetResolution,this.targetResolution_=l,this.applyTargetState_(!0)),void 0!==u.sourceRotation&&void 0!==u.targetRotation&&(h=1===p?(0,y.modulo)(u.targetRotation+Math.PI,2*Math.PI)-Math.PI:u.sourceRotation+p*(u.targetRotation-u.sourceRotation),u.anchor&&(p=this.constraints_.rotation(h,!0),this.targetCenter_=this.calculateCenterRotate(p,u.anchor)),this.nextRotation_=u.targetRotation,this.targetRotation_=h),this.applyTargetState_(!0),t=!0,!u.complete)break}}o&&(this.animations_[r]=null,this.setHint(d.default.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN,n=i[0].callback)&&j(n,!0)}this.animations_=this.animations_.filter(Boolean),t&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}}},{key:"calculateCenterRotate",value:function(e,t){var r,n=this.getCenterInternal();return void 0!==n&&(r=[n[0]-t[0],n[1]-t[1]],(0,u.rotate)(r,e-this.getRotation()),(0,u.add)(r,t)),r}},{key:"calculateCenterZoom",value:function(e,t){var r,n=this.getCenterInternal(),i=this.getResolution();return r=void 0!==n&&void 0!==i?[t[0]-e*(t[0]-n[0])/i,t[1]-e*(t[1]-n[1])/i]:r}},{key:"getViewportSize_",value:function(e){var t,r,n=this.viewportSize_;return e?(t=n[0],r=n[1],[Math.abs(t*Math.cos(e))+Math.abs(r*Math.sin(e)),Math.abs(t*Math.sin(e))+Math.abs(r*Math.cos(e))]):n}},{key:"setViewportSize",value:function(e){this.viewportSize_=Array.isArray(e)?e.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}},{key:"getCenter",value:function(){var e=this.getCenterInternal();return e&&(0,g.toUserCoordinate)(e,this.getProjection())}},{key:"getCenterInternal",value:function(){return this.get(a.default.CENTER)}},{key:"getConstraints",value:function(){return this.constraints_}},{key:"getConstrainResolution",value:function(){return this.get("constrainResolution")}},{key:"getHints",value:function(e){return void 0!==e?(e[0]=this.hints_[0],e[1]=this.hints_[1],e):this.hints_.slice()}},{key:"calculateExtent",value:function(e){e=this.calculateExtentInternal(e);return(0,g.toUserExtent)(e,this.getProjection())}},{key:"calculateExtentInternal",value:function(e){e=e||this.getViewportSizeMinusPadding_();var t=this.getCenterInternal(),r=((0,l.assert)(t,"The view center is not defined"),this.getResolution()),n=((0,l.assert)(void 0!==r,"The view resolution is not defined"),this.getRotation());return(0,l.assert)(void 0!==n,"The view rotation is not defined"),(0,m.getForViewAndSize)(t,r,n,e)}},{key:"getMaxResolution",value:function(){return this.maxResolution_}},{key:"getMinResolution",value:function(){return this.minResolution_}},{key:"getMaxZoom",value:function(){return this.getZoomForResolution(this.minResolution_)}},{key:"setMaxZoom",value:function(e){this.applyOptions_(this.getUpdatedOptions_({maxZoom:e}))}},{key:"getMinZoom",value:function(){return this.getZoomForResolution(this.maxResolution_)}},{key:"setMinZoom",value:function(e){this.applyOptions_(this.getUpdatedOptions_({minZoom:e}))}},{key:"setConstrainResolution",value:function(e){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:e}))}},{key:"getProjection",value:function(){return this.projection_}},{key:"getResolution",value:function(){return this.get(a.default.RESOLUTION)}},{key:"getResolutions",value:function(){return this.resolutions_}},{key:"getResolutionForExtent",value:function(e,t){return this.getResolutionForExtentInternal((0,g.fromUserExtent)(e,this.getProjection()),t)}},{key:"getResolutionForExtentInternal",value:function(e,t){t=t||this.getViewportSizeMinusPadding_();var r=(0,m.getWidth)(e)/t[0],e=(0,m.getHeight)(e)/t[1];return Math.max(r,e)}},{key:"getResolutionForValueFunction",value:function(t){t=t||2;var r=this.getConstrainedResolution(this.maxResolution_),e=this.minResolution_,n=Math.log(r/e)/Math.log(t);return function(e){return r/Math.pow(t,e*n)}}},{key:"getRotation",value:function(){return this.get(a.default.ROTATION)}},{key:"getValueForResolutionFunction",value:function(e){var t=Math.log(e||2),r=this.getConstrainedResolution(this.maxResolution_),e=this.minResolution_,n=Math.log(r/e)/t;return function(e){return Math.log(r/e)/t/n}}},{key:"getViewportSizeMinusPadding_",value:function(e){var e=this.getViewportSize_(e),t=this.padding_;return e=t?[e[0]-t[1]-t[3],e[1]-t[0]-t[2]]:e}},{key:"getState",value:function(){var e,t=this.getProjection(),r=this.getResolution(),n=this.getRotation(),i=this.getCenterInternal(),o=this.padding_;return o&&(e=this.getViewportSizeMinusPadding_(),i=B(i,this.getViewportSize_(),[e[0]/2+o[3],e[1]/2+o[0]],r,n)),{center:i.slice(0),projection:void 0!==t?t:null,resolution:r,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:n,zoom:this.getZoom()}}},{key:"getViewStateAndExtent",value:function(){return{viewState:this.getState(),extent:this.calculateExtent()}}},{key:"getZoom",value:function(){var e,t=this.getResolution();return e=void 0!==t?this.getZoomForResolution(t):e}},{key:"getZoomForResolution",value:function(e){var t,r,n=this.minZoom_||0;return r=this.resolutions_?(r=(0,f.linearFindNearest)(this.resolutions_,e,1),t=this.resolutions_[n=r],r==this.resolutions_.length-1?2:t/this.resolutions_[r+1]):(t=this.maxResolution_,this.zoomFactor_),n+Math.log(t/e)/Math.log(r)}},{key:"getResolutionForZoom",value:function(e){var t,r;return this.resolutions_?this.resolutions_.length<=1?0:(t=(0,y.clamp)(Math.floor(e),0,this.resolutions_.length-2),r=this.resolutions_[t]/this.resolutions_[t+1],this.resolutions_[t]/Math.pow(r,(0,y.clamp)(e-t,0,1))):this.maxResolution_/Math.pow(this.zoomFactor_,e-this.minZoom_)}},{key:"fit",value:function(e,t){var r,n;(0,l.assert)(Array.isArray(e)||"function"==typeof e.getSimplifiedGeometry,"Invalid extent or geometry provided as `geometry`"),Array.isArray(e)?((0,l.assert)(!(0,m.isEmpty)(e),"Cannot fit empty extent provided as `geometry`"),r=(0,g.fromUserExtent)(e,this.getProjection()),r=(0,v.fromExtent)(r)):"Circle"===e.getType()?(n=(0,g.fromUserExtent)(e.getExtent(),this.getProjection()),(r=(0,v.fromExtent)(n)).rotate(this.getRotation(),(0,m.getCenter)(n))):r=(n=(0,g.getUserProjection)())?e.clone().transform(n,this.getProjection()):e,this.fitInternal(r,t)}},{key:"rotatedExtentForGeometry",value:function(e){for(var t=this.getRotation(),r=Math.cos(t),n=Math.sin(-t),i=e.getFlatCoordinates(),o=e.getStride(),a=1/0,s=1/0,u=-1/0,l=-1/0,c=0,f=i.length;c<f;c+=o)var h=i[c]*r-i[c+1]*n,p=i[c]*n+i[c+1]*r,a=Math.min(a,h),s=Math.min(s,p),u=Math.max(u,h),l=Math.max(l,p);return[a,s,u,l]}},{key:"fitInternal",value:function(e,t){var r=(r=(t=t||{}).size)||this.getViewportSizeMinusPadding_(),n=void 0!==t.padding?t.padding:[0,0,0,0],i=void 0!==t.nearest&&t.nearest,o=void 0!==t.minResolution?t.minResolution:void 0!==t.maxZoom?this.getResolutionForZoom(t.maxZoom):0,e=this.rotatedExtentForGeometry(e),r=this.getResolutionForExtentInternal(e,[r[0]-n[1]-n[3],r[1]-n[0]-n[2]]),r=isNaN(r)?o:Math.max(r,o),o=(r=this.getConstrainedResolution(r,i?0:1),this.getRotation()),i=Math.sin(o),o=Math.cos(o),e=(0,m.getCenter)(e),n=(e[0]+=(n[1]-n[3])/2*r,e[1]+=(n[0]-n[2])/2*r,e[0]*o-e[1]*i),o=e[1]*o+e[0]*i,e=this.getConstrainedCenter([n,o],r),i=t.callback||s.VOID;void 0!==t.duration?this.animateInternal({resolution:r,center:e,duration:t.duration,easing:t.easing},i):(this.targetResolution_=r,this.targetCenter_=e,this.applyTargetState_(!1,!0),j(i,!0))}},{key:"centerOn",value:function(e,t,r){this.centerOnInternal((0,g.fromUserCoordinate)(e,this.getProjection()),t,r)}},{key:"centerOnInternal",value:function(e,t,r){this.setCenterInternal(B(e,t,r,this.getResolution(),this.getRotation()))}},{key:"calculateCenterShift",value:function(e,t,r,n){var i,o=this.padding_;return o&&e&&(n=B(e,n,[(n=this.getViewportSizeMinusPadding_(-r))[0]/2+o[3],n[1]/2+o[0]],t,r),i=[e[0]-n[0],e[1]-n[1]]),i}},{key:"isDef",value:function(){return!!this.getCenterInternal()&&void 0!==this.getResolution()}},{key:"adjustCenter",value:function(e){var t=(0,g.toUserCoordinate)(this.targetCenter_,this.getProjection());this.setCenter([t[0]+e[0],t[1]+e[1]])}},{key:"adjustCenterInternal",value:function(e){var t=this.targetCenter_;this.setCenterInternal([t[0]+e[0],t[1]+e[1]])}},{key:"adjustResolution",value:function(e,t){t=t&&(0,g.fromUserCoordinate)(t,this.getProjection()),this.adjustResolutionInternal(e,t)}},{key:"adjustResolutionInternal",value:function(e,t){var r=this.getAnimating()||this.getInteracting(),n=this.getViewportSize_(this.getRotation()),n=this.constraints_.resolution(this.targetResolution_*e,0,n,r);t&&(this.targetCenter_=this.calculateCenterZoom(n,t)),this.targetResolution_*=e,this.applyTargetState_()}},{key:"adjustZoom",value:function(e,t){this.adjustResolution(Math.pow(this.zoomFactor_,-e),t)}},{key:"adjustRotation",value:function(e,t){t=t&&(0,g.fromUserCoordinate)(t,this.getProjection()),this.adjustRotationInternal(e,t)}},{key:"adjustRotationInternal",value:function(e,t){var r=this.getAnimating()||this.getInteracting(),r=this.constraints_.rotation(this.targetRotation_+e,r);t&&(this.targetCenter_=this.calculateCenterRotate(r,t)),this.targetRotation_+=e,this.applyTargetState_()}},{key:"setCenter",value:function(e){this.setCenterInternal(e&&(0,g.fromUserCoordinate)(e,this.getProjection()))}},{key:"setCenterInternal",value:function(e){this.targetCenter_=e,this.applyTargetState_()}},{key:"setHint",value:function(e,t){return this.hints_[e]+=t,this.changed(),this.hints_[e]}},{key:"setResolution",value:function(e){this.targetResolution_=e,this.applyTargetState_()}},{key:"setRotation",value:function(e){this.targetRotation_=e,this.applyTargetState_()}},{key:"setZoom",value:function(e){this.setResolution(this.getResolutionForZoom(e))}},{key:"applyTargetState_",value:function(e,t){var t=this.getAnimating()||this.getInteracting()||t,r=this.constraints_.rotation(this.targetRotation_,t),n=this.getViewportSize_(r),i=this.constraints_.resolution(this.targetResolution_,0,n,t),t=this.constraints_.center(this.targetCenter_,i,n,t,this.calculateCenterShift(this.targetCenter_,i,r,n));this.get(a.default.ROTATION)!==r&&this.set(a.default.ROTATION,r),this.get(a.default.RESOLUTION)!==i&&(this.set(a.default.RESOLUTION,i),this.set("zoom",this.getZoom(),!0)),t&&this.get(a.default.CENTER)&&(0,u.equals)(this.get(a.default.CENTER),t)||this.set(a.default.CENTER,t),this.getAnimating()&&!e&&this.cancelAnimations(),this.cancelAnchor_=void 0}},{key:"resolveConstraints",value:function(e,t,r){e=void 0!==e?e:200;var t=t||0,n=this.constraints_.rotation(this.targetRotation_),i=this.getViewportSize_(n),t=this.constraints_.resolution(this.targetResolution_,t,i),i=this.constraints_.center(this.targetCenter_,t,i,!1,this.calculateCenterShift(this.targetCenter_,t,n,i));0!==e||this.cancelAnchor_?(r=r||(0===e?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,this.getResolution()===t&&this.getRotation()===n&&this.getCenterInternal()&&(0,u.equals)(this.getCenterInternal(),i)||(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:n,center:i,resolution:t,duration:e,easing:h.easeOut,anchor:r}))):(this.targetResolution_=t,this.targetRotation_=n,this.targetCenter_=i,this.applyTargetState_())}},{key:"beginInteraction",value:function(){this.resolveConstraints(0),this.setHint(d.default.INTERACTING,1)}},{key:"endInteraction",value:function(e,t,r){r=r&&(0,g.fromUserCoordinate)(r,this.getProjection()),this.endInteractionInternal(e,t,r)}},{key:"endInteractionInternal",value:function(e,t,r){this.getInteracting()&&(this.setHint(d.default.INTERACTING,-1),this.resolveConstraints(e,t,r))}},{key:"getConstrainedCenter",value:function(e,t){var r=this.getViewportSize_(this.getRotation());return this.constraints_.center(e,t||this.getResolution(),r)}},{key:"getConstrainedZoom",value:function(e,t){e=this.getResolutionForZoom(e);return this.getZoomForResolution(this.getConstrainedResolution(e,t))}},{key:"getConstrainedResolution",value:function(e,t){t=t||0;var r=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(e,t,r)}}])&&_(t.prototype,n),e&&_(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();function j(e,t){setTimeout(function(){e(t)},0)}function x(e){var t;return void 0!==e.extent?(t=void 0===e.smoothExtentConstraint||e.smoothExtentConstraint,(0,n.createExtent)(e.extent,e.constrainOnlyCenter,t)):(t=(0,g.createProjection)(e.projection,"EPSG:3857"),!0!==e.multiWorld&&t.isGlobal()?((e=t.getExtent().slice())[0]=-1/0,e[2]=1/0,(0,n.createExtent)(e,!1,!1)):n.none)}function O(e){var t,r,n=void 0!==e.minZoom?e.minZoom:S,i=void 0!==e.maxZoom?e.maxZoom:28,o=void 0!==e.zoomFactor?e.zoomFactor:2,a=void 0!==e.multiWorld&&e.multiWorld,s=void 0===e.smoothResolutionConstraint||e.smoothResolutionConstraint,u=void 0!==e.showFullExtent&&e.showFullExtent,l=(0,g.createProjection)(e.projection,"EPSG:3857"),c=l.getExtent(),f=e.constrainOnlyCenter,h=e.extent;return a||h||!l.isGlobal()||(f=!1,h=c),{constraint:void 0!==e.resolutions?(t=(a=e.resolutions)[n],r=void 0!==a[i]?a[i]:a[a.length-1],e.constrainResolution?(0,A.createSnapToResolutions)(a,s,!f&&h,u):(0,A.createMinMaxResolution)(t,r,s,!f&&h,u)):(c=(a=(c?Math.max((0,m.getWidth)(c),(0,m.getHeight)(c)):360*g.METERS_PER_UNIT.degrees/l.getMetersPerUnit())/p.DEFAULT_TILE_SIZE/Math.pow(2,S))/Math.pow(2,28-S),void 0!==(t=e.maxResolution)?n=0:t=a/Math.pow(o,n),void 0===(r=e.minResolution)&&(r=void 0!==e.maxZoom?void 0!==e.maxResolution?t/Math.pow(o,i):a/Math.pow(o,i):c),i=n+Math.floor(Math.log(t/r)/Math.log(o)),r=t/Math.pow(o,i-n),e.constrainResolution?(0,A.createSnapToPower)(o,t,r,s,!f&&h,u):(0,A.createMinMaxResolution)(t,r,s,!f&&h,u)),maxResolution:t,minResolution:r,minZoom:n,zoomFactor:o}}function P(e){return void 0===e.enableRotation||e.enableRotation?void 0===(e=e.constrainRotation)||!0===e?(0,c.createSnapToZero)():!1!==e&&"number"==typeof e?(0,c.createSnapToN)(e):c.none:c.disable}function k(e){return!(e.sourceCenter&&e.targetCenter&&!(0,u.equals)(e.sourceCenter,e.targetCenter))&&e.sourceResolution===e.targetResolution&&e.sourceRotation===e.targetRotation}function B(e,t,r,n,i){var o=Math.cos(-i),i=Math.sin(-i),a=e[0]*o-e[1]*i,e=e[1]*o+e[0]*i;return[(a+=(t[0]/2-r[0])*n)*o-(e+=(r[1]-t[1]/2)*n)*(i=-i),e*o+a*i]}r.default=e},{"./Object.js":96,"./ViewHint.js":108,"./ViewProperty.js":109,"./array.js":110,"./asserts.js":111,"./centerconstraint.js":112,"./coordinate.js":128,"./easing.js":131,"./extent.js":142,"./functions.js":200,"./geom/Polygon.js":211,"./math.js":279,"./proj.js":283,"./resolutionconstraint.js":335,"./rotationconstraint.js":336,"./tilegrid/common.js":400}],108:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;r.default={ANIMATING:0,INTERACTING:1}},{}],109:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;r.default={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"}},{}],110:[function(e,t,r){"use strict";function u(e,t){return t<e?1:e<t?-1:0}Object.defineProperty(r,"__esModule",{value:!0}),r.ascending=u,r.binarySearch=function(e,t,r){var n,i;r=r||u;for(var o=0,a=e.length,s=!1;o<a;)(i=+r(e[n=o+(a-o>>1)],t))<0?o=n+1:(a=n,s=!i);return s?o:~o},r.descending=function(e,t){return e<t?1:t<e?-1:0},r.equals=function(e,t){var r=e.length;if(r!==t.length)return!1;for(var n=0;n<r;n++)if(e[n]!==t[n])return!1;return!0},r.extend=function(e,t){for(var r=Array.isArray(t)?t:[t],n=r.length,i=0;i<n;i++)e[e.length]=r[i]},r.isSorted=function(r,e,n){var i=e||u;return r.every(function(e,t){return 0===t||!(0<(t=i(r[t-1],e))||n&&0===t)})},r.linearFindNearest=function(e,t,r){if(e[0]<=t)return 0;var n=e.length;if(!(t<=e[n-1]))if("function"==typeof r)for(var i=1;i<n;++i){var o=e[i];if(o===t)return i;if(o<t)return 0<r(t,e[i-1],o)?i-1:i}else if(0<r){for(var a=1;a<n;++a)if(e[a]<t)return a-1}else if(r<0){for(var s=1;s<n;++s)if(e[s]<=t)return s}else for(var u=1;u<n;++u){if(e[u]==t)return u;if(e[u]<t)return e[u-1]-t<t-e[u]?u-1:u}return n-1},r.remove=function(e,t){var r=-1<(t=e.indexOf(t));return r&&e.splice(t,1),r},r.reverseSubArray=function(e,t,r){for(;t<r;){var n=e[t];e[t]=e[r],e[r]=n,++t,--r}},r.stableSort=function(e,r){for(var t=e.length,n=Array(e.length),i=0;i<t;i++)n[i]={index:i,value:e[i]};for(n.sort(function(e,t){return r(e.value,t.value)||e.index-t.index}),i=0;i<e.length;i++)e[i]=n[i].value}},{}],111:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.assert=function(e,t){if(!e)throw new Error(t)}},{}],112:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.createExtent=function(l,c,f){return function(e,t,r,n,i){var o,a,s,u;if(e)return t||c?(a=c?0:r[0]*t,r=c?0:r[1]*t,s=i?i[0]:0,i=i?i[1]:0,o=l[0]+a/2+s,a=l[2]-a/2+s,s=l[1]+r/2+i,a<o&&(a=o=(a+o)/2),(r=l[3]-r/2+i)<s&&(r=s=(r+s)/2),i=(0,h.clamp)(e[0],o,a),u=(0,h.clamp)(e[1],s,r),n&&f&&t&&(i+=-(n=30*t)*Math.log(1+Math.max(0,o-e[0])/n)+n*Math.log(1+Math.max(0,e[0]-a)/n),u+=-n*Math.log(1+Math.max(0,s-e[1])/n)+n*Math.log(1+Math.max(0,e[1]-r)/n)),[i,u]):e}},r.none=function(e){return e};var h=e("./math.js")},{"./math.js":279}],113:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.asArray=function(e){return Array.isArray(e)?e:d(e)},r.asString=function(e){return"string"==typeof e?e:y(e)},r.fromString=d,r.isStringColor=function(e){try{return d(e),!0}catch(e){return!1}},r.lchaToRgba=function(e){var t=o.default.rgb(n.default.xyz(e));return t[3]=e[3],t},r.normalize=g,r.rgbaToLcha=function(e){var t=o.default.lchuv(i.default.xyz(e));return t[3]=e[3],t},r.toString=y,r.withAlpha=function(e){return 4===e.length?e:((e=e.slice())[3]=1,e)};var n=u(e("color-space/lchuv.js")),s=u(e("color-rgba")),i=u(e("color-space/rgb.js")),o=u(e("color-space/xyz.js")),a=e("./math.js");function u(e){return e&&e.__esModule?e:{default:e}}function l(e,t){var r,n,i,o,a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(a)return i=!(n=!0),{s:function(){a=a.call(e)},n:function(){var e=a.next();return n=e.done,e},e:function(e){i=!0,r=e},f:function(){try{n||null==a.return||a.return()}finally{if(i)throw r}}};if(Array.isArray(e)||(a=function(e,t){{var r;if(e)return"string"==typeof e?c(e,t):"Map"===(r="Object"===(r={}.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length)return a&&(e=a),o=0,{s:t=function(){},n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var f=1024,h={},p=0;function d(e){if(h.hasOwnProperty(e))return h[e];if(f<=p){var t,r=0;for(t in h)0==(3&r++)&&(delete h[t],--p)}var n=(0,s.default)(e);if(4!==n.length)throw new Error('Failed to parse "'+e+'" as color');var i,o=l(n);try{for(o.s();!(i=o.n()).done;){var a=i.value;if(isNaN(a))throw new Error('Failed to parse "'+e+'" as color')}}catch(e){o.e(e)}finally{o.f()}return g(n),h[e]=n,++p,n}function g(e){return e[0]=(0,a.clamp)(e[0]+.5|0,0,255),e[1]=(0,a.clamp)(e[1]+.5|0,0,255),e[2]=(0,a.clamp)(e[2]+.5|0,0,255),e[3]=(0,a.clamp)(e[3],0,1),e}function y(e){var t=e[0],r=e[1],n=e[2];return"rgba("+(t=t!=(0|t)?t+.5|0:t)+","+(r=r!=(0|r)?r+.5|0:r)+","+(n=n!=(0|n)?n+.5|0:n)+","+(void 0===e[3]?1:Math.round(1e3*e[3])/1e3)+")"}},{"./math.js":279,"color-rgba":13,"color-space/lchuv.js":15,"color-space/rgb.js":17,"color-space/xyz.js":18}],114:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.asColorLike=function(e){return e?Array.isArray(e)?(0,n.toString)(e):"object"===u(e)&&"src"in e?function(e){var t,r,n;return e.offset&&e.size?(t=e.src+":"+e.offset,s.shared.getPattern(t,void 0,e.color)||((r=s.shared.get(e.src,"anonymous",null)).getImageState()!==i.default.LOADED?null:((n=(0,o.createCanvasContext2D)(e.size[0],e.size[1])).drawImage(r.getImage(1),e.offset[0],e.offset[1],e.size[0],e.size[1],0,0,e.size[0],e.size[1]),(0,a.get)(n.canvas,t,void 0,i.default.LOADED,e.color,!0),s.shared.getPattern(t,void 0,e.color)))):s.shared.getPattern(e.src,"anonymous",e.color)}(e):e:null};var i=(r=e("./ImageState.js"))&&r.__esModule?r:{default:r},o=e("./dom.js"),a=e("./style/IconImage.js"),s=e("./style/IconImageCache.js"),n=e("./color.js");function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}},{"./ImageState.js":86,"./color.js":113,"./dom.js":130,"./style/IconImage.js":388,"./style/IconImageCache.js":389}],115:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.error=function(){var e;i>n.error||(e=console).error.apply(e,arguments)},r.log=function(){var e;i>n.info||(e=console).log.apply(e,arguments)},r.setLevel=function(e){i=n[e]},r.warn=function(){var e;i>n.warn||(e=console).warn.apply(e,arguments)};var n={info:1,warn:2,error:3,none:4},i=n.info},{}],116:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"Attribution",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(r,"Control",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(r,"FullScreen",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(r,"MousePosition",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(r,"OverviewMap",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(r,"Rotate",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(r,"ScaleLine",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(r,"Zoom",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(r,"ZoomSlider",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(r,"ZoomToExtent",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(r,"defaults",{enumerable:!0,get:function(){return p.defaults}});var n=d(e("./control/Attribution.js")),i=d(e("./control/Control.js")),o=d(e("./control/FullScreen.js")),a=d(e("./control/MousePosition.js")),s=d(e("./control/OverviewMap.js")),u=d(e("./control/Rotate.js")),l=d(e("./control/ScaleLine.js")),c=d(e("./control/Zoom.js")),f=d(e("./control/ZoomSlider.js")),h=d(e("./control/ZoomToExtent.js")),p=e("./control/defaults.js");function d(e){return e&&e.__esModule?e:{default:e}}},{"./control/Attribution.js":117,"./control/Control.js":118,"./control/FullScreen.js":119,"./control/MousePosition.js":120,"./control/OverviewMap.js":121,"./control/Rotate.js":122,"./control/ScaleLine.js":123,"./control/Zoom.js":124,"./control/ZoomSlider.js":125,"./control/ZoomToExtent.js":126,"./control/defaults.js":127}],117:[function(e,t,r){"use strict";function x(e){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("./Control.js")),l=n(e("../events/EventType.js")),c=e("../css.js"),f=e("../array.js"),h=e("../dom.js"),p=e("../functions.js");function n(e){return e&&e.__esModule?e:{default:e}}function O(){O=function(){return a};var u,a={},e=Object.prototype,l=e.hasOwnProperty,c=Object.defineProperty||function(e,t,r){e[t]=r.value},t="function"==typeof Symbol?Symbol:{},n=t.iterator||"@@iterator",r=t.asyncIterator||"@@asyncIterator",i=t.toStringTag||"@@toStringTag";function o(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{o({},"")}catch(u){o=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var i,o,a,s,t=t&&t.prototype instanceof A?t:A,t=Object.create(t.prototype),n=new S(n||[]);return c(t,"_invoke",{value:(i=e,o=r,a=n,s=h,function(e,t){if(s===d)throw Error("Generator is already running");if(s===g){if("throw"===e)throw t;return{value:u,done:!0}}for(a.method=e,a.arg=t;;){var r=a.delegate;if(r){r=function e(t,r){var n=r.method,i=t.iterator[n];if(i===u)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=u,e(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;n=f(i,t.iterator,r.arg);if("throw"===n.type)return r.method="throw",r.arg=n.arg,r.delegate=null,y;i=n.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=u),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}(r,a);if(r){if(r===y)continue;return r}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(s===h)throw s=g,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);s=d;r=f(i,o,a);if("normal"===r.type){if(s=a.done?g:p,r.arg===y)continue;return{value:r.arg,done:a.done}}"throw"===r.type&&(s=g,a.method="throw",a.arg=r.arg)}})}),t}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}a.wrap=s;var h="suspendedStart",p="suspendedYield",d="executing",g="completed",y={};function A(){}function m(){}function v(){}var t={},b=(o(t,n,function(){return this}),Object.getPrototypeOf),b=b&&b(b(j([]))),_=(b&&b!==e&&l.call(b,n)&&(t=b),v.prototype=A.prototype=Object.create(t));function w(e){["next","throw","return"].forEach(function(t){o(e,t,function(e){return this._invoke(t,e)})})}function E(a,s){var t;c(this,"_invoke",{value:function(r,n){function e(){return new s(function(e,t){!function t(e,r,n,i){var o,e=f(a[e],a,r);if("throw"!==e.type)return(r=(o=e.arg).value)&&"object"==x(r)&&l.call(r,"__await")?s.resolve(r.__await).then(function(e){t("next",e,n,i)},function(e){t("throw",e,n,i)}):s.resolve(r).then(function(e){o.value=e,n(o)},function(e){return t("throw",e,n,i)});i(e.arg)}(r,n,e,t)})}return t=t?t.then(e,e):e()}})}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function j(t){if(t||""===t){var r,e=t[n];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return r=-1,(e=function e(){for(;++r<t.length;)if(l.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=u,e.done=!0,e}).next=e}throw new TypeError(x(t)+" is not iterable")}return c(_,"constructor",{value:m.prototype=v,configurable:!0}),c(v,"constructor",{value:m,configurable:!0}),m.displayName=o(v,i,"GeneratorFunction"),a.isGeneratorFunction=function(e){e="function"==typeof e&&e.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},a.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,o(e,i,"GeneratorFunction")),e.prototype=Object.create(_),e},a.awrap=function(e){return{__await:e}},w(E.prototype),o(E.prototype,r,function(){return this}),a.AsyncIterator=E,a.async=function(e,t,r,n,i){void 0===i&&(i=Promise);var o=new E(s(e,t,r,n),i);return a.isGeneratorFunction(t)?o:o.next().then(function(e){return e.done?e.value:o.next()})},w(_),o(_,i,"Generator"),o(_,n,function(){return this}),o(_,"toString",function(){return"[object Generator]"}),a.keys=function(e){var t,r=Object(e),n=[];for(t in r)n.push(t);return n.reverse(),function e(){for(;n.length;){var t=n.pop();if(t in r)return e.value=t,e.done=!1,e}return e.done=!0,e}},a.values=j,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=u,this.done=!1,this.delegate=null,this.method="next",this.arg=u,this.tryEntries.forEach(I),!e)for(var t in this)"t"===t.charAt(0)&&l.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=u)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(r){if(this.done)throw r;var n=this;function e(e,t){return o.type="throw",o.arg=r,n.next=e,t&&(n.method="next",n.arg=u),!!t}for(var t=this.tryEntries.length-1;0<=t;--t){var i=this.tryEntries[t],o=i.completion;if("root"===i.tryLoc)return e("end");if(i.tryLoc<=this.prev){var a=l.call(i,"catchLoc"),s=l.call(i,"finallyLoc");if(a&&s){if(this.prev<i.catchLoc)return e(i.catchLoc,!0);if(this.prev<i.finallyLoc)return e(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return e(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return e(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;0<=r;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&l.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}var o=(i=i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc?null:i)?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var r,n,i=this.tryEntries[t];if(i.tryLoc===e)return"throw"===(r=i.completion).type&&(n=r.arg,I(i)),n}throw Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:j(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=u),y}},a}function d(e,t,r,n,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return r(e)}s.done?t(u):Promise.resolve(u).then(n,i)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=x(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=x(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==x(e)?e:e+""}(n.key),n)}}function g(e,t,r){t=s(t);var n=e,t=a()?Reflect.construct(t,r||[],s(e).constructor):t.apply(e,r);if(t&&("object"==x(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function a(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(a=function(){return!!e})()}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t){return(y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}e=function(){function s(e){var t;if(!(this instanceof s))throw new TypeError("Cannot call a class as a function");e=e||{},(t=g(this,s,[{element:document.createElement("div"),render:e.render,target:e.target}])).ulElement_=document.createElement("ul"),t.collapsed_=void 0===e.collapsed||e.collapsed,t.userCollapsed_=t.collapsed_,t.overrideCollapsible_=void 0!==e.collapsible,t.collapsible_=void 0===e.collapsible||e.collapsible,t.collapsible_||(t.collapsed_=!1);var r=void 0!==e.className?e.className:"ol-attribution",n=void 0!==e.tipLabel?e.tipLabel:"Attributions",i=void 0!==e.expandClassName?e.expandClassName:r+"-expand",o=void 0!==e.collapseLabel?e.collapseLabel:"›",a=void 0!==e.collapseClassName?e.collapseClassName:r+"-collapse",a=("string"==typeof o?(t.collapseLabel_=document.createElement("span"),t.collapseLabel_.textContent=o,t.collapseLabel_.className=a):t.collapseLabel_=o,void 0!==e.label?e.label:"i"),o=("string"==typeof a?(t.label_=document.createElement("span"),t.label_.textContent=a,t.label_.className=i):t.label_=a,t.collapsible_&&!t.collapsed_?t.collapseLabel_:t.label_),e=(t.toggleButton_=document.createElement("button"),t.toggleButton_.setAttribute("type","button"),t.toggleButton_.setAttribute("aria-expanded",String(!t.collapsed_)),t.toggleButton_.title=n,t.toggleButton_.appendChild(o),t.toggleButton_.addEventListener(l.default.CLICK,t.handleClick_.bind(t),!1),r+" "+c.CLASS_UNSELECTABLE+" "+c.CLASS_CONTROL+(t.collapsed_&&t.collapsible_?" "+c.CLASS_COLLAPSED:"")+(t.collapsible_?"":" ol-uncollapsible")),i=t.element;return i.className=e,i.appendChild(t.toggleButton_),i.appendChild(t.ulElement_),t.renderedAttributions_=[],t.renderedVisible_=!0,t}var e,u,t,r=s,n=i.default;if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");return r.prototype=Object.create(n&&n.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),n&&y(r,n),r=s,(n=[{key:"collectSourceAttributions_",value:function(t){var e=Array.from(new Set(this.getMap().getAllLayers().flatMap(function(e){return e.getAttributions(t)}))),r=!this.getMap().getAllLayers().some(function(e){return e.getSource()&&!1===e.getSource().getAttributionsCollapsible()});return this.overrideCollapsible_||this.setCollapsible(r),e}},{key:"updateElement_",value:(u=O().mark(function e(t){var r,n,i,o,a;return O().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=3;break}return this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1),e.abrupt("return");case 3:return e.next=5,Promise.all(this.collectSourceAttributions_(t).map(function(e){return(0,p.toPromise)(function(){return e})}));case 5:if(r=e.sent,n=0<r.length,this.renderedVisible_!=n&&(this.element.style.display=n?"":"none",this.renderedVisible_=n),(0,f.equals)(r,this.renderedAttributions_))return e.abrupt("return");e.next=10;break;case 10:for((0,h.removeChildren)(this.ulElement_),i=0,o=r.length;i<o;++i)(a=document.createElement("li")).innerHTML=r[i],this.ulElement_.appendChild(a);this.renderedAttributions_=r;case 13:case"end":return e.stop()}},e,this)}),t=function(){var e=this,a=arguments;return new Promise(function(t,r){var n=u.apply(e,a);function i(e){d(n,t,r,i,o,"next",e)}function o(e){d(n,t,r,i,o,"throw",e)}i(void 0)})},function(e){return t.apply(this,arguments)})},{key:"handleClick_",value:function(e){e.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}},{key:"handleToggle_",value:function(){this.element.classList.toggle(c.CLASS_COLLAPSED),this.collapsed_?(0,h.replaceNode)(this.collapseLabel_,this.label_):(0,h.replaceNode)(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}},{key:"getCollapsible",value:function(){return this.collapsible_}},{key:"setCollapsible",value:function(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_)&&this.handleToggle_()}},{key:"setCollapsed",value:function(e){this.userCollapsed_=e,this.collapsible_&&this.collapsed_!==e&&this.handleToggle_()}},{key:"getCollapsed",value:function(){return this.collapsed_}},{key:"render",value:function(e){this.updateElement_(e.frameState)}}])&&o(r.prototype,n),e&&o(r,e),Object.defineProperty(r,"prototype",{writable:!1}),r}();r.default=e},{"../array.js":110,"../css.js":129,"../dom.js":130,"../events/EventType.js":134,"../functions.js":200,"./Control.js":118}],118:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("../Object.js")),a=n(e("../MapEventType.js")),s=e("../functions.js"),u=e("../events.js"),l=e("../dom.js");function n(e){return e&&e.__esModule?e:{default:e}}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function f(e,t,r){t=d(t);var n=e,t=h()?Reflect.construct(t,r||[],d(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(h=function(){return!!e})()}function p(){return(p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=d(e)););return e}(e,t);if(n)return(n=Object.getOwnPropertyDescriptor(n,t)).get?n.get.call(arguments.length<3?e:r):n.value}).apply(null,arguments)}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){return(g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}e=function(){function n(e){var t,r;if(this instanceof n)return t=f(this,n),!(r=e.element)||e.target||r.style.pointerEvents||(r.style.pointerEvents="auto"),t.element=r||null,t.target_=null,t.map_=null,t.listenerKeys=[],e.render&&(t.render=e.render),e.target&&t.setTarget(e.target),t;throw new TypeError("Cannot call a class as a function")}var e,t=n,r=o.default;if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&g(t,r),t=n,(r=[{key:"disposeInternal",value:function(){(0,l.removeNode)(this.element),p(d(n.prototype),"disposeInternal",this).call(this)}},{key:"getMap",value:function(){return this.map_}},{key:"setMap",value:function(e){this.map_&&(0,l.removeNode)(this.element);for(var t=0,r=this.listenerKeys.length;t<r;++t)(0,u.unlistenByKey)(this.listenerKeys[t]);this.listenerKeys.length=0,(this.map_=e)&&((this.target_||e.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==s.VOID&&this.listenerKeys.push((0,u.listen)(e,a.default.POSTRENDER,this.render,this)),e.render())}},{key:"render",value:function(e){}},{key:"setTarget",value:function(e){this.target_="string"==typeof e?document.getElementById(e):e}}])&&c(t.prototype,r),e&&c(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();r.default=e},{"../MapEventType.js":94,"../Object.js":96,"../dom.js":130,"../events.js":132,"../functions.js":200}],119:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("./Control.js")),a=n(e("../events/EventType.js")),s=n(e("../MapProperty.js")),u=e("../css.js"),l=e("../events.js"),c=e("../dom.js");function n(e){return e&&e.__esModule?e:{default:e}}function f(e){return function(e){if(Array.isArray(e))return h(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){{var r;if(e)return"string"==typeof e?h(e,t):"Map"===(r="Object"===(r={}.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?h(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function d(e,t,r){t=A(t);var n=e,t=g()?Reflect.construct(t,r||[],A(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(g=function(){return!!e})()}function y(){return(y="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=A(e)););return e}(e,t);if(n)return(n=Object.getOwnPropertyDescriptor(n,t)).get?n.get.call(arguments.length<3?e:r):n.value}).apply(null,arguments)}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var v=["fullscreenchange","webkitfullscreenchange","MSFullscreenChange"],b="enterfullscreen",_="leavefullscreen",e=function(){function n(e){var t;if(!(this instanceof n))throw new TypeError("Cannot call a class as a function");e=e||{},(t=d(this,n,[{element:document.createElement("div"),target:e.target}])).on,t.once,t.un,t.keys_=void 0!==e.keys&&e.keys,t.source_=e.source,t.isInFullscreen_=!1,t.boundHandleMapTargetChange_=t.handleMapTargetChange_.bind(t),t.cssClassName_=void 0!==e.className?e.className:"ol-full-screen",t.documentListeners_=[],t.activeClassName_=void 0!==e.activeClassName?e.activeClassName.split(" "):[t.cssClassName_+"-true"],t.inactiveClassName_=void 0!==e.inactiveClassName?e.inactiveClassName.split(" "):[t.cssClassName_+"-false"];var r=void 0!==e.label?e.label:"⤢",r=(t.labelNode_="string"==typeof r?document.createTextNode(r):r,void 0!==e.labelActive?e.labelActive:"×"),r=(t.labelActiveNode_="string"==typeof r?document.createTextNode(r):r,e.tipLabel||"Toggle full-screen");return t.button_=document.createElement("button"),t.button_.title=r,t.button_.setAttribute("type","button"),t.button_.appendChild(t.labelNode_),t.button_.addEventListener(a.default.CLICK,t.handleClick_.bind(t),!1),t.setClassName_(t.button_,t.isInFullscreen_),t.element.className="".concat(t.cssClassName_," ").concat(u.CLASS_UNSELECTABLE," ").concat(u.CLASS_CONTROL),t.element.appendChild(t.button_),t}var e,t=n,r=o.default;if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&m(t,r),t=n,(r=[{key:"handleClick_",value:function(e){e.preventDefault(),this.handleFullScreen_()}},{key:"handleFullScreen_",value:function(){var e,t,r=this.getMap();r&&w(e=r.getOwnerDocument())&&(E(e)?(t=e).exitFullscreen?t.exitFullscreen():t.webkitExitFullscreen&&t.webkitExitFullscreen():(t=this.source_?"string"==typeof this.source_?e.getElementById(this.source_):this.source_:r.getTargetElement(),this.keys_?(e=t).webkitRequestFullscreen?e.webkitRequestFullscreen():C(e):C(t)))}},{key:"handleFullScreenChange_",value:function(){var e,t=this.getMap();t&&(e=this.isInFullscreen_,this.isInFullscreen_=E(t.getOwnerDocument()),e!==this.isInFullscreen_)&&(this.setClassName_(this.button_,this.isInFullscreen_),this.isInFullscreen_?((0,c.replaceNode)(this.labelActiveNode_,this.labelNode_),this.dispatchEvent(b)):((0,c.replaceNode)(this.labelNode_,this.labelActiveNode_),this.dispatchEvent(_)),t.updateSize())}},{key:"setClassName_",value:function(e,t){t?((t=e.classList).remove.apply(t,f(this.inactiveClassName_)),(t=e.classList).add.apply(t,f(this.activeClassName_))):((t=e.classList).remove.apply(t,f(this.activeClassName_)),(t=e.classList).add.apply(t,f(this.inactiveClassName_)))}},{key:"setMap",value:function(e){var t=this.getMap();t&&t.removeChangeListener(s.default.TARGET,this.boundHandleMapTargetChange_),y(A(n.prototype),"setMap",this).call(this,e),this.handleMapTargetChange_(),e&&e.addChangeListener(s.default.TARGET,this.boundHandleMapTargetChange_)}},{key:"handleMapTargetChange_",value:function(){for(var e=this.documentListeners_,t=0,r=e.length;t<r;++t)(0,l.unlistenByKey)(e[t]);e.length=0;var n=this.getMap();if(n){var i=n.getOwnerDocument();w(i)?this.element.classList.remove(u.CLASS_UNSUPPORTED):this.element.classList.add(u.CLASS_UNSUPPORTED);for(var o=0,a=v.length;o<a;++o)e.push((0,l.listen)(i,v[o],this.handleFullScreenChange_,this));this.handleFullScreenChange_()}}}])&&p(t.prototype,r),e&&p(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();function w(e){var t=e.body;return t.webkitRequestFullscreen||t.requestFullscreen&&e.fullscreenEnabled}function E(e){return!(!e.webkitIsFullScreen&&!e.fullscreenElement)}function C(e){e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen&&e.webkitRequestFullscreen()}r.default=e},{"../MapProperty.js":95,"../css.js":129,"../dom.js":130,"../events.js":132,"../events/EventType.js":134,"./Control.js":118}],120:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("./Control.js")),a=n(e("../pointer/EventType.js")),s=e("../proj.js"),u=e("../events.js"),l=e("../coordinate.js");function n(e){return e&&e.__esModule?e:{default:e}}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function f(e,t,r){t=d(t);var n=e,t=h()?Reflect.construct(t,r||[],d(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(h=function(){return!!e})()}function p(){return(p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=d(e)););return e}(e,t);if(n)return(n=Object.getOwnPropertyDescriptor(n,t)).get?n.get.call(arguments.length<3?e:r):n.value}).apply(null,arguments)}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){return(g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var y="projection",A="coordinateFormat",e=function(){function n(e){var t;if(!(this instanceof n))throw new TypeError("Cannot call a class as a function");e=e||{};var r=document.createElement("div");return r.className=void 0!==e.className?e.className:"ol-mouse-position",(t=f(this,n,[{element:r,render:e.render,target:e.target}])).on,t.once,t.un,t.addChangeListener(y,t.handleProjectionChanged_),e.coordinateFormat&&t.setCoordinateFormat(e.coordinateFormat),e.projection&&t.setProjection(e.projection),t.renderOnMouseOut_=void 0!==e.placeholder,t.placeholder_=t.renderOnMouseOut_?e.placeholder:"&#160;",t.renderedHTML_=r.innerHTML,t.mapProjection_=null,t.transform_=null,t.wrapX_=!1!==e.wrapX,t}var e,t=n,r=o.default;if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&g(t,r),t=n,(r=[{key:"handleProjectionChanged_",value:function(){this.transform_=null}},{key:"getCoordinateFormat",value:function(){return this.get(A)}},{key:"getProjection",value:function(){return this.get(y)}},{key:"handleMouseMove",value:function(e){var t=this.getMap();this.updateHTML_(t.getEventPixel(e))}},{key:"handleMouseOut",value:function(e){this.updateHTML_(null)}},{key:"setMap",value:function(e){p(d(n.prototype),"setMap",this).call(this,e),e&&(e=e.getViewport(),this.listenerKeys.push((0,u.listen)(e,a.default.POINTERMOVE,this.handleMouseMove,this)),this.renderOnMouseOut_&&this.listenerKeys.push((0,u.listen)(e,a.default.POINTEROUT,this.handleMouseOut,this)),this.updateHTML_(null))}},{key:"setCoordinateFormat",value:function(e){this.set(A,e)}},{key:"setProjection",value:function(e){this.set(y,(0,s.get)(e))}},{key:"updateHTML_",value:function(e){var t,r=this.placeholder_;e&&this.mapProjection_&&(this.transform_||(t=this.getProjection(),this.transform_=t?(0,s.getTransformFromProjections)(this.mapProjection_,t):s.identityTransform),t=this.getMap().getCoordinateFromPixelInternal(e))&&((e=(0,s.getUserProjection)())&&(this.transform_=(0,s.getTransformFromProjections)(this.mapProjection_,e)),this.transform_(t,t),this.wrapX_&&(e=e||this.getProjection()||this.mapProjection_,(0,l.wrapX)(t,e)),r=(e=this.getCoordinateFormat())?e(t):t.toString()),this.renderedHTML_&&r===this.renderedHTML_||(this.element.innerHTML=r,this.renderedHTML_=r)}},{key:"render",value:function(e){e=e.frameState;e?this.mapProjection_!=e.viewState.projection&&(this.mapProjection_=e.viewState.projection,this.transform_=null):this.mapProjection_=null}}])&&c(t.prototype,r),e&&c(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();r.default=e},{"../coordinate.js":128,"../events.js":132,"../pointer/EventType.js":282,"../proj.js":283,"./Control.js":118}],121:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var h=f(e("../Collection.js")),n=f(e("./Control.js")),p=f(e("../events/EventType.js")),d=f(e("../Map.js")),o=f(e("../MapEventType.js")),a=f(e("../MapProperty.js")),s=f(e("../ObjectEventType.js")),g=f(e("../Overlay.js")),u=f(e("../View.js")),l=f(e("../ViewProperty.js")),y=e("../css.js"),c=e("../extent.js"),A=e("../events.js"),m=e("../geom/Polygon.js"),v=e("../dom.js");function f(e){return e&&e.__esModule?e:{default:e}}function b(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function _(e,t,r){t=C(t);var n=e,t=w()?Reflect.construct(t,r||[],C(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(w=function(){return!!e})()}function E(){return(E="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=C(e)););return e}(e,t);if(n)return(n=Object.getOwnPropertyDescriptor(n,t)).get?n.get.call(arguments.length<3?e:r):n.value}).apply(null,arguments)}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function I(e,t){return(I=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}e=function(){function f(e){var t;if(!(this instanceof f))throw new TypeError("Cannot call a class as a function");e=e||{},(t=_(this,f,[{element:document.createElement("div"),render:e.render,target:e.target}])).boundHandleRotationChanged_=t.handleRotationChanged_.bind(t),t.collapsed_=void 0===e.collapsed||e.collapsed,t.collapsible_=void 0===e.collapsible||e.collapsible,t.collapsible_||(t.collapsed_=!1),t.rotateWithView_=void 0!==e.rotateWithView&&e.rotateWithView;function r(e){e=s.getEventCoordinateInternal(e),u.getMap().getView().setCenterInternal(e),window.removeEventListener("mousemove",c),window.removeEventListener("mouseup",r)}var n=(t.viewExtent_=void 0)!==e.className?e.className:"ol-overviewmap",i=void 0!==e.tipLabel?e.tipLabel:"Overview map",o=void 0!==e.collapseLabel?e.collapseLabel:"‹",o=("string"==typeof o?(t.collapseLabel_=document.createElement("span"),t.collapseLabel_.textContent=o):t.collapseLabel_=o,void 0!==e.label?e.label:"›"),o=("string"==typeof o?(t.label_=document.createElement("span"),t.label_.textContent=o):t.label_=o,t.collapsible_&&!t.collapsed_?t.collapseLabel_:t.label_),a=document.createElement("button"),s=(a.setAttribute("type","button"),a.title=i,a.appendChild(o),a.addEventListener(p.default.CLICK,t.handleClick_.bind(t),!1),t.ovmapDiv_=document.createElement("div"),t.ovmapDiv_.className="ol-overviewmap-map",t.view_=e.view,new d.default({view:e.view,controls:new h.default,interactions:new h.default})),i=(t.ovmap_=s,e.layers&&e.layers.forEach(function(e){s.addLayer(e)}),document.createElement("div")),o=(i.className="ol-overviewmap-box",i.style.boxSizing="border-box",t.boxOverlay_=new g.default({position:[0,0],positioning:"center-center",element:i}),t.ovmap_.addOverlay(t.boxOverlay_),n+" "+y.CLASS_UNSELECTABLE+" "+y.CLASS_CONTROL+(t.collapsed_&&t.collapsible_?" "+y.CLASS_COLLAPSED:"")+(t.collapsible_?"":" ol-uncollapsible")),e=t.element,u=(e.className=o,e.appendChild(t.ovmapDiv_),e.appendChild(a),t),l=t.boxOverlay_,i=t.boxOverlay_.getElement(),c=function(e){e={clientX:e.clientX,clientY:e.clientY},e=s.getEventCoordinateInternal(e);l.setPosition(e)};return i.addEventListener("mousedown",function(){window.addEventListener("mousemove",c),window.addEventListener("mouseup",r)}),t}var e,t=f,r=n.default;if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&I(t,r),t=f,(r=[{key:"setMap",value:function(e){var t=this.getMap();e!==t&&(t&&((t=t.getView())&&this.unbindView_(t),this.ovmap_.setTarget(null)),E(C(f.prototype),"setMap",this).call(this,e),e)&&(this.ovmap_.setTarget(this.ovmapDiv_),this.listenerKeys.push((0,A.listen)(e,s.default.PROPERTYCHANGE,this.handleMapPropertyChange_,this)),(t=e.getView())&&(this.bindView_(t),t.isDef())&&(this.ovmap_.updateSize(),this.resetExtent_()),this.ovmap_.isRendered()||this.updateBoxAfterOvmapIsRendered_())}},{key:"handleMapPropertyChange_",value:function(e){var t;e.key===a.default.VIEW?((t=e.oldValue)&&this.unbindView_(t),t=this.getMap().getView(),this.bindView_(t)):this.ovmap_.isRendered()||e.key!==a.default.TARGET&&e.key!==a.default.SIZE||this.ovmap_.updateSize()}},{key:"bindView_",value:function(e){var t;this.view_||(t=new u.default({projection:e.getProjection()}),this.ovmap_.setView(t)),e.addChangeListener(l.default.ROTATION,this.boundHandleRotationChanged_),this.handleRotationChanged_()}},{key:"unbindView_",value:function(e){e.removeChangeListener(l.default.ROTATION,this.boundHandleRotationChanged_)}},{key:"handleRotationChanged_",value:function(){this.rotateWithView_&&this.ovmap_.getView().setRotation(this.getMap().getView().getRotation())}},{key:"validateExtent_",value:function(){var e,t,r,n,i=this.getMap(),o=this.ovmap_;i.isRendered()&&o.isRendered()&&(n=i.getSize(),i=i.getView().calculateExtentInternal(n),this.viewExtent_&&(0,c.equals)(i,this.viewExtent_)||(this.viewExtent_=i,n=o.getSize(),e=o.getView().calculateExtentInternal(n),r=o.getPixelFromCoordinateInternal((0,c.getTopLeft)(i)),o=o.getPixelFromCoordinateInternal((0,c.getBottomRight)(i)),t=Math.abs(r[0]-o[0]),r=Math.abs(r[1]-o[1]),o=n[0],n=n[1],t<.1*o||r<.1*n||.75*o<t||.75*n<r?this.resetExtent_():(0,c.containsExtent)(e,i)||this.recenter_()))}},{key:"resetExtent_",value:function(){var e=this.getMap(),t=this.ovmap_,r=e.getSize(),e=e.getView().calculateExtentInternal(r),r=t.getView(),t=Math.log(7.5)/Math.LN2,t=1/(.1*Math.pow(2,t/2));(0,c.scaleFromCenter)(e,t),r.fitInternal((0,m.fromExtent)(e))}},{key:"recenter_",value:function(){var e=this.getMap(),t=this.ovmap_,e=e.getView();t.getView().setCenterInternal(e.getCenterInternal())}},{key:"updateBox_",value:function(){var e,t,r,n,i,o,a=this.getMap(),s=this.ovmap_;a.isRendered()&&s.isRendered()&&(o=a.getSize(),a=a.getView(),s=s.getView(),e=this.rotateWithView_?0:-a.getRotation(),t=this.boxOverlay_,r=this.boxOverlay_.getElement(),n=a.getCenterInternal(),a=a.getResolution(),s=s.getResolution(),i=o[0]*a/s,o=o[1]*a/s,t.setPosition(n),r)&&(r.style.width=i+"px",r.style.height=o+"px",r.style.transform="rotate("+e+"rad)")}},{key:"updateBoxAfterOvmapIsRendered_",value:function(){this.ovmapPostrenderKey_||(this.ovmapPostrenderKey_=(0,A.listenOnce)(this.ovmap_,o.default.POSTRENDER,function(e){delete this.ovmapPostrenderKey_,this.updateBox_()},this))}},{key:"handleClick_",value:function(e){e.preventDefault(),this.handleToggle_()}},{key:"handleToggle_",value:function(){this.element.classList.toggle(y.CLASS_COLLAPSED),this.collapsed_?(0,v.replaceNode)(this.collapseLabel_,this.label_):(0,v.replaceNode)(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_;var e=this.ovmap_;this.collapsed_||(e.isRendered()?(this.viewExtent_=void 0,e.render()):(e.updateSize(),this.resetExtent_(),this.updateBoxAfterOvmapIsRendered_()))}},{key:"getCollapsible",value:function(){return this.collapsible_}},{key:"setCollapsible",value:function(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),!e)&&this.collapsed_&&this.handleToggle_()}},{key:"setCollapsed",value:function(e){this.collapsible_&&this.collapsed_!==e&&this.handleToggle_()}},{key:"getCollapsed",value:function(){return this.collapsed_}},{key:"getRotateWithView",value:function(){return this.rotateWithView_}},{key:"setRotateWithView",value:function(e){this.rotateWithView_!==e&&(this.rotateWithView_=e,0!==this.getMap().getView().getRotation())&&(this.rotateWithView_?this.handleRotationChanged_():this.ovmap_.getView().setRotation(0),this.viewExtent_=void 0,this.validateExtent_(),this.updateBox_())}},{key:"getOverviewMap",value:function(){return this.ovmap_}},{key:"render",value:function(e){this.validateExtent_(),this.updateBox_()}}])&&b(t.prototype,r),e&&b(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();r.default=e},{"../Collection.js":78,"../Map.js":89,"../MapEventType.js":94,"../MapProperty.js":95,"../ObjectEventType.js":97,"../Overlay.js":99,"../View.js":107,"../ViewProperty.js":109,"../css.js":129,"../dom.js":130,"../events.js":132,"../events/EventType.js":134,"../extent.js":142,"../geom/Polygon.js":211,"./Control.js":118}],122:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=o(e("./Control.js")),a=o(e("../events/EventType.js")),s=e("../css.js"),u=e("../easing.js");function o(e){return e&&e.__esModule?e:{default:e}}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function c(e,t,r){t=h(t);var n=e,t=f()?Reflect.construct(t,r||[],h(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(f=function(){return!!e})()}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}e=function(){function o(e){if(!(this instanceof o))throw new TypeError("Cannot call a class as a function");e=e||{};var t=c(this,o,[{element:document.createElement("div"),render:e.render,target:e.target}]),r=void 0!==e.className?e.className:"ol-rotate",n=void 0!==e.label?e.label:"⇧",i=void 0!==e.compassClassName?e.compassClassName:"ol-compass",n=(t.label_=null,"string"==typeof n?(t.label_=document.createElement("span"),t.label_.className=i,t.label_.textContent=n):(t.label_=n,t.label_.classList.add(i)),e.tipLabel||"Reset rotation"),i=document.createElement("button"),n=(i.className=r+"-reset",i.setAttribute("type","button"),i.title=n,i.appendChild(t.label_),i.addEventListener(a.default.CLICK,t.handleClick_.bind(t),!1),r+" "+s.CLASS_UNSELECTABLE+" "+s.CLASS_CONTROL),r=t.element;return r.className=n,r.appendChild(i),t.callResetNorth_=e.resetNorth||void 0,t.duration_=void 0!==e.duration?e.duration:250,t.autoHide_=void 0===e.autoHide||e.autoHide,t.rotation_=void 0,t.autoHide_&&t.element.classList.add(s.CLASS_HIDDEN),t}var e,t=o,r=n.default;if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&p(t,r),t=o,(r=[{key:"handleClick_",value:function(e){e.preventDefault(),void 0!==this.callResetNorth_?this.callResetNorth_():this.resetNorth_()}},{key:"resetNorth_",value:function(){var e,t=this.getMap().getView();t&&void 0!==(e=t.getRotation())&&(0<this.duration_&&e%(2*Math.PI)!=0?t.animate({rotation:0,duration:this.duration_,easing:u.easeOut}):t.setRotation(0))}},{key:"render",value:function(e){var t,r,e=e.frameState;e&&((e=e.viewState.rotation)!=this.rotation_&&(t="rotate("+e+"rad)",this.autoHide_&&((r=this.element.classList.contains(s.CLASS_HIDDEN))||0!==e?r&&0!==e&&this.element.classList.remove(s.CLASS_HIDDEN):this.element.classList.add(s.CLASS_HIDDEN)),this.label_.style.transform=t),this.rotation_=e)}}])&&l(t.prototype,r),e&&l(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();r.default=e},{"../css.js":129,"../easing.js":131,"../events/EventType.js":134,"./Control.js":118}],123:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=(n=e("./Control.js"))&&n.__esModule?n:{default:n},a=e("../css.js"),g=e("../proj.js");function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function u(e,t,r){t=c(t);var n=e,t=l()?Reflect.construct(t,r||[],c(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(l=function(){return!!e})()}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var y=[1,2,5],A=25.4/.28,n=function(){function n(e){if(!(this instanceof n))throw new TypeError("Cannot call a class as a function");e=e||{};var t=document.createElement("div"),r=(t.style.pointerEvents="none",(t=u(this,n,[{element:t,render:e.render,target:e.target}])).on,t.once,t.un,void 0!==e.className?e.className:e.bar?"ol-scale-bar":"ol-scale-line");return t.innerElement_=document.createElement("div"),t.innerElement_.className=r+"-inner",t.element.className=r+" "+a.CLASS_UNSELECTABLE,t.element.appendChild(t.innerElement_),t.viewState_=null,t.minWidth_=void 0!==e.minWidth?e.minWidth:64,t.maxWidth_=e.maxWidth,t.renderedVisible_=!1,t.renderedWidth_=void 0,t.renderedHTML_="",t.addChangeListener("units",t.handleUnitsChanged_),t.setUnits(e.units||"metric"),t.scaleBar_=e.bar||!1,t.scaleBarSteps_=e.steps||4,t.scaleBarText_=e.text||!1,t.dpi_=e.dpi||void 0,t}var e,t=n,r=o.default;if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&f(t,r),t=n,(r=[{key:"getUnits",value:function(){return this.get("units")}},{key:"handleUnitsChanged_",value:function(){this.updateElement_()}},{key:"setUnits",value:function(e){this.set("units",e)}},{key:"setDpi",value:function(e){this.dpi_=e}},{key:"updateElement_",value:function(){var e=this.viewState_;if(e){var t=e.center,r=e.projection,n=this.getUnits(),i=(0,g.getPointResolution)(r,e.resolution,t,"degrees"==n?"degrees":"m"),o=this.minWidth_*(this.dpi_||A)/A,a=void 0!==this.maxWidth_?this.maxWidth_*(this.dpi_||A)/A:void 0,r=o*i,e="";if("degrees"==n){t=g.METERS_PER_UNIT.degrees;(r*=t)<t/60?(e="″",i*=3600):r<t?(e="′",i*=60):e="°"}else if("imperial"==n)r<.9144?(e="in",i/=.0254):r<1609.344?(e="ft",i/=.3048):(e="mi",i/=1609.344);else if("nautical"==n)i/=1852,e="NM";else if("metric"==n)r<1e-6?(e="nm",i*=1e9):r<.001?(e="μm",i*=1e6):r<1?(e="mm",i*=1e3):r<1e3?e="m":(e="km",i/=1e3);else{if("us"!=n)throw new Error("Invalid units");r<.9144?(e="in",i*=39.37):r<1609.344?(e="ft",i/=.30480061):(e="mi",i/=1609.3472)}for(var s,u,l,c=3*Math.floor(Math.log(o*i)/Math.log(10));;){var f=Math.floor(c/3),h=Math.pow(10,f),p=y[(c%3+3)%3]*h,d=Math.round(p/i);if(isNaN(d))return this.element.style.display="none",void(this.renderedVisible_=!1);if(void 0!==a&&a<=d){p=s,d=u,f=l;break}if(o<=d)break;s=p,u=d,l=f,++c}t=this.scaleBar_?this.createScaleBar(d,p,e):p.toFixed(f<0?-f:0)+" "+e;this.renderedHTML_!=t&&(this.innerElement_.innerHTML=t,this.renderedHTML_=t),this.renderedWidth_!=d&&(this.innerElement_.style.width=d+"px",this.renderedWidth_=d),this.renderedVisible_||(this.element.style.display="",this.renderedVisible_=!0)}else this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1)}},{key:"createScaleBar",value:function(e,t,r){for(var n=this.getScaleForResolution(),n=n<1?Math.round(1/n).toLocaleString()+" : 1":"1 : "+Math.round(n).toLocaleString(),i=this.scaleBarSteps_,o=e/i,a=[this.createMarker("absolute")],s=0;s<i;++s)a.push("<div><div "+'class="ol-scale-singlebar '.concat(s%2==0?"ol-scale-singlebar-odd":"ol-scale-singlebar-even",'" ')+'style="width: '.concat(o,'px;"')+"></div>"+this.createMarker("relative")+(s%2==0||2===i?this.createStepText(s,e,!1,t,r):"")+"</div>");return a.push(this.createStepText(i,e,!0,t,r)),(this.scaleBarText_?'<div class="ol-scale-text" style="width: '.concat(e,'px;">')+n+"</div>":"")+a.join("")}},{key:"createMarker",value:function(e){var t="absolute"===e?3:-10;return'<div class="ol-scale-step-marker" '+'style="position: '.concat(e,"; top: ").concat(t,'px;"')+"></div>"}},{key:"createStepText",value:function(e,t,r,n,i){var n=(0===e?0:Math.round(n/this.scaleBarSteps_*e*100)/100)+(0===e?"":" "+i),i=0===e?-3:t/this.scaleBarSteps_*-1,o=0===e?0:t/this.scaleBarSteps_*2;return'<div class="ol-scale-step-text" style="'+"margin-left: ".concat(i,"px;")+"text-align: ".concat(0===e?"left":"center",";")+"min-width: ".concat(o,"px;")+"left: ".concat(r?t+"px":"unset",";")+'">'+n+"</div>"}},{key:"getScaleForResolution",value:function(){return(0,g.getPointResolution)(this.viewState_.projection,this.viewState_.resolution,this.viewState_.center,"m")*(1e3/25.4)*(this.dpi_||A)}},{key:"render",value:function(e){e=e.frameState;this.viewState_=e?e.viewState:null,this.updateElement_()}}])&&s(t.prototype,r),e&&s(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();r.default=n},{"../css.js":129,"../proj.js":283,"./Control.js":118}],124:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=a(e("./Control.js")),h=a(e("../events/EventType.js")),p=e("../css.js"),o=e("../easing.js");function a(e){return e&&e.__esModule?e:{default:e}}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function d(e,t,r){t=l(t);var n=e,t=u()?Reflect.construct(t,r||[],l(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(u=function(){return!!e})()}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}e=function(){function f(e){if(!(this instanceof f))throw new TypeError("Cannot call a class as a function");e=e||{};var t=d(this,f,[{element:document.createElement("div"),target:e.target}]),r=void 0!==e.className?e.className:"ol-zoom",n=void 0!==e.delta?e.delta:1,i=void 0!==e.zoomInClassName?e.zoomInClassName:r+"-in",o=void 0!==e.zoomOutClassName?e.zoomOutClassName:r+"-out",a=void 0!==e.zoomInLabel?e.zoomInLabel:"+",s=void 0!==e.zoomOutLabel?e.zoomOutLabel:"–",u=void 0!==e.zoomInTipLabel?e.zoomInTipLabel:"Zoom in",l=void 0!==e.zoomOutTipLabel?e.zoomOutTipLabel:"Zoom out",c=document.createElement("button"),i=(c.className=i,c.setAttribute("type","button"),c.title=u,c.appendChild("string"==typeof a?document.createTextNode(a):a),c.addEventListener(h.default.CLICK,t.handleClick_.bind(t,n),!1),document.createElement("button")),u=(i.className=o,i.setAttribute("type","button"),i.title=l,i.appendChild("string"==typeof s?document.createTextNode(s):s),i.addEventListener(h.default.CLICK,t.handleClick_.bind(t,-n),!1),r+" "+p.CLASS_UNSELECTABLE+" "+p.CLASS_CONTROL),a=t.element;return a.className=u,a.appendChild(c),a.appendChild(i),t.duration_=void 0!==e.duration?e.duration:250,t}var e,t=f,r=n.default;if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&c(t,r),t=f,(r=[{key:"handleClick_",value:function(e,t){t.preventDefault(),this.zoomByDelta_(e)}},{key:"zoomByDelta_",value:function(e){var t,r=this.getMap().getView();r&&void 0!==(t=r.getZoom())&&(t=r.getConstrainedZoom(t+e),0<this.duration_?(r.getAnimating()&&r.cancelAnimations(),r.animate({zoom:t,duration:this.duration_,easing:o.easeOut})):r.setZoom(t))}}])&&s(t.prototype,r),e&&s(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();r.default=e},{"../css.js":129,"../easing.js":131,"../events/EventType.js":134,"./Control.js":118}],125:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=h(e("./Control.js")),o=h(e("../events/EventType.js")),a=h(e("../pointer/EventType.js")),s=e("../css.js"),u=e("../math.js"),l=e("../easing.js"),c=e("../events.js"),f=e("../events/Event.js");function h(e){return e&&e.__esModule?e:{default:e}}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function d(e,t,r){t=A(t);var n=e,t=g()?Reflect.construct(t,r||[],A(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(g=function(){return!!e})()}function y(){return(y="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=A(e)););return e}(e,t);if(n)return(n=Object.getOwnPropertyDescriptor(n,t)).get?n.get.call(arguments.length<3?e:r):n.value}).apply(null,arguments)}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var v=0,b=1,e=function(){function i(e){var t;if(!(this instanceof i))throw new TypeError("Cannot call a class as a function");(t=d(this,i,[{target:(e=e||{}).target,element:document.createElement("div"),render:e.render}])).dragListenerKeys_=[],t.currentResolution_=void 0,t.direction_=v,t.dragging_,t.heightLimit_=0,t.widthLimit_=0,t.startX_,t.startY_,t.thumbSize_=null,t.sliderInitialized_=!1,t.duration_=void 0!==e.duration?e.duration:200;var e=void 0!==e.className?e.className:"ol-zoomslider",r=document.createElement("button"),n=(r.setAttribute("type","button"),r.className=e+"-thumb "+s.CLASS_UNSELECTABLE,t.element);return n.className=e+" "+s.CLASS_UNSELECTABLE+" "+s.CLASS_CONTROL,n.appendChild(r),n.addEventListener(a.default.POINTERDOWN,t.handleDraggerStart_.bind(t),!1),n.addEventListener(a.default.POINTERMOVE,t.handleDraggerDrag_.bind(t),!1),n.addEventListener(a.default.POINTERUP,t.handleDraggerEnd_.bind(t),!1),n.addEventListener(o.default.CLICK,t.handleContainerClick_.bind(t),!1),r.addEventListener(o.default.CLICK,f.stopPropagation,!1),t}var e,t=i,r=n.default;if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&m(t,r),t=i,(r=[{key:"setMap",value:function(e){y(A(i.prototype),"setMap",this).call(this,e),e&&e.render()}},{key:"initSlider_",value:function(){var e,t,r=this.element,n=r.offsetWidth,i=r.offsetHeight;return 0===n&&0===i?this.sliderInitialized_=!1:(t=getComputedStyle(r),n-=parseFloat(t.paddingRight)+parseFloat(t.paddingLeft),i-=parseFloat(t.paddingTop)+parseFloat(t.paddingBottom),t=r.firstElementChild,r=getComputedStyle(t),e=t.offsetWidth+parseFloat(r.marginRight)+parseFloat(r.marginLeft),t=t.offsetHeight+parseFloat(r.marginTop)+parseFloat(r.marginBottom),this.thumbSize_=[e,t],i<n?(this.direction_=b,this.widthLimit_=n-e):(this.direction_=v,this.heightLimit_=i-t),this.sliderInitialized_=!0)}},{key:"handleContainerClick_",value:function(e){var t=this.getMap().getView(),e=this.getRelativePosition_(e.offsetX-this.thumbSize_[0]/2,e.offsetY-this.thumbSize_[1]/2),e=this.getResolutionForPosition_(e),e=t.getConstrainedZoom(t.getZoomForResolution(e));t.animateInternal({zoom:e,duration:this.duration_,easing:l.easeOut})}},{key:"handleDraggerStart_",value:function(e){var t,r;this.dragging_||e.target!==this.element.firstElementChild||(t=this.element.firstElementChild,this.getMap().getView().beginInteraction(),this.startX_=e.clientX-parseFloat(t.style.left),this.startY_=e.clientY-parseFloat(t.style.top),this.dragging_=!0,0===this.dragListenerKeys_.length&&(e=this.handleDraggerDrag_,t=this.handleDraggerEnd_,r=this.getMap().getOwnerDocument(),this.dragListenerKeys_.push((0,c.listen)(r,a.default.POINTERMOVE,e,this),(0,c.listen)(r,a.default.POINTERUP,t,this))))}},{key:"handleDraggerDrag_",value:function(e){var t;this.dragging_&&(t=e.clientX-this.startX_,e=e.clientY-this.startY_,t=this.getRelativePosition_(t,e),this.currentResolution_=this.getResolutionForPosition_(t),this.getMap().getView().setResolution(this.currentResolution_))}},{key:"handleDraggerEnd_",value:function(e){this.dragging_&&(this.getMap().getView().endInteraction(),this.dragging_=!1,this.startX_=void 0,this.startY_=void 0,this.dragListenerKeys_.forEach(c.unlistenByKey),this.dragListenerKeys_.length=0)}},{key:"setThumbPosition_",value:function(e){var e=this.getPositionForResolution_(e),t=this.element.firstElementChild;this.direction_==b?t.style.left=this.widthLimit_*e+"px":t.style.top=this.heightLimit_*e+"px"}},{key:"getRelativePosition_",value:function(e,t){e=this.direction_===b?e/this.widthLimit_:t/this.heightLimit_;return(0,u.clamp)(e,0,1)}},{key:"getResolutionForPosition_",value:function(e){return this.getMap().getView().getResolutionForValueFunction()(1-e)}},{key:"getPositionForResolution_",value:function(e){var t=this.getMap().getView().getValueForResolutionFunction();return(0,u.clamp)(1-t(e),0,1)}},{key:"render",value:function(e){e.frameState&&(this.sliderInitialized_||this.initSlider_())&&(e=e.frameState.viewState.resolution,this.currentResolution_=e,this.setThumbPosition_(e))}}])&&p(t.prototype,r),e&&p(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();r.default=e},{"../css.js":129,"../easing.js":131,"../events.js":132,"../events/Event.js":133,"../events/EventType.js":134,"../math.js":279,"../pointer/EventType.js":282,"./Control.js":118}],126:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=o(e("./Control.js")),a=o(e("../events/EventType.js")),s=e("../css.js"),u=e("../proj.js"),l=e("../geom/Polygon.js");function o(e){return e&&e.__esModule?e:{default:e}}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function f(e,t,r){t=p(t);var n=e,t=h()?Reflect.construct(t,r||[],p(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(h=function(){return!!e})()}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}e=function(){function o(e){var t;if(!(this instanceof o))throw new TypeError("Cannot call a class as a function");e=e||{},(t=f(this,o,[{element:document.createElement("div"),target:e.target}])).extent=e.extent||null;var r=void 0!==e.className?e.className:"ol-zoom-extent",n=void 0!==e.label?e.label:"E",e=void 0!==e.tipLabel?e.tipLabel:"Fit to extent",i=document.createElement("button"),e=(i.setAttribute("type","button"),i.title=e,i.appendChild("string"==typeof n?document.createTextNode(n):n),i.addEventListener(a.default.CLICK,t.handleClick_.bind(t),!1),r+" "+s.CLASS_UNSELECTABLE+" "+s.CLASS_CONTROL),n=t.element;return n.className=e,n.appendChild(i),t}var e,t=o,r=n.default;if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&d(t,r),t=o,(r=[{key:"handleClick_",value:function(e){e.preventDefault(),this.handleZoomToExtent()}},{key:"handleZoomToExtent",value:function(){var e=this.getMap().getView(),t=this.extent?(0,u.fromUserExtent)(this.extent,e.getProjection()):e.getProjection().getExtent();e.fitInternal((0,l.fromExtent)(t))}}])&&c(t.prototype,r),e&&c(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();r.default=e},{"../css.js":129,"../events/EventType.js":134,"../geom/Polygon.js":211,"../proj.js":283,"./Control.js":118}],127:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.defaults=function(e){e=e||{};var t=new i.default;return void 0!==e.zoom&&!e.zoom||t.push(new a.default(e.zoomOptions)),void 0!==e.rotate&&!e.rotate||t.push(new o.default(e.rotateOptions)),void 0!==e.attribution&&!e.attribution||t.push(new n.default(e.attributionOptions)),t};var n=s(e("./Attribution.js")),i=s(e("../Collection.js")),o=s(e("./Rotate.js")),a=s(e("./Zoom.js"));function s(e){return e&&e.__esModule?e:{default:e}}},{"../Collection.js":78,"./Attribution.js":117,"./Rotate.js":122,"./Zoom.js":124}],128:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.add=function(e,t){return e[0]+=+t[0],e[1]+=+t[1],e},r.closestOnCircle=function(e,t){var r=t.getRadius(),t=t.getCenter(),n=t[0],t=t[1],i=e[0]-n,e=e[1]-t,o=(0===i&&0==e&&(i=1),Math.sqrt(i*i+e*e));return[n+r*i/o,t+r*e/o]},r.closestOnSegment=n,r.createStringXY=function(t){return function(e){return c(e,t)}},r.degreesToStringHDMS=i,r.distance=function(e,t){return Math.sqrt(l(e,t))},r.equals=function(e,t){for(var r=!0,n=e.length-1;0<=n;--n)if(e[n]!=t[n]){r=!1;break}return r},r.format=u,r.getWorldsAway=f,r.rotate=function(e,t){var r=Math.cos(t),t=Math.sin(t),n=e[0]*r-e[1]*t,r=e[1]*r+e[0]*t;return e[0]=n,e[1]=r,e},r.scale=function(e,t){return e[0]*=t,e[1]*=t,e},r.squaredDistance=l,r.squaredDistanceToSegment=function(e,t){return l(e,n(e,t))},r.toStringHDMS=function(e,t){return e?i("NS",e[1],t)+" "+i("EW",e[0],t):""},r.toStringXY=c,r.wrapX=function(e,t){{var r;t.canWrapX()&&(r=(0,o.getWidth)(t.getExtent()),t=f(e,t,r))&&(e[0]-=t*r)}return e};var o=e("./extent.js"),a=e("./math.js"),s=e("./string.js");function n(e,t){var r,n=e[0],e=e[1],i=t[0],t=t[1],o=i[0],i=i[1],a=t[0],t=t[1],s=a-o,u=t-i,n=0==s&&0==u?0:(s*(n-o)+u*(e-i))/(s*s+u*u||0),e=n<=0?(r=o,i):1<=n?(r=a,t):(r=o+n*s,i+n*u);return[r,e]}function i(e,t,r){var t=(0,a.modulo)(t+180,360)-180,n=Math.abs(3600*t),r=r||0,i=Math.floor(n/3600),o=Math.floor((n-3600*i)/60),n=(0,a.toFixed)(n-3600*i-60*o,r),i=(60<=n&&(n=0,o+=1),60<=o&&(o=0,i+=1),i+"°");return 0===o&&0===n||(i+=" "+(0,s.padNumber)(o,2)+"′"),0!==n&&(i+=" "+(0,s.padNumber)(n,2,r)+"″"),0!=t&&(i+=" "+e.charAt(t<0?1:0)),i}function u(e,t,r){return e?t.replace("{x}",e[0].toFixed(r)).replace("{y}",e[1].toFixed(r)):""}function l(e,t){var r=e[0]-t[0],e=e[1]-t[1];return r*r+e*e}function c(e,t){return u(e,"{x}, {y}",t)}function f(e,t,r){var n=t.getExtent(),i=0;return t.canWrapX()&&(e[0]<n[0]||e[0]>n[2])&&(r=r||(0,o.getWidth)(n),i=Math.floor((e[0]-n[0])/r)),i}},{"./extent.js":142,"./math.js":279,"./string.js":380}],129:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getFontParameters=r.CLASS_UNSUPPORTED=r.CLASS_UNSELECTABLE=r.CLASS_SELECTABLE=r.CLASS_HIDDEN=r.CLASS_CONTROL=r.CLASS_COLLAPSED=void 0;r.CLASS_HIDDEN="ol-hidden",r.CLASS_SELECTABLE="ol-selectable",r.CLASS_UNSELECTABLE="ol-unselectable",r.CLASS_UNSUPPORTED="ol-unsupported",r.CLASS_CONTROL="ol-control",r.CLASS_COLLAPSED="ol-collapsed";var a=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))","?\\s*([-,\\\"\\'\\sa-z]+?)\\s*$"].join(""),"i"),s=["style","variant","weight","size","lineHeight","family"];r.getFontParameters=function(e){var t=e.match(a);if(!t)return null;for(var r={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"},n=0,i=s.length;n<i;++n){var o=t[n+1];void 0!==o&&(r[s[n]]=o)}return r.families=r.family.split(/,\s?/),r}},{}],130:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.createCanvasContext2D=o,r.getSharedCanvasContext2D=function(){return n=n||o(1,1)},r.outerHeight=function(e){var t=e.offsetHeight,e=getComputedStyle(e);return t+=parseInt(e.marginTop,10)+parseInt(e.marginBottom,10)},r.outerWidth=function(e){var t=e.offsetWidth,e=getComputedStyle(e);return t+=parseInt(e.marginLeft,10)+parseInt(e.marginRight,10)},r.releaseCanvas=function(e){var t=e.canvas;t.width=1,t.height=1,e.clearRect(0,0,1,1)},r.removeChildren=function(e){for(;e.lastChild;)e.removeChild(e.lastChild)},r.removeNode=function(e){return e&&e.parentNode?e.parentNode.removeChild(e):null},r.replaceChildren=function(e,t){for(var r=e.childNodes,n=0;;++n){var i=r[n],o=t[n];if(!i&&!o)break;i!==o&&(i?o?e.insertBefore(o,i):(e.removeChild(i),--n):e.appendChild(o))}},r.replaceNode=function(e,t){var r=t.parentNode;r&&r.replaceChild(e,t)};var n,i=e("./has.js");function o(e,t,r,n){r=r&&r.length?r.shift():i.WORKER_OFFSCREEN_CANVAS?new OffscreenCanvas(e||300,t||300):document.createElement("canvas");return e&&(r.width=e),t&&(r.height=t),r.getContext("2d",n)}},{"./has.js":233}],131:[function(e,t,r){"use strict";function n(e){return Math.pow(e,3)}function i(e){return 3*e*e-2*e*e*e}Object.defineProperty(r,"__esModule",{value:!0}),r.easeIn=n,r.easeOut=function(e){return 1-n(1-e)},r.inAndOut=i,r.linear=function(e){return e},r.upAndDown=function(e){return e<.5?i(2*e):1-i(2*(e-.5))}},{}],132:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.listen=i,r.listenOnce=function(e,t,r,n){return i(e,t,r,n,!0)},r.unlistenByKey=function(e){e&&e.target&&(e.target.removeEventListener(e.type,e.listener),(0,n.clear)(e))};var n=e("./obj.js");function i(e,t,r,n,i){n&&n!==e&&(r=r.bind(n)),i&&(o=r,r=function(){e.removeEventListener(t,r),o.apply(this,arguments)});var o,n={target:e,type:t,listener:r};return e.addEventListener(t,r),n}},{"./obj.js":281}],133:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,r.preventDefault=function(e){e.preventDefault()},r.stopPropagation=function(e){e.stopPropagation()};o=function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.propagationStopped,this.defaultPrevented,this.type=t,this.target=null},(s=[{key:"preventDefault",value:function(){this.defaultPrevented=!0}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}}])&&n(o.prototype,s),a&&n(o,a),Object.defineProperty(o,"prototype",{writable:!1});var o,a,s=o;r.default=s},{}],134:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;r.default={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"}},{}],135:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;r.default={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"}},{}],136:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.SnapEventType=r.SnapEvent=void 0;var o=(e=e("./Event.js"))&&e.__esModule?e:{default:e};function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function s(e,t,r){t=l(t);var n=e,t=u()?Reflect.construct(t,r||[],l(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(u=function(){return!!e})()}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}r.SnapEventType={SNAP:"snap"},r.SnapEvent=function(){function r(e,t){if(this instanceof r)return(e=s(this,r,[e])).vertex=t.vertex,e.vertexPixel=t.vertexPixel,e.feature=t.feature,e.segment=t.segment,e;throw new TypeError("Cannot call a class as a function")}var e,t,n=r,i=o.default;if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function");return n.prototype=Object.create(i&&i.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),i&&c(n,i),n=r,e&&a(n.prototype,e),t&&a(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}()},{"./Event.js":133}],137:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("../Disposable.js")),l=n(e("./Event.js")),c=e("../functions.js"),a=e("../obj.js");function n(e){return e&&e.__esModule?e:{default:e}}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function u(e,t,r){t=h(t);var n=e,t=f()?Reflect.construct(t,r||[],h(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(f=function(){return!!e})()}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}e=function(){function r(e){var t;if(this instanceof r)return(t=u(this,r)).eventTarget_=e,t.pendingRemovals_=null,t.dispatching_=null,t.listeners_=null,t;throw new TypeError("Cannot call a class as a function")}var e,t=r,n=o.default;if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&p(t,n),t=r,(n=[{key:"addEventListener",value:function(e,t){var r;e&&t&&((r=(r=this.listeners_||(this.listeners_={}))[e]||(r[e]=[])).includes(t)||r.push(t))}},{key:"dispatchEvent",value:function(e){var t="string"==typeof e,r=t?e:e.type,n=this.listeners_&&this.listeners_[r];if(n){var i=t?new l.default(e):e;i.target||(i.target=this.eventTarget_||this);var o,t=this.dispatching_||(this.dispatching_={}),e=this.pendingRemovals_||(this.pendingRemovals_={});r in t||(t[r]=0,e[r]=0),++t[r];for(var a=0,s=n.length;a<s;++a)if(!1===(o="handleEvent"in n[a]?n[a].handleEvent(i):n[a].call(this,i))||i.propagationStopped){o=!1;break}if(0==--t[r]){var u=e[r];for(delete e[r];u--;)this.removeEventListener(r,c.VOID);delete t[r]}return o}}},{key:"disposeInternal",value:function(){this.listeners_&&(0,a.clear)(this.listeners_)}},{key:"getListeners",value:function(e){return this.listeners_&&this.listeners_[e]||void 0}},{key:"hasListener",value:function(e){return!!this.listeners_&&(e?e in this.listeners_:0<Object.keys(this.listeners_).length)}},{key:"removeEventListener",value:function(e,t){var r;this.listeners_&&(r=this.listeners_[e])&&-1!==(t=r.indexOf(t))&&(this.pendingRemovals_&&e in this.pendingRemovals_?(r[t]=c.VOID,++this.pendingRemovals_[e]):(r.splice(t,1),0===r.length&&delete this.listeners_[e]))}}])&&s(t.prototype,n),e&&s(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();r.default=e},{"../Disposable.js":81,"../functions.js":200,"../obj.js":281,"./Event.js":133}],138:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.all=function(e){var i=arguments;return function(e){for(var t=!0,r=0,n=i.length;r<n&&(t=t&&i[r](e));++r);return t}},r.touchOnly=r.targetNotEditable=r.singleClick=r.shiftKeyOnly=r.primaryAction=r.pointerMove=r.platformModifierKeyOnly=r.platformModifierKey=r.penOnly=r.noModifierKeys=r.never=r.mouseOnly=r.mouseActionButton=r.focusWithTabindex=r.focus=r.doubleClick=r.click=r.always=r.altShiftKeysOnly=r.altKeyOnly=void 0;var n=(i=e("../MapBrowserEventType.js"))&&i.__esModule?i:{default:i},i=e("../functions.js"),o=e("../has.js"),a=e("../asserts.js");r.altKeyOnly=function(e){e=e.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},r.altShiftKeysOnly=function(e){e=e.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey};var s=r.focus=function(e){var t=e.map.getTargetElement(),e=e.map.getOwnerDocument().activeElement;return t.contains(e)};r.focusWithTabindex=function(e){return!e.map.getTargetElement().hasAttribute("tabindex")||s(e)},r.always=i.TRUE,r.click=function(e){return e.type==n.default.CLICK},r.mouseActionButton=function(e){e=e.originalEvent;return 0==e.button&&!(o.WEBKIT&&o.MAC&&e.ctrlKey)},r.never=i.FALSE,r.pointerMove=function(e){return"pointermove"==e.type},r.singleClick=function(e){return e.type==n.default.SINGLECLICK},r.doubleClick=function(e){return e.type==n.default.DBLCLICK},r.noModifierKeys=function(e){e=e.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},r.platformModifierKeyOnly=function(e){e=e.originalEvent;return!e.altKey&&(o.MAC?e.metaKey:e.ctrlKey)&&!e.shiftKey},r.platformModifierKey=function(e){e=e.originalEvent;return o.MAC?e.metaKey:e.ctrlKey},r.shiftKeyOnly=function(e){e=e.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},r.targetNotEditable=function(e){var e=e.originalEvent,t=e.target.tagName;return"INPUT"!==t&&"SELECT"!==t&&"TEXTAREA"!==t&&!e.target.isContentEditable},r.mouseOnly=function(e){e=e.originalEvent;return(0,a.assert)(void 0!==e,"mapBrowserEvent must originate from a pointer event"),"mouse"==e.pointerType},r.touchOnly=function(e){e=e.originalEvent;return(0,a.assert)(void 0!==e,"mapBrowserEvent must originate from a pointer event"),"touch"===e.pointerType},r.penOnly=function(e){e=e.originalEvent;return(0,a.assert)(void 0!==e,"mapBrowserEvent must originate from a pointer event"),"pen"===e.pointerType},r.primaryAction=function(e){e=e.originalEvent;return(0,a.assert)(void 0!==e,"mapBrowserEvent must originate from a pointer event"),e.isPrimary&&0===e.button}},{"../MapBrowserEventType.js":92,"../asserts.js":111,"../functions.js":200,"../has.js":233}],139:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.buildExpression=function(e,t,r){e=(0,X.parse)(e,r);if((0,X.overlapsType)(t,e.type))return ee(e,r);r=(0,X.typeName)(t),t=(0,X.typeName)(e.type);throw new Error("Expected expression to be of type ".concat(r,", got ").concat(t))},r.newEvaluationContext=function(){return{variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""}};var X=e("./expression.js"),J=e("../color.js");function Z(e){return(Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $(e){return function(e){if(Array.isArray(e))return n(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){{var r;if(e)return"string"==typeof e?n(e,t):"Map"===(r="Object"===(r={}.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function ee(e,t){var r;if(e instanceof X.LiteralExpression)return e.type===X.ColorType&&"string"==typeof e.value?(r=(0,J.fromString)(e.value),function(){return r}):function(){return e.value};var n=e.operator;switch(n){case X.Ops.Number:case X.Ops.String:case X.Ops.Coalesce:for(var i=e,D=t,o=i.operator,a=i.args.length,s=new Array(a),u=0;u<a;++u)s[u]=ee(i.args[u],D);switch(o){case X.Ops.Coalesce:return function(e){for(var t=0;t<a;++t){var r=s[t](e);if(null!=r)return r}throw new Error("Expected one of the values to be non-null")};case X.Ops.Number:case X.Ops.String:return function(e){for(var t=0;t<a;++t){var r=s[t](e);if(Z(r)===o)return r}throw new Error("Expected one of the values to be a ".concat(o))};default:throw new Error("Unsupported assertion operator ".concat(o))}return;case X.Ops.Get:case X.Ops.Var:var l=e,c=l.args[0].value;switch(l.operator){case X.Ops.Get:return function(e){return e.properties[c]};case X.Ops.Var:return function(e){return e.variables[c]};default:throw new Error("Unsupported accessor operator ".concat(l.operator))}return;case X.Ops.Id:return function(e){return e.featureId};case X.Ops.GeometryType:return function(e){return e.geometryType};case X.Ops.Concat:var L=e.args.map(function(e){return ee(e,t)});return function(t){return"".concat.apply("",$(L.map(function(e){return e(t).toString()})))};case X.Ops.Resolution:return function(e){return e.resolution};case X.Ops.Any:case X.Ops.All:case X.Ops.Between:case X.Ops.In:case X.Ops.Not:for(var f=e,Q=t,h=f.operator,p=f.args.length,d=new Array(p),g=0;g<p;++g)d[g]=ee(f.args[g],Q);switch(h){case X.Ops.Any:return function(e){for(var t=0;t<p;++t)if(d[t](e))return!0;return!1};case X.Ops.All:return function(e){for(var t=0;t<p;++t)if(!d[t](e))return!1;return!0};case X.Ops.Between:return function(e){var t=d[0](e),r=d[1](e),e=d[2](e);return r<=t&&t<=e};case X.Ops.In:return function(e){for(var t=d[0](e),r=1;r<p;++r)if(t===d[r](e))return!0;return!1};case X.Ops.Not:return function(e){return!d[0](e)};default:throw new Error("Unsupported logical operator ".concat(h))}return;case X.Ops.Equal:case X.Ops.NotEqual:case X.Ops.LessThan:case X.Ops.LessThanOrEqualTo:case X.Ops.GreaterThan:case X.Ops.GreaterThanOrEqualTo:var y=e,A=t,m=y.operator,v=ee(y.args[0],A),b=ee(y.args[1],A);switch(m){case X.Ops.Equal:return function(e){return v(e)===b(e)};case X.Ops.NotEqual:return function(e){return v(e)!==b(e)};case X.Ops.LessThan:return function(e){return v(e)<b(e)};case X.Ops.LessThanOrEqualTo:return function(e){return v(e)<=b(e)};case X.Ops.GreaterThan:return function(e){return v(e)>b(e)};case X.Ops.GreaterThanOrEqualTo:return function(e){return v(e)>=b(e)};default:throw new Error("Unsupported comparison operator ".concat(m))}return;case X.Ops.Multiply:case X.Ops.Divide:case X.Ops.Add:case X.Ops.Subtract:case X.Ops.Clamp:case X.Ops.Mod:case X.Ops.Pow:case X.Ops.Abs:case X.Ops.Floor:case X.Ops.Ceil:case X.Ops.Round:case X.Ops.Sin:case X.Ops.Cos:case X.Ops.Atan:case X.Ops.Sqrt:for(var _=e,F=t,N=_.operator,w=_.args.length,E=new Array(w),C=0;C<w;++C)E[C]=ee(_.args[C],F);switch(N){case X.Ops.Multiply:return function(e){for(var t=1,r=0;r<w;++r)t*=E[r](e);return t};case X.Ops.Divide:return function(e){return E[0](e)/E[1](e)};case X.Ops.Add:return function(e){for(var t=0,r=0;r<w;++r)t+=E[r](e);return t};case X.Ops.Subtract:return function(e){return E[0](e)-E[1](e)};case X.Ops.Clamp:return function(e){var t=E[0](e),r=E[1](e);return t<r||(r=E[2](e))<t?r:t};case X.Ops.Mod:return function(e){return E[0](e)%E[1](e)};case X.Ops.Pow:return function(e){return Math.pow(E[0](e),E[1](e))};case X.Ops.Abs:return function(e){return Math.abs(E[0](e))};case X.Ops.Floor:return function(e){return Math.floor(E[0](e))};case X.Ops.Ceil:return function(e){return Math.ceil(E[0](e))};case X.Ops.Round:return function(e){return Math.round(E[0](e))};case X.Ops.Sin:return function(e){return Math.sin(E[0](e))};case X.Ops.Cos:return function(e){return Math.cos(E[0](e))};case X.Ops.Atan:return 2===w?function(e){return Math.atan2(E[0](e),E[1](e))}:function(e){return Math.atan(E[0](e))};case X.Ops.Sqrt:return function(e){return Math.sqrt(E[0](e))};default:throw new Error("Unsupported numeric operator ".concat(N))}return;case X.Ops.Case:for(var G=e,U=t,I=G.args.length,S=new Array(I),j=0;j<I;++j)S[j]=ee(G.args[j],U);return function(e){for(var t=0;t<I-1;t+=2)if(S[t](e))return S[t+1](e);return S[I-1](e)};case X.Ops.Match:for(var z=e,q=t,x=z.args.length,O=new Array(x),P=0;P<x;++P)O[P]=ee(z.args[P],q);return function(e){for(var t=O[0](e),r=1;r<x;r+=2)if(t===O[r](e))return O[r+1](e);return O[x-1](e)};case X.Ops.Interpolate:for(var H=e,W=t,k=H.args.length,B=new Array(k),T=0;T<k;++T)B[T]=ee(H.args[T],W);return function(e){for(var t,r,n,i,o,a,s,u,l,c,f=B[0](e),h=B[1](e),p=2;p<k;p+=2){var d=B[p](e),g=B[p+1](e),y=Array.isArray(g);if(y&&(g=(0,J.withAlpha)(g)),h<=d)return 2===p?g:y?(y=f,n=h,o=r,s=g,c=l=u=void 0,0==(a=d)-(i=t)?o:(u=(0,J.rgbaToLcha)(o),c=(0,J.rgbaToLcha)(s),180<(l=c[2]-u[2])?l-=360:l<-180&&(l+=360),c=[te(y,n,i,u[0],a,c[0]),te(y,n,i,u[1],a,c[1]),u[2]+te(y,n,i,0,a,l),te(y,n,i,o[3],a,s[3])],(0,J.normalize)((0,J.lchaToRgba)(c)))):te(f,h,t,r,d,g);t=d,r=g}return r};case X.Ops.ToString:for(var M=e,Y=t,y=M.operator,V=M.args.length,K=new Array(V),R=0;R<V;++R)K[R]=ee(M.args[R],Y);if(y!==X.Ops.ToString)throw new Error("Unsupported convert operator ".concat(y));return function(e){e=K[0](e);return M.args[0].type===X.ColorType?(0,J.toString)(e):e.toString()};default:throw new Error("Unsupported operator ".concat(n))}}function te(e,t,r,n,i,o){i-=r;return 0==i?n:(t=t-r,n+(1===e?t/i:(Math.pow(e,t)-1)/(Math.pow(e,i)-1))*(o-n))}},{"../color.js":113,"./expression.js":140}],140:[function(e,D,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StringType=t.SizeType=t.Ops=t.NumberType=t.NumberArrayType=t.NoneType=t.LiteralExpression=t.ColorType=t.CallExpression=t.BooleanType=t.AnyType=void 0,t.computeGeometryType=function e(t){if(!t)return"";var r=t.getType();switch(r){case"Point":case"LineString":case"Polygon":return r;case"MultiPoint":case"MultiLineString":case"MultiPolygon":return r.substring(5);case"Circle":return"Polygon";case"GeometryCollection":return e(t.getGeometries()[0]);default:return""}},t.includesType=j,t.isType=F,t.newParsingContext=function(){return{variables:new Set,properties:new Set,featureId:!1,geometryType:!1,style:{}}},t.overlapsType=Q,t.parse=O,t.typeName=S;var r=e("../array.js"),c=e("../color.js");function l(e,t){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function f(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(f=function(){return!!e})()}function h(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||s(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o,a,s=[],u=!0,l=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=o.call(r)).done)&&(s.push(n.value),s.length!==t);u=!0);}catch(e){l=!0,i=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}(e,t)||s(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,y(n.key),n)}}function o(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){var r,n,i,o,a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(a)return i=!(n=!0),{s:function(){a=a.call(e)},n:function(){var e=a.next();return n=e.done,e},e:function(e){i=!0,r=e},f:function(){try{n||null==a.return||a.return()}finally{if(i)throw r}}};if(Array.isArray(e)||(a=s(e))||t&&e&&"number"==typeof e.length)return a&&(e=a),o=0,{s:t=function(){},n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(e,t){var r;if(e)return"string"==typeof e?u(e,t):"Map"===(r="Object"===(r={}.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(e,t):void 0}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function g(e,t,r){return(t=y(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function y(e){e=function(e,t){if("object"!=p(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=p(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==p(e)?e:e+""}var e=0,A=t.NoneType=0,m=t.BooleanType=1<<e++,v=t.NumberType=1<<e++,b=t.StringType=1<<e++,_=t.ColorType=1<<e++,w=t.NumberArrayType=1<<e++,E=t.SizeType=1<<+e,C=t.AnyType=Math.pow(2,6)-1,I=g(g(g(g(g(g({},m,"boolean"),v,"number"),b,"string"),_,"color"),w,"number[]"),E,"size"),L=Object.keys(I).map(Number).sort(r.ascending);function S(e){var t,r=[],n=d(L);try{for(n.s();!(t=n.n()).done;){var i=t.value;j(e,i)&&r.push(I[i])}}catch(e){n.e(e)}finally{n.f()}return 0===r.length?"untyped":r.length<3?r.join(" or "):r.slice(0,-1).join(", ")+", or "+r[r.length-1]}function j(e,t){return(e&t)===t}function Q(e,t){return!!(e&t)}function F(e,t){return e===t}var x=t.LiteralExpression=o(function e(t,r){a(this,e),this.type=t,this.value=r}),N=t.CallExpression=o(function e(t,r){a(this,e),this.type=t,this.operator=r;for(var n=arguments.length,i=new Array(2<n?n-2:0),o=2;o<n;o++)i[o-2]=arguments[o];this.args=i});function O(e,t,r){switch(p(e)){case"boolean":return new x(m,e);case"number":return new x(r===E?E:v,e);case"string":var n=b;return(0,c.isStringColor)(e)&&(n|=_),(n&r)!==A&&(n&=r),new x(n,e)}if(!Array.isArray(e))throw new Error("Expression must be an array or a primitive value");if(0===e.length)throw new Error("Empty expression");if("string"==typeof e[0]){var i=e,o=r,a=i[0],s=G[a];if(s)return s(i,t,o);throw new Error("Unknown operator: ".concat(a))}var u,l=d(e);try{for(l.s();!(u=l.n()).done;)if("number"!=typeof u.value)throw new Error("Expected an array of numbers")}catch(e){l.e(e)}finally{l.f()}s=w;return 2===e.length?s|=E:3!==e.length&&4!==e.length||(s|=_),r&&(s&=r),new x(s,e)}var e=t.Ops={Get:"get",Var:"var",Concat:"concat",GeometryType:"geometry-type",Any:"any",All:"all",Not:"!",Resolution:"resolution",Zoom:"zoom",Time:"time",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match",Between:"between",Interpolate:"interpolate",Coalesce:"coalesce",Case:"case",In:"in",Number:"number",String:"string",Array:"array",Color:"color",Id:"id",Band:"band",Palette:"palette",ToString:"to-string"},G=(g(g(g(g(g(g(g(g(g(g(r={},e.Get,R(function(e){e=n(e,2),e[0],e=e[1];if(void 0===e)return C;var t=e.value;switch(t){case"string":return b;case"color":return _;case"number":return v;case"boolean":return m;case"number[]":return w;default:throw new Error("Unrecognized type hint: ".concat(t))}},k(1,2),function(e,t){var r=O(e[1],t);if(!(r instanceof x))throw new Error("Expected a literal argument for get operation");if("string"!=typeof r.value)throw new Error("Expected a string argument for get operation");return t.properties.add(r.value),3===e.length?[r,O(e[2],t)]:[r]})),e.Var,R(function(e){return n(e,1)[0].type},k(1,1),function(e,t,r,n){e=e[1];if("string"!=typeof e)throw new Error("Expected a string argument for var operation");if(t.variables.add(e),!("variables"in t.style)||void 0===t.style.variables[e])return[new x(C,e)];t=O(t.style.variables[e],t);if(t.value=e,n&&!(n&t.type))throw new Error("The variable ".concat(e," has type ").concat(S(t.type)," but the following type was expected: ").concat(S(n)));return[t]})),e.Id,R(v|b,P,function(e,t){t.featureId=!0})),e.Concat,R(b,k(2,1/0),B(C))),e.GeometryType,R(b,P,function(e,t){t.geometryType=!0})),e.Resolution,R(v,P)),e.Zoom,R(v,P)),e.Time,R(v,P)),e.Any,R(m,k(2,1/0),B(m))),e.All,R(m,k(2,1/0),B(m))),g(g(g(g(g(g(g(g(g(g(r,e.Not,R(m,k(1,1),B(m))),e.Equal,R(m,k(2,2),B(C),T)),e.NotEqual,R(m,k(2,2),B(C),T)),e.GreaterThan,R(m,k(2,2),B(C),T)),e.GreaterThanOrEqualTo,R(m,k(2,2),B(C),T)),e.LessThan,R(m,k(2,2),B(C),T)),e.LessThanOrEqualTo,R(m,k(2,2),B(C),T)),e.Multiply,R(function(e){for(var t=v|_,r=0;r<e.length;r++)t&=e[r].type;return t},k(2,1/0),B(v|_),T)),e.Coalesce,R(function(e){for(var t=C,r=1;r<e.length;r+=2)t&=e[r].type;return t&e[e.length-1].type},k(2,1/0),B(C),T)),e.Divide,R(v,k(2,2),B(v))),g(g(g(g(g(g(g(g(g(g(r,e.Add,R(v,k(2,1/0),B(v))),e.Subtract,R(v,k(2,2),B(v))),e.Clamp,R(v,k(3,3),B(v))),e.Mod,R(v,k(2,2),B(v))),e.Pow,R(v,k(2,2),B(v))),e.Abs,R(v,k(1,1),B(v))),e.Floor,R(v,k(1,1),B(v))),e.Ceil,R(v,k(1,1),B(v))),e.Round,R(v,k(1,1),B(v))),e.Sin,R(v,k(1,1),B(v))),g(g(g(g(g(g(g(g(g(g(r,e.Cos,R(v,k(1,1),B(v))),e.Atan,R(v,k(1,2),B(v))),e.Sqrt,R(v,k(1,1),B(v))),e.Match,R(function(e){for(var t=C,r=2;r<e.length;r+=2)t&=e[r].type;return t&e[e.length-1].type},k(4,1/0),M,function(e,t,r,n){for(var i=e.length-1,o=O(e[1],t).type,a=O(e[e.length-1],t),s=void 0!==n?n&a.type:a.type,u=new Array(i-2),l=0;l<i-2;l+=2){var c=O(e[l+2],t),f=O(e[l+3],t);o&=c.type,s&=f.type,u[l]=c,u[l+1]=f}n=b|v|m;if(!(n&o))throw new Error("Expected an input of type ".concat(S(n)," for the interpolate operation")+", got ".concat(S(o)," instead"));if(o&=n,s===A)throw new Error("Could not find a common output type for the following match operation: "+JSON.stringify(e));for(var h=0;h<i-2;h+=2){var p=O(e[h+2],t,o),d=O(e[h+3],t,s);u[h]=p,u[h+1]=d}return[O(e[1],t,o)].concat(u,[O(e[e.length-1],t,s)])})),e.Between,R(m,k(3,3),B(v))),e.Interpolate,R(function(e){for(var t=_|v,r=3;r<e.length;r+=2)t&=e[r].type;return t},k(6,1/0),M,function(e,t,r,n){var i,o=e[1];switch(o[0]){case"linear":i=1;break;case"exponential":if("number"!=typeof(i=o[1]))throw new Error("Expected a number base for exponential interpolation"+", got ".concat(JSON.stringify(i)," instead"));break;default:i=null}if(!i)throw new Error("Invalid interpolation type: ".concat(JSON.stringify(o)));i=O(i,t);var a=O(e[2],t);if(!(v&a.type))throw new Error("Expected an input of type number for the interpolate operation"+", got ".concat(S(a.type)," instead"));a=O(e[2],t,v);for(var s=new Array(e.length-3),u=0;u<s.length;u+=2){var l=O(e[u+3],t);if(!(v&l.type))throw new Error("Expected all stop input values in the interpolate operation to be of type number"+", got ".concat(S(l.type)," at position ").concat(u+2," instead"));var c=O(e[u+4],t);if(!((v|_)&c.type))throw new Error("Expected all stop output values in the interpolate operation to be a number or color"+", got ".concat(S(c.type)," at position ").concat(u+3," instead"));l=O(e[u+3],t,v),c=O(e[u+4],t,v|_),s[u]=l,s[u+1]=c}return[i,a].concat(s)})),e.Case,R(function(e){for(var t=C,r=1;r<e.length;r+=2)t&=e[r].type;return t&e[e.length-1].type},k(3,1/0),function(e,t){var r=e[0],e=e.length-1;if(e%2==0)throw new Error("An odd amount of arguments was expected for operation ".concat(r,", got ").concat(JSON.stringify(e)," instead"))},function(e,t,r,n){for(var i=O(e[e.length-1],t,n),o=void 0!==n?n&i.type:i.type,a=new Array(e.length-1),s=0;s<a.length-1;s+=2){var u=O(e[s+1],t),l=O(e[s+2],t,n);if(!(m&u.type))throw new Error("Expected all conditions in the case operation to be of type boolean"+", got ".concat(S(u.type)," at position ").concat(s," instead"));o&=l.type,a[s]=u,a[s+1]=l}if(o===A)throw new Error("Could not find a common output type for the following case operation: "+JSON.stringify(e));for(var c=0;c<a.length-1;c+=2)a[c+1]=O(e[c+2],t,o);return a[a.length-1]=O(e[e.length-1],t,o),a})),e.In,R(m,k(2,2),function(e,t){var r=e[2];if(!Array.isArray(r))throw new Error('The "in" operator was provided a literal value which was not an array as second argument.');if("string"==typeof r[0]){if("literal"!==r[0])throw new Error('For the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions.');if(!Array.isArray(r[1]))throw new Error('The "in" operator was provided a literal value which was not an array as second argument.');r=r[1]}for(var n=b|v,i=new Array(r.length),o=0;o<i.length;o++){var a=O(r[o],t);n&=a.type,i[o]=a}if(n===A)throw new Error("Could not find a common type for the following in operation: "+JSON.stringify(e));return[O(e[1],t,n)].concat(i)})),e.Number,R(v,k(1,1/0),B(C))),e.String,R(b,k(1,1/0),B(C))),g(g(g(g(g(r,e.Array,R(function(e){return 2===e.length?w|E:3===e.length||4===e.length?w|_:w},k(1,1/0),B(v))),e.Color,R(_,k(1,4),B(v))),e.Band,R(v,k(1,3),B(v))),e.Palette,R(_,k(2,2),function(e,t){var r=O(e[1],t,v);if(r.type!==v)throw new Error("The first argument of palette must be an number, got ".concat(S(r.type)," instead"));var n=e[2];if(!Array.isArray(n))throw new Error("The second argument of palette must be an array");for(var i=new Array(n.length),o=0;o<i.length;o++){var a=O(n[o],t,_);if(!(a instanceof x))throw new Error("The palette color at index ".concat(o," must be a literal value"));if(!(a.type&_))throw new Error("The palette color at index ".concat(o," should be of type color, got ").concat(S(a.type)," instead"));i[o]=a}return[r].concat(i)})),e.ToString,R(b,k(1,1),B(m|v|b|_))));function P(e,t){var r=e[0];if(1!==e.length)throw new Error("Expected no arguments for ".concat(r," operation"));return[]}function k(i,o){return function(e,t){var r,n=e[0],e=e.length-1;if(i===o){if(e!==i)throw r=1===i?"":"s",new Error("Expected ".concat(i," argument").concat(r," for ").concat(n,", got ").concat(e))}else if(e<i||o<e)throw r=o===1/0?"".concat(i," or more"):"".concat(i," to ").concat(o),new Error("Expected ".concat(r," arguments for ").concat(n,", got ").concat(e))}}function B(l){return function(e,t){for(var r=e[0],n=e.length-1,i=new Array(n),o=0;o<n;++o){var a,s,u=O(e[o+1],t);if(!(l&u.type))throw a=S(l),s=S(u.type),new Error("Unexpected type for argument ".concat(o," of ").concat(r," operation")+", got ".concat(a," but expected ").concat(s));u.type&=l,i[o]=u}return i}}function T(e,t,r){for(var n=e[0],i=e.length-1,o=C,a=0;a<r.length;++a)o&=r[a].type;if(o===A)throw new Error("No common type could be found for arguments of ".concat(n," operation"));for(var s=new Array(i),u=0;u<i;++u)s[u]=O(e[u+1],t,o);return s}function M(e,t){var r=e[0],e=e.length-1;if(e%2==1)throw new Error("An even amount of arguments was expected for operation ".concat(r,", got ").concat(JSON.stringify(e)," instead"))}function R(s){for(var e=arguments.length,u=new Array(1<e?e-1:0),t=1;t<e;t++)u[t-1]=arguments[t];return function(e,t,r){for(var n=e[0],i=[],o=0;o<u.length;o++)i=u[o](e,t,i,r)||i;var a="function"==typeof s?s(i):s;if(void 0!==r){if(!(a&r))throw new Error("The following expression was expected to return ".concat(S(r),", but returns ").concat(S(a)," instead: ").concat(JSON.stringify(e)));a&=r}if(a===A)throw new Error("No matching type was found for the following expression: ".concat(JSON.stringify(e)));return function(e,t,r){var n;return f()?Reflect.construct.apply(null,arguments):((n=[null]).push.apply(n,t),t=new(e.bind.apply(e,n)),r&&l(t,r.prototype),t)}(N,[a,n].concat(h(i)))}}},{"../array.js":110,"../color.js":113}],141:[function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.PALETTE_TEXTURE_ARRAY=void 0,r.arrayToGlsl=m,r.buildExpression=function(e,t,r,n){e=(0,f.parse)(e,r,t);if((0,f.isType)(e.type,f.NoneType))throw new Error("No matching type was found");if((0,f.overlapsType)(t,e.type))return O(e,t,n);r=(0,f.typeName)(t),n=(0,f.typeName)(e.type);throw new Error("Expected expression to be of type ".concat(r,", got ").concat(n))},r.colorToGlsl=v,r.getStringNumberEquivalent=E,r.newCompilationContext=function(){return{inFragmentShader:!1,variables:{},properties:{},functions:{},bandCount:0,style:{}}},r.numberToGlsl=A,r.sizeToGlsl=b,r.stringToGlsl=C,r.uniformNameForVariable=I;var i,c=(i=e("../webgl/PaletteTexture.js"))&&i.__esModule?i:{default:i},f=e("./expression.js"),l=e("../renderer/webgl/TileLayer.js"),h=e("../color.js"),o=e("../size.js");function a(e,t,r){return(t=function(e){e=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==n(e)?e:e+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p(e){return y(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||u(e)||s()}function d(e,t){return y(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o,a,s=[],u=!0,l=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=o.call(r)).done)&&(s.push(n.value),s.length!==t);u=!0);}catch(e){l=!0,i=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}(e,t)||u(e,t)||s()}function s(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(e,t){var r;if(e)return"string"==typeof e?g(e,t):"Map"===(r="Object"===(r={}.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?g(e,t):void 0}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function y(e){if(Array.isArray(e))return e}function A(e){e=e.toString();return e.includes(".")?e:e+".0"}function m(e){if(e.length<2||4<e.length)throw new Error("`formatArray` can only output `vec2`, `vec3` or `vec4` arrays.");return"vec".concat(e.length,"(").concat(e.map(A).join(", "),")")}function v(e){var e=(0,h.asArray)(e),t=3<e.length?e[3]:1;return m([e[0]/255*t,e[1]/255*t,e[2]/255*t,t])}function b(e){return m((0,o.toSize)(e))}var _={},w=0;function E(e){return e in _||(_[e]=w++),_[e]}function C(e){return A(E(e))}function I(e){return"u_var_"+e}var S="getBandValue";r.PALETTE_TEXTURE_ARRAY="u_paletteTextures";function j(a){return function(e,t,r){for(var n=t.args.length,i=new Array(n),o=0;o<n;++o)i[o]=O(t.args[o],r,e);return a(i,e)}}a(a(a(a(a(a(a(a(a(a(i={},f.Ops.Get,function(e,t){var r=t.args[0].value;return r in e.properties||(e.properties[r]={name:r,type:t.type}),(e.inFragmentShader?"v_prop_":"a_prop_")+r}),f.Ops.GeometryType,function(e,t,r){return"geometryType"in e.properties||(e.properties.geometryType={name:"geometryType",type:f.StringType,evaluator:function(e){return(0,f.computeGeometryType)(e.getGeometry())}}),(e.inFragmentShader?"v_prop_":"a_prop_")+"geometryType"}),f.Ops.Var,function(e,t){var r=t.args[0].value;return r in e.variables||(e.variables[r]={name:r,type:t.type}),I(r)}),f.Ops.Resolution,function(){return"u_resolution"}),f.Ops.Zoom,function(){return"u_zoom"}),f.Ops.Time,function(){return"u_time"}),f.Ops.Any,j(function(e){return"(".concat(e.join(" || "),")")})),f.Ops.All,j(function(e){return"(".concat(e.join(" && "),")")})),f.Ops.Not,j(function(e){e=d(e,1)[0];return"(!".concat(e,")")})),f.Ops.Equal,j(function(e){var e=d(e,2),t=e[0],e=e[1];return"(".concat(t," == ").concat(e,")")})),a(a(a(a(a(a(a(a(a(a(i,f.Ops.NotEqual,j(function(e){var e=d(e,2),t=e[0],e=e[1];return"(".concat(t," != ").concat(e,")")})),f.Ops.GreaterThan,j(function(e){var e=d(e,2),t=e[0],e=e[1];return"(".concat(t," > ").concat(e,")")})),f.Ops.GreaterThanOrEqualTo,j(function(e){var e=d(e,2),t=e[0],e=e[1];return"(".concat(t," >= ").concat(e,")")})),f.Ops.LessThan,j(function(e){var e=d(e,2),t=e[0],e=e[1];return"(".concat(t," < ").concat(e,")")})),f.Ops.LessThanOrEqualTo,j(function(e){var e=d(e,2),t=e[0],e=e[1];return"(".concat(t," <= ").concat(e,")")})),f.Ops.Multiply,j(function(e){return"(".concat(e.join(" * "),")")})),f.Ops.Divide,j(function(e){var e=d(e,2),t=e[0],e=e[1];return"(".concat(t," / ").concat(e,")")})),f.Ops.Add,j(function(e){return"(".concat(e.join(" + "),")")})),f.Ops.Subtract,j(function(e){var e=d(e,2),t=e[0],e=e[1];return"(".concat(t," - ").concat(e,")")})),f.Ops.Clamp,j(function(e){var e=d(e,3),t=e[0],r=e[1],e=e[2];return"clamp(".concat(t,", ").concat(r,", ").concat(e,")")})),a(a(a(a(a(a(a(a(a(a(i,f.Ops.Mod,j(function(e){var e=d(e,2),t=e[0],e=e[1];return"mod(".concat(t,", ").concat(e,")")})),f.Ops.Pow,j(function(e){var e=d(e,2),t=e[0],e=e[1];return"pow(".concat(t,", ").concat(e,")")})),f.Ops.Abs,j(function(e){e=d(e,1)[0];return"abs(".concat(e,")")})),f.Ops.Floor,j(function(e){e=d(e,1)[0];return"floor(".concat(e,")")})),f.Ops.Ceil,j(function(e){e=d(e,1)[0];return"ceil(".concat(e,")")})),f.Ops.Round,j(function(e){e=d(e,1)[0];return"floor(".concat(e," + 0.5)")})),f.Ops.Sin,j(function(e){e=d(e,1)[0];return"sin(".concat(e,")")})),f.Ops.Cos,j(function(e){e=d(e,1)[0];return"cos(".concat(e,")")})),f.Ops.Atan,j(function(e){var e=d(e,2),t=e[0],e=e[1];return void 0!==e?"atan(".concat(t,", ").concat(e,")"):"atan(".concat(t,")")})),f.Ops.Sqrt,j(function(e){e=d(e,1)[0];return"sqrt(".concat(e,")")}));var x=a(a(a(a(a(a(a(a(a(i,f.Ops.Match,j(function(e){for(var t=e[0],r=e[e.length-1],n=null,i=e.length-3;1<=i;i-=2)var o=e[i],a=e[i+1],n="(".concat(t," == ").concat(o," ? ").concat(a," : ").concat(n||r,")");return n})),f.Ops.Between,j(function(e){var e=d(e,3),t=e[0],r=e[1],e=e[2];return"(".concat(t," >= ").concat(r," && ").concat(t," <= ").concat(e,")")})),f.Ops.Interpolate,j(function(e){for(var e=p(e),t=e[0],r=e[1],n=e.slice(2),i="",o=0;o<n.length-2;o+=2)var a=n[o],s=i||n[o+1],u=n[o+2],l=n[o+3],u=t===A(1)?"(".concat(r," - ").concat(a,") / (").concat(u," - ").concat(a,")"):"(pow(".concat(t,", (").concat(r," - ").concat(a,")) - 1.0) / (pow(").concat(t,", (").concat(u," - ").concat(a,")) - 1.0)"),i="mix(".concat(s,", ").concat(l,", clamp(").concat(u,", 0.0, 1.0))");return i})),f.Ops.Case,j(function(e){for(var t=e[e.length-1],r=null,n=e.length-3;0<=n;n-=2)var i=e[n],o=e[n+1],r="(".concat(i," ? ").concat(o," : ").concat(r||t,")");return r})),f.Ops.In,j(function(e,t){for(var e=p(e),r=e[0],n=e.slice(1),e=(e=t,"operator_".concat("in","_").concat(Object.keys(e.functions).length)),i=[],o=0;o<n.length;o+=1)i.push("  if (inputValue == ".concat(n[o],") { return true; }"));return t.functions[e]="bool ".concat(e,"(float inputValue) {\n").concat(i.join("\n"),"\n  return false;\n}"),"".concat(e,"(").concat(r,")")})),f.Ops.Array,j(function(e){return"vec".concat(e.length,"(").concat(e.join(", "),")")})),f.Ops.Color,j(function(e){var t;return 1===e.length?"vec4(vec3(".concat(e[0]," / 255.0), 1.0)"):2===e.length?"(".concat(e[1]," * vec4(vec3(").concat(e[0]," / 255.0), 1.0))"):(t=e.slice(0,3).map(function(e){return"".concat(e," / 255.0")}),3===e.length?"vec4(".concat(t.join(", "),", 1.0)"):(e=e[3],"(".concat(e," * vec4(").concat(t.join(", "),", 1.0))")))})),f.Ops.Band,j(function(e,t){var e=d(e,3),r=e[0],n=e[1],e=e[2];if(!(S in t.functions)){for(var i="",o=t.bandCount||1,a=0;a<o;a++){var s=Math.floor(a/4),u=a%4,s=(a===o-1&&1===u&&(u=3),"".concat(l.Uniforms.TILE_TEXTURE_ARRAY,"[").concat(s,"]"));i+="  if (band == ".concat(a+1,".0) {\n    return texture2D(").concat(s,", v_textureCoord + vec2(dx, dy))[").concat(u,"];\n  }\n")}t.functions[S]="float getBandValue(float band, float xOffset, float yOffset) {\n  float dx = xOffset / ".concat(l.Uniforms.TEXTURE_PIXEL_WIDTH,";\n  float dy = yOffset / ").concat(l.Uniforms.TEXTURE_PIXEL_HEIGHT,";\n").concat(i,"\n}")}return"".concat(S,"(").concat(r,", ").concat(null!=n?n:"0.0",", ").concat(null!=e?e:"0.0",")")})),f.Ops.Palette,function(e,t){for(var t=p(t.args),r=t[0],n=t.slice(1),t=n.length,i=new Uint8Array(4*t),o=0;o<n.length;o++){var a=n[o].value,a=(0,h.asArray)(a),s=4*o;i[s]=a[0],i[1+s]=a[1],i[2+s]=a[2],i[3+s]=255*a[3]}e.paletteTextures||(e.paletteTextures=[]);var u="".concat("u_paletteTextures","[").concat(e.paletteTextures.length,"]"),l=new c.default(u,i),l=(e.paletteTextures.push(l),O(r,f.NumberType,e));return"texture2D(".concat(u,", vec2((").concat(l," + 0.5) / ").concat(t,".0, 0.5))")});function O(e,t,r){if(e instanceof f.CallExpression){var n=x[e.operator];if(void 0===n)throw new Error("No compiler defined for this operator: ".concat(JSON.stringify(e.operator)));return n(r,e,t)}if(0<(e.type&f.NumberType))return A(e.value);if(0<(e.type&f.BooleanType))return e.value.toString();if(0<(e.type&f.StringType))return C(e.value.toString());if(0<(e.type&f.ColorType))return v(e.value);if(0<(e.type&f.NumberArrayType))return m(e.value);if(0<(e.type&f.SizeType))return b(e.value);throw new Error("Unexpected expression ".concat(e.value," (expected type ").concat((0,f.typeName)(t),")"))}},{"../color.js":113,"../renderer/webgl/TileLayer.js":325,"../size.js":337,"../webgl/PaletteTexture.js":411,"./expression.js":140}],142:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.applyTransform=function(e,t,r,n){if(S(e))return g(r);var i=[];if(1<n)for(var o=e[2]-e[0],a=e[3]-e[1],s=0;s<n;++s)i.push(e[0]+o*s/n,e[1],e[2],e[1]+a*s/n,e[2]-o*s/n,e[3],e[0],e[3]-a*s/n);else i=[e[0],e[1],e[2],e[1],e[2],e[3],e[0],e[3]];t(i,i,2);for(var u=[],l=[],c=0,f=i.length;c<f;c+=2)u.push(i[c]),l.push(i[c+1]);return function(e,t,r){return h(Math.min.apply(null,e),Math.min.apply(null,t),Math.max.apply(null,e),Math.max.apply(null,t),r)}(u,l,r)},r.approximatelyEquals=function(e,t,r){return Math.abs(e[0]-t[0])<r&&Math.abs(e[2]-t[2])<r&&Math.abs(e[1]-t[1])<r&&Math.abs(e[3]-t[3])<r},r.boundingExtent=function(e){for(var t=i(),r=0,n=e.length;r<n;++r)o(t,e[r]);return t},r.buffer=function(e,t,r){return r?(r[0]=e[0]-t,r[1]=e[1]-t,r[2]=e[2]+t,r[3]=e[3]+t,r):[e[0]-t,e[1]-t,e[2]+t,e[3]+t]},r.clone=function(e,t){return t?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t):e.slice()},r.closestSquaredDistanceXY=function(e,t,r){return(t=t<e[0]?e[0]-t:e[2]<t?t-e[2]:0)*t+(t=r<e[1]?e[1]-r:e[3]<r?r-e[3]:0)*t},r.containsCoordinate=function(e,t){return n(e,t[0],t[1])},r.containsExtent=function(e,t){return e[0]<=t[0]&&t[2]<=e[2]&&e[1]<=t[1]&&t[3]<=e[3]},r.containsXY=n,r.coordinateRelationship=d,r.createEmpty=i,r.createOrUpdate=h,r.createOrUpdateEmpty=g,r.createOrUpdateFromCoordinate=function(e,t){var r=e[0],e=e[1];return h(r,e,r,e,t)},r.createOrUpdateFromCoordinates=function(e,t){return a(g(t),e)},r.createOrUpdateFromFlatCoordinates=function(e,t,r,n,i){return s(g(i),e,t,r,n)},r.createOrUpdateFromRings=function(e,t){return u(g(t),e)},r.equals=function(e,t){return e[0]==t[0]&&e[2]==t[2]&&e[1]==t[1]&&e[3]==t[3]},r.extend=function(e,t){return t[0]<e[0]&&(e[0]=t[0]),t[2]>e[2]&&(e[2]=t[2]),t[1]<e[1]&&(e[1]=t[1]),t[3]>e[3]&&(e[3]=t[3]),e},r.extendCoordinate=o,r.extendCoordinates=a,r.extendFlatCoordinates=s,r.extendRings=u,r.extendXY=c,r.forEachCorner=function(e,t){return t(y(e))||(t(A(e))||t(E(e)))||t(w(e))||!1},r.getArea=f,r.getBottomLeft=y,r.getBottomRight=A,r.getCenter=m,r.getCorner=function(e,t){var r;if("bottom-left"===t)r=y(e);else if("bottom-right"===t)r=A(e);else if("top-left"===t)r=w(e);else{if("top-right"!==t)throw new Error("Invalid corner");r=E(e)}return r},r.getEnlargedArea=function(e,t){var r=Math.min(e[0],t[0]),n=Math.min(e[1],t[1]);return(Math.max(e[2],t[2])-r)*(Math.max(e[3],t[3])-n)},r.getForViewAndSize=function(e,t,r,n,i){var e=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o,a,s=[],u=!0,l=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=o.call(r)).done)&&(s.push(n.value),s.length!==t);u=!0);}catch(e){l=!0,i=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}(e,t)||function(e,t){{var r;if(e)return"string"==typeof e?l(e,t):"Map"===(r="Object"===(r={}.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(v(e,t,r,n),8),t=e[0],r=e[1],n=e[2],o=e[3],a=e[4],s=e[5],u=e[6],e=e[7];return h(Math.min(t,n,a,u),Math.min(r,o,s,e),Math.max(t,n,a,u),Math.max(r,o,s,e),i)},r.getHeight=b,r.getIntersection=_,r.getIntersectionArea=function(e,t){return f(_(e,t))},r.getMargin=function(e){return C(e)+b(e)},r.getRotatedViewport=v,r.getSize=function(e){return[e[2]-e[0],e[3]-e[1]]},r.getTopLeft=w,r.getTopRight=E,r.getWidth=C,r.intersects=I,r.intersectsSegment=function(e,t,r){var n=!1,i=d(e,t),o=d(e,r);{var a,s,u,l,c,f,h;i===p.default.INTERSECTING||o===p.default.INTERSECTING?n=!0:(u=e[0],l=e[1],c=e[2],e=e[3],f=t[0],t=t[1],h=r[0],r=r[1],t=(r-t)/(h-f),(n=(n=(n=o&p.default.ABOVE&&!(i&p.default.ABOVE)?(a=h-(r-e)/t)>=u&&a<=c:n)||!(o&p.default.RIGHT)||i&p.default.RIGHT?n:(s=r-(h-c)*t)>=l&&s<=e)||!(o&p.default.BELOW)||i&p.default.BELOW?n:(a=h-(r-l)/t)>=u&&a<=c)||!(o&p.default.LEFT)||i&p.default.LEFT||(n=(s=r-(h-u)*t)>=l&&s<=e))}return n},r.isEmpty=S,r.returnOrUpdate=function(e,t){return t?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t):e},r.scaleFromCenter=function(e,t){var r=(e[2]-e[0])/2*(t-1),t=(e[3]-e[1])/2*(t-1);e[0]-=r,e[2]+=r,e[1]-=t,e[3]+=t},r.wrapAndSliceX=function(e,t,r){if(t.canWrapX()){var n=t.getExtent();if(!isFinite(e[0])||!isFinite(e[2]))return[[n[0],e[1],n[2],e[3]]];j(e,t);t=C(n);if(C(e)>t&&!r)return[[n[0],e[1],n[2],e[3]]];if(e[0]<n[0])return[[e[0]+t,e[1],n[2],e[3]],[n[0],e[1],e[2],e[3]]];if(e[2]>n[2])return[[e[0],e[1],n[2],e[3]],[n[0],e[1],e[2]-t,e[3]]]}return[e]},r.wrapX=j;var p=(r=e("./extent/Relationship.js"))&&r.__esModule?r:{default:r};function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function n(e,t,r){return e[0]<=t&&t<=e[2]&&e[1]<=r&&r<=e[3]}function d(e,t){var r=e[0],n=e[1],i=e[2],e=e[3],o=t[0],t=t[1],a=p.default.UNKNOWN;return o<r?a|=p.default.LEFT:i<o&&(a|=p.default.RIGHT),t<n?a|=p.default.BELOW:e<t&&(a|=p.default.ABOVE),a=a===p.default.UNKNOWN?p.default.INTERSECTING:a}function i(){return[1/0,1/0,-1/0,-1/0]}function h(e,t,r,n,i){return i?(i[0]=e,i[1]=t,i[2]=r,i[3]=n,i):[e,t,r,n]}function g(e){return h(1/0,1/0,-1/0,-1/0,e)}function o(e,t){t[0]<e[0]&&(e[0]=t[0]),t[0]>e[2]&&(e[2]=t[0]),t[1]<e[1]&&(e[1]=t[1]),t[1]>e[3]&&(e[3]=t[1])}function a(e,t){for(var r=0,n=t.length;r<n;++r)o(e,t[r]);return e}function s(e,t,r,n,i){for(;r<n;r+=i)c(e,t[r],t[r+1]);return e}function u(e,t){for(var r=0,n=t.length;r<n;++r)a(e,t[r]);return e}function c(e,t,r){e[0]=Math.min(e[0],t),e[1]=Math.min(e[1],r),e[2]=Math.max(e[2],t),e[3]=Math.max(e[3],r)}function f(e){var t=0;return t=S(e)?t:C(e)*b(e)}function y(e){return[e[0],e[1]]}function A(e){return[e[2],e[1]]}function m(e){return[(e[0]+e[2])/2,(e[1]+e[3])/2]}function v(e,t,r,n){var i=t*n[0]/2,t=t*n[1]/2,n=Math.cos(r),r=Math.sin(r),o=i*n,i=i*r,n=t*n,t=t*r,r=e[0],e=e[1];return[r-o+t,e-i-n,r-o-t,e-i+n,r+o-t,e+i+n,r+o+t,e+i-n,r-o+t,e-i-n]}function b(e){return e[3]-e[1]}function _(e,t,r){r=r||i();return I(e,t)?(e[0]>t[0]?r[0]=e[0]:r[0]=t[0],e[1]>t[1]?r[1]=e[1]:r[1]=t[1],e[2]<t[2]?r[2]=e[2]:r[2]=t[2],e[3]<t[3]?r[3]=e[3]:r[3]=t[3]):g(r),r}function w(e){return[e[0],e[3]]}function E(e){return[e[2],e[3]]}function C(e){return e[2]-e[0]}function I(e,t){return e[0]<=t[2]&&e[2]>=t[0]&&e[1]<=t[3]&&e[3]>=t[1]}function S(e){return e[2]<e[0]||e[3]<e[1]}function j(e,t){var r=t.getExtent(),n=m(e);return t.canWrapX()&&(n[0]<r[0]||n[0]>=r[2])&&(t=C(r),n=Math.floor((n[0]-r[0])/t)*t,e[0]-=n,e[2]-=n),e}},{"./extent/Relationship.js":143}],143:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;r.default={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16}},{}],144:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.loadFeaturesXhr=c,r.setWithCredentials=function(e){l=e},r.xhr=function(a,s){return function(e,t,r,n,i){var o=this;c(a,s,e,t,r,function(e,t){o.addFeatures(e),void 0!==n&&n(e)},i||u.VOID)}};var u=e("./functions.js"),l=!1;function c(e,n,i,t,o,a,s){var u=new XMLHttpRequest;u.open("GET","function"==typeof e?e(i,t,o):e,!0),"arraybuffer"==n.getType()&&(u.responseType="arraybuffer"),u.withCredentials=l,u.onload=function(e){if(!u.status||200<=u.status&&u.status<300){var t,r=n.getType();try{"text"==r||"json"==r?t=u.responseText:"xml"==r?t=u.responseXML||u.responseText:"arraybuffer"==r&&(t=u.response),t?a(n.readFeatures(t,{extent:i,featureProjection:o}),n.readProjection(t)):s()}catch(e){s()}}else s()},u.onerror=s,u.send()}},{"./functions.js":200}],145:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"EsriJSON",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(r,"GML",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(r,"GPX",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(r,"GeoJSON",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(r,"IGC",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(r,"IIIFInfo",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(r,"KML",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(r,"MVT",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(r,"OWS",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(r,"Polyline",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(r,"TopoJSON",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(r,"WFS",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(r,"WKB",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(r,"WKT",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(r,"WMSCapabilities",{enumerable:!0,get:function(){return A.default}}),Object.defineProperty(r,"WMSGetFeatureInfo",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(r,"WMTSCapabilities",{enumerable:!0,get:function(){return v.default}});var n=b(e("./format/EsriJSON.js")),i=b(e("./format/GeoJSON.js")),o=b(e("./format/GML.js")),a=b(e("./format/GPX.js")),s=b(e("./format/IGC.js")),u=b(e("./format/IIIFInfo.js")),l=b(e("./format/KML.js")),c=b(e("./format/MVT.js")),f=b(e("./format/OWS.js")),h=b(e("./format/Polyline.js")),p=b(e("./format/TopoJSON.js")),d=b(e("./format/WFS.js")),g=b(e("./format/WKB.js")),y=b(e("./format/WKT.js")),A=b(e("./format/WMSCapabilities.js")),m=b(e("./format/WMSGetFeatureInfo.js")),v=b(e("./format/WMTSCapabilities.js"));function b(e){return e&&e.__esModule?e:{default:e}}},{"./format/EsriJSON.js":146,"./format/GML.js":148,"./format/GPX.js":153,"./format/GeoJSON.js":154,"./format/IGC.js":155,"./format/IIIFInfo.js":156,"./format/KML.js":158,"./format/MVT.js":159,"./format/OWS.js":160,"./format/Polyline.js":161,"./format/TopoJSON.js":163,"./format/WFS.js":164,"./format/WKB.js":165,"./format/WKT.js":166,"./format/WMSCapabilities.js":167,"./format/WMSGetFeatureInfo.js":168,"./format/WMTSCapabilities.js":169}],146:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=v(e("../Feature.js")),a=v(e("./JSONFeature.js")),n=v(e("../geom/LineString.js")),c=v(e("../geom/LinearRing.js")),s=v(e("../geom/MultiLineString.js")),u=v(e("../geom/MultiPoint.js")),l=v(e("../geom/MultiPolygon.js")),f=v(e("../geom/Point.js")),h=v(e("../geom/Polygon.js")),p=e("../extent.js"),d=e("../geom/flat/deflate.js"),g=e("../proj.js"),y=e("../obj.js"),A=e("../geom/flat/orient.js"),m=e("./Feature.js");function v(e){return e&&e.__esModule?e:{default:e}}function b(e,t,r){return(t=w(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,w(n.key),n)}}function w(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}function E(e,t,r){t=I(t);var n=e,t=C()?Reflect.construct(t,r||[],I(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function C(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(C=function(){return!!e})()}function I(e){return(I=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e,t){return(S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var j={Point:function(e){return void 0!==e.m&&void 0!==e.z?new f.default([e.x,e.y,e.z,e.m],"XYZM"):void 0!==e.z?new f.default([e.x,e.y,e.z],"XYZ"):void 0!==e.m?new f.default([e.x,e.y,e.m],"XYM"):new f.default([e.x,e.y])},LineString:function(e){var t=P(e);return new n.default(e.paths[0],t)},Polygon:function(e){var t=P(e);return new h.default(e.rings,t)},MultiPoint:function(e){var t=P(e);return new u.default(e.points,t)},MultiLineString:function(e){var t=P(e);return new s.default(e.paths,t)},MultiPolygon:function(e){var t=P(e);return new l.default(e.rings,t)}},x={Point:function(e,t){var r,n=e.getCoordinates(),e=e.getLayout();if("XYZ"===e)r={x:n[0],y:n[1],z:n[2]};else if("XYM"===e)r={x:n[0],y:n[1],m:n[2]};else if("XYZM"===e)r={x:n[0],y:n[1],z:n[2],m:n[3]};else{if("XY"!==e)throw new Error("Invalid geometry layout");r={x:n[0],y:n[1]}}return r},LineString:function(e,t){var r=k(e);return{hasZ:r.hasZ,hasM:r.hasM,paths:[e.getCoordinates()]}},Polygon:function(e,t){var r=k(e);return{hasZ:r.hasZ,hasM:r.hasM,rings:e.getCoordinates(!1)}},MultiPoint:function(e,t){var r=k(e);return{hasZ:r.hasZ,hasM:r.hasM,points:e.getCoordinates()}},MultiLineString:function(e,t){var r=k(e);return{hasZ:r.hasZ,hasM:r.hasM,paths:e.getCoordinates()}},MultiPolygon:function(e,t){for(var r=k(e),n=e.getCoordinates(!1),i=[],o=0;o<n.length;o++)for(var a=n[o].length-1;0<=a;a--)i.push(n[o][a]);return{hasZ:r.hasZ,hasM:r.hasM,rings:i}}},e=function(){function r(e){var t;if(this instanceof r)return e=e||{},(t=E(this,r)).geometryName_=e.geometryName,t;throw new TypeError("Cannot call a class as a function")}var e,t=r,n=a.default;if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&S(t,n),t=r,(n=[{key:"readFeatureFromObject",value:function(e,t,r){var t=O(e.geometry,t),n=new o.default;return this.geometryName_&&n.setGeometryName(this.geometryName_),n.setGeometry(t),e.attributes&&(n.setProperties(e.attributes,!0),void 0!==(t=e.attributes[r]))&&n.setId(t),n}},{key:"readFeaturesFromObject",value:function(e,t){if(t=t||{},e.features){for(var r=[],n=e.features,i=0,o=n.length;i<o;++i)r.push(this.readFeatureFromObject(n[i],t,e.objectIdFieldName));return r}return[this.readFeatureFromObject(e,t)]}},{key:"readGeometryFromObject",value:O},{key:"readProjectionFromObject",value:function(e){return e.spatialReference&&void 0!==e.spatialReference.wkid?(e=e.spatialReference.wkid,(0,g.get)("EPSG:"+e)):null}},{key:"writeGeometryObject",value:function(e,t){return B(e,this.adaptOptions(t))}},{key:"writeFeatureObject",value:function(e,t){t=this.adaptOptions(t);var r,n,i={};return e.hasProperties()?(r=e.getProperties(),(n=e.getGeometry())&&(i.geometry=B(n,t),(n=t&&(t.dataProjection||t.featureProjection))&&(i.geometry.spatialReference={wkid:Number((0,g.get)(n).getCode().split(":").pop())}),delete r[e.getGeometryName()]),(0,y.isEmpty)(r)?i.attributes={}:i.attributes=r):i.attributes={},i}},{key:"writeFeaturesObject",value:function(e,t){t=this.adaptOptions(t);for(var r=[],n=0,i=e.length;n<i;++n)r.push(this.writeFeatureObject(e[n],t));return{features:r}}}])&&_(t.prototype,n),e&&_(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();function O(e,t){var r,n,i;return e?("number"==typeof e.x&&"number"==typeof e.y?r="Point":e.points?r="MultiPoint":e.paths?r=1===e.paths.length?"LineString":"MultiLineString":e.rings&&(n=P(i=e),e=1===(i=function(e,t){var r,n,i=[],o=[],a=[];for(r=0,n=e.length;r<n;++r)(i.length=0,d.deflateCoordinates)(i,0,e[r],t.length),(0,A.linearRingIsClockwise)(i,0,i.length,t.length)?o.push([e[r]]):a.push(e[r]);for(;a.length;){var s=a.shift(),u=!1;for(r=o.length-1;0<=r;r--){var l=o[r][0];if((0,p.containsExtent)(new c.default(l).getExtent(),new c.default(s).getExtent())){o[r].push(s),u=!0;break}}u||o.push([s.reverse()])}return o}(i.rings,n)).length?(r="Polygon",Object.assign({},e,b({},"rings",i[0]))):(r="MultiPolygon",Object.assign({},e,b({},"rings",i)))),(0,m.transformGeometryWithOptions)((0,j[r])(e),!1,t)):null}function P(e){var t="XY";return!0===e.hasZ&&!0===e.hasM?t="XYZM":!0===e.hasZ?t="XYZ":!0===e.hasM&&(t="XYM"),t}function k(e){e=e.getLayout();return{hasZ:"XYZ"===e||"XYZM"===e,hasM:"XYM"===e||"XYZM"===e}}function B(e,t){return(0,x[e.getType()])((0,m.transformGeometryWithOptions)(e,!0,t),t)}r.default=e},{"../Feature.js":82,"../extent.js":142,"../geom/LineString.js":205,"../geom/LinearRing.js":206,"../geom/MultiLineString.js":207,"../geom/MultiPoint.js":208,"../geom/MultiPolygon.js":209,"../geom/Point.js":210,"../geom/Polygon.js":211,"../geom/flat/deflate.js":217,"../geom/flat/orient.js":226,"../obj.js":281,"../proj.js":283,"./Feature.js":147,"./JSONFeature.js":157}],147:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.createGeometry=function t(e,r){if(!e)return null;{var n;if(Array.isArray(e))return n=e.map(function(e){return t(e,r)}),new i.GeometryCollection(n)}return A(new m[e.type](e.flatCoordinates,e.layout,e.ends),!1,r)},r.createRenderFeature=function t(r,e){var n=r.geometry;if(!n)return[];if(Array.isArray(n))return n.map(function(e){return t(f(f({},r),{},{geometry:e}))}).flat();var i="MultiPolygon"===n.type?"Polygon":n.type;if("GeometryCollection"===i||"Circle"===i)throw new Error("Unsupported geometry type: "+i);var o=n.layout.length;return A(new a.default(i,"Polygon"===i?v(n.flatCoordinates,n.ends,o):n.flatCoordinates,null==(i=n.ends)?void 0:i.flat(),o,r.properties||{},r.id).enableSimplifyTransformed(),!1,e)},r.default=void 0,r.transformExtentWithOptions=function(e,t){var r=t?(0,u.get)(t.featureProjection):null,t=t?(0,u.get)(t.dataProjection):null;return r&&t&&!(0,u.equivalent)(r,t)?(0,u.transformExtent)(e,t,r):e},r.transformGeometryWithOptions=A;var n=l(e("../Feature.js")),a=l(e("../render/Feature.js")),i=e("../geom.js"),o=e("../util.js"),u=e("../proj.js"),s=e("../geom/flat/orient.js");function l(e){return e&&e.__esModule?e:{default:e}}function c(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function f(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?c(Object(i),!0).forEach(function(e){var t,r;t=n,r=i[e=e],(e=d(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):c(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))})}return n}function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,d(n.key),n)}}function d(e){e=function(e,t){if("object"!=h(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=h(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==h(e)?e:e+""}e=function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.featureClass=n.default,this.supportedMediaTypes=null},(y=[{key:"getReadOptions",value:function(e,t){return t&&(e=t.dataProjection?(0,u.get)(t.dataProjection):this.readProjection(e),t.extent&&e&&"tile-pixels"===e.getUnits()&&(e=(0,u.get)(e)).setWorldExtent(t.extent),t={dataProjection:e,featureProjection:t.featureProjection}),this.adaptOptions(t)}},{key:"adaptOptions",value:function(e){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection,featureClass:this.featureClass},e)}},{key:"getType",value:function(){return(0,o.abstract)()}},{key:"readFeature",value:function(e,t){return(0,o.abstract)()}},{key:"readFeatures",value:function(e,t){return(0,o.abstract)()}},{key:"readGeometry",value:function(e,t){return(0,o.abstract)()}},{key:"readProjection",value:function(e){return(0,o.abstract)()}},{key:"writeFeature",value:function(e,t){return(0,o.abstract)()}},{key:"writeFeatures",value:function(e,t){return(0,o.abstract)()}},{key:"writeGeometry",value:function(e,t){return(0,o.abstract)()}}])&&p(e.prototype,y),g&&p(e,g),Object.defineProperty(e,"prototype",{writable:!1});var g,y=e;r.default=y;function A(e,t,r){var n,i,o=r?(0,u.get)(r.featureProjection):null,a=r?(0,u.get)(r.dataProjection):null,s=e;return o&&a&&!(0,u.equivalent)(o,a)&&(t&&(s=e.clone()),n=t?a:o,"tile-pixels"===(o=t?o:a).getUnits()?s.transform(o,n):s.applyTransform((0,u.getTransform)(o,n))),t&&r&&void 0!==r.decimals&&(i=Math.pow(10,r.decimals),(s=s===e?e.clone():s).applyTransform(function(e){for(var t=0,r=e.length;t<r;++t)e[t]=Math.round(e[t]*i)/i;return e})),s}var m={Point:i.Point,LineString:i.LineString,Polygon:i.Polygon,MultiPoint:i.MultiPoint,MultiLineString:i.MultiLineString,MultiPolygon:i.MultiPolygon};function v(e,t,r){return Array.isArray(t[0])?(0,s.linearRingssAreOriented)(e,0,t,r)||(e=e.slice(),(0,s.orientLinearRingsArray)(e,0,t,r)):(0,s.linearRingsAreOriented)(e,0,t,r)||(e=e.slice(),(0,s.orientLinearRings)(e,0,t,r)),e}},{"../Feature.js":82,"../geom.js":201,"../geom/flat/orient.js":226,"../proj.js":283,"../render/Feature.js":295,"../util.js":404}],148:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;e=((e=e("./GML3.js"))&&e.__esModule?e:{default:e}).default;e.prototype.writeFeatures,e.prototype.writeFeaturesNode,r.default=e},{"./GML3.js":150}],149:[function(e,t,r){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};t=u(t);if(t&&t.has(e))return t.get(e);var r,n={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in e){var o;"default"!==r&&{}.hasOwnProperty.call(e,r)&&((o=i?Object.getOwnPropertyDescriptor(e,r):null)&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=e[r])}return n.default=e,t&&t.set(e,n),n}(e("./GMLBase.js")),h=e("../xml.js"),o=e("../extent.js"),c=e("../proj.js"),s=e("./Feature.js"),p=e("./xsd.js");function u(e){var t,r;return"function"!=typeof WeakMap?null:(t=new WeakMap,r=new WeakMap,(u=function(e){return e?r:t})(e))}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=a(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==a(e)?e:e+""}(n.key),n)}}function f(e,t,r){t=g(t);var n=e,t=d()?Reflect.construct(t,r||[],g(e).constructor):t.apply(e,r);if(t&&("object"==a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(d=function(){return!!e})()}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t){return(y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var A=i.GMLNS+" http://schemas.opengis.net/gml/2.1.2/feature.xsd",m={MultiLineString:"lineStringMember",MultiCurve:"curveMember",MultiPolygon:"polygonMember",MultiSurface:"surfaceMember"},e=function(){function r(e){var t;if(this instanceof r)return(t=f(this,r,[e=e||{}])).FEATURE_COLLECTION_PARSERS[i.GMLNS].featureMember=(0,h.makeArrayPusher)(t.readFeaturesInternal),t.schemaLocation=e.schemaLocation||A,t;throw new TypeError("Cannot call a class as a function")}var e,t=r,n=i.default;if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&y(t,n),t=r,(n=[{key:"readFlatCoordinates",value:function(e,t){var e=(0,h.getAllTextContent)(e,!1).replace(/^\s*|\s*$/g,""),t=t[0].srsName,r="enu";t&&(t=(0,c.get)(t))&&(r=t.getAxisOrientation());for(var n=e.trim().split(/\s+/),i=[],o=0,a=n.length;o<a;o++){var s=n[o].split(/,+/),u=parseFloat(s[0]),l=parseFloat(s[1]),s=3===s.length?parseFloat(s[2]):0;"en"===r.substr(0,2)?i.push(u,l,s):i.push(l,u,s)}return i}},{key:"readBox",value:function(e,t){e=(0,h.pushParseAndPop)([null],this.BOX_PARSERS_,e,t,this);return(0,o.createOrUpdate)(e[1][0],e[1][1],e[1][3],e[1][4])}},{key:"innerBoundaryIsParser",value:function(e,t){e=(0,h.pushParseAndPop)(void 0,this.RING_PARSERS,e,t,this);e&&t[t.length-1].push(e)}},{key:"outerBoundaryIsParser",value:function(e,t){e=(0,h.pushParseAndPop)(void 0,this.RING_PARSERS,e,t,this);e&&(t[t.length-1][0]=e)}},{key:"GEOMETRY_NODE_FACTORY_",value:function(e,t,r){var t=t[t.length-1],n=t.multiSurface,i=t.surface,t=t.multiCurve;return Array.isArray(e)?r="Envelope":"MultiPolygon"===(r=e.getType())&&!0===n?r="MultiSurface":"Polygon"===r&&!0===i?r="Surface":"MultiLineString"===r&&!0===t&&(r="MultiCurve"),(0,h.createElementNS)("http://www.opengis.net/gml",r)}},{key:"writeFeatureElement",value:function(e,t,r){var n=t.getId(),i=(n&&e.setAttribute("fid",n),r[r.length-1]),o=i.featureNS,a=t.getGeometryName(),s=(i.serializers||(i.serializers={},i.serializers[o]={}),[]),u=[];if(t.hasProperties()){var l,c=t.getProperties();for(l in c){var f=c[l];null!==f&&(s.push(l),u.push(f),l==a||"function"==typeof f.getSimplifiedGeometry?l in i.serializers[o]||(i.serializers[o][l]=(0,h.makeChildAppender)(this.writeGeometryElement,this)):l in i.serializers[o]||(i.serializers[o][l]=(0,h.makeChildAppender)(p.writeStringTextNode)))}}n=Object.assign({},i);n.node=e,(0,h.pushSerializeAndPop)(n,i.serializers,(0,h.makeSimpleNodeFactory)(void 0,o),u,r,s)}},{key:"writeCurveOrLineString",value:function(e,t,r){var n=r[r.length-1].srsName;"LineStringSegment"!==e.nodeName&&n&&e.setAttribute("srsName",n),"LineString"===e.nodeName||"LineStringSegment"===e.nodeName?(n=this.createCoordinatesNode_(e.namespaceURI),e.appendChild(n),this.writeCoordinates_(n,t,r)):"Curve"===e.nodeName&&(n=(0,h.createElementNS)(e.namespaceURI,"segments"),e.appendChild(n),this.writeCurveSegments_(n,t,r))}},{key:"writeLineStringOrCurveMember",value:function(e,t,r){var n=this.GEOMETRY_NODE_FACTORY_(t,r);n&&(e.appendChild(n),this.writeCurveOrLineString(n,t,r))}},{key:"writeMultiCurveOrLineString",value:function(e,t,r){var n=r[r.length-1],i=n.hasZ,o=n.srsName,n=n.curve,t=(o&&e.setAttribute("srsName",o),t.getLineStrings());(0,h.pushSerializeAndPop)({node:e,hasZ:i,srsName:o,curve:n},this.LINESTRINGORCURVEMEMBER_SERIALIZERS,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,t,r,void 0,this)}},{key:"writeGeometryElement",value:function(e,t,r){var n=r[r.length-1],i=Object.assign({},n);i.node=e,e=Array.isArray(t)?(0,s.transformExtentWithOptions)(t,n):(0,s.transformGeometryWithOptions)(t,!0,n),(0,h.pushSerializeAndPop)(i,this.GEOMETRY_SERIALIZERS,this.GEOMETRY_NODE_FACTORY_,[e],r,void 0,this)}},{key:"createCoordinatesNode_",value:function(e){e=(0,h.createElementNS)(e,"coordinates");return e.setAttribute("decimal","."),e.setAttribute("cs",","),e.setAttribute("ts"," "),e}},{key:"writeCoordinates_",value:function(e,t,r){for(var r=r[r.length-1],n=r.hasZ,i=r.srsName,o=t.getCoordinates(),a=o.length,s=new Array(a),u=0;u<a;++u){var l=o[u];s[u]=this.getCoords_(l,i,n)}(0,p.writeStringTextNode)(e,s.join(" "))}},{key:"writeCurveSegments_",value:function(e,t,r){var n=(0,h.createElementNS)(e.namespaceURI,"LineStringSegment");e.appendChild(n),this.writeCurveOrLineString(n,t,r)}},{key:"writeSurfaceOrPolygon",value:function(e,t,r){var n,i=r[r.length-1],o=i.hasZ,i=i.srsName;"PolygonPatch"!==e.nodeName&&i&&e.setAttribute("srsName",i),"Polygon"===e.nodeName||"PolygonPatch"===e.nodeName?(n=t.getLinearRings(),(0,h.pushSerializeAndPop)({node:e,hasZ:o,srsName:i},this.RING_SERIALIZERS,this.RING_NODE_FACTORY_,n,r,void 0,this)):"Surface"===e.nodeName&&(o=(0,h.createElementNS)(e.namespaceURI,"patches"),e.appendChild(o),this.writeSurfacePatches_(o,t,r))}},{key:"RING_NODE_FACTORY_",value:function(e,t,r){var t=t[t.length-1],n=t.node,i=t.exteriorWritten;return void 0===i&&(t.exteriorWritten=!0),(0,h.createElementNS)(n.namespaceURI,void 0!==i?"innerBoundaryIs":"outerBoundaryIs")}},{key:"writeSurfacePatches_",value:function(e,t,r){var n=(0,h.createElementNS)(e.namespaceURI,"PolygonPatch");e.appendChild(n),this.writeSurfaceOrPolygon(n,t,r)}},{key:"writeRing",value:function(e,t,r){var n=(0,h.createElementNS)(e.namespaceURI,"LinearRing");e.appendChild(n),this.writeLinearRing(n,t,r)}},{key:"getCoords_",value:function(e,t,r){var n="enu",t="en"===(n=t?(0,c.get)(t).getAxisOrientation():n).substr(0,2)?e[0]+","+e[1]:e[1]+","+e[0];return r&&(t+=","+(e[2]||0)),t}},{key:"writePoint",value:function(e,t,r){var r=r[r.length-1],n=r.hasZ,r=r.srsName,i=(r&&e.setAttribute("srsName",r),this.createCoordinatesNode_(e.namespaceURI)),e=(e.appendChild(i),t.getCoordinates()),t=this.getCoords_(e,r,n);(0,p.writeStringTextNode)(i,t)}},{key:"writeMultiPoint",value:function(e,t,r){var n=r[r.length-1],i=n.hasZ,n=n.srsName,t=(n&&e.setAttribute("srsName",n),t.getPoints());(0,h.pushSerializeAndPop)({node:e,hasZ:i,srsName:n},this.POINTMEMBER_SERIALIZERS,(0,h.makeSimpleNodeFactory)("pointMember"),t,r,void 0,this)}},{key:"writePointMember",value:function(e,t,r){var n=(0,h.createElementNS)(e.namespaceURI,"Point");e.appendChild(n),this.writePoint(n,t,r)}},{key:"writeLinearRing",value:function(e,t,r){var n=r[r.length-1].srsName,n=(n&&e.setAttribute("srsName",n),this.createCoordinatesNode_(e.namespaceURI));e.appendChild(n),this.writeCoordinates_(n,t,r)}},{key:"writeMultiSurfaceOrPolygon",value:function(e,t,r){var n=r[r.length-1],i=n.hasZ,o=n.srsName,n=n.surface,t=(o&&e.setAttribute("srsName",o),t.getPolygons());(0,h.pushSerializeAndPop)({node:e,hasZ:i,srsName:o,surface:n},this.SURFACEORPOLYGONMEMBER_SERIALIZERS,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,t,r,void 0,this)}},{key:"writeSurfaceOrPolygonMember",value:function(e,t,r){var n=this.GEOMETRY_NODE_FACTORY_(t,r);n&&(e.appendChild(n),this.writeSurfaceOrPolygon(n,t,r))}},{key:"writeEnvelope",value:function(e,t,r){var n=r[r.length-1].srsName,n=(n&&e.setAttribute("srsName",n),[t[0]+" "+t[1],t[2]+" "+t[3]]);(0,h.pushSerializeAndPop)({node:e},this.ENVELOPE_SERIALIZERS,h.OBJECT_PROPERTY_NODE_FACTORY,n,r,["lowerCorner","upperCorner"],this)}},{key:"MULTIGEOMETRY_MEMBER_NODE_FACTORY_",value:function(e,t,r){t=t[t.length-1].node;return(0,h.createElementNS)("http://www.opengis.net/gml",m[t.nodeName])}}])&&l(t.prototype,n),e&&l(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();e.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{coordinates:(0,h.makeReplacer)(e.prototype.readFlatCoordinates)}},e.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{innerBoundaryIs:e.prototype.innerBoundaryIsParser,outerBoundaryIs:e.prototype.outerBoundaryIsParser}},e.prototype.BOX_PARSERS_={"http://www.opengis.net/gml":{coordinates:(0,h.makeArrayPusher)(e.prototype.readFlatCoordinates)}},e.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{Point:(0,h.makeReplacer)(i.default.prototype.readPoint),MultiPoint:(0,h.makeReplacer)(i.default.prototype.readMultiPoint),LineString:(0,h.makeReplacer)(i.default.prototype.readLineString),MultiLineString:(0,h.makeReplacer)(i.default.prototype.readMultiLineString),LinearRing:(0,h.makeReplacer)(i.default.prototype.readLinearRing),Polygon:(0,h.makeReplacer)(i.default.prototype.readPolygon),MultiPolygon:(0,h.makeReplacer)(i.default.prototype.readMultiPolygon),Box:(0,h.makeReplacer)(e.prototype.readBox)}},e.prototype.GEOMETRY_SERIALIZERS={"http://www.opengis.net/gml":{Curve:(0,h.makeChildAppender)(e.prototype.writeCurveOrLineString),MultiCurve:(0,h.makeChildAppender)(e.prototype.writeMultiCurveOrLineString),Point:(0,h.makeChildAppender)(e.prototype.writePoint),MultiPoint:(0,h.makeChildAppender)(e.prototype.writeMultiPoint),LineString:(0,h.makeChildAppender)(e.prototype.writeCurveOrLineString),MultiLineString:(0,h.makeChildAppender)(e.prototype.writeMultiCurveOrLineString),LinearRing:(0,h.makeChildAppender)(e.prototype.writeLinearRing),Polygon:(0,h.makeChildAppender)(e.prototype.writeSurfaceOrPolygon),MultiPolygon:(0,h.makeChildAppender)(e.prototype.writeMultiSurfaceOrPolygon),Surface:(0,h.makeChildAppender)(e.prototype.writeSurfaceOrPolygon),MultiSurface:(0,h.makeChildAppender)(e.prototype.writeMultiSurfaceOrPolygon),Envelope:(0,h.makeChildAppender)(e.prototype.writeEnvelope)}},e.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{lineStringMember:(0,h.makeChildAppender)(e.prototype.writeLineStringOrCurveMember),curveMember:(0,h.makeChildAppender)(e.prototype.writeLineStringOrCurveMember)}},e.prototype.RING_SERIALIZERS={"http://www.opengis.net/gml":{outerBoundaryIs:(0,h.makeChildAppender)(e.prototype.writeRing),innerBoundaryIs:(0,h.makeChildAppender)(e.prototype.writeRing)}},e.prototype.POINTMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{pointMember:(0,h.makeChildAppender)(e.prototype.writePointMember)}},e.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{surfaceMember:(0,h.makeChildAppender)(e.prototype.writeSurfaceOrPolygonMember),polygonMember:(0,h.makeChildAppender)(e.prototype.writeSurfaceOrPolygonMember)}},e.prototype.ENVELOPE_SERIALIZERS={"http://www.opengis.net/gml":{lowerCorner:(0,h.makeChildAppender)(p.writeStringTextNode),upperCorner:(0,h.makeChildAppender)(p.writeStringTextNode)}},r.default=e},{"../extent.js":142,"../proj.js":283,"../xml.js":418,"./Feature.js":147,"./GMLBase.js":152,"./xsd.js":199}],150:[function(e,t,r){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=A(e("./GML2.js")),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};t=y(t);if(t&&t.has(e))return t.get(e);var r,n={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in e){var o;"default"!==r&&{}.hasOwnProperty.call(e,r)&&((o=i?Object.getOwnPropertyDescriptor(e,r):null)&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=e[r])}return n.default=e,t&&t.set(e,n),n}(e("./GMLBase.js")),o=A(e("../geom/LineString.js")),s=A(e("../geom/MultiLineString.js")),u=A(e("../geom/MultiPolygon.js")),l=A(e("../geom/Polygon.js")),p=e("../xml.js"),c=e("../extent.js"),f=e("../array.js"),d=e("../proj.js"),g=e("./xsd.js"),h=e("./Feature.js");function y(e){var t,r;return"function"!=typeof WeakMap?null:(t=new WeakMap,r=new WeakMap,(y=function(e){return e?r:t})(e))}function A(e){return e&&e.__esModule?e:{default:e}}function m(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=a(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==a(e)?e:e+""}(n.key),n)}}function v(e,t,r){t=_(t);var n=e,t=b()?Reflect.construct(t,r||[],_(e).constructor):t.apply(e,r);if(t&&("object"==a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(b=function(){return!!e})()}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function w(e,t){return(w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var E=i.GMLNS+" http://schemas.opengis.net/gml/3.1.1/profiles/gmlsfProfile/1.0.0/gmlsf.xsd",C={MultiLineString:"lineStringMember",MultiCurve:"curveMember",MultiPolygon:"polygonMember",MultiSurface:"surfaceMember"},e=function(){function r(e){var t;if(this instanceof r)return(t=v(this,r,[e=e||{}])).surface_=void 0!==e.surface&&e.surface,t.curve_=void 0!==e.curve&&e.curve,t.multiCurve_=void 0===e.multiCurve||e.multiCurve,t.multiSurface_=void 0===e.multiSurface||e.multiSurface,t.schemaLocation=e.schemaLocation||E,t.hasZ=void 0!==e.hasZ&&e.hasZ,t;throw new TypeError("Cannot call a class as a function")}var e,t=r,n=i.default;if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&w(t,n),t=r,(n=[{key:"readMultiCurve",value:function(e,t){e=(0,p.pushParseAndPop)([],this.MULTICURVE_PARSERS,e,t,this);if(e)return new s.default(e)}},{key:"readFlatCurveRing",value:function(e,t){for(var r=(0,p.pushParseAndPop)([],this.MULTICURVE_PARSERS,e,t,this),n=[],i=0,o=r.length;i<o;++i)(0,f.extend)(n,r[i].getFlatCoordinates());return n}},{key:"readMultiSurface",value:function(e,t){e=(0,p.pushParseAndPop)([],this.MULTISURFACE_PARSERS,e,t,this);if(e)return new u.default(e)}},{key:"curveMemberParser",value:function(e,t){(0,p.parseNode)(this.CURVEMEMBER_PARSERS,e,t,this)}},{key:"surfaceMemberParser",value:function(e,t){(0,p.parseNode)(this.SURFACEMEMBER_PARSERS,e,t,this)}},{key:"readPatch",value:function(e,t){return(0,p.pushParseAndPop)([null],this.PATCHES_PARSERS,e,t,this)}},{key:"readSegment",value:function(e,t){return(0,p.pushParseAndPop)([],this.SEGMENTS_PARSERS,e,t,this)}},{key:"readPolygonPatch",value:function(e,t){return(0,p.pushParseAndPop)([null],this.FLAT_LINEAR_RINGS_PARSERS,e,t,this)}},{key:"readLineStringSegment",value:function(e,t){return(0,p.pushParseAndPop)([null],this.GEOMETRY_FLAT_COORDINATES_PARSERS,e,t,this)}},{key:"interiorParser",value:function(e,t){e=(0,p.pushParseAndPop)(void 0,this.RING_PARSERS,e,t,this);e&&t[t.length-1].push(e)}},{key:"exteriorParser",value:function(e,t){e=(0,p.pushParseAndPop)(void 0,this.RING_PARSERS,e,t,this);e&&(t[t.length-1][0]=e)}},{key:"readSurface",value:function(e,t){var r=(0,p.pushParseAndPop)([null],this.SURFACE_PARSERS,e,t,this);if(r&&r[0]){for(var n=r[0],i=[n.length],o=1,a=r.length;o<a;++o)(0,f.extend)(n,r[o]),i.push(n.length);return new l.default(n,"XYZ",i)}}},{key:"readCurve",value:function(e,t){e=(0,p.pushParseAndPop)([null],this.CURVE_PARSERS,e,t,this);if(e)return new o.default(e,"XYZ")}},{key:"readEnvelope",value:function(e,t){e=(0,p.pushParseAndPop)([null],this.ENVELOPE_PARSERS,e,t,this);return(0,c.createOrUpdate)(e[1][0],e[1][1],e[2][0],e[2][1])}},{key:"readFlatPos",value:function(e,t){for(var r,n=(0,p.getAllTextContent)(e,!1),i=/^\s*([+\-]?\d*\.?\d+(?:[eE][+\-]?\d+)?)\s*/,o=[];r=i.exec(n);)o.push(parseFloat(r[1])),n=n.substr(r[0].length);if(""===n){var a,s,e=t[0].srsName,t="enu";if("neu"===(t=e?(0,d.get)(e).getAxisOrientation():t))for(a=0,s=o.length;a<s;a+=3){var u=o[a];o[a]=o[a+1],o[a+1]=u}e=o.length;if(2==e&&o.push(0),0!==e)return o}}},{key:"readFlatPosList",value:function(e,t){var r=(0,p.getAllTextContent)(e,!1).replace(/^\s*|\s*$/g,""),t=t[0],n=t.srsName,t=t.srsDimension,i="enu";n&&(i=(0,d.get)(n).getAxisOrientation());var o,a,s,u=r.split(/\s+/),l=2;e.getAttribute("srsDimension")?l=(0,g.readNonNegativeIntegerString)(e.getAttribute("srsDimension")):e.getAttribute("dimension")?l=(0,g.readNonNegativeIntegerString)(e.getAttribute("dimension")):e.parentNode.getAttribute("srsDimension")?l=(0,g.readNonNegativeIntegerString)(e.parentNode.getAttribute("srsDimension")):t&&(l=(0,g.readNonNegativeIntegerString)(t));for(var c=[],f=0,h=u.length;f<h;f+=l)o=parseFloat(u[f]),a=parseFloat(u[f+1]),s=3===l?parseFloat(u[f+2]):0,"en"===i.substr(0,2)?c.push(o,a,s):c.push(a,o,s);return c}},{key:"writePos_",value:function(e,t,r){var r=r[r.length-1],n=r.hasZ,r=(e.setAttribute("srsDimension",n?"3":"2"),r.srsName),i="enu";r&&(i=(0,d.get)(r).getAxisOrientation());r=t.getCoordinates(),t="en"===i.substr(0,2)?r[0]+" "+r[1]:r[1]+" "+r[0];n&&(t+=" "+(r[2]||0)),(0,g.writeStringTextNode)(e,t)}},{key:"getCoords_",value:function(e,t,r){var n="enu",t="en"===(n=t?(0,d.get)(t).getAxisOrientation():n).substr(0,2)?e[0]+" "+e[1]:e[1]+" "+e[0];return r&&(t+=" "+(e[2]||0)),t}},{key:"writePosList_",value:function(e,t,r){var r=r[r.length-1],n=r.hasZ;e.setAttribute("srsDimension",n?"3":"2");for(var i,o=r.srsName,a=t.getCoordinates(),s=a.length,u=new Array(s),l=0;l<s;++l)i=a[l],u[l]=this.getCoords_(i,o,n);(0,g.writeStringTextNode)(e,u.join(" "))}},{key:"writePoint",value:function(e,t,r){var n=r[r.length-1].srsName,n=(n&&e.setAttribute("srsName",n),(0,p.createElementNS)(e.namespaceURI,"pos"));e.appendChild(n),this.writePos_(n,t,r)}},{key:"writeEnvelope",value:function(e,t,r){var n=r[r.length-1].srsName,n=(n&&e.setAttribute("srsName",n),[t[0]+" "+t[1],t[2]+" "+t[3]]);(0,p.pushSerializeAndPop)({node:e},this.ENVELOPE_SERIALIZERS,p.OBJECT_PROPERTY_NODE_FACTORY,n,r,["lowerCorner","upperCorner"],this)}},{key:"writeLinearRing",value:function(e,t,r){var n=r[r.length-1].srsName,n=(n&&e.setAttribute("srsName",n),(0,p.createElementNS)(e.namespaceURI,"posList"));e.appendChild(n),this.writePosList_(n,t,r)}},{key:"RING_NODE_FACTORY_",value:function(e,t,r){var t=t[t.length-1],n=t.node,i=t.exteriorWritten;return void 0===i&&(t.exteriorWritten=!0),(0,p.createElementNS)(n.namespaceURI,void 0!==i?"interior":"exterior")}},{key:"writeSurfaceOrPolygon",value:function(e,t,r){var n,i=r[r.length-1],o=i.hasZ,i=i.srsName;"PolygonPatch"!==e.nodeName&&i&&e.setAttribute("srsName",i),"Polygon"===e.nodeName||"PolygonPatch"===e.nodeName?(n=t.getLinearRings(),(0,p.pushSerializeAndPop)({node:e,hasZ:o,srsName:i},this.RING_SERIALIZERS,this.RING_NODE_FACTORY_,n,r,void 0,this)):"Surface"===e.nodeName&&(o=(0,p.createElementNS)(e.namespaceURI,"patches"),e.appendChild(o),this.writeSurfacePatches_(o,t,r))}},{key:"writeCurveOrLineString",value:function(e,t,r){var n=r[r.length-1].srsName;"LineStringSegment"!==e.nodeName&&n&&e.setAttribute("srsName",n),"LineString"===e.nodeName||"LineStringSegment"===e.nodeName?(n=(0,p.createElementNS)(e.namespaceURI,"posList"),e.appendChild(n),this.writePosList_(n,t,r)):"Curve"===e.nodeName&&(n=(0,p.createElementNS)(e.namespaceURI,"segments"),e.appendChild(n),this.writeCurveSegments_(n,t,r))}},{key:"writeMultiSurfaceOrPolygon",value:function(e,t,r){var n=r[r.length-1],i=n.hasZ,o=n.srsName,n=n.surface,t=(o&&e.setAttribute("srsName",o),t.getPolygons());(0,p.pushSerializeAndPop)({node:e,hasZ:i,srsName:o,surface:n},this.SURFACEORPOLYGONMEMBER_SERIALIZERS,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,t,r,void 0,this)}},{key:"writeMultiPoint",value:function(e,t,r){var n=r[r.length-1],i=n.srsName,n=n.hasZ,t=(i&&e.setAttribute("srsName",i),t.getPoints());(0,p.pushSerializeAndPop)({node:e,hasZ:n,srsName:i},this.POINTMEMBER_SERIALIZERS,(0,p.makeSimpleNodeFactory)("pointMember"),t,r,void 0,this)}},{key:"writeMultiCurveOrLineString",value:function(e,t,r){var n=r[r.length-1],i=n.hasZ,o=n.srsName,n=n.curve,t=(o&&e.setAttribute("srsName",o),t.getLineStrings());(0,p.pushSerializeAndPop)({node:e,hasZ:i,srsName:o,curve:n},this.LINESTRINGORCURVEMEMBER_SERIALIZERS,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,t,r,void 0,this)}},{key:"writeRing",value:function(e,t,r){var n=(0,p.createElementNS)(e.namespaceURI,"LinearRing");e.appendChild(n),this.writeLinearRing(n,t,r)}},{key:"writeSurfaceOrPolygonMember",value:function(e,t,r){var n=this.GEOMETRY_NODE_FACTORY_(t,r);n&&(e.appendChild(n),this.writeSurfaceOrPolygon(n,t,r))}},{key:"writePointMember",value:function(e,t,r){var n=(0,p.createElementNS)(e.namespaceURI,"Point");e.appendChild(n),this.writePoint(n,t,r)}},{key:"writeLineStringOrCurveMember",value:function(e,t,r){var n=this.GEOMETRY_NODE_FACTORY_(t,r);n&&(e.appendChild(n),this.writeCurveOrLineString(n,t,r))}},{key:"writeSurfacePatches_",value:function(e,t,r){var n=(0,p.createElementNS)(e.namespaceURI,"PolygonPatch");e.appendChild(n),this.writeSurfaceOrPolygon(n,t,r)}},{key:"writeCurveSegments_",value:function(e,t,r){var n=(0,p.createElementNS)(e.namespaceURI,"LineStringSegment");e.appendChild(n),this.writeCurveOrLineString(n,t,r)}},{key:"writeGeometryElement",value:function(e,t,r){var n=r[r.length-1],i=Object.assign({},n);i.node=e,e=Array.isArray(t)?(0,h.transformExtentWithOptions)(t,n):(0,h.transformGeometryWithOptions)(t,!0,n),(0,p.pushSerializeAndPop)(i,this.GEOMETRY_SERIALIZERS,this.GEOMETRY_NODE_FACTORY_,[e],r,void 0,this)}},{key:"writeFeatureElement",value:function(e,t,r){var n=t.getId(),i=(n&&e.setAttribute("fid",n),r[r.length-1]),o=i.featureNS,a=t.getGeometryName(),s=(i.serializers||(i.serializers={},i.serializers[o]={}),[]),u=[];if(t.hasProperties()){var l,c=t.getProperties();for(l in c){var f=c[l];null!==f&&(s.push(l),u.push(f),l==a||"function"==typeof f.getSimplifiedGeometry?l in i.serializers[o]||(i.serializers[o][l]=(0,p.makeChildAppender)(this.writeGeometryElement,this)):l in i.serializers[o]||(i.serializers[o][l]=(0,p.makeChildAppender)(g.writeStringTextNode)))}}n=Object.assign({},i);n.node=e,(0,p.pushSerializeAndPop)(n,i.serializers,(0,p.makeSimpleNodeFactory)(void 0,o),u,r,s)}},{key:"writeFeatureMembers_",value:function(e,t,r){var n=r[r.length-1],i=n.featureType,o=n.featureNS,a={},n=(a[o]={},a[o][i]=(0,p.makeChildAppender)(this.writeFeatureElement,this),Object.assign({},n));n.node=e,(0,p.pushSerializeAndPop)(n,a,(0,p.makeSimpleNodeFactory)(i,o),t,r)}},{key:"MULTIGEOMETRY_MEMBER_NODE_FACTORY_",value:function(e,t,r){t=t[t.length-1].node;return(0,p.createElementNS)(this.namespace,C[t.nodeName])}},{key:"GEOMETRY_NODE_FACTORY_",value:function(e,t,r){var t=t[t.length-1],n=t.multiSurface,i=t.surface,o=t.curve,t=t.multiCurve;return Array.isArray(e)?r="Envelope":"MultiPolygon"===(r=e.getType())&&!0===n?r="MultiSurface":"Polygon"===r&&!0===i?r="Surface":"LineString"===r&&!0===o?r="Curve":"MultiLineString"===r&&!0===t&&(r="MultiCurve"),(0,p.createElementNS)(this.namespace,r)}},{key:"writeGeometryNode",value:function(e,t){t=this.adaptOptions(t);var r=(0,p.createElementNS)(this.namespace,"geom"),n={node:r,hasZ:this.hasZ,srsName:this.srsName,curve:this.curve_,surface:this.surface_,multiSurface:this.multiSurface_,multiCurve:this.multiCurve_};return t&&Object.assign(n,t),this.writeGeometryElement(r,e,[n]),r}},{key:"writeFeaturesNode",value:function(e,t){t=this.adaptOptions(t);var r=(0,p.createElementNS)(this.namespace,"featureMembers"),n=(r.setAttributeNS(p.XML_SCHEMA_INSTANCE_URI,"xsi:schemaLocation",this.schemaLocation),{srsName:this.srsName,hasZ:this.hasZ,curve:this.curve_,surface:this.surface_,multiSurface:this.multiSurface_,multiCurve:this.multiCurve_,featureNS:this.featureNS,featureType:this.featureType});return t&&Object.assign(n,t),this.writeFeatureMembers_(r,e,[n]),r}}])&&m(t.prototype,n),e&&m(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();e.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{pos:(0,p.makeReplacer)(e.prototype.readFlatPos),posList:(0,p.makeReplacer)(e.prototype.readFlatPosList),coordinates:(0,p.makeReplacer)(n.default.prototype.readFlatCoordinates)}},e.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{interior:e.prototype.interiorParser,exterior:e.prototype.exteriorParser}},e.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{Point:(0,p.makeReplacer)(i.default.prototype.readPoint),MultiPoint:(0,p.makeReplacer)(i.default.prototype.readMultiPoint),LineString:(0,p.makeReplacer)(i.default.prototype.readLineString),MultiLineString:(0,p.makeReplacer)(i.default.prototype.readMultiLineString),LinearRing:(0,p.makeReplacer)(i.default.prototype.readLinearRing),Polygon:(0,p.makeReplacer)(i.default.prototype.readPolygon),MultiPolygon:(0,p.makeReplacer)(i.default.prototype.readMultiPolygon),Surface:(0,p.makeReplacer)(e.prototype.readSurface),MultiSurface:(0,p.makeReplacer)(e.prototype.readMultiSurface),Curve:(0,p.makeReplacer)(e.prototype.readCurve),MultiCurve:(0,p.makeReplacer)(e.prototype.readMultiCurve),Envelope:(0,p.makeReplacer)(e.prototype.readEnvelope)}},e.prototype.MULTICURVE_PARSERS={"http://www.opengis.net/gml":{curveMember:(0,p.makeArrayPusher)(e.prototype.curveMemberParser),curveMembers:(0,p.makeArrayPusher)(e.prototype.curveMemberParser)}},e.prototype.MULTISURFACE_PARSERS={"http://www.opengis.net/gml":{surfaceMember:(0,p.makeArrayPusher)(e.prototype.surfaceMemberParser),surfaceMembers:(0,p.makeArrayPusher)(e.prototype.surfaceMemberParser)}},e.prototype.CURVEMEMBER_PARSERS={"http://www.opengis.net/gml":{LineString:(0,p.makeArrayPusher)(i.default.prototype.readLineString),Curve:(0,p.makeArrayPusher)(e.prototype.readCurve)}},e.prototype.SURFACEMEMBER_PARSERS={"http://www.opengis.net/gml":{Polygon:(0,p.makeArrayPusher)(i.default.prototype.readPolygon),Surface:(0,p.makeArrayPusher)(e.prototype.readSurface)}},e.prototype.SURFACE_PARSERS={"http://www.opengis.net/gml":{patches:(0,p.makeReplacer)(e.prototype.readPatch)}},e.prototype.CURVE_PARSERS={"http://www.opengis.net/gml":{segments:(0,p.makeReplacer)(e.prototype.readSegment)}},e.prototype.ENVELOPE_PARSERS={"http://www.opengis.net/gml":{lowerCorner:(0,p.makeArrayPusher)(e.prototype.readFlatPosList),upperCorner:(0,p.makeArrayPusher)(e.prototype.readFlatPosList)}},e.prototype.PATCHES_PARSERS={"http://www.opengis.net/gml":{PolygonPatch:(0,p.makeReplacer)(e.prototype.readPolygonPatch)}},e.prototype.SEGMENTS_PARSERS={"http://www.opengis.net/gml":{LineStringSegment:(0,p.makeArrayExtender)(e.prototype.readLineStringSegment)}},i.default.prototype.RING_PARSERS={"http://www.opengis.net/gml":{LinearRing:(0,p.makeReplacer)(i.default.prototype.readFlatLinearRing),Ring:(0,p.makeReplacer)(e.prototype.readFlatCurveRing)}},e.prototype.writeFeatures,e.prototype.RING_SERIALIZERS={"http://www.opengis.net/gml":{exterior:(0,p.makeChildAppender)(e.prototype.writeRing),interior:(0,p.makeChildAppender)(e.prototype.writeRing)}},e.prototype.ENVELOPE_SERIALIZERS={"http://www.opengis.net/gml":{lowerCorner:(0,p.makeChildAppender)(g.writeStringTextNode),upperCorner:(0,p.makeChildAppender)(g.writeStringTextNode)}},e.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{surfaceMember:(0,p.makeChildAppender)(e.prototype.writeSurfaceOrPolygonMember),polygonMember:(0,p.makeChildAppender)(e.prototype.writeSurfaceOrPolygonMember)}},e.prototype.POINTMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{pointMember:(0,p.makeChildAppender)(e.prototype.writePointMember)}},e.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{lineStringMember:(0,p.makeChildAppender)(e.prototype.writeLineStringOrCurveMember),curveMember:(0,p.makeChildAppender)(e.prototype.writeLineStringOrCurveMember)}},e.prototype.GEOMETRY_SERIALIZERS={"http://www.opengis.net/gml":{Curve:(0,p.makeChildAppender)(e.prototype.writeCurveOrLineString),MultiCurve:(0,p.makeChildAppender)(e.prototype.writeMultiCurveOrLineString),Point:(0,p.makeChildAppender)(e.prototype.writePoint),MultiPoint:(0,p.makeChildAppender)(e.prototype.writeMultiPoint),LineString:(0,p.makeChildAppender)(e.prototype.writeCurveOrLineString),MultiLineString:(0,p.makeChildAppender)(e.prototype.writeMultiCurveOrLineString),LinearRing:(0,p.makeChildAppender)(e.prototype.writeLinearRing),Polygon:(0,p.makeChildAppender)(e.prototype.writeSurfaceOrPolygon),MultiPolygon:(0,p.makeChildAppender)(e.prototype.writeMultiSurfaceOrPolygon),Surface:(0,p.makeChildAppender)(e.prototype.writeSurfaceOrPolygon),MultiSurface:(0,p.makeChildAppender)(e.prototype.writeMultiSurfaceOrPolygon),Envelope:(0,p.makeChildAppender)(e.prototype.writeEnvelope)}},r.default=e},{"../array.js":110,"../extent.js":142,"../geom/LineString.js":205,"../geom/MultiLineString.js":207,"../geom/MultiPolygon.js":209,"../geom/Polygon.js":211,"../proj.js":283,"../xml.js":418,"./Feature.js":147,"./GML2.js":149,"./GMLBase.js":152,"./xsd.js":199}],151:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=u(e("./GML2.js")),o=u(e("./GML3.js")),a=u(e("./GMLBase.js")),s=e("../xml.js"),e=e("../format/xsd.js");function u(e){return e&&e.__esModule?e:{default:e}}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function c(e,t,r){t=p(t);var n=e,t=f()?Reflect.construct(t,r||[],p(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(f=function(){return!!e})()}function h(){return(h="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=p(e)););return e}(e,t);if(n)return(n=Object.getOwnPropertyDescriptor(n,t)).get?n.get.call(arguments.length<3?e:r):n.value}).apply(null,arguments)}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var g=function(){function i(e){var t;if(this instanceof i)return(t=c(this,i,[e=e||{}])).schemaLocation=e.schemaLocation||t.namespace+" http://schemas.opengis.net/gml/3.2.1/gml.xsd",t;throw new TypeError("Cannot call a class as a function")}var e,t=i,r=o.default;if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&d(t,r),t=i,(r=[{key:"writeGeometryElement",value:function(e,t,r){var n=r[r.length-1];r[r.length-1]=Object.assign({multiCurve:!0,multiSurface:!0},n),h(p(i.prototype),"writeGeometryElement",this).call(this,e,t,r)}}])&&l(t.prototype,r),e&&l(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();g.prototype.namespace="http://www.opengis.net/gml/3.2",g.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml/3.2":{pos:(0,s.makeReplacer)(o.default.prototype.readFlatPos),posList:(0,s.makeReplacer)(o.default.prototype.readFlatPosList),coordinates:(0,s.makeReplacer)(n.default.prototype.readFlatCoordinates)}},g.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml/3.2":{interior:o.default.prototype.interiorParser,exterior:o.default.prototype.exteriorParser}},g.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml/3.2":{Point:(0,s.makeReplacer)(a.default.prototype.readPoint),MultiPoint:(0,s.makeReplacer)(a.default.prototype.readMultiPoint),LineString:(0,s.makeReplacer)(a.default.prototype.readLineString),MultiLineString:(0,s.makeReplacer)(a.default.prototype.readMultiLineString),LinearRing:(0,s.makeReplacer)(a.default.prototype.readLinearRing),Polygon:(0,s.makeReplacer)(a.default.prototype.readPolygon),MultiPolygon:(0,s.makeReplacer)(a.default.prototype.readMultiPolygon),Surface:(0,s.makeReplacer)(g.prototype.readSurface),MultiSurface:(0,s.makeReplacer)(o.default.prototype.readMultiSurface),Curve:(0,s.makeReplacer)(g.prototype.readCurve),MultiCurve:(0,s.makeReplacer)(o.default.prototype.readMultiCurve),Envelope:(0,s.makeReplacer)(g.prototype.readEnvelope)}},g.prototype.MULTICURVE_PARSERS={"http://www.opengis.net/gml/3.2":{curveMember:(0,s.makeArrayPusher)(o.default.prototype.curveMemberParser),curveMembers:(0,s.makeArrayPusher)(o.default.prototype.curveMemberParser)}},g.prototype.MULTISURFACE_PARSERS={"http://www.opengis.net/gml/3.2":{surfaceMember:(0,s.makeArrayPusher)(o.default.prototype.surfaceMemberParser),surfaceMembers:(0,s.makeArrayPusher)(o.default.prototype.surfaceMemberParser)}},g.prototype.CURVEMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{LineString:(0,s.makeArrayPusher)(a.default.prototype.readLineString),Curve:(0,s.makeArrayPusher)(o.default.prototype.readCurve)}},g.prototype.SURFACEMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{Polygon:(0,s.makeArrayPusher)(a.default.prototype.readPolygon),Surface:(0,s.makeArrayPusher)(o.default.prototype.readSurface)}},g.prototype.SURFACE_PARSERS={"http://www.opengis.net/gml/3.2":{patches:(0,s.makeReplacer)(o.default.prototype.readPatch)}},g.prototype.CURVE_PARSERS={"http://www.opengis.net/gml/3.2":{segments:(0,s.makeReplacer)(o.default.prototype.readSegment)}},g.prototype.ENVELOPE_PARSERS={"http://www.opengis.net/gml/3.2":{lowerCorner:(0,s.makeArrayPusher)(o.default.prototype.readFlatPosList),upperCorner:(0,s.makeArrayPusher)(o.default.prototype.readFlatPosList)}},g.prototype.PATCHES_PARSERS={"http://www.opengis.net/gml/3.2":{PolygonPatch:(0,s.makeReplacer)(o.default.prototype.readPolygonPatch)}},g.prototype.SEGMENTS_PARSERS={"http://www.opengis.net/gml/3.2":{LineStringSegment:(0,s.makeArrayExtender)(o.default.prototype.readLineStringSegment)}},g.prototype.MULTIPOINT_PARSERS={"http://www.opengis.net/gml/3.2":{pointMember:(0,s.makeArrayPusher)(a.default.prototype.pointMemberParser),pointMembers:(0,s.makeArrayPusher)(a.default.prototype.pointMemberParser)}},g.prototype.MULTILINESTRING_PARSERS={"http://www.opengis.net/gml/3.2":{lineStringMember:(0,s.makeArrayPusher)(a.default.prototype.lineStringMemberParser),lineStringMembers:(0,s.makeArrayPusher)(a.default.prototype.lineStringMemberParser)}},g.prototype.MULTIPOLYGON_PARSERS={"http://www.opengis.net/gml/3.2":{polygonMember:(0,s.makeArrayPusher)(a.default.prototype.polygonMemberParser),polygonMembers:(0,s.makeArrayPusher)(a.default.prototype.polygonMemberParser)}},g.prototype.POINTMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{Point:(0,s.makeArrayPusher)(a.default.prototype.readFlatCoordinatesFromNode)}},g.prototype.LINESTRINGMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{LineString:(0,s.makeArrayPusher)(a.default.prototype.readLineString)}},g.prototype.POLYGONMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{Polygon:(0,s.makeArrayPusher)(a.default.prototype.readPolygon)}},g.prototype.RING_PARSERS={"http://www.opengis.net/gml/3.2":{LinearRing:(0,s.makeReplacer)(a.default.prototype.readFlatLinearRing),Ring:(0,s.makeReplacer)(g.prototype.readFlatCurveRing)}},g.prototype.RING_SERIALIZERS={"http://www.opengis.net/gml/3.2":{exterior:(0,s.makeChildAppender)(o.default.prototype.writeRing),interior:(0,s.makeChildAppender)(o.default.prototype.writeRing)}},g.prototype.ENVELOPE_SERIALIZERS={"http://www.opengis.net/gml/3.2":{lowerCorner:(0,s.makeChildAppender)(e.writeStringTextNode),upperCorner:(0,s.makeChildAppender)(e.writeStringTextNode)}},g.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS={"http://www.opengis.net/gml/3.2":{surfaceMember:(0,s.makeChildAppender)(o.default.prototype.writeSurfaceOrPolygonMember),polygonMember:(0,s.makeChildAppender)(o.default.prototype.writeSurfaceOrPolygonMember)}},g.prototype.POINTMEMBER_SERIALIZERS={"http://www.opengis.net/gml/3.2":{pointMember:(0,s.makeChildAppender)(o.default.prototype.writePointMember)}},g.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS={"http://www.opengis.net/gml/3.2":{lineStringMember:(0,s.makeChildAppender)(o.default.prototype.writeLineStringOrCurveMember),curveMember:(0,s.makeChildAppender)(o.default.prototype.writeLineStringOrCurveMember)}},g.prototype.GEOMETRY_SERIALIZERS={"http://www.opengis.net/gml/3.2":{Curve:(0,s.makeChildAppender)(o.default.prototype.writeCurveOrLineString),MultiCurve:(0,s.makeChildAppender)(o.default.prototype.writeMultiCurveOrLineString),Point:(0,s.makeChildAppender)(g.prototype.writePoint),MultiPoint:(0,s.makeChildAppender)(o.default.prototype.writeMultiPoint),LineString:(0,s.makeChildAppender)(o.default.prototype.writeCurveOrLineString),MultiLineString:(0,s.makeChildAppender)(o.default.prototype.writeMultiCurveOrLineString),LinearRing:(0,s.makeChildAppender)(o.default.prototype.writeLinearRing),Polygon:(0,s.makeChildAppender)(o.default.prototype.writeSurfaceOrPolygon),MultiPolygon:(0,s.makeChildAppender)(o.default.prototype.writeMultiSurfaceOrPolygon),Surface:(0,s.makeChildAppender)(o.default.prototype.writeSurfaceOrPolygon),MultiSurface:(0,s.makeChildAppender)(o.default.prototype.writeMultiSurfaceOrPolygon),Envelope:(0,s.makeChildAppender)(o.default.prototype.writeEnvelope)}},r.default=g},{"../format/xsd.js":199,"../xml.js":418,"./GML2.js":149,"./GML3.js":150,"./GMLBase.js":152}],152:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.GMLNS=void 0;var f=n(e("../Feature.js")),h=n(e("../geom/Geometry.js")),o=n(e("../geom/LineString.js")),a=n(e("../geom/LinearRing.js")),s=n(e("../geom/MultiLineString.js")),u=n(e("../geom/MultiPoint.js")),l=n(e("../geom/MultiPolygon.js")),c=n(e("../geom/Point.js")),p=n(e("../geom/Polygon.js")),d=n(e("./XMLFeature.js")),g=e("../array.js"),_=e("../xml.js"),y=e("../proj.js"),A=e("./Feature.js");function n(e){return e&&e.__esModule?e:{default:e}}function m(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function v(e,t,r){t=w(t);var n=e,t=b()?Reflect.construct(t,r||[],w(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(b=function(){return!!e})()}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function E(e,t){return(E=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}r.GMLNS="http://www.opengis.net/gml";var C=/^\s*$/,e=function(){function r(e){var t;if(this instanceof r)return e=e||{},(t=v(this,r)).featureType=e.featureType,t.featureNS=e.featureNS,t.srsName=e.srsName,t.schemaLocation="",t.FEATURE_COLLECTION_PARSERS={},t.FEATURE_COLLECTION_PARSERS[t.namespace]={featureMember:(0,_.makeArrayPusher)(t.readFeaturesInternal),featureMembers:(0,_.makeReplacer)(t.readFeaturesInternal)},t.supportedMediaTypes=["application/gml+xml"],t;throw new TypeError("Cannot call a class as a function")}var e,t=r,n=d.default;if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&E(t,n),t=r,(n=[{key:"readFeaturesInternal",value:function(e,t){var r=e.localName,n=null;if("FeatureCollection"==r)n=(0,_.pushParseAndPop)([],this.FEATURE_COLLECTION_PARSERS,e,t,this);else if("featureMembers"==r||"featureMember"==r||"member"==r){var i=t[0],o=i.featureType,a=i.featureNS;if(!o&&e.childNodes){for(var o=[],a={},s=0,u=e.childNodes.length;s<u;++s){var l=e.childNodes[s];if(1===l.nodeType){var c=l.nodeName.split(":").pop();if(!o.includes(c)){var f,h="",p=0,d=l.namespaceURI;for(f in a){if(a[f]===d){h=f;break}++p}h||(a[h="p"+p]=d),o.push(h+":"+c)}}}"featureMember"!=r&&(i.featureType=o,i.featureNS=a)}"string"==typeof a&&(i=a,(a={}).p0=i);var g,y={},A=Array.isArray(o)?o:[o];for(g in a){for(var m={},v=0,b=A.length;v<b;++v)(A[v].includes(":")?A[v].split(":")[0]:"p0")===g&&(m[A[v].split(":").pop()]=("featureMembers"==r?(0,_.makeArrayPusher):(0,_.makeReplacer))(this.readFeatureElement,this));y[a[g]]=m}n="featureMember"==r||"member"==r?(0,_.pushParseAndPop)(void 0,y,e,t):(0,_.pushParseAndPop)([],y,e,t)}return n=null===n?[]:n}},{key:"readGeometryOrExtent",value:function(e,t){var r=t[0];return r.srsName=e.firstElementChild.getAttribute("srsName"),r.srsDimension=e.firstElementChild.getAttribute("srsDimension"),(0,_.pushParseAndPop)(null,this.GEOMETRY_PARSERS,e,t,this)}},{key:"readExtentElement",value:function(e,t){var r=t[0],e=this.readGeometryOrExtent(e,t);return e?(0,A.transformExtentWithOptions)(e,r):void 0}},{key:"readGeometryElement",value:function(e,t){var r=t[0],e=this.readGeometryOrExtent(e,t);return e?(0,A.transformGeometryWithOptions)(e,!1,r):void 0}},{key:"readFeatureElementInternal",value:function(e,t,r){for(var n,i,o={},a=e.firstElementChild;a;a=a.nextElementSibling){var s=void 0,u=a.localName,l=(0===a.childNodes.length||1===a.childNodes.length&&(3===a.firstChild.nodeType||4===a.firstChild.nodeType)?(s=(0,_.getAllTextContent)(a,!1),C.test(s)&&(s=void 0)):(s=r?"boundedBy"===u?this.readExtentElement(a,t):this.readGeometryElement(a,t):s)?"boundedBy"!==u&&(n=u):s=this.readFeatureElementInternal(a,t,!1),a.attributes.length);if(0<l&&!(s instanceof h.default))for(var s={_content_:s},c=0;c<l;c++)s[a.attributes[c].name]=a.attributes[c].value;o[u]?(o[u]instanceof Array||(o[u]=[o[u]]),o[u].push(s)):o[u]=s}return r?(i=new f.default(o),n&&i.setGeometryName(n),(e=e.getAttribute("fid")||(0,_.getAttributeNS)(e,this.namespace,"id"))&&i.setId(e),i):o}},{key:"readFeatureElement",value:function(e,t){return this.readFeatureElementInternal(e,t,!0)}},{key:"readPoint",value:function(e,t){e=this.readFlatCoordinatesFromNode(e,t);if(e)return new c.default(e,"XYZ")}},{key:"readMultiPoint",value:function(e,t){e=(0,_.pushParseAndPop)([],this.MULTIPOINT_PARSERS,e,t,this);if(e)return new u.default(e)}},{key:"readMultiLineString",value:function(e,t){e=(0,_.pushParseAndPop)([],this.MULTILINESTRING_PARSERS,e,t,this);if(e)return new s.default(e)}},{key:"readMultiPolygon",value:function(e,t){e=(0,_.pushParseAndPop)([],this.MULTIPOLYGON_PARSERS,e,t,this);if(e)return new l.default(e)}},{key:"pointMemberParser",value:function(e,t){(0,_.parseNode)(this.POINTMEMBER_PARSERS,e,t,this)}},{key:"lineStringMemberParser",value:function(e,t){(0,_.parseNode)(this.LINESTRINGMEMBER_PARSERS,e,t,this)}},{key:"polygonMemberParser",value:function(e,t){(0,_.parseNode)(this.POLYGONMEMBER_PARSERS,e,t,this)}},{key:"readLineString",value:function(e,t){e=this.readFlatCoordinatesFromNode(e,t);if(e)return new o.default(e,"XYZ")}},{key:"readFlatLinearRing",value:function(e,t){e=(0,_.pushParseAndPop)(null,this.GEOMETRY_FLAT_COORDINATES_PARSERS,e,t,this);if(e)return e}},{key:"readLinearRing",value:function(e,t){e=this.readFlatCoordinatesFromNode(e,t);if(e)return new a.default(e,"XYZ")}},{key:"readPolygon",value:function(e,t){var r=(0,_.pushParseAndPop)([null],this.FLAT_LINEAR_RINGS_PARSERS,e,t,this);if(r&&r[0]){for(var n=r[0],i=[n.length],o=1,a=r.length;o<a;++o)(0,g.extend)(n,r[o]),i.push(n.length);return new p.default(n,"XYZ",i)}}},{key:"readFlatCoordinatesFromNode",value:function(e,t){return(0,_.pushParseAndPop)(null,this.GEOMETRY_FLAT_COORDINATES_PARSERS,e,t,this)}},{key:"readGeometryFromNode",value:function(e,t){return this.readGeometryElement(e,[this.getReadOptions(e,t||{})])||null}},{key:"readFeaturesFromNode",value:function(e,t){var r={featureType:this.featureType,featureNS:this.featureNS};return Object.assign(r,this.getReadOptions(e,t)),this.readFeaturesInternal(e,[r])||[]}},{key:"readProjectionFromNode",value:function(e){return(0,y.get)(this.srsName||e.firstElementChild.getAttribute("srsName"))}}])&&m(t.prototype,n),e&&m(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();e.prototype.namespace="http://www.opengis.net/gml",e.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{}},e.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{}},e.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{}},e.prototype.MULTIPOINT_PARSERS={"http://www.opengis.net/gml":{pointMember:(0,_.makeArrayPusher)(e.prototype.pointMemberParser),pointMembers:(0,_.makeArrayPusher)(e.prototype.pointMemberParser)}},e.prototype.MULTILINESTRING_PARSERS={"http://www.opengis.net/gml":{lineStringMember:(0,_.makeArrayPusher)(e.prototype.lineStringMemberParser),lineStringMembers:(0,_.makeArrayPusher)(e.prototype.lineStringMemberParser)}},e.prototype.MULTIPOLYGON_PARSERS={"http://www.opengis.net/gml":{polygonMember:(0,_.makeArrayPusher)(e.prototype.polygonMemberParser),polygonMembers:(0,_.makeArrayPusher)(e.prototype.polygonMemberParser)}},e.prototype.POINTMEMBER_PARSERS={"http://www.opengis.net/gml":{Point:(0,_.makeArrayPusher)(e.prototype.readFlatCoordinatesFromNode)}},e.prototype.LINESTRINGMEMBER_PARSERS={"http://www.opengis.net/gml":{LineString:(0,_.makeArrayPusher)(e.prototype.readLineString)}},e.prototype.POLYGONMEMBER_PARSERS={"http://www.opengis.net/gml":{Polygon:(0,_.makeArrayPusher)(e.prototype.readPolygon)}},e.prototype.RING_PARSERS={"http://www.opengis.net/gml":{LinearRing:(0,_.makeReplacer)(e.prototype.readFlatLinearRing)}},r.default=e},{"../Feature.js":82,"../array.js":110,"../geom/Geometry.js":203,"../geom/LineString.js":205,"../geom/LinearRing.js":206,"../geom/MultiLineString.js":207,"../geom/MultiPoint.js":208,"../geom/MultiPolygon.js":209,"../geom/Point.js":210,"../geom/Polygon.js":211,"../proj.js":283,"../xml.js":418,"./Feature.js":147,"./XMLFeature.js":171}],153:[function(e,D,t){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(e("../Feature.js")),a=n(e("../geom/LineString.js")),s=n(e("../geom/MultiLineString.js")),u=n(e("../geom/Point.js")),l=n(e("./XMLFeature.js")),c=e("../xml.js"),f=e("../proj.js"),r=e("./xsd.js"),h=e("./Feature.js");function n(e){return e&&e.__esModule?e:{default:e}}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function d(e,t,r){t=y(t);var n=e,t=g()?Reflect.construct(t,r||[],y(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(g=function(){return!!e})()}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function A(e,t){return(A=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var m=[null,"http://www.topografix.com/GPX/1/0","http://www.topografix.com/GPX/1/1"],v={rte:k,trk:B,wpt:T},b=(0,c.makeStructureNS)(m,{rte:(0,c.makeArrayPusher)(k),trk:(0,c.makeArrayPusher)(B),wpt:(0,c.makeArrayPusher)(T)}),_=(0,c.makeStructureNS)(m,{text:(0,c.makeObjectPropertySetter)(r.readString,"linkText"),type:(0,c.makeObjectPropertySetter)(r.readString,"linkType")}),w=(0,c.makeStructureNS)(m,{name:(0,c.makeObjectPropertySetter)(r.readString),email:function(e,t){var t=t[t.length-1],r=e.getAttribute("id"),e=e.getAttribute("domain");null!==r&&null!==e&&(t.email="".concat(r,"@").concat(e))},link:O}),E=(0,c.makeStructureNS)(m,{name:(0,c.makeObjectPropertySetter)(r.readString),desc:(0,c.makeObjectPropertySetter)(r.readString),author:(0,c.makeObjectPropertySetter)(function(e,t){e=(0,c.pushParseAndPop)({},w,e,t);if(e)return e}),copyright:(0,c.makeObjectPropertySetter)(function(e,t){t=(0,c.pushParseAndPop)({},C,e,t);if(t)return null!==(e=e.getAttribute("author"))&&(t.author=e),t}),link:O,time:(0,c.makeObjectPropertySetter)(r.readDateTime),keywords:(0,c.makeObjectPropertySetter)(r.readString),bounds:function(e,t){var t=t[t.length-1],r=e.getAttribute("minlat"),n=e.getAttribute("minlon"),i=e.getAttribute("maxlat"),e=e.getAttribute("maxlon");null!==n&&null!==r&&null!==e&&null!==i&&(t.bounds=[[parseFloat(n),parseFloat(r)],[parseFloat(e),parseFloat(i)]])},extensions:P}),C=(0,c.makeStructureNS)(m,{year:(0,c.makeObjectPropertySetter)(r.readPositiveInteger),license:(0,c.makeObjectPropertySetter)(r.readString)}),I=(0,c.makeStructureNS)(m,{rte:(0,c.makeChildAppender)(function(e,t,r){var n=r[0],i=t.getProperties(),e={node:e},t=(e.properties=i,t.getGeometry());"LineString"==t.getType()&&(t=(0,h.transformGeometryWithOptions)(t,!0,n),e.geometryLayout=t.getLayout(),i.rtept=t.getCoordinates());n=r[r.length-1].node,t=q[n.namespaceURI],n=(0,c.makeSequence)(i,t);(0,c.pushSerializeAndPop)(e,H,c.OBJECT_PROPERTY_NODE_FACTORY,n,r,t)}),trk:(0,c.makeChildAppender)(function(e,t,r){var n=r[0],i=t.getProperties(),e={node:e},t=(e.properties=i,t.getGeometry());"MultiLineString"==t.getType()&&(t=(0,h.transformGeometryWithOptions)(t,!0,n),i.trkseg=t.getLineStrings());n=r[r.length-1].node,t=Y[n.namespaceURI],n=(0,c.makeSequence)(i,t);(0,c.pushSerializeAndPop)(e,V,c.OBJECT_PROPERTY_NODE_FACTORY,n,r,t)}),wpt:(0,c.makeChildAppender)(function(e,t,r){var n=r[0],i=r[r.length-1],t=(i.properties=t.getProperties(),t.getGeometry());"Point"==t.getType()&&(t=(0,h.transformGeometryWithOptions)(t,!0,n),i.geometryLayout=t.getLayout(),R(e,t.getCoordinates(),r))})}),e=function(){function r(e){var t;if(this instanceof r)return e=e||{},(t=d(this,r)).dataProjection=(0,f.get)("EPSG:4326"),t.readExtensions_=e.readExtensions,t;throw new TypeError("Cannot call a class as a function")}var e,t=r,n=l.default;if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&A(t,n),t=r,(n=[{key:"handleReadExtensions_",value:function(e){for(var t=0,r=(e=e||[]).length;t<r;++t){var n,i=e[t];this.readExtensions_&&(n=i.get("extensionsNode_")||null,this.readExtensions_(i,n)),i.set("extensionsNode_",void 0)}}},{key:"readMetadata",value:function(e){return e?"string"==typeof e?this.readMetadataFromDocument((0,c.parse)(e)):(0,c.isDocument)(e)?this.readMetadataFromDocument(e):this.readMetadataFromNode(e):null}},{key:"readMetadataFromDocument",value:function(e){for(var t=e.firstChild;t;t=t.nextSibling)if(t.nodeType===Node.ELEMENT_NODE){var r=this.readMetadataFromNode(t);if(r)return r}return null}},{key:"readMetadataFromNode",value:function(e){if(m.includes(e.namespaceURI))for(var t=e.firstElementChild;t;t=t.nextElementSibling)if(m.includes(t.namespaceURI)&&"metadata"===t.localName)return(0,c.pushParseAndPop)({},E,t,[]);return null}},{key:"readFeatureFromNode",value:function(e,t){var r;return m.includes(e.namespaceURI)&&(r=v[e.localName])&&(r=r(e,[this.getReadOptions(e,t)]))?(this.handleReadExtensions_([r]),r):null}},{key:"readFeaturesFromNode",value:function(e,t){return m.includes(e.namespaceURI)&&"gpx"==e.localName&&(e=(0,c.pushParseAndPop)([],b,e,[this.getReadOptions(e,t)]))?(this.handleReadExtensions_(e),e):[]}},{key:"writeFeaturesNode",value:function(e,t){t=this.adaptOptions(t);var r=(0,c.createElementNS)("http://www.topografix.com/GPX/1/1","gpx");return r.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xsi",c.XML_SCHEMA_INSTANCE_URI),r.setAttributeNS(c.XML_SCHEMA_INSTANCE_URI,"xsi:schemaLocation","http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd"),r.setAttribute("version","1.1"),r.setAttribute("creator","OpenLayers"),(0,c.pushSerializeAndPop)({node:r},I,ee,e,[t]),r}}])&&p(t.prototype,n),e&&p(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}(),S=(0,c.makeStructureNS)(m,{name:(0,c.makeObjectPropertySetter)(r.readString),cmt:(0,c.makeObjectPropertySetter)(r.readString),desc:(0,c.makeObjectPropertySetter)(r.readString),src:(0,c.makeObjectPropertySetter)(r.readString),link:O,number:(0,c.makeObjectPropertySetter)(r.readPositiveInteger),extensions:P,type:(0,c.makeObjectPropertySetter)(r.readString),rtept:function(e,t){var r=(0,c.pushParseAndPop)({},L,e,t);r&&j((t=t[t.length-1]).flatCoordinates,t.layoutOptions,e,r)}}),L=(0,c.makeStructureNS)(m,{ele:(0,c.makeObjectPropertySetter)(r.readDecimal),time:(0,c.makeObjectPropertySetter)(r.readDateTime)}),Q=(0,c.makeStructureNS)(m,{name:(0,c.makeObjectPropertySetter)(r.readString),cmt:(0,c.makeObjectPropertySetter)(r.readString),desc:(0,c.makeObjectPropertySetter)(r.readString),src:(0,c.makeObjectPropertySetter)(r.readString),link:O,number:(0,c.makeObjectPropertySetter)(r.readPositiveInteger),type:(0,c.makeObjectPropertySetter)(r.readString),extensions:P,trkseg:function(e,t){var r=t[t.length-1],e=((0,c.parseNode)(F,e,t),r.flatCoordinates);r.ends.push(e.length)}}),F=(0,c.makeStructureNS)(m,{trkpt:function(e,t){var r=(0,c.pushParseAndPop)({},N,e,t);r&&j((t=t[t.length-1]).flatCoordinates,t.layoutOptions,e,r)}}),N=(0,c.makeStructureNS)(m,{ele:(0,c.makeObjectPropertySetter)(r.readDecimal),time:(0,c.makeObjectPropertySetter)(r.readDateTime)}),G=(0,c.makeStructureNS)(m,{ele:(0,c.makeObjectPropertySetter)(r.readDecimal),time:(0,c.makeObjectPropertySetter)(r.readDateTime),magvar:(0,c.makeObjectPropertySetter)(r.readDecimal),geoidheight:(0,c.makeObjectPropertySetter)(r.readDecimal),name:(0,c.makeObjectPropertySetter)(r.readString),cmt:(0,c.makeObjectPropertySetter)(r.readString),desc:(0,c.makeObjectPropertySetter)(r.readString),src:(0,c.makeObjectPropertySetter)(r.readString),link:O,sym:(0,c.makeObjectPropertySetter)(r.readString),type:(0,c.makeObjectPropertySetter)(r.readString),fix:(0,c.makeObjectPropertySetter)(r.readString),sat:(0,c.makeObjectPropertySetter)(r.readPositiveInteger),hdop:(0,c.makeObjectPropertySetter)(r.readDecimal),vdop:(0,c.makeObjectPropertySetter)(r.readDecimal),pdop:(0,c.makeObjectPropertySetter)(r.readDecimal),ageofdgpsdata:(0,c.makeObjectPropertySetter)(r.readDecimal),dgpsid:(0,c.makeObjectPropertySetter)(r.readPositiveInteger),extensions:P}),U=["text","type"],z=(0,c.makeStructureNS)(m,{text:(0,c.makeChildAppender)(r.writeStringTextNode),type:(0,c.makeChildAppender)(r.writeStringTextNode)}),q=(0,c.makeStructureNS)(m,["name","cmt","desc","src","link","number","type","rtept"]),H=(0,c.makeStructureNS)(m,{name:(0,c.makeChildAppender)(r.writeStringTextNode),cmt:(0,c.makeChildAppender)(r.writeStringTextNode),desc:(0,c.makeChildAppender)(r.writeStringTextNode),src:(0,c.makeChildAppender)(r.writeStringTextNode),link:(0,c.makeChildAppender)(M),number:(0,c.makeChildAppender)(r.writeNonNegativeIntegerTextNode),type:(0,c.makeChildAppender)(r.writeStringTextNode),rtept:(0,c.makeArraySerializer)((0,c.makeChildAppender)(R))}),W=(0,c.makeStructureNS)(m,["ele","time"]),Y=(0,c.makeStructureNS)(m,["name","cmt","desc","src","link","number","type","trkseg"]),V=(0,c.makeStructureNS)(m,{name:(0,c.makeChildAppender)(r.writeStringTextNode),cmt:(0,c.makeChildAppender)(r.writeStringTextNode),desc:(0,c.makeChildAppender)(r.writeStringTextNode),src:(0,c.makeChildAppender)(r.writeStringTextNode),link:(0,c.makeChildAppender)(M),number:(0,c.makeChildAppender)(r.writeNonNegativeIntegerTextNode),type:(0,c.makeChildAppender)(r.writeStringTextNode),trkseg:(0,c.makeArraySerializer)((0,c.makeChildAppender)(function(e,t,r){e={node:e};e.geometryLayout=t.getLayout(),e.properties={},(0,c.pushSerializeAndPop)(e,X,K,t.getCoordinates(),r)}))}),K=(0,c.makeSimpleNodeFactory)("trkpt"),X=(0,c.makeStructureNS)(m,{trkpt:(0,c.makeChildAppender)(R)}),J=(0,c.makeStructureNS)(m,["ele","time","magvar","geoidheight","name","cmt","desc","src","link","sym","type","fix","sat","hdop","vdop","pdop","ageofdgpsdata","dgpsid"]),Z=(0,c.makeStructureNS)(m,{ele:(0,c.makeChildAppender)(r.writeDecimalTextNode),time:(0,c.makeChildAppender)(r.writeDateTimeTextNode),magvar:(0,c.makeChildAppender)(r.writeDecimalTextNode),geoidheight:(0,c.makeChildAppender)(r.writeDecimalTextNode),name:(0,c.makeChildAppender)(r.writeStringTextNode),cmt:(0,c.makeChildAppender)(r.writeStringTextNode),desc:(0,c.makeChildAppender)(r.writeStringTextNode),src:(0,c.makeChildAppender)(r.writeStringTextNode),link:(0,c.makeChildAppender)(M),sym:(0,c.makeChildAppender)(r.writeStringTextNode),type:(0,c.makeChildAppender)(r.writeStringTextNode),fix:(0,c.makeChildAppender)(r.writeStringTextNode),sat:(0,c.makeChildAppender)(r.writeNonNegativeIntegerTextNode),hdop:(0,c.makeChildAppender)(r.writeDecimalTextNode),vdop:(0,c.makeChildAppender)(r.writeDecimalTextNode),pdop:(0,c.makeChildAppender)(r.writeDecimalTextNode),ageofdgpsdata:(0,c.makeChildAppender)(r.writeDecimalTextNode),dgpsid:(0,c.makeChildAppender)(r.writeNonNegativeIntegerTextNode)}),$={Point:"wpt",LineString:"rte",MultiLineString:"trk"};function ee(e,t,r){e=e.getGeometry();if(e){e=$[e.getType()];if(e)return t=t[t.length-1].node,(0,c.createElementNS)(t.namespaceURI,e)}}function j(e,t,r,n){return e.push(parseFloat(r.getAttribute("lon")),parseFloat(r.getAttribute("lat"))),"ele"in n?(e.push(n.ele),delete n.ele,t.hasZ=!0):e.push(0),"time"in n?(e.push(n.time),delete n.time,t.hasM=!0):e.push(0),e}function x(e,t,r){var n="XY",i=2;if(e.hasZ&&e.hasM?(n="XYZM",i=4):e.hasZ?(n="XYZ",i=3):e.hasM&&(n="XYM",i=3),4!==i){for(var o=0,a=t.length/4;o<a;o++)t[o*i]=t[4*o],t[o*i+1]=t[4*o+1],e.hasZ&&(t[o*i+2]=t[4*o+2]),e.hasM&&(t[o*i+2]=t[4*o+3]);if(t.length=t.length/4*i,r)for(var s=0,u=r.length;s<u;s++)r[s]=r[s]/4*i}return n}function O(e,t){var r=t[t.length-1],n=e.getAttribute("href");null!==n&&(r.link=n),(0,c.parseNode)(_,e,t)}function P(e,t){t[t.length-1].extensionsNode_=e}function k(e,t){var r,n=t[0],e=(0,c.pushParseAndPop)({flatCoordinates:[],layoutOptions:{}},S,e,t);if(e)return t=e.flatCoordinates,delete e.flatCoordinates,r=e.layoutOptions,delete e.layoutOptions,r=x(r,t),t=new a.default(t,r),(0,h.transformGeometryWithOptions)(t,!1,n),(r=new o.default(t)).setProperties(e,!0),r}function B(e,t){var r,n,i=t[0],e=(0,c.pushParseAndPop)({flatCoordinates:[],ends:[],layoutOptions:{}},Q,e,t);if(e)return t=e.flatCoordinates,delete e.flatCoordinates,r=e.ends,delete e.ends,n=e.layoutOptions,delete e.layoutOptions,n=x(n,t,r),t=new s.default(t,n,r),(0,h.transformGeometryWithOptions)(t,!1,i),(n=new o.default(t)).setProperties(e,!0),n}function T(e,t){var r,n=t[0],t=(0,c.pushParseAndPop)({},G,e,t);if(t)return e=x(r={},r=j([],r,e,t)),r=new u.default(r,e),(0,h.transformGeometryWithOptions)(r,!1,n),(e=new o.default(r)).setProperties(t,!0),e}function M(e,t,r){e.setAttribute("href",t);t=r[r.length-1].properties,t=[t.linkText,t.linkType];(0,c.pushSerializeAndPop)({node:e},z,c.OBJECT_PROPERTY_NODE_FACTORY,t,r,U)}function R(e,t,r){var n=r[r.length-1],i=n.node.namespaceURI,o=n.properties;switch(e.setAttributeNS(null,"lat",String(t[1])),e.setAttributeNS(null,"lon",String(t[0])),n.geometryLayout){case"XYZM":0!==t[3]&&(o.time=t[3]);case"XYZ":0!==t[2]&&(o.ele=t[2]);break;case"XYM":0!==t[2]&&(o.time=t[2])}n=("rtept"==e.nodeName?W:J)[i],i=(0,c.makeSequence)(o,n);(0,c.pushSerializeAndPop)({node:e,properties:o},Z,c.OBJECT_PROPERTY_NODE_FACTORY,i,r,n)}t.default=e},{"../Feature.js":82,"../geom/LineString.js":205,"../geom/MultiLineString.js":207,"../geom/Point.js":210,"../proj.js":283,"../xml.js":418,"./Feature.js":147,"./XMLFeature.js":171,"./xsd.js":199}],154:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("../Feature.js")),a=n(e("./JSONFeature.js")),s=n(e("../render/Feature.js")),l=e("./Feature.js"),u=e("../geom/flat/deflate.js"),c=e("../geom/SimpleGeometry.js"),f=e("../proj.js"),h=e("../obj.js");function n(e){return e&&e.__esModule?e:{default:e}}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function d(e,t,r){t=y(t);var n=e,t=g()?Reflect.construct(t,r||[],y(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(g=function(){return!!e})()}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function A(e,t){return(A=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}e=function(){function r(e){var t;if(this instanceof r)return e=e||{},(t=d(this,r)).dataProjection=(0,f.get)(e.dataProjection||"EPSG:4326"),e.featureProjection&&(t.defaultFeatureProjection=(0,f.get)(e.featureProjection)),e.featureClass&&(t.featureClass=e.featureClass),t.geometryName_=e.geometryName,t.extractGeometryName_=e.extractGeometryName,t.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"],t;throw new TypeError("Cannot call a class as a function")}var e,t=r,n=a.default;if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&A(t,n),t=r,(n=[{key:"readFeatureFromObject",value:function(e,t){var r,n=m((e="Feature"===e.type?e:{type:"Feature",geometry:e,properties:null}).geometry);return this.featureClass===s.default?(0,l.createRenderFeature)({geometry:n,id:e.id,properties:e.properties},t):(r=new o.default,this.geometryName_?r.setGeometryName(this.geometryName_):this.extractGeometryName_&&e.geometry_name&&r.setGeometryName(e.geometry_name),r.setGeometry((0,l.createGeometry)(n,t)),"id"in e&&r.setId(e.id),e.properties&&r.setProperties(e.properties,!0),r)}},{key:"readFeaturesFromObject",value:function(e,t){var r=null;if("FeatureCollection"===e.type)for(var r=[],n=e.features,i=0,o=n.length;i<o;++i){var a=this.readFeatureFromObject(n[i],t);a&&r.push(a)}else r=[this.readFeatureFromObject(e,t)];return r.flat()}},{key:"readGeometryFromObject",value:function(e,t){var r=e;return r=m(e),(0,l.createGeometry)(r,t)}},{key:"readProjectionFromObject",value:function(e){var t,e=e.crs;if(e)if("name"==e.type)t=(0,f.get)(e.properties.name);else{if("EPSG"!==e.type)throw new Error("Unknown SRS type");t=(0,f.get)("EPSG:"+e.properties.code)}else t=this.dataProjection;return t}},{key:"writeFeatureObject",value:function(e,t){t=this.adaptOptions(t);var r,n={type:"Feature",geometry:null,properties:null},i=e.getId();return void 0!==i&&(n.id=i),e.hasProperties()&&(i=e.getProperties(),(r=e.getGeometry())&&(n.geometry=v(r,t),delete i[e.getGeometryName()]),(0,h.isEmpty)(i)||(n.properties=i)),n}},{key:"writeFeaturesObject",value:function(e,t){t=this.adaptOptions(t);for(var r=[],n=0,i=e.length;n<i;++n)r.push(this.writeFeatureObject(e[n],t));return{type:"FeatureCollection",features:r}}},{key:"writeGeometryObject",value:function(e,t){return v(e,this.adaptOptions(t))}}])&&p(t.prototype,n),e&&p(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();function m(e){if(!e)return null;var t,r,n,i,o,a,s;switch(e.type){case"Point":t=function(e){e=e.coordinates;return{type:"Point",flatCoordinates:e,layout:(0,c.getLayoutForStride)(e.length)}}(e);break;case"LineString":a=(a=e).coordinates,t={type:"LineString",flatCoordinates:s=a.flat(),ends:[s.length],layout:(0,c.getLayoutForStride)((null==(s=a[0])?void 0:s.length)||2)};break;case"Polygon":a=(a=e).coordinates,s=[],o=null==(o=a[0])||null==(o=o[0])?void 0:o.length,t={type:"Polygon",flatCoordinates:s,ends:(0,u.deflateCoordinatesArray)(s,0,a,o),layout:(0,c.getLayoutForStride)(o)};break;case"MultiPoint":t={type:"MultiPoint",flatCoordinates:(o=(o=e).coordinates).flat(),layout:(0,c.getLayoutForStride)((null==(o=o[0])?void 0:o.length)||2)};break;case"MultiLineString":r=(r=e).coordinates,n=(null==(n=r[0])||null==(n=n[0])?void 0:n.length)||2,t={type:"MultiLineString",flatCoordinates:i=[],ends:(0,u.deflateCoordinatesArray)(i,0,r,n),layout:(0,c.getLayoutForStride)(n)};break;case"MultiPolygon":i=(i=e).coordinates,r=[],n=(null==(n=i[0])||null==(n=n[0])?void 0:n[0].length)||2,t={type:"MultiPolygon",flatCoordinates:r,ends:(0,u.deflateMultiCoordinatesArray)(r,0,i,n),layout:(0,c.getLayoutForStride)(n)};break;case"GeometryCollection":t=e.geometries.map(function(e){return m(e)});break;default:throw new Error("Unsupported GeoJSON type: "+e.type)}return t}function v(e,t){var r,n,i,o,a,s,u=(e=(0,l.transformGeometryWithOptions)(e,!0,t)).getType();switch(u){case"Point":r={type:"Point",coordinates:e.getCoordinates()};break;case"LineString":r={type:"LineString",coordinates:e.getCoordinates()};break;case"Polygon":o=e,(a=t)&&(s=a.rightHanded),r={type:"Polygon",coordinates:o.getCoordinates(s)};break;case"MultiPoint":r={type:"MultiPoint",coordinates:e.getCoordinates()};break;case"MultiLineString":r={type:"MultiLineString",coordinates:e.getCoordinates()};break;case"MultiPolygon":a=e,(o=t)&&(i=o.rightHanded),r={type:"MultiPolygon",coordinates:a.getCoordinates(i)};break;case"GeometryCollection":s=e,n=t,delete(n=Object.assign({},n)).featureProjection,r={type:"GeometryCollection",geometries:s.getGeometriesArray().map(function(e){return v(e,n)})};break;case"Circle":r={type:"GeometryCollection",geometries:[]};break;default:throw new Error("Unsupported geometry type: "+u)}return r}r.default=e},{"../Feature.js":82,"../geom/SimpleGeometry.js":212,"../geom/flat/deflate.js":217,"../obj.js":281,"../proj.js":283,"../render/Feature.js":295,"./Feature.js":147,"./JSONFeature.js":157}],155:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var C=n(e("../Feature.js")),I=n(e("../geom/LineString.js")),o=n(e("./TextFeature.js")),a=e("../proj.js"),S=e("./Feature.js");function n(e){return e&&e.__esModule?e:{default:e}}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function u(e,t,r){t=c(t);var n=e,t=l()?Reflect.construct(t,r||[],c(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(l=function(){return!!e})()}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var j=/^B(\d{2})(\d{2})(\d{2})(\d{2})(\d{5})([NS])(\d{3})(\d{5})([EW])([AV])(\d{5})(\d{5})/,x=/^H.([A-Z]{3}).*?:(.*)/,O=/^HFDTE(\d{2})(\d{2})(\d{2})/,P=/^HFDTEDATE:(\d{2})(\d{2})(\d{2}),(\d{2})/,k=/\r\n|\r|\n/,e=function(){function r(e){var t;if(this instanceof r)return e=e||{},(t=u(this,r)).dataProjection=(0,a.get)("EPSG:4326"),t.altitudeMode_=e.altitudeMode||"none",t.lad_=!1,t.lod_=!1,t.ladStart_=0,t.ladStop_=0,t.lodStart_=0,t.lodStop_=0,t;throw new TypeError("Cannot call a class as a function")}var e,t=r,n=o.default;if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&f(t,n),t=r,(n=[{key:"readFeatureFromText",value:function(e,t){for(var r=this.altitudeMode_,n=e.split(k),i={},o=[],a=2e3,s=0,u=1,l=-1,c=0,f=n.length;c<f;++c){var h,p,d,g,y,A=n[c],m=void 0;if("B"==A.charAt(0))(m=j.exec(A))&&(h=parseInt(m[1],10),p=parseInt(m[2],10),d=parseInt(m[3],10),y=parseInt(m[4],10)+parseInt(m[5],10)/6e4,this.lad_&&(y+=parseInt(A.slice(this.ladStart_,this.ladStop_),10)/6e4/Math.pow(10,this.ladStop_-this.ladStart_)),"S"==m[6]&&(y=-y),g=parseInt(m[7],10)+parseInt(m[8],10)/6e4,this.lod_&&(g+=parseInt(A.slice(this.lodStart_,this.lodStop_),10)/6e4/Math.pow(10,this.lodStop_-this.lodStart_)),"W"==m[9]&&(g=-g),o.push(g,y),"none"!=r&&(g=void 0,g="gps"==r?parseInt(m[11],10):"barometric"==r?parseInt(m[12],10):0,o.push(g)),(y=Date.UTC(a,s,u,h,p,d))<l&&(y=Date.UTC(a,s,u+1,h,p,d)),o.push(y/1e3),l=y);else if("H"==A.charAt(0))(m=(m=P.exec(A))||O.exec(A))?(u=parseInt(m[1],10),s=parseInt(m[2],10)-1,a=2e3+parseInt(m[3],10)):(m=x.exec(A))&&(i[m[1]]=m[2].trim());else if("I"==A.charAt(0))for(var v=parseInt(A.slice(1,3),10),b=0;b<v;b++){var _,w,E=A.slice(7+7*b,10+7*b);"LAD"!==E&&"LOD"!==E||(_=parseInt(A.slice(3+7*b,5+7*b),10)-1,w=parseInt(A.slice(5+7*b,7+7*b),10),"LAD"===E?(this.lad_=!0,this.ladStart_=_,this.ladStop_=w):"LOD"===E&&(this.lod_=!0,this.lodStart_=_,this.lodStop_=w))}}return 0===o.length?null:(e=new I.default(o,"none"==r?"XYM":"XYZM"),(e=new C.default((0,S.transformGeometryWithOptions)(e,!1,t))).setProperties(i,!0),e)}},{key:"readFeaturesFromText",value:function(e,t){e=this.readFeatureFromText(e,t);return e?[e]:[]}}])&&s(t.prototype,n),e&&s(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();r.default=e},{"../Feature.js":82,"../geom/LineString.js":205,"../proj.js":283,"./Feature.js":147,"./TextFeature.js":162}],156:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.Versions=void 0;var n=e("../asserts.js");function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function a(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){{var r;if(e)return"string"==typeof e?s(e,t):"Map"===(r="Object"===(r={}.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var u=r.Versions={VERSION1:"version1",VERSION2:"version2",VERSION3:"version3"},l={},c=(l[u.VERSION1]={level0:{supports:[],formats:[],qualities:["native"]},level1:{supports:["regionByPx","sizeByW","sizeByH","sizeByPct"],formats:["jpg"],qualities:["native"]},level2:{supports:["regionByPx","regionByPct","sizeByW","sizeByH","sizeByPct","sizeByConfinedWh","sizeByWh"],formats:["jpg","png"],qualities:["native","color","grey","bitonal"]}},l[u.VERSION2]={level0:{supports:[],formats:["jpg"],qualities:["default"]},level1:{supports:["regionByPx","sizeByW","sizeByH","sizeByPct"],formats:["jpg"],qualities:["default"]},level2:{supports:["regionByPx","regionByPct","sizeByW","sizeByH","sizeByPct","sizeByConfinedWh","sizeByDistortedWh","sizeByWh"],formats:["jpg","png"],qualities:["default","bitonal"]}},l[u.VERSION3]={level0:{supports:[],formats:["jpg"],qualities:["default"]},level1:{supports:["regionByPx","regionSquare","sizeByW","sizeByH","sizeByWh"],formats:["jpg"],qualities:["default"]},level2:{supports:["regionByPx","regionSquare","regionByPct","sizeByW","sizeByH","sizeByPct","sizeByConfinedWh","sizeByWh"],formats:["jpg","png"],qualities:["default"]}},l.none={none:{supports:[],formats:[],qualities:[]}},/^https?:\/\/library\.stanford\.edu\/iiif\/image-api\/(?:1\.1\/)?compliance\.html#level[0-2]$/),f=/^https?:\/\/iiif\.io\/api\/image\/2\/level[0-2](?:\.json)?$/,h=/(^https?:\/\/iiif\.io\/api\/image\/3\/level[0-2](?:\.json)?$)|(^level[0-2]$)/;var p,d={},g=(d[u.VERSION1]=function(e){var t=e.getComplianceLevelSupportedFeatures();return void 0===t&&(t=l[u.VERSION1].level0),{url:void 0===e.imageInfo["@id"]?void 0:e.imageInfo["@id"].replace(/\/?(?:info\.json)?$/g,""),supports:t.supports,formats:[].concat(a(t.formats),[void 0===e.imageInfo.formats?[]:e.imageInfo.formats]),qualities:[].concat(a(t.qualities),[void 0===e.imageInfo.qualities?[]:e.imageInfo.qualities]),resolutions:e.imageInfo.scale_factors,tileSize:void 0!==e.imageInfo.tile_width?void 0!==e.imageInfo.tile_height?[e.imageInfo.tile_width,e.imageInfo.tile_height]:[e.imageInfo.tile_width,e.imageInfo.tile_width]:null!=e.imageInfo.tile_height?[e.imageInfo.tile_height,e.imageInfo.tile_height]:void 0}},d[u.VERSION2]=function(e){var t=e.getComplianceLevelSupportedFeatures(),r=(i=Array.isArray(e.imageInfo.profile)&&1<e.imageInfo.profile.length)&&e.imageInfo.profile[1].supports?e.imageInfo.profile[1].supports:[],n=i&&e.imageInfo.profile[1].formats?e.imageInfo.profile[1].formats:[],i=i&&e.imageInfo.profile[1].qualities?e.imageInfo.profile[1].qualities:[];return{url:e.imageInfo["@id"].replace(/\/?(?:info\.json)?$/g,""),sizes:void 0===e.imageInfo.sizes?void 0:e.imageInfo.sizes.map(function(e){return[e.width,e.height]}),tileSize:void 0===e.imageInfo.tiles?void 0:[e.imageInfo.tiles.map(function(e){return e.width})[0],e.imageInfo.tiles.map(function(e){return void 0===e.height?e.width:e.height})[0]],resolutions:void 0===e.imageInfo.tiles?void 0:e.imageInfo.tiles.map(function(e){return e.scaleFactors})[0],supports:[].concat(a(t.supports),a(r)),formats:[].concat(a(t.formats),a(n)),qualities:[].concat(a(t.qualities),a(i))}},d[u.VERSION3]=function(e){var t=e.getComplianceLevelSupportedFeatures(),r=void 0===e.imageInfo.extraFormats?t.formats:[].concat(a(t.formats),a(e.imageInfo.extraFormats)),n=void 0!==e.imageInfo.preferredFormats&&Array.isArray(e.imageInfo.preferredFormats)&&0<e.imageInfo.preferredFormats.length?e.imageInfo.preferredFormats.filter(function(e){return["jpg","png","gif"].includes(e)}).reduce(function(e,t){return void 0===e&&r.includes(t)?t:e},void 0):void 0;return{url:e.imageInfo.id,sizes:void 0===e.imageInfo.sizes?void 0:e.imageInfo.sizes.map(function(e){return[e.width,e.height]}),tileSize:void 0===e.imageInfo.tiles?void 0:[e.imageInfo.tiles.map(function(e){return e.width})[0],e.imageInfo.tiles.map(function(e){return e.height})[0]],resolutions:void 0===e.imageInfo.tiles?void 0:e.imageInfo.tiles.map(function(e){return e.scaleFactors})[0],supports:void 0===e.imageInfo.extraFeatures?t.supports:[].concat(a(t.supports),a(e.imageInfo.extraFeatures)),formats:r,qualities:void 0===e.imageInfo.extraQualities?t.qualities:[].concat(a(t.qualities),a(e.imageInfo.extraQualities)),preferredFormat:n}},e=function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.setImageInfo(t)},(g=[{key:"setImageInfo",value:function(e){this.imageInfo="string"==typeof e?JSON.parse(e):e}},{key:"getImageApiVersion",value:function(){if(void 0!==this.imageInfo){var e=this.imageInfo["@context"]||"ol-no-context";"string"==typeof e&&(e=[e]);for(var t=0;t<e.length;t++)switch(e[t]){case"http://library.stanford.edu/iiif/image-api/1.1/context.json":case"http://iiif.io/api/image/1/context.json":return u.VERSION1;case"http://iiif.io/api/image/2/context.json":return u.VERSION2;case"http://iiif.io/api/image/3/context.json":return u.VERSION3;case"ol-no-context":if(this.getComplianceLevelEntryFromProfile(u.VERSION1)&&this.imageInfo.identifier)return u.VERSION1}(0,n.assert)(!1,"Cannot determine IIIF Image API version from provided image information JSON")}}},{key:"getComplianceLevelEntryFromProfile",value:function(e){if(void 0!==this.imageInfo&&void 0!==this.imageInfo.profile)switch(void 0===e&&(e=this.getImageApiVersion()),e){case u.VERSION1:if(c.test(this.imageInfo.profile))return this.imageInfo.profile;break;case u.VERSION3:if(h.test(this.imageInfo.profile))return this.imageInfo.profile;break;case u.VERSION2:return"string"==typeof this.imageInfo.profile&&f.test(this.imageInfo.profile)?this.imageInfo.profile:Array.isArray(this.imageInfo.profile)&&0<this.imageInfo.profile.length&&"string"==typeof this.imageInfo.profile[0]&&f.test(this.imageInfo.profile[0])?this.imageInfo.profile[0]:void 0}}},{key:"getComplianceLevelFromProfile",value:function(e){var e=this.getComplianceLevelEntryFromProfile(e);if(void 0!==e)return e=e.match(/level[0-2](?:\.json)?$/g),Array.isArray(e)?e[0].replace(".json",""):void 0}},{key:"getComplianceLevelSupportedFeatures",value:function(){var e,t;if(void 0!==this.imageInfo)return e=this.getImageApiVersion(),void 0===(t=this.getComplianceLevelFromProfile(e))?l.none.none:l[e][t]}},{key:"getTileSourceOptions",value:function(e){var e=e||{},t=this.getImageApiVersion();if(void 0!==t){var r=void 0===t?void 0:d[t](this);if(void 0!==r)return{url:r.url,version:t,size:[this.imageInfo.width,this.imageInfo.height],sizes:r.sizes,format:void 0!==e.format&&r.formats.includes(e.format)?e.format:void 0!==r.preferredFormat?r.preferredFormat:"jpg",supports:r.supports,quality:e.quality&&r.qualities.includes(e.quality)?e.quality:r.qualities.includes("native")?"native":"default",resolutions:Array.isArray(r.resolutions)?r.resolutions.sort(function(e,t){return t-e}):void 0,tileSize:r.tileSize}}}}])&&o(e.prototype,g),p&&o(e,p),Object.defineProperty(e,"prototype",{writable:!1}),e);r.default=g},{"../asserts.js":111}],157:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=(n=e("./Feature.js"))&&n.__esModule?n:{default:n},a=e("../util.js");function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function u(e,t,r){t=c(t);var n=e,t=l()?Reflect.construct(t,r||[],c(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(l=function(){return!!e})()}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var n=function(){function e(){if(this instanceof e)return u(this,e);throw new TypeError("Cannot call a class as a function")}var t,r=e,n=o.default;if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");return r.prototype=Object.create(n&&n.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),n&&f(r,n),r=e,(n=[{key:"getType",value:function(){return"json"}},{key:"readFeature",value:function(e,t){return this.readFeatureFromObject(h(e),this.getReadOptions(e,t))}},{key:"readFeatures",value:function(e,t){return this.readFeaturesFromObject(h(e),this.getReadOptions(e,t))}},{key:"readFeatureFromObject",value:function(e,t){return(0,a.abstract)()}},{key:"readFeaturesFromObject",value:function(e,t){return(0,a.abstract)()}},{key:"readGeometry",value:function(e,t){return this.readGeometryFromObject(h(e),this.getReadOptions(e,t))}},{key:"readGeometryFromObject",value:function(e,t){return(0,a.abstract)()}},{key:"readProjection",value:function(e){return this.readProjectionFromObject(h(e))}},{key:"readProjectionFromObject",value:function(e){return(0,a.abstract)()}},{key:"writeFeature",value:function(e,t){return JSON.stringify(this.writeFeatureObject(e,t))}},{key:"writeFeatureObject",value:function(e,t){return(0,a.abstract)()}},{key:"writeFeatures",value:function(e,t){return JSON.stringify(this.writeFeaturesObject(e,t))}},{key:"writeFeaturesObject",value:function(e,t){return(0,a.abstract)()}},{key:"writeGeometry",value:function(e,t){return JSON.stringify(this.writeGeometryObject(e,t))}},{key:"writeGeometryObject",value:function(e,t){return(0,a.abstract)()}}])&&s(r.prototype,n),t&&s(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}();function h(e){return"string"==typeof e?JSON.parse(e)||null:null!==e?e:null}r.default=n},{"../util.js":404,"./Feature.js":147}],158:[function(e,D,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.getDefaultFillStyle=function(){return g},t.getDefaultImageStyle=function(){return C},t.getDefaultStrokeStyle=function(){return S},t.getDefaultStyle=function(){return x},t.getDefaultStyleArray=function(){return O},t.getDefaultTextStyle=function(){return j},t.readFlatCoordinates=he;var L=r(e("../Feature.js")),i=r(e("../style/Fill.js")),h=r(e("../geom/GeometryCollection.js")),Q=r(e("../style/Icon.js")),y=r(e("../ImageState.js")),F=r(e("../geom/LineString.js")),N=r(e("../geom/MultiLineString.js")),G=r(e("../geom/MultiPoint.js")),U=r(e("../geom/MultiPolygon.js")),z=r(e("../geom/Point.js")),q=r(e("../geom/Polygon.js")),o=r(e("../style/Stroke.js")),f=r(e("../style/Style.js")),H=r(e("../style/Text.js")),W=r(e("./XMLFeature.js")),A=e("../xml.js"),Y=e("../color.js"),p=e("../array.js"),V=e("../proj.js"),d=e("./xsd.js"),K=e("../math.js"),X=e("./Feature.js");function r(e){return e&&e.__esModule?e:{default:e}}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function J(e){return function(e){if(Array.isArray(e))return n(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){{var r;if(e)return"string"==typeof e?n(e,t):"Map"===(r="Object"===(r={}.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Z(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=a(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==a(e)?e:e+""}(n.key),n)}}function $(e,t,r){t=s(t);var n=e,t=ee()?Reflect.construct(t,r||[],s(e).constructor):t.apply(e,r);if(t&&("object"==a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ee(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(ee=function(){return!!e})()}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function te(e,t){return(te=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var u,m,v,b,_,w,l=["http://www.google.com/kml/ext/2.2"],c=[null,"http://earth.google.com/kml/2.0","http://earth.google.com/kml/2.1","http://earth.google.com/kml/2.2","http://www.opengis.net/kml/2.2"],re={fraction:"fraction",pixels:"pixels",insetPixels:"pixels"},ne=(0,A.makeStructureNS)(c,{ExtendedData:Ue,Region:ze,MultiGeometry:(0,A.makeObjectPropertySetter)(Te,"geometry"),LineString:(0,A.makeObjectPropertySetter)(Pe,"geometry"),LinearRing:(0,A.makeObjectPropertySetter)(ke,"geometry"),Point:(0,A.makeObjectPropertySetter)(Me,"geometry"),Polygon:(0,A.makeObjectPropertySetter)(De,"geometry"),Style:(0,A.makeObjectPropertySetter)(Qe),StyleMap:function(e,t){e=Ae.call(this,e,t);if(e){t=t[t.length-1];if(Array.isArray(e))t.Style=e;else{if("string"!=typeof e)throw new Error("`styleMapValue` has an unknown type");t.styleUrl=e}}},address:(0,A.makeObjectPropertySetter)(d.readString),description:(0,A.makeObjectPropertySetter)(d.readString),name:(0,A.makeObjectPropertySetter)(d.readString),open:(0,A.makeObjectPropertySetter)(d.readBoolean),phoneNumber:(0,A.makeObjectPropertySetter)(d.readString),styleUrl:(0,A.makeObjectPropertySetter)(de),visibility:(0,A.makeObjectPropertySetter)(d.readBoolean)},(0,A.makeStructureNS)(l,{MultiTrack:(0,A.makeObjectPropertySetter)(function(e,t){e=(0,A.pushParseAndPop)([],Ce,e,t);if(e)return new N.default(e)},"geometry"),Track:(0,A.makeObjectPropertySetter)(Se,"geometry")})),ie=(0,A.makeStructureNS)(c,{ExtendedData:Ue,Region:ze,Link:function(e,t){(0,A.parseNode)(oe,e,t)},address:(0,A.makeObjectPropertySetter)(d.readString),description:(0,A.makeObjectPropertySetter)(d.readString),name:(0,A.makeObjectPropertySetter)(d.readString),open:(0,A.makeObjectPropertySetter)(d.readBoolean),phoneNumber:(0,A.makeObjectPropertySetter)(d.readString),visibility:(0,A.makeObjectPropertySetter)(d.readBoolean)}),oe=(0,A.makeStructureNS)(c,{href:(0,A.makeObjectPropertySetter)(pe)}),ae=(0,A.makeStructureNS)(c,{Altitude:(0,A.makeObjectPropertySetter)(d.readDecimal),Longitude:(0,A.makeObjectPropertySetter)(d.readDecimal),Latitude:(0,A.makeObjectPropertySetter)(d.readDecimal),Tilt:(0,A.makeObjectPropertySetter)(d.readDecimal),AltitudeMode:(0,A.makeObjectPropertySetter)(d.readString),Heading:(0,A.makeObjectPropertySetter)(d.readDecimal),Roll:(0,A.makeObjectPropertySetter)(d.readDecimal)}),se=(0,A.makeStructureNS)(c,{LatLonAltBox:function(e,t){e=(0,A.pushParseAndPop)({},We,e,t);{var r;e&&(t=t[t.length-1],r=[parseFloat(e.west),parseFloat(e.south),parseFloat(e.east),parseFloat(e.north)],t.extent=r,t.altitudeMode=e.altitudeMode,t.minAltitude=parseFloat(e.minAltitude),t.maxAltitude=parseFloat(e.maxAltitude))}},Lod:function(e,t){e=(0,A.pushParseAndPop)({},Ye,e,t);e&&((t=t[t.length-1]).minLodPixels=parseFloat(e.minLodPixels),t.maxLodPixels=parseFloat(e.maxLodPixels),t.minFadeExtent=parseFloat(e.minFadeExtent),t.maxFadeExtent=parseFloat(e.maxFadeExtent))}}),ue=(0,A.makeStructureNS)(c,["Document","Placemark"]),le=(0,A.makeStructureNS)(c,{Document:(0,A.makeChildAppender)(function(e,t,r){e={node:e};(0,A.pushSerializeAndPop)(e,Xe,Je,t,r,void 0,this)}),Placemark:(0,A.makeChildAppender)(_t)}),g=null;var E,C=null;var I,S=null;var j=null;var x=null;var ce,O=null;function P(e){return 32/Math.min(e[0],e[1])}function fe(e){return e}e=function(){function r(e){var t;if(this instanceof r)return t=$(this,r),e=e||{},O||(u=[255,255,255,1],g=new i.default({color:u}),m=[20,2],b=v="pixels",_=[64,64],w="https://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png",C=new Q.default({anchor:m,anchorOrigin:"bottom-left",anchorXUnits:v,anchorYUnits:b,crossOrigin:"anonymous",rotation:0,scale:P(_),size:_,src:w}),E="NO_IMAGE",S=new o.default({color:u,width:1}),I=new o.default({color:[51,51,51,1],width:2}),j=new H.default({font:"bold 16px Helvetica",fill:g,stroke:I,scale:.8}),x=new f.default({fill:g,image:C,text:j,stroke:S,zIndex:0}),O=[x]),t.dataProjection=(0,V.get)("EPSG:4326"),t.defaultStyle_=e.defaultStyle||O,t.extractStyles_=void 0===e.extractStyles||e.extractStyles,t.writeStyles_=void 0===e.writeStyles||e.writeStyles,t.sharedStyles_={},t.showPointNames_=void 0===e.showPointNames||e.showPointNames,t.crossOrigin_=void 0!==e.crossOrigin?e.crossOrigin:"anonymous",t.iconUrlFunction_=e.iconUrlFunction||fe,t.supportedMediaTypes=["application/vnd.google-earth.kml+xml"],t;throw new TypeError("Cannot call a class as a function")}var e,t=r,n=W.default;if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&te(t,n),t=r,(n=[{key:"readDocumentOrFolder_",value:function(e,t){var r=(0,A.makeStructureNS)(c,{Document:(0,A.makeArrayExtender)(this.readDocumentOrFolder_,this),Folder:(0,A.makeArrayExtender)(this.readDocumentOrFolder_,this),Placemark:(0,A.makeArrayPusher)(this.readPlacemark_,this),Style:this.readSharedStyle_.bind(this),StyleMap:this.readSharedStyleMap_.bind(this)}),r=(0,A.pushParseAndPop)([],r,e,t,this);if(r)return r}},{key:"readPlacemark_",value:function(e,t){var r,a,s,u,l,c,n=(0,A.pushParseAndPop)({geometry:null},ne,e,t,this);if(n)return r=new L.default,null!==(e=e.getAttribute("id"))&&r.setId(e),e=t[0],(t=n.geometry)&&(0,X.transformGeometryWithOptions)(t,!1,e),r.setGeometry(t),delete n.geometry,this.extractStyles_&&(a=n.Style,s=n.styleUrl,u=this.defaultStyle_,l=this.sharedStyles_,c=this.showPointNames_,r.setStyle(function(e,t){var r=c,n="",i=[],o=((r=r&&(o=e.getGeometry())?o instanceof h.default?0<(i=o.getGeometriesArrayRecursive().filter(function(e){e=e.getType();return"Point"===e||"MultiPoint"===e})).length:"Point"===(o=o.getType())||"MultiPoint"===o:r)&&(n=e.get("name"),r=r&&!!n)&&/&[^&]+;/.test(n)&&((ce=ce||document.createElement("textarea")).innerHTML=n,n=ce.value),u);return a?o=a:s&&(o=function e(t,r,n){return Array.isArray(t)?t:"string"==typeof t?e(n[t],r,n):r}(s,u,l)),r?(e=function(e,t){var r=[0,0],n="start",i=e.getImage();{var o,a;i&&(o=i.getSize())&&2==o.length&&(s=i.getScaleArray(),a=i.getAnchor(),r[0]=s[0]*(o[0]-a[0]),r[1]=s[1]*(o[1]/2-a[1]),n="left")}var s=e.getText();return s?((s=s.clone()).setFont(s.getFont()||j.getFont()),s.setScale(s.getScale()||j.getScale()),s.setFill(s.getFill()||j.getFill()),s.setStroke(s.getStroke()||I)):s=j.clone(),s.setText(t),s.setOffsetX(r[0]),s.setOffsetY(r[1]),s.setTextAlign(n),new f.default({image:i,text:s})}(o[0],n),0<i.length?(e.setGeometry(new h.default(i)),[e,new f.default({geometry:o[0].getGeometry(),image:null,fill:o[0].getFill(),stroke:o[0].getStroke(),text:null})].concat(o.slice(1))):e):o})),delete n.Style,r.setProperties(n,!0),r}},{key:"readSharedStyle_",value:function(e,t){var r=e.getAttribute("id");null!==r&&(t=Qe.call(this,e,t))&&(e=(e=(e=e.baseURI)&&"about:blank"!=e?e:window.location.href)?new URL("#"+r,e).href:"#"+r,this.sharedStyles_[e]=t)}},{key:"readSharedStyleMap_",value:function(e,t){var r=e.getAttribute("id");null!==r&&(t=Ae.call(this,e,t))&&(e=(e=(e=e.baseURI)&&"about:blank"!=e?e:window.location.href)?new URL("#"+r,e).href:"#"+r,this.sharedStyles_[e]=t)}},{key:"readFeatureFromNode",value:function(e,t){return c.includes(e.namespaceURI)&&this.readPlacemark_(e,[this.getReadOptions(e,t)])||null}},{key:"readFeaturesFromNode",value:function(e,t){if(!c.includes(e.namespaceURI))return[];var r,n=e.localName;if("Document"==n||"Folder"==n)return this.readDocumentOrFolder_(e,[this.getReadOptions(e,t)])||[];if("Placemark"==n)return(r=this.readPlacemark_(e,[this.getReadOptions(e,t)]))?[r]:[];if("kml"!=n)return[];for(var i=[],o=e.firstElementChild;o;o=o.nextElementSibling){var a=this.readFeaturesFromNode(o,t);a&&(0,p.extend)(i,a)}return i}},{key:"readName",value:function(e){var t;if(e)return"string"==typeof e?(t=(0,A.parse)(e),this.readNameFromDocument(t)):(0,A.isDocument)(e)?this.readNameFromDocument(e):this.readNameFromNode(e)}},{key:"readNameFromDocument",value:function(e){for(var t=e.firstChild;t;t=t.nextSibling)if(t.nodeType==Node.ELEMENT_NODE){var r=this.readNameFromNode(t);if(r)return r}}},{key:"readNameFromNode",value:function(e){for(var t=e.firstElementChild;t;t=t.nextElementSibling)if(c.includes(t.namespaceURI)&&"name"==t.localName)return(0,d.readString)(t);for(var r=e.firstElementChild;r;r=r.nextElementSibling){var n=r.localName;if(c.includes(r.namespaceURI)&&("Document"==n||"Folder"==n||"Placemark"==n||"kml"==n)){n=this.readNameFromNode(r);if(n)return n}}}},{key:"readNetworkLinks",value:function(e){var t,r=[];return"string"==typeof e?(t=(0,A.parse)(e),(0,p.extend)(r,this.readNetworkLinksFromDocument(t))):(0,A.isDocument)(e)?(0,p.extend)(r,this.readNetworkLinksFromDocument(e)):(0,p.extend)(r,this.readNetworkLinksFromNode(e)),r}},{key:"readNetworkLinksFromDocument",value:function(e){for(var t=[],r=e.firstChild;r;r=r.nextSibling)r.nodeType==Node.ELEMENT_NODE&&(0,p.extend)(t,this.readNetworkLinksFromNode(r));return t}},{key:"readNetworkLinksFromNode",value:function(e){for(var t,r=[],n=e.firstElementChild;n;n=n.nextElementSibling)c.includes(n.namespaceURI)&&"NetworkLink"==n.localName&&(t=(0,A.pushParseAndPop)({},ie,n,[]),r.push(t));for(var i=e.firstElementChild;i;i=i.nextElementSibling){var o=i.localName;!c.includes(i.namespaceURI)||"Document"!=o&&"Folder"!=o&&"kml"!=o||(0,p.extend)(r,this.readNetworkLinksFromNode(i))}return r}},{key:"readRegion",value:function(e){var t,r=[];return"string"==typeof e?(t=(0,A.parse)(e),(0,p.extend)(r,this.readRegionFromDocument(t))):(0,A.isDocument)(e)?(0,p.extend)(r,this.readRegionFromDocument(e)):(0,p.extend)(r,this.readRegionFromNode(e)),r}},{key:"readRegionFromDocument",value:function(e){for(var t=[],r=e.firstChild;r;r=r.nextSibling)r.nodeType==Node.ELEMENT_NODE&&(0,p.extend)(t,this.readRegionFromNode(r));return t}},{key:"readRegionFromNode",value:function(e){for(var t,r=[],n=e.firstElementChild;n;n=n.nextElementSibling)c.includes(n.namespaceURI)&&"Region"==n.localName&&(t=(0,A.pushParseAndPop)({},se,n,[]),r.push(t));for(var i=e.firstElementChild;i;i=i.nextElementSibling){var o=i.localName;!c.includes(i.namespaceURI)||"Document"!=o&&"Folder"!=o&&"kml"!=o||(0,p.extend)(r,this.readRegionFromNode(i))}return r}},{key:"readCamera",value:function(e){var t,r=[];return"string"==typeof e?(t=(0,A.parse)(e),(0,p.extend)(r,this.readCameraFromDocument(t))):(0,A.isDocument)(e)?(0,p.extend)(r,this.readCameraFromDocument(e)):(0,p.extend)(r,this.readCameraFromNode(e)),r}},{key:"readCameraFromDocument",value:function(e){for(var t=[],r=e.firstChild;r;r=r.nextSibling)r.nodeType===Node.ELEMENT_NODE&&(0,p.extend)(t,this.readCameraFromNode(r));return t}},{key:"readCameraFromNode",value:function(e){for(var t,r=[],n=e.firstElementChild;n;n=n.nextElementSibling)c.includes(n.namespaceURI)&&"Camera"===n.localName&&(t=(0,A.pushParseAndPop)({},ae,n,[]),r.push(t));for(var i=e.firstElementChild;i;i=i.nextElementSibling){var o=i.localName;!c.includes(i.namespaceURI)||"Document"!==o&&"Folder"!==o&&"Placemark"!==o&&"kml"!==o||(0,p.extend)(r,this.readCameraFromNode(i))}return r}},{key:"writeFeaturesNode",value:function(e,t){t=this.adaptOptions(t);var r=(0,A.createElementNS)(c[4],"kml"),n="http://www.w3.org/2000/xmlns/",n=(r.setAttributeNS(n,"xmlns:gx",l[0]),r.setAttributeNS(n,"xmlns:xsi",A.XML_SCHEMA_INSTANCE_URI),r.setAttributeNS(A.XML_SCHEMA_INSTANCE_URI,"xsi:schemaLocation","http://www.opengis.net/kml/2.2 https://developers.google.com/kml/schema/kml22gx.xsd"),{node:r}),i={},e=(1<e.length?i.Document=e:1==e.length&&(i.Placemark=e[0]),ue[r.namespaceURI]),i=(0,A.makeSequence)(i,e);return(0,A.pushSerializeAndPop)(n,le,A.OBJECT_PROPERTY_NODE_FACTORY,i,[t],e,this),r}}])&&Z(t.prototype,n),e&&Z(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();function k(e){var e=(0,A.getAllTextContent)(e,!1),e=/^\s*#?\s*([0-9A-Fa-f]{8})\s*$/.exec(e);if(e)return e=e[1],[parseInt(e.substr(6,2),16),parseInt(e.substr(4,2),16),parseInt(e.substr(2,2),16),parseInt(e.substr(0,2),16)/255]}function he(e){for(var t,r=[],n=(n=(0,A.getAllTextContent)(e,!1)).replace(/\s*,\s*/g,","),i=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?),([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|,|$)(?:([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|$))?\s*/i;t=i.exec(n);){var o=parseFloat(t[1]),a=parseFloat(t[2]),s=t[3]?parseFloat(t[3]):0;r.push(o,a,s),n=n.substr(t[0].length)}if(""===n)return r}function pe(e){var t=(0,A.getAllTextContent)(e,!1).trim(),e=e.baseURI;return(e=e&&"about:blank"!=e?e:window.location.href)?new URL(t,e).href:t}function de(e){var t=(0,A.getAllTextContent)(e,!1).trim().replace(/^(?!.*#)/,"#"),e=e.baseURI;return(e=e&&"about:blank"!=e?e:window.location.href)?new URL(t,e).href:t}function ge(e){return(0,d.readDecimal)(e)}var ye=(0,A.makeStructureNS)(c,{Pair:function(e,t){e=(0,A.pushParseAndPop)({},qe,e,t,this);{var r;e&&(r=e.key)&&"normal"==r&&((r=e.styleUrl)&&(t[t.length-1]=r),r=e.Style)&&(t[t.length-1]=r)}}});function Ae(e,t){return(0,A.pushParseAndPop)(void 0,ye,e,t,this)}var me=(0,A.makeStructureNS)(c,{Icon:(0,A.makeObjectPropertySetter)(function(e,t){return(0,A.pushParseAndPop)({},je,e,t)||null}),color:(0,A.makeObjectPropertySetter)(k),heading:(0,A.makeObjectPropertySetter)(d.readDecimal),hotSpot:(0,A.makeObjectPropertySetter)(function(e){var t=e.getAttribute("xunits"),r=e.getAttribute("yunits"),n="insetPixels"!==t?"insetPixels"!==r?"bottom-left":"top-left":"insetPixels"!==r?"bottom-right":"top-right";return{x:parseFloat(e.getAttribute("x")),xunits:re[t],y:parseFloat(e.getAttribute("y")),yunits:re[r],origin:n}}),scale:(0,A.makeObjectPropertySetter)(ge)});var ve=(0,A.makeStructureNS)(c,{color:(0,A.makeObjectPropertySetter)(k),scale:(0,A.makeObjectPropertySetter)(ge)});var be=(0,A.makeStructureNS)(c,{color:(0,A.makeObjectPropertySetter)(k),width:(0,A.makeObjectPropertySetter)(d.readDecimal)});var _e=(0,A.makeStructureNS)(c,{color:(0,A.makeObjectPropertySetter)(k),fill:(0,A.makeObjectPropertySetter)(d.readBoolean),outline:(0,A.makeObjectPropertySetter)(d.readBoolean)});var we=(0,A.makeStructureNS)(c,{coordinates:(0,A.makeReplacer)(he)});function Ee(e,t){return(0,A.pushParseAndPop)(null,we,e,t)}var Ce=(0,A.makeStructureNS)(l,{Track:(0,A.makeArrayPusher)(Se)});var Ie=(0,A.makeStructureNS)(c,{when:function(e,t){t=t[t.length-1].whens,e=(0,A.getAllTextContent)(e,!1),e=Date.parse(e);t.push(isNaN(e)?0:e)}},(0,A.makeStructureNS)(l,{coord:function(e,t){var r,n,t=t[t.length-1].coordinates,e=(0,A.getAllTextContent)(e,!1);(e=/^\s*([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s*$/i.exec(e))?(r=parseFloat(e[1]),n=parseFloat(e[2]),e=parseFloat(e[3]),t.push([r,n,e])):t.push([])}}));function Se(e,t){e=(0,A.pushParseAndPop)({coordinates:[],whens:[]},Ie,e,t);if(e){for(var r=[],n=e.coordinates,i=e.whens,o=0,a=Math.min(n.length,i.length);o<a;++o)3==n[o].length&&r.push(n[o][0],n[o][1],n[o][2],i[o]);return new F.default(r,"XYZM")}}var je=(0,A.makeStructureNS)(c,{href:(0,A.makeObjectPropertySetter)(pe)},(0,A.makeStructureNS)(l,{x:(0,A.makeObjectPropertySetter)(d.readDecimal),y:(0,A.makeObjectPropertySetter)(d.readDecimal),w:(0,A.makeObjectPropertySetter)(d.readDecimal),h:(0,A.makeObjectPropertySetter)(d.readDecimal)}));var xe=(0,A.makeStructureNS)(c,{coordinates:(0,A.makeReplacer)(he)});function Oe(e,t){return(0,A.pushParseAndPop)(null,xe,e,t)}var B=(0,A.makeStructureNS)(c,{extrude:(0,A.makeObjectPropertySetter)(d.readBoolean),tessellate:(0,A.makeObjectPropertySetter)(d.readBoolean),altitudeMode:(0,A.makeObjectPropertySetter)(d.readString)});function Pe(e,t){var r=(0,A.pushParseAndPop)({},B,e,t),e=Oe(e,t);if(e)return(t=new F.default(e,"XYZ")).setProperties(r,!0),t}function ke(e,t){var r=(0,A.pushParseAndPop)({},B,e,t),e=Oe(e,t);if(e)return(t=new q.default(e,"XYZ",[e.length])).setProperties(r,!0),t}var Be=(0,A.makeStructureNS)(c,{LineString:(0,A.makeArrayPusher)(Pe),LinearRing:(0,A.makeArrayPusher)(ke),MultiGeometry:(0,A.makeArrayPusher)(Te),Point:(0,A.makeArrayPusher)(Me),Polygon:(0,A.makeArrayPusher)(De)});function Te(e,t){var r,n=(0,A.pushParseAndPop)([],Be,e,t);if(!n)return null;if(0===n.length)return new h.default(n);for(var i,o=!0,a=n[0].getType(),s=1,u=n.length;s<u;++s)if((i=n[s]).getType()!=a){o=!1;break}if(o)if("Point"==a){for(var e=n[0],t=e.getLayout(),l=e.getFlatCoordinates(),c=1,f=n.length;c<f;++c)i=n[c],(0,p.extend)(l,i.getFlatCoordinates());Fe(r=new G.default(l,t),n)}else if("LineString"==a)Fe(r=new N.default(n),n);else if("Polygon"==a)Fe(r=new U.default(n),n);else{if("GeometryCollection"!=a)throw new Error("Unknown geometry type found");r=new h.default(n)}else r=new h.default(n);return r}function Me(e,t){var r=(0,A.pushParseAndPop)({},B,e,t),e=Oe(e,t);if(e)return(t=new z.default(e,"XYZ")).setProperties(r,!0),t}var Re=(0,A.makeStructureNS)(c,{innerBoundaryIs:function(e,t){e=(0,A.pushParseAndPop)([],Ve,e,t);0<e.length&&(t=t[t.length-1]).push.apply(t,J(e))},outerBoundaryIs:function(e,t){e=(0,A.pushParseAndPop)(void 0,Ke,e,t);e&&(t[t.length-1][0]=e)}});function De(e,t){var r=(0,A.pushParseAndPop)({},B,e,t),n=(0,A.pushParseAndPop)([null],Re,e,t);if(n&&n[0]){for(var i=n[0],o=[i.length],a=1,s=n.length;a<s;++a)(0,p.extend)(i,n[a]),o.push(i.length);e=new q.default(i,"XYZ",o);return e.setProperties(r,!0),e}}var Le=(0,A.makeStructureNS)(c,{IconStyle:function(e,t){var r,n,i,o,a,s,u,l,c,f,h,p,d,g;(e=(0,A.pushParseAndPop)({},me,e,t))&&(t=t[t.length-1],d="Icon"in e?e.Icon:{},g=!("Icon"in e)||0<Object.keys(d).length,(s=d.href)?r=s:g&&(r=w),s="bottom-left",(c=e.hotSpot)?(n=[c.x,c.y],i=c.xunits,o=c.yunits,s=c.origin):/^https?:\/\/maps\.(?:google|gstatic)\.com\//.test(r)&&(r.includes("pushpin")?(n=m,i=v,o=b):r.includes("arrow-reverse")?(n=[54,42],i=v,o=b):r.includes("paddle")&&(n=[32,1],i=v,o=b)),c=d.x,f=d.y,void 0!==c&&void 0!==f&&(a=[c,f]),c=d.w,f=d.h,void 0!==c&&void 0!==f&&(u=[c,f]),void 0!==(d=e.heading)&&(l=(0,K.toRadians)(d)),c=e.scale,f=e.color,g?(r==w&&(u=_),h=new Q.default({anchor:n,anchorOrigin:s,anchorXUnits:i,anchorYUnits:o,crossOrigin:this.crossOrigin_,offset:a,offsetOrigin:"bottom-left",rotation:l,scale:c,size:u,src:this.iconUrlFunction_(r),color:f}),p=h.getScaleArray()[0],null===(d=h.getSize())?(e=h.getImageState())!==y.default.IDLE&&e!==y.default.LOADING||(h.listenImageChange(function e(){var t=h.getImageState();t!==y.default.IDLE&&t!==y.default.LOADING&&((t=h.getSize())&&2==t.length&&(t=P(t),h.setScale(p*t)),h.unlistenImageChange(e))}),e===y.default.IDLE&&h.load()):2==d.length&&(g=P(d),h.setScale(p*g)),t.imageStyle=h):t.imageStyle=E)},LabelStyle:function(e,t){(e=(0,A.pushParseAndPop)({},ve,e,t))&&(t=t[t.length-1],e=new H.default({fill:new i.default({color:"color"in e?e.color:u}),scale:e.scale}),t.textStyle=e)},LineStyle:function(e,t){(e=(0,A.pushParseAndPop)({},be,e,t))&&(t=t[t.length-1],e=new o.default({color:"color"in e?e.color:u,width:"width"in e?e.width:1}),t.strokeStyle=e)},PolyStyle:function(e,t){var r;(e=(0,A.pushParseAndPop)({},_e,e,t))&&(t=t[t.length-1],r=new i.default({color:"color"in e?e.color:u}),t.fillStyle=r,void 0!==(r=e.fill)&&(t.fill=r),void 0!==(r=e.outline))&&(t.outline=r)}});function Qe(e,t){var r,n,i,e=(0,A.pushParseAndPop)({},Le,e,t,this);return e?(t="fillStyle"in e?e.fillStyle:g,void 0===(n=e.fill)||n||(t=null),"imageStyle"in e?e.imageStyle!=E&&(r=e.imageStyle):r=C,n="textStyle"in e?e.textStyle:j,i="strokeStyle"in e?e.strokeStyle:S,void 0===(e=e.outline)||e?[new f.default({fill:t,image:r,stroke:i,text:n,zIndex:void 0})]:[new f.default({geometry:function(e){var e=e.getGeometry(),t=e.getType();return"GeometryCollection"===t?new h.default(e.getGeometriesArrayRecursive().filter(function(e){e=e.getType();return"Polygon"!==e&&"MultiPolygon"!==e})):"Polygon"!==t&&"MultiPolygon"!==t?e:void 0},fill:t,image:r,stroke:i,text:n,zIndex:void 0}),new f.default({geometry:function(e){var e=e.getGeometry(),t=e.getType();return"GeometryCollection"===t?new h.default(e.getGeometriesArrayRecursive().filter(function(e){e=e.getType();return"Polygon"===e||"MultiPolygon"===e})):"Polygon"===t||"MultiPolygon"===t?e:void 0},fill:t,stroke:null,zIndex:void 0})]):null}function Fe(e,t){for(var r=t.length,n=new Array(t.length),i=new Array(t.length),o=new Array(t.length),a=!1,s=!1,u=!1,l=0;l<r;++l){var c=t[l];n[l]=c.get("extrude"),i[l]=c.get("tessellate"),o[l]=c.get("altitudeMode"),a=a||void 0!==n[l],s=s||void 0!==i[l],u=u||o[l]}a&&e.set("extrude",n),s&&e.set("tessellate",i),u&&e.set("altitudeMode",o)}var Ne=(0,A.makeStructureNS)(c,{displayName:(0,A.makeObjectPropertySetter)(d.readString),value:(0,A.makeObjectPropertySetter)(d.readString)});var Ge=(0,A.makeStructureNS)(c,{Data:function(e,t){var r=e.getAttribute("name"),n=((0,A.parseNode)(Ne,e,t),t[t.length-1]);r&&n.displayName?n[r]={value:n.value,displayName:n.displayName,toString:function(){return n.value}}:null!==r?n[r]=n.value:null!==n.displayName&&(n[n.displayName]=n.value),delete n.value},SchemaData:function(e,t){(0,A.parseNode)(He,e,t)}});function Ue(e,t){(0,A.parseNode)(Ge,e,t)}function ze(e,t){(0,A.parseNode)(se,e,t)}var qe=(0,A.makeStructureNS)(c,{Style:(0,A.makeObjectPropertySetter)(Qe),key:(0,A.makeObjectPropertySetter)(d.readString),styleUrl:(0,A.makeObjectPropertySetter)(de)});var He=(0,A.makeStructureNS)(c,{SimpleData:function(e,t){var r=e.getAttribute("name");null!==r&&(e=(0,d.readString)(e),t[t.length-1][r]=e)}});var We=(0,A.makeStructureNS)(c,{altitudeMode:(0,A.makeObjectPropertySetter)(d.readString),minAltitude:(0,A.makeObjectPropertySetter)(d.readDecimal),maxAltitude:(0,A.makeObjectPropertySetter)(d.readDecimal),north:(0,A.makeObjectPropertySetter)(d.readDecimal),south:(0,A.makeObjectPropertySetter)(d.readDecimal),east:(0,A.makeObjectPropertySetter)(d.readDecimal),west:(0,A.makeObjectPropertySetter)(d.readDecimal)});var Ye=(0,A.makeStructureNS)(c,{minLodPixels:(0,A.makeObjectPropertySetter)(d.readDecimal),maxLodPixels:(0,A.makeObjectPropertySetter)(d.readDecimal),minFadeExtent:(0,A.makeObjectPropertySetter)(d.readDecimal),maxFadeExtent:(0,A.makeObjectPropertySetter)(d.readDecimal)});var Ve=(0,A.makeStructureNS)(c,{LinearRing:(0,A.makeArrayPusher)(Ee)});var Ke=(0,A.makeStructureNS)(c,{LinearRing:(0,A.makeReplacer)(Ee)});function T(e,t){for(var t=(0,Y.asArray)(t),r=[255*(4==t.length?t[3]:1),t[2],t[1],t[0]],n=0;n<4;++n){var i=Math.floor(r[n]).toString(16);r[n]=1==i.length?"0"+i:i}(0,d.writeStringTextNode)(e,r.join(""))}var M=(0,A.makeStructureNS)(c,{Data:(0,A.makeChildAppender)(function(e,t,r){e.setAttribute("name",t.name);e={node:e},t=t.value;"object"==a(t)?(null!==t&&t.displayName&&(0,A.pushSerializeAndPop)(e,M,A.OBJECT_PROPERTY_NODE_FACTORY,[t.displayName],r,["displayName"]),null!==t&&t.value&&(0,A.pushSerializeAndPop)(e,M,A.OBJECT_PROPERTY_NODE_FACTORY,[t.value],r,["value"])):(0,A.pushSerializeAndPop)(e,M,A.OBJECT_PROPERTY_NODE_FACTORY,[t],r,["value"])}),value:(0,A.makeChildAppender)(function(e,t){(0,d.writeStringTextNode)(e,t)}),displayName:(0,A.makeChildAppender)(function(e,t){(0,d.writeCDATASection)(e,t)})});var Xe=(0,A.makeStructureNS)(c,{Placemark:(0,A.makeChildAppender)(_t)}),Je=function(e,t,r){t=t[t.length-1].node;return(0,A.createElementNS)(t.namespaceURI,"Placemark")};var Ze=(0,A.makeSimpleNodeFactory)("Data");function $e(e,t,r){return(0,A.createElementNS)(l[0],"gx:"+r)}var et=(0,A.makeStructureNS)(c,["href"],(0,A.makeStructureNS)(l,["x","y","w","h"])),tt=(0,A.makeStructureNS)(c,{href:(0,A.makeChildAppender)(d.writeStringTextNode)},(0,A.makeStructureNS)(l,{x:(0,A.makeChildAppender)(d.writeDecimalTextNode),y:(0,A.makeChildAppender)(d.writeDecimalTextNode),w:(0,A.makeChildAppender)(d.writeDecimalTextNode),h:(0,A.makeChildAppender)(d.writeDecimalTextNode)}));var rt=(0,A.makeStructureNS)(c,["scale","heading","Icon","color","hotSpot"]),nt=(0,A.makeStructureNS)(c,{Icon:(0,A.makeChildAppender)(function(e,t,r){var e={node:e},n=r[r.length-1].node,n=et[n.namespaceURI],i=(0,A.makeSequence)(t,n);(0,A.pushSerializeAndPop)(e,tt,A.OBJECT_PROPERTY_NODE_FACTORY,i,r,n),n=et[l[0]],i=(0,A.makeSequence)(t,n),(0,A.pushSerializeAndPop)(e,tt,$e,i,r,n)}),color:(0,A.makeChildAppender)(T),heading:(0,A.makeChildAppender)(d.writeDecimalTextNode),hotSpot:(0,A.makeChildAppender)(function(e,t){e.setAttribute("x",String(t.x)),e.setAttribute("y",String(t.y)),e.setAttribute("xunits",t.xunits),e.setAttribute("yunits",t.yunits)}),scale:(0,A.makeChildAppender)(Pt)});var it=(0,A.makeStructureNS)(c,["color","scale"]),ot=(0,A.makeStructureNS)(c,{color:(0,A.makeChildAppender)(T),scale:(0,A.makeChildAppender)(Pt)});var at=(0,A.makeStructureNS)(c,["color","width"]),st=(0,A.makeStructureNS)(c,{color:(0,A.makeChildAppender)(T),width:(0,A.makeChildAppender)(d.writeDecimalTextNode)});var ut={Point:"Point",LineString:"LineString",LinearRing:"LinearRing",Polygon:"Polygon",MultiPoint:"MultiGeometry",MultiLineString:"MultiGeometry",MultiPolygon:"MultiGeometry",GeometryCollection:"MultiGeometry"},lt=function(e,t,r){if(e)return t=t[t.length-1].node,(0,A.createElementNS)(t.namespaceURI,ut[e.getType()])},ct=(0,A.makeSimpleNodeFactory)("Point"),ft=(0,A.makeSimpleNodeFactory)("LineString"),ht=(0,A.makeSimpleNodeFactory)("LinearRing"),pt=(0,A.makeSimpleNodeFactory)("Polygon"),dt=(0,A.makeStructureNS)(c,{LineString:(0,A.makeChildAppender)(R),Point:(0,A.makeChildAppender)(R),Polygon:(0,A.makeChildAppender)(xt),GeometryCollection:(0,A.makeChildAppender)(gt)});function gt(e,t,r){var n,e={node:e},i=t.getType(),o=[];if("GeometryCollection"===i)t.getGeometriesArrayRecursive().forEach(function(e){var t=e.getType();if("MultiPoint"===t)o=o.concat(e.getPoints());else if("MultiLineString"===t)o=o.concat(e.getLineStrings());else if("MultiPolygon"===t)o=o.concat(e.getPolygons());else{if("Point"!==t&&"LineString"!==t&&"Polygon"!==t)throw new Error("Unknown geometry type");o.push(e)}}),n=lt;else if("MultiPoint"===i)o=t.getPoints(),n=ct;else if("MultiLineString"===i)o=t.getLineStrings(),n=ft;else{if("MultiPolygon"!==i)throw new Error("Unknown geometry type");o=t.getPolygons(),n=pt}(0,A.pushSerializeAndPop)(e,dt,n,o,r)}var yt=(0,A.makeStructureNS)(c,{LinearRing:(0,A.makeChildAppender)(R)});function At(e,t,r){(0,A.pushSerializeAndPop)({node:e},yt,ht,[t],r)}var mt=(0,A.makeStructureNS)(c,{ExtendedData:(0,A.makeChildAppender)(function(e,t,r){for(var n={node:e},i=t.names,o=t.values,a=i.length,s=0;s<a;s++)(0,A.pushSerializeAndPop)(n,M,Ze,[{name:i[s],value:o[s]}],r)}),MultiGeometry:(0,A.makeChildAppender)(gt),LineString:(0,A.makeChildAppender)(R),LinearRing:(0,A.makeChildAppender)(R),Point:(0,A.makeChildAppender)(R),Polygon:(0,A.makeChildAppender)(xt),Style:(0,A.makeChildAppender)(function(e,t,r){var e={node:e},n={};t.pointStyles.length&&((i=t.pointStyles[0].getText())&&(n.LabelStyle=i),i=t.pointStyles[0].getImage())&&"function"==typeof i.getSrc&&(n.IconStyle=i);t.lineStyles.length&&(i=t.lineStyles[0].getStroke())&&(n.LineStyle=i);t.polyStyles.length&&((i=t.polyStyles[0].getStroke())&&!n.LineStyle&&(n.LineStyle=i),n.PolyStyle=t.polyStyles[0]);var i=r[r.length-1].node,t=kt[i.namespaceURI],i=(0,A.makeSequence)(n,t);(0,A.pushSerializeAndPop)(e,Bt,A.OBJECT_PROPERTY_NODE_FACTORY,i,r,t)}),address:(0,A.makeChildAppender)(d.writeStringTextNode),description:(0,A.makeChildAppender)(d.writeStringTextNode),name:(0,A.makeChildAppender)(d.writeStringTextNode),open:(0,A.makeChildAppender)(d.writeBooleanTextNode),phoneNumber:(0,A.makeChildAppender)(d.writeStringTextNode),styleUrl:(0,A.makeChildAppender)(d.writeStringTextNode),visibility:(0,A.makeChildAppender)(d.writeBooleanTextNode)}),vt=(0,A.makeStructureNS)(c,["name","open","visibility","address","phoneNumber","description","styleUrl","Style"]),bt=(0,A.makeSimpleNodeFactory)("ExtendedData");function _t(e,r,t){var n={node:e},e=(r.getId()&&e.setAttribute("id",r.getId()),r.getProperties()),i={address:1,description:1,name:1,open:1,phoneNumber:1,styleUrl:1,visibility:1},o=(i[r.getGeometryName()]=1,Object.keys(e||{}).sort().filter(function(e){return!i[e]})),a=r.getStyleFunction(),s=(a&&(a=a(r,0))&&(l=a=Array.isArray(a)?a:[a],r.getGeometry()&&(l=a.filter(function(e){var t,e=e.getGeometryFunction()(r);if(e)return"GeometryCollection"===(t=e.getType())?e.getGeometriesArrayRecursive().filter(function(e){e=e.getType();return"Point"===e||"MultiPoint"===e}).length:"Point"===t||"MultiPoint"===t})),this.writeStyles_&&(u=s=a,r.getGeometry()&&(s=a.filter(function(e){var t,e=e.getGeometryFunction()(r);if(e)return"GeometryCollection"===(t=e.getType())?e.getGeometriesArrayRecursive().filter(function(e){e=e.getType();return"LineString"===e||"MultiLineString"===e}).length:"LineString"===t||"MultiLineString"===t}),u=a.filter(function(e){var t,e=e.getGeometryFunction()(r);if(e)return"GeometryCollection"===(t=e.getType())?e.getGeometriesArrayRecursive().filter(function(e){e=e.getType();return"Polygon"===e||"MultiPolygon"===e}).length:"Polygon"===t||"MultiPolygon"===t})),e.Style={pointStyles:l,lineStyles:s,polyStyles:u}),l.length)&&void 0===e.name&&(a=l[0].getText())&&(e.name=a.getText()),t[t.length-1].node),u=vt[s.namespaceURI],l=(0,A.makeSequence)(e,u),s=((0,A.pushSerializeAndPop)(n,mt,A.OBJECT_PROPERTY_NODE_FACTORY,l,t,u),0<o.length&&(a={names:o,values:(0,A.makeSequence)(e,o)},(0,A.pushSerializeAndPop)(n,mt,bt,[a],t)),t[0]),l=(l=r.getGeometry())&&(0,X.transformGeometryWithOptions)(l,!0,s);(0,A.pushSerializeAndPop)(n,mt,lt,[l],t)}var wt=(0,A.makeStructureNS)(c,["extrude","tessellate","altitudeMode","coordinates"]),Et=(0,A.makeStructureNS)(c,{extrude:(0,A.makeChildAppender)(d.writeBooleanTextNode),tessellate:(0,A.makeChildAppender)(d.writeBooleanTextNode),altitudeMode:(0,A.makeChildAppender)(d.writeStringTextNode),coordinates:(0,A.makeChildAppender)(function(e,t,r){var n,i=(r=r[r.length-1]).layout,o=r.stride;if("XY"==i||"XYM"==i)n=2;else{if("XYZ"!=i&&"XYZM"!=i)throw new Error("Invalid geometry layout");n=3}var a=t.length,s="";if(0<a){s+=t[0];for(var u=1;u<n;++u)s+=","+t[u];for(var l=o;l<a;l+=o){s+=" "+t[l];for(var c=1;c<n;++c)s+=","+t[l+c]}}(0,d.writeStringTextNode)(e,s)})});function R(e,t,r){var n=t.getFlatCoordinates(),e={node:e},t=(e.layout=t.getLayout(),e.stride=t.getStride(),t.getProperties()),n=(t.coordinates=n,r[r.length-1].node),n=wt[n.namespaceURI],t=(0,A.makeSequence)(t,n);(0,A.pushSerializeAndPop)(e,Et,A.OBJECT_PROPERTY_NODE_FACTORY,t,r,n)}var Ct=(0,A.makeStructureNS)(c,["color","fill","outline"]),It=(0,A.makeStructureNS)(c,{outerBoundaryIs:(0,A.makeChildAppender)(At),innerBoundaryIs:(0,A.makeChildAppender)(At)}),St=(0,A.makeSimpleNodeFactory)("innerBoundaryIs"),jt=(0,A.makeSimpleNodeFactory)("outerBoundaryIs");function xt(e,t,r){var t=t.getLinearRings(),n=t.shift(),e={node:e};(0,A.pushSerializeAndPop)(e,It,St,t,r),(0,A.pushSerializeAndPop)(e,It,jt,[n],r)}var Ot=(0,A.makeStructureNS)(c,{color:(0,A.makeChildAppender)(T),fill:(0,A.makeChildAppender)(d.writeBooleanTextNode),outline:(0,A.makeChildAppender)(d.writeBooleanTextNode)});function Pt(e,t){(0,d.writeDecimalTextNode)(e,Math.round(1e6*t)/1e6)}var kt=(0,A.makeStructureNS)(c,["IconStyle","LabelStyle","LineStyle","PolyStyle"]),Bt=(0,A.makeStructureNS)(c,{IconStyle:(0,A.makeChildAppender)(function(e,t,r){var e={node:e},n={},i=t.getSrc(),o=t.getSize(),a=t.getImageSize(),i={href:i},s=(o&&(i.w=o[0],i.h=o[1],u=t.getAnchor(),(s=t.getOrigin())&&a&&0!==s[0]&&s[1]!==o[1]&&(i.x=s[0],i.y=a[1]-(s[1]+o[1])),!u||u[0]===o[0]/2&&u[1]===o[1]/2||(a={x:u[0],xunits:"pixels",y:o[1]-u[1],yunits:"pixels"},n.hotSpot=a)),n.Icon=i,t.getScaleArray()[0]),u=o;2==(u=null===o?_:o).length&&(s/=P(u)),1!==s&&(n.scale=s),0!==(a=t.getRotation())&&(n.heading=a);(i=t.getColor())&&(n.color=i),o=r[r.length-1].node,u=rt[o.namespaceURI],s=(0,A.makeSequence)(n,u);(0,A.pushSerializeAndPop)(e,nt,A.OBJECT_PROPERTY_NODE_FACTORY,s,r,u)}),LabelStyle:(0,A.makeChildAppender)(function(e,t,r){var e={node:e},n={};(i=t.getFill())&&(n.color=i.getColor());(i=t.getScale())&&1!==i&&(n.scale=i);var t=r[r.length-1].node,i=it[t.namespaceURI],t=(0,A.makeSequence)(n,i);(0,A.pushSerializeAndPop)(e,ot,A.OBJECT_PROPERTY_NODE_FACTORY,t,r,i)}),LineStyle:(0,A.makeChildAppender)(function(e,t,r){var e={node:e},t={color:t.getColor(),width:Number(t.getWidth())||1},n=r[r.length-1].node,n=at[n.namespaceURI],t=(0,A.makeSequence)(t,n);(0,A.pushSerializeAndPop)(e,st,A.OBJECT_PROPERTY_NODE_FACTORY,t,r,n)}),PolyStyle:(0,A.makeChildAppender)(function(e,t,r){var e={node:e},n=t.getFill(),t=t.getStroke(),n={color:n?n.getColor():void 0,fill:!!n&&void 0,outline:!!t&&void 0},t=r[r.length-1].node,t=Ct[t.namespaceURI],n=(0,A.makeSequence)(n,t);(0,A.pushSerializeAndPop)(e,Ot,A.OBJECT_PROPERTY_NODE_FACTORY,n,r,t)})});t.default=e},{"../Feature.js":82,"../ImageState.js":86,"../array.js":110,"../color.js":113,"../geom/GeometryCollection.js":204,"../geom/LineString.js":205,"../geom/MultiLineString.js":207,"../geom/MultiPoint.js":208,"../geom/MultiPolygon.js":209,"../geom/Point.js":210,"../geom/Polygon.js":211,"../math.js":279,"../proj.js":283,"../style/Fill.js":386,"../style/Icon.js":387,"../style/Stroke.js":392,"../style/Style.js":393,"../style/Text.js":394,"../xml.js":418,"./Feature.js":147,"./XMLFeature.js":171,"./xsd.js":199}],159:[function(e,t,r){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};t=s(t);if(t&&t.has(e))return t.get(e);var r,n={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in e){var o;"default"!==r&&{}.hasOwnProperty.call(e,r)&&((o=i?Object.getOwnPropertyDescriptor(e,r):null)&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=e[r])}return n.default=e,t&&t.set(e,n),n}(e("./Feature.js")),c=n(e("../geom/LineString.js")),f=n(e("../geom/MultiLineString.js")),h=n(e("../geom/MultiPoint.js")),p=n(e("../geom/MultiPolygon.js")),d=n(e("pbf")),g=n(e("../geom/Point.js")),y=n(e("../geom/Polygon.js")),i=n(e("../proj/Projection.js")),A=n(e("../render/Feature.js")),m=e("../proj.js"),v=e("../geom/flat/orient.js");function n(e){return e&&e.__esModule?e:{default:e}}function s(e){var t,r;return"function"!=typeof WeakMap?null:(t=new WeakMap,r=new WeakMap,(s=function(e){return e?r:t})(e))}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=a(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==a(e)?e:e+""}(n.key),n)}}function u(e,t,r){t=_(t);var n=e,t=b()?Reflect.construct(t,r||[],_(e).constructor):t.apply(e,r);if(t&&("object"==a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(b=function(){return!!e})()}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function w(e,t){return(w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}e=function(){function r(e){var t;if(this instanceof r)return e=e||{},(t=u(this,r)).dataProjection=new i.default({code:"",units:"tile-pixels"}),t.featureClass=e.featureClass||A.default,t.geometryName_=e.geometryName,t.layerName_=e.layerName||"layer",t.layers_=e.layers||null,t.idProperty_=e.idProperty,t.supportedMediaTypes=["application/vnd.mapbox-vector-tile","application/x-protobuf"],t;throw new TypeError("Cannot call a class as a function")}var e,t=r,n=l.default;if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&w(t,n),t=r,(n=[{key:"readRawGeometry_",value:function(e,t,r,n){e.pos=t.geometry;for(var i,o=e.readVarint()+e.pos,a=1,s=0,u=0,l=0,c=0,f=0;e.pos<o;)if(s||(a=7&(i=e.readVarint()),s=i>>3),s--,1===a||2===a)u+=e.readSVarint(),l+=e.readSVarint(),1===a&&f<c&&(n.push(c),f=c),r.push(u,l),c+=2;else{if(7!==a)throw new Error("Invalid command found in the PBF");f<c&&(r.push(r[f],r[f+1]),c+=2)}f<c&&n.push(c)}},{key:"createFeature_",value:function(e,t,r){var n,i,o,a,s,u=t.type;return 0===u?null:(o=t.properties,this.idProperty_?(i=o[this.idProperty_],delete o[this.idProperty_]):i=t.id,o[this.layerName_]=t.layer.name,this.readRawGeometry_(e,t,e=[],t=[]),a=t.length,1===(u=u)?s=1===a?"Point":"MultiPoint":2===u?s=1===a?"LineString":"MultiLineString":3===u&&(s="Polygon"),a=s,this.featureClass===A.default?(n=new this.featureClass(a,e,t,2,o,i)).transform(r.dataProjection):(s="Polygon"==a?1<(u=(0,v.inflateEnds)(e,t)).length?new p.default(e,"XY",u):new y.default(e,"XY",t):"Point"===a?new g.default(e,"XY"):"LineString"===a?new c.default(e,"XY"):"MultiPoint"===a?new h.default(e,"XY"):"MultiLineString"===a?new f.default(e,"XY",t):null,n=new this.featureClass,this.geometryName_&&n.setGeometryName(this.geometryName_),u=(0,l.transformGeometryWithOptions)(s,!1,r),n.setGeometry(u),void 0!==i&&n.setId(i),n.setProperties(o,!0)),n)}},{key:"getType",value:function(){return"arraybuffer"}},{key:"readFeatures",value:function(e,t){var r,n=this.layers_,i=(t=this.adaptOptions(t),(0,m.get)(t.dataProjection)),o=(i.setWorldExtent(t.extent),t.dataProjection=i,new d.default(e)),a=o.readFields(E,{}),s=[];for(r in a)if(!n||n.includes(r)){var u=a[r],l=u?[0,0,u.extent,u.extent]:null;i.setExtent(l);for(var c=0,f=u.length;c<f;++c){var h=function(e,t,r){e.pos=t.features[r];r=e.readVarint()+e.pos,t={layer:t,type:0,properties:{}};return e.readFields(I,t,r),t}(o,u,c),h=this.createFeature_(o,h,t);null!==h&&s.push(h)}}return s}},{key:"readProjection",value:function(e){return this.dataProjection}},{key:"setLayers",value:function(e){this.layers_=e}}])&&o(t.prototype,n),e&&o(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();function E(e,t,r){var n;3===e&&(e={keys:[],values:[],features:[]},n=r.readVarint()+r.pos,r.readFields(C,e,n),e.length=e.features.length,e.length)&&(t[e.name]=e)}function C(e,t,r){if(15===e)t.version=r.readVarint();else if(1===e)t.name=r.readString();else if(5===e)t.extent=r.readVarint();else if(2===e)t.features.push(r.pos);else if(3===e)t.keys.push(r.readString());else if(4===e){for(var n=null,i=r.readVarint()+r.pos;r.pos<i;)n=1==(e=r.readVarint()>>3)?r.readString():2===e?r.readFloat():3===e?r.readDouble():4===e?r.readVarint64():5===e?r.readVarint():6===e?r.readSVarint():7===e?r.readBoolean():null;t.values.push(n)}}function I(e,t,r){if(1==e)t.id=r.readVarint();else if(2==e)for(var n=r.readVarint()+r.pos;r.pos<n;){var i=t.layer.keys[r.readVarint()],o=t.layer.values[r.readVarint()];t.properties[i]=o}else 3==e?t.type=r.readVarint():4==e&&(t.geometry=r.pos)}r.default=e},{"../geom/LineString.js":205,"../geom/MultiLineString.js":207,"../geom/MultiPoint.js":208,"../geom/MultiPolygon.js":209,"../geom/Point.js":210,"../geom/Polygon.js":211,"../geom/flat/orient.js":226,"../proj.js":283,"../proj/Projection.js":284,"../render/Feature.js":295,"./Feature.js":147,pbf:419}],160:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=(p=e("./XML.js"))&&p.__esModule?p:{default:p},a=e("../xml.js"),n=e("./xlink.js"),s=e("./xsd.js");function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function l(e,t,r){t=f(t);var n=e,t=c()?Reflect.construct(t,r||[],f(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(c=function(){return!!e})()}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var p=[null,"http://www.opengis.net/ows/1.1"],d=(0,a.makeStructureNS)(p,{ServiceIdentification:(0,a.makeObjectPropertySetter)(function(e,t){return(0,a.pushParseAndPop)({},S,e,t)}),ServiceProvider:(0,a.makeObjectPropertySetter)(function(e,t){return(0,a.pushParseAndPop)({},j,e,t)}),OperationsMetadata:(0,a.makeObjectPropertySetter)(function(e,t){return(0,a.pushParseAndPop)({},w,e,t)})}),e=function(){function e(){if(this instanceof e)return l(this,e);throw new TypeError("Cannot call a class as a function")}var t,r=e,n=o.default;if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");return r.prototype=Object.create(n&&n.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),n&&h(r,n),r=e,(n=[{key:"readFromNode",value:function(e){return(0,a.pushParseAndPop)({},d,e,[])||null}}])&&u(r.prototype,n),t&&u(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}(),g=(0,a.makeStructureNS)(p,{DeliveryPoint:(0,a.makeObjectPropertySetter)(s.readString),City:(0,a.makeObjectPropertySetter)(s.readString),AdministrativeArea:(0,a.makeObjectPropertySetter)(s.readString),PostalCode:(0,a.makeObjectPropertySetter)(s.readString),Country:(0,a.makeObjectPropertySetter)(s.readString),ElectronicMailAddress:(0,a.makeObjectPropertySetter)(s.readString)}),y=(0,a.makeStructureNS)(p,{Value:(0,a.makeObjectPropertyPusher)(function(e,t){return(0,s.readString)(e)})}),A=(0,a.makeStructureNS)(p,{AllowedValues:(0,a.makeObjectPropertySetter)(function(e,t){return(0,a.pushParseAndPop)({},y,e,t)})}),m=(0,a.makeStructureNS)(p,{Phone:(0,a.makeObjectPropertySetter)(function(e,t){return(0,a.pushParseAndPop)({},E,e,t)}),Address:(0,a.makeObjectPropertySetter)(function(e,t){return(0,a.pushParseAndPop)({},g,e,t)})}),v=(0,a.makeStructureNS)(p,{HTTP:(0,a.makeObjectPropertySetter)(function(e,t){return(0,a.pushParseAndPop)({},b,e,t)})}),b=(0,a.makeStructureNS)(p,{Get:(0,a.makeObjectPropertyPusher)(function(e,t){var r=(0,n.readHref)(e);if(r)return(0,a.pushParseAndPop)({href:r},C,e,t)}),Post:void 0}),_=(0,a.makeStructureNS)(p,{DCP:(0,a.makeObjectPropertySetter)(function(e,t){return(0,a.pushParseAndPop)({},v,e,t)})}),w=(0,a.makeStructureNS)(p,{Operation:function(e,t){var r=e.getAttribute("name"),e=(0,a.pushParseAndPop)({},_,e,t);e&&(t[t.length-1][r]=e)}}),E=(0,a.makeStructureNS)(p,{Voice:(0,a.makeObjectPropertySetter)(s.readString),Facsimile:(0,a.makeObjectPropertySetter)(s.readString)}),C=(0,a.makeStructureNS)(p,{Constraint:(0,a.makeObjectPropertyPusher)(function(e,t){var r=e.getAttribute("name");if(r)return(0,a.pushParseAndPop)({name:r},A,e,t)})}),I=(0,a.makeStructureNS)(p,{IndividualName:(0,a.makeObjectPropertySetter)(s.readString),PositionName:(0,a.makeObjectPropertySetter)(s.readString),ContactInfo:(0,a.makeObjectPropertySetter)(function(e,t){return(0,a.pushParseAndPop)({},m,e,t)})}),S=(0,a.makeStructureNS)(p,{Abstract:(0,a.makeObjectPropertySetter)(s.readString),AccessConstraints:(0,a.makeObjectPropertySetter)(s.readString),Fees:(0,a.makeObjectPropertySetter)(s.readString),Title:(0,a.makeObjectPropertySetter)(s.readString),ServiceTypeVersion:(0,a.makeObjectPropertySetter)(s.readString),ServiceType:(0,a.makeObjectPropertySetter)(s.readString)}),j=(0,a.makeStructureNS)(p,{ProviderName:(0,a.makeObjectPropertySetter)(s.readString),ProviderSite:(0,a.makeObjectPropertySetter)(n.readHref),ServiceContact:(0,a.makeObjectPropertySetter)(function(e,t){return(0,a.pushParseAndPop)({},I,e,t)})});r.default=e},{"../xml.js":418,"./XML.js":170,"./xlink.js":198,"./xsd.js":199}],161:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.decodeDeltas=v,r.decodeFloats=_,r.decodeSignedIntegers=E,r.decodeUnsignedIntegers=I,r.default=void 0,r.encodeDeltas=m,r.encodeFloats=b,r.encodeSignedIntegers=w,r.encodeUnsignedInteger=S,r.encodeUnsignedIntegers=C;var o=n(e("../Feature.js")),a=n(e("../geom/LineString.js")),s=n(e("./TextFeature.js")),u=e("../geom/flat/flip.js"),l=e("../proj.js"),c=e("../geom/SimpleGeometry.js"),f=e("../geom/flat/inflate.js"),h=e("./Feature.js");function n(e){return e&&e.__esModule?e:{default:e}}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function d(e,t,r){t=y(t);var n=e,t=g()?Reflect.construct(t,r||[],y(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(g=function(){return!!e})()}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function A(e,t){return(A=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}e=function(){function r(e){var t;if(this instanceof r)return e=e||{},(t=d(this,r)).dataProjection=(0,l.get)("EPSG:4326"),t.factor_=e.factor||1e5,t.geometryLayout_=e.geometryLayout||"XY",t;throw new TypeError("Cannot call a class as a function")}var e,t=r,n=s.default;if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&A(t,n),t=r,(n=[{key:"readFeatureFromText",value:function(e,t){e=this.readGeometryFromText(e,t);return new o.default(e)}},{key:"readFeaturesFromText",value:function(e,t){return[this.readFeatureFromText(e,t)]}},{key:"readGeometryFromText",value:function(e,t){var r=(0,c.getStrideForLayout)(this.geometryLayout_),e=v(e,r,this.factor_),e=((0,u.flipXY)(e,0,e.length,r,e),(0,f.inflateCoordinates)(e,0,e.length,r)),r=new a.default(e,this.geometryLayout_);return(0,h.transformGeometryWithOptions)(r,!1,this.adaptOptions(t))}},{key:"writeFeatureText",value:function(e,t){e=e.getGeometry();if(e)return this.writeGeometryText(e,t);throw new Error("Expected `feature` to have a geometry")}},{key:"writeFeaturesText",value:function(e,t){return this.writeFeatureText(e[0],t)}},{key:"writeGeometryText",value:function(e,t){t=(e=(0,h.transformGeometryWithOptions)(e,!0,this.adaptOptions(t))).getFlatCoordinates(),e=e.getStride();return(0,u.flipXY)(t,0,t.length,e,t),m(t,e,this.factor_)}}])&&p(t.prototype,n),e&&p(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();function m(e,t,r){r=r||1e5;for(var n=new Array(t),i=0;i<t;++i)n[i]=0;for(var o=0,a=e.length;o<a;)for(i=0;i<t;++i,++o){var s=e[o],u=s-n[i];n[i]=s,e[o]=u}return b(e,r)}function v(e,t,r){r=r||1e5;for(var n=new Array(t),i=0;i<t;++i)n[i]=0;for(var o=_(e,r),a=0,s=o.length;a<s;)for(i=0;i<t;++i,++a)n[i]+=o[a],o[a]=n[i];return o}function b(e,t){t=t||1e5;for(var r=0,n=e.length;r<n;++r)e[r]=Math.round(e[r]*t);return w(e)}function _(e,t){t=t||1e5;for(var r=E(e),n=0,i=r.length;n<i;++n)r[n]/=t;return r}function w(e){for(var t=0,r=e.length;t<r;++t){var n=e[t];e[t]=n<0?~(n<<1):n<<1}return C(e)}function E(e){for(var t=I(e),r=0,n=t.length;r<n;++r){var i=t[r];t[r]=1&i?~(i>>1):i>>1}return t}function C(e){for(var t="",r=0,n=e.length;r<n;++r)t+=S(e[r]);return t}function I(e){for(var t=[],r=0,n=0,i=0,o=e.length;i<o;++i){var a=e.charCodeAt(i)-63;r|=(31&a)<<n,a<32?(t.push(r),n=r=0):n+=5}return t}function S(e){for(var t,r="";32<=e;)t=63+(32|31&e),r+=String.fromCharCode(t),e>>=5;return t=e+63,r+String.fromCharCode(t)}r.default=e},{"../Feature.js":82,"../geom/LineString.js":205,"../geom/SimpleGeometry.js":212,"../geom/flat/flip.js":218,"../geom/flat/inflate.js":220,"../proj.js":283,"./Feature.js":147,"./TextFeature.js":162}],162:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=(n=e("../format/Feature.js"))&&n.__esModule?n:{default:n},a=e("../util.js");function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function u(e,t,r){t=c(t);var n=e,t=l()?Reflect.construct(t,r||[],c(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(l=function(){return!!e})()}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var n=function(){function e(){if(this instanceof e)return u(this,e);throw new TypeError("Cannot call a class as a function")}var t,r=e,n=o.default;if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");return r.prototype=Object.create(n&&n.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),n&&f(r,n),r=e,(n=[{key:"getType",value:function(){return"text"}},{key:"readFeature",value:function(e,t){return this.readFeatureFromText(h(e),this.adaptOptions(t))}},{key:"readFeatureFromText",value:function(e,t){return(0,a.abstract)()}},{key:"readFeatures",value:function(e,t){return this.readFeaturesFromText(h(e),this.adaptOptions(t))}},{key:"readFeaturesFromText",value:function(e,t){return(0,a.abstract)()}},{key:"readGeometry",value:function(e,t){return this.readGeometryFromText(h(e),this.adaptOptions(t))}},{key:"readGeometryFromText",value:function(e,t){return(0,a.abstract)()}},{key:"readProjection",value:function(e){return this.readProjectionFromText(h(e))}},{key:"readProjectionFromText",value:function(e){return this.dataProjection}},{key:"writeFeature",value:function(e,t){return this.writeFeatureText(e,this.adaptOptions(t))}},{key:"writeFeatureText",value:function(e,t){return(0,a.abstract)()}},{key:"writeFeatures",value:function(e,t){return this.writeFeaturesText(e,this.adaptOptions(t))}},{key:"writeFeaturesText",value:function(e,t){return(0,a.abstract)()}},{key:"writeGeometry",value:function(e,t){return this.writeGeometryText(e,this.adaptOptions(t))}},{key:"writeGeometryText",value:function(e,t){return(0,a.abstract)()}}])&&s(r.prototype,n),t&&s(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}();function h(e){return"string"==typeof e?e:""}r.default=n},{"../format/Feature.js":147,"../util.js":404}],163:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var c=d(e("../Feature.js")),o=d(e("./JSONFeature.js")),n=d(e("../geom/LineString.js")),a=d(e("../geom/MultiLineString.js")),s=d(e("../geom/MultiPoint.js")),l=d(e("../geom/MultiPolygon.js")),u=d(e("../geom/Point.js")),f=d(e("../geom/Polygon.js")),h=e("../proj.js"),p=e("./Feature.js");function d(e){return e&&e.__esModule?e:{default:e}}function g(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function y(e,t,r){t=m(t);var n=e,t=A()?Reflect.construct(t,r||[],m(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function A(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(A=function(){return!!e})()}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){return(v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var e=function(){function r(e){var t;if(this instanceof r)return e=e||{},(t=y(this,r)).layerName_=e.layerName,t.layers_=e.layers||null,t.dataProjection=(0,h.get)(e.dataProjection||"EPSG:4326"),t;throw new TypeError("Cannot call a class as a function")}var e,t=r,n=o.default;if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&v(t,n),t=r,(n=[{key:"readFeaturesFromObject",value:function(e,t){if("Topology"!=e.type)return[];var r,n=null,i=null,o=(e.transform&&(n=(r=e.transform).scale,i=r.translate),e.arcs);if(r)for(var a=o,s=n,u=i,l=0,c=a.length;l<c;++l){m=A=y=g=d=p=h=f=void 0;for(var f=a[l],h=s,p=u,d=0,g=0,y=0,A=f.length;y<A;++y){var m=f[y];d+=m[0],g+=m[1],m[0]=d,m[1]=g,I(m,h,p)}}var v,b,_=[],w=e.objects,E=this.layerName_;for(b in w)this.layers_&&!this.layers_.includes(b)||("GeometryCollection"===w[b].type?(v=w[b],_.push.apply(_,function(e,t,r,n,i,o,a){for(var s=e.geometries,u=[],l=0,c=s.length;l<c;++l)u[l]=C(s[l],t,r,n,i,o,a);return u}(v,o,n,i,E,b,t))):(v=w[b],_.push(C(v,o,n,i,E,b,t))));return _}},{key:"readProjectionFromObject",value:function(e){return this.dataProjection}}])&&g(t.prototype,n),e&&g(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}(),b={Point:function(e,t,r){e=e.coordinates;return t&&r&&I(e,t,r),new u.default(e)},LineString:function(e,t){e=_(e.arcs,t);return new n.default(e)},Polygon:function(e,t){for(var r=[],n=0,i=e.arcs.length;n<i;++n)r[n]=_(e.arcs[n],t);return new f.default(r)},MultiPoint:function(e,t,r){var n=e.coordinates;if(t&&r)for(var i=0,o=n.length;i<o;++i)I(n[i],t,r);return new s.default(n)},MultiLineString:function(e,t){for(var r=[],n=0,i=e.arcs.length;n<i;++n)r[n]=_(e.arcs[n],t);return new a.default(r)},MultiPolygon:function(e,t){for(var r=[],n=0,i=e.arcs.length;n<i;++n){for(var o=e.arcs[n],a=[],s=0,u=o.length;s<u;++s)a[s]=_(o[s],t);r[n]=a}return new l.default(r)}};function _(e,t){for(var r,n=[],i=0,o=e.length;i<o;++i)if(r=e[i],0<i&&n.pop(),0<=r)for(var a=t[r],s=0,u=a.length;s<u;++s)n.push(a[s].slice(0));else for(var l=t[~r],c=l.length-1;0<=c;--c)n.push(l[c].slice(0));return n}function C(e,t,r,n,i,o,a){var s,u=null,l=e.type,l=(l&&(s=b[l],u="Point"===l||"MultiPoint"===l?s(e,r,n):s(e,t),u=(0,p.transformGeometryWithOptions)(u,!1,a)),new c.default({geometry:u})),r=(void 0!==e.id&&l.setId(e.id),e.properties);return i&&((r=r||{})[i]=o),r&&l.setProperties(r,!0),l}function I(e,t,r){e[0]=e[0]*t[0]+r[0],e[1]=e[1]*t[1]+r[1]}r.default=e},{"../Feature.js":82,"../geom/LineString.js":205,"../geom/MultiLineString.js":207,"../geom/MultiPoint.js":208,"../geom/MultiPolygon.js":209,"../geom/Point.js":210,"../geom/Polygon.js":211,"../proj.js":283,"./Feature.js":147,"./JSONFeature.js":157}],164:[function(e,D,t){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.writeFilter=function(e,t){t=t||"1.1.0";var r=(0,g.createElementNS)(R(t),"Filter"),n={node:r};return Object.assign(n,{version:t,filter:e}),te(r,e,[n]),r};var s=r(e("./GML2.js")),u=r(e("./GML3.js")),l=r(e("./GML32.js")),n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};t=f(t);if(t&&t.has(e))return t.get(e);var r,n={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in e){var o;"default"!==r&&{}.hasOwnProperty.call(e,r)&&((o=i?Object.getOwnPropertyDescriptor(e,r):null)&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=e[r])}return n.default=e,t&&t.set(e,n),n}(e("./GMLBase.js")),L=r(e("./XMLFeature.js")),g=e("../xml.js"),i=e("./filter.js"),y=e("../asserts.js"),Q=e("../proj.js"),c=e("./xsd.js");function f(e){var t,r;return"function"!=typeof WeakMap?null:(t=new WeakMap,r=new WeakMap,(f=function(e){return e?r:t})(e))}function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=a(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==a(e)?e:e+""}(n.key),n)}}function F(e,t,r){t=p(t);var n=e,t=h()?Reflect.construct(t,r||[],p(e).constructor):t.apply(e,r);if(t&&("object"==a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(h=function(){return!!e})()}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var A={"http://www.opengis.net/gml":{boundedBy:(0,g.makeObjectPropertySetter)(n.default.prototype.readExtentElement,"bounds")},"http://www.opengis.net/wfs/2.0":{member:(0,g.makeArrayPusher)(n.default.prototype.readFeaturesInternal)}},N={"http://www.opengis.net/wfs":{totalInserted:(0,g.makeObjectPropertySetter)(c.readPositiveInteger),totalUpdated:(0,g.makeObjectPropertySetter)(c.readPositiveInteger),totalDeleted:(0,g.makeObjectPropertySetter)(c.readPositiveInteger)},"http://www.opengis.net/wfs/2.0":{totalInserted:(0,g.makeObjectPropertySetter)(c.readPositiveInteger),totalUpdated:(0,g.makeObjectPropertySetter)(c.readPositiveInteger),totalDeleted:(0,g.makeObjectPropertySetter)(c.readPositiveInteger)}},G={"http://www.opengis.net/wfs":{TransactionSummary:(0,g.makeObjectPropertySetter)(z,"transactionSummary"),InsertResults:(0,g.makeObjectPropertySetter)(Y,"insertIds")},"http://www.opengis.net/wfs/2.0":{TransactionSummary:(0,g.makeObjectPropertySetter)(z,"transactionSummary"),InsertResults:(0,g.makeObjectPropertySetter)(Y,"insertIds")}},U={"http://www.opengis.net/wfs":{PropertyName:(0,g.makeChildAppender)(c.writeStringTextNode)},"http://www.opengis.net/wfs/2.0":{PropertyName:(0,g.makeChildAppender)(c.writeStringTextNode)}},m={"http://www.opengis.net/wfs":{Insert:(0,g.makeChildAppender)(V),Update:(0,g.makeChildAppender)(J),Delete:(0,g.makeChildAppender)(X),Property:(0,g.makeChildAppender)(Z),Native:(0,g.makeChildAppender)($)},"http://www.opengis.net/wfs/2.0":{Insert:(0,g.makeChildAppender)(V),Update:(0,g.makeChildAppender)(J),Delete:(0,g.makeChildAppender)(X),Property:(0,g.makeChildAppender)(Z),Native:(0,g.makeChildAppender)($)}},v="feature",b="http://www.w3.org/2000/xmlns/",_={"2.0.0":"http://www.opengis.net/ogc/1.1","1.1.0":"http://www.opengis.net/ogc","1.0.0":"http://www.opengis.net/ogc"},w={"2.0.0":"http://www.opengis.net/wfs/2.0","1.1.0":"http://www.opengis.net/wfs","1.0.0":"http://www.opengis.net/wfs"},E={"2.0.0":"http://www.opengis.net/fes/2.0","1.1.0":"http://www.opengis.net/fes","1.0.0":"http://www.opengis.net/fes"},C={"2.0.0":"http://www.opengis.net/wfs/2.0 http://schemas.opengis.net/wfs/2.0/wfs.xsd","1.1.0":"http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.1.0/wfs.xsd","1.0.0":"http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.0.0/wfs.xsd"},I={"2.0.0":l.default,"1.1.0":u.default,"1.0.0":s.default},e=function(){function r(e){var t;if(this instanceof r)return e=e||{},(t=F(this,r)).version_=e.version||"1.1.0",t.featureType_=e.featureType,t.featureNS_=e.featureNS,t.gmlFormat_=e.gmlFormat||new I[t.version_],t.schemaLocation_=e.schemaLocation||C[t.version_],t;throw new TypeError("Cannot call a class as a function")}var e,t=r,n=L.default;if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&d(t,n),t=r,(n=[{key:"getFeatureType",value:function(){return this.featureType_}},{key:"setFeatureType",value:function(e){this.featureType_=e}},{key:"readFeaturesFromNode",value:function(e,t){var r={node:e};Object.assign(r,{featureType:this.featureType_,featureNS:this.featureNS_}),Object.assign(r,this.getReadOptions(e,t||{}));t="2.0.0"===this.version_?A:this.gmlFormat_.FEATURE_COLLECTION_PARSERS;return(0,g.pushParseAndPop)([],t,e,[r],this.gmlFormat_)||[]}},{key:"readTransactionResponse",value:function(e){var t;if(e)return"string"==typeof e?(t=(0,g.parse)(e),this.readTransactionResponseFromDocument(t)):(0,g.isDocument)(e)?this.readTransactionResponseFromDocument(e):this.readTransactionResponseFromNode(e)}},{key:"readFeatureCollectionMetadata",value:function(e){var t;if(e)return"string"==typeof e?(t=(0,g.parse)(e),this.readFeatureCollectionMetadataFromDocument(t)):(0,g.isDocument)(e)?this.readFeatureCollectionMetadataFromDocument(e):this.readFeatureCollectionMetadataFromNode(e)}},{key:"readFeatureCollectionMetadataFromDocument",value:function(e){for(var t=e.firstChild;t;t=t.nextSibling)if(t.nodeType==Node.ELEMENT_NODE)return this.readFeatureCollectionMetadataFromNode(t)}},{key:"readFeatureCollectionMetadataFromNode",value:function(e){var t={},r=(0,c.readNonNegativeIntegerString)(e.getAttribute("numberOfFeatures"));return t.numberOfFeatures=r,(0,g.pushParseAndPop)(t,A,e,[],this.gmlFormat_)}},{key:"readTransactionResponseFromDocument",value:function(e){for(var t=e.firstChild;t;t=t.nextSibling)if(t.nodeType==Node.ELEMENT_NODE)return this.readTransactionResponseFromNode(t)}},{key:"readTransactionResponseFromNode",value:function(e){return(0,g.pushParseAndPop)({},G,e,[])}},{key:"writeGetFeature",value:function(r){var e,n=this,i=(0,g.createElementNS)(w[this.version_],"GetFeature"),o=(i.setAttribute("service","WFS"),i.setAttribute("version",this.version_),r.handle&&i.setAttribute("handle",r.handle),r.outputFormat&&i.setAttribute("outputFormat",r.outputFormat),void 0!==r.maxFeatures&&i.setAttribute("maxFeatures",String(r.maxFeatures)),r.resultType&&i.setAttribute("resultType",r.resultType),void 0!==r.startIndex&&i.setAttribute("startIndex",String(r.startIndex)),void 0!==r.count&&i.setAttribute("count",String(r.count)),void 0!==r.viewParams&&i.setAttribute("viewParams",r.viewParams),i.setAttributeNS(g.XML_SCHEMA_INSTANCE_URI,"xsi:schemaLocation",this.schemaLocation_),{node:i});return Object.assign(o,{version:this.version_,srsName:r.srsName,featureNS:r.featureNS||this.featureNS_,featurePrefix:r.featurePrefix,propertyNames:r.propertyNames||[]}),(0,y.assert)(Array.isArray(r.featureTypes),"`options.featureTypes` must be an Array"),"string"==typeof r.featureTypes[0]?(e=r.filter,r.bbox&&((0,y.assert)(r.geometryName,"`options.geometryName` must also be provided when `options.bbox` is set"),e=this.combineBboxAndFilter(r.geometryName,r.bbox,r.srsName,e)),Object.assign(o,{geometryName:r.geometryName,filter:e}),ce(i,r.featureTypes,[o])):r.featureTypes.forEach(function(e){var t=n.combineBboxAndFilter(e.geometryName,e.bbox,r.srsName,r.filter);Object.assign(o,{geometryName:e.geometryName,filter:t}),ce(i,[e.name],[o])}),i}},{key:"combineBboxAndFilter",value:function(e,t,r,n){e=(0,i.bbox)(e,t,r);return n?(0,i.and)(n,e):e}},{key:"writeTransaction",value:function(e,t,r,n){var i,o,a,s,u=[],l=n.version||this.version_,c=(0,g.createElementNS)(w[l],"Transaction"),l=(c.setAttribute("service","WFS"),c.setAttribute("version",l),n&&(i=n.gmlOptions||{},n.handle)&&c.setAttribute("handle",n.handle),c.setAttributeNS(g.XML_SCHEMA_INSTANCE_URI,"xsi:schemaLocation",C[l]),i=i,l=l,s=(o=n).featurePrefix||v,"1.0.0"===l?a=2:"1.1.0"===l?a=3:"2.0.0"===l&&(a=3.2),Object.assign({node:c},{version:l,featureNS:o.featureNS,featureType:o.featureType,featurePrefix:s,gmlVersion:a,hasZ:o.hasZ,srsName:o.srsName},i));return e&&S("Insert",e,u,l),t&&S("Update",t,u,l),r&&S("Delete",r,u,l),n.nativeElements&&S("Native",n.nativeElements,u,l),c}},{key:"readProjectionFromDocument",value:function(e){for(var t=e.firstChild;t;t=t.nextSibling)if(t.nodeType==Node.ELEMENT_NODE)return this.readProjectionFromNode(t);return null}},{key:"readProjectionFromNode",value:function(e){if(e.firstElementChild&&e.firstElementChild.firstElementChild)for(var t=(e=e.firstElementChild.firstElementChild).firstElementChild;t;t=t.nextElementSibling){var r;if(0!==t.childNodes.length&&(1!==t.childNodes.length||3!==t.firstChild.nodeType))return this.gmlFormat_.readGeometryElement(t,r=[{}]),(0,Q.get)(r.pop().srsName)}return null}}])&&o(t.prototype,n),e&&o(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();function S(e,t,r,n){(0,g.pushSerializeAndPop)(n,m,(0,g.makeSimpleNodeFactory)(e),t,r)}function z(e,t){return(0,g.pushParseAndPop)({},N,e,t)}var q={"http://www.opengis.net/ogc":{FeatureId:(0,g.makeArrayPusher)(function(e,t){return e.getAttribute("fid")})},"http://www.opengis.net/ogc/1.1":{FeatureId:(0,g.makeArrayPusher)(function(e,t){return e.getAttribute("fid")})}};function H(e,t){(0,g.parseNode)(q,e,t)}var W={"http://www.opengis.net/wfs":{Feature:H},"http://www.opengis.net/wfs/2.0":{Feature:H}};function Y(e,t){return(0,g.pushParseAndPop)([],W,e,t)}function V(e,t,r){var n=r[r.length-1],i=n.featureType,o=n.featureNS,n=n.gmlVersion,o=(0,g.createElementNS)(o,i);e.appendChild(o),(2===n?s:3===n?u:l).default.prototype.writeFeatureElement(o,t,r)}function K(e,t,r){var r=r[r.length-1].version,r=_[r],n=(0,g.createElementNS)(r,"Filter"),r=(0,g.createElementNS)(r,"FeatureId");n.appendChild(r),r.setAttribute("fid",t),e.appendChild(n)}function j(e,t){e=(e=e||v)+":";return t.startsWith(e)?t:e+t}function X(e,t,r){var n=r[r.length-1],i=((0,y.assert)(void 0!==t.getId(),"Features must have an id set"),n.featureType),o=n.featurePrefix,n=n.featureNS,i=j(o,i),i=(e.setAttribute("typeName",i),e.setAttributeNS(b,"xmlns:"+o,n),t.getId());void 0!==i&&K(e,i,r)}function J(e,t,r){var n=r[r.length-1],i=((0,y.assert)(void 0!==t.getId(),"Features must have an id set"),n.version),o=n.featureType,a=n.featurePrefix,s=n.featureNS,o=j(a,o),u=t.getGeometryName(),o=(e.setAttribute("typeName",o),e.setAttributeNS(b,"xmlns:"+a,s),t.getId());if(void 0!==o){for(var l=t.getKeys(),c=[],f=0,h=l.length;f<h;f++){var p,d=t.get(l[f]);void 0!==d&&(p=l[f],d&&"function"==typeof d.getSimplifiedGeometry&&(p=u),c.push({name:p,value:d}))}(0,g.pushSerializeAndPop)({version:i,gmlVersion:n.gmlVersion,node:e,hasZ:n.hasZ,srsName:n.srsName},m,(0,g.makeSimpleNodeFactory)("Property"),c,r),K(e,o,r)}}function Z(e,t,r){var n=r[r.length-1],i=n.version,o=w[i],i=(0,g.createElementNS)(o,"2.0.0"===i?"ValueReference":"Name"),n=n.gmlVersion;e.appendChild(i),(0,c.writeStringTextNode)(i,t.name),void 0!==t.value&&null!==t.value&&(i=(0,g.createElementNS)(o,"Value"),e.appendChild(i),t.value&&"function"==typeof t.value.getSimplifiedGeometry?(2===n?s:3===n?u:l).default.prototype.writeGeometryElement(i,t.value,r):(0,c.writeStringTextNode)(i,t.value))}function $(e,t,r){t.vendorId&&e.setAttribute("vendorId",t.vendorId),void 0!==t.safeToIgnore&&e.setAttribute("safeToIgnore",String(t.safeToIgnore)),void 0!==t.value&&(0,c.writeStringTextNode)(e,t.value)}var x={"http://www.opengis.net/wfs":{Query:(0,g.makeChildAppender)(ee)},"http://www.opengis.net/wfs/2.0":{Query:(0,g.makeChildAppender)(ee)},"http://www.opengis.net/ogc":{During:(0,g.makeChildAppender)(ie),And:(0,g.makeChildAppender)(P),Or:(0,g.makeChildAppender)(P),Not:(0,g.makeChildAppender)(oe),BBOX:(0,g.makeChildAppender)(re),Contains:(0,g.makeChildAppender)(O),Intersects:(0,g.makeChildAppender)(O),Within:(0,g.makeChildAppender)(O),DWithin:(0,g.makeChildAppender)(ne),PropertyIsEqualTo:(0,g.makeChildAppender)(k),PropertyIsNotEqualTo:(0,g.makeChildAppender)(k),PropertyIsLessThan:(0,g.makeChildAppender)(k),PropertyIsLessThanOrEqualTo:(0,g.makeChildAppender)(k),PropertyIsGreaterThan:(0,g.makeChildAppender)(k),PropertyIsGreaterThanOrEqualTo:(0,g.makeChildAppender)(k),PropertyIsNull:(0,g.makeChildAppender)(ae),PropertyIsBetween:(0,g.makeChildAppender)(se),PropertyIsLike:(0,g.makeChildAppender)(ue)},"http://www.opengis.net/fes/2.0":{During:(0,g.makeChildAppender)(ie),And:(0,g.makeChildAppender)(P),Or:(0,g.makeChildAppender)(P),Not:(0,g.makeChildAppender)(oe),BBOX:(0,g.makeChildAppender)(re),Contains:(0,g.makeChildAppender)(O),Disjoint:(0,g.makeChildAppender)(O),Intersects:(0,g.makeChildAppender)(O),ResourceId:(0,g.makeChildAppender)(function(e,t,r){e.setAttribute("rid",t.rid)}),Within:(0,g.makeChildAppender)(O),DWithin:(0,g.makeChildAppender)(ne),PropertyIsEqualTo:(0,g.makeChildAppender)(k),PropertyIsNotEqualTo:(0,g.makeChildAppender)(k),PropertyIsLessThan:(0,g.makeChildAppender)(k),PropertyIsLessThanOrEqualTo:(0,g.makeChildAppender)(k),PropertyIsGreaterThan:(0,g.makeChildAppender)(k),PropertyIsGreaterThanOrEqualTo:(0,g.makeChildAppender)(k),PropertyIsNull:(0,g.makeChildAppender)(ae),PropertyIsBetween:(0,g.makeChildAppender)(se),PropertyIsLike:(0,g.makeChildAppender)(ue)}};function ee(e,t,r){var n=r[r.length-1],i=n.version,o=n.featurePrefix,a=n.featureNS,s=n.propertyNames,u=n.srsName,t=o?j(o,t):t,t=(e.setAttribute("2.0.0"===i?"typeNames":"typeName",t),u&&e.setAttribute("srsName",u),a&&e.setAttributeNS(b,"xmlns:"+o,a),Object.assign({},n)),u=(t.node=e,(0,g.pushSerializeAndPop)(t,U,(0,g.makeSimpleNodeFactory)("PropertyName"),s,r),n.filter);u&&(o=(0,g.createElementNS)(R(i),"Filter"),e.appendChild(o),te(o,u,r))}function te(e,t,r){var n=r[r.length-1],e={node:e};Object.assign(e,{context:n}),(0,g.pushSerializeAndPop)(e,x,(0,g.makeSimpleNodeFactory)(t.getTagName()),[t],r)}function re(e,t,r){var n=r[r.length-1],i=n.context.version,n=(n.srsName=t.srsName,I[i]);M(i,e,t.geometryName),n.prototype.writeGeometryElement(e,t.extent,r)}function O(e,t,r){var n=r[r.length-1],i=n.context.version,n=(n.srsName=t.srsName,I[i]);M(i,e,t.geometryName),n.prototype.writeGeometryElement(e,t.geometry,r)}function ne(e,t,r){var n=r[r.length-1].context.version,r=(O(e,t,r),(0,g.createElementNS)(R(n),"Distance"));(0,c.writeStringTextNode)(r,t.distance.toString()),"2.0.0"===n?r.setAttribute("uom",t.unit):r.setAttribute("units",t.unit),e.appendChild(r)}function ie(e,t,r){r=r[r.length-1].context.version,B(E[r],"ValueReference",e,t.propertyName),r=(0,g.createElementNS)(n.GMLNS,"TimePeriod"),e.appendChild(r),e=(0,g.createElementNS)(n.GMLNS,"begin"),r.appendChild(e),le(e,t.begin),e=(0,g.createElementNS)(n.GMLNS,"end");r.appendChild(e),le(e,t.end)}function P(e,t,r){var n=r[r.length-1].context,i={node:e};Object.assign(i,{context:n});for(var o=t.conditions,a=0,s=o.length;a<s;++a){var u=o[a];(0,g.pushSerializeAndPop)(i,x,(0,g.makeSimpleNodeFactory)(u.getTagName()),[u],r)}}function oe(e,t,r){var n=r[r.length-1].context,e={node:e},n=(Object.assign(e,{context:n}),t.condition);(0,g.pushSerializeAndPop)(e,x,(0,g.makeSimpleNodeFactory)(n.getTagName()),[n],r)}function k(e,t,r){r=r[r.length-1].context.version;void 0!==t.matchCase&&e.setAttribute("matchCase",t.matchCase.toString()),M(r,e,t.propertyName),T(r,e,""+t.expression)}function ae(e,t,r){M(r[r.length-1].context.version,e,t.propertyName)}function se(e,t,r){var r=r[r.length-1].context.version,n=R(r),i=(M(r,e,t.propertyName),(0,g.createElementNS)(n,"LowerBoundary")),i=(e.appendChild(i),T(r,i,""+t.lowerBoundary),(0,g.createElementNS)(n,"UpperBoundary"));e.appendChild(i),T(r,i,""+t.upperBoundary)}function ue(e,t,r){r=r[r.length-1].context.version;e.setAttribute("wildCard",t.wildCard),e.setAttribute("singleChar",t.singleChar),e.setAttribute("escapeChar",t.escapeChar),void 0!==t.matchCase&&e.setAttribute("matchCase",t.matchCase.toString()),M(r,e,t.propertyName),T(r,e,""+t.pattern)}function B(e,t,r,n){e=(0,g.createElementNS)(e,t);(0,c.writeStringTextNode)(e,n),r.appendChild(e)}function T(e,t,r){B(R(e),"Literal",t,r)}function M(e,t,r){"2.0.0"===e?B(E[e],"ValueReference",t,r):B(_[e],"PropertyName",t,r)}function le(e,t){var r=(0,g.createElementNS)(n.GMLNS,"TimeInstant"),e=(e.appendChild(r),(0,g.createElementNS)(n.GMLNS,"timePosition"));r.appendChild(e),(0,c.writeStringTextNode)(e,t)}function ce(e,t,r){var n=r[r.length-1],n=Object.assign({},n);n.node=e,(0,g.pushSerializeAndPop)(n,x,(0,g.makeSimpleNodeFactory)("Query"),t,r)}function R(e){return("2.0.0"===e?E:_)[e]}t.default=e},{"../asserts.js":111,"../proj.js":283,"../xml.js":418,"./GML2.js":149,"./GML3.js":150,"./GML32.js":151,"./GMLBase.js":152,"./XMLFeature.js":171,"./filter.js":172,"./xsd.js":199}],165:[function(e,D,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=d(e("../Feature.js")),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=v(e)&&"function"!=typeof e)return{default:e};t=p(t);if(t&&t.has(e))return t.get(e);var r,n={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in e){var o;"default"!==r&&{}.hasOwnProperty.call(e,r)&&((o=i?Object.getOwnPropertyDescriptor(e,r):null)&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=e[r])}return n.default=e,t&&t.set(e,n),n}(e("./Feature.js")),a=d(e("../geom/GeometryCollection.js")),r=d(e("../geom/LineString.js")),i=d(e("../geom/MultiLineString.js")),s=d(e("../geom/MultiPoint.js")),u=d(e("../geom/MultiPolygon.js")),l=d(e("../geom/Point.js")),c=d(e("../geom/Polygon.js")),f=e("../proj.js"),h=d(e("../geom/SimpleGeometry.js"));function p(e){var t,r;return"function"!=typeof WeakMap?null:(t=new WeakMap,r=new WeakMap,(p=function(e){return e?r:t})(e))}function d(e){return e&&e.__esModule?e:{default:e}}function L(e,t,r){t=y(t);var n=e,t=g()?Reflect.construct(t,r||[],y(e).constructor):t.apply(e,r);if(t&&("object"==v(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(g=function(){return!!e})()}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function A(e,t){return(A=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Q(e,t){var r,n,i,o,a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(a)return i=!(n=!0),{s:function(){a=a.call(e)},n:function(){var e=a.next();return n=e.done,e},e:function(e){i=!0,r=e},f:function(){try{n||null==a.return||a.return()}finally{if(i)throw r}}};if(Array.isArray(e)||(a=function(e,t){{var r;if(e)return"string"==typeof e?m(e,t):"Map"===(r="Object"===(r={}.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?m(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length)return a&&(e=a),o=0,{s:t=function(){},n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,E(n.key),n)}}function w(e,t,r){return t&&_(e.prototype,t),r&&_(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function E(e){e=function(e,t){if("object"!=v(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=v(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==v(e)?e:e+""}var C=1,I=2,S=3,j=4,x=5,O=6,P=7,k=15,B=16,T=17,M=w(function e(t){b(this,e),this.view_=t,this.pos_=0,this.initialized_=!1,this.isLittleEndian_=!1,this.hasZ_=!1,this.hasM_=!1,this.srid_=null,this.layout_="XY"},[{key:"readUint8",value:function(){return this.view_.getUint8(this.pos_++)}},{key:"readUint32",value:function(e){return this.view_.getUint32((this.pos_+=4)-4,void 0!==e?e:this.isLittleEndian_)}},{key:"readDouble",value:function(e){return this.view_.getFloat64((this.pos_+=8)-8,void 0!==e?e:this.isLittleEndian_)}},{key:"readPoint",value:function(){var e=[];return e.push(this.readDouble()),e.push(this.readDouble()),this.hasZ_&&e.push(this.readDouble()),this.hasM_&&e.push(this.readDouble()),e}},{key:"readLineString",value:function(){for(var e=this.readUint32(),t=[],r=0;r<e;r++)t.push(this.readPoint());return t}},{key:"readPolygon",value:function(){for(var e=this.readUint32(),t=[],r=0;r<e;r++)t.push(this.readLineString());return t}},{key:"readWkbHeader",value:function(e){var t=0<this.readUint8(),r=this.readUint32(t),n=Math.floor((268435455&r)/1e3),i=Boolean(2147483648&r)||1===n||3===n,n=Boolean(1073741824&r)||2===n||3===n,o=Boolean(536870912&r),r=(268435455&r)%1e3,a=["XY",i?"Z":"",n?"M":""].join(""),o=o?this.readUint32(t):null;if(void 0!==e&&e!==r)throw new Error("Unexpected WKB geometry type "+r);if(this.initialized_){if(this.isLittleEndian_!==t)throw new Error("Inconsistent endian");if(this.layout_!==a)throw new Error("Inconsistent geometry layout");if(o&&this.srid_!==o)throw new Error("Inconsistent coordinate system (SRID)")}else this.isLittleEndian_=t,this.hasZ_=i,this.hasM_=n,this.layout_=a,this.srid_=o,this.initialized_=!0;return r}},{key:"readWkbPayload",value:function(e){switch(e){case C:return this.readPoint();case I:return this.readLineString();case S:case T:return this.readPolygon();case j:return this.readMultiPoint();case x:return this.readMultiLineString();case O:case k:case B:return this.readMultiPolygon();case P:return this.readGeometryCollection();default:throw new Error("Unsupported WKB geometry type "+e+" is found")}}},{key:"readWkbBlock",value:function(e){return this.readWkbPayload(this.readWkbHeader(e))}},{key:"readWkbCollection",value:function(e,t){for(var r=this.readUint32(),n=[],i=0;i<r;i++){var o=e.call(this,t);o&&n.push(o)}return n}},{key:"readMultiPoint",value:function(){return this.readWkbCollection(this.readWkbBlock,C)}},{key:"readMultiLineString",value:function(){return this.readWkbCollection(this.readWkbBlock,I)}},{key:"readMultiPolygon",value:function(){return this.readWkbCollection(this.readWkbBlock,S)}},{key:"readGeometryCollection",value:function(){return this.readWkbCollection(this.readGeometry)}},{key:"readGeometry",value:function(){var e=this.readWkbHeader(),t=this.readWkbPayload(e);switch(e){case C:return new l.default(t,this.layout_);case I:return new r.default(t,this.layout_);case S:case T:return new c.default(t,this.layout_);case j:return new s.default(t,this.layout_);case x:return new i.default(t,this.layout_);case O:case k:case B:return new u.default(t,this.layout_);case P:return new a.default(t);default:return null}}},{key:"getSrid",value:function(){return this.srid_}}]),F=w(function e(t){b(this,e),this.layout_=(t=t||{}).layout,this.isLittleEndian_=!1!==t.littleEndian,this.isEWKB_=!1!==t.ewkb,this.writeQueue_=[],this.nodata_=Object.assign({X:0,Y:0,Z:0,M:0},t.nodata)},[{key:"writeUint8",value:function(e){this.writeQueue_.push([1,e])}},{key:"writeUint32",value:function(e){this.writeQueue_.push([4,e])}},{key:"writeDouble",value:function(e){this.writeQueue_.push([8,e])}},{key:"writePoint",value:function(n,e){var t,r=Object.assign.apply(null,e.split("").map(function(e,t){return r={},e=e,t=n[t],(e=E(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r;var r})),i=Q(this.layout_);try{for(i.s();!(t=i.n()).done;){var o=t.value;this.writeDouble((o in r?r:this.nodata_)[o])}}catch(n){i.e(n)}finally{i.f()}}},{key:"writeLineString",value:function(e,t){this.writeUint32(e.length);for(var r=0;r<e.length;r++)this.writePoint(e[r],t)}},{key:"writePolygon",value:function(e,t){this.writeUint32(e.length);for(var r=0;r<e.length;r++)this.writeLineString(e[r],t)}},{key:"writeWkbHeader",value:function(e,t){e%=1e3,this.layout_.includes("Z")&&(e+=this.isEWKB_?2147483648:1e3),this.layout_.includes("M")&&(e+=this.isEWKB_?1073741824:2e3),this.isEWKB_&&Number.isInteger(t)&&(e|=536870912),this.writeUint8(this.isLittleEndian_?1:0),this.writeUint32(e),this.isEWKB_&&Number.isInteger(t)&&this.writeUint32(t)}},{key:"writeMultiPoint",value:function(e,t){this.writeUint32(e.length);for(var r=0;r<e.length;r++)this.writeWkbHeader(1),this.writePoint(e[r],t)}},{key:"writeMultiLineString",value:function(e,t){this.writeUint32(e.length);for(var r=0;r<e.length;r++)this.writeWkbHeader(2),this.writeLineString(e[r],t)}},{key:"writeMultiPolygon",value:function(e,t){this.writeUint32(e.length);for(var r=0;r<e.length;r++)this.writeWkbHeader(3),this.writePolygon(e[r],t)}},{key:"writeGeometryCollection",value:function(e){this.writeUint32(e.length);for(var t=0;t<e.length;t++)this.writeGeometry(e[t])}},{key:"findMinimumLayout",value:function(e){var t,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"XYZM";if(e instanceof h.default)return(t=e.getLayout())===r?t:"XYZM"===t?r:"XYZM"===r?t:"XY";if(e instanceof a.default)for(var n=e.getGeometriesArray(),i=0;i<n.length&&"XY"!==r;i++)r=this.findMinimumLayout(n[i],r);return r}},{key:"writeGeometry",value:function(e,t){var r={Point:C,LineString:I,Polygon:S,MultiPoint:j,MultiLineString:x,MultiPolygon:O,GeometryCollection:P},n=e.getType(),r=r[n];if(!r)throw new Error("GeometryType "+n+" is not supported");this.layout_||(this.layout_=this.findMinimumLayout(e)),this.writeWkbHeader(r,t),e instanceof h.default?{Point:this.writePoint,LineString:this.writeLineString,Polygon:this.writePolygon,MultiPoint:this.writeMultiPoint,MultiLineString:this.writeMultiLineString,MultiPolygon:this.writeMultiPolygon}[n].call(this,e.getCoordinates(),e.getLayout()):e instanceof a.default&&this.writeGeometryCollection(e.getGeometriesArray())}},{key:"getBuffer",value:function(){var t=this,e=this.writeQueue_.reduce(function(e,t){return e+t[0]},0),e=new ArrayBuffer(e),r=new DataView(e),n=0;return this.writeQueue_.forEach(function(e){switch(e[0]){case 1:r.setUint8(n,e[1]);break;case 4:r.setUint32(n,e[1],t.isLittleEndian_);break;case 8:r.setFloat64(n,e[1],t.isLittleEndian_)}n+=e[0]}),e}}]),e=function(){function r(e){var t;return b(this,r),e=e||{},(t=L(this,r)).splitCollection=Boolean(e.splitCollection),t.viewCache_=null,t.hex_=!1!==e.hex,t.littleEndian_=!1!==e.littleEndian,t.ewkb_=!1!==e.ewkb,t.layout_=e.geometryLayout,t.nodataZ_=e.nodataZ||0,t.nodataM_=e.nodataM||0,t.srid_=e.srid,t}var e=r,t=o.default;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");return e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&A(e,t),w(r,[{key:"getType",value:function(){return this.hex_?"text":"arraybuffer"}},{key:"readFeature",value:function(e,t){return new n.default({geometry:this.readGeometry(e,t)})}},{key:"readFeatures",value:function(e,t){e=this.readGeometry(e,t);return(this.splitCollection&&e instanceof a.default?e.getGeometriesArray():[e]).map(function(e){return new n.default({geometry:e})})}},{key:"readGeometry",value:function(e,t){var r,n=R(e);return n?(r=new M(n).readGeometry(),this.viewCache_=n,t=this.getReadOptions(e,t),(this.viewCache_=null,o.transformGeometryWithOptions)(r,!1,t)):null}},{key:"readProjection",value:function(e){var e=this.viewCache_||R(e);if(e)return(e=new M(e)).readWkbHeader(),e.getSrid()&&(0,f.get)("EPSG:"+e.getSrid())||void 0}},{key:"writeFeature",value:function(e,t){return this.writeGeometry(e.getGeometry(),t)}},{key:"writeFeatures",value:function(e,t){return this.writeGeometry(new a.default(e.map(function(e){return e.getGeometry()})),t)}},{key:"writeGeometry",value:function(e,t){t=this.adaptOptions(t);var r=new F({layout:this.layout_,littleEndian:this.littleEndian_,ewkb:this.ewkb_,nodata:{Z:this.nodataZ_,M:this.nodataM_}}),n=Number.isInteger(this.srid_)?Number(this.srid_):null,i=(!1===this.srid_||Number.isInteger(this.srid_)||(i=t.dataProjection&&(0,f.get)(t.dataProjection))&&(i=i.getCode()).startsWith("EPSG:")&&(n=Number(i.substring(5))),r.writeGeometry((0,o.transformGeometryWithOptions)(e,!0,t),n),r.getBuffer());return this.hex_?(e=i,e=new Uint8Array(i),Array.from(e.values()).map(function(e){return(e<16?"0":"")+Number(e).toString(16).toUpperCase()}).join("")):i}}])}();function R(e){if("string"!=typeof e)return ArrayBuffer.isView(e)?e instanceof DataView?e:new DataView(e.buffer,e.byteOffset,e.byteLength):e instanceof ArrayBuffer?new DataView(e):null;for(var t=e,r=new Uint8Array(t.length/2),n=0;n<t.length/2;n++)r[n]=parseInt(t.substr(2*n,2),16);return new DataView(r.buffer)}t.default=e},{"../Feature.js":82,"../geom/GeometryCollection.js":204,"../geom/LineString.js":205,"../geom/MultiLineString.js":207,"../geom/MultiPoint.js":208,"../geom/MultiPolygon.js":209,"../geom/Point.js":210,"../geom/Polygon.js":211,"../geom/SimpleGeometry.js":212,"../proj.js":283,"./Feature.js":147}],166:[function(e,D,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=h(e("../Feature.js")),a=h(e("../geom/GeometryCollection.js")),r=h(e("../geom/LineString.js")),n=h(e("../geom/MultiLineString.js")),i=h(e("../geom/MultiPoint.js")),o=h(e("../geom/MultiPolygon.js")),u=h(e("../geom/Point.js")),l=h(e("../geom/Polygon.js")),c=h(e("./TextFeature.js")),f=e("./Feature.js");function h(e){return e&&e.__esModule?e:{default:e}}function p(e,t,r){t=g(t);var n=e,t=d()?Reflect.construct(t,r||[],g(e).constructor):t.apply(e,r);if(t&&("object"==A(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(d=function(){return!!e})()}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t){return(y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function A(e){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=A(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=A(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==A(e)?e:e+""}(n.key),n)}}function b(e,t,r){return t&&v(e.prototype,t),r&&v(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}var _={POINT:u.default,LINESTRING:r.default,POLYGON:l.default,MULTIPOINT:i.default,MULTILINESTRING:n.default,MULTIPOLYGON:o.default},w="Z",E="M",C=0,I=1,S=2,j=3,x=4,O=5,P=6,k={Point:"POINT",LineString:"LINESTRING",Polygon:"POLYGON",MultiPoint:"MULTIPOINT",MultiLineString:"MULTILINESTRING",MultiPolygon:"MULTIPOLYGON",GeometryCollection:"GEOMETRYCOLLECTION",Circle:"CIRCLE"},L=b(function e(t){m(this,e),this.wkt=t,this.index_=-1},[{key:"isAlpha_",value:function(e){return"a"<=e&&e<="z"||"A"<=e&&e<="Z"}},{key:"isNumeric_",value:function(e,t){return t=void 0!==t&&t,"0"<=e&&e<="9"||"."==e&&!t}},{key:"isWhiteSpace_",value:function(e){return" "==e||"\t"==e||"\r"==e||"\n"==e}},{key:"nextChar_",value:function(){return this.wkt.charAt(++this.index_)}},{key:"nextToken",value:function(){var e,t=this.nextChar_(),r=this.index_,n=t;if("("==t)e=S;else if(","==t)e=O;else if(")"==t)e=j;else if(this.isNumeric_(t)||"-"==t)e=x,n=this.readNumber_();else if(this.isAlpha_(t))e=I,n=this.readText_();else{if(this.isWhiteSpace_(t))return this.nextToken();if(""!==t)throw new Error("Unexpected character: "+t);e=P}return{position:r,value:n,type:e}}},{key:"readNumber_",value:function(){for(var e,t=this.index_,r=!1,n=!1;"."==e?r=!0:"e"!=e&&"E"!=e||(n=!0),e=this.nextChar_(),this.isNumeric_(e,r)||!n&&("e"==e||"E"==e)||n&&("-"==e||"+"==e););return parseFloat(this.wkt.substring(t,this.index_--))}},{key:"readText_",value:function(){for(var e,t=this.index_;e=this.nextChar_(),this.isAlpha_(e););return this.wkt.substring(t,this.index_--).toUpperCase()}}]),Q=b(function e(t){m(this,e),this.lexer_=t,this.token_={position:0,type:C},this.layout_="XY"},[{key:"consume_",value:function(){this.token_=this.lexer_.nextToken()}},{key:"isTokenType",value:function(e){return this.token_.type==e}},{key:"match",value:function(e){e=this.isTokenType(e);return e&&this.consume_(),e}},{key:"parse",value:function(){return this.consume_(),this.parseGeometry_()}},{key:"parseGeometryLayout_",value:function(){var e="XY",t=this.token_;return this.isTokenType(I)&&((t=t.value)===w?e="XYZ":t===E?e="XYM":"ZM"===t&&(e="XYZM"),"XY"!==e)&&this.consume_(),e}},{key:"parseGeometryCollectionText_",value:function(){if(this.match(S)){for(var e=[];e.push(this.parseGeometry_()),this.match(O););if(this.match(j))return e}throw new Error(this.formatErrorMessage_())}},{key:"parsePointText_",value:function(){if(this.match(S)){var e=this.parsePoint_();if(this.match(j))return e}throw new Error(this.formatErrorMessage_())}},{key:"parseLineStringText_",value:function(){if(this.match(S)){var e=this.parsePointList_();if(this.match(j))return e}throw new Error(this.formatErrorMessage_())}},{key:"parsePolygonText_",value:function(){if(this.match(S)){var e=this.parseLineStringTextList_();if(this.match(j))return e}throw new Error(this.formatErrorMessage_())}},{key:"parseMultiPointText_",value:function(){var e;if(this.match(S)&&(e=this.token_.type==S?this.parsePointTextList_():this.parsePointList_(),this.match(j)))return e;throw new Error(this.formatErrorMessage_())}},{key:"parseMultiLineStringText_",value:function(){if(this.match(S)){var e=this.parseLineStringTextList_();if(this.match(j))return e}throw new Error(this.formatErrorMessage_())}},{key:"parseMultiPolygonText_",value:function(){if(this.match(S)){var e=this.parsePolygonTextList_();if(this.match(j))return e}throw new Error(this.formatErrorMessage_())}},{key:"parsePoint_",value:function(){for(var e=[],t=this.layout_.length,r=0;r<t;++r){var n=this.token_;if(!this.match(x))break;e.push(n.value)}if(e.length==t)return e;throw new Error(this.formatErrorMessage_())}},{key:"parsePointList_",value:function(){for(var e=[this.parsePoint_()];this.match(O);)e.push(this.parsePoint_());return e}},{key:"parsePointTextList_",value:function(){for(var e=[this.parsePointText_()];this.match(O);)e.push(this.parsePointText_());return e}},{key:"parseLineStringTextList_",value:function(){for(var e=[this.parseLineStringText_()];this.match(O);)e.push(this.parseLineStringText_());return e}},{key:"parsePolygonTextList_",value:function(){for(var e=[this.parsePolygonText_()];this.match(O);)e.push(this.parsePolygonText_());return e}},{key:"isEmptyGeometry_",value:function(){var e=this.isTokenType(I)&&"EMPTY"==this.token_.value;return e&&this.consume_(),e}},{key:"formatErrorMessage_",value:function(){return"Unexpected `"+this.token_.value+"` at position "+this.token_.position+" in `"+this.lexer_.wkt+"`"}},{key:"parseGeometry_",value:function(){var e=this.token_;if(this.match(I)){var e=e.value,t=(this.layout_=this.parseGeometryLayout_(),this.isEmptyGeometry_());if("GEOMETRYCOLLECTION"==e)return t?new a.default([]):(n=this.parseGeometryCollectionText_(),new a.default(n));var r,n=_[e];if(!n)throw new Error("Invalid geometry type: "+e);if(t)r="POINT"==e?[NaN,NaN]:[];else switch(e){case"POINT":r=this.parsePointText_();break;case"LINESTRING":r=this.parseLineStringText_();break;case"POLYGON":r=this.parsePolygonText_();break;case"MULTIPOINT":r=this.parseMultiPointText_();break;case"MULTILINESTRING":r=this.parseMultiLineStringText_();break;case"MULTIPOLYGON":r=this.parseMultiPolygonText_()}return new n(r,this.layout_)}throw new Error(this.formatErrorMessage_())}}]),e=function(){function r(e){var t;return m(this,r),e=e||{},(t=p(this,r)).splitCollection_=void 0!==e.splitCollection&&e.splitCollection,t}var e=r,t=c.default;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");return e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t),b(r,[{key:"parse_",value:function(e){e=new L(e);return new Q(e).parse()}},{key:"readFeatureFromText",value:function(e,t){e=this.readGeometryFromText(e,t),t=new s.default;return t.setGeometry(e),t}},{key:"readFeaturesFromText",value:function(e,t){for(var r,e=this.readGeometryFromText(e,t),n=[],i=0,o=(r=this.splitCollection_&&"GeometryCollection"==e.getType()?e.getGeometriesArray():[e]).length;i<o;++i){var a=new s.default;a.setGeometry(r[i]),n.push(a)}return n}},{key:"readGeometryFromText",value:function(e,t){e=this.parse_(e);return(0,f.transformGeometryWithOptions)(e,!1,t)}},{key:"writeFeatureText",value:function(e,t){e=e.getGeometry();return e?this.writeGeometryText(e,t):""}},{key:"writeFeaturesText",value:function(e,t){if(1==e.length)return this.writeFeatureText(e[0],t);for(var r=[],n=0,i=e.length;n<i;++n)r.push(e[n].getGeometry());var o=new a.default(r);return this.writeGeometryText(o,t)}},{key:"writeGeometryText",value:function(e,t){return R((0,f.transformGeometryWithOptions)(e,!0,t))}}])}();function B(e){e=e.getCoordinates();return 0===e.length?"":e.join(" ")}function T(e){for(var t=e.getCoordinates(),r=[],n=0,i=t.length;n<i;++n)r.push(t[n].join(" "));return r.join(",")}function M(e){for(var t=[],r=e.getLinearRings(),n=0,i=r.length;n<i;++n)t.push("("+T(r[n])+")");return t.join(",")}var F={Point:B,LineString:T,Polygon:M,MultiPoint:function(e){for(var t=[],r=e.getPoints(),n=0,i=r.length;n<i;++n)t.push("("+B(r[n])+")");return t.join(",")},MultiLineString:function(e){for(var t=[],r=e.getLineStrings(),n=0,i=r.length;n<i;++n)t.push("("+T(r[n])+")");return t.join(",")},MultiPolygon:function(e){for(var t=[],r=e.getPolygons(),n=0,i=r.length;n<i;++n)t.push("("+M(r[n])+")");return t.join(",")},GeometryCollection:function(e){for(var t=[],r=e.getGeometries(),n=0,i=r.length;n<i;++n)t.push(R(r[n]));return t.join(",")}};function R(e){var t,r=e.getType(),n=(0,F[r])(e),r=k[r];return"function"==typeof e.getFlatCoordinates&&(e=(e=e).getLayout(),t="","XYZ"!==e&&"XYZM"!==e||(t+=w),"XYM"!==e&&"XYZM"!==e||(t+=E),0<t.length)&&(r+=" "+t),0===n.length?r+" EMPTY":r+"("+n+")"}t.default=e},{"../Feature.js":82,"../geom/GeometryCollection.js":204,"../geom/LineString.js":205,"../geom/MultiLineString.js":207,"../geom/MultiPoint.js":208,"../geom/MultiPolygon.js":209,"../geom/Point.js":210,"../geom/Polygon.js":211,"./Feature.js":147,"./TextFeature.js":162}],167:[function(e,R,t){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=(r=e("./XML.js"))&&r.__esModule?r:{default:r},a=e("../xml.js"),s=e("./xsd.js"),r=e("./xlink.js");function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function l(e,t,r){t=f(t);var n=e,t=c()?Reflect.construct(t,r||[],f(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(c=function(){return!!e})()}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var e=[null,"http://www.opengis.net/wms"],p=(0,a.makeStructureNS)(e,{Service:(0,a.makeObjectPropertySetter)(function(e,t){return(0,a.pushParseAndPop)({},g,e,t)}),Capability:(0,a.makeObjectPropertySetter)(function(e,t){return(0,a.pushParseAndPop)({},n,e,t)})}),n=(0,a.makeStructureNS)(e,{Request:(0,a.makeObjectPropertySetter)(function(e,t){return(0,a.pushParseAndPop)({},E,e,t)}),Exception:(0,a.makeObjectPropertySetter)(function(e,t){return(0,a.pushParseAndPop)([],v,e,t)}),Layer:(0,a.makeObjectPropertySetter)(function(e,t){var r=(0,a.pushParseAndPop)({},b,e,t);return void 0===r.Layer?Object.assign(r,P(e,t)):r})}),d=function(){function t(){var e;if(this instanceof t)return(e=l(this,t)).version=void 0,e;throw new TypeError("Cannot call a class as a function")}var e,r=t,n=o.default;if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");return r.prototype=Object.create(n&&n.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),n&&h(r,n),r=t,(n=[{key:"readFromNode",value:function(e){return this.version=e.getAttribute("version").trim(),(0,a.pushParseAndPop)({version:this.version},p,e,[])||null}}])&&u(r.prototype,n),e&&u(r,e),Object.defineProperty(r,"prototype",{writable:!1}),r}(),g=(0,a.makeStructureNS)(e,{Name:(0,a.makeObjectPropertySetter)(s.readString),Title:(0,a.makeObjectPropertySetter)(s.readString),Abstract:(0,a.makeObjectPropertySetter)(s.readString),KeywordList:(0,a.makeObjectPropertySetter)(M),OnlineResource:(0,a.makeObjectPropertySetter)(r.readHref),ContactInformation:(0,a.makeObjectPropertySetter)(function(e,t){return(0,a.pushParseAndPop)({},y,e,t)}),Fees:(0,a.makeObjectPropertySetter)(s.readString),AccessConstraints:(0,a.makeObjectPropertySetter)(s.readString),LayerLimit:(0,a.makeObjectPropertySetter)(s.readPositiveInteger),MaxWidth:(0,a.makeObjectPropertySetter)(s.readPositiveInteger),MaxHeight:(0,a.makeObjectPropertySetter)(s.readPositiveInteger)}),y=(0,a.makeStructureNS)(e,{ContactPersonPrimary:(0,a.makeObjectPropertySetter)(function(e,t){return(0,a.pushParseAndPop)({},A,e,t)}),ContactPosition:(0,a.makeObjectPropertySetter)(s.readString),ContactAddress:(0,a.makeObjectPropertySetter)(function(e,t){return(0,a.pushParseAndPop)({},m,e,t)}),ContactVoiceTelephone:(0,a.makeObjectPropertySetter)(s.readString),ContactFacsimileTelephone:(0,a.makeObjectPropertySetter)(s.readString),ContactElectronicMailAddress:(0,a.makeObjectPropertySetter)(s.readString)}),A=(0,a.makeStructureNS)(e,{ContactPerson:(0,a.makeObjectPropertySetter)(s.readString),ContactOrganization:(0,a.makeObjectPropertySetter)(s.readString)}),m=(0,a.makeStructureNS)(e,{AddressType:(0,a.makeObjectPropertySetter)(s.readString),Address:(0,a.makeObjectPropertySetter)(s.readString),City:(0,a.makeObjectPropertySetter)(s.readString),StateOrProvince:(0,a.makeObjectPropertySetter)(s.readString),PostCode:(0,a.makeObjectPropertySetter)(s.readString),Country:(0,a.makeObjectPropertySetter)(s.readString)}),v=(0,a.makeStructureNS)(e,{Format:(0,a.makeArrayPusher)(s.readString)}),b=(0,a.makeStructureNS)(e,{Name:(0,a.makeObjectPropertySetter)(s.readString),Title:(0,a.makeObjectPropertySetter)(s.readString),Abstract:(0,a.makeObjectPropertySetter)(s.readString),KeywordList:(0,a.makeObjectPropertySetter)(M),CRS:(0,a.makeObjectPropertyPusher)(s.readString),EX_GeographicBoundingBox:(0,a.makeObjectPropertySetter)(function(e,t){e=(0,a.pushParseAndPop)({},w,e,t);if(e){var t=e.westBoundLongitude,r=e.southBoundLatitude,n=e.eastBoundLongitude,e=e.northBoundLatitude;if(void 0!==t&&void 0!==r&&void 0!==n&&void 0!==e)return[t,r,n,e]}}),BoundingBox:(0,a.makeObjectPropertyPusher)(function(e,t){var r=[(0,s.readDecimalString)(e.getAttribute("minx")),(0,s.readDecimalString)(e.getAttribute("miny")),(0,s.readDecimalString)(e.getAttribute("maxx")),(0,s.readDecimalString)(e.getAttribute("maxy"))],n=[(0,s.readDecimalString)(e.getAttribute("resx")),(0,s.readDecimalString)(e.getAttribute("resy"))];return{crs:e.getAttribute("CRS"),extent:r,res:n}}),Dimension:(0,a.makeObjectPropertyPusher)(function(e,t){return{name:e.getAttribute("name"),units:e.getAttribute("units"),unitSymbol:e.getAttribute("unitSymbol"),default:e.getAttribute("default"),multipleValues:(0,s.readBooleanString)(e.getAttribute("multipleValues")),nearestValue:(0,s.readBooleanString)(e.getAttribute("nearestValue")),current:(0,s.readBooleanString)(e.getAttribute("current")),values:(0,s.readString)(e)}}),Attribution:(0,a.makeObjectPropertySetter)(function(e,t){return(0,a.pushParseAndPop)({},_,e,t)}),AuthorityURL:(0,a.makeObjectPropertyPusher)(function(e,t){t=k(e,t);if(t)return t.name=e.getAttribute("name"),t}),Identifier:(0,a.makeObjectPropertyPusher)(s.readString),MetadataURL:(0,a.makeObjectPropertyPusher)(function(e,t){t=k(e,t);if(t)return t.type=e.getAttribute("type"),t}),DataURL:(0,a.makeObjectPropertyPusher)(k),FeatureListURL:(0,a.makeObjectPropertyPusher)(k),Style:(0,a.makeObjectPropertyPusher)(function(e,t){return(0,a.pushParseAndPop)({},j,e,t)}),MinScaleDenominator:(0,a.makeObjectPropertySetter)(s.readDecimal),MaxScaleDenominator:(0,a.makeObjectPropertySetter)(s.readDecimal),Layer:(0,a.makeObjectPropertyPusher)(P)}),_=(0,a.makeStructureNS)(e,{Title:(0,a.makeObjectPropertySetter)(s.readString),OnlineResource:(0,a.makeObjectPropertySetter)(r.readHref),LogoURL:(0,a.makeObjectPropertySetter)(T)}),w=(0,a.makeStructureNS)(e,{westBoundLongitude:(0,a.makeObjectPropertySetter)(s.readDecimal),eastBoundLongitude:(0,a.makeObjectPropertySetter)(s.readDecimal),southBoundLatitude:(0,a.makeObjectPropertySetter)(s.readDecimal),northBoundLatitude:(0,a.makeObjectPropertySetter)(s.readDecimal)}),E=(0,a.makeStructureNS)(e,{GetCapabilities:(0,a.makeObjectPropertySetter)(B),GetMap:(0,a.makeObjectPropertySetter)(B),GetFeatureInfo:(0,a.makeObjectPropertySetter)(B)}),C=(0,a.makeStructureNS)(e,{Format:(0,a.makeObjectPropertyPusher)(s.readString),DCPType:(0,a.makeObjectPropertyPusher)(function(e,t){return(0,a.pushParseAndPop)({},I,e,t)})}),I=(0,a.makeStructureNS)(e,{HTTP:(0,a.makeObjectPropertySetter)(function(e,t){return(0,a.pushParseAndPop)({},S,e,t)})}),S=(0,a.makeStructureNS)(e,{Get:(0,a.makeObjectPropertySetter)(k),Post:(0,a.makeObjectPropertySetter)(k)}),j=(0,a.makeStructureNS)(e,{Name:(0,a.makeObjectPropertySetter)(s.readString),Title:(0,a.makeObjectPropertySetter)(s.readString),Abstract:(0,a.makeObjectPropertySetter)(s.readString),LegendURL:(0,a.makeObjectPropertyPusher)(T),StyleSheetURL:(0,a.makeObjectPropertySetter)(k),StyleURL:(0,a.makeObjectPropertySetter)(k)}),x=(0,a.makeStructureNS)(e,{Format:(0,a.makeObjectPropertySetter)(s.readString),OnlineResource:(0,a.makeObjectPropertySetter)(r.readHref)}),O=(0,a.makeStructureNS)(e,{Keyword:(0,a.makeArrayPusher)(s.readString)});function P(e,t){var r=t[t.length-1],n=(0,a.pushParseAndPop)({},b,e,t);if(n)return void 0===(t=(0,s.readBooleanString)(e.getAttribute("queryable")))&&(t=r.queryable),n.queryable=void 0!==t&&t,void 0===(t=(0,s.readNonNegativeIntegerString)(e.getAttribute("cascaded")))&&(t=r.cascaded),n.cascaded=t,void 0===(t=(0,s.readBooleanString)(e.getAttribute("opaque")))&&(t=r.opaque),n.opaque=void 0!==t&&t,void 0===(t=(0,s.readBooleanString)(e.getAttribute("noSubsets")))&&(t=r.noSubsets),n.noSubsets=void 0!==t&&t,t=(t=(0,s.readDecimalString)(e.getAttribute("fixedWidth")))||r.fixedWidth,n.fixedWidth=t,t=(t=(0,s.readDecimalString)(e.getAttribute("fixedHeight")))||r.fixedHeight,n.fixedHeight=t,["Style","CRS","AuthorityURL"].forEach(function(e){var t;e in r&&(t=n[e]||[],n[e]=t.concat(r[e]))}),["EX_GeographicBoundingBox","BoundingBox","Dimension","Attribution","MinScaleDenominator","MaxScaleDenominator"].forEach(function(e){var t;e in n||(t=r[e],n[e]=t)}),n}function k(e,t){return(0,a.pushParseAndPop)({},x,e,t)}function B(e,t){return(0,a.pushParseAndPop)({},C,e,t)}function T(e,t){t=k(e,t);if(t)return e=[(0,s.readNonNegativeIntegerString)(e.getAttribute("width")),(0,s.readNonNegativeIntegerString)(e.getAttribute("height"))],t.size=e,t}function M(e,t){return(0,a.pushParseAndPop)([],O,e,t)}t.default=d},{"../xml.js":418,"./XML.js":170,"./xlink.js":198,"./xsd.js":199}],168:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("./GML2.js")),a=n(e("./XMLFeature.js")),c=e("../array.js"),f=e("../xml.js");function n(e){return e&&e.__esModule?e:{default:e}}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function u(e,t,r){t=h(t);var n=e,t=l()?Reflect.construct(t,r||[],h(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(l=function(){return!!e})()}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}e=function(){function r(e){var t;if(this instanceof r)return e=e||{},(t=u(this,r)).featureNS_="http://mapserver.gis.umn.edu/mapserver",t.gmlFormat_=new o.default,t.layers_=e.layers||null,t;throw new TypeError("Cannot call a class as a function")}var e,t=r,n=a.default;if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&p(t,n),t=r,(n=[{key:"getLayers",value:function(){return this.layers_}},{key:"setLayers",value:function(e){this.layers_=e}},{key:"readFeatures_",value:function(e,t){e.setAttribute("namespaceURI",this.featureNS_);var r=e.localName,n=[];if(0!==e.childNodes.length){if("msGMLOutput"==r)for(var i=0,o=e.childNodes.length;i<o;i++){var a,s,u,l=e.childNodes[i];l.nodeType===Node.ELEMENT_NODE&&(u=t[0],s=(l=l).localName.replace("_layer",""),!this.layers_||this.layers_.includes(s))&&(u.featureType=s=s+"_feature",u.featureNS=this.featureNS_,(a={})[s]=(0,f.makeArrayPusher)(this.gmlFormat_.readFeatureElement,this.gmlFormat_),s=(0,f.makeStructureNS)([u.featureNS,null],a),l.setAttribute("namespaceURI",this.featureNS_),u=(0,f.pushParseAndPop)([],s,l,t,this.gmlFormat_))&&(0,c.extend)(n,u)}"FeatureCollection"==r&&(r=(0,f.pushParseAndPop)([],this.gmlFormat_.FEATURE_COLLECTION_PARSERS,e,[{}],this.gmlFormat_))&&(n=r)}return n}},{key:"readFeaturesFromNode",value:function(e,t){var r={};return t&&Object.assign(r,this.getReadOptions(e,t)),this.readFeatures_(e,[r])}}])&&s(t.prototype,n),e&&s(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();r.default=e},{"../array.js":110,"../xml.js":418,"./GML2.js":149,"./XMLFeature.js":171}],169:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=c(e("./OWS.js")),a=c(e("./XML.js")),n=e("../extent.js"),s=e("../xml.js"),u=e("./xsd.js"),l=e("./xlink.js");function c(e){return e&&e.__esModule?e:{default:e}}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function h(e,t,r){t=d(t);var n=e,t=p()?Reflect.construct(t,r||[],d(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(p=function(){return!!e})()}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){return(g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var e=[null,"http://www.opengis.net/wmts/1.0"],y=[null,"http://www.opengis.net/ows/1.1"],A=(0,s.makeStructureNS)(e,{Contents:(0,s.makeObjectPropertySetter)(function(e,t){return(0,s.pushParseAndPop)({},v,e,t)})}),m=function(){function t(){var e;if(this instanceof t)return(e=h(this,t)).owsParser_=new o.default,e;throw new TypeError("Cannot call a class as a function")}var e,r=t,n=a.default;if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");return r.prototype=Object.create(n&&n.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),n&&g(r,n),r=t,(n=[{key:"readFromNode",value:function(e){var t=(t=e.getAttribute("version"))&&t.trim(),r=this.owsParser_.readFromNode(e);return r&&(r.version=t,(0,s.pushParseAndPop)(r,A,e,[]))||null}}])&&f(r.prototype,n),e&&f(r,e),Object.defineProperty(r,"prototype",{writable:!1}),r}(),v=(0,s.makeStructureNS)(e,{Layer:(0,s.makeObjectPropertyPusher)(function(e,t){return(0,s.pushParseAndPop)({},b,e,t)}),TileMatrixSet:(0,s.makeObjectPropertyPusher)(function(e,t){return(0,s.pushParseAndPop)({},j,e,t)})}),b=(0,s.makeStructureNS)(e,{Style:(0,s.makeObjectPropertyPusher)(function(e,t){t=(0,s.pushParseAndPop)({},_,e,t);if(t)return e="true"===e.getAttribute("isDefault"),t.isDefault=e,t}),Format:(0,s.makeObjectPropertyPusher)(u.readString),TileMatrixSetLink:(0,s.makeObjectPropertyPusher)(function(e,t){return(0,s.pushParseAndPop)({},w,e,t)}),Dimension:(0,s.makeObjectPropertyPusher)(function(e,t){return(0,s.pushParseAndPop)({},I,e,t)}),ResourceURL:(0,s.makeObjectPropertyPusher)(function(e,t){var r=e.getAttribute("format"),n=e.getAttribute("template"),e=e.getAttribute("resourceType"),i={};return r&&(i.format=r),n&&(i.template=n),e&&(i.resourceType=e),i})},(0,s.makeStructureNS)(y,{Title:(0,s.makeObjectPropertySetter)(u.readString),Abstract:(0,s.makeObjectPropertySetter)(u.readString),WGS84BoundingBox:(0,s.makeObjectPropertySetter)(O),BoundingBox:(0,s.makeObjectPropertyPusher)(function(e,t){var r=e.getAttribute("crs"),e=(0,s.pushParseAndPop)([],S,e,t);if(2==e.length)return{extent:(0,n.boundingExtent)(e),crs:r}}),Identifier:(0,s.makeObjectPropertySetter)(u.readString)})),_=(0,s.makeStructureNS)(e,{LegendURL:(0,s.makeObjectPropertyPusher)(function(e,t){var r={};return r.format=e.getAttribute("format"),r.href=(0,l.readHref)(e),r})},(0,s.makeStructureNS)(y,{Title:(0,s.makeObjectPropertySetter)(u.readString),Identifier:(0,s.makeObjectPropertySetter)(u.readString)})),w=(0,s.makeStructureNS)(e,{TileMatrixSet:(0,s.makeObjectPropertySetter)(u.readString),TileMatrixSetLimits:(0,s.makeObjectPropertySetter)(function(e,t){return(0,s.pushParseAndPop)([],E,e,t)})}),E=(0,s.makeStructureNS)(e,{TileMatrixLimits:(0,s.makeArrayPusher)(function(e,t){return(0,s.pushParseAndPop)({},C,e,t)})}),C=(0,s.makeStructureNS)(e,{TileMatrix:(0,s.makeObjectPropertySetter)(u.readString),MinTileRow:(0,s.makeObjectPropertySetter)(u.readPositiveInteger),MaxTileRow:(0,s.makeObjectPropertySetter)(u.readPositiveInteger),MinTileCol:(0,s.makeObjectPropertySetter)(u.readPositiveInteger),MaxTileCol:(0,s.makeObjectPropertySetter)(u.readPositiveInteger)}),I=(0,s.makeStructureNS)(e,{Default:(0,s.makeObjectPropertySetter)(u.readString),Value:(0,s.makeObjectPropertyPusher)(u.readString)},(0,s.makeStructureNS)(y,{Identifier:(0,s.makeObjectPropertySetter)(u.readString)})),S=(0,s.makeStructureNS)(y,{LowerCorner:(0,s.makeArrayPusher)(P),UpperCorner:(0,s.makeArrayPusher)(P)}),j=(0,s.makeStructureNS)(e,{WellKnownScaleSet:(0,s.makeObjectPropertySetter)(u.readString),TileMatrix:(0,s.makeObjectPropertyPusher)(function(e,t){return(0,s.pushParseAndPop)({},x,e,t)})},(0,s.makeStructureNS)(y,{SupportedCRS:(0,s.makeObjectPropertySetter)(u.readString),Identifier:(0,s.makeObjectPropertySetter)(u.readString),BoundingBox:(0,s.makeObjectPropertySetter)(O)})),x=(0,s.makeStructureNS)(e,{TopLeftCorner:(0,s.makeObjectPropertySetter)(P),ScaleDenominator:(0,s.makeObjectPropertySetter)(u.readDecimal),TileWidth:(0,s.makeObjectPropertySetter)(u.readPositiveInteger),TileHeight:(0,s.makeObjectPropertySetter)(u.readPositiveInteger),MatrixWidth:(0,s.makeObjectPropertySetter)(u.readPositiveInteger),MatrixHeight:(0,s.makeObjectPropertySetter)(u.readPositiveInteger)},(0,s.makeStructureNS)(y,{Identifier:(0,s.makeObjectPropertySetter)(u.readString)}));function O(e,t){e=(0,s.pushParseAndPop)([],S,e,t);if(2==e.length)return(0,n.boundingExtent)(e)}function P(e,t){e=(0,u.readString)(e).split(/\s+/);if(e&&2==e.length){var r=+e[0],e=+e[1];if(!isNaN(r)&&!isNaN(e))return[r,e]}}r.default=m},{"../extent.js":142,"../xml.js":418,"./OWS.js":160,"./XML.js":170,"./xlink.js":198,"./xsd.js":199}],170:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("../util.js"),i=e("../xml.js");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=o(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==o(e)?e:e+""}(n.key),n)}}e=function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function")},(u=[{key:"read",value:function(e){var t;return e?"string"==typeof e?(t=(0,i.parse)(e),this.readFromDocument(t)):(0,i.isDocument)(e)?this.readFromDocument(e):this.readFromNode(e):null}},{key:"readFromDocument",value:function(e){for(var t=e.firstChild;t;t=t.nextSibling)if(t.nodeType==Node.ELEMENT_NODE)return this.readFromNode(t);return null}},{key:"readFromNode",value:function(e){(0,n.abstract)()}}])&&a(e.prototype,u),s&&a(e,s),Object.defineProperty(e,"prototype",{writable:!1});var s,u=e;r.default=u},{"../util.js":404,"../xml.js":418}],171:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=(n=e("../format/Feature.js"))&&n.__esModule?n:{default:n},a=e("../util.js"),s=e("../array.js"),u=e("../xml.js");function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function c(e,t,r){t=h(t);var n=e,t=f()?Reflect.construct(t,r||[],h(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(f=function(){return!!e})()}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var n=function(){function t(){var e;if(this instanceof t)return(e=c(this,t)).xmlSerializer_=(0,u.getXMLSerializer)(),e;throw new TypeError("Cannot call a class as a function")}var e,r=t,n=o.default;if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");return r.prototype=Object.create(n&&n.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),n&&p(r,n),r=t,(n=[{key:"getType",value:function(){return"xml"}},{key:"readFeature",value:function(e,t){var r;return e?"string"==typeof e?(r=(0,u.parse)(e),this.readFeatureFromDocument(r,t)):(0,u.isDocument)(e)?this.readFeatureFromDocument(e,t):this.readFeatureFromNode(e,t):null}},{key:"readFeatureFromDocument",value:function(e,t){e=this.readFeaturesFromDocument(e,t);return 0<e.length?e[0]:null}},{key:"readFeatureFromNode",value:function(e,t){return null}},{key:"readFeatures",value:function(e,t){var r;return e?"string"==typeof e?(r=(0,u.parse)(e),this.readFeaturesFromDocument(r,t)):(0,u.isDocument)(e)?this.readFeaturesFromDocument(e,t):this.readFeaturesFromNode(e,t):[]}},{key:"readFeaturesFromDocument",value:function(e,t){for(var r=[],n=e.firstChild;n;n=n.nextSibling)n.nodeType==Node.ELEMENT_NODE&&(0,s.extend)(r,this.readFeaturesFromNode(n,t));return r}},{key:"readFeaturesFromNode",value:function(e,t){return(0,a.abstract)()}},{key:"readGeometry",value:function(e,t){var r;return e?"string"==typeof e?(r=(0,u.parse)(e),this.readGeometryFromDocument(r,t)):(0,u.isDocument)(e)?this.readGeometryFromDocument(e,t):this.readGeometryFromNode(e,t):null}},{key:"readGeometryFromDocument",value:function(e,t){return null}},{key:"readGeometryFromNode",value:function(e,t){return null}},{key:"readProjection",value:function(e){var t;return e?"string"==typeof e?(t=(0,u.parse)(e),this.readProjectionFromDocument(t)):(0,u.isDocument)(e)?this.readProjectionFromDocument(e):this.readProjectionFromNode(e):null}},{key:"readProjectionFromDocument",value:function(e){return this.dataProjection}},{key:"readProjectionFromNode",value:function(e){return this.dataProjection}},{key:"writeFeature",value:function(e,t){e=this.writeFeatureNode(e,t);return this.xmlSerializer_.serializeToString(e)}},{key:"writeFeatureNode",value:function(e,t){return null}},{key:"writeFeatures",value:function(e,t){e=this.writeFeaturesNode(e,t);return this.xmlSerializer_.serializeToString(e)}},{key:"writeFeaturesNode",value:function(e,t){return null}},{key:"writeGeometry",value:function(e,t){e=this.writeGeometryNode(e,t);return this.xmlSerializer_.serializeToString(e)}},{key:"writeGeometryNode",value:function(e,t){return null}}])&&l(r.prototype,n),e&&l(r,e),Object.defineProperty(r,"prototype",{writable:!1}),r}();r.default=n},{"../array.js":110,"../format/Feature.js":147,"../util.js":404,"../xml.js":418}],172:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.and=function(e){var t=[null].concat(Array.prototype.slice.call(arguments));return new(Function.prototype.bind.apply(n.default,t))},r.bbox=function(e,t,r){return new i.default(e,t,r)},r.between=function(e,t,r){return new p.default(e,t,r)},r.contains=function(e,t,r){return new o.default(e,t,r)},r.disjoint=function(e,t,r){return new s.default(e,t,r)},r.during=function(e,t,r){return new u.default(e,t,r)},r.dwithin=function(e,t,r,n,i){return new a.default(e,t,r,n,i)},r.equalTo=function(e,t,r){return new l.default(e,t,r)},r.greaterThan=function(e,t){return new c.default(e,t)},r.greaterThanOrEqualTo=function(e,t){return new f.default(e,t)},r.intersects=function(e,t,r){return new h.default(e,t,r)},r.isNull=function(e){return new g.default(e)},r.lessThan=function(e,t){return new y.default(e,t)},r.lessThanOrEqualTo=function(e,t){return new A.default(e,t)},r.like=function(e,t,r,n,i,o){return new d.default(e,t,r,n,i,o)},r.not=function(e){return new m.default(e)},r.notEqualTo=function(e,t,r){return new v.default(e,t,r)},r.or=function(e){var t=[null].concat(Array.prototype.slice.call(arguments));return new(Function.prototype.bind.apply(b.default,t))},r.resourceId=function(e){return new _.default(e)},r.within=function(e,t,r){return new w.default(e,t,r)};var n=E(e("./filter/And.js")),i=E(e("./filter/Bbox.js")),o=E(e("./filter/Contains.js")),a=E(e("./filter/DWithin.js")),s=E(e("./filter/Disjoint.js")),u=E(e("./filter/During.js")),l=E(e("./filter/EqualTo.js")),c=E(e("./filter/GreaterThan.js")),f=E(e("./filter/GreaterThanOrEqualTo.js")),h=E(e("./filter/Intersects.js")),p=E(e("./filter/IsBetween.js")),d=E(e("./filter/IsLike.js")),g=E(e("./filter/IsNull.js")),y=E(e("./filter/LessThan.js")),A=E(e("./filter/LessThanOrEqualTo.js")),m=E(e("./filter/Not.js")),v=E(e("./filter/NotEqualTo.js")),b=E(e("./filter/Or.js")),_=E(e("./filter/ResourceId.js")),w=E(e("./filter/Within.js"));function E(e){return e&&e.__esModule?e:{default:e}}},{"./filter/And.js":173,"./filter/Bbox.js":174,"./filter/Contains.js":177,"./filter/DWithin.js":178,"./filter/Disjoint.js":179,"./filter/During.js":180,"./filter/EqualTo.js":181,"./filter/GreaterThan.js":183,"./filter/GreaterThanOrEqualTo.js":184,"./filter/Intersects.js":185,"./filter/IsBetween.js":186,"./filter/IsLike.js":187,"./filter/IsNull.js":188,"./filter/LessThan.js":189,"./filter/LessThanOrEqualTo.js":190,"./filter/Not.js":192,"./filter/NotEqualTo.js":193,"./filter/Or.js":194,"./filter/ResourceId.js":195,"./filter/Within.js":197}],173:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=(e=e("./LogicalNary.js"))&&e.__esModule?e:{default:e};function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function s(e,t,r){t=l(t);var n=e,t=u()?Reflect.construct(t,r||[],l(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(u=function(){return!!e})()}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}e=function(){function n(e){var t=this,r=n;if(t instanceof r)return s(this,n,["And",Array.prototype.slice.call(arguments)]);throw new TypeError("Cannot call a class as a function")}var e,t,r=n,i=o.default;if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function");return r.prototype=Object.create(i&&i.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),i&&c(r,i),r=n,e&&a(r.prototype,e),t&&a(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}();r.default=e},{"./LogicalNary.js":191}],174:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=(e=e("./Filter.js"))&&e.__esModule?e:{default:e};function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function s(e,t,r){t=l(t);var n=e,t=u()?Reflect.construct(t,r||[],l(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(u=function(){return!!e})()}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}e=function(){function i(e,t,r){var n;if(!(this instanceof i))throw new TypeError("Cannot call a class as a function");if((n=s(this,i,["BBOX"])).geometryName=e,4!==(n.extent=t).length)throw new Error("Expected an extent with four values ([minX, minY, maxX, maxY])");return n.srsName=r,n}var e,t,r=i,n=o.default;if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");return r.prototype=Object.create(n&&n.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),n&&c(r,n),r=i,e&&a(r.prototype,e),t&&a(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}();r.default=e},{"./Filter.js":182}],175:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=(e=e("./Filter.js"))&&e.__esModule?e:{default:e};function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function s(e,t,r){t=l(t);var n=e,t=u()?Reflect.construct(t,r||[],l(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(u=function(){return!!e})()}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}e=function(){function r(e,t){if(this instanceof r)return(e=s(this,r,[e])).propertyName=t,e;throw new TypeError("Cannot call a class as a function")}var e,t,n=r,i=o.default;if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function");return n.prototype=Object.create(i&&i.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),i&&c(n,i),n=r,e&&a(n.prototype,e),t&&a(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}();r.default=e},{"./Filter.js":182}],176:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=(e=e("./Comparison.js"))&&e.__esModule?e:{default:e};function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function s(e,t,r){t=l(t);var n=e,t=u()?Reflect.construct(t,r||[],l(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(u=function(){return!!e})()}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}e=function(){function i(e,t,r,n){if(this instanceof i)return(e=s(this,i,[e,t])).expression=r,e.matchCase=n,e;throw new TypeError("Cannot call a class as a function")}var e,t,r=i,n=o.default;if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");return r.prototype=Object.create(n&&n.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),n&&c(r,n),r=i,e&&a(r.prototype,e),t&&a(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}();r.default=e},{"./Comparison.js":175}],177:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=(e=e("./Spatial.js"))&&e.__esModule?e:{default:e};function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function s(e,t,r){t=l(t);var n=e,t=u()?Reflect.construct(t,r||[],l(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(u=function(){return!!e})()}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}e=function(){function n(e,t,r){if(this instanceof n)return s(this,n,["Contains",e,t,r]);throw new TypeError("Cannot call a class as a function")}var e,t,r=n,i=o.default;if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function");return r.prototype=Object.create(i&&i.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),i&&c(r,i),r=n,e&&a(r.prototype,e),t&&a(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}();r.default=e},{"./Spatial.js":196}],178:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=(e=e("./Spatial.js"))&&e.__esModule?e:{default:e};function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function u(e,t,r){t=l(t);var n=e,t=o()?Reflect.construct(t,r||[],l(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function o(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(o=function(){return!!e})()}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}e=function(){function o(e,t,r,n,i){if(this instanceof o)return(e=u(this,o,["DWithin",e,t,i])).distance=r,e.unit=n,e;throw new TypeError("Cannot call a class as a function")}var e,t,r=o,n=a.default;if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");return r.prototype=Object.create(n&&n.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),n&&c(r,n),r=o,e&&s(r.prototype,e),t&&s(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}();r.default=e},{"./Spatial.js":196}],179:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=(e=e("./Spatial.js"))&&e.__esModule?e:{default:e};function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function s(e,t,r){t=l(t);var n=e,t=u()?Reflect.construct(t,r||[],l(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(u=function(){return!!e})()}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}e=function(){function n(e,t,r){if(this instanceof n)return s(this,n,["Disjoint",e,t,r]);throw new TypeError("Cannot call a class as a function")}var e,t,r=n,i=o.default;if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function");return r.prototype=Object.create(i&&i.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),i&&c(r,i),r=n,e&&a(r.prototype,e),t&&a(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}();r.default=e},{"./Spatial.js":196}],180:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=(e=e("./Comparison.js"))&&e.__esModule?e:{default:e};function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function s(e,t,r){t=l(t);var n=e,t=u()?Reflect.construct(t,r||[],l(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(u=function(){return!!e})()}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}e=function(){function n(e,t,r){if(this instanceof n)return(e=s(this,n,["During",e])).begin=t,e.end=r,e;throw new TypeError("Cannot call a class as a function")}var e,t,r=n,i=o.default;if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function");return r.prototype=Object.create(i&&i.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),i&&c(r,i),r=n,e&&a(r.prototype,e),t&&a(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}();r.default=e},{"./Comparison.js":175}],181:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=(e=e("./ComparisonBinary.js"))&&e.__esModule?e:{default:e};function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function s(e,t,r){t=l(t);var n=e,t=u()?Reflect.construct(t,r||[],l(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(u=function(){return!!e})()}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}e=function(){function n(e,t,r){if(this instanceof n)return s(this,n,["PropertyIsEqualTo",e,t,r]);throw new TypeError("Cannot call a class as a function")}var e,t,r=n,i=o.default;if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function");return r.prototype=Object.create(i&&i.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),i&&c(r,i),r=n,e&&a(r.prototype,e),t&&a(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}();r.default=e},{"./ComparisonBinary.js":176}],182:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;o=function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.tagName_=t},(s=[{key:"getTagName",value:function(){return this.tagName_}}])&&n(o.prototype,s),a&&n(o,a),Object.defineProperty(o,"prototype",{writable:!1});var o,a,s=o;r.default=s},{}],183:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=(e=e("./ComparisonBinary.js"))&&e.__esModule?e:{default:e};function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function s(e,t,r){t=l(t);var n=e,t=u()?Reflect.construct(t,r||[],l(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(u=function(){return!!e})()}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}e=function(){function r(e,t){if(this instanceof r)return s(this,r,["PropertyIsGreaterThan",e,t]);throw new TypeError("Cannot call a class as a function")}var e,t,n=r,i=o.default;if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function");return n.prototype=Object.create(i&&i.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),i&&c(n,i),n=r,e&&a(n.prototype,e),t&&a(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}();r.default=e},{"./ComparisonBinary.js":176}],184:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=(e=e("./ComparisonBinary.js"))&&e.__esModule?e:{default:e};function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function s(e,t,r){t=l(t);var n=e,t=u()?Reflect.construct(t,r||[],l(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(u=function(){return!!e})()}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}e=function(){function r(e,t){if(this instanceof r)return s(this,r,["PropertyIsGreaterThanOrEqualTo",e,t]);throw new TypeError("Cannot call a class as a function")}var e,t,n=r,i=o.default;if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function");return n.prototype=Object.create(i&&i.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),i&&c(n,i),n=r,e&&a(n.prototype,e),t&&a(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}();r.default=e},{"./ComparisonBinary.js":176}],185:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=(e=e("./Spatial.js"))&&e.__esModule?e:{default:e};function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function s(e,t,r){t=l(t);var n=e,t=u()?Reflect.construct(t,r||[],l(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(u=function(){return!!e})()}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}e=function(){function n(e,t,r){if(this instanceof n)return s(this,n,["Intersects",e,t,r]);throw new TypeError("Cannot call a class as a function")}var e,t,r=n,i=o.default;if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function");return r.prototype=Object.create(i&&i.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),i&&c(r,i),r=n,e&&a(r.prototype,e),t&&a(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}();r.default=e},{"./Spatial.js":196}],186:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=(e=e("./Comparison.js"))&&e.__esModule?e:{default:e};function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function s(e,t,r){t=l(t);var n=e,t=u()?Reflect.construct(t,r||[],l(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(u=function(){return!!e})()}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}e=function(){function n(e,t,r){if(this instanceof n)return(e=s(this,n,["PropertyIsBetween",e])).lowerBoundary=t,e.upperBoundary=r,e;throw new TypeError("Cannot call a class as a function")}var e,t,r=n,i=o.default;if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function");return r.prototype=Object.create(i&&i.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),i&&c(r,i),r=n,e&&a(r.prototype,e),t&&a(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}();r.default=e},{"./Comparison.js":175}],187:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=(e=e("./Comparison.js"))&&e.__esModule?e:{default:e};function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function u(e,t,r){t=l(t);var n=e,t=a()?Reflect.construct(t,r||[],l(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function a(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(a=function(){return!!e})()}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}e=function(){function a(e,t,r,n,i,o){if(this instanceof a)return(e=u(this,a,["PropertyIsLike",e])).pattern=t,e.wildCard=void 0!==r?r:"*",e.singleChar=void 0!==n?n:".",e.escapeChar=void 0!==i?i:"!",e.matchCase=o,e;throw new TypeError("Cannot call a class as a function")}var e,t,r=a,n=o.default;if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");return r.prototype=Object.create(n&&n.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),n&&c(r,n),r=a,e&&s(r.prototype,e),t&&s(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}();r.default=e},{"./Comparison.js":175}],188:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=(e=e("./Comparison.js"))&&e.__esModule?e:{default:e};function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function s(e,t,r){t=l(t);var n=e,t=u()?Reflect.construct(t,r||[],l(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(u=function(){return!!e})()}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}e=function(){function t(e){if(this instanceof t)return s(this,t,["PropertyIsNull",e]);throw new TypeError("Cannot call a class as a function")}var e,r,n=t,i=o.default;if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function");return n.prototype=Object.create(i&&i.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),i&&c(n,i),n=t,e&&a(n.prototype,e),r&&a(n,r),Object.defineProperty(n,"prototype",{writable:!1}),n}();r.default=e},{"./Comparison.js":175}],189:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=(e=e("./ComparisonBinary.js"))&&e.__esModule?e:{default:e};function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function s(e,t,r){t=l(t);var n=e,t=u()?Reflect.construct(t,r||[],l(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(u=function(){return!!e})()}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}e=function(){function r(e,t){if(this instanceof r)return s(this,r,["PropertyIsLessThan",e,t]);throw new TypeError("Cannot call a class as a function")}var e,t,n=r,i=o.default;if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function");return n.prototype=Object.create(i&&i.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),i&&c(n,i),n=r,e&&a(n.prototype,e),t&&a(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}();r.default=e},{"./ComparisonBinary.js":176}],190:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=(e=e("./ComparisonBinary.js"))&&e.__esModule?e:{default:e};function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function s(e,t,r){t=l(t);var n=e,t=u()?Reflect.construct(t,r||[],l(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(u=function(){return!!e})()}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}e=function(){function r(e,t){if(this instanceof r)return s(this,r,["PropertyIsLessThanOrEqualTo",e,t]);throw new TypeError("Cannot call a class as a function")}var e,t,n=r,i=o.default;if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function");return n.prototype=Object.create(i&&i.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),i&&c(n,i),n=r,e&&a(n.prototype,e),t&&a(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}();r.default=e},{"./ComparisonBinary.js":176}],191:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=(n=e("./Filter.js"))&&n.__esModule?n:{default:n},a=e("../../asserts.js");function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function u(e,t,r){t=c(t);var n=e,t=l()?Reflect.construct(t,r||[],c(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(l=function(){return!!e})()}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var n=function(){function r(e,t){if(this instanceof r)return(e=u(this,r,[e])).conditions=t,(0,a.assert)(2<=e.conditions.length,"At least 2 conditions are required"),e;throw new TypeError("Cannot call a class as a function")}var e,t,n=r,i=o.default;if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function");return n.prototype=Object.create(i&&i.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),i&&f(n,i),n=r,e&&s(n.prototype,e),t&&s(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}();r.default=n},{"../../asserts.js":111,"./Filter.js":182}],192:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=(e=e("./Filter.js"))&&e.__esModule?e:{default:e};function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function s(e,t,r){t=l(t);var n=e,t=u()?Reflect.construct(t,r||[],l(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(u=function(){return!!e})()}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}e=function(){function r(e){var t;if(this instanceof r)return(t=s(this,r,["Not"])).condition=e,t;throw new TypeError("Cannot call a class as a function")}var e,t,n=r,i=o.default;if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function");return n.prototype=Object.create(i&&i.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),i&&c(n,i),n=r,e&&a(n.prototype,e),t&&a(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}();r.default=e},{"./Filter.js":182}],193:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=(e=e("./ComparisonBinary.js"))&&e.__esModule?e:{default:e};function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function s(e,t,r){t=l(t);var n=e,t=u()?Reflect.construct(t,r||[],l(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(u=function(){return!!e})()}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}e=function(){function n(e,t,r){if(this instanceof n)return s(this,n,["PropertyIsNotEqualTo",e,t,r]);throw new TypeError("Cannot call a class as a function")}var e,t,r=n,i=o.default;if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function");return r.prototype=Object.create(i&&i.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),i&&c(r,i),r=n,e&&a(r.prototype,e),t&&a(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}();r.default=e},{"./ComparisonBinary.js":176}],194:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=(e=e("./LogicalNary.js"))&&e.__esModule?e:{default:e};function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function s(e,t,r){t=l(t);var n=e,t=u()?Reflect.construct(t,r||[],l(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(u=function(){return!!e})()}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}e=function(){function n(e){var t=this,r=n;if(t instanceof r)return s(this,n,["Or",Array.prototype.slice.call(arguments)]);throw new TypeError("Cannot call a class as a function")}var e,t,r=n,i=o.default;if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function");return r.prototype=Object.create(i&&i.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),i&&c(r,i),r=n,e&&a(r.prototype,e),t&&a(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}();r.default=e},{"./LogicalNary.js":191}],195:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=(e=e("./Filter.js"))&&e.__esModule?e:{default:e};function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function s(e,t,r){t=l(t);var n=e,t=u()?Reflect.construct(t,r||[],l(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(u=function(){return!!e})()}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}e=function(){function r(e){var t;if(this instanceof r)return(t=s(this,r,["ResourceId"])).rid=e,t;throw new TypeError("Cannot call a class as a function")}var e,t,n=r,i=o.default;if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function");return n.prototype=Object.create(i&&i.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),i&&c(n,i),n=r,e&&a(n.prototype,e),t&&a(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}();r.default=e},{"./Filter.js":182}],196:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=(e=e("./Filter.js"))&&e.__esModule?e:{default:e};function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function s(e,t,r){t=l(t);var n=e,t=u()?Reflect.construct(t,r||[],l(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(u=function(){return!!e})()}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}e=function(){function i(e,t,r,n){if(this instanceof i)return(e=s(this,i,[e])).geometryName=t||"the_geom",e.geometry=r,e.srsName=n,e;throw new TypeError("Cannot call a class as a function")}var e,t,r=i,n=o.default;if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");return r.prototype=Object.create(n&&n.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),n&&c(r,n),r=i,e&&a(r.prototype,e),t&&a(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}();r.default=e},{"./Filter.js":182}],197:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=(e=e("./Spatial.js"))&&e.__esModule?e:{default:e};function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function s(e,t,r){t=l(t);var n=e,t=u()?Reflect.construct(t,r||[],l(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(u=function(){return!!e})()}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}e=function(){function n(e,t,r){if(this instanceof n)return s(this,n,["Within",e,t,r]);throw new TypeError("Cannot call a class as a function")}var e,t,r=n,i=o.default;if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function");return r.prototype=Object.create(i&&i.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),i&&c(r,i),r=n,e&&a(r.prototype,e),t&&a(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}();r.default=e},{"./Spatial.js":196}],198:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.readHref=function(e){return e.getAttributeNS(n,"href")};var n="http://www.w3.org/1999/xlink"},{}],199:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.readBoolean=function(e){return o((0,n.getAllTextContent)(e,!1))},r.readBooleanString=o,r.readDateTime=function(e){e=(0,n.getAllTextContent)(e,!1),e=Date.parse(e);return isNaN(e)?void 0:e/1e3},r.readDecimal=function(e){return a((0,n.getAllTextContent)(e,!1))},r.readDecimalString=a,r.readNonNegativeIntegerString=s,r.readPositiveInteger=function(e){return s((0,n.getAllTextContent)(e,!1))},r.readString=function(e){return(0,n.getAllTextContent)(e,!1).trim()},r.writeBooleanTextNode=function(e,t){u(e,t?"1":"0")},r.writeCDATASection=function(e,t){e.appendChild((0,n.getDocument)().createCDATASection(t))},r.writeDateTimeTextNode=function(e,t){t=new Date(1e3*t),t=t.getUTCFullYear()+"-"+(0,i.padNumber)(t.getUTCMonth()+1,2)+"-"+(0,i.padNumber)(t.getUTCDate(),2)+"T"+(0,i.padNumber)(t.getUTCHours(),2)+":"+(0,i.padNumber)(t.getUTCMinutes(),2)+":"+(0,i.padNumber)(t.getUTCSeconds(),2)+"Z";e.appendChild((0,n.getDocument)().createTextNode(t))},r.writeDecimalTextNode=function(e,t){t=t.toPrecision();e.appendChild((0,n.getDocument)().createTextNode(t))},r.writeNonNegativeIntegerTextNode=function(e,t){t=t.toString();e.appendChild((0,n.getDocument)().createTextNode(t))},r.writeStringTextNode=u;var n=e("../xml.js"),i=e("../string.js");function o(e){e=/^\s*(true|1)|(false|0)\s*$/.exec(e);if(e)return void 0!==e[1]||!1}function a(e){e=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(e);if(e)return parseFloat(e[1])}function s(e){e=/^\s*(\d+)\s*$/.exec(e);if(e)return parseInt(e[1],10)}function u(e,t){e.appendChild((0,n.getDocument)().createTextNode(t))}},{"../string.js":380,"../xml.js":418}],200:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.FALSE=function(){return!1},r.TRUE=function(){return!0},r.VOID=function(){},r.memoizeOne=function(t){var r,n,i,o=!1;return function(){var e=Array.prototype.slice.call(arguments);return o&&this===i&&(0,a.equals)(e,n)||(o=!0,i=this,n=e,r=t.apply(this,arguments)),r}},r.toPromise=function(e){var t;try{t=e()}catch(e){return Promise.reject(e)}return t instanceof Promise?t:Promise.resolve(t)};var a=e("./array.js")},{"./array.js":110}],201:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"Circle",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(r,"Geometry",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(r,"GeometryCollection",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(r,"LineString",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(r,"LinearRing",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(r,"MultiLineString",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(r,"MultiPoint",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(r,"MultiPolygon",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(r,"Point",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(r,"Polygon",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(r,"SimpleGeometry",{enumerable:!0,get:function(){return p.default}});var n=d(e("./geom/Circle.js")),i=d(e("./geom/Geometry.js")),o=d(e("./geom/GeometryCollection.js")),a=d(e("./geom/LinearRing.js")),s=d(e("./geom/LineString.js")),u=d(e("./geom/MultiLineString.js")),l=d(e("./geom/MultiPoint.js")),c=d(e("./geom/MultiPolygon.js")),f=d(e("./geom/Point.js")),h=d(e("./geom/Polygon.js")),p=d(e("./geom/SimpleGeometry.js"));function d(e){return e&&e.__esModule?e:{default:e}}},{"./geom/Circle.js":202,"./geom/Geometry.js":203,"./geom/GeometryCollection.js":204,"./geom/LineString.js":205,"./geom/LinearRing.js":206,"./geom/MultiLineString.js":207,"./geom/MultiPoint.js":208,"./geom/MultiPolygon.js":209,"./geom/Point.js":210,"./geom/Polygon.js":211,"./geom/SimpleGeometry.js":212}],202:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=(p=e("./SimpleGeometry.js"))&&p.__esModule?p:{default:p},o=e("../extent.js"),s=e("./flat/deflate.js"),a=e("./flat/transform.js");function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function l(e,t,r){t=f(t);var n=e,t=c()?Reflect.construct(t,r||[],f(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(c=function(){return!!e})()}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var p=function(){function i(e,t,r){var n;if(this instanceof i)return n=l(this,i),void 0!==r&&void 0===t?n.setFlatCoordinates(r,e):n.setCenterAndRadius(e,t=t||0,r),n;throw new TypeError("Cannot call a class as a function")}var e,t=i,r=n.default;if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&h(t,r),t=i,(r=[{key:"clone",value:function(){var e=new i(this.flatCoordinates.slice(),void 0,this.layout);return e.applyProperties(this),e}},{key:"closestPointXY",value:function(e,t,r,n){var i=this.flatCoordinates,e=e-i[0],t=t-i[1],o=e*e+t*t;if(o<n){if(0==o)for(var a=0;a<this.stride;++a)r[a]=i[a];else{var s=this.getRadius()/Math.sqrt(o);r[0]=i[0]+s*e,r[1]=i[1]+s*t;for(var u=2;u<this.stride;++u)r[u]=i[u]}return r.length=this.stride,o}return n}},{key:"containsXY",value:function(e,t){var r=this.flatCoordinates,e=e-r[0],t=t-r[1];return e*e+t*t<=this.getRadiusSquared_()}},{key:"getCenter",value:function(){return this.flatCoordinates.slice(0,this.stride)}},{key:"computeExtent",value:function(e){var t=this.flatCoordinates,r=t[this.stride]-t[0];return(0,o.createOrUpdate)(t[0]-r,t[1]-r,t[0]+r,t[1]+r,e)}},{key:"getRadius",value:function(){return Math.sqrt(this.getRadiusSquared_())}},{key:"getRadiusSquared_",value:function(){var e=this.flatCoordinates[this.stride]-this.flatCoordinates[0],t=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return e*e+t*t}},{key:"getType",value:function(){return"Circle"}},{key:"intersectsExtent",value:function(e){var t=this.getExtent();return!!(0,o.intersects)(e,t)&&(t=this.getCenter(),e[0]<=t[0]&&e[2]>=t[0]||e[1]<=t[1]&&e[3]>=t[1]||(0,o.forEachCorner)(e,this.intersectsCoordinate.bind(this)))}},{key:"setCenter",value:function(e){var t=this.stride,r=this.flatCoordinates[t]-this.flatCoordinates[0],n=e.slice();n[t]=n[0]+r;for(var i=1;i<t;++i)n[t+i]=e[i];this.setFlatCoordinates(this.layout,n),this.changed()}},{key:"setCenterAndRadius",value:function(e,t,r){this.setLayout(r,e,0),this.flatCoordinates||(this.flatCoordinates=[]);var n=this.flatCoordinates,i=(0,s.deflateCoordinate)(n,0,e,this.stride);n[i++]=n[0]+t;for(var o=1,a=this.stride;o<a;++o)n[i++]=n[o];n.length=i,this.changed()}},{key:"getCoordinates",value:function(){return null}},{key:"setCoordinates",value:function(e,t){}},{key:"setRadius",value:function(e){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+e,this.changed()}},{key:"rotate",value:function(e,t){var r=this.getCenter(),n=this.getStride();this.setCenter((0,a.rotate)(r,0,r.length,n,e,t,r)),this.changed()}}])&&u(t.prototype,r),e&&u(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();p.prototype.transform,r.default=p},{"../extent.js":142,"./SimpleGeometry.js":212,"./flat/deflate.js":217,"./flat/transform.js":232}],203:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=(n=e("../Object.js"))&&n.__esModule?n:{default:n},a=e("../util.js"),s=e("../transform.js"),u=e("../extent.js"),l=e("../proj.js"),c=e("../functions.js"),f=e("./flat/transform.js");function h(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function p(e,t,r){t=g(t);var n=e,t=d()?Reflect.construct(t,r||[],g(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(d=function(){return!!e})()}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t){return(y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var A=(0,s.create)(),n=function(){function e(){var i;if(this instanceof e)return(i=p(this,e)).extent_=(0,u.createEmpty)(),i.extentRevision_=-1,i.simplifiedGeometryMaxMinSquaredTolerance=0,i.simplifiedGeometryRevision=0,i.simplifyTransformedInternal=(0,c.memoizeOne)(function(e,t,r){var n;return(r?((n=i.clone()).applyTransform(r),n):i).getSimplifiedGeometry(t)}),i;throw new TypeError("Cannot call a class as a function")}var t,r=e,n=o.default;if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");return r.prototype=Object.create(n&&n.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),n&&y(r,n),r=e,(n=[{key:"simplifyTransformed",value:function(e,t){return this.simplifyTransformedInternal(this.getRevision(),e,t)}},{key:"clone",value:function(){return(0,a.abstract)()}},{key:"closestPointXY",value:function(e,t,r,n){return(0,a.abstract)()}},{key:"containsXY",value:function(e,t){var r=this.getClosestPoint([e,t]);return r[0]===e&&r[1]===t}},{key:"getClosestPoint",value:function(e,t){return this.closestPointXY(e[0],e[1],t=t||[NaN,NaN],1/0),t}},{key:"intersectsCoordinate",value:function(e){return this.containsXY(e[0],e[1])}},{key:"computeExtent",value:function(e){return(0,a.abstract)()}},{key:"getExtent",value:function(e){var t;return this.extentRevision_!=this.getRevision()&&(t=this.computeExtent(this.extent_),(isNaN(t[0])||isNaN(t[1]))&&(0,u.createOrUpdateEmpty)(t),this.extentRevision_=this.getRevision()),(0,u.returnOrUpdate)(this.extent_,e)}},{key:"rotate",value:function(e,t){(0,a.abstract)()}},{key:"scale",value:function(e,t,r){(0,a.abstract)()}},{key:"simplify",value:function(e){return this.getSimplifiedGeometry(e*e)}},{key:"getSimplifiedGeometry",value:function(e){return(0,a.abstract)()}},{key:"getType",value:function(){return(0,a.abstract)()}},{key:"applyTransform",value:function(e){(0,a.abstract)()}},{key:"intersectsExtent",value:function(e){return(0,a.abstract)()}},{key:"translate",value:function(e,t){(0,a.abstract)()}},{key:"transform",value:function(e,o){var a=(0,l.get)(e),e="tile-pixels"==a.getUnits()?function(e,t,r){var n=a.getExtent(),i=a.getWorldExtent(),n=(0,u.getHeight)(i)/(0,u.getHeight)(n);return(0,s.compose)(A,i[0],i[3],n,-n,0,0,0),(0,f.transform2D)(e,0,e.length,r,A,t),(0,l.getTransform)(a,o)(e,t,r)}:(0,l.getTransform)(a,o);return this.applyTransform(e),this}}])&&h(r.prototype,n),t&&h(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}();r.default=n},{"../Object.js":96,"../extent.js":142,"../functions.js":200,"../proj.js":283,"../transform.js":402,"../util.js":404,"./flat/transform.js":232}],204:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=u(e("../events/EventType.js")),o=u(e("./Geometry.js")),s=e("../extent.js"),a=e("../events.js");function u(e){return e&&e.__esModule?e:{default:e}}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function c(e,t,r){t=p(t);var n=e,t=f()?Reflect.construct(t,r||[],p(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(f=function(){return!!e})()}function h(){return(h="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=p(e)););return e}(e,t);if(n)return(n=Object.getOwnPropertyDescriptor(n,t)).get?n.get.call(arguments.length<3?e:r):n.value}).apply(null,arguments)}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}e=function(){function u(e){var t;if(this instanceof u)return(t=c(this,u)).geometries_=e,t.changeEventsKeys_=[],t.listenGeometriesChange_(),t;throw new TypeError("Cannot call a class as a function")}var e,t=u,r=o.default;if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&d(t,r),t=u,(r=[{key:"unlistenGeometriesChange_",value:function(){this.changeEventsKeys_.forEach(a.unlistenByKey),this.changeEventsKeys_.length=0}},{key:"listenGeometriesChange_",value:function(){for(var e=this.geometries_,t=0,r=e.length;t<r;++t)this.changeEventsKeys_.push((0,a.listen)(e[t],n.default.CHANGE,this.changed,this))}},{key:"clone",value:function(){var e=new u(g(this.geometries_));return e.applyProperties(this),e}},{key:"closestPointXY",value:function(e,t,r,n){if(!(n<(0,s.closestSquaredDistanceXY)(this.getExtent(),e,t)))for(var i=this.geometries_,o=0,a=i.length;o<a;++o)n=i[o].closestPointXY(e,t,r,n);return n}},{key:"containsXY",value:function(e,t){for(var r=this.geometries_,n=0,i=r.length;n<i;++n)if(r[n].containsXY(e,t))return!0;return!1}},{key:"computeExtent",value:function(e){(0,s.createOrUpdateEmpty)(e);for(var t=this.geometries_,r=0,n=t.length;r<n;++r)(0,s.extend)(e,t[r].getExtent());return e}},{key:"getGeometries",value:function(){return g(this.geometries_)}},{key:"getGeometriesArray",value:function(){return this.geometries_}},{key:"getGeometriesArrayRecursive",value:function(){for(var e=[],t=this.geometries_,r=0,n=t.length;r<n;++r)t[r].getType()===this.getType()?e=e.concat(t[r].getGeometriesArrayRecursive()):e.push(t[r]);return e}},{key:"getSimplifiedGeometry",value:function(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&e<this.simplifiedGeometryMaxMinSquaredTolerance)return this;for(var t=[],r=this.geometries_,n=!1,i=0,o=r.length;i<o;++i){var a=r[i],s=a.getSimplifiedGeometry(e);t.push(s),s!==a&&(n=!0)}return n?new u(t):(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}},{key:"getType",value:function(){return"GeometryCollection"}},{key:"intersectsExtent",value:function(e){for(var t=this.geometries_,r=0,n=t.length;r<n;++r)if(t[r].intersectsExtent(e))return!0;return!1}},{key:"isEmpty",value:function(){return 0===this.geometries_.length}},{key:"rotate",value:function(e,t){for(var r=this.geometries_,n=0,i=r.length;n<i;++n)r[n].rotate(e,t);this.changed()}},{key:"scale",value:function(e,t,r){r=r||(0,s.getCenter)(this.getExtent());for(var n=this.geometries_,i=0,o=n.length;i<o;++i)n[i].scale(e,t,r);this.changed()}},{key:"setGeometries",value:function(e){this.setGeometriesArray(g(e))}},{key:"setGeometriesArray",value:function(e){this.unlistenGeometriesChange_(),this.geometries_=e,this.listenGeometriesChange_(),this.changed()}},{key:"applyTransform",value:function(e){for(var t=this.geometries_,r=0,n=t.length;r<n;++r)t[r].applyTransform(e);this.changed()}},{key:"translate",value:function(e,t){for(var r=this.geometries_,n=0,i=r.length;n<i;++n)r[n].translate(e,t);this.changed()}},{key:"disposeInternal",value:function(){this.unlistenGeometriesChange_(),h(p(u.prototype),"disposeInternal",this).call(this)}}])&&l(t.prototype,r),e&&l(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();function g(e){return e.map(function(e){return e.clone()})}r.default=e},{"../events.js":132,"../events/EventType.js":134,"../extent.js":142,"./Geometry.js":203}],205:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=(n=e("./SimpleGeometry.js"))&&n.__esModule?n:{default:n},a=e("./flat/closest.js"),s=e("../extent.js"),u=e("./flat/deflate.js"),l=e("./flat/simplify.js"),c=e("../array.js"),f=e("./flat/segments.js"),h=e("./flat/inflate.js"),p=e("./flat/interpolate.js"),d=e("./flat/intersectsextent.js"),g=e("./flat/length.js");function y(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function A(e,t,r){t=v(t);var n=e,t=m()?Reflect.construct(t,r||[],v(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(m=function(){return!!e})()}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t){return(b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var n=function(){function n(e,t){var r;if(this instanceof n)return(r=A(this,n)).flatMidpoint_=null,r.flatMidpointRevision_=-1,r.maxDelta_=-1,r.maxDeltaRevision_=-1,void 0===t||Array.isArray(e[0])?r.setCoordinates(e,t):r.setFlatCoordinates(t,e),r;throw new TypeError("Cannot call a class as a function")}var e,t=n,r=o.default;if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&b(t,r),t=n,(r=[{key:"appendCoordinate",value:function(e){(0,c.extend)(this.flatCoordinates,e),this.changed()}},{key:"clone",value:function(){var e=new n(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}},{key:"closestPointXY",value:function(e,t,r,n){return n<(0,s.closestSquaredDistanceXY)(this.getExtent(),e,t)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,a.maxSquaredDelta)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,a.assignClosestPoint)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,e,t,r,n))}},{key:"forEachSegment",value:function(e){return(0,f.forEach)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}},{key:"getCoordinateAtM",value:function(e,t){return"XYM"!=this.layout&&"XYZM"!=this.layout?null:(0,p.lineStringCoordinateAtM)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t=void 0!==t&&t)}},{key:"getCoordinates",value:function(){return(0,h.inflateCoordinates)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}},{key:"getCoordinateAt",value:function(e,t){return(0,p.interpolatePoint)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,this.stride)}},{key:"getLength",value:function(){return(0,g.lineStringLength)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}},{key:"getFlatMidpoint",value:function(){var e;return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,null!=(e=this.flatMidpoint_)?e:void 0),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}},{key:"getSimplifiedGeometryInternal",value:function(e){var t=[];return t.length=(0,l.douglasPeucker)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new n(t,"XY")}},{key:"getType",value:function(){return"LineString"}},{key:"intersectsExtent",value:function(e){return(0,d.intersectsLineString)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}},{key:"setCoordinates",value:function(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=(0,u.deflateCoordinates)(this.flatCoordinates,0,e,this.stride),this.changed()}}])&&y(t.prototype,r),e&&y(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();r.default=n},{"../array.js":110,"../extent.js":142,"./SimpleGeometry.js":212,"./flat/closest.js":215,"./flat/deflate.js":217,"./flat/inflate.js":220,"./flat/interpolate.js":222,"./flat/intersectsextent.js":223,"./flat/length.js":224,"./flat/segments.js":228,"./flat/simplify.js":229}],206:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=(n=e("./SimpleGeometry.js"))&&n.__esModule?n:{default:n},a=e("./flat/closest.js"),s=e("../extent.js"),u=e("./flat/deflate.js"),l=e("./flat/simplify.js"),c=e("./flat/inflate.js"),f=e("./flat/area.js");function h(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function p(e,t,r){t=g(t);var n=e,t=d()?Reflect.construct(t,r||[],g(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(d=function(){return!!e})()}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t){return(y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var n=function(){function n(e,t){var r;if(this instanceof n)return(r=p(this,n)).maxDelta_=-1,r.maxDeltaRevision_=-1,void 0===t||Array.isArray(e[0])?r.setCoordinates(e,t):r.setFlatCoordinates(t,e),r;throw new TypeError("Cannot call a class as a function")}var e,t=n,r=o.default;if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&y(t,r),t=n,(r=[{key:"clone",value:function(){return new n(this.flatCoordinates.slice(),this.layout)}},{key:"closestPointXY",value:function(e,t,r,n){return n<(0,s.closestSquaredDistanceXY)(this.getExtent(),e,t)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,a.maxSquaredDelta)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,a.assignClosestPoint)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,t,r,n))}},{key:"getArea",value:function(){return(0,f.linearRing)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}},{key:"getCoordinates",value:function(){return(0,c.inflateCoordinates)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}},{key:"getSimplifiedGeometryInternal",value:function(e){var t=[];return t.length=(0,l.douglasPeucker)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new n(t,"XY")}},{key:"getType",value:function(){return"LinearRing"}},{key:"intersectsExtent",value:function(e){return!1}},{key:"setCoordinates",value:function(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=(0,u.deflateCoordinates)(this.flatCoordinates,0,e,this.stride),this.changed()}}])&&h(t.prototype,r),e&&h(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();r.default=n},{"../extent.js":142,"./SimpleGeometry.js":212,"./flat/area.js":213,"./flat/closest.js":215,"./flat/deflate.js":217,"./flat/inflate.js":220,"./flat/simplify.js":229}],207:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var l=c(e("./LineString.js")),n=c(e("./SimpleGeometry.js")),o=e("./flat/closest.js"),a=e("../extent.js"),s=e("./flat/deflate.js"),u=e("./flat/simplify.js"),f=e("../array.js"),h=e("./flat/inflate.js"),p=e("./flat/interpolate.js"),d=e("./flat/intersectsextent.js");function c(e){return e&&e.__esModule?e:{default:e}}function g(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function y(e,t,r){t=m(t);var n=e,t=A()?Reflect.construct(t,r||[],m(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function A(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(A=function(){return!!e})()}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){return(v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}e=function(){function c(e,t,r){var n;if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");if((n=y(this,c)).ends_=[],n.maxDelta_=-1,n.maxDeltaRevision_=-1,Array.isArray(e[0]))n.setCoordinates(e,t);else if(void 0!==t&&r)n.setFlatCoordinates(t,e),n.ends_=r;else{for(var i=e,o=[],a=[],s=0,u=i.length;s<u;++s){var l=i[s];(0,f.extend)(o,l.getFlatCoordinates()),a.push(o.length)}t=(0===i.length?n:i[0]).getLayout();n.setFlatCoordinates(t,o),n.ends_=a}return n}var e,t=c,r=n.default;if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&v(t,r),t=c,(r=[{key:"appendLineString",value:function(e){(0,f.extend)(this.flatCoordinates,e.getFlatCoordinates().slice()),this.ends_.push(this.flatCoordinates.length),this.changed()}},{key:"clone",value:function(){var e=new c(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}},{key:"closestPointXY",value:function(e,t,r,n){return n<(0,a.closestSquaredDistanceXY)(this.getExtent(),e,t)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,o.arrayMaxSquaredDelta)(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,o.assignClosestArrayPoint)(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,e,t,r,n))}},{key:"getCoordinateAtM",value:function(e,t,r){return"XYM"!=this.layout&&"XYZM"!=this.layout||0===this.flatCoordinates.length?null:(0,p.lineStringsCoordinateAtM)(this.flatCoordinates,0,this.ends_,this.stride,e,t=void 0!==t&&t,r=void 0!==r&&r)}},{key:"getCoordinates",value:function(){return(0,h.inflateCoordinatesArray)(this.flatCoordinates,0,this.ends_,this.stride)}},{key:"getEnds",value:function(){return this.ends_}},{key:"getLineString",value:function(e){return e<0||this.ends_.length<=e?null:new l.default(this.flatCoordinates.slice(0===e?0:this.ends_[e-1],this.ends_[e]),this.layout)}},{key:"getLineStrings",value:function(){for(var e=this.flatCoordinates,t=this.ends_,r=this.layout,n=[],i=0,o=0,a=t.length;o<a;++o){var s=t[o],u=new l.default(e.slice(i,s),r);n.push(u),i=s}return n}},{key:"getFlatMidpoints",value:function(){for(var e=[],t=this.flatCoordinates,r=0,n=this.ends_,i=this.stride,o=0,a=n.length;o<a;++o){var s=n[o],u=(0,p.interpolatePoint)(t,r,s,i,.5);(0,f.extend)(e,u),r=s}return e}},{key:"getSimplifiedGeometryInternal",value:function(e){var t=[],r=[];return t.length=(0,u.douglasPeuckerArray)(this.flatCoordinates,0,this.ends_,this.stride,e,t,0,r),new c(t,"XY",r)}},{key:"getType",value:function(){return"MultiLineString"}},{key:"intersectsExtent",value:function(e){return(0,d.intersectsLineStringArray)(this.flatCoordinates,0,this.ends_,this.stride,e)}},{key:"setCoordinates",value:function(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);t=(0,s.deflateCoordinatesArray)(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=0===t.length?0:t[t.length-1],this.changed()}}])&&g(t.prototype,r),e&&g(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();r.default=e},{"../array.js":110,"../extent.js":142,"./LineString.js":205,"./SimpleGeometry.js":212,"./flat/closest.js":215,"./flat/deflate.js":217,"./flat/inflate.js":220,"./flat/interpolate.js":222,"./flat/intersectsextent.js":223,"./flat/simplify.js":229}],208:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=n(e("./Point.js")),o=n(e("./SimpleGeometry.js")),c=e("../extent.js"),a=e("./flat/deflate.js"),u=e("../array.js"),l=e("./flat/inflate.js"),f=e("../math.js");function n(e){return e&&e.__esModule?e:{default:e}}function h(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function p(e,t,r){t=g(t);var n=e,t=d()?Reflect.construct(t,r||[],g(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(d=function(){return!!e})()}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t){return(y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}e=function(){function n(e,t){var r;if(this instanceof n)return r=p(this,n),t&&!Array.isArray(e[0])?r.setFlatCoordinates(t,e):r.setCoordinates(e,t),r;throw new TypeError("Cannot call a class as a function")}var e,t=n,r=o.default;if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&y(t,r),t=n,(r=[{key:"appendPoint",value:function(e){(0,u.extend)(this.flatCoordinates,e.getFlatCoordinates()),this.changed()}},{key:"clone",value:function(){var e=new n(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}},{key:"closestPointXY",value:function(e,t,r,n){if(!(n<(0,c.closestSquaredDistanceXY)(this.getExtent(),e,t)))for(var i=this.flatCoordinates,o=this.stride,a=0,s=i.length;a<s;a+=o){var u=(0,f.squaredDistance)(e,t,i[a],i[a+1]);if(u<n){n=u;for(var l=0;l<o;++l)r[l]=i[a+l];r.length=o}}return n}},{key:"getCoordinates",value:function(){return(0,l.inflateCoordinates)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}},{key:"getPoint",value:function(e){var t=this.flatCoordinates.length/this.stride;return e<0||t<=e?null:new s.default(this.flatCoordinates.slice(e*this.stride,(e+1)*this.stride),this.layout)}},{key:"getPoints",value:function(){for(var e=this.flatCoordinates,t=this.layout,r=this.stride,n=[],i=0,o=e.length;i<o;i+=r){var a=new s.default(e.slice(i,i+r),t);n.push(a)}return n}},{key:"getType",value:function(){return"MultiPoint"}},{key:"intersectsExtent",value:function(e){for(var t=this.flatCoordinates,r=this.stride,n=0,i=t.length;n<i;n+=r){var o=t[n],a=t[n+1];if((0,c.containsXY)(e,o,a))return!0}return!1}},{key:"setCoordinates",value:function(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=(0,a.deflateCoordinates)(this.flatCoordinates,0,e,this.stride),this.changed()}}])&&h(t.prototype,r),e&&h(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();r.default=e},{"../array.js":110,"../extent.js":142,"../math.js":279,"./Point.js":210,"./SimpleGeometry.js":212,"./flat/deflate.js":217,"./flat/inflate.js":220}],209:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=d(e("./MultiPoint.js")),h=d(e("./Polygon.js")),o=d(e("./SimpleGeometry.js")),a=e("./flat/closest.js"),s=e("../extent.js"),u=e("./flat/deflate.js"),g=e("../array.js"),l=e("./flat/interiorpoint.js"),c=e("./flat/inflate.js"),f=e("./flat/intersectsextent.js"),p=e("./flat/orient.js"),y=e("./flat/area.js"),A=e("./flat/center.js"),m=e("./flat/contains.js"),v=e("./flat/simplify.js");function d(e){return e&&e.__esModule?e:{default:e}}function b(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function _(e,t,r){t=E(t);var n=e,t=w()?Reflect.construct(t,r||[],E(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(w=function(){return!!e})()}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function C(e,t){return(C=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}e=function(){function d(e,t,r){var n;if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");if((n=_(this,d)).endss_=[],n.flatInteriorPointsRevision_=-1,n.flatInteriorPoints_=null,n.maxDelta_=-1,n.maxDeltaRevision_=-1,n.orientedRevision_=-1,n.orientedFlatCoordinates_=null,!r&&!Array.isArray(e[0])){for(var i=e,o=[],a=[],s=0,u=i.length;s<u;++s){for(var l=i[s],c=o.length,f=l.getEnds(),h=0,p=f.length;h<p;++h)f[h]+=c;(0,g.extend)(o,l.getFlatCoordinates()),a.push(f)}t=(0===i.length?n:i[0]).getLayout(),e=o,r=a}return void 0!==t&&r?(n.setFlatCoordinates(t,e),n.endss_=r):n.setCoordinates(e,t),n}var e,t=d,r=o.default;if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&C(t,r),t=d,(r=[{key:"appendPolygon",value:function(e){var t;if(this.flatCoordinates){var r=this.flatCoordinates.length;(0,g.extend)(this.flatCoordinates,e.getFlatCoordinates());for(var n=0,i=(t=e.getEnds().slice()).length;n<i;++n)t[n]+=r}else this.flatCoordinates=e.getFlatCoordinates().slice(),t=e.getEnds().slice(),this.endss_.push();this.endss_.push(t),this.changed()}},{key:"clone",value:function(){for(var e=this.endss_.length,t=new Array(e),r=0;r<e;++r)t[r]=this.endss_[r].slice();var n=new d(this.flatCoordinates.slice(),this.layout,t);return n.applyProperties(this),n}},{key:"closestPointXY",value:function(e,t,r,n){return n<(0,s.closestSquaredDistanceXY)(this.getExtent(),e,t)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,a.multiArrayMaxSquaredDelta)(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,a.assignClosestMultiArrayPoint)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,e,t,r,n))}},{key:"containsXY",value:function(e,t){return(0,m.linearRingssContainsXY)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e,t)}},{key:"getArea",value:function(){return(0,y.linearRingss)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}},{key:"getCoordinates",value:function(e){var t;return void 0!==e?(t=this.getOrientedFlatCoordinates().slice(),(0,p.orientLinearRingsArray)(t,0,this.endss_,this.stride,e)):t=this.flatCoordinates,(0,c.inflateMultiCoordinatesArray)(t,0,this.endss_,this.stride)}},{key:"getEndss",value:function(){return this.endss_}},{key:"getFlatInteriorPoints",value:function(){var e;return this.flatInteriorPointsRevision_!=this.getRevision()&&(e=(0,A.linearRingss)(this.flatCoordinates,0,this.endss_,this.stride),this.flatInteriorPoints_=(0,l.getInteriorPointsOfMultiArray)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e),this.flatInteriorPointsRevision_=this.getRevision()),this.flatInteriorPoints_}},{key:"getInteriorPoints",value:function(){return new n.default(this.getFlatInteriorPoints().slice(),"XYM")}},{key:"getOrientedFlatCoordinates",value:function(){var e;return this.orientedRevision_!=this.getRevision()&&(e=this.flatCoordinates,(0,p.linearRingssAreOriented)(e,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=(0,p.orientLinearRingsArray)(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()),this.orientedFlatCoordinates_}},{key:"getSimplifiedGeometryInternal",value:function(e){var t=[],r=[];return t.length=(0,v.quantizeMultiArray)(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(e),t,0,r),new d(t,"XY",r)}},{key:"getPolygon",value:function(e){if(e<0||this.endss_.length<=e)return null;t=0===e?0:(n=this.endss_[e-1])[n.length-1];var t,r=this.endss_[e].slice(),n=r[r.length-1];if(0!==t)for(var i=0,o=r.length;i<o;++i)r[i]-=t;return new h.default(this.flatCoordinates.slice(t,n),this.layout,r)}},{key:"getPolygons",value:function(){for(var e=this.layout,t=this.flatCoordinates,r=this.endss_,n=[],i=0,o=0,a=r.length;o<a;++o){var s=r[o].slice(),u=s[s.length-1];if(0!==i)for(var l=0,c=s.length;l<c;++l)s[l]-=i;var f=new h.default(t.slice(i,u),e,s);n.push(f),i=u}return n}},{key:"getType",value:function(){return"MultiPolygon"}},{key:"intersectsExtent",value:function(e){return(0,f.intersectsLinearRingMultiArray)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e)}},{key:"setCoordinates",value:function(e,t){this.setLayout(t,e,3),this.flatCoordinates||(this.flatCoordinates=[]);t=(0,u.deflateMultiCoordinatesArray)(this.flatCoordinates,0,e,this.stride,this.endss_);0===t.length?this.flatCoordinates.length=0:(e=t[t.length-1],this.flatCoordinates.length=0===e.length?0:e[e.length-1]),this.changed()}}])&&b(t.prototype,r),e&&b(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();r.default=e},{"../array.js":110,"../extent.js":142,"./MultiPoint.js":208,"./Polygon.js":211,"./SimpleGeometry.js":212,"./flat/area.js":213,"./flat/center.js":214,"./flat/closest.js":215,"./flat/contains.js":216,"./flat/deflate.js":217,"./flat/inflate.js":220,"./flat/interiorpoint.js":221,"./flat/intersectsextent.js":223,"./flat/orient.js":226,"./flat/simplify.js":229}],210:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=(n=e("./SimpleGeometry.js"))&&n.__esModule?n:{default:n},a=e("../extent.js"),s=e("./flat/deflate.js"),u=e("../math.js");function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function c(e,t,r){t=h(t);var n=e,t=f()?Reflect.construct(t,r||[],h(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(f=function(){return!!e})()}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var n=function(){function n(e,t){var r;if(this instanceof n)return(r=c(this,n)).setCoordinates(e,t),r;throw new TypeError("Cannot call a class as a function")}var e,t=n,r=o.default;if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&p(t,r),t=n,(r=[{key:"clone",value:function(){var e=new n(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}},{key:"closestPointXY",value:function(e,t,r,n){var i=this.flatCoordinates,e=(0,u.squaredDistance)(e,t,i[0],i[1]);if(e<n){for(var o=this.stride,a=0;a<o;++a)r[a]=i[a];return r.length=o,e}return n}},{key:"getCoordinates",value:function(){return this.flatCoordinates.slice()}},{key:"computeExtent",value:function(e){return(0,a.createOrUpdateFromCoordinate)(this.flatCoordinates,e)}},{key:"getType",value:function(){return"Point"}},{key:"intersectsExtent",value:function(e){return(0,a.containsXY)(e,this.flatCoordinates[0],this.flatCoordinates[1])}},{key:"setCoordinates",value:function(e,t){this.setLayout(t,e,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=(0,s.deflateCoordinate)(this.flatCoordinates,0,e,this.stride),this.changed()}}])&&l(t.prototype,r),e&&l(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();r.default=n},{"../extent.js":142,"../math.js":279,"./SimpleGeometry.js":212,"./flat/deflate.js":217}],211:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.circular=function(e,t,r,n){r=r||32;for(var i=[],o=0;o<r;++o)(0,c.extend)(i,(0,v.offset)(e,t,2*Math.PI*o/r,n));return i.push(i[0],i[1]),new S(i,"XY",[i.length])},r.default=void 0,r.fromCircle=function(e,t,r){t=t||32;for(var n=e.getStride(),i=e.getLayout(),o=e.getCenter(),a=n*(t+1),s=new Array(a),u=0;u<a;u+=n){s[u]=0,s[u+1]=0;for(var l=2;l<n;l++)s[u+l]=o[l]}t=[s.length],i=new S(s,i,t);return j(i,o,e.getRadius(),r),i},r.fromExtent=function(e){if((0,s.isEmpty)(e))throw new Error("Cannot create polygon from empty extent");var t=e[0],r=e[1],n=e[2],e=e[3],e=[t,r,t,e,n,e,n,r,t,r];return new S(e,"XY",[e.length])},r.makeRegular=j;var l=b(e("./LinearRing.js")),n=b(e("./Point.js")),o=b(e("./SimpleGeometry.js")),a=e("./flat/closest.js"),s=e("../extent.js"),u=e("./flat/deflate.js"),c=e("../array.js"),f=e("./flat/interiorpoint.js"),h=e("./flat/inflate.js"),p=e("./flat/intersectsextent.js"),d=e("./flat/orient.js"),g=e("./flat/area.js"),y=e("./flat/contains.js"),A=e("../math.js"),m=e("./flat/simplify.js"),v=e("../sphere.js");function b(e){return e&&e.__esModule?e:{default:e}}function _(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function w(e,t,r){t=C(t);var n=e,t=E()?Reflect.construct(t,r||[],C(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(E=function(){return!!e})()}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function I(e,t){return(I=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var S=function(){function i(e,t,r){var n;if(this instanceof i)return(n=w(this,i)).ends_=[],n.flatInteriorPointRevision_=-1,n.flatInteriorPoint_=null,n.maxDelta_=-1,n.maxDeltaRevision_=-1,n.orientedRevision_=-1,n.orientedFlatCoordinates_=null,void 0!==t&&r?(n.setFlatCoordinates(t,e),n.ends_=r):n.setCoordinates(e,t),n;throw new TypeError("Cannot call a class as a function")}var e,t=i,r=o.default;if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&I(t,r),t=i,(r=[{key:"appendLinearRing",value:function(e){this.flatCoordinates?(0,c.extend)(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}},{key:"clone",value:function(){var e=new i(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}},{key:"closestPointXY",value:function(e,t,r,n){return n<(0,s.closestSquaredDistanceXY)(this.getExtent(),e,t)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,a.arrayMaxSquaredDelta)(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,a.assignClosestArrayPoint)(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,e,t,r,n))}},{key:"containsXY",value:function(e,t){return(0,y.linearRingsContainsXY)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,t)}},{key:"getArea",value:function(){return(0,g.linearRings)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}},{key:"getCoordinates",value:function(e){var t;return void 0!==e?(t=this.getOrientedFlatCoordinates().slice(),(0,d.orientLinearRings)(t,0,this.ends_,this.stride,e)):t=this.flatCoordinates,(0,h.inflateCoordinatesArray)(t,0,this.ends_,this.stride)}},{key:"getEnds",value:function(){return this.ends_}},{key:"getFlatInteriorPoint",value:function(){var e;return this.flatInteriorPointRevision_!=this.getRevision()&&(e=(0,s.getCenter)(this.getExtent()),this.flatInteriorPoint_=(0,f.getInteriorPointOfArray)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,0),this.flatInteriorPointRevision_=this.getRevision()),this.flatInteriorPoint_}},{key:"getInteriorPoint",value:function(){return new n.default(this.getFlatInteriorPoint(),"XYM")}},{key:"getLinearRingCount",value:function(){return this.ends_.length}},{key:"getLinearRing",value:function(e){return e<0||this.ends_.length<=e?null:new l.default(this.flatCoordinates.slice(0===e?0:this.ends_[e-1],this.ends_[e]),this.layout)}},{key:"getLinearRings",value:function(){for(var e=this.layout,t=this.flatCoordinates,r=this.ends_,n=[],i=0,o=0,a=r.length;o<a;++o){var s=r[o],u=new l.default(t.slice(i,s),e);n.push(u),i=s}return n}},{key:"getOrientedFlatCoordinates",value:function(){var e;return this.orientedRevision_!=this.getRevision()&&(e=this.flatCoordinates,(0,d.linearRingsAreOriented)(e,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=(0,d.orientLinearRings)(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()),this.orientedFlatCoordinates_}},{key:"getSimplifiedGeometryInternal",value:function(e){var t=[],r=[];return t.length=(0,m.quantizeArray)(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(e),t,0,r),new i(t,"XY",r)}},{key:"getType",value:function(){return"Polygon"}},{key:"intersectsExtent",value:function(e){return(0,p.intersectsLinearRingArray)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e)}},{key:"setCoordinates",value:function(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);t=(0,u.deflateCoordinatesArray)(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=0===t.length?0:t[t.length-1],this.changed()}}])&&_(t.prototype,r),e&&_(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();r.default=S;function j(e,t,r,n){for(var i=e.getFlatCoordinates(),o=e.getStride(),a=i.length/o-1,s=n||0,u=0;u<=a;++u){var l=u*o,c=s+2*(0,A.modulo)(u,a)*Math.PI/a;i[l]=t[0]+r*Math.cos(c),i[1+l]=t[1]+r*Math.sin(c)}e.changed()}},{"../array.js":110,"../extent.js":142,"../math.js":279,"../sphere.js":379,"./LinearRing.js":206,"./Point.js":210,"./SimpleGeometry.js":212,"./flat/area.js":213,"./flat/closest.js":215,"./flat/contains.js":216,"./flat/deflate.js":217,"./flat/inflate.js":220,"./flat/interiorpoint.js":221,"./flat/intersectsextent.js":223,"./flat/orient.js":226,"./flat/simplify.js":229}],212:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,r.getLayoutForStride=d,r.getStrideForLayout=g,r.transformGeom2D=function(e,t,r){var n=e.getFlatCoordinates();return n?(e=e.getStride(),(0,u.transform2D)(n,0,n.length,e,t,r)):null};var o=(n=e("./Geometry.js"))&&n.__esModule?n:{default:n},a=e("../util.js"),s=e("../extent.js"),u=e("./flat/transform.js");function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function c(e,t,r){t=h(t);var n=e,t=f()?Reflect.construct(t,r||[],h(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(f=function(){return!!e})()}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var n=function(){function t(){var e;if(this instanceof t)return(e=c(this,t)).layout="XY",e.stride=2,e.flatCoordinates,e;throw new TypeError("Cannot call a class as a function")}var e,r=t,n=o.default;if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");return r.prototype=Object.create(n&&n.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),n&&p(r,n),r=t,(n=[{key:"computeExtent",value:function(e){return(0,s.createOrUpdateFromFlatCoordinates)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}},{key:"getCoordinates",value:function(){return(0,a.abstract)()}},{key:"getFirstCoordinate",value:function(){return this.flatCoordinates.slice(0,this.stride)}},{key:"getFlatCoordinates",value:function(){return this.flatCoordinates}},{key:"getLastCoordinate",value:function(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}},{key:"getLayout",value:function(){return this.layout}},{key:"getSimplifiedGeometry",value:function(e){var t;return this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&e<=this.simplifiedGeometryMaxMinSquaredTolerance?this:(t=this.getSimplifiedGeometryInternal(e)).getFlatCoordinates().length<this.flatCoordinates.length?t:(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}},{key:"getSimplifiedGeometryInternal",value:function(e){return this}},{key:"getStride",value:function(){return this.stride}},{key:"setFlatCoordinates",value:function(e,t){this.stride=g(e),this.layout=e,this.flatCoordinates=t}},{key:"setCoordinates",value:function(e,t){(0,a.abstract)()}},{key:"setLayout",value:function(e,t,r){var n;if(e)n=g(e);else{for(var i=0;i<r;++i){if(0===t.length)return this.layout="XY",void(this.stride=2);t=t[0]}e=d(n=t.length)}this.layout=e,this.stride=n}},{key:"applyTransform",value:function(e){this.flatCoordinates&&(e(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())}},{key:"rotate",value:function(e,t){var r,n=this.getFlatCoordinates();n&&(r=this.getStride(),(0,u.rotate)(n,0,n.length,r,e,t,n),this.changed())}},{key:"scale",value:function(e,t,r){void 0===t&&(t=e),r=r||(0,s.getCenter)(this.getExtent());var n,i=this.getFlatCoordinates();i&&(n=this.getStride(),(0,u.scale)(i,0,i.length,n,e,t,r,i),this.changed())}},{key:"translate",value:function(e,t){var r,n=this.getFlatCoordinates();n&&(r=this.getStride(),(0,u.translate)(n,0,n.length,r,e,t,n),this.changed())}}])&&l(r.prototype,n),e&&l(r,e),Object.defineProperty(r,"prototype",{writable:!1}),r}();function d(e){var t;return 2==e?t="XY":3==e?t="XYZ":4==e&&(t="XYZM"),t}function g(e){var t;return"XY"==e?t=2:"XYZ"==e||"XYM"==e?t=3:"XYZM"==e&&(t=4),t}r.default=n},{"../extent.js":142,"../util.js":404,"./Geometry.js":203,"./flat/transform.js":232}],213:[function(e,t,r){"use strict";function u(e,t,r,n){for(var i=0,o=e[r-n],a=e[r-n+1];t<r;t+=n){var s=e[t],u=e[t+1];i+=a*s-o*u,o=s,a=u}return i/2}function l(e,t,r,n){for(var i=0,o=0,a=r.length;o<a;++o){var s=r[o];i+=u(e,t,s,n),t=s}return i}Object.defineProperty(r,"__esModule",{value:!0}),r.linearRing=u,r.linearRings=l,r.linearRingss=function(e,t,r,n){for(var i=0,o=0,a=r.length;o<a;++o){var s=r[o];i+=l(e,t,s,n),t=s[s.length-1]}return i}},{}],214:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.linearRingss=function(e,t,r,n){for(var i=[],o=(0,l.createEmpty)(),a=0,s=r.length;a<s;++a){var u=r[a];o=(0,l.createOrUpdateFromFlatCoordinates)(e,t,u[0],n),i.push((o[0]+o[2])/2,(o[1]+o[3])/2),t=u[u.length-1]}return i};var l=e("../../extent.js")},{"../../extent.js":142}],215:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.arrayMaxSquaredDelta=l,r.assignClosestArrayPoint=A,r.assignClosestMultiArrayPoint=function(e,t,r,n,i,o,a,s,u,l,c){c=c||[NaN,NaN];for(var f=0,h=r.length;f<h;++f){var p=r[f];l=A(e,t,p,n,i,o,a,s,u,l,c),t=p[p.length-1]}return l},r.assignClosestPoint=y,r.maxSquaredDelta=u,r.multiArrayMaxSquaredDelta=function(e,t,r,n,i){for(var o=0,a=r.length;o<a;++o){var s=r[o];i=l(e,t,s,n,i),t=s[s.length-1]}return i};var g=e("../../math.js");function d(e,t,r,n,i,o,a){var s,u=e[t],l=e[t+1],c=e[r]-u,f=e[r+1]-l;if(0==c&&0==f)s=t;else{var h=((i-u)*c+(o-l)*f)/(c*c+f*f);if(1<h)s=r;else{if(0<h){for(var p=0;p<n;++p)a[p]=(0,g.lerp)(e[t+p],e[r+p],h);return a.length=n}s=t}}for(var d=0;d<n;++d)a[d]=e[s+d];a.length=n}function u(e,t,r,n,i){var o=e[t],a=e[t+1];for(t+=n;t<r;t+=n){var s=e[t],u=e[t+1],l=(0,g.squaredDistance)(o,a,s,u);i<l&&(i=l),o=s,a=u}return i}function l(e,t,r,n,i){for(var o=0,a=r.length;o<a;++o){var s=r[o];i=u(e,t,s,n,i),t=s}return i}function y(e,t,r,n,i,o,a,s,u,l,c){var f,h;if(t!=r)if(0===i){if((h=(0,g.squaredDistance)(a,s,e[t],e[t+1]))<l){for(f=0;f<n;++f)u[f]=e[t+f];return u.length=n,h}}else{c=c||[NaN,NaN];for(var p=t+n;p<r;)if(d(e,p-n,p,n,a,s,c),(h=(0,g.squaredDistance)(a,s,c[0],c[1]))<l){for(l=h,f=0;f<n;++f)u[f]=c[f];p+=u.length=n}else p+=n*Math.max((Math.sqrt(h)-Math.sqrt(l))/i|0,1);if(o&&(d(e,r-n,t,n,a,s,c),(h=(0,g.squaredDistance)(a,s,c[0],c[1]))<l)){for(l=h,f=0;f<n;++f)u[f]=c[f];u.length=n}}return l}function A(e,t,r,n,i,o,a,s,u,l,c){c=c||[NaN,NaN];for(var f=0,h=r.length;f<h;++f){var p=r[f];l=y(e,t,p,n,i,o,a,s,u,l,c),t=p}return l}},{"../../math.js":279}],216:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.linearRingContainsExtent=function(t,r,n,i,e){return!(0,o.forEachCorner)(e,function(e){return!u(t,r,n,i,e[0],e[1])})},r.linearRingContainsXY=u,r.linearRingsContainsXY=l,r.linearRingssContainsXY=function(e,t,r,n,i,o){if(0!==r.length)for(var a=0,s=r.length;a<s;++a){var u=r[a];if(l(e,t,u,n,i,o))return!0;t=u[u.length-1]}return!1};var o=e("../../extent.js");function u(e,t,r,n,i,o){for(var a=0,s=e[r-n],u=e[r-n+1];t<r;t+=n){var l=e[t],c=e[t+1];u<=o?o<c&&0<(l-s)*(o-u)-(i-s)*(c-u)&&a++:c<=o&&(l-s)*(o-u)-(i-s)*(c-u)<0&&a--,s=l,u=c}return 0!==a}function l(e,t,r,n,i,o){if(0===r.length)return!1;if(!u(e,t,r[0],n,i,o))return!1;for(var a=1,s=r.length;a<s;++a)if(u(e,r[a-1],r[a],n,i,o))return!1;return!0}},{"../../extent.js":142}],217:[function(e,t,r){"use strict";function l(e,t,r,n){for(var i=0,o=r.length;i<o;++i)for(var a=r[i],s=0;s<n;++s)e[t++]=a[s];return t}function c(e,t,r,n,i){i=i||[];for(var o=0,a=0,s=r.length;a<s;++a){var u=l(e,t,r[a],n);t=i[o++]=u}return i.length=o,i}Object.defineProperty(r,"__esModule",{value:!0}),r.deflateCoordinate=function(e,t,r,n){for(var i=0,o=r.length;i<o;++i)e[t++]=r[i];return t},r.deflateCoordinates=l,r.deflateCoordinatesArray=c,r.deflateMultiCoordinatesArray=function(e,t,r,n,i){i=i||[];for(var o=0,a=0,s=r.length;a<s;++a){var u=c(e,t,r[a],n,i[o]);0===u.length&&(u[0]=t),t=(i[o++]=u)[u.length-1]}return i.length=o,i}},{}],218:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.flipXY=function(e,t,r,n,i,o){o=void 0!==i?void 0!==o?o:0:(i=[],0);for(var a=t;a<r;){var s=e[a++];i[o++]=e[a++],i[o++]=s;for(var u=2;u<n;++u)i[o++]=e[a++]}return i.length=o,i}},{}],219:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.greatCircleArc=function(i,e,o,a,t,r){var n=(0,d.get)("EPSG:4326"),s=Math.cos((0,m.toRadians)(e)),u=Math.sin((0,m.toRadians)(e)),l=Math.cos((0,m.toRadians)(a)),c=Math.sin((0,m.toRadians)(a)),f=Math.cos((0,m.toRadians)(o-i)),h=Math.sin((0,m.toRadians)(o-i)),p=u*c+s*l*f;return g(function(e){var t,r,n;return 1<=p?[o,a]:(e=e*Math.acos(p),t=Math.cos(e),e=Math.sin(e),n=Math.atan2(h*l,s*c-u*l*f),r=Math.asin(u*t+s*e*Math.cos(n)),n=(0,m.toRadians)(i)+Math.atan2(Math.sin(n)*e*s,t-u*Math.sin(r)),[(0,m.toDegrees)(n),(0,m.toDegrees)(r)])},(0,d.getTransform)(n,t),r)},r.meridian=function(t,r,n,e,i){var o=(0,d.get)("EPSG:4326");return g(function(e){return[t,r+(n-r)*e]},(0,d.getTransform)(o,e),i)},r.parallel=function(t,r,n,e,i){var o=(0,d.get)("EPSG:4326");return g(function(e){return[r+(n-r)*e,t]},(0,d.getTransform)(o,e),i)};var d=e("../../proj.js"),m=e("../../math.js");function g(e,t,r){for(var n,i,o,a,s,u,l=[],c=e(0),f=e(1),h=t(c),p=[f,c],d=[t(f),h],g=[1,0],y={},A=1e5;0<--A&&0<g.length;)o=g.pop(),c=p.pop(),h=d.pop(),(s=o.toString())in y||(l.push(h[0],h[1]),y[s]=!0),s=g.pop(),f=p.pop(),u=d.pop(),i=t(n=e(a=(o+s)/2)),(0,m.squaredSegmentDistance)(i[0],i[1],h[0],h[1],u[0],u[1])<r?(l.push(u[0],u[1]),y[s.toString()]=!0):(g.push(s,a,a,o),d.push(u,i,i,h),p.push(f,n,n,c));return l}},{"../../math.js":279,"../../proj.js":283}],220:[function(e,t,r){"use strict";function l(e,t,r,n,i){i=void 0!==i?i:[];for(var o=0,a=t;a<r;a+=n)i[o++]=e.slice(a,a+n);return i.length=o,i}function c(e,t,r,n,i){i=void 0!==i?i:[];for(var o=0,a=0,s=r.length;a<s;++a){var u=r[a];i[o++]=l(e,t,u,n,i[o]),t=u}return i.length=o,i}Object.defineProperty(r,"__esModule",{value:!0}),r.inflateCoordinates=l,r.inflateCoordinatesArray=c,r.inflateMultiCoordinatesArray=function(e,t,r,n,i){i=void 0!==i?i:[];for(var o=0,a=0,s=r.length;a<s;++a){var u=r[a];i[o++]=1===u.length&&u[0]===t?[]:c(e,t,u,n,i[o]),t=u[u.length-1]}return i.length=o,i}},{}],221:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getInteriorPointOfArray=l,r.getInteriorPointsOfMultiArray=function(e,t,r,n,i){for(var o=[],a=0,s=r.length;a<s;++a){var u=r[a];o=l(e,t,u,n,i,2*a,o),t=u[u.length-1]}return o};var w=e("../../array.js"),E=e("./contains.js");function l(e,t,r,n,i,o,a){for(var s,u,l,c=i[o+1],f=[],h=0,p=r.length;h<p;++h)for(var d=r[h],g=e[d-n],y=e[d-n+1],A=t;A<d;A+=n)b=e[A],l=e[A+1],(c<=y&&l<=c||y<=c&&c<=l)&&f.push(u=(c-y)/(l-y)*(b-g)+g),g=b,y=l;var m=NaN,v=-1/0;for(f.sort(w.ascending),g=f[0],A=1,s=f.length;A<s;++A){var b=f[A],_=Math.abs(b-g);v<_&&(0,E.linearRingsContainsXY)(e,t,r,n,u=(g+b)/2,c)&&(m=u,v=_),g=b}return isNaN(m)&&(m=i[o]),a?(a.push(m,c,v),a):[m,c,v]}},{"../../array.js":110,"./contains.js":216}],222:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.interpolatePoint=function(e,t,r,n,i,o,a){var s,u,l=(r-t)/n;if(1==l)s=t;else if(2==l)s=t,u=i;else if(0!=l){for(var c=e[t],f=e[t+1],h=0,p=[0],d=t+n;d<r;d+=n){var g=e[d],y=e[d+1];h+=Math.sqrt((g-c)*(g-c)+(y-f)*(y-f)),p.push(h),c=g,f=y}l=i*h,i=(0,m.binarySearch)(p,l);s=i<0?(u=(l-p[-i-2])/(p[-i-1]-p[-i-2]),t+(-i-2)*n):t+i*n}a=1<a?a:2,o=o||new Array(a);for(var A=0;A<a;++A)o[A]=void 0===s?NaN:void 0===u?e[s+A]:(0,v.lerp)(e[s+A],e[s+n+A],u);return o},r.lineStringCoordinateAtM=f,r.lineStringsCoordinateAtM=function(e,t,r,n,i,o,a){if(a)return f(e,t,r[r.length-1],n,i,o);var s;if(i<e[n-1])return o?((s=e.slice(0,n))[n-1]=i,s):null;if(e[e.length-1]<i)return o?((s=e.slice(e.length-n))[n-1]=i,s):null;for(var u=0,l=r.length;u<l;++u){var c=r[u];if(t!=c){if(i<e[t+n-1])return null;if(i<=e[c-1])return f(e,t,c,n,i,!1);t=c}}return null};var m=e("../../array.js"),v=e("../../math.js");function f(e,t,r,n,i,o){if(r==t)return null;if(i<e[t+n-1])return o?((c=e.slice(t,t+n))[n-1]=i,c):null;if(e[r-1]<i)return o?((c=e.slice(r-n,r))[n-1]=i,c):null;if(i==e[t+n-1])return e.slice(t,t+n);for(var a=t/n,s=r/n;a<s;){var u=a+s>>1;i<e[(1+u)*n-1]?s=u:a=1+u}o=e[a*n-1];if(i==o)return e.slice((a-1)*n,(a-1)*n+n);for(var l=(i-o)/(e[(a+1)*n-1]-o),c=[],f=0;f<n-1;++f)c.push((0,v.lerp)(e[(a-1)*n+f],e[a*n+f],l));return c.push(i),c}},{"../../array.js":110,"../../math.js":279}],223:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.intersectsLineString=l,r.intersectsLineStringArray=function(e,t,r,n,i){for(var o=0,a=r.length;o<a;++o){if(l(e,t,r[o],n,i))return!0;t=r[o]}return!1},r.intersectsLinearRing=c,r.intersectsLinearRingArray=f,r.intersectsLinearRingMultiArray=function(e,t,r,n,i){for(var o=0,a=r.length;o<a;++o){var s=r[o];if(f(e,t,s,n,i))return!0;t=s[s.length-1]}return!1};var a=e("../../extent.js"),s=e("./segments.js"),u=e("./contains.js");function l(e,t,r,n,i){var o=(0,a.extendFlatCoordinates)((0,a.createEmpty)(),e,t,r,n);return!!(0,a.intersects)(i,o)&&(!!(0,a.containsExtent)(i,o)||o[0]>=i[0]&&o[2]<=i[2]||o[1]>=i[1]&&o[3]<=i[3]||(0,s.forEach)(e,t,r,n,function(e,t){return(0,a.intersectsSegment)(i,e,t)}))}function c(e,t,r,n,i){return!!(l(e,t,r,n,i)||(0,u.linearRingContainsXY)(e,t,r,n,i[0],i[1])||(0,u.linearRingContainsXY)(e,t,r,n,i[0],i[3])||(0,u.linearRingContainsXY)(e,t,r,n,i[2],i[1])||(0,u.linearRingContainsXY)(e,t,r,n,i[2],i[3]))}function f(e,t,r,n,i){if(!c(e,t,r[0],n,i))return!1;if(1!==r.length)for(var o=1,a=r.length;o<a;++o)if((0,u.linearRingContainsExtent)(e,r[o-1],r[o],n,i)&&!l(e,r[o-1],r[o],n,i))return!1;return!0}},{"../../extent.js":142,"./contains.js":216,"./segments.js":228}],224:[function(e,t,r){"use strict";function a(e,t,r,n){for(var i=e[t],o=e[t+1],a=0,s=t+n;s<r;s+=n){var u=e[s],l=e[s+1];a+=Math.sqrt((u-i)*(u-i)+(l-o)*(l-o)),i=u,o=l}return a}Object.defineProperty(r,"__esModule",{value:!0}),r.lineStringLength=a,r.linearRingLength=function(e,t,r,n){var i=a(e,t,r,n),o=e[r-n]-e[t],r=e[r-n+1]-e[t+1];return i+Math.sqrt(o*o+r*r)}},{}],225:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.lineChunk=function(e,t,r,n,i){for(var o=[],a=r,s=0,u=t.slice(r,2);s<e&&a+i<n;){var l,c,f=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o,a,s=[],u=!0,l=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=o.call(r)).done)&&(s.push(n.value),s.length!==t);u=!0);}catch(e){l=!0,i=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}(e,t)||function(e,t){{var r;if(e)return"string"==typeof e?A(e,t):"Map"===(r="Object"===(r={}.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?A(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(u.slice(-2),2),h=f[0],f=f[1],p=t[a+i],d=t[a+i+1],g=Math.sqrt((p-h)*(p-h)+(d-f)*(d-f));(s+=g)>=e?(c=(e-s+g)/g,l=(0,y.lerp)(h,p,c),c=(0,y.lerp)(f,d,c),u.push(l,c),o.push(u),u=[l,c],s==e&&(a+=i),s=0):(s<e?u.push(t[a+i],t[a+i+1]):(l=g-s,c=(0,y.lerp)(h,p,l/g),h=(0,y.lerp)(f,d,l/g),u.push(c,h),o.push(u),u=[c,h],s=0),a+=i)}return 0<s&&o.push(u),o};var y=e("../../math.js");function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}},{"../../math.js":279}],226:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.inflateEnds=function(e,t){for(var r,n=[],i=0,o=0,a=0,s=t.length;a<s;++a){var u=t[a],l=c(e,i,u,2);if(l===(r=void 0===r?l:r))n.push(t.slice(o,a+1));else{if(0===n.length)continue;n[n.length-1].push(t[o])}o=a+1,i=u}return n},r.linearRingIsClockwise=c,r.linearRingsAreOriented=u,r.linearRingssAreOriented=function(e,t,r,n,i){for(var o=0,a=r.length;o<a;++o){var s=r[o];if(!u(e,t,s,n,i))return!1;s.length&&(t=s[s.length-1])}return!0},r.orientLinearRings=s,r.orientLinearRingsArray=function(e,t,r,n,i){for(var o=0,a=r.length;o<a;++o)t=s(e,t,r[o],n,i);return t};var l=e("./reverse.js");function c(e,t,r,n){for(var i=0,o=e[r-n],a=e[r-n+1];t<r;t+=n){var s=e[t],u=e[t+1];i+=(s-o)*(u+a),o=s,a=u}return 0===i?void 0:0<i}function u(e,t,r,n,i){i=void 0!==i&&i;for(var o=0,a=r.length;o<a;++o){var s=r[o],u=c(e,t,s,n);if(0===o){if(i&&u||!i&&!u)return!1}else if(i&&!u||!i&&u)return!1;t=s}return!0}function s(e,t,r,n,i){i=void 0!==i&&i;for(var o=0,a=r.length;o<a;++o){var s=r[o],u=c(e,t,s,n);(0===o?i&&u||!i&&!u:i&&!u||!i&&u)&&(0,l.coordinates)(e,t,s,n),t=s}return t}},{"./reverse.js":227}],227:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.coordinates=function(e,t,r,n){for(;t<r-n;){for(var i=0;i<n;++i){var o=e[t+i];e[t+i]=e[r-n+i],e[r-n+i]=o}t+=n,r-=n}}},{}],228:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.forEach=function(e,t,r,n,i){var o;for(t+=n;t<r;t+=n)if(o=i(e.slice(t-n,t),e.slice(t,t+n)))return o;return!1}},{}],229:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.douglasPeucker=f,r.douglasPeuckerArray=h,r.douglasPeuckerMultiArray=function(e,t,r,n,i,o,a,s){for(var u=0,l=r.length;u<l;++u){var c=r[u],f=[];a=h(e,t,c,n,i,o,a,f),s.push(f),t=c[c.length-1]}return a},r.quantize=p,r.quantizeArray=d,r.quantizeMultiArray=function(e,t,r,n,i,o,a,s){for(var u=0,l=r.length;u<l;++u){var c=r[u],f=[];a=d(e,t,c,n,i,o,a,f),s.push(f),t=c[c.length-1]}return a},r.radialDistance=s,r.simplifyLineString=function(e,t,r,n,i,o,a){return a=void 0!==a?a:[],o||(r=s(e,t,r,n,i,a,0),e=a,t=0,n=2),a.length=f(e,t,r,n,i,a,0),a},r.snap=A;var w=e("../../math.js");function f(e,t,r,n,i,o,a){var s=(r-t)/n;if(s<3)for(;t<r;t+=n)o[a++]=e[t],o[a++]=e[t+1];else{var u=new Array(s);u[0]=1,u[s-1]=1;for(var l=[t,r-n],c=0;0<l.length;){for(var f=l.pop(),h=l.pop(),p=0,d=e[h],g=e[h+1],y=e[f],A=e[f+1],m=h+n;m<f;m+=n){var v=e[m],b=e[m+1],v=(0,w.squaredSegmentDistance)(v,b,d,g,y,A);p<v&&(c=m,p=v)}i<p&&(u[(c-t)/n]=1,h+n<c&&l.push(h,c),c+n<f)&&l.push(c,f)}for(var _=0;_<s;++_)u[_]&&(o[a++]=e[t+_*n],o[a++]=e[t+_*n+1])}return a}function h(e,t,r,n,i,o,a,s){for(var u=0,l=r.length;u<l;++u){var c=r[u];a=f(e,t,c,n,i,o,a),s.push(a),t=c}return a}function s(e,t,r,n,i,o,a){if(r<=t+n)for(;t<r;t+=n)o[a++]=e[t],o[a++]=e[t+1];else{var s=e[t],u=e[t+1],l=o[a++]=s,c=o[a++]=u;for(t+=n;t<r;t+=n)l=e[t],c=e[t+1],(0,w.squaredDistance)(s,u,l,c)>i&&(s=o[a++]=l,u=o[a++]=c);l==s&&c==u||(o[a++]=l,o[a++]=c)}return a}function A(e,t){return t*Math.round(e/t)}function p(e,t,r,n,i,o,a){if(t!=r){var s,u=A(e[t],i),l=A(e[t+1],i);t+=n,o[a++]=u,o[a++]=l;do{if(s=A(e[t],i),d=A(e[t+1],i),(t+=n)==r)return o[a++]=s,o[a++]=d,a}while(s==u&&d==l);for(;t<r;){var c,f,h,p,d,g=A(e[t],i),y=A(e[t+1],i);t+=n,g==s&&y==d||(s=((c=s-u)*(p=y-l)==(f=d-l)*(h=g-u)&&(c<0&&h<c||c==h||0<c&&c<h)&&(f<0&&p<f||f==p||0<f&&f<p)||(u=o[a++]=s,l=o[a++]=d),g),d=y)}o[a++]=s,o[a++]=d}return a}function d(e,t,r,n,i,o,a,s){for(var u=0,l=r.length;u<l;++u){var c=r[u];a=p(e,t,c,n,i,o,a),s.push(a),t=c}return a}},{"../../math.js":279}],230:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.matchingChunk=function(e,t,r,n,i){for(var o,a,s,u,l,c,f,h,p=r,d=r,g=0,y=0,A=r,m=r;m<n;m+=i){var v=t[m],b=t[m+1];void 0!==s&&(f=v-s,h=b-u,a=Math.sqrt(f*f+h*h),void 0!==l&&(y+=o,Math.acos((l*f+c*h)/(o*a))>e)&&(g<y&&(g=y,p=A,d=m),y=0,A=m-i),o=a,l=f,c=h),s=v,u=b}return(y+=a)>g?[A,m]:[p,d]}},{}],231:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.drawTextOnPath=function(e,t,r,n,i,o,D,a,s,u,l,c){var f=e[t],h=e[t+1],p=0,d=0,g=0,y=0;function A(){p=f,d=h,f=e[t+=n],h=e[t+1],y+=g,g=Math.sqrt((f-p)*(f-p)+(h-d)*(h-d))}for(;A(),t<r-n&&y+g<o;);for(var m=0===g?0:(o-y)/g,v=(0,G.lerp)(p,f,m),b=(0,G.lerp)(d,h,m),_=t-n,L=y,w=o+a*s(u,i,l);t<r-n&&y+g<w;)A();m=0===g?0:(w-y)/g;var E,C=(0,G.lerp)(p,f,m),I=(0,G.lerp)(d,h,m);{var S;E=c?(S=[v,b,C,I],(0,U.rotate)(S,0,4,2,c,S,S),S[2]<S[0]):C<v}var j,x=Math.PI,O=[],c=_+n===t;if(g=0,y=L,f=e[t=_],h=e[t+1],c)A(),j=Math.atan2(h-d,f-p),E&&(j+=0<j?-x:x),O[0]=[(C+v)/2,(I+b)/2,(w-o)/2,j,i];else for(var P=0,k=(i=i.replace(/\n/g," ")).length;P<k;){A();var B=Math.atan2(h-d,f-p);if(E&&(B+=0<B?-x:x),void 0!==j){var T=B-j;if(T+=x<T?-2*x:T<-x?2*x:0,Math.abs(T)>D)return null}j=B;for(var M,Q,F,T=P,R=0;P<k;++P){var N=a*s(u,i[E?k-P-1:P],l);if(t+n<r&&y+g<o+R+N/2)break;R+=N}P!==T&&(M=E?i.substring(k-T,k-P):i.substring(T,P),m=0===g?0:(o+R/2-y)/g,Q=(0,G.lerp)(p,f,m),F=(0,G.lerp)(d,h,m),O.push([Q,F,R/2,B,M]),o+=R)}return O};var G=e("../../math.js"),U=e("./transform.js")},{"../../math.js":279,"./transform.js":232}],232:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.rotate=function(e,t,r,n,i,o,a){a=a||[];for(var s=Math.cos(i),u=Math.sin(i),l=o[0],c=o[1],f=0,h=t;h<r;h+=n){var p=e[h]-l,d=e[h+1]-c;a[f++]=l+p*s-d*u,a[f++]=c+p*u+d*s;for(var g=h+2;g<h+n;++g)a[f++]=e[g]}return a&&a.length!=f&&(a.length=f),a},r.scale=function(e,t,r,n,i,o,a,s){s=s||[];for(var u=a[0],l=a[1],c=0,f=t;f<r;f+=n){var h=e[f]-u,p=e[f+1]-l;s[c++]=u+i*h,s[c++]=l+o*p;for(var d=f+2;d<f+n;++d)s[c++]=e[d]}return s&&s.length!=c&&(s.length=c),s},r.transform2D=function(e,t,r,n,i,o){o=o||[];for(var a=0,s=t;s<r;s+=n){var u=e[s],l=e[s+1];o[a++]=i[0]*u+i[2]*l+i[4],o[a++]=i[1]*u+i[3]*l+i[5]}return o&&o.length!=a&&(o.length=a),o},r.translate=function(e,t,r,n,i,o,a){a=a||[];for(var s=0,u=t;u<r;u+=n){a[s++]=e[u]+i,a[s++]=e[u+1]+o;for(var l=u+2;l<u+n;++l)a[s++]=e[l]}return a&&a.length!=s&&(a.length=s),a}},{}],233:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.WORKER_OFFSCREEN_CANVAS=r.WEBKIT=r.SAFARI_BUG_237906=r.SAFARI=r.PASSIVE_EVENT_LISTENERS=r.MAC=r.IMAGE_DECODE=r.FIREFOX=r.DEVICE_PIXEL_RATIO=r.CREATE_IMAGE_BITMAP=void 0;var n="undefined"!=typeof navigator&&void 0!==navigator.userAgent?navigator.userAgent.toLowerCase():"",i=(r.FIREFOX=n.includes("firefox"),r.SAFARI=n.includes("safari")&&!n.includes("chrom"));r.SAFARI_BUG_237906=i&&(n.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(n)),r.WEBKIT=n.includes("webkit")&&!n.includes("edge"),r.MAC=n.includes("macintosh"),r.DEVICE_PIXEL_RATIO="undefined"!=typeof devicePixelRatio?devicePixelRatio:1,r.WORKER_OFFSCREEN_CANVAS="undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof OffscreenCanvas&&self instanceof WorkerGlobalScope,r.IMAGE_DECODE="undefined"!=typeof Image&&Image.prototype.decode,r.CREATE_IMAGE_BITMAP="function"==typeof createImageBitmap,r.PASSIVE_EVENT_LISTENERS=function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("_",null,t),window.removeEventListener("_",null,t)}catch(e){}return e}()},{}],234:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"Collection",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(r,"Disposable",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(r,"Feature",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(r,"Geolocation",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(r,"Graticule",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(r,"Image",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(r,"ImageCanvas",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(r,"ImageTile",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(r,"ImageWrapper",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(r,"Kinetic",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(r,"Map",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(r,"MapBrowserEvent",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(r,"MapBrowserEventHandler",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(r,"MapEvent",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(r,"Object",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(r,"Observable",{enumerable:!0,get:function(){return A.default}}),Object.defineProperty(r,"Overlay",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(r,"Tile",{enumerable:!0,get:function(){return v.default}}),Object.defineProperty(r,"TileCache",{enumerable:!0,get:function(){return b.default}}),Object.defineProperty(r,"TileQueue",{enumerable:!0,get:function(){return _.default}}),Object.defineProperty(r,"TileRange",{enumerable:!0,get:function(){return w.default}}),Object.defineProperty(r,"VERSION",{enumerable:!0,get:function(){return S.VERSION}}),Object.defineProperty(r,"VectorRenderTile",{enumerable:!0,get:function(){return E.default}}),Object.defineProperty(r,"VectorTile",{enumerable:!0,get:function(){return C.default}}),Object.defineProperty(r,"View",{enumerable:!0,get:function(){return I.default}}),Object.defineProperty(r,"getUid",{enumerable:!0,get:function(){return S.getUid}});var n=j(e("./Collection.js")),i=j(e("./Disposable.js")),o=j(e("./Feature.js")),a=j(e("./Geolocation.js")),s=j(e("./layer/Graticule.js")),u=j(e("./Image.js")),l=j(e("./ImageCanvas.js")),c=j(e("./ImageTile.js")),f=j(e("./Kinetic.js")),h=j(e("./Map.js")),p=j(e("./MapBrowserEvent.js")),d=j(e("./MapBrowserEventHandler.js")),g=j(e("./MapEvent.js")),y=j(e("./Object.js")),A=j(e("./Observable.js")),m=j(e("./Overlay.js")),v=j(e("./Tile.js")),b=j(e("./TileCache.js")),_=j(e("./TileQueue.js")),w=j(e("./TileRange.js")),E=j(e("./VectorRenderTile.js")),C=j(e("./VectorTile.js")),I=j(e("./View.js")),S=e("./util.js");function j(e){return e&&e.__esModule?e:{default:e}}},{"./Collection.js":78,"./Disposable.js":81,"./Feature.js":82,"./Geolocation.js":83,"./Image.js":84,"./ImageCanvas.js":85,"./ImageTile.js":87,"./Kinetic.js":88,"./Map.js":89,"./MapBrowserEvent.js":90,"./MapBrowserEventHandler.js":91,"./MapEvent.js":93,"./Object.js":96,"./Observable.js":98,"./Overlay.js":99,"./Tile.js":100,"./TileCache.js":101,"./TileQueue.js":102,"./TileRange.js":103,"./VectorRenderTile.js":105,"./VectorTile.js":106,"./View.js":107,"./layer/Graticule.js":265,"./util.js":404}],235:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"DblClickDragZoom",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(r,"DoubleClickZoom",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(r,"DragAndDrop",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(r,"DragBox",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(r,"DragPan",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(r,"DragRotate",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(r,"DragRotateAndZoom",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(r,"DragZoom",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(r,"Draw",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(r,"Extent",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(r,"Interaction",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(r,"KeyboardPan",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(r,"KeyboardZoom",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(r,"Link",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(r,"Modify",{enumerable:!0,get:function(){return A.default}}),Object.defineProperty(r,"MouseWheelZoom",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(r,"PinchRotate",{enumerable:!0,get:function(){return v.default}}),Object.defineProperty(r,"PinchZoom",{enumerable:!0,get:function(){return b.default}}),Object.defineProperty(r,"Pointer",{enumerable:!0,get:function(){return _.default}}),Object.defineProperty(r,"Select",{enumerable:!0,get:function(){return w.default}}),Object.defineProperty(r,"Snap",{enumerable:!0,get:function(){return E.default}}),Object.defineProperty(r,"Translate",{enumerable:!0,get:function(){return C.default}}),Object.defineProperty(r,"defaults",{enumerable:!0,get:function(){return I.defaults}});var n=S(e("./interaction/DoubleClickZoom.js")),i=S(e("./interaction/DblClickDragZoom.js")),o=S(e("./interaction/DragAndDrop.js")),a=S(e("./interaction/DragBox.js")),s=S(e("./interaction/DragPan.js")),u=S(e("./interaction/DragRotate.js")),l=S(e("./interaction/DragRotateAndZoom.js")),c=S(e("./interaction/DragZoom.js")),f=S(e("./interaction/Draw.js")),h=S(e("./interaction/Extent.js")),p=S(e("./interaction/Interaction.js")),d=S(e("./interaction/KeyboardPan.js")),g=S(e("./interaction/KeyboardZoom.js")),y=S(e("./interaction/Link.js")),A=S(e("./interaction/Modify.js")),m=S(e("./interaction/MouseWheelZoom.js")),v=S(e("./interaction/PinchRotate.js")),b=S(e("./interaction/PinchZoom.js")),_=S(e("./interaction/Pointer.js")),w=S(e("./interaction/Select.js")),E=S(e("./interaction/Snap.js")),C=S(e("./interaction/Translate.js")),I=e("./interaction/defaults.js");function S(e){return e&&e.__esModule?e:{default:e}}},{"./interaction/DblClickDragZoom.js":236,"./interaction/DoubleClickZoom.js":237,"./interaction/DragAndDrop.js":238,"./interaction/DragBox.js":239,"./interaction/DragPan.js":240,"./interaction/DragRotate.js":241,"./interaction/DragRotateAndZoom.js":242,"./interaction/DragZoom.js":243,"./interaction/Draw.js":244,"./interaction/Extent.js":245,"./interaction/Interaction.js":246,"./interaction/KeyboardPan.js":247,"./interaction/KeyboardZoom.js":248,"./interaction/Link.js":249,"./interaction/Modify.js":250,"./interaction/MouseWheelZoom.js":251,"./interaction/PinchRotate.js":252,"./interaction/PinchZoom.js":253,"./interaction/Pointer.js":254,"./interaction/Select.js":256,"./interaction/Snap.js":257,"./interaction/Translate.js":258,"./interaction/defaults.js":259}],236:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("./Interaction.js")),a=n(e("../MapBrowserEventType.js"));function n(e){return e&&e.__esModule?e:{default:e}}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function u(e,t,r){t=c(t);var n=e,t=l()?Reflect.construct(t,r||[],c(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(l=function(){return!!e})()}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}e=function(){function r(e){var t;if(this instanceof r)return t=u(this,r,[e=e||{}]),e.stopDown&&(t.stopDown=e.stopDown),t.scaleDeltaByPixel_=e.delta||.01,t.duration_=void 0!==e.duration?e.duration:250,t.handlingDownUpSequence_=!1,t.handlingDoubleDownSequence_=!1,t.doubleTapTimeoutId_=void 0,t.trackedPointers_={},t.targetPointers=[],t;throw new TypeError("Cannot call a class as a function")}var e,t=r,n=o.default;if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&f(t,n),t=r,(n=[{key:"handleEvent",value:function(e){var t,r;return!e.originalEvent||(t=!1,this.updateTrackedPointers_(e),this.handlingDownUpSequence_?e.type==a.default.POINTERDRAG?(this.handleDragEvent(e),e.originalEvent.preventDefault()):e.type==a.default.POINTERUP&&(r=this.handleUpEvent(e),this.handlingDownUpSequence_=r):e.type==a.default.POINTERDOWN&&(this.handlingDoubleDownSequence_?(this.handlingDoubleDownSequence_=!1,r=this.handleDownEvent(e),this.handlingDownUpSequence_=r,t=this.stopDown(r)):(t=this.stopDown(!1),this.waitForDblTap_())),!t)}},{key:"handleDragEvent",value:function(e){var t=1,r=this.targetPointers[0],n=this.down_.originalEvent,r=r.clientY-n.clientY,n=(void 0!==this.lastDistance_&&(t=1-(this.lastDistance_-r)*this.scaleDeltaByPixel_),this.lastDistance_=r,1!=t&&(this.lastScaleDelta_=t),e.map),r=n.getView();n.render(),r.adjustResolutionInternal(t)}},{key:"handleDownEvent",value:function(e){var t;return 1==this.targetPointers.length&&(t=e.map,this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.down_=e,this.handlingDownUpSequence_||t.getView().beginInteraction(),!0)}},{key:"handleUpEvent",value:function(e){var t;return 0!=this.targetPointers.length||(e=e.map.getView(),t=1<this.lastScaleDelta_?1:-1,e.endInteraction(this.duration_,t),this.handlingDownUpSequence_=!1,this.handlingDoubleDownSequence_=!1)}},{key:"stopDown",value:function(e){return e}},{key:"updateTrackedPointers_",value:function(e){var t,r;!function(e){e=e.type;return e===a.default.POINTERDOWN||e===a.default.POINTERDRAG||e===a.default.POINTERUP}(e)||(r=(t=e.originalEvent).pointerId.toString(),e.type==a.default.POINTERUP?delete this.trackedPointers_[r]:(e.type==a.default.POINTERDOWN||r in this.trackedPointers_)&&(this.trackedPointers_[r]=t),this.targetPointers=Object.values(this.trackedPointers_))}},{key:"waitForDblTap_",value:function(){void 0!==this.doubleTapTimeoutId_?(clearTimeout(this.doubleTapTimeoutId_),this.doubleTapTimeoutId_=void 0):(this.handlingDoubleDownSequence_=!0,this.doubleTapTimeoutId_=setTimeout(this.endInteraction_.bind(this),250))}},{key:"endInteraction_",value:function(){this.handlingDoubleDownSequence_=!1,this.doubleTapTimeoutId_=void 0}}])&&s(t.prototype,n),e&&s(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();r.default=e},{"../MapBrowserEventType.js":92,"./Interaction.js":246}],237:[function(e,t,r){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};t=u(t);if(t&&t.has(e))return t.get(e);var r,n={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in e){var o;"default"!==r&&{}.hasOwnProperty.call(e,r)&&((o=i?Object.getOwnPropertyDescriptor(e,r):null)&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=e[r])}return n.default=e,t&&t.set(e,n),n}(e("./Interaction.js")),s=(e=e("../MapBrowserEventType.js"))&&e.__esModule?e:{default:e};function u(e){var t,r;return"function"!=typeof WeakMap?null:(t=new WeakMap,r=new WeakMap,(u=function(e){return e?r:t})(e))}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=a(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==a(e)?e:e+""}(n.key),n)}}function l(e,t,r){t=f(t);var n=e,t=c()?Reflect.construct(t,r||[],f(e).constructor):t.apply(e,r);if(t&&("object"==a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(c=function(){return!!e})()}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}e=function(){function r(e){var t;if(this instanceof r)return e=e||{},(t=l(this,r)).delta_=e.delta||1,t.duration_=void 0!==e.duration?e.duration:250,t;throw new TypeError("Cannot call a class as a function")}var e,t=r,n=o.default;if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&h(t,n),t=r,(n=[{key:"handleEvent",value:function(e){var t,r,n,i=!1;return e.type==s.default.DBLCLICK&&(t=e.originalEvent,n=e.map,e=e.coordinate,r=t.shiftKey?-this.delta_:this.delta_,n=n.getView(),(0,o.zoomByDelta)(n,r,e,this.duration_),t.preventDefault(),i=!0),!i}}])&&i(t.prototype,n),e&&i(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();r.default=e},{"../MapBrowserEventType.js":92,"./Interaction.js":246}],238:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.DragAndDropEvent=void 0;var n=l(e("../events/Event.js")),a=l(e("../events/EventType.js")),o=l(e("./Interaction.js")),s=e("../functions.js"),c=e("../proj.js"),u=e("../events.js");function l(e){return e&&e.__esModule?e:{default:e}}function f(){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=A(e)););return e}(e,t);if(n)return(n=Object.getOwnPropertyDescriptor(n,t)).get?n.get.call(arguments.length<3?e:r):n.value}).apply(null,arguments)}function h(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function p(e,t,r){return t&&h(e.prototype,t),r&&h(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t,r){t=A(t);var n=e,t=y()?Reflect.construct(t,r||[],A(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(y=function(){return!!e})()}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&v(e,t)}function v(e,t){return(v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var b="addfeatures",_=r.DragAndDropEvent=(m(E,n.default),p(E)),e=(m(w,o.default),p(w,[{key:"handleResult_",value:function(e,t){for(var r,n=t.target.result,t=this.getMap(),i=(i=(i=this.projection_)||(0,c.getUserProjection)())||t.getView().getProjection(),o=this.formats_,a=0,s=o.length;a<s;++a){var u=o[a],l=n,u=(this.readAsBuffer_&&"arraybuffer"!==u.getType()&&(l=r=void 0===r?(new TextDecoder).decode(n):r),this.tryReadFeatures_(u,l,{featureProjection:i}));if(u&&0<u.length){this.source_&&(this.source_.clear(),this.source_.addFeatures(u)),this.dispatchEvent(new _(b,e,u,i));break}}}},{key:"registerListeners_",value:function(){var e=this.getMap();e&&(e=this.target||e.getViewport(),this.dropListenKeys_=[(0,u.listen)(e,a.default.DROP,this.handleDrop,this),(0,u.listen)(e,a.default.DRAGENTER,this.handleStop,this),(0,u.listen)(e,a.default.DRAGOVER,this.handleStop,this),(0,u.listen)(e,a.default.DROP,this.handleStop,this)])}},{key:"setActive",value:function(e){!this.getActive()&&e&&this.registerListeners_(),this.getActive()&&!e&&this.unregisterListeners_(),f(A(w.prototype),"setActive",this).call(this,e)}},{key:"setMap",value:function(e){this.unregisterListeners_(),f(A(w.prototype),"setMap",this).call(this,e),this.getActive()&&this.registerListeners_()}},{key:"tryReadFeatures_",value:function(e,t,r){try{return e.readFeatures(t,r)}catch(e){return null}}},{key:"unregisterListeners_",value:function(){this.dropListenKeys_&&(this.dropListenKeys_.forEach(u.unlistenByKey),this.dropListenKeys_=null)}},{key:"handleDrop",value:function(e){for(var t=e.dataTransfer.files,r=0,n=t.length;r<n;++r){var i=t.item(r),o=new FileReader;o.addEventListener(a.default.LOAD,this.handleResult_.bind(this,i)),this.readAsBuffer_?o.readAsArrayBuffer(i):o.readAsText(i)}}},{key:"handleStop",value:function(e){e.stopPropagation(),e.preventDefault(),e.dataTransfer.dropEffect="copy"}}]));r.default=e;function w(e){var t;d(this,w),e=e||{},(t=g(this,w,[{handleEvent:s.TRUE}])).on,t.once,t.un,t.readAsBuffer_=!1,t.formats_=[];for(var r=e.formatConstructors||[],n=0,i=r.length;n<i;++n){var o=r[n];"function"==typeof o&&(o=new o),t.formats_.push(o),t.readAsBuffer_=t.readAsBuffer_||"arraybuffer"===o.getType()}return t.projection_=e.projection?(0,c.get)(e.projection):null,t.dropListenKeys_=null,t.source_=e.source||null,t.target=e.target||null,t}function E(e,t,r,n){return d(this,E),(e=g(this,E,[e])).features=r,e.file=t,e.projection=n,e}},{"../events.js":132,"../events/Event.js":133,"../events/EventType.js":134,"../functions.js":200,"../proj.js":283,"./Interaction.js":246}],239:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.DragBoxEvent=void 0;var n=u(e("../events/Event.js")),o=u(e("./Pointer.js")),a=u(e("../render/Box.js")),s=e("../events/condition.js");function u(e){return e&&e.__esModule?e:{default:e}}function l(){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=g(e)););return e}(e,t);if(n)return(n=Object.getOwnPropertyDescriptor(n,t)).get?n.get.call(arguments.length<3?e:r):n.value}).apply(null,arguments)}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function f(e,t,r){return t&&c(e.prototype,t),r&&c(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t,r){t=g(t);var n=e,t=d()?Reflect.construct(t,r||[],g(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(d=function(){return!!e})()}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&A(e,t)}function A(e,t){return(A=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var m="boxstart",v="boxdrag",b="boxend",_="boxcancel",w=r.DragBoxEvent=(y(C,n.default),f(C)),e=(y(E,o.default),f(E,[{key:"defaultBoxEndCondition",value:function(e,t,r){var n=r[0]-t[0],r=r[1]-t[1];return n*n+r*r>=this.minArea_}},{key:"getGeometry",value:function(){return this.box_.getGeometry()}},{key:"handleDragEvent",value:function(e){this.startPixel_&&(this.box_.setPixels(this.startPixel_,e.pixel),this.dispatchEvent(new w(v,e.coordinate,e)))}},{key:"handleUpEvent",value:function(e){var t;return this.startPixel_&&(this.box_.setMap(null),(t=this.boxEndCondition_(e,this.startPixel_,e.pixel))&&this.onBoxEnd(e),this.dispatchEvent(new w(t?b:_,e.coordinate,e))),!1}},{key:"handleDownEvent",value:function(e){return!!this.condition_(e)&&(this.startPixel_=e.pixel,this.box_.setMap(e.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new w(m,e.coordinate,e)),!0)}},{key:"onBoxEnd",value:function(e){}},{key:"setActive",value:function(e){e||(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new w(_,this.startPixel_,null)),this.startPixel_=null)),l(g(E.prototype),"setActive",this).call(this,e)}}]));r.default=e;function E(e){var t;return h(this,E),(t=p(this,E)).on,t.once,t.un,t.box_=new a.default((e=e||{}).className||"ol-dragbox"),t.minArea_=void 0!==e.minArea?e.minArea:64,e.onBoxEnd&&(t.onBoxEnd=e.onBoxEnd),t.startPixel_=null,t.condition_=e.condition||s.mouseActionButton,t.boxEndCondition_=e.boxEndCondition||t.defaultBoxEndCondition,t}function C(e,t,r){return h(this,C),(e=p(this,C,[e])).coordinate=t,e.mapBrowserEvent=r,e}},{"../events/Event.js":133,"../events/condition.js":138,"../render/Box.js":292,"./Pointer.js":254}],240:[function(e,t,r){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};t=c(t);if(t&&t.has(e))return t.get(e);var r,n={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in e){var o;"default"!==r&&{}.hasOwnProperty.call(e,r)&&((o=i?Object.getOwnPropertyDescriptor(e,r):null)&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=e[r])}return n.default=e,t&&t.set(e,n),n}(e("./Pointer.js")),i=e("../functions.js"),s=e("../events/condition.js"),u=e("../easing.js"),l=e("../coordinate.js");function c(e){var t,r;return"function"!=typeof WeakMap?null:(t=new WeakMap,r=new WeakMap,(c=function(e){return e?r:t})(e))}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=a(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==a(e)?e:e+""}(n.key),n)}}function h(e,t,r){t=d(t);var n=e,t=p()?Reflect.construct(t,r||[],d(e).constructor):t.apply(e,r);if(t&&("object"==a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(p=function(){return!!e})()}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){return(g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}e=function(){function n(e){var t;if(!(this instanceof n))throw new TypeError("Cannot call a class as a function");e=e||{},(t=h(this,n,[{stopDown:i.FALSE}])).kinetic_=e.kinetic,t.lastCentroid=null,t.lastPointersCount_,t.panning_=!1;var r=e.condition||(0,s.all)(s.noModifierKeys,s.primaryAction);return t.condition_=e.onFocusOnly?(0,s.all)(s.focusWithTabindex,r):r,t.noKinetic_=!1,t}var e,t=n,r=o.default;if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&g(t,r),t=n,(r=[{key:"handleDragEvent",value:function(e){var t,r,n=e.map,i=(this.panning_||(this.panning_=!0,n.getView().beginInteraction()),this.targetPointers),n=n.getEventPixel((0,o.centroid)(i));i.length==this.lastPointersCount_?(this.kinetic_&&this.kinetic_.update(n[0],n[1]),this.lastCentroid&&(t=[this.lastCentroid[0]-n[0],n[1]-this.lastCentroid[1]],r=e.map.getView(),(0,l.scale)(t,r.getResolution()),(0,l.rotate)(t,r.getRotation()),r.adjustCenterInternal(t))):this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=n,this.lastPointersCount_=i.length,e.originalEvent.preventDefault()}},{key:"handleUpEvent",value:function(e){var t,r,n,e=e.map,i=e.getView();return 0===this.targetPointers.length?(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()&&(t=this.kinetic_.getDistance(),r=this.kinetic_.getAngle(),n=i.getCenterInternal(),n=e.getPixelFromCoordinateInternal(n),e=e.getCoordinateFromPixelInternal([n[0]-t*Math.cos(r),n[1]-t*Math.sin(r)]),i.animateInternal({center:i.getConstrainedCenter(e),duration:500,easing:u.easeOut})),this.panning_&&(this.panning_=!1,i.endInteraction()),!1):(this.kinetic_&&this.kinetic_.begin(),!(this.lastCentroid=null))}},{key:"handleDownEvent",value:function(e){return!!(0<this.targetPointers.length&&this.condition_(e))&&(e=e.map.getView(),this.lastCentroid=null,e.getAnimating()&&e.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=1<this.targetPointers.length,!0)}}])&&f(t.prototype,r),e&&f(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();r.default=e},{"../coordinate.js":128,"../easing.js":131,"../events/condition.js":138,"../functions.js":200,"./Pointer.js":254}],241:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=(n=e("./Pointer.js"))&&n.__esModule?n:{default:n},a=e("../functions.js"),s=e("../events/condition.js"),u=e("../rotationconstraint.js");function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function c(e,t,r){t=h(t);var n=e,t=f()?Reflect.construct(t,r||[],h(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(f=function(){return!!e})()}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var n=function(){function r(e){var t;if(this instanceof r)return e=e||{},(t=c(this,r,[{stopDown:a.FALSE}])).condition_=e.condition||s.altShiftKeysOnly,t.lastAngle_=void 0,t.duration_=void 0!==e.duration?e.duration:250,t;throw new TypeError("Cannot call a class as a function")}var e,t=r,n=o.default;if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&p(t,n),t=r,(n=[{key:"handleDragEvent",value:function(e){var t,r;(0,s.mouseOnly)(e)&&(t=(r=e.map).getView()).getConstraints().rotation!==u.disable&&(r=r.getSize(),e=e.pixel,e=Math.atan2(r[1]/2-e[1],e[0]-r[0]/2),void 0!==this.lastAngle_&&(r=e-this.lastAngle_,t.adjustRotationInternal(-r)),this.lastAngle_=e)}},{key:"handleUpEvent",value:function(e){return!(0,s.mouseOnly)(e)||(e.map.getView().endInteraction(this.duration_),!1)}},{key:"handleDownEvent",value:function(e){return!(!(0,s.mouseOnly)(e)||!(0,s.mouseActionButton)(e)||!this.condition_(e)||(e.map.getView().beginInteraction(),this.lastAngle_=void 0))}}])&&l(t.prototype,n),e&&l(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();r.default=n},{"../events/condition.js":138,"../functions.js":200,"../rotationconstraint.js":336,"./Pointer.js":254}],242:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=(n=e("./Pointer.js"))&&n.__esModule?n:{default:n},a=e("../events/condition.js");function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function u(e,t,r){t=c(t);var n=e,t=l()?Reflect.construct(t,r||[],c(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(l=function(){return!!e})()}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var n=function(){function r(e){var t;if(this instanceof r)return(t=u(this,r,[e=e||{}])).condition_=e.condition||a.shiftKeyOnly,t.lastAngle_=void 0,t.lastMagnitude_=void 0,t.lastScaleDelta_=0,t.duration_=void 0!==e.duration?e.duration:400,t;throw new TypeError("Cannot call a class as a function")}var e,t=r,n=o.default;if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&f(t,n),t=r,(n=[{key:"handleDragEvent",value:function(e){var t,r,n;(0,a.mouseOnly)(e)&&(r=(n=e.map).getSize(),t=(e=e.pixel)[0]-r[0]/2,r=r[1]/2-e[1],e=Math.atan2(r,t),t=Math.sqrt(t*t+r*r),r=n.getView(),void 0!==this.lastAngle_&&(n=this.lastAngle_-e,r.adjustRotationInternal(n)),this.lastAngle_=e,void 0!==this.lastMagnitude_&&r.adjustResolutionInternal(this.lastMagnitude_/t),void 0!==this.lastMagnitude_&&(this.lastScaleDelta_=this.lastMagnitude_/t),this.lastMagnitude_=t)}},{key:"handleUpEvent",value:function(e){var t;return!(0,a.mouseOnly)(e)||(e=e.map.getView(),t=1<this.lastScaleDelta_?1:-1,e.endInteraction(this.duration_,t),this.lastScaleDelta_=0,!1)}},{key:"handleDownEvent",value:function(e){return!!(0,a.mouseOnly)(e)&&!!this.condition_(e)&&(e.map.getView().beginInteraction(),this.lastAngle_=void 0,!(this.lastMagnitude_=void 0))}}])&&s(t.prototype,n),e&&s(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();r.default=n},{"../events/condition.js":138,"./Pointer.js":254}],243:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=(n=e("./DragBox.js"))&&n.__esModule?n:{default:n},a=e("../easing.js"),s=e("../events/condition.js");function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function l(e,t,r){t=f(t);var n=e,t=c()?Reflect.construct(t,r||[],f(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(c=function(){return!!e})()}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var n=function(){function r(e){var t;if(this instanceof r)return(t=l(this,r,[{condition:(e=e||{}).condition?e.condition:s.shiftKeyOnly,className:e.className||"ol-dragzoom",minArea:e.minArea}])).duration_=void 0!==e.duration?e.duration:200,t.out_=void 0!==e.out&&e.out,t;throw new TypeError("Cannot call a class as a function")}var e,t=r,n=o.default;if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&h(t,n),t=r,(n=[{key:"onBoxEnd",value:function(e){var t,r=this.getMap().getView(),n=this.getGeometry();this.out_&&(t=r.rotatedExtentForGeometry(n),t=r.getResolutionForExtentInternal(t),t=r.getResolution()/t,(n=n.clone()).scale(t*t)),r.fitInternal(n,{duration:this.duration_,easing:a.easeOut})}}])&&u(t.prototype,n),e&&u(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();r.default=n},{"../easing.js":131,"../events/condition.js":138,"./DragBox.js":239}],244:[function(e,D,t){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.DrawEvent=void 0,t.createBox=function(){return function(e,t,r){e=(0,o.boundingExtent)([e[0],e[e.length-1]].map(function(e){return(0,h.fromUserCoordinate)(e,r)})),e=[[(0,o.getBottomLeft)(e),(0,o.getBottomRight)(e),(0,o.getTopRight)(e),(0,o.getTopLeft)(e),(0,o.getBottomLeft)(e)]],t?t.setCoordinates(e):t=new _.default(e),e=(0,h.getUserProjection)();return e&&t.transform(r,e),t}},t.createRegularPolygon=function(s,u){return function(e,t,r){var n,i=(0,h.fromUserCoordinate)(e[0],r),e=(0,h.fromUserCoordinate)(e[e.length-1],r),o=Math.sqrt((0,w.squaredDistance)(i,e)),a=(t=t||(0,_.fromCircle)(new l.default(i),s),u),e=(u||0===u||(n=e[0]-i[0],e=e[1]-i[1],a=Math.atan2(e,n)),(0,_.makeRegular)(t,i,o,a),(0,h.getUserProjection)());return e&&t.transform(r,e),t}},t.default=void 0;var l=r(e("../geom/Circle.js")),L=r(e("../events/Event.js")),Q=r(e("../events/EventType.js")),n=r(e("../Feature.js")),F=r(e("../geom/GeometryCollection.js")),N=r(e("./Property.js")),m=r(e("../geom/LineString.js")),G=r(e("../MapBrowserEvent.js")),i=r(e("../MapBrowserEventType.js")),v=r(e("../geom/MultiLineString.js")),U=r(e("../geom/MultiPoint.js")),b=r(e("../geom/MultiPolygon.js")),s=r(e("../geom/Point.js")),z=r(e("./Pointer.js")),_=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};t=d(t);if(t&&t.has(e))return t.get(e);var r,n={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in e){var o;"default"!==r&&{}.hasOwnProperty.call(e,r)&&((o=i?Object.getOwnPropertyDescriptor(e,r):null)&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=e[r])}return n.default=e,t&&t.set(e,n),n}(e("../geom/Polygon.js")),q=r(e("../layer/Vector.js")),H=r(e("../source/Vector.js")),u=e("../functions.js"),c=e("../events/condition.js"),o=e("../extent.js"),f=e("../math.js"),W=e("../style/Style.js"),w=e("../coordinate.js"),h=e("../proj.js"),p=e("../geom/SimpleGeometry.js");function d(e){var t,r;return"function"!=typeof WeakMap?null:(t=new WeakMap,r=new WeakMap,(d=function(e){return e?r:t})(e))}function r(e){return e&&e.__esModule?e:{default:e}}function g(){return(g="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=I(e)););return e}(e,t);if(n)return(n=Object.getOwnPropertyDescriptor(n,t)).get?n.get.call(arguments.length<3?e:r):n.value}).apply(null,arguments)}function y(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=a(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==a(e)?e:e+""}(n.key),n)}}function A(e,t,r){return t&&y(e.prototype,t),r&&y(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function E(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function C(e,t,r){t=I(t);var n=e,t=Y()?Reflect.construct(t,r||[],I(e).constructor):t.apply(e,r);if(t&&("object"==a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Y(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Y=function(){return!!e})()}function I(e){return(I=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function V(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&K(e,t)}function K(e,t){return(K=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var X="drawstart",J="drawend",Z="drawabort",S=t.DrawEvent=(V(j,L.default),A(j));function j(e,t){return E(this,j),(e=C(this,j,[e])).feature=t,e}function $(e,t){for(var r=[],n=0;n<t.length;++n)!function e(t,r,n){if(r instanceof m.default)B(t,r.getCoordinates(),!1,n);else if(r instanceof v.default)for(var i=r.getCoordinates(),o=0,a=i.length;o<a;++o)B(t,i[o],!1,n);else if(r instanceof _.default)for(var s=r.getCoordinates(),u=0,l=s.length;u<l;++u)B(t,s[u],!0,n);else if(r instanceof b.default)for(var c=r.getCoordinates(),f=0,h=c.length;f<h;++f)for(var p=c[f],d=0,g=p.length;d<g;++d)B(t,p[d],!0,n);else if(r instanceof F.default)for(var y=r.getGeometries(),A=0;A<y.length;++A)e(t,y[A],n)}(e,t[n].getGeometry(),r);return r}function x(e,t){return(0,f.squaredDistance)(e[0],e[1],t[0],t[1])}function O(e,t){var r=e.length;return t<0?e[t+r]:r<=t?e[t-r]:e[t]}function P(e,t,r){var n,r=t<r?(n=t,r):(n=r,t),t=Math.ceil(n),i=Math.floor(r);if(i<t)return x(M(e,n),M(e,r));var o=0;n<t&&(o+=x(M(e,n),O(e,t))),i<r&&(o+=x(O(e,i),M(e,r)));for(var a=t;a<i-1;++a)o+=x(O(e,a),O(e,a+1));return o}var k={index:-1,endIndex:NaN};function B(e,t,r,n){for(var i=e[0],o=e[1],a=0,s=t.length-1;a<s;++a){var u=ee(i,o,t[a],t[a+1]);if(0===u.squaredDistance)return u=a+u.along,void n.push({coordinates:t,ring:r,startIndex:u,endIndex:u})}}var T={along:0,squaredDistance:0};function ee(e,t,r,n){var i=r[0],r=r[1],o=n[0]-i,n=n[1]-r,a=0,s=i,u=r;return 0==o&&0==n||(s+=o*(a=(0,f.clamp)(((e-i)*o+(t-r)*n)/(o*o+n*n),0,1)),u+=n*a),T.along=a,T.squaredDistance=(0,f.toFixed)((0,f.squaredDistance)(e,t,s,u),10),T}function M(e,t){var r=e.length,n=Math.floor(t),t=t-n,i=(r<=n?n-=r:n<0&&(n+=r),n+1),r=(r<=i&&(i-=r),e[n]),n=r[0],r=r[1],e=e[i];return[n+(e[0]-n)*t,r+(e[1]-r)*t]}V(R,z.default);e=A(R,[{key:"setTrace",value:function(e){e=e?!0===e?c.always:e:c.never;this.traceCondition_=e}},{key:"setMap",value:function(e){g(I(R.prototype),"setMap",this).call(this,e),this.updateState_()}},{key:"getOverlay",value:function(){return this.overlay_}},{key:"handleEvent",value:function(e){e.originalEvent.type===Q.default.CONTEXTMENU&&e.originalEvent.preventDefault(),this.freehand_="Point"!==this.mode_&&this.freehandCondition_(e);var t=e.type===i.default.POINTERMOVE,r=!0;return!this.freehand_&&this.lastDragTime_&&e.type===i.default.POINTERDRAG&&(Date.now()-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=e.pixel,this.shouldHandle_=!this.freehand_,t=!0):this.lastDragTime_=void 0,this.shouldHandle_)&&void 0!==this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.freehand_&&e.type===i.default.POINTERDRAG&&null!==this.sketchFeature_?(this.addToDrawing_(e.coordinate),r=!1):this.freehand_&&e.type===i.default.POINTERDOWN?r=!1:t&&this.getPointerCount()<2?(r=e.type===i.default.POINTERMOVE)&&this.freehand_?(this.handlePointerMove_(e),this.shouldHandle_&&e.originalEvent.preventDefault()):("mouse"===e.originalEvent.pointerType||e.type===i.default.POINTERDRAG&&void 0===this.downTimeout_)&&this.handlePointerMove_(e):e.type===i.default.DBLCLICK&&(r=!1),g(I(R.prototype),"handleEvent",this).call(this,e)&&r}},{key:"handleDownEvent",value:function(e){var t=this;return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=e.pixel,this.finishCoordinate_||this.startDrawing_(e.coordinate),!0):this.condition_(e)?(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout(function(){t.handlePointerMove_(new G.default(i.default.POINTERMOVE,e.map,e.originalEvent,!1,e.frameState))},this.dragVertexDelay_),this.downPx_=e.pixel,!0):(this.lastDragTime_=void 0,!1)}},{key:"deactivateTrace_",value:function(){this.traceState_={active:!1}}},{key:"toggleTraceState_",value:function(e){var t,r;this.traceSource_&&this.traceCondition_(e)&&(this.traceState_.active?this.deactivateTrace_():(r=(t=this.getMap()).getCoordinateFromPixel([e.pixel[0]-this.snapTolerance_,e.pixel[1]+this.snapTolerance_]),t=t.getCoordinateFromPixel([e.pixel[0]+this.snapTolerance_,e.pixel[1]-this.snapTolerance_]),r=(0,o.boundingExtent)([r,t]),0!==(t=this.traceSource_.getFeaturesInExtent(r)).length&&(r=$(e.coordinate,t)).length&&(this.traceState_={active:!0,startPx:e.pixel.slice(),targets:r,targetIndex:-1})))}},{key:"addOrRemoveTracedCoordinates_",value:function(e,t){var r=e.startIndex<=e.endIndex;r==e.startIndex<=t?r&&t>e.endIndex||!r&&t<e.endIndex?this.addTracedCoordinates_(e,e.endIndex,t):(r&&t<e.endIndex||!r&&t>e.endIndex)&&this.removeTracedCoordinates_(t,e.endIndex):(this.removeTracedCoordinates_(e.startIndex,e.endIndex),this.addTracedCoordinates_(e,e.startIndex,t))}},{key:"removeTracedCoordinates_",value:function(e,t){var r,n,i;e!==t&&(i=0)<(i=e<t?(n=Math.ceil(e),(r=Math.floor(t))===t&&--r,r-n+1):(r=Math.floor(e),(n=Math.ceil(t))===t&&(n+=1),r-n+1))&&this.removeLastPoints_(i)}},{key:"addTracedCoordinates_",value:function(e,t,r){if(t!==r){var n=[];if(t<r){var i=Math.ceil(t),o=Math.floor(r);o===r&&--o;for(var a=i;a<=o;++a)n.push(O(e.coordinates,a))}else{var i=Math.floor(t),s=Math.ceil(r);s===r&&(s+=1);for(var u=i;s<=u;--u)n.push(O(e.coordinates,u))}n.length&&this.appendCoordinates(n)}}},{key:"updateTrace_",value:function(e){var t,r,n=this.traceState_;!n.active||-1===n.targetIndex&&(0,w.distance)(n.startPx,e.pixel)<this.snapTolerance_||(r=function(e,t,r,n){for(var i=e[0],o=e[1],a=1/0,s=-1,u=NaN,l=0;l<t.targets.length;++l){for(var c=t.targets[l],f=c.coordinates,h=1/0,p=void 0,d=0;d<f.length-1;++d){var g=ee(i,o,f[d],f[d+1]);g.squaredDistance<h&&(h=g.squaredDistance,p=d+g.along)}h<a&&(a=h,c.ring&&t.targetIndex===l&&(c.endIndex>c.startIndex?p<c.startIndex&&(p+=f.length):c.endIndex<c.startIndex&&p>c.startIndex&&(p-=f.length)),u=p,s=l)}var y,A=(e=t.targets[s]).ring;return(A=t.targetIndex===s&&A&&(y=M(e.coordinates,u),r=r.getPixelFromCoordinate(y),(0,w.distance)(r,t.startPx)>n)?!1:A)&&(r=(y=e.coordinates).length,(n=e.startIndex)<(A=u)?(e=P(y,n,A),P(y,n,A-r)<e&&(u-=r)):(e=P(y,n,A),P(y,n,A+r)<e&&(u+=r))),k.index=s,k.endIndex=u,k}(e.coordinate,n,this.getMap(),this.snapTolerance_),n.targetIndex!==r.index?(-1!==n.targetIndex&&(t=n.targets[n.targetIndex],this.removeTracedCoordinates_(t.startIndex,t.endIndex)),t=n.targets[r.index],this.addTracedCoordinates_(t,t.startIndex,r.endIndex)):(t=n.targets[n.targetIndex],this.addOrRemoveTracedCoordinates_(t,r.endIndex)),n.targetIndex=r.index,(t=n.targets[n.targetIndex]).endIndex=r.endIndex,n=M(t.coordinates,t.endIndex),r=this.getMap().getPixelFromCoordinate(n),e.coordinate=n,e.pixel=[Math.round(r[0]),Math.round(r[1])])}},{key:"handleUpEvent",value:function(e){var t,r,n=!0;return 0===this.getPointerCount()&&(this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(e),t=this.traceState_.active,this.toggleTraceState_(e),this.shouldHandle_?((r=!this.finishCoordinate_)&&this.startDrawing_(e.coordinate),!r&&this.freehand_?this.finishDrawing():this.freehand_||r&&"Point"!==this.mode_||(this.atFinish_(e.pixel,t)?this.finishCondition_(e)&&this.finishDrawing():this.addToDrawing_(e.coordinate)),n=!1):this.freehand_&&this.abortDrawing()),!n&&this.stopClick_&&e.preventDefault(),n}},{key:"handlePointerMove_",value:function(e){if(this.pointerType_=e.originalEvent.pointerType,this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){var t=this.downPx_,r=e.pixel,n=t[0]-r[0],t=t[1]-r[1],r=n*n+t*t;if(this.shouldHandle_=this.freehand_?r>this.squaredClickTolerance_:r<=this.squaredClickTolerance_,!this.shouldHandle_)return}this.finishCoordinate_?(this.updateTrace_(e),this.modifyDrawing_(e.coordinate)):this.createOrUpdateSketchPoint_(e.coordinate.slice())}},{key:"atFinish_",value:function(e,t){var r=!1;if(this.sketchFeature_){var n=!1,i=[this.finishCoordinate_],o=this.mode_;if("Point"===o?r=!0:"Circle"===o?r=2===this.sketchCoords_.length:"LineString"===o?n=!t&&this.sketchCoords_.length>this.minPoints_:"Polygon"===o&&(n=(o=this.sketchCoords_)[0].length>this.minPoints_,i=[o[0][0],o[0][o[0].length-2]],i=t?[o[0][0]]:[o[0][0],o[0][o[0].length-2]]),n)for(var a=this.getMap(),s=0,u=i.length;s<u;s++){var l=i[s],c=a.getPixelFromCoordinate(l),f=e[0]-c[0],c=e[1]-c[1],h=this.freehand_?1:this.snapTolerance_;if(r=Math.sqrt(f*f+c*c)<=h){this.finishCoordinate_=l;break}}}return r}},{key:"createOrUpdateSketchPoint_",value:function(e){this.sketchPoint_?this.sketchPoint_.getGeometry().setCoordinates(e):(this.sketchPoint_=new n.default(new s.default(e)),this.updateSketchFeatures_())}},{key:"createOrUpdateCustomSketchLine_",value:function(e){this.sketchLine_||(this.sketchLine_=new n.default);var e=e.getLinearRing(0),t=this.sketchLine_.getGeometry();t?(t.setFlatCoordinates(e.getLayout(),e.getFlatCoordinates()),t.changed()):(t=new m.default(e.getFlatCoordinates(),e.getLayout()),this.sketchLine_.setGeometry(t))}},{key:"startDrawing_",value:function(e){for(var t=this.getMap().getView().getProjection(),r=(0,p.getStrideForLayout)(this.geometryLayout_);e.length<r;)e.push(0);this.finishCoordinate_=e,"Point"===this.mode_?this.sketchCoords_=e.slice():"Polygon"===this.mode_?(this.sketchCoords_=[[e.slice(),e.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[e.slice(),e.slice()],this.sketchLineCoords_&&(this.sketchLine_=new n.default(new m.default(this.sketchLineCoords_)));t=this.geometryFunction_(this.sketchCoords_,void 0,t);this.sketchFeature_=new n.default,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(t),this.updateSketchFeatures_(),this.dispatchEvent(new S(X,this.sketchFeature_))}},{key:"modifyDrawing_",value:function(e){for(var t,r,n=this.getMap(),i=this.sketchFeature_.getGeometry(),o=n.getView().getProjection(),a=(0,p.getStrideForLayout)(this.geometryLayout_);e.length<a;)e.push(0);"Point"===this.mode_?r=this.sketchCoords_:"Polygon"===this.mode_?(r=(t=this.sketchCoords_[0])[t.length-1],this.atFinish_(n.getPixelFromCoordinate(e))&&(e=this.finishCoordinate_.slice())):r=(t=this.sketchCoords_)[t.length-1],r[0]=e[0],r[1]=e[1],this.geometryFunction_(this.sketchCoords_,i,o),this.sketchPoint_&&this.sketchPoint_.getGeometry().setCoordinates(e),"Polygon"===i.getType()&&"Polygon"!==this.mode_?this.createOrUpdateCustomSketchLine_(i):this.sketchLineCoords_&&this.sketchLine_.getGeometry().setCoordinates(this.sketchLineCoords_),this.updateSketchFeatures_()}},{key:"addToDrawing_",value:function(e){var t,r,n=this.sketchFeature_.getGeometry(),i=this.getMap().getView().getProjection(),o=this.mode_;return"LineString"===o||"Circle"===o?(this.finishCoordinate_=e.slice(),(r=this.sketchCoords_).length>=this.maxPoints_&&(this.freehand_?r.pop():t=!0),r.push(e.slice()),this.geometryFunction_(r,n,i)):"Polygon"===o&&((r=this.sketchCoords_[0]).length>=this.maxPoints_&&(this.freehand_?r.pop():t=!0),r.push(e.slice()),t&&(this.finishCoordinate_=r[0]),this.geometryFunction_(this.sketchCoords_,n,i)),this.createOrUpdateSketchPoint_(e.slice()),this.updateSketchFeatures_(),t?this.finishDrawing():this.sketchFeature_}},{key:"removeLastPoints_",value:function(e){if(this.sketchFeature_){for(var t=this.sketchFeature_.getGeometry(),r=this.getMap().getView().getProjection(),n=this.mode_,i=0;i<e;++i){var o,a,s=void 0;if("LineString"===n||"Circle"===n?((s=this.sketchCoords_).splice(-2,1),2<=s.length&&(this.finishCoordinate_=s[s.length-2].slice(),o=this.finishCoordinate_.slice(),s[s.length-1]=o,this.createOrUpdateSketchPoint_(o)),this.geometryFunction_(s,t,r),"Polygon"===t.getType()&&this.sketchLine_&&this.createOrUpdateCustomSketchLine_(t)):"Polygon"===n&&((s=this.sketchCoords_[0]).splice(-2,1),o=this.sketchLine_.getGeometry(),2<=s.length&&(a=s[s.length-2].slice(),s[s.length-1]=a,this.createOrUpdateSketchPoint_(a)),o.setCoordinates(s),this.geometryFunction_(this.sketchCoords_,t,r)),1===s.length){this.abortDrawing();break}}this.updateSketchFeatures_()}}},{key:"removeLastPoint",value:function(){this.removeLastPoints_(1)}},{key:"finishDrawing",value:function(){var e,t,r,n=this.abortDrawing_();return n?(e=this.sketchCoords_,t=n.getGeometry(),r=this.getMap().getView().getProjection(),"LineString"===this.mode_?(e.pop(),this.geometryFunction_(e,t,r)):"Polygon"===this.mode_&&(e[0].pop(),this.geometryFunction_(e,t,r),e=t.getCoordinates()),"MultiPoint"===this.type_?n.setGeometry(new U.default([e])):"MultiLineString"===this.type_?n.setGeometry(new v.default([e])):"MultiPolygon"===this.type_&&n.setGeometry(new b.default([e])),this.dispatchEvent(new S(J,n)),this.features_&&this.features_.push(n),this.source_&&this.source_.addFeature(n),n):null}},{key:"abortDrawing_",value:function(){this.finishCoordinate_=null;var e=this.sketchFeature_;return this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0),this.deactivateTrace_(),e}},{key:"abortDrawing",value:function(){var e=this.abortDrawing_();e&&this.dispatchEvent(new S(Z,e))}},{key:"appendCoordinates",value:function(e){var t,r=this.mode_,n=!this.sketchFeature_;if(n&&this.startDrawing_(e[0]),"LineString"===r||"Circle"===r)t=this.sketchCoords_;else{if("Polygon"!==r)return;t=this.sketchCoords_&&this.sketchCoords_.length?this.sketchCoords_[0]:[]}n&&t.shift(),t.pop();for(var i=0;i<e.length;i++)this.addToDrawing_(e[i]);r=e[e.length-1];this.sketchFeature_=this.addToDrawing_(r),this.modifyDrawing_(r)}},{key:"extend",value:function(e){var t=e.getGeometry(),e=(this.sketchFeature_=e,this.sketchCoords_=t.getCoordinates(),this.sketchCoords_[this.sketchCoords_.length-1]);this.finishCoordinate_=e.slice(),this.sketchCoords_.push(e.slice()),this.sketchPoint_=new n.default(new s.default(e)),this.updateSketchFeatures_(),this.dispatchEvent(new S(X,this.sketchFeature_))}},{key:"updateSketchFeatures_",value:function(){var e=[],t=(this.sketchFeature_&&e.push(this.sketchFeature_),this.sketchLine_&&e.push(this.sketchLine_),this.sketchPoint_&&e.push(this.sketchPoint_),this.overlay_.getSource());t.clear(!0),t.addFeatures(e)}},{key:"updateState_",value:function(){var e=this.getMap(),t=this.getActive();e&&t||this.abortDrawing(),this.overlay_.setMap(t?e:null)}}]);function R(e){E(this,R);var n,i,r,t=e,o=(t.stopDown||(t.stopDown=u.FALSE),(t=C(this,R,[t])).on,t.once,t.un,t.shouldHandle_=!1,t.downPx_=null,t.downTimeout_,t.lastDragTime_,t.pointerType_,t.freehand_=!1,t.source_=e.source||null,t.features_=e.features||null,t.snapTolerance_=e.snapTolerance||12,t.type_=e.type,t.mode_=function(e){switch(e){case"Point":case"MultiPoint":return"Point";case"LineString":case"MultiLineString":return"LineString";case"Polygon":case"MultiPolygon":return"Polygon";case"Circle":return"Circle";default:throw new Error("Invalid type: "+e)}}(t.type_),t.stopClick_=!!e.stopClick,t.minPoints_=e.minPoints||("Polygon"===t.mode_?3:2),t.maxPoints_="Circle"===t.mode_?2:e.maxPoints||1/0,t.finishCondition_=e.finishCondition||u.TRUE,t.geometryLayout_=e.geometryLayout||"XY",e.geometryFunction);return o||(o="Circle"===(i=t.mode_)?function(e,t,r){var t=t||new l.default([NaN,NaN]),n=(0,h.fromUserCoordinate)(e[0],r),e=(0,w.squaredDistance)(n,(0,h.fromUserCoordinate)(e[e.length-1],r)),n=(t.setCenterAndRadius(n,Math.sqrt(e),this.geometryLayout_),(0,h.getUserProjection)());return n&&t.transform(r,n),t}:("Point"===i?n=s.default:"LineString"===i?n=m.default:"Polygon"===i&&(n=_.default),function(e,t,r){return t?"Polygon"===i?e[0].length?t.setCoordinates([e[0].concat([e[0][0]])],this.geometryLayout_):t.setCoordinates([],this.geometryLayout_):t.setCoordinates(e,this.geometryLayout_):t=new n(e,this.geometryLayout_),t})),t.geometryFunction_=o,t.dragVertexDelay_=void 0!==e.dragVertexDelay?e.dragVertexDelay:500,t.finishCoordinate_=null,t.sketchFeature_=null,t.sketchPoint_=null,t.sketchCoords_=null,t.sketchLine_=null,t.sketchLineCoords_=null,t.squaredClickTolerance_=e.clickTolerance?e.clickTolerance*e.clickTolerance:36,t.overlay_=new q.default({source:new H.default({useSpatialIndex:!1,wrapX:!!e.wrapX&&e.wrapX}),style:e.style||(r=(0,W.createEditingStyle)(),function(e,t){return r[e.getGeometry().getType()]}),updateWhileInteracting:!0}),t.geometryName_=e.geometryName,t.condition_=e.condition||c.noModifierKeys,t.freehandCondition_,e.freehand?t.freehandCondition_=c.always:t.freehandCondition_=e.freehandCondition||c.shiftKeyOnly,t.traceCondition_,t.setTrace(e.trace||!1),t.traceState_={active:!1},t.traceSource_=e.traceSource||e.source||null,t.addChangeListener(N.default.ACTIVE,t.updateState_),t}t.default=e},{"../Feature.js":82,"../MapBrowserEvent.js":90,"../MapBrowserEventType.js":92,"../coordinate.js":128,"../events/Event.js":133,"../events/EventType.js":134,"../events/condition.js":138,"../extent.js":142,"../functions.js":200,"../geom/Circle.js":202,"../geom/GeometryCollection.js":204,"../geom/LineString.js":205,"../geom/MultiLineString.js":207,"../geom/MultiPoint.js":208,"../geom/MultiPolygon.js":209,"../geom/Point.js":210,"../geom/Polygon.js":211,"../geom/SimpleGeometry.js":212,"../layer/Vector.js":273,"../math.js":279,"../proj.js":283,"../source/Vector.js":367,"../style/Style.js":393,"./Pointer.js":254,"./Property.js":255}],245:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.ExtentEvent=void 0;var n=A(e("../events/Event.js")),o=A(e("../Feature.js")),a=A(e("../MapBrowserEventType.js")),s=A(e("../geom/Point.js")),u=A(e("./Pointer.js")),l=A(e("../layer/Vector.js")),c=A(e("../source/Vector.js")),f=e("../events/condition.js"),h=e("../extent.js"),p=e("../coordinate.js"),d=e("../style/Style.js"),g=e("../geom/Polygon.js"),y=e("../proj.js");function A(e){return e&&e.__esModule?e:{default:e}}function m(){return(m="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=C(e)););return e}(e,t);if(n)return(n=Object.getOwnPropertyDescriptor(n,t)).get?n.get.call(arguments.length<3?e:r):n.value}).apply(null,arguments)}function v(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function b(e,t,r){return t&&v(e.prototype,t),r&&v(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t,r){t=C(t);var n=e,t=E()?Reflect.construct(t,r||[],C(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(E=function(){return!!e})()}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function I(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&S(e,t)}function S(e,t){return(S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var j="extentchanged",x=r.ExtentEvent=(I(P,n.default),b(P)),e=(I(O,u.default),b(O,[{key:"snapToVertex_",value:function(e,t){var r=t.getCoordinateFromPixelInternal(e),n=this.getExtentInternal();if(n){var n=[[[n[0],n[1]],[n[0],n[3]]],[[n[0],n[3]],[n[2],n[3]]],[[n[2],n[3]],[n[2],n[1]]],[[n[2],n[1]],[n[0],n[1]]]],n=(n.sort(function(e,t){return(0,p.squaredDistanceToSegment)(r,e)-(0,p.squaredDistanceToSegment)(r,t)}),n[0]),i=(0,p.closestOnSegment)(r,n),o=t.getPixelFromCoordinateInternal(i);if((0,p.distance)(e,o)<=this.pixelTolerance_)return e=t.getPixelFromCoordinateInternal(n[0]),t=t.getPixelFromCoordinateInternal(n[1]),e=(0,p.squaredDistance)(o,e),o=(0,p.squaredDistance)(o,t),t=Math.sqrt(Math.min(e,o)),this.snappedToVertex_=t<=this.pixelTolerance_,this.snappedToVertex_?o<e?n[1]:n[0]:i}return null}},{key:"handlePointerMove_",value:function(e){var t=e.pixel,e=e.map,r=(r=this.snapToVertex_(t,e))||e.getCoordinateFromPixelInternal(t);this.createOrUpdatePointerFeature_(r)}},{key:"createOrUpdateExtentFeature_",value:function(e){var t=this.extentFeature_;return t?e?t.setGeometry((0,g.fromExtent)(e)):t.setGeometry(void 0):(t=e?new o.default((0,g.fromExtent)(e)):new o.default({}),this.extentFeature_=t,this.extentOverlay_.getSource().addFeature(t)),t}},{key:"createOrUpdatePointerFeature_",value:function(e){var t=this.vertexFeature_;return t?t.getGeometry().setCoordinates(e):(t=new o.default(new s.default(e)),this.vertexFeature_=t,this.vertexOverlay_.getSource().addFeature(t)),t}},{key:"handleEvent",value:function(e){return!e.originalEvent||!this.condition_(e)||(e.type!=a.default.POINTERMOVE||this.handlingDownUpSequence||this.handlePointerMove_(e),m(C(O.prototype),"handleEvent",this).call(this,e),!1)}},{key:"handleDownEvent",value:function(e){function t(e){var t=null,r=null;return e[0]==o[0]?t=o[2]:e[0]==o[2]&&(t=o[0]),e[1]==o[1]?r=o[3]:e[1]==o[3]&&(r=o[1]),null!==t&&null!==r?[t,r]:null}var r,n,i=e.pixel,e=e.map,o=this.getExtentInternal(),a=this.snapToVertex_(i,e);return a&&o?(r=a[0]==o[0]||a[0]==o[2]?a[0]:null,n=a[1]==o[1]||a[1]==o[3]?a[1]:null,null!==r&&null!==n?this.pointerHandler_=k(t(a)):null!==r?this.pointerHandler_=B(t([r,o[1]]),t([r,o[3]])):null!==n&&(this.pointerHandler_=B(t([o[0],n]),t([o[2],n])))):(a=e.getCoordinateFromPixelInternal(i),this.setExtent([a[0],a[1],a[0],a[1]]),this.pointerHandler_=k(a)),!0}},{key:"handleDragEvent",value:function(e){this.pointerHandler_&&(e=e.coordinate,this.setExtent(this.pointerHandler_(e)),this.createOrUpdatePointerFeature_(e))}},{key:"handleUpEvent",value:function(e){this.pointerHandler_=null;var t=this.getExtentInternal();return t&&0!==(0,h.getArea)(t)||this.setExtent(null),!1}},{key:"setMap",value:function(e){this.extentOverlay_.setMap(e),this.vertexOverlay_.setMap(e),m(C(O.prototype),"setMap",this).call(this,e)}},{key:"getExtent",value:function(){return(0,y.toUserExtent)(this.getExtentInternal(),this.getMap().getView().getProjection())}},{key:"getExtentInternal",value:function(){return this.extent_}},{key:"setExtent",value:function(e){this.extent_=e||null,this.createOrUpdateExtentFeature_(e),this.dispatchEvent(new x(this.extent_))}}]));function O(e){var t,r,n;return _(this,O),(t=w(this,O,[e=e||{}])).on,t.once,t.un,t.condition_=e.condition||f.always,t.extent_=null,t.pointerHandler_=null,t.pixelTolerance_=void 0!==e.pixelTolerance?e.pixelTolerance:10,t.snappedToVertex_=!1,t.extentFeature_=null,t.vertexFeature_=null,t.extentOverlay_=new l.default({source:new c.default({useSpatialIndex:!1,wrapX:!!(e=e||{}).wrapX}),style:e.boxStyle||(n=(0,d.createEditingStyle)(),function(e,t){return n.Polygon}),updateWhileAnimating:!0,updateWhileInteracting:!0}),t.vertexOverlay_=new l.default({source:new c.default({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.pointerStyle||(r=(0,d.createEditingStyle)(),function(e,t){return r.Point}),updateWhileAnimating:!0,updateWhileInteracting:!0}),e.extent&&t.setExtent(e.extent),t}function P(e){var t;return _(this,P),(t=w(this,P,[j])).extent=e,t}function k(t){return function(e){return(0,h.boundingExtent)([t,e])}}function B(t,r){return t[0]==r[0]?function(e){return(0,h.boundingExtent)([t,[e[0],r[1]]])}:t[1]==r[1]?function(e){return(0,h.boundingExtent)([t,[r[0],e[1]]])}:null}r.default=e},{"../Feature.js":82,"../MapBrowserEventType.js":92,"../coordinate.js":128,"../events/Event.js":133,"../events/condition.js":138,"../extent.js":142,"../geom/Point.js":210,"../geom/Polygon.js":211,"../layer/Vector.js":273,"../proj.js":283,"../source/Vector.js":367,"../style/Style.js":393,"./Pointer.js":254}],246:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,r.pan=function(e,t,r){var n=e.getCenterInternal();n&&(n=[n[0]+t[0],n[1]+t[1]],e.animateInternal({duration:void 0!==r?r:250,easing:s.linear,center:e.getConstrainedCenter(n)}))},r.zoomByDelta=function(e,t,r,n){var i=e.getZoom();void 0!==i&&(i=e.getConstrainedZoom(i+t),t=e.getResolutionForZoom(i),e.getAnimating()&&e.cancelAnimations(),e.animate({resolution:t,anchor:r,duration:void 0!==n?n:250,easing:s.easeOut}))};var o=n(e("../Object.js")),a=n(e("./Property.js")),s=e("../easing.js");function n(e){return e&&e.__esModule?e:{default:e}}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function l(e,t,r){t=f(t);var n=e,t=c()?Reflect.construct(t,r||[],f(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(c=function(){return!!e})()}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}e=function(){function r(e){var t;if(this instanceof r)return(t=l(this,r)).on,t.once,t.un,e&&e.handleEvent&&(t.handleEvent=e.handleEvent),t.map_=null,t.setActive(!0),t;throw new TypeError("Cannot call a class as a function")}var e,t=r,n=o.default;if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&h(t,n),t=r,(n=[{key:"getActive",value:function(){return this.get(a.default.ACTIVE)}},{key:"getMap",value:function(){return this.map_}},{key:"handleEvent",value:function(e){return!0}},{key:"setActive",value:function(e){this.set(a.default.ACTIVE,e)}},{key:"setMap",value:function(e){this.map_=e}}])&&u(t.prototype,n),e&&u(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();r.default=e},{"../Object.js":96,"../easing.js":131,"./Property.js":255}],247:[function(e,t,r){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=n(e("../events/EventType.js")),u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};t=f(t);if(t&&t.has(e))return t.get(e);var r,n={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in e){var o;"default"!==r&&{}.hasOwnProperty.call(e,r)&&((o=i?Object.getOwnPropertyDescriptor(e,r):null)&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=e[r])}return n.default=e,t&&t.set(e,n),n}(e("./Interaction.js")),l=n(e("../events/Key.js")),i=e("../events/condition.js"),c=e("../coordinate.js");function f(e){var t,r;return"function"!=typeof WeakMap?null:(t=new WeakMap,r=new WeakMap,(f=function(e){return e?r:t})(e))}function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=a(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==a(e)?e:e+""}(n.key),n)}}function h(e,t,r){t=d(t);var n=e,t=p()?Reflect.construct(t,r||[],d(e).constructor):t.apply(e,r);if(t&&("object"==a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(p=function(){return!!e})()}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){return(g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}e=function(){function r(e){var t;if(this instanceof r)return e=e||{},(t=h(this,r)).defaultCondition_=function(e){return(0,i.noModifierKeys)(e)&&(0,i.targetNotEditable)(e)},t.condition_=void 0!==e.condition?e.condition:t.defaultCondition_,t.duration_=void 0!==e.duration?e.duration:100,t.pixelDelta_=void 0!==e.pixelDelta?e.pixelDelta:128,t;throw new TypeError("Cannot call a class as a function")}var e,t=r,n=u.default;if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&g(t,n),t=r,(n=[{key:"handleEvent",value:function(e){var t,r,n,i,o,a=!1;return e.type==s.default.KEYDOWN&&(o=(t=e.originalEvent).key,!this.condition_(e)||o!=l.default.DOWN&&o!=l.default.LEFT&&o!=l.default.RIGHT&&o!=l.default.UP||(r=(e=e.map.getView()).getResolution()*this.pixelDelta_,i=n=0,o==l.default.DOWN?i=-r:o==l.default.LEFT?n=-r:o==l.default.RIGHT?n=r:i=r,(0,c.rotate)(o=[n,i],e.getRotation()),(0,u.pan)(e,o,this.duration_),t.preventDefault(),a=!0)),!a}}])&&o(t.prototype,n),e&&o(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();r.default=e},{"../coordinate.js":128,"../events/EventType.js":134,"../events/Key.js":135,"../events/condition.js":138,"./Interaction.js":246}],248:[function(e,t,r){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=(n=e("../events/EventType.js"))&&n.__esModule?n:{default:n},o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};t=u(t);if(t&&t.has(e))return t.get(e);var r,n={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in e){var o;"default"!==r&&{}.hasOwnProperty.call(e,r)&&((o=i?Object.getOwnPropertyDescriptor(e,r):null)&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=e[r])}return n.default=e,t&&t.set(e,n),n}(e("./Interaction.js")),s=e("../events/condition.js");function u(e){var t,r;return"function"!=typeof WeakMap?null:(t=new WeakMap,r=new WeakMap,(u=function(e){return e?r:t})(e))}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=a(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==a(e)?e:e+""}(n.key),n)}}function c(e,t,r){t=h(t);var n=e,t=f()?Reflect.construct(t,r||[],h(e).constructor):t.apply(e,r);if(t&&("object"==a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(f=function(){return!!e})()}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var n=function(){function r(e){var t;if(this instanceof r)return e=e||{},(t=c(this,r)).condition_=e.condition||function(e){return!(0,s.platformModifierKey)(e)&&(0,s.targetNotEditable)(e)},t.delta_=e.delta||1,t.duration_=void 0!==e.duration?e.duration:100,t;throw new TypeError("Cannot call a class as a function")}var e,t=r,n=o.default;if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&p(t,n),t=r,(n=[{key:"handleEvent",value:function(e){var t,r,n=!1;return e.type!=i.default.KEYDOWN&&e.type!=i.default.KEYPRESS||(r=(t=e.originalEvent).key,!this.condition_(e))||"+"!==r&&"-"!==r||(e=e.map,r="+"===r?this.delta_:-this.delta_,e=e.getView(),(0,o.zoomByDelta)(e,r,void 0,this.duration_),t.preventDefault(),n=!0),!n}}])&&l(t.prototype,n),e&&l(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();r.default=n},{"../events/EventType.js":134,"../events/condition.js":138,"./Interaction.js":246}],249:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=l(e("../events/EventType.js")),a=l(e("./Interaction.js")),s=l(e("../MapEventType.js")),u=e("../events.js"),n=e("../math.js");function l(e){return e&&e.__esModule?e:{default:e}}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function f(e,t,r){t=d(t);var n=e,t=h()?Reflect.construct(t,r||[],d(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(h=function(){return!!e})()}function p(){return(p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=d(e)););return e}(e,t);if(n)return(n=Object.getOwnPropertyDescriptor(n,t)).get?n.get.call(arguments.length<3?e:r):n.value}).apply(null,arguments)}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){return(g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function y(e){return parseFloat(e)}function A(e){return(0,n.toFixed)(e,5).toString()}function m(e,t){return!isNaN(e)&&e!==y(A(t))}e=function(){function n(e){var t,r;if(this instanceof n)return t=f(this,n),r=!0===(e=Object.assign({animate:!0,params:["x","y","z","r","l"],replace:!1,prefix:""},e||{})).animate?{duration:250}:e.animate||null,t.animationOptions_=r,t.params_=e.params.reduce(function(e,t){return e[t]=!0,e},{}),t.replace_=e.replace,t.prefix_=e.prefix,t.listenerKeys_=[],t.initial_=!0,t.updateState_=t.updateState_.bind(t),t.trackedCallbacks_={},t.trackedValues_={},t;throw new TypeError("Cannot call a class as a function")}var e,t=n,r=a.default;if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&g(t,r),t=n,(r=[{key:"getParamName_",value:function(e){return this.prefix_?this.prefix_+e:e}},{key:"get_",value:function(e,t){return e.get(this.getParamName_(t))}},{key:"set_",value:function(e,t,r){t in this.params_&&e.set(this.getParamName_(t),r)}},{key:"delete_",value:function(e,t){t in this.params_&&e.delete(this.getParamName_(t))}},{key:"setMap",value:function(e){var t=this.getMap();p(d(n.prototype),"setMap",this).call(this,e),e!==t&&(t&&this.unregisterListeners_(t),e)&&(this.initial_=!0,this.updateState_(),this.registerListeners_(e))}},{key:"registerListeners_",value:function(e){this.listenerKeys_.push((0,u.listen)(e,s.default.MOVEEND,this.updateUrl_,this),(0,u.listen)(e.getLayerGroup(),o.default.CHANGE,this.updateUrl_,this),(0,u.listen)(e,"change:layergroup",this.handleChangeLayerGroup_,this)),this.replace_||addEventListener("popstate",this.updateState_)}},{key:"unregisterListeners_",value:function(e){for(var t=0,r=this.listenerKeys_.length;t<r;++t)(0,u.unlistenByKey)(this.listenerKeys_[t]);this.listenerKeys_.length=0,this.replace_||removeEventListener("popstate",this.updateState_);var n=new URL(window.location.href),i=n.searchParams;this.delete_(i,"x"),this.delete_(i,"y"),this.delete_(i,"z"),this.delete_(i,"r"),this.delete_(i,"l"),window.history.replaceState(null,"",n)}},{key:"handleChangeLayerGroup_",value:function(){var e=this.getMap();e&&(this.unregisterListeners_(e),this.registerListeners_(e),this.initial_=!0,this.updateUrl_())}},{key:"updateState_",value:function(){var e,t=new URL(window.location.href).searchParams;for(e in this.trackedCallbacks_){var r=t.get(e);e in this.trackedCallbacks_&&r!==this.trackedValues_[e]&&(this.trackedValues_[e]=r,this.trackedCallbacks_[e](r))}var n,i,o=this.getMap();if(o){var a=o.getView();if(a){var s=!1,u={},l=y(this.get_(t,"z")),l=("z"in this.params_&&m(l,a.getZoom())&&(s=!0,u.zoom=l),y(this.get_(t,"r"))),l=("r"in this.params_&&m(l,a.getRotation())&&(s=!0,u.rotation=l),[y(this.get_(t,"x")),y(this.get_(t,"y"))]),c=(("x"in this.params_||"y"in this.params_)&&(n=l,i=a.getCenter(),m(n[0],i[0])||m(n[1],i[1]))&&(s=!0,u.center=l),s&&(!this.initial_&&this.animationOptions_?a.animate(Object.assign(u,this.animationOptions_)):(u.center&&a.setCenter(u.center),"zoom"in u&&a.setZoom(u.zoom),"rotation"in u&&a.setRotation(u.rotation))),o.getAllLayers()),f=this.get_(t,"l");if("l"in this.params_&&f&&f.length===c.length)for(var h=0,p=c.length;h<p;++h){var d,g=parseInt(f[h]);isNaN(g)||(g=Boolean(g),(d=c[h]).getVisible()!==g&&d.setVisible(g))}}}}},{key:"track",value:function(e,t){this.trackedCallbacks_[e]=t;t=new URL(window.location.href).searchParams.get(e);return this.trackedValues_[e]=t}},{key:"update",value:function(e,t){var r=new URL(window.location.href),n=r.searchParams;null===t?n.delete(e):n.set(e,t),e in this.trackedValues_&&(this.trackedValues_[e]=t),this.updateHistory_(r)}},{key:"updateUrl_",value:function(){var e=this.getMap();if(e){var t=e.getView();if(t){for(var r=t.getCenter(),n=t.getZoom(),t=t.getRotation(),i=e.getAllLayers(),o=new Array(i.length),a=0,s=i.length;a<s;++a)o[a]=i[a].getVisible()?"1":"0";var e=new URL(window.location.href),u=e.searchParams;this.set_(u,"x",A(r[0])),this.set_(u,"y",A(r[1])),this.set_(u,"z",A(n)),this.set_(u,"r",A(t)),this.set_(u,"l",o.join("")),this.updateHistory_(e),this.initial_=!1}}}},{key:"updateHistory_",value:function(e){e.href!==window.location.href&&(this.initial_||this.replace_?window.history.replaceState(history.state,"",e):window.history.pushState(null,"",e))}}])&&c(t.prototype,r),e&&c(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();r.default=e},{"../MapEventType.js":94,"../events.js":132,"../events/EventType.js":134,"../math.js":279,"./Interaction.js":246}],250:[function(e,D,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.ModifyEvent=void 0;var l=f(e("../Collection.js")),i=f(e("../CollectionEventType.js")),r=f(e("../events/Event.js")),n=f(e("../events/EventType.js")),m=f(e("../Feature.js")),o=f(e("../MapBrowserEventType.js")),v=f(e("../geom/Point.js")),a=f(e("./Pointer.js")),L=f(e("../structs/RBush.js")),s=f(e("../source/VectorEventType.js")),Q=f(e("../layer/Vector.js")),F=f(e("../source/Vector.js")),u=e("../events/condition.js"),b=e("../extent.js"),_=e("../coordinate.js"),N=e("../style/Style.js"),G=e("../array.js"),c=e("../geom/Polygon.js"),w=e("../proj.js"),E=e("../util.js");function f(e){return e&&e.__esModule?e:{default:e}}function C(e){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(){return(h="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=I(e)););return e}(e,t);if(n)return(n=Object.getOwnPropertyDescriptor(n,t)).get?n.get.call(arguments.length<3?e:r):n.value}).apply(null,arguments)}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=C(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=C(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==C(e)?e:e+""}(n.key),n)}}function d(e,t,r){return t&&p(e.prototype,t),r&&p(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t,r){t=I(t);var n=e,t=A()?Reflect.construct(t,r||[],I(e).constructor):t.apply(e,r);if(t&&("object"==C(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function A(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(A=function(){return!!e})()}function I(e){return(I=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&j(e,t)}function j(e,t){return(j=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var x=[0,0,0,0],O=[],U="modifystart",P="modifyend",k=t.ModifyEvent=(S(T,r.default),d(T)),e=(S(B,a.default),d(B,[{key:"addFeature_",value:function(e){var t=e.getGeometry(),r=(t&&(r=this.SEGMENT_WRITERS_[t.getType()])&&r(e,t),this.getMap());r&&r.isRendered()&&this.getActive()&&this.handlePointerAtPixel_(this.lastPixel_,r),e.addEventListener(n.default.CHANGE,this.boundHandleFeatureChange_)}},{key:"willModifyFeatures_",value:function(e,t){if(!this.featuresBeingModified_){this.featuresBeingModified_=new l.default;for(var r=this.featuresBeingModified_.getArray(),n=0,i=t.length;n<i;++n)for(var o=t[n],a=0,s=o.length;a<s;++a){var u=o[a].feature;u&&!r.includes(u)&&this.featuresBeingModified_.push(u)}0===this.featuresBeingModified_.getLength()?this.featuresBeingModified_=null:this.dispatchEvent(new k(U,this.featuresBeingModified_,e))}}},{key:"removeFeature_",value:function(e){this.removeFeatureSegmentData_(e),this.vertexFeature_&&0===this.features_.getLength()&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),e.removeEventListener(n.default.CHANGE,this.boundHandleFeatureChange_)}},{key:"removeFeatureSegmentData_",value:function(t){var e=this.rBush_,r=[];e.forEach(function(e){t===e.feature&&r.push(e)});for(var n=r.length-1;0<=n;--n){for(var i=r[n],o=this.dragSegments_.length-1;0<=o;--o)this.dragSegments_[o][0]===i&&this.dragSegments_.splice(o,1);e.remove(i)}}},{key:"setActive",value:function(e){this.vertexFeature_&&!e&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),h(I(B.prototype),"setActive",this).call(this,e)}},{key:"setMap",value:function(e){this.overlay_.setMap(e),h(I(B.prototype),"setMap",this).call(this,e)}},{key:"getOverlay",value:function(){return this.overlay_}},{key:"handleSourceAdd_",value:function(e){e.feature&&this.features_.push(e.feature)}},{key:"handleSourceRemove_",value:function(e){e.feature&&this.features_.remove(e.feature)}},{key:"handleFeatureAdd_",value:function(e){this.addFeature_(e.element)}},{key:"handleFeatureChange_",value:function(e){this.changingFeature_||(e=e.target,this.removeFeature_(e),this.addFeature_(e))}},{key:"handleFeatureRemove_",value:function(e){this.removeFeature_(e.element)}},{key:"writePointGeometry_",value:function(e,t){var r=t.getCoordinates(),e={feature:e,geometry:t,segment:[r,r]};this.rBush_.insert(t.getExtent(),e)}},{key:"writeMultiPointGeometry_",value:function(e,t){for(var r=t.getCoordinates(),n=0,i=r.length;n<i;++n){var o=r[n],o={feature:e,geometry:t,depth:[n],index:n,segment:[o,o]};this.rBush_.insert(t.getExtent(),o)}}},{key:"writeLineStringGeometry_",value:function(e,t){for(var r=t.getCoordinates(),n=0,i=r.length-1;n<i;++n){var o=r.slice(n,n+2),a={feature:e,geometry:t,index:n,segment:o};this.rBush_.insert((0,b.boundingExtent)(o),a)}}},{key:"writeMultiLineStringGeometry_",value:function(e,t){for(var r=t.getCoordinates(),n=0,i=r.length;n<i;++n)for(var o=r[n],a=0,s=o.length-1;a<s;++a){var u=o.slice(a,a+2),l={feature:e,geometry:t,depth:[n],index:a,segment:u};this.rBush_.insert((0,b.boundingExtent)(u),l)}}},{key:"writePolygonGeometry_",value:function(e,t){for(var r=t.getCoordinates(),n=0,i=r.length;n<i;++n)for(var o=r[n],a=0,s=o.length-1;a<s;++a){var u=o.slice(a,a+2),l={feature:e,geometry:t,depth:[n],index:a,segment:u};this.rBush_.insert((0,b.boundingExtent)(u),l)}}},{key:"writeMultiPolygonGeometry_",value:function(e,t){for(var r=t.getCoordinates(),n=0,i=r.length;n<i;++n)for(var o=r[n],a=0,s=o.length;a<s;++a)for(var u=o[a],l=0,c=u.length-1;l<c;++l){var f=u.slice(l,l+2),h={feature:e,geometry:t,depth:[a,n],index:l,segment:f};this.rBush_.insert((0,b.boundingExtent)(f),h)}}},{key:"writeCircleGeometry_",value:function(e,t){var r=t.getCenter(),n={feature:e,geometry:t,index:0,segment:[r,r]},e={feature:e,geometry:t,index:1,segment:[r,r]},i=[n,e],i=(n.featureSegments=i,e.featureSegments=i,this.rBush_.insert((0,b.createOrUpdateFromCoordinate)(r),n),t),r=(0,w.getUserProjection)();r&&this.getMap()&&(n=this.getMap().getView().getProjection(),i=i.clone().transform(r,n),i=(0,c.fromCircle)(i).transform(n,r)),this.rBush_.insert(i.getExtent(),e)}},{key:"writeGeometryCollectionGeometry_",value:function(e,t){for(var r=t.getGeometriesArray(),n=0;n<r.length;++n){var i=r[n];(0,this.SEGMENT_WRITERS_[i.getType()])(e,i)}}},{key:"createOrUpdateVertexFeature_",value:function(e,t,r){var n=this.vertexFeature_;return n?n.getGeometry().setCoordinates(e):(n=new m.default(new v.default(e)),this.vertexFeature_=n,this.overlay_.getSource().addFeature(n)),n.set("features",t),n.set("geometries",r),n}},{key:"handleEvent",value:function(e){return!e.originalEvent||((this.lastPointerEvent_=e).map.getView().getInteracting()||e.type!=o.default.POINTERMOVE||this.handlingDownUpSequence||this.handlePointerMove_(e),this.vertexFeature_&&this.deleteCondition_(e)&&(t=!(e.type!=o.default.SINGLECLICK||!this.ignoreNextSingleClick_)||this.removePoint()),e.type==o.default.SINGLECLICK&&(this.ignoreNextSingleClick_=!1),h(I(B.prototype),"handleEvent",this).call(this,e)&&!t);var t}},{key:"handleDragEvent",value:function(e){this.ignoreNextSingleClick_=!1,this.willModifyFeatures_(e,this.dragSegments_);for(var t=[e.coordinate[0]+this.delta_[0],e.coordinate[1]+this.delta_[1]],r=[],n=[],i=0,o=this.dragSegments_.length;i<o;++i){var a=this.dragSegments_[i],s=a[0],u=s.feature,l=(r.includes(u)||r.push(u),s.geometry);n.includes(l)||n.push(l);for(var c,f,h,p,d=s.depth,g=void 0,y=s.segment,A=a[1];t.length<l.getStride();)t.push(y[A][t.length]);switch(l.getType()){case"Point":y[0]=g=t,y[1]=t;break;case"MultiPoint":(g=l.getCoordinates())[s.index]=t,y[0]=t,y[1]=t;break;case"LineString":(g=l.getCoordinates())[s.index+A]=t,y[A]=t;break;case"MultiLineString":case"Polygon":(g=l.getCoordinates())[d[0]][s.index+A]=t,y[A]=t;break;case"MultiPolygon":(g=l.getCoordinates())[d[1]][d[0]][s.index+A]=t,y[A]=t;break;case"Circle":y[0]=t,y[1]=t,0===s.index?(this.changingFeature_=!0,l.setCenter(t)):(this.changingFeature_=!0,c=e.map.getView().getProjection(),f=(0,_.distance)((0,w.fromUserCoordinate)(l.getCenter(),c),(0,w.fromUserCoordinate)(t,c)),(h=(0,w.getUserProjection)())&&((p=l.clone().transform(h,c)).setRadius(f),f=p.transform(c,h).getRadius()),l.setRadius(f)),this.changingFeature_=!1}g&&this.setGeometryCoordinates_(l,g)}this.createOrUpdateVertexFeature_(t,r,n)}},{key:"handleDownEvent",value:function(e){if(!this.condition_(e))return!1;var t=e.coordinate,r=(this.handlePointerAtPixel_(e.pixel,e.map,t),this.dragSegments_.length=0,this.featuresBeingModified_=null,this.vertexFeature_);if(r){var n=e.map.getView().getProjection(),i=[],o=r.getGeometry().getCoordinates(),r=(0,b.boundingExtent)([o]),a=this.rBush_.getInExtent(r),s={};a.sort(z);for(var u=0,l=a.length;u<l;++u){var c=a[u],f=c.segment,h=(0,E.getUid)(c.geometry),p=c.depth;if(p&&(h+="-"+p.join("-")),s[h]||(s[h]=new Array(2)),"Circle"!==c.geometry.getType()||1!==c.index)if(!(0,_.equals)(f[0],o)||s[h][0])if(!(0,_.equals)(f[1],o)||s[h][1])(0,E.getUid)(f)in this.vertexSegments_&&!s[h][0]&&!s[h][1]&&this.insertVertexCondition_(e)&&i.push(c);else{if(s[h][0]&&0===s[h][0].index){var d=c.geometry.getCoordinates();switch(c.geometry.getType()){case"LineString":case"MultiLineString":continue;case"MultiPolygon":d=d[p[1]];case"Polygon":if(c.index!==d[p[0]].length-2)continue}}this.dragSegments_.push([c,1]),s[h][1]=c}else this.dragSegments_.push([c,0]),s[h][0]=c;else{f=R(t,c,n);(0,_.equals)(f,o)&&!s[h][0]&&(this.dragSegments_.push([c,0]),s[h][0]=c)}}i.length&&this.willModifyFeatures_(e,[i]);for(var g=i.length-1;0<=g;--g)this.insertVertex_(i[g],o)}return!!this.vertexFeature_}},{key:"handleUpEvent",value:function(e){for(var t=this.dragSegments_.length-1;0<=t;--t){var r,n,i,o=this.dragSegments_[t][0],a=o.geometry;"Circle"===a.getType()?(i=a.getCenter(),n=o.featureSegments[0],r=o.featureSegments[1],n.segment[0]=i,n.segment[1]=i,r.segment[0]=i,r.segment[1]=i,this.rBush_.update((0,b.createOrUpdateFromCoordinate)(i),n),i=a,(n=(0,w.getUserProjection)())&&(a=e.map.getView().getProjection(),i=i.clone().transform(n,a),i=(0,c.fromCircle)(i).transform(a,n)),this.rBush_.update(i.getExtent(),r)):this.rBush_.update((0,b.boundingExtent)(o.segment),o)}return this.featuresBeingModified_&&(this.dispatchEvent(new k(P,this.featuresBeingModified_,e)),this.featuresBeingModified_=null),!1}},{key:"handlePointerMove_",value:function(e){this.lastPixel_=e.pixel,this.handlePointerAtPixel_(e.pixel,e.map,e.coordinate)}},{key:"handlePointerAtPixel_",value:function(e,t,r){var n,i,o=this,a=r||t.getCoordinateFromPixel(e),s=t.getView().getProjection();if(this.hitDetection_&&(r="object"===C(this.hitDetection_)?function(e){return e===o.hitDetection_}:void 0,t.forEachFeatureAtPixel(e,function(e,t,r){var r=(r=r&&"Point"===r.getType()?new v.default((0,w.toUserCoordinate)(r.getCoordinates(),s)):r)||e.getGeometry();return e instanceof m.default&&o.features_.getArray().includes(e)&&(n=r,r=e.getGeometry().getFlatCoordinates().slice(0,2),i=[{feature:e,geometry:n,segment:[r,r]}]),!0},{layerFilter:r})),i||(r=(0,w.fromUserExtent)((0,b.createOrUpdateFromCoordinate)(a,x),s),u=t.getView().getResolution()*this.pixelTolerance_,r=(0,w.toUserExtent)((0,b.buffer)(r,u,x),s),i=this.rBush_.getInExtent(r)),i&&0<i.length){var u=i.sort(function(e,t){return M(a,e,s)-M(a,t,s)})[0],l=u.segment,r=R(a,u,s),c=t.getPixelFromCoordinate(r),e=(0,_.distance)(e,c);if(n||e<=this.pixelTolerance_){var f={};if(f[(0,E.getUid)(l)]=!0,this.snapToPointer_||(this.delta_[0]=r[0]-a[0],this.delta_[1]=r[1]-a[1]),"Circle"===u.geometry.getType()&&1===u.index)this.snappedToVertex_=!0,this.createOrUpdateVertexFeature_(r,[u.feature],[u.geometry]);else{var h=t.getPixelFromCoordinate(l[0]),t=t.getPixelFromCoordinate(l[1]),h=(0,_.squaredDistance)(c,h),c=(0,_.squaredDistance)(c,t),e=Math.sqrt(Math.min(h,c)),p=(this.snappedToVertex_=e<=this.pixelTolerance_,this.snappedToVertex_&&(r=c<h?l[1]:l[0]),this.createOrUpdateVertexFeature_(r,[u.feature],[u.geometry]),{});p[(0,E.getUid)(u.geometry)]=!0;for(var d=1,g=i.length;d<g;++d){var y=i[d].segment;if(!((0,_.equals)(l[0],y[0])&&(0,_.equals)(l[1],y[1])||(0,_.equals)(l[0],y[1])&&(0,_.equals)(l[1],y[0])))break;var A=(0,E.getUid)(i[d].geometry);A in p||(p[A]=!0,f[(0,E.getUid)(y)]=!0)}}return void(this.vertexSegments_=f)}}this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null)}},{key:"insertVertex_",value:function(e,t){for(var r,n=e.segment,i=e.feature,o=e.geometry,a=e.depth,s=e.index;t.length<o.getStride();)t.push(0);switch(o.getType()){case"MultiLineString":case"Polygon":(r=o.getCoordinates())[a[0]].splice(s+1,0,t);break;case"MultiPolygon":(r=o.getCoordinates())[a[1]][a[0]].splice(s+1,0,t);break;case"LineString":(r=o.getCoordinates()).splice(s+1,0,t);break;default:return}this.setGeometryCoordinates_(o,r);var u=this.rBush_,e=(u.remove(e),this.updateSegmentIndices_(o,s,a,1),{segment:[n[0],t],feature:i,geometry:o,depth:a,index:s}),e=(u.insert((0,b.boundingExtent)(e.segment),e),this.dragSegments_.push([e,1]),{segment:[t,n[1]],feature:i,geometry:o,depth:a,index:s+1});u.insert((0,b.boundingExtent)(e.segment),e),this.dragSegments_.push([e,0]),this.ignoreNextSingleClick_=!0}},{key:"removePoint",value:function(){var e,t;return!(!this.lastPointerEvent_||this.lastPointerEvent_.type==o.default.POINTERDRAG)&&(e=this.lastPointerEvent_,this.willModifyFeatures_(e,this.dragSegments_),t=this.removeVertex_(),this.featuresBeingModified_&&this.dispatchEvent(new k(P,this.featuresBeingModified_,e)),this.featuresBeingModified_=null,t)}},{key:"removeVertex_",value:function(){for(var e,t,r,n,i,o,a,s,u,l,c,f=this.dragSegments_,h={},p=!1,d=f.length-1;0<=d;--d)s=(r=f[d])[0],u=(0,E.getUid)(s.feature),s.depth&&(u+="-"+s.depth.join("-")),u in h||(h[u]={}),0===r[1]?(h[u].right=s,h[u].index=s.index):1==r[1]&&(h[u].left=s,h[u].index=s.index+1);for(u in h){switch(a=h[u].right,c=h[u].left,(o=(i=h[u].index)-1)<0&&(o=0),e=t=(n=(s=void 0!==c?c:a).geometry).getCoordinates(),p=!1,n.getType()){case"MultiLineString":2<t[s.depth[0]].length&&(t[s.depth[0]].splice(i,1),p=!0);break;case"LineString":2<t.length&&(t.splice(i,1),p=!0);break;case"MultiPolygon":e=e[s.depth[1]];case"Polygon":4<(e=e[s.depth[0]]).length&&(i==e.length-1&&(i=0),e.splice(i,1),p=!0,0===i)&&(e.pop(),e.push(e[0]),o=e.length-1)}p&&(this.setGeometryCoordinates_(n,t),l=[],void 0!==c&&(this.rBush_.remove(c),l.push(c.segment[0])),void 0!==a&&(this.rBush_.remove(a),l.push(a.segment[1])),void 0!==c&&void 0!==a&&(c={depth:s.depth,feature:s.feature,geometry:s.geometry,index:o,segment:l},this.rBush_.insert((0,b.boundingExtent)(c.segment),c)),this.updateSegmentIndices_(n,i,s.depth,-1),this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),f.length=0)}return p}},{key:"setGeometryCoordinates_",value:function(e,t){this.changingFeature_=!0,e.setCoordinates(t),this.changingFeature_=!1}},{key:"updateSegmentIndices_",value:function(t,r,n,i){this.rBush_.forEachInExtent(t.getExtent(),function(e){e.geometry===t&&(void 0===n||void 0===e.depth||(0,G.equals)(e.depth,n))&&e.index>r&&(e.index+=i)})}}]));function B(e){var t,r,n;if(g(this,B),(t=y(this,B,[e])).on,t.once,t.un,t.boundHandleFeatureChange_=t.handleFeatureChange_.bind(t),t.condition_=e.condition||u.primaryAction,t.defaultDeleteCondition_=function(e){return(0,u.altKeyOnly)(e)&&(0,u.singleClick)(e)},t.deleteCondition_=e.deleteCondition||t.defaultDeleteCondition_,t.insertVertexCondition_=e.insertVertexCondition||u.always,t.vertexFeature_=null,t.vertexSegments_=null,t.lastPixel_=[0,0],t.ignoreNextSingleClick_=!1,t.featuresBeingModified_=null,t.rBush_=new L.default,t.pixelTolerance_=void 0!==e.pixelTolerance?e.pixelTolerance:10,t.snappedToVertex_=!1,t.changingFeature_=!1,t.dragSegments_=[],t.overlay_=new Q.default({source:new F.default({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.style||(n=(0,N.createEditingStyle)(),function(e,t){return n.Point}),updateWhileAnimating:!0,updateWhileInteracting:!0}),t.SEGMENT_WRITERS_={Point:t.writePointGeometry_.bind(t),LineString:t.writeLineStringGeometry_.bind(t),LinearRing:t.writeLineStringGeometry_.bind(t),Polygon:t.writePolygonGeometry_.bind(t),MultiPoint:t.writeMultiPointGeometry_.bind(t),MultiLineString:t.writeMultiLineStringGeometry_.bind(t),MultiPolygon:t.writeMultiPolygonGeometry_.bind(t),Circle:t.writeCircleGeometry_.bind(t),GeometryCollection:t.writeGeometryCollectionGeometry_.bind(t)},t.source_=null,t.hitDetection_=null,e.features?r=e.features:e.source&&(t.source_=e.source,r=new l.default(t.source_.getFeatures()),t.source_.addEventListener(s.default.ADDFEATURE,t.handleSourceAdd_.bind(t)),t.source_.addEventListener(s.default.REMOVEFEATURE,t.handleSourceRemove_.bind(t))),r)return e.hitDetection&&(t.hitDetection_=e.hitDetection),t.features_=r,t.features_.forEach(t.addFeature_.bind(t)),t.features_.addEventListener(i.default.ADD,t.handleFeatureAdd_.bind(t)),t.features_.addEventListener(i.default.REMOVE,t.handleFeatureRemove_.bind(t)),t.lastPointerEvent_=null,t.delta_=[0,0],t.snapToPointer_=void 0===e.snapToPointer?!t.hitDetection_:e.snapToPointer,t;throw new Error("The modify interaction requires features, a source or a layer")}function T(e,t,r){return g(this,T),(e=y(this,T,[e])).features=t,e.mapBrowserEvent=r,e}function z(e,t){return e.index-t.index}function M(e,t,r){var n=t.geometry;if("Circle"===n.getType()){var i;if(1===t.index)return(i=(0,w.getUserProjection)())&&(n=n.clone().transform(i,r)),i=(0,_.squaredDistance)(n.getCenter(),(0,w.fromUserCoordinate)(e,r)),(i=Math.sqrt(i)-n.getRadius())*i}n=(0,w.fromUserCoordinate)(e,r);return O[0]=(0,w.fromUserCoordinate)(t.segment[0],r),O[1]=(0,w.fromUserCoordinate)(t.segment[1],r),(0,_.squaredDistanceToSegment)(n,O)}function R(e,t,r){var n,i=t.geometry;return"Circle"===i.getType()&&1===t.index?(i=i,(n=(0,w.getUserProjection)())&&(i=i.clone().transform(n,r)),(0,w.toUserCoordinate)(i.getClosestPoint((0,w.fromUserCoordinate)(e,r)),r)):(n=(0,w.fromUserCoordinate)(e,r),O[0]=(0,w.fromUserCoordinate)(t.segment[0],r),O[1]=(0,w.fromUserCoordinate)(t.segment[1],r),(0,w.toUserCoordinate)((0,_.closestOnSegment)(n,O),r))}t.default=e},{"../Collection.js":78,"../CollectionEventType.js":79,"../Feature.js":82,"../MapBrowserEventType.js":92,"../array.js":110,"../coordinate.js":128,"../events/Event.js":133,"../events/EventType.js":134,"../events/condition.js":138,"../extent.js":142,"../geom/Point.js":210,"../geom/Polygon.js":211,"../layer/Vector.js":273,"../proj.js":283,"../source/Vector.js":367,"../source/VectorEventType.js":368,"../structs/RBush.js":383,"../style/Style.js":393,"../util.js":404,"./Pointer.js":254}],251:[function(e,t,r){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=(n=e("../events/EventType.js"))&&n.__esModule?n:{default:n},i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};t=c(t);if(t&&t.has(e))return t.get(e);var r,n={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in e){var o;"default"!==r&&{}.hasOwnProperty.call(e,r)&&((o=i?Object.getOwnPropertyDescriptor(e,r):null)&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=e[r])}return n.default=e,t&&t.set(e,n),n}(e("./Interaction.js")),s=e("../has.js"),u=e("../events/condition.js"),l=e("../math.js");function c(e){var t,r;return"function"!=typeof WeakMap?null:(t=new WeakMap,r=new WeakMap,(c=function(e){return e?r:t})(e))}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=a(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==a(e)?e:e+""}(n.key),n)}}function h(e,t,r){t=d(t);var n=e,t=p()?Reflect.construct(t,r||[],d(e).constructor):t.apply(e,r);if(t&&("object"==a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(p=function(){return!!e})()}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){return(g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var n=function(){function n(e){var t;if(!(this instanceof n))throw new TypeError("Cannot call a class as a function");(t=h(this,n,[e=e||{}])).totalDelta_=0,t.lastDelta_=0,t.maxDelta_=void 0!==e.maxDelta?e.maxDelta:1,t.duration_=void 0!==e.duration?e.duration:250,t.timeout_=void 0!==e.timeout?e.timeout:80,t.useAnchor_=void 0===e.useAnchor||e.useAnchor,t.constrainResolution_=void 0!==e.constrainResolution&&e.constrainResolution;var r=e.condition||u.always;return t.condition_=e.onFocusOnly?(0,u.all)(u.focusWithTabindex,r):r,t.lastAnchor_=null,t.startTime_=void 0,t.timeoutId_,t.mode_=void 0,t.trackpadEventGap_=400,t.trackpadTimeoutId_,t.deltaPerZoom_=300,t}var e,t=n,r=i.default;if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&g(t,r),t=n,(r=[{key:"endInteraction_",value:function(){this.trackpadTimeoutId_=void 0;var e=this.getMap();e&&e.getView().endInteraction(void 0,this.lastDelta_?0<this.lastDelta_?1:-1:0,this.lastAnchor_)}},{key:"handleEvent",value:function(e){var t,r,n,i;return!this.condition_(e)||e.type!==o.default.WHEEL||(r=e.map,(n=e.originalEvent).preventDefault(),this.useAnchor_&&(this.lastAnchor_=e.coordinate),e.type==o.default.WHEEL&&(t=n.deltaY,s.FIREFOX&&n.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(t/=s.DEVICE_PIXEL_RATIO),n.deltaMode===WheelEvent.DOM_DELTA_LINE)&&(t*=40),0!==t&&(this.lastDelta_=t,e=Date.now(),void 0===this.startTime_&&(this.startTime_=e),(!this.mode_||e-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(t)<4?"trackpad":"wheel"),n=r.getView(),"trackpad"!==this.mode_||n.getConstrainResolution()||this.constrainResolution_?(this.totalDelta_+=t,i=Math.max(this.timeout_-(e-this.startTime_),0),clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,r),i)):(this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(n.getAnimating()&&n.cancelAnimations(),n.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),n.adjustZoom(-t/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=e)),!1)}},{key:"handleWheelZoom_",value:function(e){var e=e.getView(),t=(e.getAnimating()&&e.cancelAnimations(),-(0,l.clamp)(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_);(e.getConstrainResolution()||this.constrainResolution_)&&(t=t?0<t?1:-1:0),(0,i.zoomByDelta)(e,t,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}},{key:"setMouseAnchor",value:function(e){(this.useAnchor_=e)||(this.lastAnchor_=null)}}])&&f(t.prototype,r),e&&f(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();r.default=n},{"../events/EventType.js":134,"../events/condition.js":138,"../has.js":233,"../math.js":279,"./Interaction.js":246}],252:[function(e,t,r){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};t=u(t);if(t&&t.has(e))return t.get(e);var r,n={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in e){var o;"default"!==r&&{}.hasOwnProperty.call(e,r)&&((o=i?Object.getOwnPropertyDescriptor(e,r):null)&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=e[r])}return n.default=e,t&&t.set(e,n),n}(e("./Pointer.js")),o=e("../functions.js"),s=e("../rotationconstraint.js");function u(e){var t,r;return"function"!=typeof WeakMap?null:(t=new WeakMap,r=new WeakMap,(u=function(e){return e?r:t})(e))}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=a(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==a(e)?e:e+""}(n.key),n)}}function c(e,t,r){t=h(t);var n=e,t=f()?Reflect.construct(t,r||[],h(e).constructor):t.apply(e,r);if(t&&("object"==a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(f=function(){return!!e})()}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}e=function(){function r(e){var t;if(this instanceof r)return(t=e=e||{}).stopDown||(t.stopDown=o.FALSE),(t=c(this,r,[t])).anchor_=null,t.lastAngle_=void 0,t.rotating_=!1,t.rotationDelta_=0,t.threshold_=void 0!==e.threshold?e.threshold:.3,t.duration_=void 0!==e.duration?e.duration:250,t;throw new TypeError("Cannot call a class as a function")}var e,t=r,n=i.default;if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&p(t,n),t=r,(n=[{key:"handleDragEvent",value:function(e){var t=0,r=this.targetPointers[0],n=this.targetPointers[1],n=Math.atan2(n.clientY-r.clientY,n.clientX-r.clientX),r=(void 0!==this.lastAngle_&&(r=n-this.lastAngle_,this.rotationDelta_+=r,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),t=r),this.lastAngle_=n,e.map),n=r.getView();n.getConstraints().rotation!==s.disable&&(this.anchor_=r.getCoordinateFromPixelInternal(r.getEventPixel((0,i.centroid)(this.targetPointers))),this.rotating_)&&(r.render(),n.adjustRotationInternal(t,this.anchor_))}},{key:"handleUpEvent",value:function(e){return!(this.targetPointers.length<2&&(e.map.getView().endInteraction(this.duration_),1))}},{key:"handleDownEvent",value:function(e){return 2<=this.targetPointers.length&&(e=e.map,this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||e.getView().beginInteraction(),!0)}}])&&l(t.prototype,n),e&&l(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();r.default=e},{"../functions.js":200,"../rotationconstraint.js":336,"./Pointer.js":254}],253:[function(e,t,r){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};t=s(t);if(t&&t.has(e))return t.get(e);var r,n={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in e){var o;"default"!==r&&{}.hasOwnProperty.call(e,r)&&((o=i?Object.getOwnPropertyDescriptor(e,r):null)&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=e[r])}return n.default=e,t&&t.set(e,n),n}(e("./Pointer.js")),i=e("../functions.js");function s(e){var t,r;return"function"!=typeof WeakMap?null:(t=new WeakMap,r=new WeakMap,(s=function(e){return e?r:t})(e))}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=a(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==a(e)?e:e+""}(n.key),n)}}function l(e,t,r){t=f(t);var n=e,t=c()?Reflect.construct(t,r||[],f(e).constructor):t.apply(e,r);if(t&&("object"==a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(c=function(){return!!e})()}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}e=function(){function r(e){var t;if(this instanceof r)return(t=e=e||{}).stopDown||(t.stopDown=i.FALSE),(t=l(this,r,[t])).anchor_=null,t.duration_=void 0!==e.duration?e.duration:400,t.lastDistance_=void 0,t.lastScaleDelta_=1,t;throw new TypeError("Cannot call a class as a function")}var e,t=r,n=o.default;if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&h(t,n),t=r,(n=[{key:"handleDragEvent",value:function(e){var t=1,r=this.targetPointers[0],n=this.targetPointers[1],i=r.clientX-n.clientX,r=r.clientY-n.clientY,n=Math.sqrt(i*i+r*r),i=(void 0!==this.lastDistance_&&(t=this.lastDistance_/n),this.lastDistance_=n,e.map),r=i.getView();1!=t&&(this.lastScaleDelta_=t),this.anchor_=i.getCoordinateFromPixelInternal(i.getEventPixel((0,o.centroid)(this.targetPointers))),i.render(),r.adjustResolutionInternal(t,this.anchor_)}},{key:"handleUpEvent",value:function(e){var t;return!(this.targetPointers.length<2&&(e=e.map.getView(),t=1<this.lastScaleDelta_?1:-1,e.endInteraction(this.duration_,t),1))}},{key:"handleDownEvent",value:function(e){return 2<=this.targetPointers.length&&(e=e.map,this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||e.getView().beginInteraction(),!0)}}])&&u(t.prototype,n),e&&u(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();r.default=e},{"../functions.js":200,"./Pointer.js":254}],254:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.centroid=function(e){for(var t=e.length,r=0,n=0,i=0;i<t;i++)r+=e[i].clientX,n+=e[i].clientY;return{clientX:r/t,clientY:n/t}},r.default=void 0;var o=n(e("./Interaction.js")),a=n(e("../MapBrowserEventType.js"));function n(e){return e&&e.__esModule?e:{default:e}}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function u(e,t,r){t=c(t);var n=e,t=l()?Reflect.construct(t,r||[],c(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(l=function(){return!!e})()}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}e=function(){function r(e){var t;if(this instanceof r)return t=u(this,r,[e=e||{}]),e.handleDownEvent&&(t.handleDownEvent=e.handleDownEvent),e.handleDragEvent&&(t.handleDragEvent=e.handleDragEvent),e.handleMoveEvent&&(t.handleMoveEvent=e.handleMoveEvent),e.handleUpEvent&&(t.handleUpEvent=e.handleUpEvent),e.stopDown&&(t.stopDown=e.stopDown),t.handlingDownUpSequence=!1,t.targetPointers=[],t;throw new TypeError("Cannot call a class as a function")}var e,t=r,n=o.default;if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&f(t,n),t=r,(n=[{key:"getPointerCount",value:function(){return this.targetPointers.length}},{key:"handleDownEvent",value:function(e){return!1}},{key:"handleDragEvent",value:function(e){}},{key:"handleEvent",value:function(e){var t,r;return!e.originalEvent||(t=!1,this.updateTrackedPointers_(e),this.handlingDownUpSequence?e.type==a.default.POINTERDRAG?(this.handleDragEvent(e),e.originalEvent.preventDefault()):e.type==a.default.POINTERUP&&(r=this.handleUpEvent(e),this.handlingDownUpSequence=r&&0<this.targetPointers.length):e.type==a.default.POINTERDOWN?(r=this.handleDownEvent(e),this.handlingDownUpSequence=r,t=this.stopDown(r)):e.type==a.default.POINTERMOVE&&this.handleMoveEvent(e),!t)}},{key:"handleMoveEvent",value:function(e){}},{key:"handleUpEvent",value:function(e){return!1}},{key:"stopDown",value:function(e){return e}},{key:"updateTrackedPointers_",value:function(e){e.activePointers&&(this.targetPointers=e.activePointers)}}])&&s(t.prototype,n),e&&s(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();r.default=e},{"../MapBrowserEventType.js":92,"./Interaction.js":246}],255:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;r.default={ACTIVE:"active"}},{}],256:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.SelectEvent=void 0;var o=y(e("../Collection.js")),n=y(e("../CollectionEventType.js")),a=y(e("../events/Event.js")),d=y(e("../Feature.js")),s=y(e("./Interaction.js")),u=y(e("../layer/Vector.js")),l=e("../functions.js"),g=e("../obj.js"),c=e("../style/Style.js"),f=e("../array.js"),h=e("../util.js"),p=e("../events/condition.js");function y(e){return e&&e.__esModule?e:{default:e}}function A(){return(A="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=E(e)););return e}(e,t);if(n)return(n=Object.getOwnPropertyDescriptor(n,t)).get?n.get.call(arguments.length<3?e:r):n.value}).apply(null,arguments)}function m(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function v(e,t,r){return t&&m(e.prototype,t),r&&m(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t,r){t=E(t);var n=e,t=w()?Reflect.construct(t,r||[],E(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(w=function(){return!!e})()}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function C(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&I(e,t)}function I(e,t){return(I=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var S="select",j=r.SelectEvent=(C(P,a.default),v(P)),x={},e=(C(O,s.default),v(O,[{key:"addFeatureLayerAssociation_",value:function(e,t){this.featureLayerAssociation_[(0,h.getUid)(e)]=t}},{key:"getFeatures",value:function(){return this.features_}},{key:"getHitTolerance",value:function(){return this.hitTolerance_}},{key:"getLayer",value:function(e){return this.featureLayerAssociation_[(0,h.getUid)(e)]}},{key:"setHitTolerance",value:function(e){this.hitTolerance_=e}},{key:"setMap",value:function(e){this.getMap()&&this.style_&&this.features_.forEach(this.restorePreviousStyle_.bind(this)),A(E(O.prototype),"setMap",this).call(this,e),e?(this.features_.addEventListener(n.default.ADD,this.boundAddFeature_),this.features_.addEventListener(n.default.REMOVE,this.boundRemoveFeature_),this.style_&&this.features_.forEach(this.applySelectedStyle_.bind(this))):(this.features_.removeEventListener(n.default.ADD,this.boundAddFeature_),this.features_.removeEventListener(n.default.REMOVE,this.boundRemoveFeature_))}},{key:"addFeature_",value:function(e){var t=e.element;this.style_&&this.applySelectedStyle_(t),this.getLayer(t)||(e=this.getMap().getAllLayers().find(function(e){if(e instanceof u.default&&e.getSource()&&e.getSource().hasFeature(t))return e}))&&this.addFeatureLayerAssociation_(t,e)}},{key:"removeFeature_",value:function(e){this.style_&&this.restorePreviousStyle_(e.element)}},{key:"getStyle",value:function(){return this.style_}},{key:"applySelectedStyle_",value:function(e){var t=(0,h.getUid)(e);t in x||(x[t]=e.getStyle()),e.setStyle(this.style_)}},{key:"restorePreviousStyle_",value:function(e){for(var t=this.getMap().getInteractions().getArray(),r=t.length-1;0<=r;--r){var n=t[r];if(n!==this&&n instanceof O&&n.getStyle()&&-1!==n.getFeatures().getArray().lastIndexOf(e))return void e.setStyle(n.getStyle())}var i=(0,h.getUid)(e);e.setStyle(x[i]),delete x[i]}},{key:"removeFeatureLayerAssociation_",value:function(e){delete this.featureLayerAssociation_[(0,h.getUid)(e)]}},{key:"handleEvent",value:function(e){var r=this;if(this.condition_(e)){var n=this.addCondition_(e),i=this.removeCondition_(e),o=this.toggleCondition_(e),t=!n&&!i&&!o,a=e.map,s=this.getFeatures(),u=[],l=[];if(t){(0,g.clear)(this.featureLayerAssociation_),a.forEachFeatureAtPixel(e.pixel,function(e,t){if(e instanceof d.default&&r.filter_(e,t))return r.addFeatureLayerAssociation_(e,t),l.push(e),!r.multi_},{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(var c=s.getLength()-1;0<=c;--c){var f=s.item(c),h=l.indexOf(f);-1<h?l.splice(h,1):(s.remove(f),u.push(f))}0!==l.length&&s.extend(l)}else{a.forEachFeatureAtPixel(e.pixel,function(e,t){if(e instanceof d.default&&r.filter_(e,t))return!n&&!o||s.getArray().includes(e)?(i||o)&&s.getArray().includes(e)&&(u.push(e),r.removeFeatureLayerAssociation_(e)):(r.addFeatureLayerAssociation_(e,t),l.push(e)),!r.multi_},{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(var p=u.length-1;0<=p;--p)s.remove(u[p]);s.extend(l)}(0<l.length||0<u.length)&&this.dispatchEvent(new j(S,l,u,e))}return!0}}]));function O(e){var t,r,n;return b(this,O),(t=_(this,O)).on,t.once,t.un,e=e||{},t.boundAddFeature_=t.addFeature_.bind(t),t.boundRemoveFeature_=t.removeFeature_.bind(t),t.condition_=e.condition||p.singleClick,t.addCondition_=e.addCondition||p.never,t.removeCondition_=e.removeCondition||p.never,t.toggleCondition_=e.toggleCondition||p.shiftKeyOnly,t.multi_=!!e.multi&&e.multi,t.filter_=e.filter||l.TRUE,t.hitTolerance_=e.hitTolerance||0,t.style_=void 0!==e.style?e.style:(n=(0,c.createEditingStyle)(),(0,f.extend)(n.Polygon,n.LineString),(0,f.extend)(n.GeometryCollection,n.LineString),function(e){return e.getGeometry()?n[e.getGeometry().getType()]:null}),t.features_=e.features||new o.default,e=e.layers?"function"==typeof e.layers?e.layers:(r=e.layers,function(e){return r.includes(e)}):l.TRUE,t.layerFilter_=e,t.featureLayerAssociation_={},t}function P(e,t,r,n){return b(this,P),(e=_(this,P,[e])).selected=t,e.deselected=r,e.mapBrowserEvent=n,e}r.default=e},{"../Collection.js":78,"../CollectionEventType.js":79,"../Feature.js":82,"../array.js":110,"../events/Event.js":133,"../events/condition.js":138,"../functions.js":200,"../layer/Vector.js":273,"../obj.js":281,"../style/Style.js":393,"../util.js":404,"./Interaction.js":246}],257:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=o(e("../CollectionEventType.js")),s=o(e("../events/EventType.js")),n=o(e("./Pointer.js")),u=o(e("../structs/RBush.js")),l=o(e("../source/VectorEventType.js")),c=e("../functions.js"),f=e("../events/SnapEvent.js"),b=e("../extent.js"),_=e("../coordinate.js"),h=e("../geom/Polygon.js"),w=e("../proj.js"),p=e("../util.js"),d=e("../events.js");function o(e){return e&&e.__esModule?e:{default:e}}function E(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o,a,s=[],u=!0,l=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=o.call(r)).done)&&(s.push(n.value),s.length!==t);u=!0);}catch(e){l=!0,i=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}(e,t)||function(e,t){{var r;if(e)return"string"==typeof e?g(e,t):"Map"===(r="Object"===(r={}.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?g(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function y(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function A(e,t,r){t=C(t);var n=e,t=m()?Reflect.construct(t,r||[],C(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(m=function(){return!!e})()}function v(){return(v="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=C(e)););return e}(e,t);if(n)return(n=Object.getOwnPropertyDescriptor(n,t)).get?n.get.call(arguments.length<3?e:r):n.value}).apply(null,arguments)}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function I(e,t){return(I=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function S(e){return e.feature||e.element||null}var j=[],e=function(){function o(e){var t;if(this instanceof o)return(t=e=e||{}).handleDownEvent||(t.handleDownEvent=c.TRUE),t.stopDown||(t.stopDown=c.FALSE),(t=A(this,o,[t])).on,t.once,t.un,t.source_=e.source||null,t.vertex_=void 0===e.vertex||e.vertex,t.edge_=void 0===e.edge||e.edge,t.features_=e.features||null,t.featuresListenerKeys_=[],t.featureChangeListenerKeys_={},t.indexedFeaturesExtents_={},t.pendingFeatures_={},t.pixelTolerance_=void 0!==e.pixelTolerance?e.pixelTolerance:10,t.rBush_=new u.default,t.GEOMETRY_SEGMENTERS_={Point:t.segmentPointGeometry_.bind(t),LineString:t.segmentLineStringGeometry_.bind(t),LinearRing:t.segmentLineStringGeometry_.bind(t),Polygon:t.segmentPolygonGeometry_.bind(t),MultiPoint:t.segmentMultiPointGeometry_.bind(t),MultiLineString:t.segmentMultiLineStringGeometry_.bind(t),MultiPolygon:t.segmentMultiPolygonGeometry_.bind(t),GeometryCollection:t.segmentGeometryCollectionGeometry_.bind(t),Circle:t.segmentCircleGeometry_.bind(t)},t;throw new TypeError("Cannot call a class as a function")}var e,t=o,r=n.default;if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&I(t,r),t=o,(r=[{key:"addFeature",value:function(t,e){e=void 0===e||e;var r,n=(0,p.getUid)(t),i=t.getGeometry();i&&(r=this.GEOMETRY_SEGMENTERS_[i.getType()])&&(this.indexedFeaturesExtents_[n]=i.getExtent((0,b.createEmpty)()),r(r=[],i),1===r.length?this.rBush_.insert((0,b.boundingExtent)(r[0]),{feature:t,segment:r[0]}):1<r.length&&(i=r.map(function(e){return(0,b.boundingExtent)(e)}),r=r.map(function(e){return{feature:t,segment:e}}),this.rBush_.load(i,r))),e&&(this.featureChangeListenerKeys_[n]=(0,d.listen)(t,s.default.CHANGE,this.handleFeatureChange_,this))}},{key:"getFeatures_",value:function(){var e;return this.features_?e=this.features_:this.source_&&(e=this.source_.getFeatures()),e}},{key:"handleEvent",value:function(e){var t=this.snapTo(e.pixel,e.coordinate,e.map);return t&&(e.coordinate=t.vertex.slice(0,2),e.pixel=t.vertexPixel,this.dispatchEvent(new f.SnapEvent(f.SnapEventType.SNAP,{vertex:e.coordinate,vertexPixel:e.pixel,feature:t.feature,segment:t.segment}))),v(C(o.prototype),"handleEvent",this).call(this,e)}},{key:"handleFeatureAdd_",value:function(e){e=S(e);e&&this.addFeature(e)}},{key:"handleFeatureRemove_",value:function(e){e=S(e);e&&this.removeFeature(e)}},{key:"handleFeatureChange_",value:function(e){var t,e=e.target;this.handlingDownUpSequence?(t=(0,p.getUid)(e))in this.pendingFeatures_||(this.pendingFeatures_[t]=e):this.updateFeature_(e)}},{key:"handleUpEvent",value:function(e){var t=Object.values(this.pendingFeatures_);return t.length&&(t.forEach(this.updateFeature_.bind(this)),this.pendingFeatures_={}),!1}},{key:"removeFeature",value:function(t,e){var e=void 0===e||e,r=(0,p.getUid)(t),n=this.indexedFeaturesExtents_[r];if(n){var i=this.rBush_,o=[];i.forEachInExtent(n,function(e){t===e.feature&&o.push(e)});for(var a=o.length-1;0<=a;--a)i.remove(o[a])}e&&((0,d.unlistenByKey)(this.featureChangeListenerKeys_[r]),delete this.featureChangeListenerKeys_[r])}},{key:"setMap",value:function(e){var t=this,r=this.getMap(),n=this.featuresListenerKeys_,i=this.getFeatures_();r&&(n.forEach(d.unlistenByKey),n.length=0,this.rBush_.clear(),Object.values(this.featureChangeListenerKeys_).forEach(d.unlistenByKey),this.featureChangeListenerKeys_={}),v(C(o.prototype),"setMap",this).call(this,e),e&&(this.features_?n.push((0,d.listen)(this.features_,a.default.ADD,this.handleFeatureAdd_,this),(0,d.listen)(this.features_,a.default.REMOVE,this.handleFeatureRemove_,this)):this.source_&&n.push((0,d.listen)(this.source_,l.default.ADDFEATURE,this.handleFeatureAdd_,this),(0,d.listen)(this.source_,l.default.REMOVEFEATURE,this.handleFeatureRemove_,this)),i.forEach(function(e){return t.addFeature(e)}))}},{key:"snapTo",value:function(t,e,r){var n,i=r.getView().getProjection(),o=(0,w.fromUserCoordinate)(e,i),e=(0,w.toUserExtent)((0,b.buffer)((0,b.boundingExtent)([o]),r.getView().getResolution()*this.pixelTolerance_),i),a=this.rBush_.getInExtent(e),s=a.length;if(0!==s){var u,l=1/0,c=null,f=this.pixelTolerance_*this.pixelTolerance_,e=function(){if(n){var e=r.getPixelFromCoordinate(n);if((0,_.squaredDistance)(t,e)<=f)return{vertex:n,vertexPixel:[Math.round(e[0]),Math.round(e[1])],feature:u,segment:c}}return null};if(this.vertex_){for(var h=0;h<s;++h)!function(){var r=a[h];"Circle"!==r.feature.getGeometry().getType()&&r.segment.forEach(function(e){var t=(0,w.fromUserCoordinate)(e,i),t=(0,_.squaredDistance)(o,t);t<l&&(n=e,l=t,u=r.feature)})}();var p=e();if(p)return p}if(this.edge_){for(var d=0;d<s;++d){var g,y,A,m=null,v=a[d];"Circle"===v.feature.getGeometry().getType()?(y=v.feature.getGeometry(),(g=(0,w.getUserProjection)())&&(y=y.clone().transform(g,i)),m=(0,_.closestOnCircle)(o,y)):(y=(g=E(v.segment,2))[0],(A=g[1])&&(j[0]=(0,w.fromUserCoordinate)(y,i),j[1]=(0,w.fromUserCoordinate)(A,i),m=(0,_.closestOnSegment)(o,j))),m&&(A=(0,_.squaredDistance)(o,m))<l&&(n=(0,w.toUserCoordinate)(m,i),c="Circle"===v.feature.getGeometry().getType()?null:v.segment,l=A,u=v.feature)}p=e();if(p)return p}}return null}},{key:"updateFeature_",value:function(e){this.removeFeature(e,!1),this.addFeature(e,!1)}},{key:"segmentCircleGeometry_",value:function(e,t){var r=this.getMap().getView().getProjection(),n=(0,w.getUserProjection)(),t=(n&&(t=t.clone().transform(n,r)),(0,h.fromCircle)(t));n&&t.transform(r,n);for(var i=t.getCoordinates()[0],o=0,a=i.length-1;o<a;++o)e.push(i.slice(o,o+2))}},{key:"segmentGeometryCollectionGeometry_",value:function(e,t){for(var r=t.getGeometriesArray(),n=0;n<r.length;++n){var i=this.GEOMETRY_SEGMENTERS_[r[n].getType()];i&&i(e,r[n])}}},{key:"segmentLineStringGeometry_",value:function(e,t){for(var r=t.getCoordinates(),n=0,i=r.length-1;n<i;++n)e.push(r.slice(n,n+2))}},{key:"segmentMultiLineStringGeometry_",value:function(e,t){for(var r=t.getCoordinates(),n=0,i=r.length;n<i;++n)for(var o=r[n],a=0,s=o.length-1;a<s;++a)e.push(o.slice(a,a+2))}},{key:"segmentMultiPointGeometry_",value:function(t,e){e.getCoordinates().forEach(function(e){t.push([e])})}},{key:"segmentMultiPolygonGeometry_",value:function(e,t){for(var r=t.getCoordinates(),n=0,i=r.length;n<i;++n)for(var o=r[n],a=0,s=o.length;a<s;++a)for(var u=o[a],l=0,c=u.length-1;l<c;++l)e.push(u.slice(l,l+2))}},{key:"segmentPointGeometry_",value:function(e,t){e.push([t.getCoordinates()])}},{key:"segmentPolygonGeometry_",value:function(e,t){for(var r=t.getCoordinates(),n=0,i=r.length;n<i;++n)for(var o=r[n],a=0,s=o.length-1;a<s;++a)e.push(o.slice(a,a+2))}}])&&y(t.prototype,r),e&&y(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();r.default=e},{"../CollectionEventType.js":79,"../coordinate.js":128,"../events.js":132,"../events/EventType.js":134,"../events/SnapEvent.js":136,"../extent.js":142,"../functions.js":200,"../geom/Polygon.js":211,"../proj.js":283,"../source/VectorEventType.js":368,"../structs/RBush.js":383,"../util.js":404,"./Pointer.js":254}],258:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.TranslateEvent=void 0;var u=h(e("../Collection.js")),n=h(e("../events/Event.js")),o=h(e("../Feature.js")),a=h(e("./Property.js")),s=h(e("./Pointer.js")),l=e("../functions.js"),c=e("../events/condition.js"),f=e("../proj.js");function h(e){return e&&e.__esModule?e:{default:e}}function p(){return(p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=v(e)););return e}(e,t);if(n)return(n=Object.getOwnPropertyDescriptor(n,t)).get?n.get.call(arguments.length<3?e:r):n.value}).apply(null,arguments)}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function g(e,t,r){return t&&d(e.prototype,t),r&&d(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function A(e,t,r){t=v(t);var n=e,t=m()?Reflect.construct(t,r||[],v(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(m=function(){return!!e})()}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_(e,t)}function _(e,t){return(_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var w="translatestart",E="translating",C="translateend",I=r.TranslateEvent=(b(j,n.default),g(j)),e=(b(S,s.default),g(S,[{key:"handleDownEvent",value:function(e){var t;return!(!e.originalEvent||!this.condition_(e)||(this.lastFeature_=this.featuresAtPixel_(e.pixel,e.map),this.lastCoordinate_)||!this.lastFeature_||(this.startCoordinate_=e.coordinate,this.lastCoordinate_=e.coordinate,this.handleMoveEvent(e),t=this.features_||new u.default([this.lastFeature_]),this.dispatchEvent(new I(w,t,e.coordinate,this.startCoordinate_,e)),0))}},{key:"handleUpEvent",value:function(e){var t;return!(!this.lastCoordinate_||(this.lastCoordinate_=null,this.handleMoveEvent(e),t=this.features_||new u.default([this.lastFeature_]),this.dispatchEvent(new I(C,t,e.coordinate,this.startCoordinate_,e)),this.startCoordinate_=null))}},{key:"handleDragEvent",value:function(e){var t,r,n,i,o,a,s;this.lastCoordinate_&&(t=e.coordinate,r=e.map.getView().getProjection(),a=(0,f.fromUserCoordinate)(t,r),n=(0,f.fromUserCoordinate)(this.lastCoordinate_,r),i=a[0]-n[0],o=a[1]-n[1],a=this.features_||new u.default([this.lastFeature_]),s=(0,f.getUserProjection)(),a.forEach(function(e){var t=e.getGeometry();s?(t.transform(s,r),t.translate(i,o),t.transform(r,s)):t.translate(i,o),e.setGeometry(t)}),this.lastCoordinate_=t,this.dispatchEvent(new I(E,a,t,this.startCoordinate_,e)))}},{key:"handleMoveEvent",value:function(e){var t=e.map.getViewport();this.featuresAtPixel_(e.pixel,e.map)?(t.classList.remove(this.lastCoordinate_?"ol-grab":"ol-grabbing"),t.classList.add(this.lastCoordinate_?"ol-grabbing":"ol-grab")):t.classList.remove("ol-grab","ol-grabbing")}},{key:"featuresAtPixel_",value:function(e,t){var r=this;return t.forEachFeatureAtPixel(e,function(e,t){if(e instanceof o.default&&r.filter_(e,t)&&(!r.features_||r.features_.getArray().includes(e)))return e},{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_})}},{key:"getHitTolerance",value:function(){return this.hitTolerance_}},{key:"setHitTolerance",value:function(e){this.hitTolerance_=e}},{key:"setMap",value:function(e){var t=this.getMap();p(v(S.prototype),"setMap",this).call(this,e),this.updateState_(t)}},{key:"handleActiveChanged_",value:function(){this.updateState_(null)}},{key:"updateState_",value:function(e){var t=this.getMap(),r=this.getActive();t&&r||(t=t||e)&&t.getViewport().classList.remove("ol-grab","ol-grabbing")}}]));r.default=e;function S(e){var t,r,n;return y(this,S),(t=A(this,S,[e=e||{}])).on,t.once,t.un,t.lastCoordinate_=null,t.startCoordinate_=null,t.features_=void 0!==e.features?e.features:null,n=e.layers&&!t.features_?"function"==typeof e.layers?e.layers:(r=e.layers,function(e){return r.includes(e)}):l.TRUE,t.layerFilter_=n,t.filter_=e.filter&&!t.features_?e.filter:l.TRUE,t.hitTolerance_=e.hitTolerance||0,t.condition_=e.condition||c.always,t.lastFeature_=null,t.addChangeListener(a.default.ACTIVE,t.handleActiveChanged_),t}function j(e,t,r,n,i){return y(this,j),(e=A(this,j,[e])).features=t,e.coordinate=r,e.startCoordinate=n,e.mapBrowserEvent=i,e}},{"../Collection.js":78,"../Feature.js":82,"../events/Event.js":133,"../events/condition.js":138,"../functions.js":200,"../proj.js":283,"./Pointer.js":254,"./Property.js":255}],259:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.defaults=function(e){e=e||{};var t=new n.default,r=new c.default(-.005,.05,100);return void 0!==e.altShiftDragRotate&&!e.altShiftDragRotate||t.push(new a.default),void 0!==e.doubleClickZoom&&!e.doubleClickZoom||t.push(new i.default({delta:e.zoomDelta,duration:e.zoomDuration})),void 0!==e.dragPan&&!e.dragPan||t.push(new o.default({onFocusOnly:e.onFocusOnly,kinetic:r})),void 0!==e.pinchRotate&&!e.pinchRotate||t.push(new h.default),void 0!==e.pinchZoom&&!e.pinchZoom||t.push(new p.default({duration:e.zoomDuration})),void 0!==e.keyboard&&!e.keyboard||(t.push(new u.default),t.push(new l.default({delta:e.zoomDelta,duration:e.zoomDuration}))),void 0!==e.mouseWheelZoom&&!e.mouseWheelZoom||t.push(new f.default({onFocusOnly:e.onFocusOnly,duration:e.zoomDuration})),void 0!==e.shiftDragZoom&&!e.shiftDragZoom||t.push(new s.default({duration:e.zoomDuration})),t};var n=d(e("../Collection.js")),i=d(e("./DoubleClickZoom.js")),o=d(e("./DragPan.js")),a=d(e("./DragRotate.js")),s=d(e("./DragZoom.js")),u=d(e("./KeyboardPan.js")),l=d(e("./KeyboardZoom.js")),c=d(e("../Kinetic.js")),f=d(e("./MouseWheelZoom.js")),h=d(e("./PinchRotate.js")),p=d(e("./PinchZoom.js"));function d(e){return e&&e.__esModule?e:{default:e}}},{"../Collection.js":78,"../Kinetic.js":88,"./DoubleClickZoom.js":237,"./DragPan.js":240,"./DragRotate.js":241,"./DragZoom.js":243,"./KeyboardPan.js":247,"./KeyboardZoom.js":248,"./MouseWheelZoom.js":251,"./PinchRotate.js":252,"./PinchZoom.js":253}],260:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"Graticule",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(r,"Group",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(r,"Heatmap",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(r,"Image",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(r,"Layer",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(r,"Tile",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(r,"Vector",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(r,"VectorImage",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(r,"VectorTile",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(r,"WebGLPoints",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(r,"WebGLTile",{enumerable:!0,get:function(){return p.default}});var n=d(e("./layer/Graticule.js")),i=d(e("./layer/Group.js")),o=d(e("./layer/Heatmap.js")),a=d(e("./layer/Image.js")),s=d(e("./layer/Layer.js")),u=d(e("./layer/Tile.js")),l=d(e("./layer/Vector.js")),c=d(e("./layer/VectorImage.js")),f=d(e("./layer/VectorTile.js")),h=d(e("./layer/WebGLPoints.js")),p=d(e("./layer/WebGLTile.js"));function d(e){return e&&e.__esModule?e:{default:e}}},{"./layer/Graticule.js":265,"./layer/Group.js":266,"./layer/Heatmap.js":267,"./layer/Image.js":268,"./layer/Layer.js":269,"./layer/Tile.js":271,"./layer/Vector.js":273,"./layer/VectorImage.js":274,"./layer/VectorTile.js":275,"./layer/WebGLPoints.js":276,"./layer/WebGLTile.js":277}],261:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("../Object.js")),o=n(e("./Property.js")),a=e("../util.js"),s=e("../asserts.js"),u=e("../math.js");function n(e){return e&&e.__esModule?e:{default:e}}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=l(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=l(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==l(e)?e:e+""}(n.key),n)}}function f(e,t,r){t=d(t);var n=e,t=h()?Reflect.construct(t,r||[],d(e).constructor):t.apply(e,r);if(t&&("object"==l(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(h=function(){return!!e})()}function p(){return(p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=d(e)););return e}(e,t);if(n)return(n=Object.getOwnPropertyDescriptor(n,t)).get?n.get.call(arguments.length<3?e:r):n.value}).apply(null,arguments)}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){return(g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}e=function(){function n(e){var t;if(!(this instanceof n))throw new TypeError("Cannot call a class as a function");(t=f(this,n)).on,t.once,t.un,t.background_=e.background;var r=Object.assign({},e);return"object"===l(e.properties)&&(delete r.properties,Object.assign(r,e.properties)),r[o.default.OPACITY]=void 0!==e.opacity?e.opacity:1,(0,s.assert)("number"==typeof r[o.default.OPACITY],"Layer opacity must be a number"),r[o.default.VISIBLE]=void 0===e.visible||e.visible,r[o.default.Z_INDEX]=e.zIndex,r[o.default.MAX_RESOLUTION]=void 0!==e.maxResolution?e.maxResolution:1/0,r[o.default.MIN_RESOLUTION]=void 0!==e.minResolution?e.minResolution:0,r[o.default.MIN_ZOOM]=void 0!==e.minZoom?e.minZoom:-1/0,r[o.default.MAX_ZOOM]=void 0!==e.maxZoom?e.maxZoom:1/0,t.className_=void 0!==r.className?r.className:"ol-layer",delete r.className,t.setProperties(r),t.state_=null,t}var e,t=n,r=i.default;if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&g(t,r),t=n,(r=[{key:"getBackground",value:function(){return this.background_}},{key:"getClassName",value:function(){return this.className_}},{key:"getLayerState",value:function(e){var e=this.state_||{layer:this,managed:void 0===e||e},t=this.getZIndex();return e.opacity=(0,u.clamp)(Math.round(100*this.getOpacity())/100,0,1),e.visible=this.getVisible(),e.extent=this.getExtent(),e.zIndex=void 0!==t||e.managed?t:1/0,e.maxResolution=this.getMaxResolution(),e.minResolution=Math.max(this.getMinResolution(),0),e.minZoom=this.getMinZoom(),e.maxZoom=this.getMaxZoom(),this.state_=e}},{key:"getLayersArray",value:function(e){return(0,a.abstract)()}},{key:"getLayerStatesArray",value:function(e){return(0,a.abstract)()}},{key:"getExtent",value:function(){return this.get(o.default.EXTENT)}},{key:"getMaxResolution",value:function(){return this.get(o.default.MAX_RESOLUTION)}},{key:"getMinResolution",value:function(){return this.get(o.default.MIN_RESOLUTION)}},{key:"getMinZoom",value:function(){return this.get(o.default.MIN_ZOOM)}},{key:"getMaxZoom",value:function(){return this.get(o.default.MAX_ZOOM)}},{key:"getOpacity",value:function(){return this.get(o.default.OPACITY)}},{key:"getSourceState",value:function(){return(0,a.abstract)()}},{key:"getVisible",value:function(){return this.get(o.default.VISIBLE)}},{key:"getZIndex",value:function(){return this.get(o.default.Z_INDEX)}},{key:"setBackground",value:function(e){this.background_=e,this.changed()}},{key:"setExtent",value:function(e){this.set(o.default.EXTENT,e)}},{key:"setMaxResolution",value:function(e){this.set(o.default.MAX_RESOLUTION,e)}},{key:"setMinResolution",value:function(e){this.set(o.default.MIN_RESOLUTION,e)}},{key:"setMaxZoom",value:function(e){this.set(o.default.MAX_ZOOM,e)}},{key:"setMinZoom",value:function(e){this.set(o.default.MIN_ZOOM,e)}},{key:"setOpacity",value:function(e){(0,s.assert)("number"==typeof e,"Layer opacity must be a number"),this.set(o.default.OPACITY,e)}},{key:"setVisible",value:function(e){this.set(o.default.VISIBLE,e)}},{key:"setZIndex",value:function(e){this.set(o.default.Z_INDEX,e)}},{key:"disposeInternal",value:function(){this.state_&&(this.state_.layer=null,this.state_=null),p(d(n.prototype),"disposeInternal",this).call(this)}}])&&c(t.prototype,r),e&&c(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();r.default=e},{"../Object.js":96,"../asserts.js":111,"../math.js":279,"../util.js":404,"./Property.js":270}],262:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=(e=e("./Layer.js"))&&e.__esModule?e:{default:e};function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function s(e,t,r){t=l(t);var n=e,t=u()?Reflect.construct(t,r||[],l(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(u=function(){return!!e})()}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}e=function(){function t(e){if(this instanceof t)return s(this,t,[e=e||{}]);throw new TypeError("Cannot call a class as a function")}var e,r,n=t,i=o.default;if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function");return n.prototype=Object.create(i&&i.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),i&&c(n,i),n=t,e&&a(n.prototype,e),r&&a(n,r),Object.defineProperty(n,"prototype",{writable:!1}),n}();r.default=e},{"./Layer.js":269}],263:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("./Layer.js")),a=n(e("./TileProperty.js"));function n(e){return e&&e.__esModule?e:{default:e}}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function u(e,t,r){t=f(t);var n=e,t=l()?Reflect.construct(t,r||[],f(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(l=function(){return!!e})()}function c(){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=f(e)););return e}(e,t);if(n)return(n=Object.getOwnPropertyDescriptor(n,t)).get?n.get.call(arguments.length<3?e:r):n.value}).apply(null,arguments)}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}e=function(){function r(e){if(!(this instanceof r))throw new TypeError("Cannot call a class as a function");e=e||{};var t=Object.assign({},e);return delete t.preload,delete t.useInterimTilesOnError,(t=u(this,r,[t])).on,t.once,t.un,t.setPreload(void 0!==e.preload?e.preload:0),t.setUseInterimTilesOnError(void 0===e.useInterimTilesOnError||e.useInterimTilesOnError),t}var e,t=r,n=o.default;if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&h(t,n),t=r,(n=[{key:"getPreload",value:function(){return this.get(a.default.PRELOAD)}},{key:"setPreload",value:function(e){this.set(a.default.PRELOAD,e)}},{key:"getUseInterimTilesOnError",value:function(){return this.get(a.default.USE_INTERIM_TILES_ON_ERROR)}},{key:"setUseInterimTilesOnError",value:function(e){this.set(a.default.USE_INTERIM_TILES_ON_ERROR,e)}},{key:"getData",value:function(e){return c(f(r.prototype),"getData",this).call(this,e)}}])&&s(t.prototype,n),e&&s(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();r.default=e},{"./Layer.js":269,"./TileProperty.js":272}],264:[function(e,t,r){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("./Layer.js")),o=n(e("rbush")),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};t=s(t);if(t&&t.has(e))return t.get(e);var r,n={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in e){var o;"default"!==r&&{}.hasOwnProperty.call(e,r)&&((o=i?Object.getOwnPropertyDescriptor(e,r):null)&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=e[r])}return n.default=e,t&&t.set(e,n),n}(e("../style/Style.js")),c=e("../render/canvas/style.js");function s(e){var t,r;return"function"!=typeof WeakMap?null:(t=new WeakMap,r=new WeakMap,(s=function(e){return e?r:t})(e))}function n(e){return e&&e.__esModule?e:{default:e}}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=a(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==a(e)?e:e+""}(n.key),n)}}function f(e,t,r){t=d(t);var n=e,t=h()?Reflect.construct(t,r||[],d(e).constructor):t.apply(e,r);if(t&&("object"==a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(h=function(){return!!e})()}function p(){return(p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=d(e)););return e}(e,t);if(n)return(n=Object.getOwnPropertyDescriptor(n,t)).get?n.get.call(arguments.length<3?e:r):n.value}).apply(null,arguments)}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){return(g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var y="renderOrder",e=function(){function r(e){if(!(this instanceof r))throw new TypeError("Cannot call a class as a function");e=e||{};var t=Object.assign({},e);return delete t.style,delete t.renderBuffer,delete t.updateWhileAnimating,delete t.updateWhileInteracting,(t=f(this,r,[t])).declutter_=e.declutter?String(e.declutter):void 0,t.renderBuffer_=void 0!==e.renderBuffer?e.renderBuffer:100,t.style_=null,t.styleFunction_=void 0,t.setStyle(e.style),t.updateWhileAnimating_=void 0!==e.updateWhileAnimating&&e.updateWhileAnimating,t.updateWhileInteracting_=void 0!==e.updateWhileInteracting&&e.updateWhileInteracting,t}var e,t=r,n=i.default;if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&g(t,n),t=r,(n=[{key:"getDeclutter",value:function(){return this.declutter_}},{key:"getFeatures",value:function(e){return p(d(r.prototype),"getFeatures",this).call(this,e)}},{key:"getRenderBuffer",value:function(){return this.renderBuffer_}},{key:"getRenderOrder",value:function(){return this.get(y)}},{key:"getStyle",value:function(){return this.style_}},{key:"getStyleFunction",value:function(){return this.styleFunction_}},{key:"getUpdateWhileAnimating",value:function(){return this.updateWhileAnimating_}},{key:"getUpdateWhileInteracting",value:function(){return this.updateWhileInteracting_}},{key:"renderDeclutter",value:function(e,t){var r=this.getDeclutter();r in e.declutter==0&&(e.declutter[r]=new o.default(9)),this.getRenderer().renderDeclutter(e,t)}},{key:"setRenderOrder",value:function(e){this.set(y,e)}},{key:"setStyle",value:function(e){this.style_=void 0===e?l.createDefaultStyle:e;var t=function(e){if(void 0===e)return l.createDefaultStyle;if(!e)return null;if("function"==typeof e)return e;if(e instanceof l.default)return e;if(!Array.isArray(e))return(0,c.flatStylesToStyleFunction)([e]);if(0===e.length)return[];var t=e.length,r=e[0];if(r instanceof l.default){for(var n=new Array(t),i=0;i<t;++i){var o=e[i];if(!(o instanceof l.default))throw new Error("Expected a list of style instances");n[i]=o}return n}if("style"in r){for(var a=new Array(t),s=0;s<t;++s){var u=e[s];if(!("style"in u))throw new Error("Expected a list of rules with a style property");a[s]=u}return(0,c.rulesToStyleFunction)(a)}return(0,c.flatStylesToStyleFunction)(e)}(e);this.styleFunction_=null===e?void 0:(0,l.toFunction)(t),this.changed()}}])&&u(t.prototype,n),e&&u(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();r.default=e},{"../render/canvas/style.js":310,"../style/Style.js":393,"./Layer.js":269,rbush:427}],265:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("../Collection.js")),a=n(e("../render/EventType.js")),h=n(e("../Feature.js")),s=n(e("../style/Fill.js")),u=n(e("../geom/LineString.js")),l=n(e("../geom/Point.js")),c=n(e("../style/Stroke.js")),f=n(e("../style/Style.js")),p=n(e("../style/Text.js")),d=n(e("./Vector.js")),g=n(e("../source/Vector.js")),E=e("../extent.js"),A=e("../math.js"),y=e("../coordinate.js"),m=e("../proj.js"),C=e("../render.js"),v=e("../geom/flat/geodesic.js");function n(e){return e&&e.__esModule?e:{default:e}}function b(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function _(e,t,r){t=I(t);var n=e,t=w()?Reflect.construct(t,r||[],I(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(w=function(){return!!e})()}function I(e){return(I=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e,t){return(S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var j=new c.default({color:"rgba(0,0,0,0.2)"}),x=[90,45,30,20,10,5,2,1,.5,20/60,10/60,5/60,2/60,1/60,30/3600,20/3600,10/3600,5/3600,2/3600,1/3600],e=function(){function n(e){var t;if(!(this instanceof n))throw new TypeError("Cannot call a class as a function");e=e||{};var r=Object.assign({updateWhileAnimating:!0,updateWhileInteracting:!0,renderBuffer:0},e);return delete r.maxLines,delete r.strokeStyle,delete r.targetSize,delete r.showLabels,delete r.lonLabelFormatter,delete r.latLabelFormatter,delete r.lonLabelPosition,delete r.latLabelPosition,delete r.lonLabelStyle,delete r.latLabelStyle,delete r.intervals,(t=_(this,n,[r])).projection_=null,t.maxLat_=1/0,t.maxLon_=1/0,t.minLat_=-1/0,t.minLon_=-1/0,t.maxX_=1/0,t.maxY_=1/0,t.minX_=-1/0,t.minY_=-1/0,t.targetSize_=void 0!==e.targetSize?e.targetSize:100,t.maxLines_=void 0!==e.maxLines?e.maxLines:100,t.meridians_=[],t.parallels_=[],t.strokeStyle_=void 0!==e.strokeStyle?e.strokeStyle:j,t.fromLonLatTransform_=void 0,t.toLonLatTransform_=void 0,t.projectionCenterLonLat_=null,t.bottomLeft_=null,t.bottomRight_=null,t.topLeft_=null,t.topRight_=null,t.meridiansLabels_=null,t.parallelsLabels_=null,e.showLabels&&(t.lonLabelFormatter_=null==e.lonLabelFormatter?y.degreesToStringHDMS.bind(t,"EW"):e.lonLabelFormatter,t.latLabelFormatter_=null==e.latLabelFormatter?y.degreesToStringHDMS.bind(t,"NS"):e.latLabelFormatter,t.lonLabelPosition_=null==e.lonLabelPosition?0:e.lonLabelPosition,t.latLabelPosition_=null==e.latLabelPosition?1:e.latLabelPosition,t.lonLabelStyleBase_=new f.default({text:void 0!==e.lonLabelStyle?e.lonLabelStyle.clone():new p.default({font:"12px Calibri,sans-serif",textBaseline:"bottom",fill:new s.default({color:"rgba(0,0,0,1)"}),stroke:new c.default({color:"rgba(255,255,255,1)",width:3})})}),t.lonLabelStyle_=function(e){e=e.get("graticule_label");return t.lonLabelStyleBase_.getText().setText(e),t.lonLabelStyleBase_},t.latLabelStyleBase_=new f.default({text:void 0!==e.latLabelStyle?e.latLabelStyle.clone():new p.default({font:"12px Calibri,sans-serif",textAlign:"right",fill:new s.default({color:"rgba(0,0,0,1)"}),stroke:new c.default({color:"rgba(255,255,255,1)",width:3})})}),t.latLabelStyle_=function(e){e=e.get("graticule_label");return t.latLabelStyleBase_.getText().setText(e),t.latLabelStyleBase_},t.meridiansLabels_=[],t.parallelsLabels_=[],t.addEventListener(a.default.POSTRENDER,t.drawLabels_.bind(t))),t.intervals_=void 0!==e.intervals?e.intervals:x,t.setSource(new g.default({loader:t.loaderFunction.bind(t),strategy:t.strategyFunction.bind(t),features:new o.default,overlaps:!1,useSpatialIndex:!1,wrapX:e.wrapX})),t.featurePool_=[],t.lineStyle_=new f.default({stroke:t.strokeStyle_}),t.loadedExtent_=null,t.renderedExtent_=null,t.renderedResolution_=null,t.setRenderOrder(null),t}var e,t=n,r=d.default;if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&S(t,r),t=n,(r=[{key:"strategyFunction",value:function(e,t){e=e.slice();return this.projection_&&this.getSource().getWrapX()&&(0,E.wrapX)(e,this.projection_),this.loadedExtent_&&((0,E.approximatelyEquals)(this.loadedExtent_,e,t)?e=this.loadedExtent_.slice():this.getSource().removeLoadedExtent(this.loadedExtent_)),[e]}},{key:"loaderFunction",value:function(e,t,r){this.loadedExtent_=e;var n=this.getSource(),i=this.getExtent()||[-1/0,-1/0,1/0,1/0],i=(0,E.getIntersection)(i,e);if(!(this.renderedExtent_&&(0,E.equals)(this.renderedExtent_,i)&&this.renderedResolution_===t||(this.renderedExtent_=i,this.renderedResolution_=t,(0,E.isEmpty)(i)))){var e=(0,E.getCenter)(i),o=t*t/4;this.projection_&&(0,m.equivalent)(this.projection_,r)||this.updateProjectionInfo_(r),this.createGraticule_(i,e,t,o);var a,s=this.meridians_.length+this.parallels_.length;for(this.meridiansLabels_&&(s+=this.meridians_.length),this.parallelsLabels_&&(s+=this.parallels_.length);s>this.featurePool_.length;)a=new h.default,this.featurePool_.push(a);var u=n.getFeaturesCollection();u.clear();for(var l=0,c=0,f=this.meridians_.length;c<f;++c)(a=this.featurePool_[l++]).setGeometry(this.meridians_[c]),a.setStyle(this.lineStyle_),u.push(a);for(c=0,f=this.parallels_.length;c<f;++c)(a=this.featurePool_[l++]).setGeometry(this.parallels_[c]),a.setStyle(this.lineStyle_),u.push(a)}}},{key:"addMeridian_",value:function(e,t,r,n,i,o){t=this.getMeridian_(e,t,r,n,o);return(0,E.intersects)(t.getExtent(),i)&&(this.meridiansLabels_&&(r=this.lonLabelFormatter_(e),o in this.meridiansLabels_?this.meridiansLabels_[o].text=r:this.meridiansLabels_[o]={geom:new l.default([]),text:r}),this.meridians_[o++]=t),o}},{key:"addParallel_",value:function(e,t,r,n,i,o){t=this.getParallel_(e,t,r,n,o);return(0,E.intersects)(t.getExtent(),i)&&(this.parallelsLabels_&&(r=this.latLabelFormatter_(e),o in this.parallelsLabels_?this.parallelsLabels_[o].text=r:this.parallelsLabels_[o]={geom:new l.default([]),text:r}),this.parallels_[o++]=t),o}},{key:"drawLabels_",value:function(e){var t,r=e.frameState.viewState.rotation,n=e.frameState.viewState.resolution,i=e.frameState.size,o=e.frameState.extent,a=(0,E.getCenter)(o),s=o,u=(r&&(t=i[0]*n,i=i[1]*n,s=[a[0]-t/2,a[1]-i/2,a[0]+t/2,a[1]+i/2]),0),l=0,c=this.latLabelPosition_<.5,n=this.projection_.getExtent(),f=(0,E.getWidth)(n);this.getSource().getWrapX()&&this.projection_.canWrapX()&&!(0,E.containsExtent)(n,o)&&(u=Math.floor((o[0]-n[0])/f),l=Math.ceil((o[2]-n[2])/f),c=c!==Math.abs(r)>Math.PI/2);for(var h=(0,C.getVectorContext)(e),p=u;p<=l;++p){var d=this.meridians_.length+this.parallels_.length,g=void 0,y=void 0,A=void 0,m=void 0;if(this.meridiansLabels_)for(y=0,A=this.meridiansLabels_.length;y<A;++y){var v,b=this.meridians_[y];r||0!==p?((v=b.clone()).translate(p*f,0),v.rotate(-r,a),(m=this.getMeridianPoint_(v,s,y)).rotate(r,a)):m=this.getMeridianPoint_(b,o,y),(g=this.featurePool_[d++]).setGeometry(m),g.set("graticule_label",this.meridiansLabels_[y].text),h.drawFeature(g,this.lonLabelStyle_(g))}if(this.parallelsLabels_&&(p===u&&c||p===l&&!c))for(y=0,A=this.parallels_.length;y<A;++y){var _,w=this.parallels_[y];r||0!==p?((_=w.clone()).translate(p*f,0),_.rotate(-r,a),(m=this.getParallelPoint_(_,s,y)).rotate(r,a)):m=this.getParallelPoint_(w,o,y),(g=this.featurePool_[d++]).setGeometry(m),g.set("graticule_label",this.parallelsLabels_[y].text),h.drawFeature(g,this.latLabelStyle_(g))}}}},{key:"createGraticule_",value:function(e,t,r,n){var i=this.getInterval_(r);if(-1==i)this.meridians_.length=0,this.parallels_.length=0,this.meridiansLabels_&&(this.meridiansLabels_.length=0),this.parallelsLabels_&&(this.parallelsLabels_.length=0);else{var r=!1,o=this.projection_.getExtent(),a=(0,E.getWidth)(o),a=(this.getSource().getWrapX()&&this.projection_.canWrapX()&&!(0,E.containsExtent)(o,e)&&((0,E.getWidth)(e)>=a?(e[0]=o[0],e[2]=o[2]):r=!0),[(0,A.clamp)(t[0],this.minX_,this.maxX_),(0,A.clamp)(t[1],this.minY_,this.maxY_)]),o=this.toLonLatTransform_(a);isNaN(o[1])&&(o[1]=Math.abs(this.maxLat_)>=Math.abs(this.minLat_)?this.maxLat_:this.minLat_);var s,u,l,c,t=(0,A.clamp)(o[0],this.minLon_,this.maxLon_),a=(0,A.clamp)(o[1],this.minLat_,this.maxLat_),f=this.maxLines_,o=e,h=(r||(o=[(0,A.clamp)(e[0],this.minX_,this.maxX_),(0,A.clamp)(e[1],this.minY_,this.maxY_),(0,A.clamp)(e[2],this.minX_,this.maxX_),(0,A.clamp)(e[3],this.minY_,this.maxY_)]),(0,E.applyTransform)(o,this.toLonLatTransform_,void 0,8)),p=h[3],d=h[2],g=h[1],y=h[0];if(r||((0,E.containsCoordinate)(o,this.bottomLeft_)&&(y=this.minLon_,g=this.minLat_),(0,E.containsCoordinate)(o,this.bottomRight_)&&(d=this.maxLon_,g=this.minLat_),(0,E.containsCoordinate)(o,this.topLeft_)&&(y=this.minLon_,p=this.maxLat_),(0,E.containsCoordinate)(o,this.topRight_)&&(d=this.maxLon_,p=this.maxLat_),p=(0,A.clamp)(p,a,this.maxLat_),d=(0,A.clamp)(d,t,this.maxLon_),g=(0,A.clamp)(g,this.minLat_,a),y=(0,A.clamp)(y,this.minLon_,t)),t=Math.floor(t/i)*i,c=(0,A.clamp)(t,this.minLon_,this.maxLon_),u=this.addMeridian_(c,g,p,n,e,0),s=0,r)for(;(c-=i)>=y&&s++<f;)u=this.addMeridian_(c,g,p,n,e,u);else for(;c!=this.minLon_&&s++<f;)c=Math.max(c-i,this.minLon_),u=this.addMeridian_(c,g,p,n,e,u);if(c=(0,A.clamp)(t,this.minLon_,this.maxLon_),s=0,r)for(;(c+=i)<=d&&s++<f;)u=this.addMeridian_(c,g,p,n,e,u);else for(;c!=this.maxLon_&&s++<f;)c=Math.min(c+i,this.maxLon_),u=this.addMeridian_(c,g,p,n,e,u);for(this.meridians_.length=u,this.meridiansLabels_&&(this.meridiansLabels_.length=u),a=Math.floor(a/i)*i,l=(0,A.clamp)(a,this.minLat_,this.maxLat_),u=this.addParallel_(l,y,d,n,e,0),s=0;l!=this.minLat_&&s++<f;)l=Math.max(l-i,this.minLat_),u=this.addParallel_(l,y,d,n,e,u);for(l=(0,A.clamp)(a,this.minLat_,this.maxLat_),s=0;l!=this.maxLat_&&s++<f;)l=Math.min(l+i,this.maxLat_),u=this.addParallel_(l,y,d,n,e,u);this.parallels_.length=u,this.parallelsLabels_&&(this.parallelsLabels_.length=u)}}},{key:"getInterval_",value:function(e){for(var t=this.projectionCenterLonLat_[0],r=this.projectionCenterLonLat_[1],n=-1,i=Math.pow(this.targetSize_*e,2),o=[],a=[],s=0,u=this.intervals_.length;s<u;++s){var l=(0,A.clamp)(this.intervals_[s]/2,0,90),c=(0,A.clamp)(r,-90+l,90-l);if(o[0]=t-l,o[1]=c-l,a[0]=t+l,a[1]=c+l,this.fromLonLatTransform_(o,o),this.fromLonLatTransform_(a,a),Math.pow(a[0]-o[0],2)+Math.pow(a[1]-o[1],2)<=i)break;n=this.intervals_[s]}return n}},{key:"getMeridian_",value:function(e,t,r,n,i){e=(0,v.meridian)(e,t,r,this.projection_,n),t=this.meridians_[i];return t?(t.setFlatCoordinates("XY",e),t.changed()):(t=new u.default(e,"XY"),this.meridians_[i]=t),t}},{key:"getMeridianPoint_",value:function(e,t,r){var e=e.getFlatCoordinates(),n=1,i=e.length-1,o=(e[n]>e[i]&&(n=i,i=1),Math.max(t[1],e[n])),a=Math.min(t[3],e[i]),t=(0,A.clamp)(t[1]+Math.abs(t[1]-t[3])*this.lonLabelPosition_,o,a),o=[e[n-1]+(e[i-1]-e[n-1])*(t-e[n])/(e[i]-e[n]),t],a=this.meridiansLabels_[r].geom;return a.setCoordinates(o),a}},{key:"getMeridians",value:function(){return this.meridians_}},{key:"getParallel_",value:function(e,t,r,n,i){e=(0,v.parallel)(e,t,r,this.projection_,n),t=this.parallels_[i];return t?(t.setFlatCoordinates("XY",e),t.changed()):t=new u.default(e,"XY"),t}},{key:"getParallelPoint_",value:function(e,t,r){var e=e.getFlatCoordinates(),n=0,i=e.length-2,o=(e[n]>e[i]&&(n=i,i=0),Math.max(t[0],e[n])),a=Math.min(t[2],e[i]),t=(0,A.clamp)(t[0]+Math.abs(t[0]-t[2])*this.latLabelPosition_,o,a),o=[t,e[n+1]+(e[i+1]-e[n+1])*(t-e[n])/(e[i]-e[n])],a=this.parallelsLabels_[r].geom;return a.setCoordinates(o),a}},{key:"getParallels",value:function(){return this.parallels_}},{key:"updateProjectionInfo_",value:function(e){var a,t=(0,m.get)("EPSG:4326"),r=e.getWorldExtent(),s=(this.maxLat_=r[3],this.maxLon_=r[2],this.minLat_=r[1],this.minLon_=r[0],(0,m.getTransform)(e,t)),r=(this.minLon_<this.maxLon_?this.toLonLatTransform_=s:(a=this.minLon_+this.maxLon_/2,this.maxLon_+=360,this.toLonLatTransform_=function(e,t,r){for(var n=s(e,t,r=r||2),i=0,o=n.length;i<o;i+=r)n[i]<a&&(n[i]+=360);return n}),this.fromLonLatTransform_=(0,m.getTransform)(t,e),(0,E.applyTransform)([this.minLon_,this.minLat_,this.maxLon_,this.maxLat_],this.fromLonLatTransform_,void 0,8));this.minX_=r[0],this.maxX_=r[2],this.minY_=r[1],this.maxY_=r[3],this.bottomLeft_=this.fromLonLatTransform_([this.minLon_,this.minLat_]),this.bottomRight_=this.fromLonLatTransform_([this.maxLon_,this.minLat_]),this.topLeft_=this.fromLonLatTransform_([this.minLon_,this.maxLat_]),this.topRight_=this.fromLonLatTransform_([this.maxLon_,this.maxLat_]),this.projectionCenterLonLat_=this.toLonLatTransform_((0,E.getCenter)(e.getExtent())),isNaN(this.projectionCenterLonLat_[1])&&(this.projectionCenterLonLat_[1]=Math.abs(this.maxLat_)>=Math.abs(this.minLat_)?this.maxLat_:this.minLat_),this.projection_=e}}])&&b(t.prototype,r),e&&b(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();r.default=e},{"../Collection.js":78,"../Feature.js":82,"../coordinate.js":128,"../extent.js":142,"../geom/LineString.js":205,"../geom/Point.js":210,"../geom/flat/geodesic.js":219,"../math.js":279,"../proj.js":283,"../render.js":291,"../render/EventType.js":294,"../source/Vector.js":367,"../style/Fill.js":386,"../style/Stroke.js":392,"../style/Style.js":393,"../style/Text.js":394,"./Vector.js":273}],266:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.GroupEvent=void 0;var n=g(e("./Base.js")),o=g(e("../Collection.js")),a=g(e("../CollectionEventType.js")),s=g(e("../events/Event.js")),u=g(e("../events/EventType.js")),l=g(e("../ObjectEventType.js")),c=e("../asserts.js"),f=e("../obj.js"),h=e("../extent.js"),p=e("../util.js"),d=e("../events.js");function g(e){return e&&e.__esModule?e:{default:e}}function y(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function A(e,t,r){return t&&y(e.prototype,t),r&&y(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t,r){t=_(t);var n=e,t=b()?Reflect.construct(t,r||[],_(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(b=function(){return!!e})()}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function w(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&E(e,t)}function E(e,t){return(E=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var C=r.GroupEvent=(w(j,s.default),A(j)),I="layers",e=(w(S,n.default),A(S,[{key:"handleLayerChange_",value:function(){this.changed()}},{key:"handleLayersChanged_",value:function(){this.layersListenerKeys_.forEach(d.unlistenByKey),this.layersListenerKeys_.length=0;var e,t=this.getLayers();for(e in this.layersListenerKeys_.push((0,d.listen)(t,a.default.ADD,this.handleLayersAdd_,this),(0,d.listen)(t,a.default.REMOVE,this.handleLayersRemove_,this)),this.listenerKeys_)this.listenerKeys_[e].forEach(d.unlistenByKey);(0,f.clear)(this.listenerKeys_);for(var r=t.getArray(),n=0,i=r.length;n<i;n++){var o=r[n];this.registerLayerListeners_(o),this.dispatchEvent(new C("addlayer",o))}this.changed()}},{key:"registerLayerListeners_",value:function(e){var t=[(0,d.listen)(e,l.default.PROPERTYCHANGE,this.handleLayerChange_,this),(0,d.listen)(e,u.default.CHANGE,this.handleLayerChange_,this)];e instanceof S&&t.push((0,d.listen)(e,"addlayer",this.handleLayerGroupAdd_,this),(0,d.listen)(e,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[(0,p.getUid)(e)]=t}},{key:"handleLayerGroupAdd_",value:function(e){this.dispatchEvent(new C("addlayer",e.layer))}},{key:"handleLayerGroupRemove_",value:function(e){this.dispatchEvent(new C("removelayer",e.layer))}},{key:"handleLayersAdd_",value:function(e){e=e.element;this.registerLayerListeners_(e),this.dispatchEvent(new C("addlayer",e)),this.changed()}},{key:"handleLayersRemove_",value:function(e){var e=e.element,t=(0,p.getUid)(e);this.listenerKeys_[t].forEach(d.unlistenByKey),delete this.listenerKeys_[t],this.dispatchEvent(new C("removelayer",e)),this.changed()}},{key:"getLayers",value:function(){return this.get(I)}},{key:"setLayers",value:function(e){var t=this.getLayers();if(t)for(var r=t.getArray(),n=0,i=r.length;n<i;++n)this.dispatchEvent(new C("removelayer",r[n]));this.set(I,e)}},{key:"getLayersArray",value:function(t){return t=void 0!==t?t:[],this.getLayers().forEach(function(e){e.getLayersArray(t)}),t}},{key:"getLayerStatesArray",value:function(e){var t=void 0!==e?e:[],r=t.length,n=(this.getLayers().forEach(function(e){e.getLayerStatesArray(t)}),this.getLayerState()),i=n.zIndex;e||void 0!==n.zIndex||(i=0);for(var o=r,a=t.length;o<a;o++){var s=t[o];s.opacity*=n.opacity,s.visible=s.visible&&n.visible,s.maxResolution=Math.min(s.maxResolution,n.maxResolution),s.minResolution=Math.max(s.minResolution,n.minResolution),s.minZoom=Math.max(s.minZoom,n.minZoom),s.maxZoom=Math.min(s.maxZoom,n.maxZoom),void 0!==n.extent&&(void 0!==s.extent?s.extent=(0,h.getIntersection)(s.extent,n.extent):s.extent=n.extent),void 0===s.zIndex&&(s.zIndex=i)}return t}},{key:"getSourceState",value:function(){return"ready"}}]));r.default=e;function S(e){m(this,S),e=e||{};var t=Object.assign({},e),e=(delete t.layers,e.layers);return(t=v(this,S,[t])).on,t.once,t.un,t.layersListenerKeys_=[],t.listenerKeys_={},t.addChangeListener(I,t.handleLayersChanged_),e?Array.isArray(e)?e=new o.default(e.slice(),{unique:!0}):(0,c.assert)("function"==typeof e.getArray,"Expected `layers` to be an array or a `Collection`"):e=new o.default(void 0,{unique:!0}),t.setLayers(e),t}function j(e,t){return m(this,j),(e=v(this,j,[e])).layer=t,e}},{"../Collection.js":78,"../CollectionEventType.js":79,"../ObjectEventType.js":97,"../asserts.js":111,"../events.js":132,"../events/Event.js":133,"../events/EventType.js":134,"../extent.js":142,"../obj.js":281,"../util.js":404,"./Base.js":261}],267:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("./BaseVector.js")),a=n(e("../renderer/webgl/PointsLayer.js")),s=e("../webgl/ShaderBuilder.js"),u=e("../math.js"),l=e("../dom.js");function n(e){return e&&e.__esModule?e:{default:e}}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function f(e,t,r){t=p(t);var n=e,t=h()?Reflect.construct(t,r||[],p(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(h=function(){return!!e})()}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var g="blur",y="gradient",A="radius",m=["#00f","#0ff","#0f0","#ff0","#f00"],e=function(){function n(e){if(!(this instanceof n))throw new TypeError("Cannot call a class as a function");e=e||{};var t=Object.assign({},e),r=(delete t.gradient,delete t.radius,delete t.blur,delete t.weight,(t=f(this,n,[t])).gradient_=null,t.addChangeListener(y,t.handleGradientChanged_),t.setGradient(e.gradient||m),t.setBlur(void 0!==e.blur?e.blur:15),t.setRadius(void 0!==e.radius?e.radius:8),e.weight||"weight");return t.weightFunction_="string"==typeof r?function(e){return e.get(r)}:r,t.setRenderOrder(null),t}var e,t=n,r=o.default;if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&d(t,r),t=n,(r=[{key:"getBlur",value:function(){return this.get(g)}},{key:"getGradient",value:function(){return this.get(y)}},{key:"getRadius",value:function(){return this.get(A)}},{key:"handleGradientChanged_",value:function(){this.gradient_=function(e){for(var t=(0,l.createCanvasContext2D)(1,256),r=t.createLinearGradient(0,0,1,256),n=1/(e.length-1),i=0,o=e.length;i<o;++i)r.addColorStop(i*n,e[i]);return t.fillStyle=r,t.fillRect(0,0,1,256),t.canvas}(this.getGradient())}},{key:"setBlur",value:function(e){this.set(g,e)}},{key:"setGradient",value:function(e){this.set(y,e)}},{key:"setRadius",value:function(e){this.set(A,e)}},{key:"createRenderer",value:function(){var t=this,e=(new s.ShaderBuilder).addAttribute("float a_prop_weight").addVarying("v_prop_weight","float","a_prop_weight").addUniform("float u_size").addUniform("float u_blurSlope").setSymbolSizeExpression("vec2(u_size)").setSymbolColorExpression("vec4(smoothstep(0., 1., (1. - length(coordsPx * 2. / v_quadSizePx)) * u_blurSlope) * v_prop_weight)");return new a.default(this,{className:this.getClassName(),attributes:[{name:"weight",callback:function(e){e=t.weightFunction_(e);return void 0!==e?(0,u.clamp)(e,0,1):1}}],uniforms:{u_size:function(){return 2*(t.get(A)+t.get(g))},u_blurSlope:function(){return t.get(A)/Math.max(1,t.get(g))}},hitDetectionEnabled:!0,vertexShader:e.getSymbolVertexShader(),fragmentShader:e.getSymbolFragmentShader(),postProcesses:[{fragmentShader:"\n            precision mediump float;\n\n            uniform sampler2D u_image;\n            uniform sampler2D u_gradientTexture;\n            uniform float u_opacity;\n\n            varying vec2 v_texCoord;\n\n            void main() {\n              vec4 color = texture2D(u_image, v_texCoord);\n              gl_FragColor.a = color.a * u_opacity;\n              gl_FragColor.rgb = texture2D(u_gradientTexture, vec2(0.5, color.a)).rgb;\n              gl_FragColor.rgb *= gl_FragColor.a;\n            }",uniforms:{u_gradientTexture:function(){return t.gradient_},u_opacity:function(){return t.getOpacity()}}}]})}},{key:"renderDeclutter",value:function(){}}])&&c(t.prototype,r),e&&c(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();r.default=e},{"../dom.js":130,"../math.js":279,"../renderer/webgl/PointsLayer.js":324,"../webgl/ShaderBuilder.js":414,"./BaseVector.js":264}],268:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("./BaseImage.js")),a=n(e("../renderer/canvas/ImageLayer.js"));function n(e){return e&&e.__esModule?e:{default:e}}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function u(e,t,r){t=f(t);var n=e,t=l()?Reflect.construct(t,r||[],f(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(l=function(){return!!e})()}function c(){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=f(e)););return e}(e,t);if(n)return(n=Object.getOwnPropertyDescriptor(n,t)).get?n.get.call(arguments.length<3?e:r):n.value}).apply(null,arguments)}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}e=function(){function t(e){if(this instanceof t)return u(this,t,[e]);throw new TypeError("Cannot call a class as a function")}var e,r=t,n=o.default;if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");return r.prototype=Object.create(n&&n.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),n&&h(r,n),r=t,(n=[{key:"createRenderer",value:function(){return new a.default(this)}},{key:"getData",value:function(e){return c(f(t.prototype),"getData",this).call(this,e)}}])&&s(r.prototype,n),e&&s(r,e),Object.defineProperty(r,"prototype",{writable:!1}),r}();r.default=e},{"../renderer/canvas/ImageLayer.js":316,"./BaseImage.js":262}],269:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,r.inView=v;var o=n(e("./Base.js")),a=n(e("../events/EventType.js")),s=n(e("./Property.js")),u=n(e("../render/EventType.js")),l=n(e("../View.js")),c=e("../asserts.js"),f=e("../extent.js"),h=e("../events.js");function n(e){return e&&e.__esModule?e:{default:e}}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function d(e,t,r){t=A(t);var n=e,t=g()?Reflect.construct(t,r||[],A(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(g=function(){return!!e})()}function y(){return(y="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=A(e)););return e}(e,t);if(n)return(n=Object.getOwnPropertyDescriptor(n,t)).get?n.get.call(arguments.length<3?e:r):n.value}).apply(null,arguments)}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}e=function(){function r(e){var t;if(this instanceof r)return delete(t=Object.assign({},e)).source,(t=d(this,r,[t])).on,t.once,t.un,t.mapPrecomposeKey_=null,t.mapRenderKey_=null,t.sourceChangeKey_=null,t.renderer_=null,t.sourceReady_=!1,t.rendered=!1,e.render&&(t.render=e.render),e.map&&t.setMap(e.map),t.addChangeListener(s.default.SOURCE,t.handleSourcePropertyChange_),e=e.source||null,t.setSource(e),t;throw new TypeError("Cannot call a class as a function")}var e,t=r,n=o.default;if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&m(t,n),t=r,(n=[{key:"getLayersArray",value:function(e){return(e=e||[]).push(this),e}},{key:"getLayerStatesArray",value:function(e){return(e=e||[]).push(this.getLayerState()),e}},{key:"getSource",value:function(){return this.get(s.default.SOURCE)||null}},{key:"getRenderSource",value:function(){return this.getSource()}},{key:"getSourceState",value:function(){var e=this.getSource();return e?e.getState():"undefined"}},{key:"handleSourceChange_",value:function(){this.changed(),this.sourceReady_||"ready"!==this.getSource().getState()||(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}},{key:"handleSourcePropertyChange_",value:function(){var e=this,t=(this.sourceChangeKey_&&((0,h.unlistenByKey)(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1,this.getSource());t&&(this.sourceChangeKey_=(0,h.listen)(t,a.default.CHANGE,this.handleSourceChange_,this),"ready"===t.getState())&&(this.sourceReady_=!0,setTimeout(function(){e.dispatchEvent("sourceready")},0)),this.changed()}},{key:"getFeatures",value:function(e){return this.renderer_?this.renderer_.getFeatures(e):Promise.resolve([])}},{key:"getData",value:function(e){return this.renderer_&&this.rendered?this.renderer_.getData(e):null}},{key:"isVisible",value:function(e){var t=this,r=this.getMapInternal(),n=(!(e=(e=!e&&r?r.getView():e)instanceof l.default?{viewState:e.getState(),extent:e.calculateExtent()}:e).layerStatesArray&&r&&(e.layerStatesArray=r.getLayerGroup().getLayerStatesArray()),r=e.layerStatesArray?e.layerStatesArray.find(function(e){return e.layer===t}):this.getLayerState(),this.getExtent());return v(r,e.viewState)&&(!n||(0,f.intersects)(n,e.extent))}},{key:"getAttributions",value:function(e){var t,r;return this.isVisible(e)&&(t=(r=this.getSource())?r.getAttributions():t)?(r=t(e instanceof l.default?e.getViewStateAndExtent():e),Array.isArray(r)?r:[r]):[]}},{key:"render",value:function(e,t){var r=this.getRenderer();return r.prepareFrame(e)?(this.rendered=!0,r.renderFrame(e,t)):null}},{key:"unrender",value:function(){this.rendered=!1}},{key:"getDeclutter",value:function(){}},{key:"renderDeclutter",value:function(e,t){}},{key:"renderDeferred",value:function(e){var t=this.getRenderer();t&&t.renderDeferred(e)}},{key:"setMapInternal",value:function(e){e||this.unrender(),this.set(s.default.MAP,e)}},{key:"getMapInternal",value:function(){return this.get(s.default.MAP)}},{key:"setMap",value:function(e){this.mapPrecomposeKey_&&((0,h.unlistenByKey)(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&((0,h.unlistenByKey)(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=(0,h.listen)(e,u.default.PRECOMPOSE,function(e){var e=e.frameState.layerStatesArray,t=this.getLayerState(!1);(0,c.assert)(!e.some(function(e){return e.layer===t.layer}),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),e.push(t)},this),this.mapRenderKey_=(0,h.listen)(this,a.default.CHANGE,e.render,e),this.changed())}},{key:"setSource",value:function(e){this.set(s.default.SOURCE,e)}},{key:"getRenderer",value:function(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}},{key:"hasRenderer",value:function(){return!!this.renderer_}},{key:"createRenderer",value:function(){return null}},{key:"disposeInternal",value:function(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),y(A(r.prototype),"disposeInternal",this).call(this)}}])&&p(t.prototype,n),e&&p(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();function v(e,t){var r;return!!e.visible&&!((r=t.resolution)<e.minResolution||r>=e.maxResolution)&&(r=t.zoom)>e.minZoom&&r<=e.maxZoom}r.default=e},{"../View.js":107,"../asserts.js":111,"../events.js":132,"../events/EventType.js":134,"../extent.js":142,"../render/EventType.js":294,"./Base.js":261,"./Property.js":270}],270:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;r.default={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"}},{}],271:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("./BaseTile.js")),a=n(e("../renderer/canvas/TileLayer.js"));function n(e){return e&&e.__esModule?e:{default:e}}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function u(e,t,r){t=c(t);var n=e,t=l()?Reflect.construct(t,r||[],c(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(l=function(){return!!e})()}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}e=function(){function t(e){if(this instanceof t)return u(this,t,[e]);throw new TypeError("Cannot call a class as a function")}var e,r=t,n=o.default;if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");return r.prototype=Object.create(n&&n.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),n&&f(r,n),r=t,(n=[{key:"createRenderer",value:function(){return new a.default(this)}}])&&s(r.prototype,n),e&&s(r,e),Object.defineProperty(r,"prototype",{writable:!1}),r}();r.default=e},{"../renderer/canvas/TileLayer.js":318,"./BaseTile.js":263}],272:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;r.default={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"}},{}],273:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("./BaseVector.js")),a=n(e("../renderer/canvas/VectorLayer.js"));function n(e){return e&&e.__esModule?e:{default:e}}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function u(e,t,r){t=c(t);var n=e,t=l()?Reflect.construct(t,r||[],c(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(l=function(){return!!e})()}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}e=function(){function t(e){if(this instanceof t)return u(this,t,[e]);throw new TypeError("Cannot call a class as a function")}var e,r=t,n=o.default;if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");return r.prototype=Object.create(n&&n.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),n&&f(r,n),r=t,(n=[{key:"createRenderer",value:function(){return new a.default(this)}}])&&s(r.prototype,n),e&&s(r,e),Object.defineProperty(r,"prototype",{writable:!1}),r}();r.default=e},{"../renderer/canvas/VectorLayer.js":320,"./BaseVector.js":264}],274:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("./BaseVector.js")),a=n(e("../renderer/canvas/VectorImageLayer.js"));function n(e){return e&&e.__esModule?e:{default:e}}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function u(e,t,r){t=c(t);var n=e,t=l()?Reflect.construct(t,r||[],c(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(l=function(){return!!e})()}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}e=function(){function r(e){if(!(this instanceof r))throw new TypeError("Cannot call a class as a function");e=e||{};var t=Object.assign({},e);return delete t.imageRatio,(t=u(this,r,[t])).imageRatio_=void 0!==e.imageRatio?e.imageRatio:1,t}var e,t=r,n=o.default;if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&f(t,n),t=r,(n=[{key:"getImageRatio",value:function(){return this.imageRatio_}},{key:"createRenderer",value:function(){return new a.default(this)}}])&&s(t.prototype,n),e&&s(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();r.default=e},{"../renderer/canvas/VectorImageLayer.js":319,"./BaseVector.js":264}],275:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("./BaseVector.js")),a=n(e("../renderer/canvas/VectorTileLayer.js")),s=n(e("./TileProperty.js")),u=e("../asserts.js");function n(e){return e&&e.__esModule?e:{default:e}}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function c(e,t,r){t=p(t);var n=e,t=f()?Reflect.construct(t,r||[],p(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(f=function(){return!!e})()}function h(){return(h="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=p(e)););return e}(e,t);if(n)return(n=Object.getOwnPropertyDescriptor(n,t)).get?n.get.call(arguments.length<3?e:r):n.value}).apply(null,arguments)}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}e=function(){function n(e){if(!(this instanceof n))throw new TypeError("Cannot call a class as a function");e=e||{};var t=Object.assign({},e),r=(delete t.preload,delete t.useInterimTilesOnError,(t=c(this,n,[t])).on,t.once,t.un,e.renderMode||"hybrid");return(0,u.assert)("hybrid"==r||"vector"==r,"`renderMode` must be `'hybrid'` or `'vector'`"),t.renderMode_=r,t.setPreload(e.preload||0),t.setUseInterimTilesOnError(void 0===e.useInterimTilesOnError||e.useInterimTilesOnError),t.getBackground,t.setBackground,t}var e,t=n,r=o.default;if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&d(t,r),t=n,(r=[{key:"createRenderer",value:function(){return new a.default(this)}},{key:"getFeatures",value:function(e){return h(p(n.prototype),"getFeatures",this).call(this,e)}},{key:"getRenderMode",value:function(){return this.renderMode_}},{key:"getPreload",value:function(){return this.get(s.default.PRELOAD)}},{key:"getUseInterimTilesOnError",value:function(){return this.get(s.default.USE_INTERIM_TILES_ON_ERROR)}},{key:"setPreload",value:function(e){this.set(s.default.PRELOAD,e)}},{key:"setUseInterimTilesOnError",value:function(e){this.set(s.default.USE_INTERIM_TILES_ON_ERROR,e)}}])&&l(t.prototype,r),e&&l(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();r.default=e},{"../asserts.js":111,"../renderer/canvas/VectorTileLayer.js":321,"./BaseVector.js":264,"./TileProperty.js":272}],276:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("./Layer.js")),a=n(e("../renderer/webgl/PointsLayer.js")),s=e("../webgl/styleparser.js");function n(e){return e&&e.__esModule?e:{default:e}}function u(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function l(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?u(Object(i),!0).forEach(function(e){var t,r;t=n,r=i[e=e],(e=f(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):u(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))})}return n}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,f(n.key),n)}}function f(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}function h(e,t,r){t=d(t);var n=e,t=p()?Reflect.construct(t,r||[],d(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(p=function(){return!!e})()}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){return(g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}e=function(){function r(e){var t;if(this instanceof r)return(t=h(this,r,[Object.assign({},e)])).parseResult_=(0,s.parseLiteralStyle)(e.style),t.styleVariables_=e.style.variables||{},t.hitDetectionDisabled_=!!e.disableHitDetection,t;throw new TypeError("Cannot call a class as a function")}var e,t=r,n=o.default;if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&g(t,n),t=r,(n=[{key:"createRenderer",value:function(){var t=this,e=Object.keys(this.parseResult_.attributes).map(function(e){return l({name:e},t.parseResult_.attributes[e])});return new a.default(this,{vertexShader:this.parseResult_.builder.getSymbolVertexShader(),fragmentShader:this.parseResult_.builder.getSymbolFragmentShader(),hitDetectionEnabled:!this.hitDetectionDisabled_,uniforms:this.parseResult_.uniforms,attributes:e})}},{key:"updateStyleVariables",value:function(e){Object.assign(this.styleVariables_,e),this.changed()}}])&&c(t.prototype,n),e&&c(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();r.default=e},{"../renderer/webgl/PointsLayer.js":324,"../webgl/styleparser.js":416,"./Layer.js":269}],277:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=i(e("./BaseTile.js")),o=i(e("../layer/Property.js")),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=s(e)&&"function"!=typeof e)return{default:e};t=a(t);if(t&&t.has(e))return t.get(e);var r,n={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in e){var o;"default"!==r&&{}.hasOwnProperty.call(e,r)&&((o=i?Object.getOwnPropertyDescriptor(e,r):null)&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=e[r])}return n.default=e,t&&t.set(e,n),n}(e("../renderer/webgl/TileLayer.js")),c=e("../expr/expression.js"),f=e("../expr/gpu.js"),h=e("../webgl/styleparser.js");function a(e){var t,r;return"function"!=typeof WeakMap?null:(t=new WeakMap,r=new WeakMap,(a=function(e){return e?r:t})(e))}function i(e){return e&&e.__esModule?e:{default:e}}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,v(n.key),n)}}function p(e,t,r){t=g(t);var n=e,t=d()?Reflect.construct(t,r||[],g(e).constructor):t.apply(e,r);if(t&&("object"==s(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(d=function(){return!!e})()}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t){return(y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function A(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function m(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?A(Object(i),!0).forEach(function(e){var t,r;t=n,r=i[e=e],(e=v(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):A(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))})}return n}function v(e){e=function(e,t){if("object"!=s(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==s(e)?e:e+""}function b(r,e){var t="\n    attribute vec2 ".concat(l.Attributes.TEXTURE_COORD,";\n    uniform mat4 ").concat(l.Uniforms.TILE_TRANSFORM,";\n    uniform float ").concat(l.Uniforms.TEXTURE_PIXEL_WIDTH,";\n    uniform float ").concat(l.Uniforms.TEXTURE_PIXEL_HEIGHT,";\n    uniform float ").concat(l.Uniforms.TEXTURE_RESOLUTION,";\n    uniform float ").concat(l.Uniforms.TEXTURE_ORIGIN_X,";\n    uniform float ").concat(l.Uniforms.TEXTURE_ORIGIN_Y,";\n    uniform float ").concat(l.Uniforms.DEPTH,";\n\n    varying vec2 v_textureCoord;\n    varying vec2 v_mapCoord;\n\n    void main() {\n      v_textureCoord = ").concat(l.Attributes.TEXTURE_COORD,";\n      v_mapCoord = vec2(\n        ").concat(l.Uniforms.TEXTURE_ORIGIN_X," + ").concat(l.Uniforms.TEXTURE_RESOLUTION," * ").concat(l.Uniforms.TEXTURE_PIXEL_WIDTH," * v_textureCoord[0],\n        ").concat(l.Uniforms.TEXTURE_ORIGIN_Y," - ").concat(l.Uniforms.TEXTURE_RESOLUTION," * ").concat(l.Uniforms.TEXTURE_PIXEL_HEIGHT," * v_textureCoord[1]\n      );\n      gl_Position = ").concat(l.Uniforms.TILE_TRANSFORM," * vec4(").concat(l.Attributes.TEXTURE_COORD,", ").concat(l.Uniforms.DEPTH,", 1.0);\n    }\n  "),n=m(m({},(0,f.newCompilationContext)()),{},{inFragmentShader:!0,bandCount:e,style:r}),i=[],o=(void 0!==r.color&&(u=(0,h.expressionToGlsl)(n,r.color,c.ColorType),i.push("color = ".concat(u,";"))),void 0!==r.contrast&&(u=(0,h.expressionToGlsl)(n,r.contrast,c.NumberType),i.push("color.rgb = clamp((".concat(u," + 1.0) * color.rgb - (").concat(u," / 2.0), vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));"))),void 0!==r.exposure&&(u=(0,h.expressionToGlsl)(n,r.exposure,c.NumberType),i.push("color.rgb = clamp((".concat(u," + 1.0) * color.rgb, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));"))),void 0!==r.saturation&&(u=(0,h.expressionToGlsl)(n,r.saturation,c.NumberType),i.push("\n      float saturation = ".concat(u," + 1.0;\n      float sr = (1.0 - saturation) * 0.2126;\n      float sg = (1.0 - saturation) * 0.7152;\n      float sb = (1.0 - saturation) * 0.0722;\n      mat3 saturationMatrix = mat3(\n        sr + saturation, sr, sr,\n        sg, sg + saturation, sg,\n        sb, sb, sb + saturation\n      );\n      color.rgb = clamp(saturationMatrix * color.rgb, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));\n    "))),void 0!==r.gamma&&(u=(0,h.expressionToGlsl)(n,r.gamma,c.NumberType),i.push("color.rgb = pow(color.rgb, vec3(1.0 / ".concat(u,"));"))),void 0!==r.brightness&&(u=(0,h.expressionToGlsl)(n,r.brightness,c.NumberType),i.push("color.rgb = clamp(color.rgb + ".concat(u,", vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));"))),{}),a=Object.keys(n.variables).length;if(1<a&&!r.variables)throw new Error("Missing variables in style (expected ".concat(n.variables,")"));for(var s=0;s<a;++s)!function(){var t=n.variables[Object.keys(n.variables)[s]];if(!(t.name in r.variables))throw new Error("Missing '".concat(t.name,"' in style variables"));var e=(0,f.uniformNameForVariable)(t.name);o[e]=function(){var e=r.variables[t.name];return void 0!==(e="string"==typeof e?(0,f.getStringNumberEquivalent)(e):e)?e:-9999999}}();var u=Object.keys(o).map(function(e){return"uniform float ".concat(e,";")}),e=Math.ceil(e/4),e=(u.push("uniform sampler2D ".concat(l.Uniforms.TILE_TEXTURE_ARRAY,"[").concat(e,"];")),n.paletteTextures&&u.push("uniform sampler2D ".concat(f.PALETTE_TEXTURE_ARRAY,"[").concat(n.paletteTextures.length,"];")),Object.keys(n.functions).map(function(e){return n.functions[e]}));return{vertexShader:t,fragmentShader:"\n    #ifdef GL_FRAGMENT_PRECISION_HIGH\n    precision highp float;\n    #else\n    precision mediump float;\n    #endif\n\n    varying vec2 v_textureCoord;\n    varying vec2 v_mapCoord;\n    uniform vec4 ".concat(l.Uniforms.RENDER_EXTENT,";\n    uniform float ").concat(l.Uniforms.TRANSITION_ALPHA,";\n    uniform float ").concat(l.Uniforms.TEXTURE_PIXEL_WIDTH,";\n    uniform float ").concat(l.Uniforms.TEXTURE_PIXEL_HEIGHT,";\n    uniform float ").concat(l.Uniforms.RESOLUTION,";\n    uniform float ").concat(l.Uniforms.ZOOM,";\n\n    ").concat(u.join("\n"),"\n\n    ").concat(e.join("\n"),"\n\n    void main() {\n      if (\n        v_mapCoord[0] < ").concat(l.Uniforms.RENDER_EXTENT,"[0] ||\n        v_mapCoord[1] < ").concat(l.Uniforms.RENDER_EXTENT,"[1] ||\n        v_mapCoord[0] > ").concat(l.Uniforms.RENDER_EXTENT,"[2] ||\n        v_mapCoord[1] > ").concat(l.Uniforms.RENDER_EXTENT,"[3]\n      ) {\n        discard;\n      }\n\n      vec4 color = texture2D(").concat(l.Uniforms.TILE_TEXTURE_ARRAY,"[0],  v_textureCoord);\n\n      ").concat(i.join("\n"),"\n\n      gl_FragColor = color;\n      gl_FragColor.rgb *= gl_FragColor.a;\n      gl_FragColor *= ").concat(l.Uniforms.TRANSITION_ALPHA,";\n    }"),uniforms:o,paletteTextures:n.paletteTextures}}e=function(){function i(e){var t,r,n;if(this instanceof i)return r=(e=e?Object.assign({},e):{}).style||{},delete e.style,n=e.cacheSize,delete e.cacheSize,(t=p(this,i,[e])).sources_=e.sources,t.renderedSource_=null,t.renderedResolution_=NaN,t.style_=r,t.cacheSize_=n,t.styleVariables_=t.style_.variables||{},t.addChangeListener(o.default.SOURCE,t.handleSourceUpdate_),t;throw new TypeError("Cannot call a class as a function")}var e,t=i,r=n.default;if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&y(t,r),t=i,(r=[{key:"getSources",value:function(e,t){var r=this.getSource();return this.sources_?"function"==typeof this.sources_?this.sources_(e,t):this.sources_:r?[r]:[]}},{key:"getRenderSource",value:function(){return this.renderedSource_||this.getSource()}},{key:"getSourceState",value:function(){var e=this.getRenderSource();return e?e.getState():"undefined"}},{key:"handleSourceUpdate_",value:function(){this.hasRenderer()&&this.getRenderer().clearCache(),this.getSource()&&this.setStyle(this.style_)}},{key:"getSourceBandCount_",value:function(){var e=Number.MAX_SAFE_INTEGER,e=this.getSources([-e,-e,e,e],e);return e&&e.length&&"bandCount"in e[0]?e[0].bandCount:4}},{key:"createRenderer",value:function(){var e=b(this.style_,this.getSourceBandCount_());return new l.default(this,{vertexShader:e.vertexShader,fragmentShader:e.fragmentShader,uniforms:e.uniforms,cacheSize:this.cacheSize_,paletteTextures:e.paletteTextures})}},{key:"renderSources",value:function(e,t){for(var r,n=this.getRenderer(),i=0,o=t.length;i<o;++i)this.renderedSource_=t[i],n.prepareFrame(e)&&(r=n.renderFrame(e));return r}},{key:"render",value:function(e,t){var r=this;this.rendered=!0;for(var n=e.viewState,i=this.getSources(e.extent,n.resolution),o=!0,a=0,s=i.length;a<s;++a)!function(){var t=i[a],e=t.getState();"loading"==e&&t.addEventListener("change",function e(){"ready"==t.getState()&&(t.removeEventListener("change",e),r.changed())}),o=o&&"ready"==e}();var u=this.renderSources(e,i);if(this.getRenderer().renderComplete&&o)this.renderedResolution_=n.resolution;else if(this.renderedResolution_>.5*n.resolution){n=this.getSources(e.extent,this.renderedResolution_).filter(function(e){return!i.includes(e)});if(0<n.length)return this.renderSources(e,n)}return u}},{key:"setStyle",value:function(e){this.styleVariables_=e.variables||{},this.style_=e;e=b(this.style_,this.getSourceBandCount_());this.getRenderer().reset({vertexShader:e.vertexShader,fragmentShader:e.fragmentShader,uniforms:e.uniforms,paletteTextures:e.paletteTextures}),this.changed()}},{key:"updateStyleVariables",value:function(e){Object.assign(this.styleVariables_,e),this.changed()}}])&&u(t.prototype,r),e&&u(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();e.prototype.dispose,r.default=e},{"../expr/expression.js":140,"../expr/gpu.js":141,"../layer/Property.js":270,"../renderer/webgl/TileLayer.js":325,"../webgl/styleparser.js":416,"./BaseTile.js":263}],278:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.all=function(e,t){return[[-1/0,-1/0,1/0,1/0]]},r.bbox=function(e,t){return[e]},r.tile=function(a){return function(e,t,r){var t=a.getZForResolution((0,s.fromUserResolution)(t,r)),n=a.getTileRangeForExtentAndZ((0,s.fromUserExtent)(e,r),t),i=[],o=[t,0,0];for(o[1]=n.minX;o[1]<=n.maxX;++o[1])for(o[2]=n.minY;o[2]<=n.maxY;++o[2])i.push((0,s.toUserExtent)(a.getTileCoordExtent(o),r));return i}};var s=e("./proj.js")},{"./proj.js":283}],279:[function(e,t,r){"use strict";function l(e,t,r,n){r-=e,e=n-t;return r*r+e*e}function n(e,t){t=Math.pow(10,t);return Math.round(e*t)/t}Object.defineProperty(r,"__esModule",{value:!0}),r.ceil=function(e,t){return Math.ceil(n(e,t))},r.clamp=function(e,t,r){return Math.min(Math.max(e,t),r)},r.floor=function(e,t){return Math.floor(n(e,t))},r.lerp=function(e,t,r){return e+r*(t-e)},r.modulo=function(e,t){return(e%=t)*t<0?e+t:e},r.round=function(e,t){return Math.round(n(e,t))},r.solveLinearSystem=function(e){for(var t=e.length,r=0;r<t;r++){for(var n=r,i=Math.abs(e[r][r]),o=r+1;o<t;o++){var a=Math.abs(e[o][r]);i<a&&(i=a,n=o)}if(0===i)return null;var s=e[n];e[n]=e[r],e[r]=s;for(var u=r+1;u<t;u++)for(var l=-e[u][r]/e[r][r],c=r;c<t+1;c++)r==c?e[u][c]=0:e[u][c]+=l*e[r][c]}for(var f=new Array(t),h=t-1;0<=h;h--){f[h]=e[h][t]/e[h][h];for(var p=h-1;0<=p;p--)e[p][t]-=e[p][h]*f[h]}return f},r.squaredDistance=l,r.squaredSegmentDistance=function(e,t,r,n,i,o){var a,s=i-r,u=o-n;return 0==s&&0==u||(1<(a=((e-r)*s+(t-n)*u)/(s*s+u*u))?(r=i,n=o):0<a&&(r+=s*a,n+=u*a)),l(e,t,r,n)},r.toDegrees=function(e){return 180*e/Math.PI},r.toFixed=n,r.toRadians=function(e){return e*Math.PI/180}},{}],280:[function(A,e,m){!function(y){!function(){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(m,"__esModule",{value:!0}),m.ResponseError=m.ClientError=void 0,m.getJSON=function(t){return new Promise(function(i,o){var e=new XMLHttpRequest;e.addEventListener("load",function(e){var t,r=e.target;if(!r.status||200<=r.status&&r.status<300){try{t=JSON.parse(r.responseText)}catch(e){var n="Error parsing response text as JSON: "+e.message;return void o(new Error(n))}i(t)}else o(new h(r))}),e.addEventListener("error",function(e){o(new p(e.target))}),e.open("GET",t),e.setRequestHeader("Accept","application/json"),e.send()})},m.jsonp=function(e,t,r,n){var i=document.createElement("script"),o="olc_"+(0,u.getUid)(t);function a(){delete window[o],i.parentNode.removeChild(i)}i.async=!0,i.src=e+(e.includes("?")?"&":"?")+(n||"callback")+"="+o;var s=setTimeout(function(){a(),r&&r()},1e4);window[o]=function(e){clearTimeout(s),a(),t(e)},document.head.appendChild(i)},m.overrideXHR=function(e){"undefined"!=typeof XMLHttpRequest&&(f=XMLHttpRequest),y.XMLHttpRequest=e},m.resolveUrl=function(e,t){return t.includes("://")?t:new URL(t,e).href},m.restoreXHR=function(){y.XMLHttpRequest=f};var u=A("./util.js");function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function e(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t,r){t=c(t);var n=e,t=s()?Reflect.construct(t,r||[],c(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function t(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t)}function a(e){var r="function"==typeof Map?new Map:void 0;return(a=function(e){if(null===e||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(e){return"function"==typeof t}}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==r){if(r.has(e))return r.get(e);r.set(e,t)}function t(){return function(e,t,r){var n;return s()?Reflect.construct.apply(null,arguments):((n=[null]).push.apply(n,t),t=new(e.bind.apply(e,n)),r&&l(t,r.prototype),t)}(e,arguments,c(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),l(t,e)})(e)}function s(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(s=function(){return!!e})()}function l(e,t){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var f,h=m.ResponseError=(t(g,a(Error)),e(g)),p=m.ClientError=(t(d,a(Error)),e(d));function d(e){var t;return r(this,d),(t=o(this,d,["Failed to issue request"])).name="ClientError",t.client=e,t}function g(e){var t;return r(this,g),(t=o(this,g,["Unexpected response status: "+e.status])).name="ResponseError",t.response=e,t}}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./util.js":404}],281:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.clear=function(e){for(var t in e)delete e[t]},r.isEmpty=function(e){for(var t in e)return!1;return!t}},{}],282:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;r.default={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"}},{}],283:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"METERS_PER_UNIT",{enumerable:!0,get:function(){return s.METERS_PER_UNIT}}),Object.defineProperty(r,"Projection",{enumerable:!0,get:function(){return n.default}}),r.addCommon=P,r.addCoordinateTransforms=function(e,t,r,n){e=b(e),t=b(t);(0,u.add)(e,t,E(r)),(0,u.add)(t,e,E(n))},r.addEquivalentProjections=_,r.addEquivalentTransforms=w,r.addProjection=m,r.addProjections=v,r.clearAllProjections=function(){(0,a.clear)(),(0,u.clear)()},r.clearUserProjection=function(){x=null},r.cloneTransform=y,r.createProjection=function(e,t){return e?"string"==typeof e?b(e):e:b(t)},r.createSafeCoordinateTransform=function(i,o,a){return function(e){i.canWrapX()&&(r=i.getExtent(),n=(0,l.getWidth)(r),e=e.slice(0),(t=(0,f.getWorldsAway)(e,i,n))&&(e[0]=e[0]-t*n),e[0]=(0,c.clamp)(e[0],r[0],r[2]),e[1]=(0,c.clamp)(e[1],r[1],r[3]));var t,r,n=a(e);return t&&o.canWrapX()&&(n[0]+=t*(0,l.getWidth)(o.getExtent())),n}},r.createTransformFromCoordinateTransform=E,r.disableCoordinateWarning=g,r.equivalent=function(e,t){var r;return e===t||(r=e.getUnits()===t.getUnits(),(e.getCode()===t.getCode()||C(e,t)===y)&&r)},r.fromLonLat=function(e,t){return g(),S(e,"EPSG:4326",void 0!==t?t:"EPSG:3857")},r.fromUserCoordinate=function(e,t){return x?S(e,x,t):(d&&!(0,f.equals)(e,[0,0])&&-180<=e[0]&&e[0]<=180&&-90<=e[1]&&e[1]<=90&&(d=!1,p.warn)("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates."),e)},r.fromUserExtent=function(e,t){return x?j(e,x,t):e},r.fromUserResolution=function(e,t){var r;return x&&(t=b(t).getMetersPerUnit(),r=x.getMetersPerUnit(),t)&&r?e*r/t:e},r.get=b,r.getPointResolution=function(e,t,r,n){var i,o=(e=b(e)).getPointResolutionFunc();{var a;o?(i=o(t,r),n&&n!==e.getUnits()&&(o=e.getMetersPerUnit())&&(i=i*o/s.METERS_PER_UNIT[n])):"degrees"==(o=e.getUnits())&&!n||"degrees"==n?i=t:(a=C(e,b("EPSG:4326")),i=a===A&&"degrees"!==o?t*e.getMetersPerUnit():(o=[r[0]-t/2,r[1],r[0]+t/2,r[1],r[0],r[1]-t/2,r[0],r[1]+t/2],o=a(o,o,2),((0,h.getDistance)(o.slice(0,2),o.slice(2,4))+(0,h.getDistance)(o.slice(4,6),o.slice(6,8)))/2),void 0!==(r=n?s.METERS_PER_UNIT[n]:e.getMetersPerUnit())&&(i/=r))}return i},r.getTransform=I,r.getTransformFromProjections=C,r.getUserProjection=function(){return x},r.identityTransform=A,r.setUserProjection=O,r.toLonLat=function(e,t){e=S(e,void 0!==t?t:"EPSG:3857","EPSG:4326"),t=e[0];return(t<-180||180<t)&&(e[0]=(0,c.modulo)(t+180,360)-180),e},r.toUserCoordinate=function(e,t){return x?S(e,t,x):e},r.toUserExtent=function(e,t){return x?j(e,t,x):e},r.toUserResolution=function(e,t){var r;return x&&(t=b(t).getMetersPerUnit(),r=x.getMetersPerUnit(),t)&&r?e*t/r:e},r.transform=S,r.transformExtent=j,r.transformWithProjections=function(e,t,r){return C(t,r)(e)},r.useGeographic=function(){O("EPSG:4326")};var n=(r=e("./proj/Projection.js"))&&r.__esModule?r:{default:r},i=e("./proj/epsg3857.js"),o=e("./proj/epsg4326.js"),s=e("./proj/Units.js"),a=e("./proj/projections.js"),u=e("./proj/transforms.js"),l=e("./extent.js"),c=e("./math.js"),f=e("./coordinate.js"),h=e("./sphere.js"),p=e("./console.js");var d=!0;function g(e){d=!(void 0===e||e)}function y(e,t){if(void 0!==t)for(var r=0,n=e.length;r<n;++r)t[r]=e[r];else t=e.slice();return t}function A(e,t){if(void 0!==t&&e!==t){for(var r=0,n=e.length;r<n;++r)t[r]=e[r];e=t}return e}function m(e){(0,a.add)(e.getCode(),e),(0,u.add)(e,e,y)}function v(e){e.forEach(m)}function b(e){return"string"==typeof e?(0,a.get)(e):e||null}function _(e){v(e),e.forEach(function(t){e.forEach(function(e){t!==e&&(0,u.add)(t,e,y)})})}function w(e,r,n,i){e.forEach(function(t){r.forEach(function(e){(0,u.add)(t,e,n),(0,u.add)(e,t,i)})})}function E(l){return function(e,t,r){var n=e.length;r=void 0!==r?r:2,t=void 0!==t?t:new Array(n);for(var i=0;i<n;i+=r)for(var o=l(e.slice(i,i+r)),a=o.length,s=0,u=r;s<u;++s)t[i+s]=a<=s?e[i+s]:o[s];return t}}function C(e,t){e=e.getCode(),t=t.getCode();return(0,u.get)(e,t)||A}function I(e,t){return C(b(e),b(t))}function S(e,t,r){return I(t,r)(e,void 0,e.length)}function j(e,t,r,n){t=I(t,r);return(0,l.applyTransform)(e,t,void 0,n)}var x=null;function O(e){x=b(e)}function P(){_(i.PROJECTIONS),_(o.PROJECTIONS),w(o.PROJECTIONS,i.PROJECTIONS,i.fromEPSG4326,i.toEPSG4326)}P()},{"./console.js":115,"./coordinate.js":128,"./extent.js":142,"./math.js":279,"./proj/Projection.js":284,"./proj/Units.js":285,"./proj/epsg3857.js":286,"./proj/epsg4326.js":287,"./proj/projections.js":289,"./proj/transforms.js":290,"./sphere.js":379}],284:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("./Units.js");function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}e=function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.code_=t.code,this.units_=t.units,this.extent_=void 0!==t.extent?t.extent:null,this.worldExtent_=void 0!==t.worldExtent?t.worldExtent:null,this.axisOrientation_=void 0!==t.axisOrientation?t.axisOrientation:"enu",this.global_=void 0!==t.global&&t.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit},(s=[{key:"canWrapX",value:function(){return this.canWrapX_}},{key:"getCode",value:function(){return this.code_}},{key:"getExtent",value:function(){return this.extent_}},{key:"getUnits",value:function(){return this.units_}},{key:"getMetersPerUnit",value:function(){return this.metersPerUnit_||n.METERS_PER_UNIT[this.units_]}},{key:"getWorldExtent",value:function(){return this.worldExtent_}},{key:"getAxisOrientation",value:function(){return this.axisOrientation_}},{key:"isGlobal",value:function(){return this.global_}},{key:"setGlobal",value:function(e){this.global_=e,this.canWrapX_=!(!e||!this.extent_)}},{key:"getDefaultTileGrid",value:function(){return this.defaultTileGrid_}},{key:"setDefaultTileGrid",value:function(e){this.defaultTileGrid_=e}},{key:"setExtent",value:function(e){this.extent_=e,this.canWrapX_=!(!this.global_||!e)}},{key:"setWorldExtent",value:function(e){this.worldExtent_=e}},{key:"setGetPointResolution",value:function(e){this.getPointResolutionFunc_=e}},{key:"getPointResolutionFunc",value:function(){return this.getPointResolutionFunc_}}])&&o(e.prototype,s),a&&o(e,a),Object.defineProperty(e,"prototype",{writable:!1});var a,s=e;r.default=s},{"./Units.js":285}],285:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.METERS_PER_UNIT=void 0,r.fromCode=function(e){return n[e]};var n={9001:"m",9002:"ft",9003:"us-ft",9101:"radians",9102:"degrees"};r.METERS_PER_UNIT={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937}},{}],286:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.WORLD_EXTENT=r.RADIUS=r.PROJECTIONS=r.MAX_SAFE_Y=r.HALF_SIZE=r.EXTENT=void 0,r.fromEPSG4326=function(e,t,r){var n=e.length;r=1<r?r:2,void 0===t&&(t=2<r?e.slice():new Array(n));for(var i=0;i<n;i+=r){t[i]=h*e[i]/180;var o=f*Math.log(Math.tan(Math.PI*(+e[i+1]+90)/360));g<o?o=g:o<-g&&(o=-g),t[i+1]=o}return t},r.toEPSG4326=function(e,t,r){var n=e.length;r=1<r?r:2,void 0===t&&(t=2<r?e.slice():new Array(n));for(var i=0;i<n;i+=r)t[i]=180*e[i]/h,t[i+1]=360*Math.atan(Math.exp(e[i+1]/f))/Math.PI-90;return t};var o=(e=e("./Projection.js"))&&e.__esModule?e:{default:e};function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function s(e,t,r){t=l(t);var n=e,t=u()?Reflect.construct(t,r||[],l(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(u=function(){return!!e})()}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var f=r.RADIUS=6378137,h=r.HALF_SIZE=Math.PI*f,p=r.EXTENT=[-h,-h,h,h],d=r.WORLD_EXTENT=[-180,-85,180,85],g=r.MAX_SAFE_Y=f*Math.log(Math.tan(Math.PI/2)),e=function(){function t(e){if(this instanceof t)return s(this,t,[{code:e,units:"m",extent:p,global:!0,worldExtent:d,getPointResolution:function(e,t){return e/Math.cosh(t[1]/f)}}]);throw new TypeError("Cannot call a class as a function")}var e,r,n=t,i=o.default;if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function");return n.prototype=Object.create(i&&i.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),i&&c(n,i),n=t,e&&a(n.prototype,e),r&&a(n,r),Object.defineProperty(n,"prototype",{writable:!1}),n}();r.PROJECTIONS=[new e("EPSG:3857"),new e("EPSG:102100"),new e("EPSG:102113"),new e("EPSG:900913"),new e("http://www.opengis.net/def/crs/EPSG/0/3857"),new e("http://www.opengis.net/gml/srs/epsg.xml#3857")]},{"./Projection.js":284}],287:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.RADIUS=r.PROJECTIONS=r.METERS_PER_UNIT=r.EXTENT=void 0;var o=(e=e("./Projection.js"))&&e.__esModule?e:{default:e};function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function s(e,t,r){t=l(t);var n=e,t=u()?Reflect.construct(t,r||[],l(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(u=function(){return!!e})()}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}r.RADIUS=6378137;var f=r.EXTENT=[-180,-90,180,90],h=r.METERS_PER_UNIT=6378137*Math.PI/180,e=function(){function r(e,t){if(this instanceof r)return s(this,r,[{code:e,units:"degrees",extent:f,axisOrientation:t,global:!0,metersPerUnit:h,worldExtent:f}]);throw new TypeError("Cannot call a class as a function")}var e,t,n=r,i=o.default;if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function");return n.prototype=Object.create(i&&i.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),i&&c(n,i),n=r,e&&a(n.prototype,e),t&&a(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}();r.PROJECTIONS=[new e("CRS:84"),new e("EPSG:4326","neu"),new e("urn:ogc:def:crs:OGC:1.3:CRS84"),new e("urn:ogc:def:crs:OGC:2:84"),new e("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new e("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new e("http://www.opengis.net/def/crs/EPSG/0/4326","neu")]},{"./Projection.js":284}],288:[function(e,t,r){"use strict";function x(e){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.epsgLookupMapTiler=function(r){var t=n(O().mark(function e(i){var t;return O().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.maptiler.com/coordinates/search/code:".concat(i,".json?transformations=true&exports=true&key=").concat(r));case 2:if((t=e.sent).ok){e.next=5;break}throw new Error("Unexpected response from maptiler.com: ".concat(t.status));case 5:return e.abrupt("return",t.json().then(function(e){e=e.results;if(0<(null==e?void 0:e.length)){e=e.filter(function(e){var t;return"EPSG"===(null==(t=e.id)?void 0:t.authority)&&(null==(t=e.id)?void 0:t.code)===i})[0];if(e){var t=e.transformations;if(0<(null==t?void 0:t.length)){var r,n=e.default_transformation;if(0<t.filter(function(e){var t;return(null==(t=e.id)?void 0:t.authority)===(null==n?void 0:n.authority)&&(null==(t=e.id)?void 0:t.code)===(null==n?void 0:n.code)&&0===(null==(t=e.grids)?void 0:t.length)}).length)return null==(r=e.exports)?void 0:r.proj4;t=null==(r=t.filter(function(e){var t;return 0===(null==(t=e.grids)?void 0:t.length)&&"EPSG"===(null==(t=e.target_crs)?void 0:t.authority)&&4326===(null==(t=e.target_crs)?void 0:t.code)&&!1===e.deprecated&&!0===e.usable}).sort(function(e,t){return e.accuracy-t.accuracy})[0])||null==(r=r.exports)?void 0:r.proj4;if(t)return t}return null==(r=e.exports)?void 0:r.proj4}}}));case 6:case"end":return e.stop()}},e)}));return function(e){return t.apply(this,arguments)}},r.fromEPSGCode=function(e){return s.apply(this,arguments)},r.getEPSGLookup=function(){return a},r.isRegistered=function(){return!!g},r.register=i,r.setEPSGLookup=function(e){a=e},r.unregister=function(){g=null};var h=(r=e("./Projection.js"))&&r.__esModule?r:{default:r},p=e("../proj.js"),d=e("./transforms.js");function O(){O=function(){return a};var u,a={},e=Object.prototype,l=e.hasOwnProperty,c=Object.defineProperty||function(e,t,r){e[t]=r.value},t="function"==typeof Symbol?Symbol:{},n=t.iterator||"@@iterator",r=t.asyncIterator||"@@asyncIterator",i=t.toStringTag||"@@toStringTag";function o(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{o({},"")}catch(u){o=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var i,o,a,s,t=t&&t.prototype instanceof A?t:A,t=Object.create(t.prototype),n=new S(n||[]);return c(t,"_invoke",{value:(i=e,o=r,a=n,s=h,function(e,t){if(s===d)throw Error("Generator is already running");if(s===g){if("throw"===e)throw t;return{value:u,done:!0}}for(a.method=e,a.arg=t;;){var r=a.delegate;if(r){r=function e(t,r){var n=r.method,i=t.iterator[n];if(i===u)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=u,e(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;n=f(i,t.iterator,r.arg);if("throw"===n.type)return r.method="throw",r.arg=n.arg,r.delegate=null,y;i=n.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=u),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}(r,a);if(r){if(r===y)continue;return r}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(s===h)throw s=g,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);s=d;r=f(i,o,a);if("normal"===r.type){if(s=a.done?g:p,r.arg===y)continue;return{value:r.arg,done:a.done}}"throw"===r.type&&(s=g,a.method="throw",a.arg=r.arg)}})}),t}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}a.wrap=s;var h="suspendedStart",p="suspendedYield",d="executing",g="completed",y={};function A(){}function m(){}function v(){}var t={},b=(o(t,n,function(){return this}),Object.getPrototypeOf),b=b&&b(b(j([]))),_=(b&&b!==e&&l.call(b,n)&&(t=b),v.prototype=A.prototype=Object.create(t));function w(e){["next","throw","return"].forEach(function(t){o(e,t,function(e){return this._invoke(t,e)})})}function E(a,s){var t;c(this,"_invoke",{value:function(r,n){function e(){return new s(function(e,t){!function t(e,r,n,i){var o,e=f(a[e],a,r);if("throw"!==e.type)return(r=(o=e.arg).value)&&"object"==x(r)&&l.call(r,"__await")?s.resolve(r.__await).then(function(e){t("next",e,n,i)},function(e){t("throw",e,n,i)}):s.resolve(r).then(function(e){o.value=e,n(o)},function(e){return t("throw",e,n,i)});i(e.arg)}(r,n,e,t)})}return t=t?t.then(e,e):e()}})}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function j(t){if(t||""===t){var r,e=t[n];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return r=-1,(e=function e(){for(;++r<t.length;)if(l.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=u,e.done=!0,e}).next=e}throw new TypeError(x(t)+" is not iterable")}return c(_,"constructor",{value:m.prototype=v,configurable:!0}),c(v,"constructor",{value:m,configurable:!0}),m.displayName=o(v,i,"GeneratorFunction"),a.isGeneratorFunction=function(e){e="function"==typeof e&&e.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},a.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,o(e,i,"GeneratorFunction")),e.prototype=Object.create(_),e},a.awrap=function(e){return{__await:e}},w(E.prototype),o(E.prototype,r,function(){return this}),a.AsyncIterator=E,a.async=function(e,t,r,n,i){void 0===i&&(i=Promise);var o=new E(s(e,t,r,n),i);return a.isGeneratorFunction(t)?o:o.next().then(function(e){return e.done?e.value:o.next()})},w(_),o(_,i,"Generator"),o(_,n,function(){return this}),o(_,"toString",function(){return"[object Generator]"}),a.keys=function(e){var t,r=Object(e),n=[];for(t in r)n.push(t);return n.reverse(),function e(){for(;n.length;){var t=n.pop();if(t in r)return e.value=t,e.done=!1,e}return e.done=!0,e}},a.values=j,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=u,this.done=!1,this.delegate=null,this.method="next",this.arg=u,this.tryEntries.forEach(I),!e)for(var t in this)"t"===t.charAt(0)&&l.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=u)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(r){if(this.done)throw r;var n=this;function e(e,t){return o.type="throw",o.arg=r,n.next=e,t&&(n.method="next",n.arg=u),!!t}for(var t=this.tryEntries.length-1;0<=t;--t){var i=this.tryEntries[t],o=i.completion;if("root"===i.tryLoc)return e("end");if(i.tryLoc<=this.prev){var a=l.call(i,"catchLoc"),s=l.call(i,"finallyLoc");if(a&&s){if(this.prev<i.catchLoc)return e(i.catchLoc,!0);if(this.prev<i.finallyLoc)return e(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return e(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return e(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;0<=r;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&l.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}var o=(i=i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc?null:i)?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var r,n,i=this.tryEntries[t];if(i.tryLoc===e)return"throw"===(r=i.completion).type&&(n=r.arg,I(i)),n}throw Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:j(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=u),y}},a}function u(e,t,r,n,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return r(e)}s.done?t(u):Promise.resolve(u).then(n,i)}function n(s){return function(){var e=this,a=arguments;return new Promise(function(t,r){var n=s.apply(e,a);function i(e){u(n,t,r,i,o,"next",e)}function o(e){u(n,t,r,i,o,"throw",e)}i(void 0)})}}var g=null;function i(e){g=e;for(var t=Object.keys(e.defs),r=t.length,n=0;n<r;++n){var i,o,a=t[n];(0,p.get)(a)||((o=(i=e.defs(a)).units)||"longlat"!==i.projName||(o="degrees"),(0,p.addProjection)(new h.default({code:a,axisOrientation:i.axis,metersPerUnit:i.to_meter,units:o})))}for(n=0;n<r;++n)for(var s=t[n],u=(0,p.get)(s),l=0;l<r;++l){var c=t[l],f=(0,p.get)(c);(0,d.get)(s,c)||(e.defs[s]===e.defs[c]?(0,p.addEquivalentProjections)([u,f]):(c=e(s,c),(0,p.addCoordinateTransforms)(u,f,(0,p.createSafeCoordinateTransform)(u,f,c.forward),(0,p.createSafeCoordinateTransform)(f,u,c.inverse))))}}o=n(O().mark(function e(t){var r;return O().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://epsg.io/".concat(t,".proj4"));case 2:if((r=e.sent).ok){e.next=5;break}throw new Error("Unexpected response from epsg.io: ".concat(r.status));case 5:return e.abrupt("return",r.text());case 6:case"end":return e.stop()}},e)}));var o,a=function(e){return o.apply(this,arguments)};function s(){return(s=n(O().mark(function e(t){var r,n;return O().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("string"==typeof t&&(t=parseInt(t.split(":").pop(),10)),r=g){e.next=4;break}throw new Error("Proj4 must be registered first with register(proj4)");case 4:if(n="EPSG:"+t,r.defs(n))return e.abrupt("return",(0,p.get)(n));e.next=7;break;case 7:return e.t0=r,e.t1=n,e.next=11,a(t);case 11:return e.t2=e.sent,e.t0.defs.call(e.t0,e.t1,e.t2),i(r),e.abrupt("return",(0,p.get)(n));case 15:case"end":return e.stop()}},e)}))).apply(this,arguments)}},{"../proj.js":283,"./Projection.js":284,"./transforms.js":290}],289:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.add=function(e,t){n[e]=t},r.clear=function(){n={}},r.get=function(e){return n[e]||n[e.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null};var n={}},{}],290:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.add=function(e,t,r){e=e.getCode(),t=t.getCode();e in i||(i[e]={}),i[e][t]=r},r.clear=function(){i={}},r.get=function(e,t){var r;return r=e in i&&t in i[e]?i[e][t]:r},r.remove=function(e,t){var e=e.getCode(),t=t.getCode(),r=i[e][t];return delete i[e][t],(0,n.isEmpty)(i[e])&&delete i[e],r};var n=e("../obj.js"),i={}},{"../obj.js":281}],291:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getRenderPixel=function(e,t){return(0,u.apply)(e.inversePixelTransform,t.slice(0))},r.getVectorContext=function(e){var t,r,n,i,o,a;if(e.context instanceof CanvasRenderingContext2D)return r=e.inversePixelTransform[0],n=e.inversePixelTransform[1],r=Math.sqrt(r*r+n*n),n=e.frameState,i=(0,u.multiply)(e.inversePixelTransform.slice(),n.coordinateToPixelTransform),o=(0,l.getSquaredTolerance)(n.viewState.resolution,r),(a=(0,c.getUserProjection)())&&(t=(0,c.getTransformFromProjections)(a,n.viewState.projection)),new s.default(e.context,r,n.extent,i,n.viewState.rotation,o,t);throw new Error("Only works for render events from Canvas 2D layers")},r.toContext=function(e,t){var r=e.canvas,n=(t=t||{}).pixelRatio||i.DEVICE_PIXEL_RATIO,t=t.size,t=(t&&(r.width=t[0]*n,r.height=t[1]*n,r.style.width=t[0]+"px",r.style.height=t[1]+"px"),[0,0,r.width,r.height]),r=(0,u.scale)((0,u.create)(),n,n);return new s.default(e,n,t,r,0)};var s=(r=e("./render/canvas/Immediate.js"))&&r.__esModule?r:{default:r},i=e("./has.js"),u=e("./transform.js"),l=e("./renderer/vector.js"),c=e("./proj.js")},{"./has.js":233,"./proj.js":283,"./render/canvas/Immediate.js":303,"./renderer/vector.js":322,"./transform.js":402}],292:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("../Disposable.js")),a=n(e("../geom/Polygon.js"));function n(e){return e&&e.__esModule?e:{default:e}}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function u(e,t,r){t=c(t);var n=e,t=l()?Reflect.construct(t,r||[],c(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(l=function(){return!!e})()}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}e=function(){function r(e){var t;if(this instanceof r)return(t=u(this,r)).geometry_=null,t.element_=document.createElement("div"),t.element_.style.position="absolute",t.element_.style.pointerEvents="auto",t.element_.className="ol-box "+e,t.map_=null,t.startPixel_=null,t.endPixel_=null,t;throw new TypeError("Cannot call a class as a function")}var e,t=r,n=o.default;if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&f(t,n),t=r,(n=[{key:"disposeInternal",value:function(){this.setMap(null)}},{key:"render_",value:function(){var e=this.startPixel_,t=this.endPixel_,r=this.element_.style;r.left=Math.min(e[0],t[0])+"px",r.top=Math.min(e[1],t[1])+"px",r.width=Math.abs(t[0]-e[0])+"px",r.height=Math.abs(t[1]-e[1])+"px"}},{key:"setMap",value:function(e){var t;this.map_&&(this.map_.getOverlayContainer().removeChild(this.element_),(t=this.element_.style).left="inherit",t.top="inherit",t.width="inherit",t.height="inherit"),this.map_=e,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}},{key:"setPixels",value:function(e,t){this.startPixel_=e,this.endPixel_=t,this.createOrUpdateGeometry(),this.render_()}},{key:"createOrUpdateGeometry",value:function(){var e,t;this.map_&&(e=this.startPixel_,t=this.endPixel_,(t=[e,[e[0],t[1]],t,[t[0],e[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_))[4]=t[0].slice(),this.geometry_?this.geometry_.setCoordinates([t]):this.geometry_=new a.default([t]))}},{key:"getGeometry",value:function(){return this.geometry_}}])&&s(t.prototype,n),e&&s(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();r.default=e},{"../Disposable.js":81,"../geom/Polygon.js":211}],293:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=(e=e("../events/Event.js"))&&e.__esModule?e:{default:e};function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function s(e,t,r){t=l(t);var n=e,t=u()?Reflect.construct(t,r||[],l(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(u=function(){return!!e})()}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}e=function(){function i(e,t,r,n){if(this instanceof i)return(e=s(this,i,[e])).inversePixelTransform=t,e.frameState=r,e.context=n,e;throw new TypeError("Cannot call a class as a function")}var e,t,r=i,n=o.default;if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");return r.prototype=Object.create(n&&n.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),n&&c(r,n),r=i,e&&a(r.prototype,e),t&&a(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}();r.default=e},{"../events/Event.js":133}],294:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;r.default={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"}},{}],295:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,r.toFeature=function(e,t){var r=e.getId(),n=w(e),e=e.getProperties(),i=new o.default;return void 0!==t&&i.setGeometryName(t),i.setGeometry(n),void 0!==r&&i.setId(r),i.setProperties(e,!0),i},r.toGeometry=w;var o=(m=e("../Feature.js"))&&m.__esModule?m:{default:m},a=e("../geom.js"),n=e("../transform.js"),i=e("../extent.js"),s=e("../geom/flat/simplify.js"),u=e("../array.js"),l=e("../geom/flat/interiorpoint.js"),c=e("../proj.js"),f=e("../geom/flat/orient.js"),h=e("../geom/flat/interpolate.js"),p=e("../geom/flat/center.js"),d=e("../functions.js"),g=e("../geom/flat/transform.js");function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function A(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=y(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=y(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==y(e)?e:e+""}(n.key),n)}}var m,v,b=(0,n.create)(),e=(m=_,(e=[{key:"get",value:function(e){return this.properties_[e]}},{key:"getExtent",value:function(){return this.extent_||(this.extent_="Point"===this.type_?(0,i.createOrUpdateFromCoordinate)(this.flatCoordinates_):(0,i.createOrUpdateFromFlatCoordinates)(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}},{key:"getFlatInteriorPoint",value:function(){var e;return this.flatInteriorPoints_||(e=(0,i.getCenter)(this.getExtent()),this.flatInteriorPoints_=(0,l.getInteriorPointOfArray)(this.flatCoordinates_,0,this.ends_,2,e,0)),this.flatInteriorPoints_}},{key:"getFlatInteriorPoints",value:function(){var e,t;return this.flatInteriorPoints_||(e=(0,f.inflateEnds)(this.flatCoordinates_,this.ends_),t=(0,p.linearRingss)(this.flatCoordinates_,0,e,2),this.flatInteriorPoints_=(0,l.getInteriorPointsOfMultiArray)(this.flatCoordinates_,0,e,2,t)),this.flatInteriorPoints_}},{key:"getFlatMidpoint",value:function(){return this.flatMidpoints_||(this.flatMidpoints_=(0,h.interpolatePoint)(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}},{key:"getFlatMidpoints",value:function(){if(!this.flatMidpoints_){this.flatMidpoints_=[];for(var e=this.flatCoordinates_,t=0,r=this.ends_,n=0,i=r.length;n<i;++n){var o=r[n],a=(0,h.interpolatePoint)(e,t,o,2,.5);(0,u.extend)(this.flatMidpoints_,a),t=o}}return this.flatMidpoints_}},{key:"getId",value:function(){return this.id_}},{key:"getOrientedFlatCoordinates",value:function(){return this.flatCoordinates_}},{key:"getGeometry",value:function(){return this}},{key:"getSimplifiedGeometry",value:function(e){return this}},{key:"simplifyTransformed",value:function(e,t){return this}},{key:"getProperties",value:function(){return this.properties_}},{key:"getPropertiesInternal",value:function(){return this.properties_}},{key:"getStride",value:function(){return this.stride_}},{key:"getStyleFunction",value:function(){return this.styleFunction}},{key:"getType",value:function(){return this.type_}},{key:"transform",value:function(e){var t=(e=(0,c.get)(e)).getExtent(),e=e.getWorldExtent();t&&e&&(t=(0,i.getHeight)(e)/(0,i.getHeight)(t),(0,n.compose)(b,e[0],e[3],t,-t,0,0,0),(0,g.transform2D)(this.flatCoordinates_,0,this.flatCoordinates_.length,2,b,this.flatCoordinates_))}},{key:"applyTransform",value:function(e){e(this.flatCoordinates_,this.flatCoordinates_,this.stride_)}},{key:"clone",value:function(){var e;return new _(this.type_,this.flatCoordinates_.slice(),null==(e=this.ends_)?void 0:e.slice(),this.stride_,Object.assign({},this.properties_),this.id_)}},{key:"getEnds",value:function(){return this.ends_}},{key:"enableSimplifyTransformed",value:function(){var i=this;return this.simplifyTransformed=(0,d.memoizeOne)(function(e,t){if(e!==i.squaredTolerance_){i.simplifiedGeometry_=i.clone(),t&&i.simplifiedGeometry_.applyTransform(t);var r,n=i.simplifiedGeometry_.getFlatCoordinates();switch(i.type_){case"LineString":n.length=(0,s.douglasPeucker)(n,0,i.simplifiedGeometry_.flatCoordinates_.length,i.simplifiedGeometry_.stride_,e,n,0),r=[n.length];break;case"MultiLineString":n.length=(0,s.douglasPeuckerArray)(n,0,i.simplifiedGeometry_.ends_,i.simplifiedGeometry_.stride_,e,n,0,r=[]);break;case"Polygon":r=[],n.length=(0,s.quantizeArray)(n,0,i.simplifiedGeometry_.ends_,i.simplifiedGeometry_.stride_,Math.sqrt(e),n,0,r)}r&&(i.simplifiedGeometry_=new _(i.type_,n,r,2,i.properties_,i.id_)),i.squaredTolerance_=e}return i.simplifiedGeometry_}),this}}])&&A(m.prototype,e),v&&A(m,v),Object.defineProperty(m,"prototype",{writable:!1}),m);function _(e,t,r,n,i,o){if(!(this instanceof _))throw new TypeError("Cannot call a class as a function");this.styleFunction,this.extent_,this.id_=o,this.type_=e,this.flatCoordinates_=t,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=r||null,this.properties_=i,this.squaredTolerance_,this.stride_=n,this.simplifiedGeometry_}function w(e){var t=e.getType();switch(t){case"Point":return new a.Point(e.getFlatCoordinates());case"MultiPoint":return new a.MultiPoint(e.getFlatCoordinates(),"XY");case"LineString":return new a.LineString(e.getFlatCoordinates(),"XY");case"MultiLineString":return new a.MultiLineString(e.getFlatCoordinates(),"XY",e.getEnds());case"Polygon":var r=e.getFlatCoordinates(),n=e.getEnds(),i=(0,f.inflateEnds)(r,n);return 1<i.length?new a.MultiPolygon(r,"XY",i):new a.Polygon(r,"XY",n);default:throw new Error("Invalid geometry type:"+t)}}e.prototype.getFlatCoordinates=e.prototype.getOrientedFlatCoordinates;r.default=e},{"../Feature.js":82,"../array.js":110,"../extent.js":142,"../functions.js":200,"../geom.js":201,"../geom/flat/center.js":214,"../geom/flat/interiorpoint.js":221,"../geom/flat/interpolate.js":222,"../geom/flat/orient.js":226,"../geom/flat/simplify.js":229,"../geom/flat/transform.js":232,"../proj.js":283,"../transform.js":402}],296:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;o=function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function")},(s=[{key:"drawCustom",value:function(e,t,r,n,i){}},{key:"drawGeometry",value:function(e){}},{key:"setStyle",value:function(e){}},{key:"drawCircle",value:function(e,t,r){}},{key:"drawFeature",value:function(e,t,r){}},{key:"drawGeometryCollection",value:function(e,t,r){}},{key:"drawLineString",value:function(e,t,r){}},{key:"drawMultiLineString",value:function(e,t,r){}},{key:"drawMultiPoint",value:function(e,t,r){}},{key:"drawMultiPolygon",value:function(e,t,r){}},{key:"drawPoint",value:function(e,t,r){}},{key:"drawPolygon",value:function(e,t,r){}},{key:"drawText",value:function(e,t,r){}},{key:"setFillStrokeStyle",value:function(e,t){}},{key:"setImageStyle",value:function(e,t){}},{key:"setTextStyle",value:function(e,t){}}])&&n(o.prototype,s),a&&n(o,a),Object.defineProperty(o,"prototype",{writable:!1});var o,a,s=o;r.default=s},{}],297:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.defaultTextBaseline=r.defaultTextAlign=r.defaultStrokeStyle=r.defaultPadding=r.defaultMiterLimit=r.defaultLineWidth=r.defaultLineJoin=r.defaultLineDashOffset=r.defaultLineDash=r.defaultLineCap=r.defaultFont=r.defaultFillStyle=r.checkedFonts=void 0,r.drawImageOrLabel=function(e,t,r,n,i,o,a,s,u,l,c){e.save(),1!==r&&(void 0===e.globalAlpha?e.globalAlpha=function(e){return e.globalAlpha*=r}:e.globalAlpha*=r),t&&e.transform.apply(e,t),n.contextInstructions?(e.translate(u,l),e.scale(c[0],c[1]),function(e,t){for(var r=e.contextInstructions,n=0,i=r.length;n<i;n+=2)Array.isArray(r[n+1])?t[r[n]].apply(t,r[n+1]):t[r[n]]=r[n+1]}(n,e)):c[0]<0||c[1]<0?(e.translate(u,l),e.scale(c[0],c[1]),e.drawImage(n,i,o,a,s,0,0,a,s)):e.drawImage(n,i,o,a,s,u,l,a*c[0],s*c[1]),e.restore()},r.getTextDimensions=function(e,t){for(var r=[],n=[],i=[],o=0,a=0,s=0,u=0,l=0,c=t.length;l<=c;l+=2){var f,h=t[l];u="\n"!==h&&l!==c?(f=t[l+1]||e.font,h=w(f,h),r.push(h),a+=h,h=m(f),n.push(h),Math.max(u,h)):(o=Math.max(o,a),i.push(a),s+=u,a=0)}return{width:o,height:s,widths:r,heights:n,lineWidths:i}},r.measureAndCacheTextWidth=function(r,e,t){var n;return e in t?t[e]:(n=e.split("\n").reduce(function(e,t){return Math.max(e,w(r,t))},0),t[e]=n)},r.measureTextHeight=void 0,r.measureTextWidth=w,r.registerFont=void 0,r.rotateAtOffset=function(e,t,r,n){0!==t&&(e.translate(r,n),e.rotate(t),e.translate(-r,-n))},r.textHeights=void 0;var n=(n=e("../Object.js"))&&n.__esModule?n:{default:n},i=e("../has.js"),o=e("../obj.js"),a=e("../dom.js"),s=e("../css.js");r.defaultFont="10px sans-serif",r.defaultFillStyle="#000",r.defaultLineCap="round",r.defaultLineDash=[],r.defaultLineDashOffset=0,r.defaultLineJoin="round",r.defaultMiterLimit=10,r.defaultStrokeStyle="#000",r.defaultTextAlign="center",r.defaultTextBaseline="middle",r.defaultPadding=[0,0,0,0],r.defaultLineWidth=1;var u,l,c,f,h,p,d,g=r.checkedFonts=new n.default,y=null,A=r.textHeights={},m=(r.registerFont=(p=(h=["monospace","serif"]).length,d="wmytzilWMYTZIL@#/&?$%10",function(e){var t=(0,s.getFontParameters)(e);if(t)for(var r=t.families,n=0,i=r.length;n<i;++n){var o=r[n],a=t.style+"\n"+t.weight+"\n"+o;void 0===g.get(a)&&(g.set(a,100,!0),v(t.style,t.weight,o)||(g.set(a,0,!0),void 0===c&&(c=setInterval(b,32))))}}),r.measureTextHeight=function(e){var t,r,n=A[e];return null==n&&(i.WORKER_OFFSCREEN_CANVAS?(t=(0,s.getFontParameters)(e),r=_(e,"Žg"),n=(isNaN(Number(t.lineHeight))?1.2:Number(t.lineHeight))*(r.actualBoundingBoxAscent+r.actualBoundingBoxDescent)):(l||((l=document.createElement("div")).innerHTML="M",l.style.minHeight="0",l.style.maxHeight="none",l.style.height="auto",l.style.padding="0",l.style.border="none",l.style.position="absolute",l.style.display="block",l.style.left="-99999px"),l.style.font=e,document.body.appendChild(l),n=l.offsetHeight,document.body.removeChild(l)),A[e]=n),n});function v(e,t,r){for(var n=!0,i=0;i<p;++i){var o=h[i];f=w(e+" "+t+" 32px "+o,d),r!=o&&(o=w(e+" "+t+" 32px "+r+","+o,d),n=n&&o!=f)}return!!n}function b(){for(var e=!0,t=g.getKeys(),r=0,n=t.length;r<n;++r){var i=t[r];g.get(i)<100&&(v.apply(this,i.split("\n"))?((0,o.clear)(A),y=null,u=void 0,g.set(i,100)):(g.set(i,g.get(i)+1,!0),e=!1))}e&&(clearInterval(c),c=void 0)}function _(e,t){return y=y||(0,a.createCanvasContext2D)(1,1),e!=u&&(y.font=e,u=y.font),y.measureText(t)}function w(e,t){return _(e,t).width}},{"../Object.js":96,"../css.js":129,"../dom.js":130,"../has.js":233,"../obj.js":281}],298:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var A=o(e("./Instruction.js")),y=o(e("../../extent/Relationship.js")),n=o(e("../VectorContext.js")),i=e("../../colorlike.js"),m=e("../../extent.js"),a=e("../canvas.js"),l=e("../../array.js"),v=e("../../geom/flat/inflate.js");function o(e){return e&&e.__esModule?e:{default:e}}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=s(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==s(e)?e:e+""}(n.key),n)}}function c(e,t,r){t=h(t);var n=e,t=f()?Reflect.construct(t,r||[],h(e).constructor):t.apply(e,r);if(t&&("object"==s(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(f=function(){return!!e})()}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}e=function(){function o(e,t,r,n){var i;if(this instanceof o)return(i=c(this,o)).tolerance=e,i.maxExtent=t,i.pixelRatio=n,i.maxLineWidth=0,i.resolution=r,i.beginGeometryInstruction1_=null,i.beginGeometryInstruction2_=null,i.bufferedMaxExtent_=null,i.instructions=[],i.coordinates=[],i.tmpCoordinate_=[],i.hitDetectionInstructions=[],i.state={},i;throw new TypeError("Cannot call a class as a function")}var e,t=o,r=n.default;if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&p(t,r),t=o,(r=[{key:"applyPixelRatio",value:function(e){var t=this.pixelRatio;return 1==t?e:e.map(function(e){return e*t})}},{key:"appendFlatPointCoordinates",value:function(e,t){for(var r=this.getBufferedMaxExtent(),n=this.tmpCoordinate_,i=this.coordinates,o=i.length,a=0,s=e.length;a<s;a+=t)n[0]=e[a],n[1]=e[a+1],(0,m.containsCoordinate)(r,n)&&(i[o++]=n[0],i[o++]=n[1]);return o}},{key:"appendFlatLineCoordinates",value:function(e,t,r,n,i,o){var a=this.coordinates,s=a.length,u=this.getBufferedMaxExtent();o&&(t+=n);for(var l,c,f=e[t],h=e[t+1],p=this.tmpCoordinate_,d=!0,g=t+n;g<r;g+=n)p[0]=e[g],p[1]=e[g+1],(c=(0,m.coordinateRelationship)(u,p))!==l?(d&&(a[s++]=f,a[s++]=h,d=!1),a[s++]=p[0],a[s++]=p[1]):d=c!==y.default.INTERSECTING||(a[s++]=p[0],a[s++]=p[1],!1),f=p[0],h=p[1],l=c;return(i&&d||g===t+n)&&(a[s++]=f,a[s++]=h),s}},{key:"drawCustomCoordinates_",value:function(e,t,r,n,i){for(var o=0,a=r.length;o<a;++o){var s=r[o],u=this.appendFlatLineCoordinates(e,t,s,n,!1,!1);i.push(u),t=s}return t}},{key:"drawCustom",value:function(e,t,r,n,i){this.beginGeometry(e,t,i);var o,a,s=e.getType(),u=e.getStride(),l=this.coordinates.length;switch(s){case"MultiPolygon":for(var c=e.getOrientedFlatCoordinates(),f=[],h=e.getEndss(),p=y=0,d=h.length;p<d;++p){var g=[],y=this.drawCustomCoordinates_(c,y,h[p],u,g);f.push(g)}this.instructions.push([A.default.CUSTOM,l,f,e,r,v.inflateMultiCoordinatesArray,i]),this.hitDetectionInstructions.push([A.default.CUSTOM,l,f,e,n||r,v.inflateMultiCoordinatesArray,i]);break;case"Polygon":case"MultiLineString":a=[],c="Polygon"==s?e.getOrientedFlatCoordinates():e.getFlatCoordinates(),y=this.drawCustomCoordinates_(c,0,e.getEnds(),u,a),this.instructions.push([A.default.CUSTOM,l,a,e,r,v.inflateCoordinatesArray,i]),this.hitDetectionInstructions.push([A.default.CUSTOM,l,a,e,n||r,v.inflateCoordinatesArray,i]);break;case"LineString":case"Circle":c=e.getFlatCoordinates(),o=this.appendFlatLineCoordinates(c,0,c.length,u,!1,!1),this.instructions.push([A.default.CUSTOM,l,o,e,r,v.inflateCoordinates,i]),this.hitDetectionInstructions.push([A.default.CUSTOM,l,o,e,n||r,v.inflateCoordinates,i]);break;case"MultiPoint":c=e.getFlatCoordinates(),(o=this.appendFlatPointCoordinates(c,u))>l&&(this.instructions.push([A.default.CUSTOM,l,o,e,r,v.inflateCoordinates,i]),this.hitDetectionInstructions.push([A.default.CUSTOM,l,o,e,n||r,v.inflateCoordinates,i]));break;case"Point":c=e.getFlatCoordinates(),this.coordinates.push(c[0],c[1]),o=this.coordinates.length,this.instructions.push([A.default.CUSTOM,l,o,e,r,void 0,i]),this.hitDetectionInstructions.push([A.default.CUSTOM,l,o,e,n||r,void 0,i])}this.endGeometry(t)}},{key:"beginGeometry",value:function(e,t,r){this.beginGeometryInstruction1_=[A.default.BEGIN_GEOMETRY,t,0,e,r],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[A.default.BEGIN_GEOMETRY,t,0,e,r],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}},{key:"finish",value:function(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}},{key:"reverseHitDetectionInstructions",value:function(){var e=this.hitDetectionInstructions;e.reverse();for(var t,r,n=e.length,i=-1,o=0;o<n;++o)(r=(t=e[o])[0])==A.default.END_GEOMETRY?i=o:r==A.default.BEGIN_GEOMETRY&&(t[2]=o,(0,l.reverseSubArray)(this.hitDetectionInstructions,i,o),i=-1)}},{key:"setFillStrokeStyle",value:function(e,t){var r=this.state;e?(e=e.getColor(),r.fillPatternScale=e&&"object"===s(e)&&"src"in e?this.pixelRatio:1,r.fillStyle=(0,i.asColorLike)(e||a.defaultFillStyle)):r.fillStyle=void 0,t?(e=t.getColor(),r.strokeStyle=(0,i.asColorLike)(e||a.defaultStrokeStyle),e=t.getLineCap(),r.lineCap=void 0!==e?e:a.defaultLineCap,e=t.getLineDash(),r.lineDash=e?e.slice():a.defaultLineDash,e=t.getLineDashOffset(),r.lineDashOffset=e||a.defaultLineDashOffset,e=t.getLineJoin(),r.lineJoin=void 0!==e?e:a.defaultLineJoin,e=t.getWidth(),r.lineWidth=void 0!==e?e:a.defaultLineWidth,e=t.getMiterLimit(),r.miterLimit=void 0!==e?e:a.defaultMiterLimit,r.lineWidth>this.maxLineWidth&&(this.maxLineWidth=r.lineWidth,this.bufferedMaxExtent_=null)):(r.strokeStyle=void 0,r.lineCap=void 0,r.lineDash=null,r.lineDashOffset=void 0,r.lineJoin=void 0,r.lineWidth=void 0,r.miterLimit=void 0)}},{key:"createFill",value:function(e){var t=e.fillStyle,r=[A.default.SET_FILL_STYLE,t];return"string"!=typeof t&&r.push(e.fillPatternScale),r}},{key:"applyStroke",value:function(e){this.instructions.push(this.createStroke(e))}},{key:"createStroke",value:function(e){return[A.default.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth*this.pixelRatio,e.lineCap,e.lineJoin,e.miterLimit,this.applyPixelRatio(e.lineDash),e.lineDashOffset*this.pixelRatio]}},{key:"updateFillStyle",value:function(e,t){var r=e.fillStyle;"string"==typeof r&&e.currentFillStyle==r||(void 0!==r&&this.instructions.push(t.call(this,e)),e.currentFillStyle=r)}},{key:"updateStrokeStyle",value:function(e,t){var r=e.strokeStyle,n=e.lineCap,i=e.lineDash,o=e.lineDashOffset,a=e.lineJoin,s=e.lineWidth,u=e.miterLimit;e.currentStrokeStyle==r&&e.currentLineCap==n&&(i==e.currentLineDash||(0,l.equals)(e.currentLineDash,i))&&e.currentLineDashOffset==o&&e.currentLineJoin==a&&e.currentLineWidth==s&&e.currentMiterLimit==u||(void 0!==r&&t.call(this,e),e.currentStrokeStyle=r,e.currentLineCap=n,e.currentLineDash=i,e.currentLineDashOffset=o,e.currentLineJoin=a,e.currentLineWidth=s,e.currentMiterLimit=u)}},{key:"endGeometry",value:function(e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;e=[A.default.END_GEOMETRY,e];this.instructions.push(e),this.hitDetectionInstructions.push(e)}},{key:"getBufferedMaxExtent",value:function(){var e;return!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=(0,m.clone)(this.maxExtent),0<this.maxLineWidth)&&(e=this.resolution*(this.maxLineWidth+1)/2,(0,m.buffer)(this.bufferedMaxExtent_,e,this.bufferedMaxExtent_)),this.bufferedMaxExtent_}}])&&u(t.prototype,r),e&&u(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();r.default=e},{"../../array.js":110,"../../colorlike.js":114,"../../extent.js":142,"../../extent/Relationship.js":143,"../../geom/flat/inflate.js":220,"../VectorContext.js":296,"../canvas.js":297,"./Instruction.js":304}],299:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=s(e("./Builder.js")),i=s(e("./ImageBuilder.js")),o=s(e("./LineStringBuilder.js")),a=s(e("./PolygonBuilder.js")),e=s(e("./TextBuilder.js"));function s(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=u(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==u(e)?e:e+""}(n.key),n)}}var c,f={Circle:a.default,Default:n.default,Image:i.default,LineString:o.default,Polygon:a.default,Text:e.default},o=(n=function e(t,r,n,i){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.tolerance_=t,this.maxExtent_=r,this.pixelRatio_=i,this.resolution_=n,this.buildersByZIndex_={}},(i=[{key:"finish",value:function(){var e,t={};for(e in this.buildersByZIndex_){t[e]=t[e]||{};var r,n=this.buildersByZIndex_[e];for(r in n){var i=n[r].finish();t[e][r]=i}}return t}},{key:"getBuilder",value:function(e,t){var e=void 0!==e?e.toString():"0",r=this.buildersByZIndex_[e],e=(void 0===r&&(this.buildersByZIndex_[e]=r={}),r[t]);return void 0===e&&(e=new f[t](this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),r[t]=e),e}}])&&l(n.prototype,i),c&&l(n,c),Object.defineProperty(n,"prototype",{writable:!1}),n);r.default=o},{"./Builder.js":298,"./ImageBuilder.js":302,"./LineStringBuilder.js":305,"./PolygonBuilder.js":306,"./TextBuilder.js":307}],300:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var Me=n(e("./Instruction.js")),a=n(e("../canvas/ZIndexContext.js")),P=e("./TextBuilder.js"),Re=e("../../transform.js"),De=e("../../extent.js"),Le=e("../canvas.js"),Qe=e("../../geom/flat/textpath.js"),Fe=e("../../array.js"),Ne=e("../../geom/flat/length.js"),Ge=e("../../geom/flat/transform.js");function n(e){return e&&e.__esModule?e:{default:e}}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}var m=(0,De.createEmpty)(),v=[],b=[],_=[],w=[];function Ue(e){return e[3].declutterBox}var s=new RegExp("["+String.fromCharCode(1425)+"-"+String.fromCharCode(2303)+String.fromCharCode(64285)+"-"+String.fromCharCode(65023)+String.fromCharCode(65136)+"-"+String.fromCharCode(65276)+String.fromCharCode(67584)+"-"+String.fromCharCode(69631)+String.fromCharCode(124928)+"-"+String.fromCharCode(126975)+"]");function ze(e,t){return"start"===t?t=s.test(e)?"right":"left":"end"===t&&(t=s.test(e)?"left":"right"),P.TEXT_ALIGN[t]}function k(e,t,r){return 0<r&&e.push("\n",""),e.push(t,""),e}e=function e(t,r,n,i,o){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.overlaps=n,this.pixelRatio=r,this.resolution=t,this.alignAndScaleFill_,this.instructions=i.instructions,this.coordinates=i.coordinates,this.coordinateCache_={},this.renderedTransform_=(0,Re.create)(),this.hitDetectionInstructions=i.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=i.fillStates||{},this.strokeStates=i.strokeStates||{},this.textStates=i.textStates||{},this.widths_={},this.labels_={},this.zIndexContext_=o?new a.default:null},(l=[{key:"getZIndexContext",value:function(){return this.zIndexContext_}},{key:"createLabel",value:function(e,t,r,n){var i=e+t+r+n;if(this.labels_[i])return this.labels_[i];var o=n?this.strokeStates[n]:null,a=r?this.fillStates[r]:null,s=this.textStates[t],t=this.pixelRatio,t=[s.scale[0]*t,s.scale[1]*t],u=Array.isArray(e),l=s.justify?P.TEXT_ALIGN[s.justify]:ze(Array.isArray(e)?e[0]:e,s.textAlign||Le.defaultTextAlign),c=n&&o.lineWidth?o.lineWidth:0,f=u?e:e.split("\n").reduce(k,[]),u=(0,Le.getTextDimensions)(s,f),e=u.width,h=u.height,p=u.widths,d=u.heights,g=u.lineWidths,y=e+c,u=[],e=(y+2)*t[0],h=(h+c)*t[1],e={width:e<0?Math.floor(e):Math.ceil(e),height:h<0?Math.floor(h):Math.ceil(h),contextInstructions:u};1==t[0]&&1==t[1]||u.push("scale",t),n&&(u.push("strokeStyle",o.strokeStyle),u.push("lineWidth",c),u.push("lineCap",o.lineCap),u.push("lineJoin",o.lineJoin),u.push("miterLimit",o.miterLimit),u.push("setLineDash",[o.lineDash]),u.push("lineDashOffset",o.lineDashOffset)),r&&u.push("fillStyle",a.fillStyle),u.push("textBaseline","middle"),u.push("textAlign","center");for(var A,m=.5-l,v=l*y+m*c,b=[],_=[],w=0,E=0,C=0,I=0,S=0,j=f.length;S<j;S+=2){var x,O=f[S];"\n"!==O?((x=f[S+1]||s.font)!==A&&(n&&b.push("font",x),r&&_.push("font",x),A=x),w=Math.max(w,d[C]),x=[O,v+m*p[C]+l*(p[C]-g[I]),.5*(c+w)+E],v+=p[C],n&&b.push("strokeText",x),r&&_.push("fillText",x),++C):(E+=w,w=0,v=l*y+m*c,++I)}return Array.prototype.push.apply(u,b),Array.prototype.push.apply(u,_),this.labels_[i]=e}},{key:"replayTextBackground_",value:function(e,t,r,n,i,o,a){e.beginPath(),e.moveTo.apply(e,t),e.lineTo.apply(e,r),e.lineTo.apply(e,n),e.lineTo.apply(e,i),e.lineTo.apply(e,t),o&&(this.alignAndScaleFill_=o[2],this.fill_(e)),a&&(this.setStrokeStyle_(e,a),e.stroke())}},{key:"calculateImageOrLabelDimensions_",value:function(e,t,r,n,i,o,a,s,u,l,c,f,h,p,d,g){var y,a=r-(a*=f[0]),s=n-(s*=f[1]),e=e<i+u?e-u:i,i=t<o+l?t-l:o,t=p[3]+e*f[0]+p[1],o=p[0]+i*f[1]+p[2],A=a-p[3],p=s-p[0];return!d&&0===c||(w[0]=v[0]=A,b[1]=v[1]=p,b[0]=A+t,_[0]=b[0],_[1]=p+o,w[1]=_[1]),0!==c?(y=(0,Re.compose)((0,Re.create)(),r,n,1,1,c,-r,-n),(0,Re.apply)(y,v),(0,Re.apply)(y,b),(0,Re.apply)(y,_),(0,Re.apply)(y,w),(0,De.createOrUpdate)(Math.min(v[0],b[0],_[0],w[0]),Math.min(v[1],b[1],_[1],w[1]),Math.max(v[0],b[0],_[0],w[0]),Math.max(v[1],b[1],_[1],w[1]),m)):(0,De.createOrUpdate)(Math.min(A,A+t),Math.min(p,p+o),Math.max(A,A+t),Math.max(p,p+o),m),h&&(a=Math.round(a),s=Math.round(s)),{drawImageX:a,drawImageY:s,drawImageW:e,drawImageH:i,originX:u,originY:l,declutterBox:{minX:m[0],minY:m[1],maxX:m[2],maxY:m[3],value:g},canvasTransform:y,scale:f}}},{key:"replayImageOrLabel_",value:function(e,t,r,n,i,o,a){var s=n.declutterBox,u=a?a[2]*n.scale[0]/2:0;return s.minX-u<=t[0]&&0<=s.maxX+u&&s.minY-u<=t[1]&&0<=s.maxY+u&&(!(!o&&!a)&&this.replayTextBackground_(e,v,b,_,w,o,a),(0,Le.drawImageOrLabel)(e,n.canvasTransform,i,r,n.originX,n.originY,n.drawImageW,n.drawImageH,n.drawImageX,n.drawImageY,n.scale)),!0}},{key:"fill_",value:function(e){var t,r,n=this.alignAndScaleFill_;n&&(t=(0,Re.apply)(this.renderedTransform_,[0,0]),r=512*this.pixelRatio,e.save(),e.translate(t[0]%r,t[1]%r),1!==n&&e.scale(n,n),e.rotate(this.viewRotation_)),e.fill(),n&&e.restore()}},{key:"setStrokeStyle_",value:function(e,t){e.strokeStyle=t[1],e.lineWidth=t[2],e.lineCap=t[3],e.lineJoin=t[4],e.miterLimit=t[5],e.lineDashOffset=t[7],e.setLineDash(t[6])}},{key:"drawLabelWithPointPlacement_",value:function(e,t,r,n){var i=this.textStates[t],t=this.createLabel(e,t,n,r),n=this.strokeStates[r],r=this.pixelRatio,e=ze(Array.isArray(e)?e[0]:e,i.textAlign||Le.defaultTextAlign),o=P.TEXT_ALIGN[i.textBaseline||Le.defaultTextBaseline],n=n&&n.lineWidth?n.lineWidth:0;return{label:t,anchorX:e*(t.width/r-2*i.scale[0])+2*(.5-e)*n,anchorY:o*t.height/r+2*(.5-o)*n}}},{key:"execute_",value:function(e,D,t,L,Q,F,N,r){var n,G=this.zIndexContext_;this.pixelCoordinates_&&(0,Fe.equals)(t,this.renderedTransform_)?n=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),n=(0,Ge.transform2D)(this.coordinates,0,this.coordinates.length,2,t,this.pixelCoordinates_),(0,Re.setFromArray)(this.renderedTransform_,t));for(var U,z,q,H,i,o,a,W,s=0,Y=L.length,u=0,l=0,c=0,V=null,K=null,X=this.coordinateCache_,J=this.viewRotation_,Z=Math.round(1e12*Math.atan2(-t[1],t[0]))/1e12,$={context:e,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:J},ee=this.instructions!=L||this.overlaps?0:200;s<Y;){var f=L[s];switch(f[0]){case Me.default.BEGIN_GEOMETRY:i=f[1],W=f[3],i.getGeometry()?void 0===N||(0,De.intersects)(N,W.getExtent())?++s:s=f[2]+1:s=f[2],G&&(G.zIndex=f[4]);break;case Me.default.BEGIN_PATH:ee<l&&(this.fill_(e),l=0),ee<c&&(e.stroke(),c=0),l||c||(e.beginPath(),z=U=NaN),++s;break;case Me.default.CIRCLE:var te=n[u=f[1]],h=n[u+1],p=n[u+2]-te,re=n[u+3]-h,p=Math.sqrt(p*p+re*re);e.moveTo(te+p,h),e.arc(te,h,p,0,2*Math.PI,!0),++s;break;case Me.default.CLOSE_PATH:e.closePath(),++s;break;case Me.default.CUSTOM:var u=f[1],d=f[2],re=f[3],te=f[4],h=f[5],p=($.geometry=re,$.feature=i,s in X||(X[s]=[]),X[s]);h?h(n,u,d,2,p):(p[0]=n[u],p[1]=n[u+1],p.length=2),G&&(G.zIndex=f[6]),te(p,$),++s;break;case Me.default.DRAW_IMAGE:u=f[1],d=f[2],v=f[3],b=f[4],_=f[5];var g,y,A,m,v,b,_,ne=f[6],ie=f[7],oe=f[8],ae=f[9],se=f[10],ue=f[11],le=f[12],ce=f[13],w=f[14]||"declutter",E=f[15],fe=(!v&&20<=f.length&&(g=f[19],y=f[20],A=f[21],m=f[22],v=(S=this.drawLabelWithPointPlacement_(g,y,A,m)).label,f[3]=v,j=f[23],b=(S.anchorX-j)*this.pixelRatio,f[4]=b,j=f[24],_=(S.anchorY-j)*this.pixelRatio,f[5]=_,ne=v.height,f[6]=ne,ce=v.width,f[13]=ce),void 0),he=(25<f.length&&(fe=f[25]),void 0),pe=void 0,de=void 0,de=17<f.length?(he=f[16],pe=f[17],f[18]):(he=Le.defaultPadding,pe=!1);se&&Z?ue+=J:se||Z||(ue-=J);for(var ge=0;u<d;u+=2)if(!(fe&&fe[ge++]<ce/this.pixelRatio)){var ye=this.calculateImageOrLabelDimensions_(v.width,v.height,n[u],n[u+1],ce,ne,b,_,oe,ae,ue,le,Q,he,pe||de,i),Ae=[e,D,v,ye,ie,pe?V:null,de?K:null];if(r){var me=void 0,ve=void 0,be=void 0;if(E){var C=d-u;if(!E[C]){E[C]={args:Ae,declutterMode:w};continue}var I=E[C],me=I.args,ve=I.declutterMode;delete E[C],be=Ue(me)}I=void 0,C=void 0;!me||"declutter"===ve&&r.collides(be)||(I=!0),"declutter"===w&&r.collides(ye.declutterBox)||(C=!0),"declutter"===ve&&"declutter"===w&&(C=I=I&&C),I&&("none"!==ve&&r.insert(be),this.replayImageOrLabel_.apply(this,me)),C&&("none"!==w&&r.insert(ye.declutterBox),this.replayImageOrLabel_.apply(this,Ae))}else this.replayImageOrLabel_.apply(this,Ae)}++s;break;case Me.default.DRAW_CHARS:var S=f[1],j=f[2],_e=f[3],se=f[4],we=(m=f[5],f[6]),x=f[7],Ee=f[8],Ce=(A=f[9],f[10]),Ie=(g=f[11],y=f[12],[f[13],f[13]]),O=(w=f[14]||"declutter",this.textStates[y]),P=O.font,k=[O.scale[0]*x,O.scale[1]*x],O=void 0,x=(P in this.widths_?O=this.widths_[P]:this.widths_[P]=O={},(0,Ne.lineStringLength)(n,S,j,2)),B=Math.abs(k[0])*(0,Le.measureAndCacheTextWidth)(P,g,O);if(se||B<=x){var x=(x-B)*ze(g,this.textStates[y].textAlign),Se=(0,Qe.drawTextOnPath)(n,S,j,2,g,x,we,Math.abs(k[0]),Le.measureAndCacheTextWidth,P,O,Z?0:this.viewRotation_);e:if(Se){var je=[],T=void 0,xe=void 0,Oe=void 0,M=void 0,R=void 0;if(A)for(T=0,xe=Se.length;T<xe;++T){Oe=(R=Se[T])[4],M=this.createLabel(Oe,y,"",A),b=R[2]+(k[0]<0?-Ce:Ce),_=_e*M.height+2*(.5-_e)*Ce*k[1]/k[0]-Ee;var Pe=this.calculateImageOrLabelDimensions_(M.width,M.height,R[0],R[1],M.width,M.height,b,_,0,0,R[3],Ie,!1,Le.defaultPadding,!1,i);if(r&&"declutter"===w&&r.collides(Pe.declutterBox))break e;je.push([e,D,M,Pe,1,null,null])}if(m)for(T=0,xe=Se.length;T<xe;++T){Oe=(R=Se[T])[4],M=this.createLabel(Oe,y,m,""),b=R[2],_=_e*M.height-Ee;var ke=this.calculateImageOrLabelDimensions_(M.width,M.height,R[0],R[1],M.width,M.height,b,_,0,0,R[3],Ie,!1,Le.defaultPadding,!1,i);if(r&&"declutter"===w&&r.collides(ke.declutterBox))break e;je.push([e,D,M,ke,1,null,null])}r&&"none"!==w&&r.load(je.map(Ue));for(var Be=0,Te=je.length;Be<Te;++Be)this.replayImageOrLabel_.apply(this,je[Be])}}++s;break;case Me.default.END_GEOMETRY:if(void 0!==F){B=F(i=f[1],W,w);if(B)return B}++s;break;case Me.default.FILL:ee?l++:this.fill_(e),++s;break;case Me.default.MOVE_TO_LINE_TO:for(u=f[1],d=f[2],o=n[u],a=n[u+1],e.moveTo(o,a),U=o+.5|0,z=a+.5|0,u+=2;u<d;u+=2)q=(o=n[u])+.5|0,H=(a=n[u+1])+.5|0,u!=d-2&&q===U&&H===z||(e.lineTo(o,a),U=q,z=H);++s;break;case Me.default.SET_FILL_STYLE:this.alignAndScaleFill_=(V=f)[2],l&&(this.fill_(e),l=0,c)&&(e.stroke(),c=0),e.fillStyle=f[1],++s;break;case Me.default.SET_STROKE_STYLE:K=f,c&&(e.stroke(),c=0),this.setStrokeStyle_(e,f),++s;break;case Me.default.STROKE:ee?c++:e.stroke(),++s;break;default:++s}}l&&this.fill_(e),c&&e.stroke()}},{key:"execute",value:function(e,t,r,n,i,o){this.viewRotation_=n,this.execute_(e,t,r,this.instructions,i,void 0,void 0,o)}},{key:"executeHitDetection",value:function(e,t,r,n,i){return this.viewRotation_=r,this.execute_(e,[e.canvas.width,e.canvas.height],t,this.hitDetectionInstructions,!0,n,i)}}])&&o(e.prototype,l),u&&o(e,u),Object.defineProperty(e,"prototype",{writable:!1});var u,l=e;r.default=l},{"../../array.js":110,"../../extent.js":142,"../../geom/flat/length.js":224,"../../geom/flat/textpath.js":231,"../../geom/flat/transform.js":232,"../../transform.js":402,"../canvas.js":297,"../canvas/ZIndexContext.js":308,"./Instruction.js":304,"./TextBuilder.js":307}],301:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.NON_DECLUTTER=r.DECLUTTER=r.ALL=void 0,r.getPixelIndexArray=I;var s=(l=e("./Executor.js"))&&l.__esModule?l:{default:l},b=e("../../array.js"),_=e("../../extent.js"),w=e("../../transform.js"),E=e("../../dom.js"),n=e("../../obj.js"),o=e("../../geom/flat/transform.js");function f(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){{var r;if(e)return"string"==typeof e?i(e,t):"Map"===(r="Object"===(r={}.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=a(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==a(e)?e:e+""}(n.key),n)}}var l,c,C=r.ALL=["Polygon","Circle","LineString","Image","Text","Default"],h=r.DECLUTTER=["Image","Text"],e=(r.NON_DECLUTTER=C.filter(function(e){return!h.includes(e)}),l=function e(t,r,n,i,o,a,s){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.maxExtent_=t,this.overlaps_=i,this.pixelRatio_=n,this.resolution_=r,this.renderBuffer_=a,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=(0,w.create)(),this.renderedContext_=null,this.deferredZIndexContexts_={},this.createExecutors_(o,s)},(e=[{key:"clip",value:function(e,t){t=this.getClipCoords(t);e.beginPath(),e.moveTo(t[0],t[1]),e.lineTo(t[2],t[3]),e.lineTo(t[4],t[5]),e.lineTo(t[6],t[7]),e.clip()}},{key:"createExecutors_",value:function(e,t){for(var r in e){var n,i=this.executorsByZIndex_[r],o=(void 0===i&&(this.executorsByZIndex_[r]=i={}),e[r]);for(n in o){var a=o[n];i[n]=new s.default(this.resolution_,this.pixelRatio_,this.overlaps_,a,t)}}}},{key:"hasExecutors",value:function(e){for(var t in this.executorsByZIndex_)for(var r=this.executorsByZIndex_[t],n=0,i=e.length;n<i;++n)if(e[n]in r)return!0;return!1}},{key:"forEachFeatureAtCoordinate",value:function(e,t,r,u,l,c){var f=2*(u=Math.round(u))+1,n=(0,w.compose)(this.hitDetectionTransform_,u+.5,u+.5,1/t,-1/t,-r,-e[0],-e[1]),i=!this.hitDetectionContext_;i&&(this.hitDetectionContext_=(0,E.createCanvasContext2D)(f,f,void 0,{willReadFrequently:!0}));var o,h=this.hitDetectionContext_;h.canvas.width!==f||h.canvas.height!==f?(h.canvas.width=f,h.canvas.height=f):i||h.clearRect(0,0,f,f),void 0!==this.renderBuffer_&&(o=(0,_.createEmpty)(),(0,_.extendCoordinate)(o,e),(0,_.buffer)(o,t*(this.renderBuffer_+u),o));var p,d=I(u);function a(e,t,r){for(var n=h.getImageData(0,0,f,f).data,i=0,o=d.length;i<o;i++)if(0<n[d[i]]){if(!c||"none"===r||"Image"!==p&&"Text"!==p||c.includes(e)){var a=(d[i]-3)/4,s=u-a%f,a=u-(a/f|0),s=l(e,t,s*s+a*a);if(s)return s}h.clearRect(0,0,f,f);break}}var s,g,y=Object.keys(this.executorsByZIndex_).map(Number);for(y.sort(b.ascending),s=y.length-1;0<=s;--s)for(var A=y[s].toString(),m=this.executorsByZIndex_[A],v=C.length-1;0<=v;--v)if(void 0!==(g=m[p=C[v]])&&(g=g.executeHitDetection(h,n,r,a,o)))return g}},{key:"getClipCoords",value:function(e){var t,r,n,i=this.maxExtent_;return i?(n=i[0],t=i[1],r=i[2],i=i[3],(0,o.transform2D)(n=[n,t,n,i,r,i,r,t],0,8,2,e,n),n):null}},{key:"isEmpty",value:function(){return(0,n.isEmpty)(this.executorsByZIndex_)}},{key:"execute",value:function(o,a,s,u,l,c,f){var h=this,p=Object.keys(this.executorsByZIndex_).map(Number);p.sort(b.ascending),c=c||C;var d,e,g=C.length;for(f&&p.reverse(),d=0,e=p.length;d<e;++d)for(var t=p[d].toString(),y=this.executorsByZIndex_[t],A=0,r=c.length;A<r;++A)!function(){var e,t,r,n=c[A],i=y[n];void 0!==i&&(t=(e=null===f?void 0:i.getZIndexContext())?e.getContext():o,(r=h.maxExtent_&&"Image"!==n&&"Text"!==n)&&(t.save(),h.clip(t,s)),e&&"Text"!==n&&"Image"!==n?e.pushFunction(function(e){return i.execute(e,a,s,u,l,f)}):i.execute(t,a,s,u,l,f),r&&t.restore(),e)&&(e.offset(),n=p[d]*g+A,h.deferredZIndexContexts_[n]||(h.deferredZIndexContexts_[n]=[]),h.deferredZIndexContexts_[n].push(e))}();this.renderedContext_=o}},{key:"getDeferredZIndexContexts",value:function(){return this.deferredZIndexContexts_}},{key:"getRenderedContext",value:function(){return this.renderedContext_}},{key:"renderDeferred",value:function(){for(var t=this,e=this.deferredZIndexContexts_,r=Object.keys(e).map(Number).sort(b.ascending),n=0,i=r.length;n<i;++n)e[r[n]].forEach(function(e){e.draw(t.renderedContext_),e.clear()}),e[r[n]].length=0}}])&&u(l.prototype,e),c&&u(l,c),Object.defineProperty(l,"prototype",{writable:!1}),l),p={};function I(e){if(void 0!==p[e])return p[e];for(var t=2*e+1,r=e*e,n=new Array(1+r),i=0;i<=e;++i)for(var o=0;o<=e;++o){var a=i*i+o*o;if(r<a)break;var s=n[a];s||(n[a]=s=[]),s.push(4*((e+i)*t+(e+o))+3),0<i&&s.push(4*((e-i)*t+(e+o))+3),0<o&&(s.push(4*((e+i)*t+(e-o))+3),0<i)&&s.push(4*((e-i)*t+(e-o))+3)}for(var u=[],l=0,c=n.length;l<c;++l)n[l]&&u.push.apply(u,f(n[l]));return p[e]=u}r.default=e},{"../../array.js":110,"../../dom.js":130,"../../extent.js":142,"../../geom/flat/transform.js":232,"../../obj.js":281,"../../transform.js":402,"./Executor.js":300}],302:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=o(e("./Builder.js")),u=o(e("./Instruction.js")),l=e("../../extent.js");function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function s(e,t,r){t=h(t);var n=e,t=c()?Reflect.construct(t,r||[],h(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(c=function(){return!!e})()}function f(){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=h(e)););return e}(e,t);if(n)return(n=Object.getOwnPropertyDescriptor(n,t)).get?n.get.call(arguments.length<3?e:r):n.value}).apply(null,arguments)}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}e=function(){function i(e,t,r,n){if(this instanceof i)return(e=s(this,i,[e,t,r,n])).hitDetectionImage_=null,e.image_=null,e.imagePixelRatio_=void 0,e.anchorX_=void 0,e.anchorY_=void 0,e.height_=void 0,e.opacity_=void 0,e.originX_=void 0,e.originY_=void 0,e.rotateWithView_=void 0,e.rotation_=void 0,e.scale_=void 0,e.width_=void 0,e.declutterMode_=void 0,e.declutterImageWithText_=void 0,e;throw new TypeError("Cannot call a class as a function")}var e,t=i,r=n.default;if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&p(t,r),t=i,(r=[{key:"drawPoint",value:function(e,t,r){var n;!this.image_||this.maxExtent&&!(0,l.containsCoordinate)(this.maxExtent,e.getFlatCoordinates())||(this.beginGeometry(e,t,r),r=e.getFlatCoordinates(),e=e.getStride(),n=this.coordinates.length,r=this.appendFlatPointCoordinates(r,e),this.instructions.push([u.default.DRAW_IMAGE,n,r,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([u.default.DRAW_IMAGE,n,r,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t))}},{key:"drawMultiPoint",value:function(e,t,r){if(this.image_){this.beginGeometry(e,t,r);for(var n=e.getFlatCoordinates(),i=[],o=0,a=n.length;o<a;o+=e.getStride())this.maxExtent&&!(0,l.containsCoordinate)(this.maxExtent,n.slice(o,o+2))||i.push(n[o],n[o+1]);var r=this.coordinates.length,s=this.appendFlatPointCoordinates(i,2);this.instructions.push([u.default.DRAW_IMAGE,r,s,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([u.default.DRAW_IMAGE,r,s,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}}},{key:"finish",value:function(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,f(h(i.prototype),"finish",this).call(this)}},{key:"setImageStyle",value:function(e,t){var r=e.getAnchor(),n=e.getSize(),i=e.getOrigin();this.imagePixelRatio_=e.getPixelRatio(this.pixelRatio),this.anchorX_=r[0],this.anchorY_=r[1],this.hitDetectionImage_=e.getHitDetectionImage(),this.image_=e.getImage(this.pixelRatio),this.height_=n[1],this.opacity_=e.getOpacity(),this.originX_=i[0],this.originY_=i[1],this.rotateWithView_=e.getRotateWithView(),this.rotation_=e.getRotation(),this.scale_=e.getScaleArray(),this.width_=n[0],this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}])&&a(t.prototype,r),e&&a(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();r.default=e},{"../../extent.js":142,"./Builder.js":298,"./Instruction.js":304}],303:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=(m=e("../VectorContext.js"))&&m.__esModule?m:{default:m},l=e("../../colorlike.js"),d=e("../../transform.js"),c=e("../canvas.js"),o=e("../../array.js"),f=e("../../extent.js"),h=e("../../math.js"),g=e("../../geom/flat/transform.js"),a=e("../../geom/SimpleGeometry.js");function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function p(e,t,r){t=y(t);var n=e,t=u()?Reflect.construct(t,r||[],y(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(u=function(){return!!e})()}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function A(e,t){return(A=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var m=function(){function u(e,t,r,n,i,o,a){var s;if(this instanceof u)return(s=p(this,u)).context_=e,s.pixelRatio_=t,s.extent_=r,s.transform_=n,s.transformRotation_=n?(0,h.toFixed)(Math.atan2(n[1],n[0]),10):0,s.viewRotation_=i,s.squaredTolerance_=o,s.userTransform_=a,s.contextFillState_=null,s.contextStrokeState_=null,s.contextTextState_=null,s.fillState_=null,s.strokeState_=null,s.image_=null,s.imageAnchorX_=0,s.imageAnchorY_=0,s.imageHeight_=0,s.imageOpacity_=0,s.imageOriginX_=0,s.imageOriginY_=0,s.imageRotateWithView_=!1,s.imageRotation_=0,s.imageScale_=[0,0],s.imageWidth_=0,s.text_="",s.textOffsetX_=0,s.textOffsetY_=0,s.textRotateWithView_=!1,s.textRotation_=0,s.textScale_=[0,0],s.textFillState_=null,s.textStrokeState_=null,s.textState_=null,s.pixelCoordinates_=[],s.tmpLocalTransform_=(0,d.create)(),s;throw new TypeError("Cannot call a class as a function")}var e,t=u,r=n.default;if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&A(t,r),t=u,(r=[{key:"drawImages_",value:function(e,t,r,n){if(this.image_){var i=(0,g.transform2D)(e,t,r,n,this.transform_,this.pixelCoordinates_),o=this.context_,a=this.tmpLocalTransform_,e=o.globalAlpha,s=(1!=this.imageOpacity_&&(o.globalAlpha=e*this.imageOpacity_),this.imageRotation_);0===this.transformRotation_&&(s-=this.viewRotation_),this.imageRotateWithView_&&(s+=this.viewRotation_);for(var u=0,l=i.length;u<l;u+=2){var c,f,h=i[u]-this.imageAnchorX_,p=i[u+1]-this.imageAnchorY_;0!==s||1!=this.imageScale_[0]||1!=this.imageScale_[1]?(c=h+this.imageAnchorX_,f=p+this.imageAnchorY_,(0,d.compose)(a,c,f,1,1,s,-c,-f),o.save(),o.transform.apply(o,a),o.translate(c,f),o.scale(this.imageScale_[0],this.imageScale_[1]),o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),o.restore()):o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,h,p,this.imageWidth_,this.imageHeight_)}1!=this.imageOpacity_&&(o.globalAlpha=e)}}},{key:"drawText_",value:function(e,t,r,n){if(this.textState_&&""!==this.text_){this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);var i=(0,g.transform2D)(e,t,r,n,this.transform_,this.pixelCoordinates_),o=this.context_,a=this.textRotation_;for(0===this.transformRotation_&&(a-=this.viewRotation_),this.textRotateWithView_&&(a+=this.viewRotation_);t<r;t+=n){var s=i[t]+this.textOffsetX_,u=i[t+1]+this.textOffsetY_;0!==a||1!=this.textScale_[0]||1!=this.textScale_[1]?(o.save(),o.translate(s-this.textOffsetX_,u-this.textOffsetY_),o.rotate(a),o.translate(this.textOffsetX_,this.textOffsetY_),o.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&o.strokeText(this.text_,0,0),this.textFillState_&&o.fillText(this.text_,0,0),o.restore()):(this.textStrokeState_&&o.strokeText(this.text_,s,u),this.textFillState_&&o.fillText(this.text_,s,u))}}}},{key:"moveToLineTo_",value:function(e,t,r,n,i){var o=this.context_,a=(0,g.transform2D)(e,t,r,n,this.transform_,this.pixelCoordinates_),s=(o.moveTo(a[0],a[1]),a.length);i&&(s-=2);for(var u=2;u<s;u+=2)o.lineTo(a[u],a[u+1]);return i&&o.closePath(),r}},{key:"drawRings_",value:function(e,t,r,n){for(var i=0,o=r.length;i<o;++i)t=this.moveToLineTo_(e,t,r[i],n,!0);return t}},{key:"drawCircle",value:function(e){var t,r,n;this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,f.intersects)(this.extent_,e.getExtent())&&((this.fillState_||this.strokeState_)&&(this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_),r=(t=(0,a.transformGeom2D)(e,this.transform_,this.pixelCoordinates_))[2]-t[0],n=t[3]-t[1],r=Math.sqrt(r*r+n*n),(n=this.context_).beginPath(),n.arc(t[0],t[1],r,0,2*Math.PI),this.fillState_&&n.fill(),this.strokeState_)&&n.stroke(),""!==this.text_)&&this.drawText_(e.getCenter(),0,2,2)}},{key:"setStyle",value:function(e){this.setFillStrokeStyle(e.getFill(),e.getStroke()),this.setImageStyle(e.getImage()),this.setTextStyle(e.getText())}},{key:"setTransform",value:function(e){this.transform_=e}},{key:"drawGeometry",value:function(e){switch(e.getType()){case"Point":this.drawPoint(e);break;case"LineString":this.drawLineString(e);break;case"Polygon":this.drawPolygon(e);break;case"MultiPoint":this.drawMultiPoint(e);break;case"MultiLineString":this.drawMultiLineString(e);break;case"MultiPolygon":this.drawMultiPolygon(e);break;case"GeometryCollection":this.drawGeometryCollection(e);break;case"Circle":this.drawCircle(e)}}},{key:"drawFeature",value:function(e,t){e=t.getGeometryFunction()(e);e&&(this.setStyle(t),this.drawGeometry(e))}},{key:"drawGeometryCollection",value:function(e){for(var t=e.getGeometriesArray(),r=0,n=t.length;r<n;++r)this.drawGeometry(t[r])}},{key:"drawPoint",value:function(e){var t=(e=this.squaredTolerance_?e.simplifyTransformed(this.squaredTolerance_,this.userTransform_):e).getFlatCoordinates(),e=e.getStride();this.image_&&this.drawImages_(t,0,t.length,e),""!==this.text_&&this.drawText_(t,0,t.length,e)}},{key:"drawMultiPoint",value:function(e){var t=(e=this.squaredTolerance_?e.simplifyTransformed(this.squaredTolerance_,this.userTransform_):e).getFlatCoordinates(),e=e.getStride();this.image_&&this.drawImages_(t,0,t.length,e),""!==this.text_&&this.drawText_(t,0,t.length,e)}},{key:"drawLineString",value:function(e){var t,r;this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,f.intersects)(this.extent_,e.getExtent())&&(this.strokeState_&&(this.setContextStrokeState_(this.strokeState_),t=this.context_,r=e.getFlatCoordinates(),t.beginPath(),this.moveToLineTo_(r,0,r.length,e.getStride(),!1),t.stroke()),""!==this.text_)&&(r=e.getFlatMidpoint(),this.drawText_(r,0,2,2))}},{key:"drawMultiLineString",value:function(e){var t=(e=this.squaredTolerance_?e.simplifyTransformed(this.squaredTolerance_,this.userTransform_):e).getExtent();if((0,f.intersects)(this.extent_,t)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var t=this.context_,r=e.getFlatCoordinates(),n=0,i=e.getEnds(),o=e.getStride();t.beginPath();for(var a=0,s=i.length;a<s;++a)n=this.moveToLineTo_(r,n,i[a],o,!1);t.stroke()}""!==this.text_&&(t=e.getFlatMidpoints(),this.drawText_(t,0,t.length,2))}}},{key:"drawPolygon",value:function(e){var t;this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,f.intersects)(this.extent_,e.getExtent())&&((this.strokeState_||this.fillState_)&&(this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_),(t=this.context_).beginPath(),this.drawRings_(e.getOrientedFlatCoordinates(),0,e.getEnds(),e.getStride()),this.fillState_&&t.fill(),this.strokeState_)&&t.stroke(),""!==this.text_)&&(t=e.getFlatInteriorPoint(),this.drawText_(t,0,2,2))}},{key:"drawMultiPolygon",value:function(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,f.intersects)(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var t=this.context_,r=e.getOrientedFlatCoordinates(),n=0,i=e.getEndss(),o=e.getStride();t.beginPath();for(var a=0,s=i.length;a<s;++a)var u=i[a],n=this.drawRings_(r,n,u,o);this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}""!==this.text_&&(t=e.getFlatInteriorPoints(),this.drawText_(t,0,t.length,2))}}},{key:"setContextFillState_",value:function(e){var t=this.context_,r=this.contextFillState_;r?r.fillStyle!=e.fillStyle&&(r.fillStyle=e.fillStyle,t.fillStyle=e.fillStyle):(t.fillStyle=e.fillStyle,this.contextFillState_={fillStyle:e.fillStyle})}},{key:"setContextStrokeState_",value:function(e){var t=this.context_,r=this.contextStrokeState_;r?(r.lineCap!=e.lineCap&&(r.lineCap=e.lineCap,t.lineCap=e.lineCap),(0,o.equals)(r.lineDash,e.lineDash)||t.setLineDash(r.lineDash=e.lineDash),r.lineDashOffset!=e.lineDashOffset&&(r.lineDashOffset=e.lineDashOffset,t.lineDashOffset=e.lineDashOffset),r.lineJoin!=e.lineJoin&&(r.lineJoin=e.lineJoin,t.lineJoin=e.lineJoin),r.lineWidth!=e.lineWidth&&(r.lineWidth=e.lineWidth,t.lineWidth=e.lineWidth),r.miterLimit!=e.miterLimit&&(r.miterLimit=e.miterLimit,t.miterLimit=e.miterLimit),r.strokeStyle!=e.strokeStyle&&(r.strokeStyle=e.strokeStyle,t.strokeStyle=e.strokeStyle)):(t.lineCap=e.lineCap,t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset,t.lineJoin=e.lineJoin,t.lineWidth=e.lineWidth,t.miterLimit=e.miterLimit,t.strokeStyle=e.strokeStyle,this.contextStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle})}},{key:"setContextTextState_",value:function(e){var t=this.context_,r=this.contextTextState_,n=e.textAlign||c.defaultTextAlign;r?(r.font!=e.font&&(r.font=e.font,t.font=e.font),r.textAlign!=n&&(r.textAlign=n,t.textAlign=n),r.textBaseline!=e.textBaseline&&(r.textBaseline=e.textBaseline,t.textBaseline=e.textBaseline)):(t.font=e.font,t.textAlign=n,t.textBaseline=e.textBaseline,this.contextTextState_={font:e.font,textAlign:n,textBaseline:e.textBaseline})}},{key:"setFillStrokeStyle",value:function(e,t){var r,n,i,o,a,s=this;e?(e=e.getColor(),this.fillState_={fillStyle:(0,l.asColorLike)(e||c.defaultFillStyle)}):this.fillState_=null,t?(e=t.getColor(),r=t.getLineCap(),a=t.getLineDash(),n=t.getLineDashOffset(),i=t.getLineJoin(),o=t.getWidth(),t=t.getMiterLimit(),a=a||c.defaultLineDash,this.strokeState_={lineCap:void 0!==r?r:c.defaultLineCap,lineDash:1===this.pixelRatio_?a:a.map(function(e){return e*s.pixelRatio_}),lineDashOffset:(n||c.defaultLineDashOffset)*this.pixelRatio_,lineJoin:void 0!==i?i:c.defaultLineJoin,lineWidth:(void 0!==o?o:c.defaultLineWidth)*this.pixelRatio_,miterLimit:void 0!==t?t:c.defaultMiterLimit,strokeStyle:(0,l.asColorLike)(e||c.defaultStrokeStyle)}):this.strokeState_=null}},{key:"setImageStyle",value:function(e){var t,r,n,i;e&&(t=e.getSize())?(r=e.getPixelRatio(this.pixelRatio_),i=e.getAnchor(),n=e.getOrigin(),this.image_=e.getImage(this.pixelRatio_),this.imageAnchorX_=i[0]*r,this.imageAnchorY_=i[1]*r,this.imageHeight_=t[1]*r,this.imageOpacity_=e.getOpacity(),this.imageOriginX_=n[0],this.imageOriginY_=n[1],this.imageRotateWithView_=e.getRotateWithView(),this.imageRotation_=e.getRotation(),i=e.getScaleArray(),this.imageScale_=[i[0]*this.pixelRatio_/r,i[1]*this.pixelRatio_/r],this.imageWidth_=t[0]*r):this.image_=null}},{key:"setTextStyle",value:function(e){var t,r,n,i,o,a,s,u;e?((a=e.getFill())?(a=a.getColor(),this.textFillState_={fillStyle:(0,l.asColorLike)(a||c.defaultFillStyle)}):this.textFillState_=null,(a=e.getStroke())?(s=a.getColor(),t=a.getLineCap(),r=a.getLineDash(),n=a.getLineDashOffset(),i=a.getLineJoin(),o=a.getWidth(),a=a.getMiterLimit(),this.textStrokeState_={lineCap:void 0!==t?t:c.defaultLineCap,lineDash:r||c.defaultLineDash,lineDashOffset:n||c.defaultLineDashOffset,lineJoin:void 0!==i?i:c.defaultLineJoin,lineWidth:void 0!==o?o:c.defaultLineWidth,miterLimit:void 0!==a?a:c.defaultMiterLimit,strokeStyle:(0,l.asColorLike)(s||c.defaultStrokeStyle)}):this.textStrokeState_=null,t=e.getFont(),r=e.getOffsetX(),n=e.getOffsetY(),i=e.getRotateWithView(),o=e.getRotation(),a=e.getScaleArray(),s=e.getText(),u=e.getTextAlign(),e=e.getTextBaseline(),this.textState_={font:void 0!==t?t:c.defaultFont,textAlign:void 0!==u?u:c.defaultTextAlign,textBaseline:void 0!==e?e:c.defaultTextBaseline},this.text_=void 0!==s?Array.isArray(s)?s.reduce(function(e,t,r){return e+(r%2?" ":t)},""):s:"",this.textOffsetX_=void 0!==r?this.pixelRatio_*r:0,this.textOffsetY_=void 0!==n?this.pixelRatio_*n:0,this.textRotateWithView_=void 0!==i&&i,this.textRotation_=void 0!==o?o:0,this.textScale_=[this.pixelRatio_*a[0],this.pixelRatio_*a[1]]):this.text_=""}}])&&s(t.prototype,r),e&&s(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();r.default=m},{"../../array.js":110,"../../colorlike.js":114,"../../extent.js":142,"../../geom/SimpleGeometry.js":212,"../../geom/flat/transform.js":232,"../../math.js":279,"../../transform.js":402,"../VectorContext.js":296,"../canvas.js":297}],304:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.strokeInstruction=r.fillInstruction=r.default=r.closePathInstruction=r.beginPathInstruction=void 0;var n={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12};r.fillInstruction=[n.FILL],r.strokeInstruction=[n.STROKE],r.beginPathInstruction=[n.BEGIN_PATH],r.closePathInstruction=[n.CLOSE_PATH],r.default=n},{}],305:[function(e,t,r){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=(d=e("./Builder.js"))&&d.__esModule?d:{default:d},h=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};t=s(t);if(t&&t.has(e))return t.get(e);var r,n={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in e){var o;"default"!==r&&{}.hasOwnProperty.call(e,r)&&((o=i?Object.getOwnPropertyDescriptor(e,r):null)&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=e[r])}return n.default=e,t&&t.set(e,n),n}(e("./Instruction.js")),p=e("../canvas.js");function s(e){var t,r;return"function"!=typeof WeakMap?null:(t=new WeakMap,r=new WeakMap,(s=function(e){return e?r:t})(e))}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=a(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==a(e)?e:e+""}(n.key),n)}}function u(e,t,r){t=c(t);var n=e,t=i()?Reflect.construct(t,r||[],c(e).constructor):t.apply(e,r);if(t&&("object"==a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function i(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(i=function(){return!!e})()}function l(){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=c(e)););return e}(e,t);if(n)return(n=Object.getOwnPropertyDescriptor(n,t)).get?n.get.call(arguments.length<3?e:r):n.value}).apply(null,arguments)}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var d=function(){function i(e,t,r,n){if(this instanceof i)return u(this,i,[e,t,r,n]);throw new TypeError("Cannot call a class as a function")}var e,t=i,r=n.default;if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&f(t,r),t=i,(r=[{key:"drawFlatCoordinates_",value:function(e,t,r,n){var i=this.coordinates.length,e=this.appendFlatLineCoordinates(e,t,r,n,!1,!1),t=[h.default.MOVE_TO_LINE_TO,i,e];return this.instructions.push(t),this.hitDetectionInstructions.push(t),r}},{key:"drawLineString",value:function(e,t,r){var n=this.state,i=n.strokeStyle,o=n.lineWidth;void 0!==i&&void 0!==o&&(this.updateStrokeStyle(n,this.applyStroke),this.beginGeometry(e,t,r),this.hitDetectionInstructions.push([h.default.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,p.defaultLineDash,p.defaultLineDashOffset],h.beginPathInstruction),i=e.getFlatCoordinates(),o=e.getStride(),this.drawFlatCoordinates_(i,0,i.length,o),this.hitDetectionInstructions.push(h.strokeInstruction),this.endGeometry(t))}},{key:"drawMultiLineString",value:function(e,t,r){var n=this.state,i=n.strokeStyle,o=n.lineWidth;if(void 0!==i&&void 0!==o){this.updateStrokeStyle(n,this.applyStroke),this.beginGeometry(e,t,r),this.hitDetectionInstructions.push([h.default.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,p.defaultLineDash,p.defaultLineDashOffset],h.beginPathInstruction);for(var a=e.getEnds(),s=e.getFlatCoordinates(),u=e.getStride(),l=0,c=0,f=a.length;c<f;++c)l=this.drawFlatCoordinates_(s,l,a[c],u);this.hitDetectionInstructions.push(h.strokeInstruction),this.endGeometry(t)}}},{key:"finish",value:function(){var e=this.state;return null!=e.lastStroke&&e.lastStroke!=this.coordinates.length&&this.instructions.push(h.strokeInstruction),this.reverseHitDetectionInstructions(),this.state=null,l(c(i.prototype),"finish",this).call(this)}},{key:"applyStroke",value:function(e){null!=e.lastStroke&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(h.strokeInstruction),e.lastStroke=this.coordinates.length),e.lastStroke=0,l(c(i.prototype),"applyStroke",this).call(this,e),this.instructions.push(h.beginPathInstruction)}}])&&o(t.prototype,r),e&&o(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();r.default=d},{"../canvas.js":297,"./Builder.js":298,"./Instruction.js":304}],306:[function(e,t,r){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=(g=e("./Builder.js"))&&g.__esModule?g:{default:g},h=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};t=s(t);if(t&&t.has(e))return t.get(e);var r,n={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in e){var o;"default"!==r&&{}.hasOwnProperty.call(e,r)&&((o=i?Object.getOwnPropertyDescriptor(e,r):null)&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=e[r])}return n.default=e,t&&t.set(e,n),n}(e("./Instruction.js")),p=e("../canvas.js"),o=e("../../geom/flat/simplify.js");function s(e){var t,r;return"function"!=typeof WeakMap?null:(t=new WeakMap,r=new WeakMap,(s=function(e){return e?r:t})(e))}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=a(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==a(e)?e:e+""}(n.key),n)}}function l(e,t,r){t=f(t);var n=e,t=i()?Reflect.construct(t,r||[],f(e).constructor):t.apply(e,r);if(t&&("object"==a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function i(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(i=function(){return!!e})()}function c(){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=f(e)););return e}(e,t);if(n)return(n=Object.getOwnPropertyDescriptor(n,t)).get?n.get.call(arguments.length<3?e:r):n.value}).apply(null,arguments)}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var g=function(){function i(e,t,r,n){if(this instanceof i)return l(this,i,[e,t,r,n]);throw new TypeError("Cannot call a class as a function")}var e,t=i,r=n.default;if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&d(t,r),t=i,(r=[{key:"drawFlatCoordinatess_",value:function(e,t,r,n){var i=this.state,o=void 0!==i.fillStyle,a=void 0!==i.strokeStyle,s=r.length;this.instructions.push(h.beginPathInstruction),this.hitDetectionInstructions.push(h.beginPathInstruction);for(var u=0;u<s;++u){var l=r[u],c=this.coordinates.length,f=this.appendFlatLineCoordinates(e,t,l,n,!0,!a),c=[h.default.MOVE_TO_LINE_TO,c,f];this.instructions.push(c),this.hitDetectionInstructions.push(c),a&&(this.instructions.push(h.closePathInstruction),this.hitDetectionInstructions.push(h.closePathInstruction)),t=l}return o&&(this.instructions.push(h.fillInstruction),this.hitDetectionInstructions.push(h.fillInstruction)),a&&(this.instructions.push(h.strokeInstruction),this.hitDetectionInstructions.push(h.strokeInstruction)),t}},{key:"drawCircle",value:function(e,t,r){var n=this.state,i=n.fillStyle,o=n.strokeStyle;void 0===i&&void 0===o||(this.setFillStrokeStyles_(),this.beginGeometry(e,t,r),void 0!==n.fillStyle&&this.hitDetectionInstructions.push([h.default.SET_FILL_STYLE,p.defaultFillStyle]),void 0!==n.strokeStyle&&this.hitDetectionInstructions.push([h.default.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,p.defaultLineDash,p.defaultLineDashOffset]),i=e.getFlatCoordinates(),o=e.getStride(),r=this.coordinates.length,this.appendFlatLineCoordinates(i,0,i.length,o,!1,!1),e=[h.default.CIRCLE,r],this.instructions.push(h.beginPathInstruction,e),this.hitDetectionInstructions.push(h.beginPathInstruction,e),void 0!==n.fillStyle&&(this.instructions.push(h.fillInstruction),this.hitDetectionInstructions.push(h.fillInstruction)),void 0!==n.strokeStyle&&(this.instructions.push(h.strokeInstruction),this.hitDetectionInstructions.push(h.strokeInstruction)),this.endGeometry(t))}},{key:"drawPolygon",value:function(e,t,r){var n=this.state,i=n.fillStyle,o=n.strokeStyle;void 0===i&&void 0===o||(this.setFillStrokeStyles_(),this.beginGeometry(e,t,r),void 0!==n.fillStyle&&this.hitDetectionInstructions.push([h.default.SET_FILL_STYLE,p.defaultFillStyle]),void 0!==n.strokeStyle&&this.hitDetectionInstructions.push([h.default.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,p.defaultLineDash,p.defaultLineDashOffset]),i=e.getEnds(),o=e.getOrientedFlatCoordinates(),r=e.getStride(),this.drawFlatCoordinatess_(o,0,i,r),this.endGeometry(t))}},{key:"drawMultiPolygon",value:function(e,t,r){var n=this.state,i=n.fillStyle,o=n.strokeStyle;if(void 0!==i||void 0!==o){this.setFillStrokeStyles_(),this.beginGeometry(e,t,r),void 0!==n.fillStyle&&this.hitDetectionInstructions.push([h.default.SET_FILL_STYLE,p.defaultFillStyle]),void 0!==n.strokeStyle&&this.hitDetectionInstructions.push([h.default.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,p.defaultLineDash,p.defaultLineDashOffset]);for(var a=e.getEndss(),s=e.getOrientedFlatCoordinates(),u=e.getStride(),l=0,c=0,f=a.length;c<f;++c)l=this.drawFlatCoordinatess_(s,l,a[c],u);this.endGeometry(t)}}},{key:"finish",value:function(){this.reverseHitDetectionInstructions(),this.state=null;var e=this.tolerance;if(0!==e)for(var t=this.coordinates,r=0,n=t.length;r<n;++r)t[r]=(0,o.snap)(t[r],e);return c(f(i.prototype),"finish",this).call(this)}},{key:"setFillStrokeStyles_",value:function(){var e=this.state;void 0!==e.fillStyle&&this.updateFillStyle(e,this.createFill),void 0!==e.strokeStyle&&this.updateStrokeStyle(e,this.applyStroke)}}])&&u(t.prototype,r),e&&u(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();r.default=g},{"../../geom/flat/simplify.js":229,"../canvas.js":297,"./Builder.js":298,"./Instruction.js":304}],307:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.TEXT_ALIGN=void 0;var n=o(e("./Builder.js")),Q=o(e("./Instruction.js")),l=e("../../colorlike.js"),F=e("../canvas.js"),c=e("../../util.js"),N=e("../../extent.js"),G=e("../../geom/flat/linechunk.js"),U=e("../../geom/flat/straightchunk.js");function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function s(e,t,r){t=h(t);var n=e,t=u()?Reflect.construct(t,r||[],h(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(u=function(){return!!e})()}function f(){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=h(e)););return e}(e,t);if(n)return(n=Object.getOwnPropertyDescriptor(n,t)).get?n.get.call(arguments.length<3?e:r):n.value}).apply(null,arguments)}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var d=r.TEXT_ALIGN={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1},e=function(){function i(e,t,r,n){if(this instanceof i)return(e=s(this,i,[e,t,r,n])).labels_=null,e.text_="",e.textOffsetX_=0,e.textOffsetY_=0,e.textRotateWithView_=void 0,e.textRotation_=0,e.textFillState_=null,e.fillStates={},e.fillStates[F.defaultFillStyle]={fillStyle:F.defaultFillStyle},e.textStrokeState_=null,e.strokeStates={},e.textState_={},e.textStates={},e.textKey_="",e.fillKey_="",e.strokeKey_="",e.declutterMode_=void 0,e.declutterImageWithText_=void 0,e;throw new TypeError("Cannot call a class as a function")}var e,t=i,r=n.default;if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&p(t,r),t=i,(r=[{key:"finish",value:function(){var e=f(h(i.prototype),"finish",this).call(this);return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e}},{key:"drawText",value:function(e,t,r){var n=this.textFillState_,i=this.textStrokeState_,o=this.textState_;if(""!==this.text_&&o&&(n||i)){var a=this.coordinates,s=a.length,n=e.getType(),u=null,l=e.getStride();if("line"!==o.placement||"LineString"!=n&&"MultiLineString"!=n&&"Polygon"!=n&&"MultiPolygon"!=n){var c=o.overflow?null:[];switch(n){case"Point":case"MultiPoint":u=e.getFlatCoordinates();break;case"LineString":u=e.getFlatMidpoint();break;case"Circle":u=e.getCenter();break;case"MultiLineString":u=e.getFlatMidpoints(),l=2;break;case"Polygon":u=e.getFlatInteriorPoint(),o.overflow||c.push(u[2]/this.resolution),l=3;break;case"MultiPolygon":for(var f=e.getFlatInteriorPoints(),u=[],h=0,p=f.length;h<p;h+=3)o.overflow||c.push(f[h+2]/this.resolution),u.push(f[h],f[h+1]);if(0===u.length)return;l=2}var d,g,y,A,m,v,b,i=this.appendFlatPointCoordinates(u,l);i!==s&&(c&&(i-s)/2!=u.length/l&&(d=s/2,c=c.filter(function(e,t){t=a[2*(d+t)]===u[t*l]&&a[2*(d+t)+1]===u[t*l+1];return t||--d,t})),this.saveTextStates_(),(o.backgroundFill||o.backgroundStroke)&&(this.setFillStrokeStyle(o.backgroundFill,o.backgroundStroke),o.backgroundFill&&this.updateFillStyle(this.state,this.createFill),o.backgroundStroke)&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state))),this.beginGeometry(e,t,r),(g=o.padding)!=F.defaultPadding&&(o.scale[0]<0||o.scale[1]<0)&&(v=o.padding[0],b=o.padding[1],y=o.padding[2],A=o.padding[3],o.scale[0]<0&&(b=-b,A=-A),o.scale[1]<0&&(v=-v,y=-y),g=[v,b,y,A]),m=this.pixelRatio,this.instructions.push([Q.default.DRAW_IMAGE,s,i,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterMode_,this.declutterImageWithText_,g==F.defaultPadding?F.defaultPadding:g.map(function(e){return e*m}),!!o.backgroundFill,!!o.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,c]),v=1/m,b=this.state.fillStyle,o.backgroundFill&&(this.state.fillStyle=F.defaultFillStyle,this.hitDetectionInstructions.push(this.createFill(this.state))),this.hitDetectionInstructions.push([Q.default.DRAW_IMAGE,s,i,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[v,v],NaN,this.declutterMode_,this.declutterImageWithText_,g,!!o.backgroundFill,!!o.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_&&F.defaultFillStyle,this.textOffsetX_,this.textOffsetY_,c]),o.backgroundFill&&(this.state.fillStyle=b,this.hitDetectionInstructions.push(this.createFill(this.state))),this.endGeometry(t))}else if((0,N.intersects)(this.maxExtent,e.getExtent())){if(u=e.getFlatCoordinates(),"LineString"==n)w=[u.length];else if("MultiLineString"==n)w=e.getEnds();else if("Polygon"==n)w=e.getEnds().slice(0,1);else if("MultiPolygon"==n)for(var _=e.getEndss(),w=[],E=0,C=_.length;E<C;++E)w.push(_[E][0]);this.beginGeometry(e,t,r);for(var I=o.repeat,S=I?void 0:o.textAlign,j=0,x=0,D=w.length;x<D;++x)for(var O,P=0,L=(O=I?(0,G.lineChunk)(I*this.resolution,u,j,w[x],l):[u.slice(j,w[x])]).length;P<L;++P){var k=O[P],B=0,T=k.length;null==S&&(B=(R=(0,U.matchingChunk)(o.maxAngle,k,0,k.length,2))[0],T=R[1]);for(var M=B;M<T;M+=l)a.push(k[M],k[M+1]);var R=a.length,j=w[x];this.drawChars_(s,R),s=R}this.endGeometry(t)}}}},{key:"saveTextStates_",value:function(){var e=this.textStrokeState_,t=this.textState_,r=this.textFillState_,n=this.strokeKey_,n=(!e||n in this.strokeStates||(this.strokeStates[n]={strokeStyle:e.strokeStyle,lineCap:e.lineCap,lineDashOffset:e.lineDashOffset,lineWidth:e.lineWidth,lineJoin:e.lineJoin,miterLimit:e.miterLimit,lineDash:e.lineDash}),this.textKey_),e=(n in this.textStates||(this.textStates[n]={font:t.font,textAlign:t.textAlign||F.defaultTextAlign,justify:t.justify,textBaseline:t.textBaseline||F.defaultTextBaseline,scale:t.scale}),this.fillKey_);!r||e in this.fillStates||(this.fillStates[e]={fillStyle:r.fillStyle})}},{key:"drawChars_",value:function(e,t){var r=this.textStrokeState_,n=this.textState_,i=this.strokeKey_,o=this.textKey_,a=this.fillKey_,s=(this.saveTextStates_(),this.pixelRatio),u=d[n.textBaseline],l=this.textOffsetY_*s,c=this.text_,r=r?r.lineWidth*Math.abs(n.scale[0])/2:0;this.instructions.push([Q.default.DRAW_CHARS,e,t,u,n.overflow,a,n.maxAngle,s,l,i,r*s,c,o,1,this.declutterMode_]),this.hitDetectionInstructions.push([Q.default.DRAW_CHARS,e,t,u,n.overflow,a&&F.defaultFillStyle,n.maxAngle,s,l,i,r*s,c,o,1/s,this.declutterMode_])}},{key:"setTextStyle",value:function(e,t){var r,n,i,o,a,s,u;e?((a=e.getFill())?((r=this.textFillState_)||(this.textFillState_=r={}),r.fillStyle=(0,l.asColorLike)(a.getColor()||F.defaultFillStyle)):this.textFillState_=r=null,(a=e.getStroke())?((n=this.textStrokeState_)||(this.textStrokeState_=n={}),i=a.getLineDash(),s=a.getLineDashOffset(),u=a.getWidth(),o=a.getMiterLimit(),n.lineCap=a.getLineCap()||F.defaultLineCap,n.lineDash=i?i.slice():F.defaultLineDash,n.lineDashOffset=void 0===s?F.defaultLineDashOffset:s,n.lineJoin=a.getLineJoin()||F.defaultLineJoin,n.lineWidth=void 0===u?F.defaultLineWidth:u,n.miterLimit=void 0===o?F.defaultMiterLimit:o,n.strokeStyle=(0,l.asColorLike)(a.getColor()||F.defaultStrokeStyle)):this.textStrokeState_=n=null,i=this.textState_,s=e.getFont()||F.defaultFont,(0,F.registerFont)(s),u=e.getScaleArray(),i.overflow=e.getOverflow(),i.font=s,i.maxAngle=e.getMaxAngle(),i.placement=e.getPlacement(),i.textAlign=e.getTextAlign(),i.repeat=e.getRepeat(),i.justify=e.getJustify(),i.textBaseline=e.getTextBaseline()||F.defaultTextBaseline,i.backgroundFill=e.getBackgroundFill(),i.backgroundStroke=e.getBackgroundStroke(),i.padding=e.getPadding()||F.defaultPadding,i.scale=void 0===u?[1,1]:u,o=e.getOffsetX(),a=e.getOffsetY(),s=e.getRotateWithView(),u=e.getRotation(),this.text_=e.getText()||"",this.textOffsetX_=void 0===o?0:o,this.textOffsetY_=void 0===a?0:a,this.textRotateWithView_=void 0!==s&&s,this.textRotation_=void 0===u?0:u,this.strokeKey_=n?("string"==typeof n.strokeStyle?n.strokeStyle:(0,c.getUid)(n.strokeStyle))+n.lineCap+n.lineDashOffset+"|"+n.lineWidth+n.lineJoin+n.miterLimit+"["+n.lineDash.join()+"]":"",this.textKey_=i.font+i.scale+(i.textAlign||"?")+(i.repeat||"?")+(i.justify||"?")+(i.textBaseline||"?"),this.fillKey_=r&&r.fillStyle?"string"==typeof r.fillStyle?r.fillStyle:"|"+(0,c.getUid)(r.fillStyle):""):this.text_="",this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}])&&a(t.prototype,r),e&&a(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();r.default=e},{"../../colorlike.js":114,"../../extent.js":142,"../../geom/flat/linechunk.js":225,"../../geom/flat/straightchunk.js":230,"../../util.js":404,"../canvas.js":297,"./Builder.js":298,"./Instruction.js":304}],308:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=e("../../dom.js");function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){{var r;if(e)return"string"==typeof e?i(e,t):"Map"===(r="Object"===(r={}.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,u(n.key),n)}}function u(e){e=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==n(e)?e:e+""}e=function e(){var t,r,n,i=this;if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");t=this,n=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return i.instructions_[i.zIndex+i.offset_].push(t),i},(r=u(r="pushMethodArgs_"))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,this.instructions_=[],this.zIndex=0,this.offset_=0,this.context_=new Proxy((0,o.getSharedCanvasContext2D)(),{get:function(e,t){if("function"==typeof(0,o.getSharedCanvasContext2D)()[t])return i.instructions_[i.zIndex+i.offset_]||(i.instructions_[i.zIndex+i.offset_]=[]),i.instructions_[i.zIndex+i.offset_].push(t),i.pushMethodArgs_},set:function(e,t,r){return i.instructions_[i.zIndex+i.offset_]||(i.instructions_[i.zIndex+i.offset_]=[]),i.instructions_[i.zIndex+i.offset_].push(t,r),!0}})},(c=[{key:"pushFunction",value:function(e){this.instructions_[this.zIndex+this.offset_].push(e)}},{key:"getContext",value:function(){return this.context_}},{key:"draw",value:function(o){this.instructions_.forEach(function(e){for(var t=0,r=e.length;t<r;++t){var n,i=e[t];"function"!=typeof i?(n=e[++t],"function"==typeof o[i]?o[i].apply(o,a(n)):o[i]="function"==typeof n?n(o):n):i(o)}})}},{key:"clear",value:function(){this.instructions_.length=0,this.zIndex=0,this.offset_=0}},{key:"offset",value:function(){this.offset_=this.instructions_.length,this.zIndex=0}}])&&s(e.prototype,c),l&&s(e,l),Object.defineProperty(e,"prototype",{writable:!1});var l,c=e;r.default=c},{"../../dom.js":130}],309:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.HIT_DETECT_RESOLUTION=void 0,r.createHitDetectionImageData=function(e,t,r,n,i,o,a,s,u){var l=u?(0,W.toUserExtent)(i,u):i,c=e[0]*V,e=e[1]*V,c=(0,H.createCanvasContext2D)(c,e);c.imageSmoothingEnabled=!1;for(var e=c.canvas,f=new U.default(c,V,i,null,a,s,u?(0,W.getTransformFromProjections)((0,W.getUserProjection)(),u):null),h=r.length,D=Math.floor(16777215/h),p={},d=1;d<=h;++d){var g=r[d-1],y=g.getStyleFunction()||n;if(y){var A=y(g,o);if(A){Array.isArray(A)||(A=[A]);for(var m=(d*D).toString(16).padStart(7,"#00000"),v=0,L=A.length;v<L;++v){var b=A[v],_=b.getGeometryFunction()(g);if(_&&(0,Y.intersects)(l,_.getExtent())){var w=b.clone(),E=w.getFill(),E=(E&&E.setColor(m),w.getStroke()),E=(E&&(E.setColor(m),E.setLineDash(null)),w.setText(void 0),b.getImage());if(E){b=E.getImageSize();if(!b)continue;var b=(0,H.createCanvasContext2D)(b[0],b[1],void 0,{alpha:!1}),C=b.canvas;b.fillStyle=m,b.fillRect(0,0,C.width,C.height),w.setImage(new z.Icon({img:C,anchor:E.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:E.getOrigin(),opacity:1,size:E.getSize(),scale:E.getScale(),rotation:E.getRotation(),rotateWithView:E.getRotateWithView()}))}var b=w.getZIndex()||0,I=p[b],C=(I||(I={},(p[b]=I).Polygon=[],I.Circle=[],I.LineString=[],I.Point=[]),_.getType());if("GeometryCollection"===C)for(var S=_.getGeometriesArrayRecursive(),j=0,Q=S.length;j<Q;++j){var x=S[j];I[x.getType().replace("Multi","")].push(x,w)}else I[C.replace("Multi","")].push(_,w)}}}}}for(var O=Object.keys(p).map(Number).sort(q.ascending),P=0,F=O.length;P<F;++P){var k,B=p[O[P]];for(k in B)for(var T=B[k],M=0,N=T.length;M<N;M+=2){f.setStyle(T[M+1]);for(var R=0,G=t.length;R<G;++R)f.setTransform(t[R]),f.drawGeometry(T[M])}}return c.getImageData(0,0,e.width,e.height)},r.hitDetect=function(e,t,r){var n=[];{var i,o;r&&(o=Math.floor(Math.round(e[0])*V),e=Math.floor(Math.round(e[1])*V),o=4*((0,a.clamp)(o,0,r.width-1)+(0,a.clamp)(e,0,r.height-1)*r.width),e=r.data[o],i=r.data[1+o],r=r.data[2+o]+256*(i+256*e),o=Math.floor(16777215/t.length),r)&&r%o==0&&n.push(t[r/o-1])}return n};var n,U=(n=e("./Immediate.js"))&&n.__esModule?n:{default:n},z=e("../../style.js"),q=e("../../array.js"),a=e("../../math.js"),H=e("../../dom.js"),W=e("../../proj.js"),Y=e("../../extent.js");var V=r.HIT_DETECT_RESOLUTION=.5},{"../../array.js":110,"../../dom.js":130,"../../extent.js":142,"../../math.js":279,"../../proj.js":283,"../../style.js":384,"./Immediate.js":303}],310:[function(e,n,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.buildRuleSet=o,t.buildStyle=d,t.flatStylesToStyleFunction=function(e){for(var o=(0,c.newParsingContext)(),a=e.length,s=new Array(a),t=0;t<a;++t)s[t]=d(e[t],o);var u=(0,p.newEvaluationContext)(),l=new Array(a);return function(e,t){u.properties=e.getPropertiesInternal(),u.resolution=t,o.featureId&&(t=e.getId(),u.featureId=void 0!==t?t:null);for(var r=0,n=0;n<a;++n){var i=s[n](u);i&&(l[r]=i,r+=1)}return l.length=r,l}},t.rulesToStyleFunction=function(e){var r=(0,c.newParsingContext)(),n=o(e,r),i=(0,p.newEvaluationContext)();return function(e,t){return i.properties=e.getPropertiesInternal(),i.resolution=t,r.featureId&&(t=e.getId(),i.featureId=void 0!==t?t:null),r.geometryType&&(i.geometryType=(0,c.computeGeometryType)(e.getGeometry())),n(i)}};var P=r(e("../../style/Circle.js")),h=r(e("../../style/Fill.js")),k=r(e("../../style/Icon.js")),B=r(e("../../style/RegularShape.js")),f=r(e("../../style/Stroke.js")),T=r(e("../../style/Style.js")),M=r(e("../../style/Text.js")),c=e("../../expr/expression.js"),p=e("../../expr/cpu.js"),R=e("../../obj.js"),D=e("../../size.js");function r(e){return e&&e.__esModule?e:{default:e}}function A(e,t){var r,n,i,o,a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(a)return i=!(n=!0),{s:function(){a=a.call(e)},n:function(){var e=a.next();return n=e.done,e},e:function(e){i=!0,r=e},f:function(){try{n||null==a.return||a.return()}finally{if(i)throw r}}};if(Array.isArray(e)||(a=function(e,t){{var r;if(e)return"string"==typeof e?s(e,t):"Map"===(r="Object"===(r={}.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length)return a&&(e=a),o=0,{s:t=function(){},n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function m(e){return!0}function o(s,e){for(var u=s.length,l=new Array(u),t=0;t<u;++t){var r=s[t],n="filter"in r?(0,p.buildExpression)(r.filter,c.BooleanType,e):m,i=void 0;if(Array.isArray(r.style))for(var o=r.style.length,i=new Array(o),a=0;a<o;++a)i[a]=d(r.style[a],e);else i=[d(r.style,e)];l[t]={filter:n,styles:i}}return function(e){for(var t=[],r=!1,n=0;n<u;++n)if((0,l[n].filter)(e)&&(!s[n].else||!r)){var i,r=!0,o=A(l[n].styles);try{for(o.s();!(i=o.n()).done;){var a=(0,i.value)(e);a&&t.push(a)}}catch(e){o.e(e)}finally{o.f()}}return t}}function d(e,t){var r,n,i,o,a,s,u,l,c,f,h,p,d,g,y,A,m,v,b,_,w,E,C,I=L(e,"",t),S=Q(e,"",t),j=(E=N(r=e,"text-value",n=t))?(i=L(r,"text-",n),o=L(r,"text-background-",n),a=Q(r,"text-",n),s=Q(r,"text-background-",n),u=N(r,"text-font",n),l=F(r,"text-max-angle",n),c=F(r,"text-offset-x",n),f=F(r,"text-offset-y",n),h=G(r,"text-overflow",n),p=N(r,"text-placement",n),d=F(r,"text-repeat",n),g=q(r,"text-scale",n),y=G(r,"text-rotate-with-view",n),A=F(r,"text-rotation",n),m=N(r,"text-align",n),v=N(r,"text-justify",n),b=N(r,"text-baseline",n),_=U(r,"text-padding",n),n=V(r,"text-declutter-mode"),w=new M.default({declutterMode:n}),function(e){if(w.setText(E(e)),i&&w.setFill(i(e)),o&&w.setBackgroundFill(o(e)),a&&w.setStroke(a(e)),s&&w.setBackgroundStroke(s(e)),u&&w.setFont(u(e)),l&&w.setMaxAngle(l(e)),c&&w.setOffsetX(c(e)),f&&w.setOffsetY(f(e)),h&&w.setOverflow(h(e)),p){var t=p(e);if("point"!==t&&"line"!==t)throw new Error("Expected point or line for text-placement");w.setPlacement(t)}if(d&&w.setRepeat(d(e)),g&&w.setScale(g(e)),y&&w.setRotateWithView(y(e)),A&&w.setRotation(A(e)),m){t=m(e);if("left"!==t&&"center"!==t&&"right"!==t&&"end"!==t&&"start"!==t)throw new Error("Expected left, right, center, start, or end for text-align");w.setTextAlign(t)}if(v){t=v(e);if("left"!==t&&"right"!==t&&"center"!==t)throw new Error("Expected left, right, or center for text-justify");w.setJustify(t)}if(b){t=b(e);if("bottom"!==t&&"top"!==t&&"middle"!==t&&"alphabetic"!==t&&"hanging"!==t)throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");w.setTextBaseline(t)}return _&&w.setPadding(_(e)),w}):null,x=(r=t,"icon-src"in(n=e)?function(e,t){var r=X(e["icon-src"],"icon-src"),n=z(e,"icon-anchor",t),i=q(e,"icon-scale",t),o=F(e,"icon-opacity",t),a=z(e,"icon-displacement",t),s=F(e,"icon-rotation",t),u=G(e,"icon-rotate-with-view",t),t=W(e,"icon-anchor-origin"),l=Y(e,"icon-anchor-x-units"),c=Y(e,"icon-anchor-y-units"),f=function(e,t){e=e[t];if(void 0!==e)return Z(e,t)}(e,"icon-color"),h=function(e,t){e=e[t];if(void 0!==e){if("string"!=typeof e)throw new Error("Expected a string for ".concat(t));return e}}(e,"icon-cross-origin"),p=function(e,t){e=e[t];if(void 0!==e)return K(e,t)}(e,"icon-offset"),d=W(e,"icon-offset-origin"),g=H(e,"icon-width"),y=H(e,"icon-height"),A=function(e,t){e=e[t];if(void 0!==e){if("number"==typeof e)return(0,D.toSize)(e);if(!Array.isArray(e))throw new Error("Expected a number or size array for ".concat(t));if(2!==e.length||"number"!=typeof e[0]||"number"!=typeof e[1])throw new Error("Expected a number or size array for ".concat(t));return e}}(e,"icon-size"),e=V(e,"icon-declutter-mode"),m=new k.default({src:r,anchorOrigin:t,anchorXUnits:l,anchorYUnits:c,color:f,crossOrigin:h,offset:p,offsetOrigin:d,height:y,width:g,size:A,declutterMode:e});return function(e){return o&&m.setOpacity(o(e)),a&&m.setDisplacement(a(e)),s&&m.setRotation(s(e)),u&&m.setRotateWithView(u(e)),i&&m.setScale(i(e)),n&&m.setAnchor(n(e)),m}}(n,r):"shape-points"in n?function(e,t){var r=J(e["shape-points"],"shape-points"),n=J(e["shape-radius"],"shape-radius"),i=L(e,"shape-",t),o=Q(e,"shape-",t),a=q(e,"shape-scale",t),s=z(e,"shape-displacement",t),u=F(e,"shape-rotation",t),l=G(e,"shape-rotate-with-view",t),t=H(e,"shape-radius2"),c=H(e,"shape-angle"),e=V(e,"shape-declutter-mode"),f=new B.default({points:r,radius:n,radius2:t,angle:c,declutterMode:e});return function(e){return i&&f.setFill(i(e)),o&&f.setStroke(o(e)),s&&f.setDisplacement(s(e)),u&&f.setRotation(u(e)),l&&f.setRotateWithView(l(e)),a&&f.setScale(a(e)),f}}(n,r):"circle-radius"in n?function(e,t){var r=L(e,"circle-",t),n=Q(e,"circle-",t),i=F(e,"circle-radius",t),o=q(e,"circle-scale",t),a=z(e,"circle-displacement",t),s=F(e,"circle-rotation",t),u=G(e,"circle-rotate-with-view",t),t=V(e,"circle-declutter-mode"),l=new P.default({radius:5,declutterMode:t});return function(e){return i&&l.setRadius(i(e)),r&&l.setFill(r(e)),n&&l.setStroke(n(e)),a&&l.setDisplacement(a(e)),s&&l.setRotation(s(e)),u&&l.setRotateWithView(u(e)),o&&l.setScale(o(e)),l}}(n,r):null),O=F(e,"z-index",t);if(I||S||j||x||(0,R.isEmpty)(e))return C=new T.default,function(e){var t,r=!0;return I&&((t=I(e))&&(r=!1),C.setFill(t)),S&&((t=S(e))&&(r=!1),C.setStroke(t)),j&&((t=j(e))&&(r=!1),C.setText(t)),x&&((t=x(e))&&(r=!1),C.setImage(t)),O&&C.setZIndex(O(e)),r?null:C};throw new Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(e))}function L(e,t,r){var n,i,o,a,s,u,l,c,f;return(n=t+"fill-pattern-src"in e?(s=N(i=e,(o=t+"fill-")+"pattern-src",a=r),u=y(i,o+"pattern-offset",a),l=y(i,o+"pattern-size",a),c=g(i,o+"color",a),function(e){return{src:s(e),offset:u&&u(e),size:l&&l(e),color:c&&c(e)}}):g(e,t+"fill-color",r))?(f=new h.default,function(e){e=n(e);return"none"===e?null:(f.setColor(e),f)}):null}function Q(e,t,r){var n,i,o,a,s,u,l=F(e,t+"stroke-width",r),c=g(e,t+"stroke-color",r);return l||c?(n=N(e,t+"stroke-line-cap",r),i=N(e,t+"stroke-line-join",r),o=U(e,t+"stroke-line-dash",r),a=F(e,t+"stroke-line-dash-offset",r),s=F(e,t+"stroke-miter-limit",r),u=new f.default,function(e){if(c){var t=c(e);if("none"===t)return null;u.setColor(t)}if(l&&u.setWidth(l(e)),n){t=n(e);if("butt"!==t&&"round"!==t&&"square"!==t)throw new Error("Expected butt, round, or square line cap");u.setLineCap(t)}if(i){t=i(e);if("bevel"!==t&&"round"!==t&&"miter"!==t)throw new Error("Expected bevel, round, or miter line join");u.setLineJoin(t)}return o&&u.setLineDash(o(e)),a&&u.setLineDashOffset(a(e)),s&&u.setMiterLimit(s(e)),u}):null}function F(e,t,r){var n;if(t in e)return n=(0,p.buildExpression)(e[t],c.NumberType,r),function(e){return J(n(e),t)}}function N(e,t,r){var n;return t in e?(n=(0,p.buildExpression)(e[t],c.StringType,r),function(e){return X(n(e),t)}):null}function G(e,t,r){var n;return t in e?(n=(0,p.buildExpression)(e[t],c.BooleanType,r),function(e){e=n(e);if("boolean"!=typeof e)throw new Error("Expected a boolean for ".concat(t));return e}):null}function g(e,t,r){var n;return t in e?(n=(0,p.buildExpression)(e[t],c.ColorType|c.StringType,r),function(e){return Z(n(e),t)}):null}function U(e,t,r){var n;return t in e?(n=(0,p.buildExpression)(e[t],c.NumberArrayType,r),function(e){return K(n(e),t)}):null}function z(e,t,r){var n;return t in e?(n=(0,p.buildExpression)(e[t],c.NumberArrayType,r),function(e){e=K(n(e),t);if(2!==e.length)throw new Error("Expected two numbers for ".concat(t));return e}):null}function y(e,t,r){var n;return t in e?(n=(0,p.buildExpression)(e[t],c.NumberArrayType,r),function(e){return i(n(e),t)}):null}function q(e,r,t){var n;return r in e?(n=(0,p.buildExpression)(e[r],c.NumberArrayType|c.NumberType,t),function(e){return e=n(e),t=r,"number"==typeof e?e:i(e,t);var t}):null}function H(e,t){e=e[t];if(void 0!==e){if("number"!=typeof e)throw new Error("Expected a number for ".concat(t));return e}}function W(e,t){e=e[t];if(void 0!==e){if("bottom-left"!==e&&"bottom-right"!==e&&"top-left"!==e&&"top-right"!==e)throw new Error("Expected bottom-left, bottom-right, top-left, or top-right for ".concat(t));return e}}function Y(e,t){e=e[t];if(void 0!==e){if("pixels"!==e&&"fraction"!==e)throw new Error("Expected pixels or fraction for ".concat(t));return e}}function V(e,t){e=e[t];if(void 0!==e){if("string"!=typeof e)throw new Error("Expected a string for ".concat(t));if("declutter"!==e&&"obstacle"!==e&&"none"!==e)throw new Error("Expected declutter, obstacle, or none for ".concat(t));return e}}function K(e,t){if(!Array.isArray(e))throw new Error("Expected an array for ".concat(t));for(var r=e.length,n=0;n<r;++n)if("number"!=typeof e[n])throw new Error("Expected an array of numbers for ".concat(t));return e}function X(e,t){if("string"!=typeof e)throw new Error("Expected a string for ".concat(t));return e}function J(e,t){if("number"!=typeof e)throw new Error("Expected a number for ".concat(t));return e}function Z(e,t){if("string"==typeof e)return e;var e=K(e,t),r=e.length;if(r<3||4<r)throw new Error("Expected a color with 3 or 4 values for ".concat(t));return e}function i(e,t){e=K(e,t);if(2!==e.length)throw new Error("Expected an array of two numbers for ".concat(t));return e}},{"../../expr/cpu.js":139,"../../expr/expression.js":140,"../../obj.js":281,"../../size.js":337,"../../style/Circle.js":385,"../../style/Fill.js":386,"../../style/Icon.js":387,"../../style/RegularShape.js":391,"../../style/Stroke.js":392,"../../style/Style.js":393,"../../style/Text.js":394}],311:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.WebGLWorkerMessageType=void 0;r.WebGLWorkerMessageType={GENERATE_POLYGON_BUFFERS:"GENERATE_POLYGON_BUFFERS",GENERATE_POINT_BUFFERS:"GENERATE_POINT_BUFFERS",GENERATE_LINE_STRING_BUFFERS:"GENERATE_LINE_STRING_BUFFERS"}},{}],312:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.LINESTRING_ANGLE_COSINE_CUTOFF=void 0,r.colorDecodeId=function(e){var t=0;return t=(t=(t=(t+=Math.round(256*e[0]*256*256*255))+Math.round(256*e[1]*256*255))+Math.round(256*e[2]*255))+Math.round(255*e[3])},r.colorEncodeId=function(e,t){return(t=t||[])[0]=Math.floor(e/256/256/256)/255,t[1]=Math.floor(e/256/256)%256/255,t[2]=Math.floor(e/256)%256/255,t[3]=e%256/255,t},r.getBlankImageData=function(){var e=document.createElement("canvas").getContext("2d").createImageData(1,1);return e.data[0]=255,e.data[1]=255,e.data[2]=255,e.data[3]=255,e},r.writeLineSegmentToBuffers=function(e,t,r,n,i,o,a,s,u,l,c){var f=8+s.length,f=o.length/f,t=[e[t+0],e[t+1]],r=[e[r],e[r+1]],h=(0,b.apply)(u,[].concat(t)),p=(0,b.apply)(u,[].concat(r));function d(e,t,r){var n=Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1])),t=[(t[0]-e[0])/n,(t[1]-e[1])/n],i=[-t[1],t[0]],o=Math.sqrt((r[0]-e[0])*(r[0]-e[0])+(r[1]-e[1])*(r[1]-e[1])),r=[(r[0]-e[0])/o,(r[1]-e[1])/o],e=0===n||0===o?0:Math.acos((0,_.clamp)(r[0]*t[0]+r[1]*t[1],-1,1));return 0<r[0]*i[0]+r[1]*i[1]?e:2*Math.PI-e}var g=-1,y=-1,A=c,m=null!==i;null!==n&&(n=[e[n],e[n+1]],g=d(h,p,(0,b.apply)(u,[].concat(n))),Math.cos(g)<=E)&&(A+=Math.tan((g-Math.PI)/2));m&&(n=[e[i],e[i+1]],y=d(p,h,(0,b.apply)(u,[].concat(n))),Math.cos(y)<=E)&&(A+=Math.tan((Math.PI-y)/2));function v(e,t){return 0===t?1e4*e:Math.sign(t)*(1e4*e+Math.abs(t))}return o.push(t[0],t[1],r[0],r[1],g,y,l,v(0,c)),o.push.apply(o,w(s)),o.push(t[0],t[1],r[0],r[1],g,y,l,v(1,c)),o.push.apply(o,w(s)),o.push(t[0],t[1],r[0],r[1],g,y,l,v(2,c)),o.push.apply(o,w(s)),o.push(t[0],t[1],r[0],r[1],g,y,l,v(3,c)),o.push.apply(o,w(s)),a.push(f,1+f,2+f,1+f,3+f,2+f),{length:l+Math.sqrt((p[0]-h[0])*(p[0]-h[0])+(p[1]-h[1])*(p[1]-h[1])),angle:A}},r.writePointFeatureToBuffers=function(e,t,r,n,i,o){var a=3+i,s=e[t+0],u=e[t+1],l=h;l.length=i;for(var c=0;c<l.length;c++)l[c]=e[t+2+c];var i=o?o.vertexPosition:0,o=o?o.indexPosition:0,f=i/a;return d(r,i,s,u,0),l.length&&r.set(l,i+3),d(r,i+=a,s,u,1),l.length&&r.set(l,i+3),d(r,i+=a,s,u,2),l.length&&r.set(l,i+3),d(r,i+=a,s,u,3),l.length&&r.set(l,i+3),i+=a,n[o++]=f,n[o++]=1+f,n[o++]=3+f,n[o++]=1+f,n[o++]=2+f,n[o++]=3+f,p.vertexPosition=i,p.indexPosition=o,p},r.writePolygonTrianglesToBuffers=function(e,t,r,n,i){var o=2+i,a=t,s=e.slice(a,a+i);a+=i;for(var u=e[a++],l=0,c=new Array(u-1),f=0;f<u;f++)l+=e[a++],f<u-1&&(c[f]=l);for(var h=e.slice(a,a+2*l),p=(0,y.default)(h,c,2),d=0;d<p.length;d++)n.push(p[d]+r.length/o);for(var g=0;g<h.length;g+=2)r.push.apply(r,[h[g],h[g+1]].concat(w(s)));return a+2*l};var n,y=(n=e("earcut"))&&n.__esModule?n:{default:n},b=e("../../transform.js"),_=e("../../math.js");function w(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){{var r;if(e)return"string"==typeof e?i(e,t):"Map"===(r="Object"===(r={}.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var E=r.LINESTRING_ANGLE_COSINE_CUTOFF=.985,h=[],p={vertexPosition:0,indexPosition:0};function d(e,t,r,n,i){e[t+0]=r,e[t+1]=n,e[t+2]=i}},{"../../math.js":279,"../../transform.js":402,earcut:19}],313:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var c=n(e("../layer/BaseVector.js")),o=n(e("./Map.js")),a=n(e("../ObjectEventType.js")),s=n(e("../render/Event.js")),f=n(e("../render/EventType.js")),u=e("../css.js"),l=e("../render/canvas.js"),h=e("../layer/Layer.js"),p=e("../events.js"),d=e("../dom.js");function n(e){return e&&e.__esModule?e:{default:e}}function g(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function y(e,t,r){t=v(t);var n=e,t=A()?Reflect.construct(t,r||[],v(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function A(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(A=function(){return!!e})()}function m(){return(m="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=v(e)););return e}(e,t);if(n)return(n=Object.getOwnPropertyDescriptor(n,t)).get?n.get.call(arguments.length<3?e:r):n.value}).apply(null,arguments)}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t){return(b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}e=function(){function n(e){var t;if(!(this instanceof n))throw new TypeError("Cannot call a class as a function");(t=y(this,n,[e])).fontChangeListenerKey_=(0,p.listen)(l.checkedFonts,a.default.PROPERTYCHANGE,e.redrawText.bind(e)),t.element_=document.createElement("div");var r=t.element_.style,r=(r.position="absolute",r.width="100%",r.height="100%",r.zIndex="0",t.element_.className=u.CLASS_UNSELECTABLE+" ol-layers",e.getViewport());return r.insertBefore(t.element_,r.firstChild||null),t.children_=[],t.renderedVisible_=!0,t}var e,t=n,r=o.default;if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&b(t,r),t=n,(r=[{key:"dispatchRenderEvent",value:function(e,t){var r=this.getMap();r.hasListener(e)&&(e=new s.default(e,void 0,t),r.dispatchEvent(e))}},{key:"disposeInternal",value:function(){(0,p.unlistenByKey)(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),m(v(n.prototype),"disposeInternal",this).call(this)}},{key:"renderFrame",value:function(e){if(e){this.calculateMatrices2D(e),this.dispatchRenderEvent(f.default.PRECOMPOSE,e);for(var t=e.layerStatesArray.sort(function(e,t){return e.zIndex-t.zIndex}),r=(t.some(function(e){return e.layer instanceof c.default&&e.layer.getDeclutter()})&&(e.declutter={}),e.viewState),n=[],i=null,o=this.children_.length=0,a=t.length;o<a;++o){var s=t[o],u=(e.layerIndex=o,s.layer),l=u.getSourceState();!(0,h.inView)(s,r)||"ready"!=l&&"undefined"!=l?u.unrender():(l=u.render(e,i))&&(l!==i&&(this.children_.push(l),i=l),n.push(s))}this.declutter(e,n),(0,d.replaceChildren)(this.element_,this.children_),this.dispatchRenderEvent(f.default.POSTCOMPOSE,e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}else this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1)}},{key:"declutter",value:function(t,e){if(t.declutter){for(var r=e.length-1;0<=r;--r){var n=e[r],i=n.layer;i.getDeclutter()&&i.renderDeclutter(t,n)}e.forEach(function(e){return e.layer.renderDeferred(t)})}}}])&&g(t.prototype,r),e&&g(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();r.default=e},{"../ObjectEventType.js":97,"../css.js":129,"../dom.js":130,"../events.js":132,"../layer/BaseVector.js":264,"../layer/Layer.js":269,"../render/Event.js":293,"../render/EventType.js":294,"../render/canvas.js":297,"./Map.js":315}],314:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("../events/EventType.js")),a=n(e("../ImageState.js")),s=n(e("../Observable.js")),u=e("../util.js");function n(e){return e&&e.__esModule?e:{default:e}}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function c(e,t,r){t=p(t);var n=e,t=f()?Reflect.construct(t,r||[],p(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(f=function(){return!!e})()}function h(){return(h="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=p(e)););return e}(e,t);if(n)return(n=Object.getOwnPropertyDescriptor(n,t)).get?n.get.call(arguments.length<3?e:r):n.value}).apply(null,arguments)}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}e=function(){function r(e){var t;if(this instanceof r)return(t=c(this,r)).ready=!0,t.boundHandleImageChange_=t.handleImageChange_.bind(t),t.layer_=e,t;throw new TypeError("Cannot call a class as a function")}var e,t=r,n=s.default;if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&d(t,n),t=r,(n=[{key:"getFeatures",value:function(e){return(0,u.abstract)()}},{key:"getData",value:function(e){return null}},{key:"prepareFrame",value:function(e){return(0,u.abstract)()}},{key:"renderFrame",value:function(e,t){return(0,u.abstract)()}},{key:"loadedTileCallback",value:function(e,t,r){e[t]||(e[t]={}),e[t][r.tileCoord.toString()]=r}},{key:"createLoadedTileFinder",value:function(n,i,o){var a=this;return function(e,t){var r=a.loadedTileCallback.bind(a,o,e);return n.forEachLoadedTile(i,e,t,r)}}},{key:"forEachFeatureAtCoordinate",value:function(e,t,r,n,i){}},{key:"getLayer",value:function(){return this.layer_}},{key:"handleFontsChanged",value:function(){}},{key:"handleImageChange_",value:function(e){e=e.target;e.getState()!==a.default.LOADED&&e.getState()!==a.default.ERROR||this.renderIfReadyAndVisible()}},{key:"loadImage",value:function(e){var t=e.getState();return t!=a.default.LOADED&&t!=a.default.ERROR&&e.addEventListener(o.default.CHANGE,this.boundHandleImageChange_),t==a.default.IDLE&&(e.load(),t=e.getState()),t==a.default.LOADED}},{key:"renderIfReadyAndVisible",value:function(){var e=this.getLayer();e&&e.getVisible()&&"ready"===e.getSourceState()&&e.changed()}},{key:"renderDeferred",value:function(e){}},{key:"disposeInternal",value:function(){delete this.layer_,h(p(r.prototype),"disposeInternal",this).call(this)}}])&&l(t.prototype,n),e&&l(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();r.default=e},{"../ImageState.js":86,"../Observable.js":98,"../events/EventType.js":134,"../util.js":404}],315:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=(n=e("../Disposable.js"))&&n.__esModule?n:{default:n},a=e("../functions.js"),s=e("../util.js"),u=e("../transform.js"),C=e("../extent.js"),l=e("../style/IconImageCache.js"),I=e("../layer/Layer.js"),S=e("../coordinate.js");function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function f(e,t,r){t=p(t);var n=e,t=h()?Reflect.construct(t,r||[],p(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(h=function(){return!!e})()}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var n=function(){function r(e){var t;if(this instanceof r)return(t=f(this,r)).map_=e,t;throw new TypeError("Cannot call a class as a function")}var e,t=r,n=o.default;if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&d(t,n),t=r,(n=[{key:"dispatchRenderEvent",value:function(e,t){(0,s.abstract)()}},{key:"calculateMatrices2D",value:function(e){var t=e.viewState,r=e.coordinateToPixelTransform,n=e.pixelToCoordinateTransform;(0,u.compose)(r,e.size[0]/2,e.size[1]/2,1/t.resolution,-1/t.resolution,-t.rotation,-t.center[0],-t.center[1]),(0,u.makeInverse)(n,r)}},{key:"forEachFeatureAtCoordinate",value:function(e,t,r,n,i,o,a,s){var u,l=t.viewState;function c(e,t,r,n){return i.call(o,t,e?r:null,n)}var f=l.projection,h=(0,S.wrapX)(e.slice(),f),p=[[0,0]];f.canWrapX()&&n&&(n=f.getExtent(),f=(0,C.getWidth)(n),p.push([-f,0],[f,0]));for(var d,g=t.layerStatesArray,y=g.length,A=[],m=[],v=0;v<p.length;v++)for(var b=y-1;0<=b;--b){var _=g[b],w=_.layer;if(w.hasRenderer()&&(0,I.inView)(_,l)&&a.call(s,w)){var E=w.getRenderer(),w=w.getSource();if(E&&w&&(w=w.getWrapX()?h:e,_=c.bind(null,_.managed),m[0]=w[0]+p[v][0],m[1]=w[1]+p[v][1],u=E.forEachFeatureAtCoordinate(m,t,r,_,A)),u)return u}}if(0!==A.length)return d=1/A.length,A.forEach(function(e,t){return e.distanceSq+=t*d}),A.sort(function(e,t){return e.distanceSq-t.distanceSq}),A.some(function(e){return u=e.callback(e.feature,e.layer,e.geometry)}),u}},{key:"hasFeatureAtCoordinate",value:function(e,t,r,n,i,o){return void 0!==this.forEachFeatureAtCoordinate(e,t,r,n,a.TRUE,this,i,o)}},{key:"getMap",value:function(){return this.map_}},{key:"renderFrame",value:function(e){(0,s.abstract)()}},{key:"scheduleExpireIconCache",value:function(e){l.shared.canExpireCache()&&e.postRenderFunctions.push(g)}}])&&c(t.prototype,n),e&&c(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();function g(e,t){l.shared.expire()}r.default=n},{"../Disposable.js":81,"../coordinate.js":128,"../extent.js":142,"../functions.js":200,"../layer/Layer.js":269,"../style/IconImageCache.js":389,"../transform.js":402,"../util.js":404}],316:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("./Layer.js")),s=n(e("../../ImageState.js")),u=n(e("../../ViewHint.js")),A=e("../../transform.js"),m=e("../../extent.js"),v=e("../../proj.js");function n(e){return e&&e.__esModule?e:{default:e}}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o,a,s=[],u=!0,l=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=o.call(r)).done)&&(s.push(n.value),s.length!==t);u=!0);}catch(e){l=!0,i=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}(e,t)||function(e,t){{var r;if(e)return"string"==typeof e?a(e,t):"Map"===(r="Object"===(r={}.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function c(e,t,r){t=h(t);var n=e,t=f()?Reflect.construct(t,r||[],h(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(f=function(){return!!e})()}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}e=function(){function t(e){if(this instanceof t)return(e=c(this,t,[e])).image_=null,e;throw new TypeError("Cannot call a class as a function")}var e,r=t,n=o.default;if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");return r.prototype=Object.create(n&&n.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),n&&p(r,n),r=t,(n=[{key:"getImage",value:function(){return this.image_?this.image_.getImage():null}},{key:"prepareFrame",value:function(e){var t=e.layerStatesArray[e.layerIndex],r=e.pixelRatio,n=e.viewState,i=n.resolution,o=this.getLayer().getSource(),a=e.viewHints,e=e.extent;return void 0!==t.extent&&(e=(0,m.getIntersection)(e,(0,v.fromUserExtent)(t.extent,n.projection))),a[u.default.ANIMATING]||a[u.default.INTERACTING]||(0,m.isEmpty)(e)||(o?(t=n.projection,(a=o.getImage(e,i,r,t))&&(this.loadImage(a)?this.image_=a:a.getState()===s.default.EMPTY&&(this.image_=null))):this.image_=null),!!this.image_}},{key:"getData",value:function(e){var t,r,n,i=this.frameState;return!i||(n=this.getLayer(),i=(0,A.apply)(i.pixelToCoordinateTransform,e.slice()),(e=n.getExtent())&&!(0,m.containsCoordinate)(e,i))||(n=this.image_.getExtent(),e=this.image_.getImage(),t=(0,m.getWidth)(n),(t=Math.floor(e.width*((i[0]-n[0])/t)))<0)||t>=e.width||(r=(0,m.getHeight)(n),(n=Math.floor(e.height*((n[3]-i[1])/r)))<0)||n>=e.height?null:this.getImageData(e,t,n)}},{key:"renderFrame",value:function(e,t){var r=this.image_,n=r.getExtent(),i=r.getResolution(),i=b(Array.isArray(i)?i:[i,i],2),o=i[0],i=i[1],a=r.getPixelRatio(),s=e.layerStatesArray[e.layerIndex],u=e.pixelRatio,l=e.viewState,c=l.center,f=l.resolution,h=u*o/(f*a),f=u*i/(f*a),t=(this.prepareContainer(e,t),this.context.canvas.width),p=this.context.canvas.height,d=this.getRenderContext(e),g=!1,y=!0,l=(s.extent&&(l=(0,v.fromUserExtent)(s.extent,l.projection),g=(y=(0,m.intersects)(l,e.extent))&&!(0,m.containsExtent)(l,e.extent))&&this.clipUnrotated(d,e,l),r.getImage()),r=(0,A.compose)(this.tempTransform,t/2,p/2,h,f,0,a*(n[0]-c[0])/o,a*(c[1]-n[3])/i),t=(this.renderedResolution=i*u/a,l.width*r[0]),p=l.height*r[3];return this.getLayer().getSource().getInterpolate()||(d.imageSmoothingEnabled=!1),this.preRender(d,e),y&&.5<=t&&.5<=p&&(h=r[4],f=r[5],1!==(o=s.opacity)&&(d.save(),d.globalAlpha=o),d.drawImage(l,0,0,+l.width,+l.height,h,f,t,p),1!==o)&&d.restore(),this.postRender(this.context,e),g&&d.restore(),d.imageSmoothingEnabled=!0,this.container}}])&&l(r.prototype,n),e&&l(r,e),Object.defineProperty(r,"prototype",{writable:!1}),r}();r.default=e},{"../../ImageState.js":86,"../../ViewHint.js":108,"../../extent.js":142,"../../proj.js":283,"../../transform.js":402,"./Layer.js":317}],317:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.canvasPool=void 0;var o=n(e("../Layer.js")),a=n(e("../../render/Event.js")),s=n(e("../../render/EventType.js")),u=n(e("../../render/canvas/ZIndexContext.js")),l=e("../../transform.js"),c=e("../../color.js"),f=e("../../dom.js"),h=e("../../array.js"),p=e("../../extent.js");function n(e){return e&&e.__esModule?e:{default:e}}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function g(e,t,r){t=m(t);var n=e,t=y()?Reflect.construct(t,r||[],m(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(y=function(){return!!e})()}function A(){return(A="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=m(e)););return e}(e,t);if(n)return(n=Object.getOwnPropertyDescriptor(n,t)).get?n.get.call(arguments.length<3?e:r):n.value}).apply(null,arguments)}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){return(v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}r.canvasPool=[];var b=null;e=function(){function t(e){if(this instanceof t)return(e=g(this,t,[e])).container=null,e.renderedResolution,e.tempTransform=(0,l.create)(),e.pixelTransform=(0,l.create)(),e.inversePixelTransform=(0,l.create)(),e.context=null,e.deferredContext_=null,e.containerReused=!1,e.pixelContext_=null,e.frameState=null,e;throw new TypeError("Cannot call a class as a function")}var e,r=t,n=o.default;if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");return r.prototype=Object.create(n&&n.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),n&&v(r,n),r=t,(n=[{key:"getImageData",value:function(e,t,r){var n;(b=b?b:(0,f.createCanvasContext2D)(1,1,void 0,{willReadFrequently:!0})).clearRect(0,0,1,1);try{b.drawImage(e,t,r,1,1,0,0,1,1),n=b.getImageData(0,0,1,1).data}catch(e){return b=null}return n}},{key:"getBackground",value:function(e){var t=this.getLayer().getBackground();return(t="function"==typeof t?t(e.viewState.resolution):t)||void 0}},{key:"useContainer",value:function(e,t,r){var n,i,o=this.getLayer().getClassName();(n=e&&e.className===o&&(!r||e&&e.style.backgroundColor&&(0,h.equals)((0,c.asArray)(e.style.backgroundColor),(0,c.asArray)(r)))&&(i=e.firstElementChild)instanceof HTMLCanvasElement?i.getContext("2d"):n)&&n.canvas.style.transform===t?(this.container=e,this.context=n,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),this.container||((i=document.createElement("div")).className=o,(t=i.style).position="absolute",t.width="100%",t.height="100%",e=(n=(0,f.createCanvasContext2D)()).canvas,i.appendChild(e),(t=e.style).position="absolute",t.left="0",t.transformOrigin="top left",this.container=i,this.context=n),this.containerReused||!r||this.container.style.backgroundColor||(this.container.style.backgroundColor=r)}},{key:"clipUnrotated",value:function(e,t,r){var n=(0,p.getTopLeft)(r),i=(0,p.getTopRight)(r),o=(0,p.getBottomRight)(r),r=(0,p.getBottomLeft)(r),t=((0,l.apply)(t.coordinateToPixelTransform,n),(0,l.apply)(t.coordinateToPixelTransform,i),(0,l.apply)(t.coordinateToPixelTransform,o),(0,l.apply)(t.coordinateToPixelTransform,r),this.inversePixelTransform);(0,l.apply)(t,n),(0,l.apply)(t,i),(0,l.apply)(t,o),(0,l.apply)(t,r),e.save(),e.beginPath(),e.moveTo(Math.round(n[0]),Math.round(n[1])),e.lineTo(Math.round(i[0]),Math.round(i[1])),e.lineTo(Math.round(o[0]),Math.round(o[1])),e.lineTo(Math.round(r[0]),Math.round(r[1])),e.clip()}},{key:"prepareContainer",value:function(e,t){var r=e.extent,n=e.viewState.resolution,i=e.viewState.rotation,o=e.pixelRatio,a=Math.round((0,p.getWidth)(r)/n*o),r=Math.round((0,p.getHeight)(r)/n*o),n=((0,l.compose)(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/o,1/o,i,-a/2,-r/2),(0,l.makeInverse)(this.inversePixelTransform,this.pixelTransform),(0,l.toString)(this.pixelTransform));this.useContainer(t,n,this.getBackground(e)),this.containerReused||((o=this.context.canvas).width!=a||o.height!=r?(o.width=a,o.height=r):this.context.clearRect(0,0,a,r),n!==o.style.transform&&(o.style.transform=n))}},{key:"dispatchRenderEvent_",value:function(e,t,r){var n=this.getLayer();n.hasListener(e)&&(e=new a.default(e,this.inversePixelTransform,r,t),n.dispatchEvent(e))}},{key:"preRender",value:function(e,t){(this.frameState=t).declutter||this.dispatchRenderEvent_(s.default.PRERENDER,e,t)}},{key:"postRender",value:function(e,t){t.declutter||this.dispatchRenderEvent_(s.default.POSTRENDER,e,t)}},{key:"renderDeferredInternal",value:function(e){}},{key:"getRenderContext",value:function(e){return e.declutter&&!this.deferredContext_&&(this.deferredContext_=new u.default),e.declutter?this.deferredContext_.getContext():this.context}},{key:"renderDeferred",value:function(e){e.declutter&&(this.dispatchRenderEvent_(s.default.PRERENDER,this.context,e),e.declutter&&this.deferredContext_&&(this.deferredContext_.draw(this.context),this.deferredContext_.clear()),this.renderDeferredInternal(e),this.dispatchRenderEvent_(s.default.POSTRENDER,this.context,e))}},{key:"getRenderTransform",value:function(e,t,r,n,i,o,a){n/=t,t=-e[0]+a,a=-e[1];return(0,l.compose)(this.tempTransform,i/2,o/2,n,-n,-r,t,a)}},{key:"disposeInternal",value:function(){delete this.frameState,A(m(t.prototype),"disposeInternal",this).call(this)}}])&&d(r.prototype,n),e&&d(r,e),Object.defineProperty(r,"prototype",{writable:!1}),r}();r.default=e},{"../../array.js":110,"../../color.js":113,"../../dom.js":130,"../../extent.js":142,"../../render/Event.js":293,"../../render/EventType.js":294,"../../render/canvas/ZIndexContext.js":308,"../../transform.js":402,"../Layer.js":314}],318:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("./Layer.js")),A=n(e("../../ImageTile.js")),m=n(e("../../reproj/Tile.js")),a=n(e("../../TileRange.js")),ce=n(e("../../TileState.js")),fe=e("../../transform.js"),he=e("../../array.js"),pe=e("../../extent.js"),de=e("../../proj.js"),ge=e("../../util.js"),v=e("../../size.js");function n(e){return e&&e.__esModule?e:{default:e}}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function u(e,t,r){t=f(t);var n=e,t=l()?Reflect.construct(t,r||[],f(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(l=function(){return!!e})()}function c(){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=f(e)););return e}(e,t);if(n)return(n=Object.getOwnPropertyDescriptor(n,t)).get?n.get.call(arguments.length<3?e:r):n.value}).apply(null,arguments)}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}e=function(){function n(e){if(this instanceof n)return(e=u(this,n,[e])).extentChanged=!0,e.renderedExtent_=null,e.renderedPixelRatio,e.renderedProjection=null,e.renderedRevision,e.renderedTiles=[],e.newTiles_=!1,e.tmpExtent=(0,pe.createEmpty)(),e.tmpTileRange_=new a.default(0,0,0,0),e;throw new TypeError("Cannot call a class as a function")}var e,t=n,r=o.default;if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&h(t,r),t=n,(r=[{key:"isDrawableTile",value:function(e){var t=this.getLayer(),e=e.getState(),t=t.getUseInterimTilesOnError();return e==ce.default.LOADED||e==ce.default.EMPTY||e==ce.default.ERROR&&!t}},{key:"getTile",value:function(e,t,r,n){var i=n.pixelRatio,n=n.viewState.projection,o=this.getLayer(),e=o.getSource().getTile(e,t,r,i,n);return e.getState()==ce.default.ERROR&&o.getUseInterimTilesOnError()&&0<o.getPreload()&&(this.newTiles_=!0),e=this.isDrawableTile(e)?e:e.getInterimTile()}},{key:"getData",value:function(e){var t=this.frameState;if(t){var r=this.getLayer(),n=(0,fe.apply)(t.pixelToCoordinateTransform,e.slice()),e=r.getExtent();if(!e||(0,pe.containsCoordinate)(e,n))for(var i=t.pixelRatio,o=t.viewState.projection,a=t.viewState,s=r.getRenderSource(),u=s.getTileGridForProjection(a.projection),l=s.getTilePixelRatio(t.pixelRatio),c=u.getZForResolution(a.resolution);c>=u.getMinZoom();--c){var f,h,p,d,g=u.getTileCoordForCoordAndZ(n,c),y=s.getTile(c,g[1],g[2],i,o);if(!(y instanceof A.default||y instanceof m.default)||y instanceof m.default&&y.getState()===ce.default.EMPTY)return null;if(y.getState()===ce.default.LOADED)return p=u.getOrigin(c),f=(0,v.toSize)(u.getTileSize(c)),d=u.getResolution(c),h=Math.floor(l*((n[0]-p[0])/d-g[1]*f[0])),p=Math.floor(l*((p[1]-n[1])/d-g[2]*f[1])),d=Math.round(l*s.getGutterForProjection(a.projection)),this.getImageData(y.getImage(),h+d,p+d)}}return null}},{key:"loadedTileCallback",value:function(e,t,r){return!!this.isDrawableTile(r)&&c(f(n.prototype),"loadedTileCallback",this).call(this,e,t,r)}},{key:"prepareFrame",value:function(e){return!!this.getLayer().getSource()}},{key:"renderFrame",value:function(e,t){var r=e.layerStatesArray[e.layerIndex],n=e.viewState,i=n.projection,D=n.resolution,o=n.center,L=n.rotation,a=e.pixelRatio,Q=this.getLayer(),s=Q.getSource(),F=s.getRevision(),u=s.getTileGridForProjection(i),l=u.getZForResolution(D,s.zDirection),c=u.getResolution(l),f=e.extent,N=e.viewState.resolution,h=s.getTilePixelRatio(a),t=(this.prepareContainer(e,t),this.context.canvas.width),G=this.context.canvas.height,U=r.extent&&(0,de.fromUserExtent)(r.extent,i),z=(U&&(f=(0,pe.getIntersection)(f,(0,de.fromUserExtent)(r.extent,i))),c*t/2/h),q=c*G/2/h,p=[o[0]-z,o[1]-q,o[0]+z,o[1]+q],d=u.getTileRangeForExtentAndZ(f,l),g={},H=(g[l]={},this.createLoadedTileFinder(s,i,g)),W=this.tmpExtent,Y=this.tmpTileRange_;this.newTiles_=!1;for(var V=L?(0,pe.getRotatedViewport)(n.center,N,L,e.size):void 0,y=d.minX;y<=d.maxX;++y)for(var A=d.minY;A<=d.maxY;++A)if(!L||u.tileCoordIntersectsViewport([l,y,A],V)){var m=this.getTile(l,y,A,e);if(this.isDrawableTile(m)){var v=(0,ge.getUid)(this);if(m.getState()==ce.default.LOADED&&((b=(g[l][m.tileCoord.toString()]=m).inTransition(v))&&1!==r.opacity&&(m.endTransition(v),b=!1),this.newTiles_||!b&&this.renderedTiles.includes(m)||(this.newTiles_=!0)),1===m.getAlpha(v,e.time))continue}var b=u.getTileCoordChildTileRange(m.tileCoord,Y,W),v=!1;(v=b?H(l+1,b):v)||u.forEachTileCoordParentTileRange(m.tileCoord,H,Y,W)}var _=c/D*a/h,w=this.getRenderContext(e);(0,fe.compose)(this.tempTransform,t/2,G/2,_,_,0,-t/2,-G/2),U&&this.clipUnrotated(w,e,U),s.getInterpolate()||(w.imageSmoothingEnabled=!1),this.preRender(w,e),this.renderedTiles.length=0;var E,K,C=Object.keys(g).map(Number);C.sort(he.ascending),1!==r.opacity||this.containerReused&&!s.getOpaque(e.viewState.projection)?(E=[],K=[]):C=C.reverse();for(var X=C.length-1;0<=X;--X){var J,I=C[X],S=s.getTilePixelSize(I,a,i),Z=u.getResolution(I)/c,$=S[0]*Z*_,ee=S[1]*Z*_,te=u.getTileCoordForCoordAndZ((0,pe.getTopLeft)(p),I),S=u.getTileCoordExtent(te),j=(0,fe.apply)(this.tempTransform,[h*(S[0]-p[0])/c,h*(p[3]-S[3])/c]),re=h*s.getGutterForProjection(i),ne=g[I];for(J in ne){var x=ne[J],O=x.tileCoord,ie=te[1]-O[1],oe=Math.round(j[0]-(ie-1)*$),O=te[2]-O[2],ae=Math.round(j[1]-(O-1)*ee),P=Math.round(j[0]-ie*$),k=Math.round(j[1]-O*ee),B=oe-P,T=ae-k,ie=l===I,O=ie&&1!==x.getAlpha((0,ge.getUid)(this),e.time),se=!1;if(!O)if(E){for(var M,R=[P,k,P+B,k,P+B,k+T,P,k+T],ue=0,le=E.length;ue<le;++ue)l!==I&&I<K[ue]&&(M=E[ue],(0,pe.intersects)([P,k,P+B,k+T],[M[0],M[3],M[4],M[7]]))&&(se||(w.save(),se=!0),w.beginPath(),w.moveTo(R[0],R[1]),w.lineTo(R[2],R[3]),w.lineTo(R[4],R[5]),w.lineTo(R[6],R[7]),w.moveTo(M[6],M[7]),w.lineTo(M[4],M[5]),w.lineTo(M[2],M[3]),w.lineTo(M[0],M[1]),w.clip());E.push(R),K.push(I)}else w.clearRect(P,k,B,T);this.drawTileImage(x,e,P,k,B,T,re,ie),E&&!O?(se&&w.restore(),this.renderedTiles.unshift(x)):this.renderedTiles.push(x),this.updateUsedTiles(e.usedTiles,s,x)}}return this.renderedRevision=F,this.renderedResolution=c,this.extentChanged=!this.renderedExtent_||!(0,pe.equals)(this.renderedExtent_,p),this.renderedExtent_=p,this.renderedPixelRatio=a,this.renderedProjection=i,this.manageTilePyramid(e,s,u,a,i,f,l,Q.getPreload()),this.scheduleExpireCache(e,s),this.postRender(this.context,e),r.extent&&w.restore(),w.imageSmoothingEnabled=!0,this.container}},{key:"drawTileImage",value:function(e,t,r,n,i,o,a,s){var u,l,c,f,h,p=this.getTileImage(e);p&&(u=this.getRenderContext(t),l=(0,ge.getUid)(this),(h=(f=(c=t.layerStatesArray[t.layerIndex]).opacity*(s?e.getAlpha(l,t.time):1))!==u.globalAlpha)&&(u.save(),u.globalAlpha=f),u.drawImage(p,a,a,p.width-2*a,p.height-2*a,r,n,i,o),h&&u.restore(),f!==c.opacity?t.animate=!0:s&&e.endTransition(l))}},{key:"getImage",value:function(){var e=this.context;return e?e.canvas:null}},{key:"getTileImage",value:function(e){return e.getImage()}},{key:"scheduleExpireCache",value:function(e,t){t.canExpireCache()&&(t=function(e,t,r){var n=(0,ge.getUid)(e);n in r.usedTiles&&e.expireCache(r.viewState.projection,r.usedTiles[n])}.bind(null,t),e.postRenderFunctions.push(t))}},{key:"updateUsedTiles",value:function(e,t,r){t=(0,ge.getUid)(t);t in e||(e[t]={}),e[t][r.getKey()]=!0}},{key:"manageTilePyramid",value:function(e,t,r,n,i,o,a,s,u){var l=(0,ge.getUid)(t);l in e.wantedTiles||(e.wantedTiles[l]={});for(var c,f,h,p,d,g=e.wantedTiles[l],y=e.tileQueue,A=r.getMinZoom(),m=e.viewState.rotation,v=m?(0,pe.getRotatedViewport)(e.viewState.center,e.viewState.resolution,m,e.size):void 0,b=0,_=A;_<=a;++_)for(f=r.getTileRangeForExtentAndZ(o,_,f),h=r.getResolution(_),p=f.minX;p<=f.maxX;++p)for(d=f.minY;d<=f.maxY;++d)m&&!r.tileCoordIntersectsViewport([_,p,d],v)||(a-_<=s?(++b,(c=t.getTile(_,p,d,n,i)).getState()==ce.default.IDLE&&(g[c.getKey()]=!0,y.isKeyQueued(c.getKey())||y.enqueue([c,l,r.getTileCoordCenter(c.tileCoord),h])),void 0!==u&&u(c)):t.useTile(_,p,d,i));t.updateCacheSize(b,i)}}])&&s(t.prototype,r),e&&s(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();r.default=e},{"../../ImageTile.js":87,"../../TileRange.js":103,"../../TileState.js":104,"../../array.js":110,"../../extent.js":142,"../../proj.js":283,"../../reproj/Tile.js":331,"../../size.js":337,"../../transform.js":402,"../../util.js":404,"./Layer.js":317}],319:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=o(e("./ImageLayer.js")),a=o(e("./VectorLayer.js")),y=o(e("../../events/EventType.js")),A=o(e("../../ImageCanvas.js")),m=o(e("../../ImageState.js")),v=o(e("rbush")),b=o(e("../../ViewHint.js")),_=e("../../transform.js"),w=e("../../resolution.js"),E=e("../../extent.js");function o(e){return e&&e.__esModule?e:{default:e}}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,C(n.key),n)}}function C(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}function u(e,t,r){t=f(t);var n=e,t=l()?Reflect.construct(t,r||[],f(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(l=function(){return!!e})()}function c(){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=f(e)););return e}(e,t);if(n)return(n=Object.getOwnPropertyDescriptor(n,t)).get?n.get.call(arguments.length<3?e:r):n.value}).apply(null,arguments)}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}e=function(){function o(e){var t;if(this instanceof o)return(t=u(this,o,[e])).vectorRenderer_=new a.default(e),t.layerImageRatio_=e.getImageRatio(),t.coordinateToVectorPixelTransform_=(0,_.create)(),t.renderedPixelToCoordinateTransform_=null,t;throw new TypeError("Cannot call a class as a function")}var e,t=o,r=n.default;if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&h(t,r),t=o,(r=[{key:"disposeInternal",value:function(){this.vectorRenderer_.dispose(),c(f(o.prototype),"disposeInternal",this).call(this)}},{key:"getFeatures",value:function(e){return this.vectorRenderer_?(e=(0,_.apply)(this.coordinateToVectorPixelTransform_,(0,_.apply)(this.renderedPixelToCoordinateTransform_,e.slice())),this.vectorRenderer_.getFeatures(e)):Promise.resolve([])}},{key:"handleFontsChanged",value:function(){this.vectorRenderer_.handleFontsChanged()}},{key:"prepareFrame",value:function(e){var t,r,n,i,o,a,s=this,u=e.pixelRatio,l=e.viewState,c=l.resolution,f=e.viewHints,h=this.vectorRenderer_,p=e.extent,d=(1!==this.layerImageRatio_&&(p=p.slice(0),(0,E.scaleFromCenter)(p,this.layerImageRatio_)),(0,E.getWidth)(p)/c),g=(0,E.getHeight)(p)/c;return f[b.default.ANIMATING]||f[b.default.INTERACTING]||(0,E.isEmpty)(p)||(h.useContainer(null,null),f=h.context,o=e.layerStatesArray[e.layerIndex],o=Object.assign({},o,{opacity:1}),t=Object.assign({},e,{extent:p,size:[d,g],viewState:Object.assign({},e.viewState,{rotation:0}),layerStatesArray:[o],layerIndex:0,declutter:null}),(o=this.getLayer().getDeclutter())&&(t.declutter=(i={},o=o,a=new v.default(9),(o=C(o))in i?Object.defineProperty(i,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[o]=a,i)),r=!0,(n=new A.default(p,c,u,f.canvas,function(e){h.prepareFrame(t)&&h.replayGroupChanged&&(h.clipping=!1,h.renderFrame(t,null)&&(h.renderDeclutter(t),h.renderDeferred(t),r=!1),e())})).addEventListener(y.default.CHANGE,function(){var e;n.getState()===m.default.LOADED&&(s.image_=r?null:n,e=n.getPixelRatio(),e=(0,w.fromResolutionLike)(n.getResolution())*u/e,s.renderedResolution=e,s.coordinateToVectorPixelTransform_=(0,_.compose)(s.coordinateToVectorPixelTransform_,d/2,g/2,1/e,-1/e,0,-l.center[0],-l.center[1]))}),n.load()),this.image_&&(this.renderedPixelToCoordinateTransform_=e.pixelToCoordinateTransform.slice()),!!this.image_}},{key:"preRender",value:function(){}},{key:"postRender",value:function(){}},{key:"renderDeclutter",value:function(){}},{key:"forEachFeatureAtCoordinate",value:function(e,t,r,n,i){return this.vectorRenderer_?this.vectorRenderer_.forEachFeatureAtCoordinate(e,t,r,n,i):c(f(o.prototype),"forEachFeatureAtCoordinate",this).call(this,e,t,r,n,i)}}])&&s(t.prototype,r),e&&s(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();r.default=e},{"../../ImageCanvas.js":85,"../../ImageState.js":86,"../../ViewHint.js":108,"../../events/EventType.js":134,"../../extent.js":142,"../../resolution.js":334,"../../transform.js":402,"./ImageLayer.js":316,"./VectorLayer.js":320,rbush:427}],320:[function(e,t,r){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var T=l(e("../../render/canvas/BuilderGroup.js")),i=n(e("./Layer.js")),M=n(e("../../render/canvas/ExecutorGroup.js")),s=l(e("../../render/EventType.js")),R=l(e("../../ViewHint.js")),v=e("../../render/canvas/hitdetect.js"),D=e("../../extent.js"),o=e("../../dom.js"),L=e("../vector.js"),Q=e("../../array.js"),F=e("../../proj.js"),p=e("../../util.js"),N=e("../../coordinate.js");function u(e){var t,r;return"function"!=typeof WeakMap?null:(t=new WeakMap,r=new WeakMap,(u=function(e){return e?r:t})(e))}function n(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};t=u(t);if(t&&t.has(e))return t.get(e);var r,n,i={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in e)"default"!==r&&{}.hasOwnProperty.call(e,r)&&((n=o?Object.getOwnPropertyDescriptor(e,r):null)&&(n.get||n.set)?Object.defineProperty(i,r,n):i[r]=e[r]);return i.default=e,t&&t.set(e,i),i}function l(e){return e&&e.__esModule?e:{default:e}}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=a(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==a(e)?e:e+""}(n.key),n)}}function f(e,t,r){t=d(t);var n=e,t=h()?Reflect.construct(t,r||[],d(e).constructor):t.apply(e,r);if(t&&("object"==a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(h=function(){return!!e})()}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){return(g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}e=function(){function t(e){if(this instanceof t)return(e=f(this,t,[e])).boundHandleStyleImageChange_=e.handleStyleImageChange_.bind(e),e.animatingOrInteracting_,e.hitDetectionImageData_=null,e.clipped_=!1,e.renderedFeatures_=null,e.renderedRevision_=-1,e.renderedResolution_=NaN,e.renderedExtent_=(0,D.createEmpty)(),e.wrappedRenderedExtent_=(0,D.createEmpty)(),e.renderedRotation_,e.renderedCenter_=null,e.renderedProjection_=null,e.renderedPixelRatio_=1,e.renderedRenderOrder_=null,e.renderedFrameDeclutter_,e.replayGroup_=null,e.replayGroupChanged=!0,e.clipping=!0,e.targetContext_=null,e.opacity_=1,e;throw new TypeError("Cannot call a class as a function")}var e,r=t,n=i.default;if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");return r.prototype=Object.create(n&&n.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),n&&g(r,n),r=t,(n=[{key:"renderWorlds",value:function(e,t,r){var n=t.extent,i=t.viewState,o=i.center,a=i.resolution,s=i.projection,u=i.rotation,i=s.getExtent(),l=this.getLayer().getSource(),c=this.getLayer().getDeclutter(),f=t.pixelRatio,h=t.viewHints,p=!(h[R.default.ANIMATING]||h[R.default.INTERACTING]),d=this.context,g=Math.round((0,D.getWidth)(n)/a*f),y=Math.round((0,D.getHeight)(n)/a*f),h=l.getWrapX()&&s.canWrapX(),A=h?(0,D.getWidth)(i):null,m=h?Math.ceil((n[2]-i[2])/A)+1:1,v=h?Math.floor((n[0]-i[0])/A):0;do{var b=this.getRenderTransform(o,a,0,f,g,y,v*A)}while(t.declutter&&(b=b.slice(0)),e.execute(d,[d.canvas.width,d.canvas.height],b,u,p,void 0===r?M.ALL:r?M.DECLUTTER:M.NON_DECLUTTER,r?c&&t.declutter[c]:void 0),++v<m)}},{key:"setDrawContext_",value:function(){1!==this.opacity_&&(this.targetContext_=this.context,this.context=(0,o.createCanvasContext2D)(this.context.canvas.width,this.context.canvas.height,i.canvasPool))}},{key:"resetDrawContext_",value:function(){var e;1!==this.opacity_&&(e=this.targetContext_.globalAlpha,this.targetContext_.globalAlpha=this.opacity_,this.targetContext_.drawImage(this.context.canvas,0,0),this.targetContext_.globalAlpha=e,(0,o.releaseCanvas)(this.context),i.canvasPool.push(this.context.canvas),this.context=this.targetContext_,this.targetContext_=null)}},{key:"renderDeclutter",value:function(e){this.replayGroup_&&this.getLayer().getDeclutter()&&this.renderWorlds(this.replayGroup_,e,!0)}},{key:"renderDeferredInternal",value:function(e){this.replayGroup_&&(this.replayGroup_.renderDeferred(),this.clipped_&&this.context.restore(),this.resetDrawContext_())}},{key:"renderFrame",value:function(e,t){var r=e.layerStatesArray[e.layerIndex],n=(this.opacity_=r.opacity,e.viewState),t=(this.prepareContainer(e,t),this.context),i=this.replayGroup_,o=i&&!i.isEmpty();if(!o&&!this.getLayer().hasListener(s.default.PRERENDER)&&!this.getLayer().hasListener(s.default.POSTRENDER))return null;this.setDrawContext_(),this.preRender(t,e);var a=n.projection;return this.clipped_=!1,o&&r.extent&&this.clipping&&(r=(0,F.fromUserExtent)(r.extent,a),o=(0,D.intersects)(r,e.extent),this.clipped_=o&&!(0,D.containsExtent)(r,e.extent),this.clipped_)&&this.clipUnrotated(t,e,r),o&&this.renderWorlds(i,e,!this.getLayer().getDeclutter()&&void 0),!e.declutter&&this.clipped_&&t.restore(),this.postRender(t,e),this.renderedRotation_!==n.rotation&&(this.renderedRotation_=n.rotation,this.hitDetectionImageData_=null),e.declutter||this.resetDrawContext_(),this.container}},{key:"getFeatures",value:function(A){var m=this;return new Promise(function(e){if(m.frameState&&!m.hitDetectionImageData_&&!m.animatingOrInteracting_){var t=m.frameState.size.slice(),r=m.renderedCenter_,n=m.renderedResolution_,i=m.renderedRotation_,o=m.renderedProjection_,a=m.wrappedRenderedExtent_,s=m.getLayer(),u=[],l=t[0]*v.HIT_DETECT_RESOLUTION,c=t[1]*v.HIT_DETECT_RESOLUTION,f=(u.push(m.getRenderTransform(r,n,i,v.HIT_DETECT_RESOLUTION,l,c,0).slice()),s.getSource()),h=o.getExtent();if(f.getWrapX()&&o.canWrapX()&&!(0,D.containsExtent)(h,a)){for(var p,d=a[0],g=(0,D.getWidth)(h),y=0;d<h[0];)p=g*--y,u.push(m.getRenderTransform(r,n,i,v.HIT_DETECT_RESOLUTION,l,c,p).slice()),d+=g;for(y=0,d=a[2];d>h[2];)p=g*++y,u.push(m.getRenderTransform(r,n,i,v.HIT_DETECT_RESOLUTION,l,c,p).slice()),d-=g}f=(0,F.getUserProjection)();m.hitDetectionImageData_=(0,v.createHitDetectionImageData)(t,u,m.renderedFeatures_,s.getStyleFunction(),a,n,i,(0,L.getSquaredTolerance)(n,m.renderedPixelRatio_),f?o:null)}e((0,v.hitDetect)(A,m.renderedFeatures_,m.hitDetectionImageData_))})}},{key:"forEachFeatureAtCoordinate",value:function(t,r,n,o,a){var i,s,u,l,c,f,e,h;if(this.replayGroup_)return s=r.viewState.resolution,u=r.viewState.rotation,l=this.getLayer(),c={},f=function(e,t,r){var n=(0,p.getUid)(e),i=c[n];if(i){if(!0!==i&&r<i.distanceSq){if(0===r)return c[n]=!0,a.splice(a.lastIndexOf(i),1),o(e,l,t);i.geometry=t,i.distanceSq=r}}else{if(0===r)return c[n]=!0,o(e,l,t);a.push(c[n]={feature:e,layer:l,geometry:t,distanceSq:r,callback:o})}},e=[this.replayGroup_],h=this.getLayer().getDeclutter(),e.some(function(e){return i=e.forEachFeatureAtCoordinate(t,s,u,n,f,h&&r.declutter[h]?r.declutter[h].all().map(function(e){return e.value}):null)}),i}},{key:"handleFontsChanged",value:function(){var e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()}},{key:"handleStyleImageChange_",value:function(e){this.renderIfReadyAndVisible()}},{key:"prepareFrame",value:function(e){var t=this,r=this.getLayer(),n=r.getSource();if(!n)return!1;var i=e.viewHints[R.default.ANIMATING],o=e.viewHints[R.default.INTERACTING],a=r.getUpdateWhileAnimating(),s=r.getUpdateWhileInteracting();if(this.ready&&!a&&i||!s&&o)this.animatingOrInteracting_=!0;else{this.animatingOrInteracting_=!1;var a=e.extent,i=e.viewState,u=i.projection,l=i.resolution,s=e.pixelRatio,o=r.getRevision(),c=r.getRenderBuffer(),f=r.getRenderOrder(),i=(void 0===f&&(f=L.defaultOrder),i.center.slice()),a=(0,D.buffer)(a,c*l),c=a.slice(),h=[a.slice()],p=u.getExtent();if(n.getWrapX()&&u.canWrapX()&&!(0,D.containsExtent)(p,e.extent)&&(k=(0,D.getWidth)(p),B=Math.max((0,D.getWidth)(a)/2,k),a[0]=p[0]-B,a[2]=p[2]+B,(0,N.wrapX)(i,u),(B=(0,D.wrapX)(h[0],u))[0]<p[0]&&B[2]<p[2]?h.push([B[0]+k,B[1],B[2]+k,B[3]]):B[0]>p[0]&&B[2]>p[2]&&h.push([B[0]-k,B[1],B[2]-k,B[3]])),this.ready&&this.renderedResolution_==l&&this.renderedRevision_==o&&this.renderedRenderOrder_==f&&this.renderedFrameDeclutter_===!!e.declutter&&(0,D.containsExtent)(this.wrappedRenderedExtent_,a))(0,Q.equals)(this.renderedExtent_,c)||(this.hitDetectionImageData_=null,this.renderedExtent_=c),this.renderedCenter_=i,this.replayGroupChanged=!1;else{this.replayGroup_=null;var d,g=new T.default((0,L.getTolerance)(l,s),a,l,s),y=(0,F.getUserProjection)();if(y){for(var A=0,m=h.length;A<m;++A){var v=h[A],v=(0,F.toUserExtent)(v,u);n.loadFeatures(v,(0,F.toUserResolution)(l,u),y)}d=(0,F.getTransformFromProjections)(y,u)}else for(var b=0,_=h.length;b<_;++b)n.loadFeatures(h[b],l,u);var w=(0,L.getSquaredTolerance)(l,s),E=!0,p=(0,F.toUserExtent)(a,u),C=n.getFeaturesInExtent(p);f&&C.sort(f);for(var I,S,j,x,O=0,P=C.length;O<P;++O)I=C[O],S=O,x=j=void 0,x=I.getStyleFunction()||r.getStyleFunction(),(j=x?x(I,l):j)&&(x=t.renderFeature(I,w,j,g,d,t.getLayer().getDeclutter(),S),E=E&&!x);this.renderedFeatures_=C,this.ready=E;var k=g.finish(),B=new M.default(a,l,s,n.getOverlaps(),k,r.getRenderBuffer(),!!e.declutter);this.renderedResolution_=l,this.renderedRevision_=o,this.renderedRenderOrder_=f,this.renderedFrameDeclutter_=!!e.declutter,this.renderedExtent_=c,this.wrappedRenderedExtent_=a,this.renderedCenter_=i,this.renderedProjection_=u,this.renderedPixelRatio_=s,this.replayGroup_=B,this.hitDetectionImageData_=null,this.replayGroupChanged=!0}}return!0}},{key:"renderFeature",value:function(e,t,r,n,i,o,a){if(!r)return!1;var s=!1;if(Array.isArray(r))for(var u=0,l=r.length;u<l;++u)s=(0,L.renderFeature)(n,e,r[u],t,this.boundHandleStyleImageChange_,i,o,a)||s;else s=(0,L.renderFeature)(n,e,r,t,this.boundHandleStyleImageChange_,i,o,a);return s}}])&&c(r.prototype,n),e&&c(r,e),Object.defineProperty(r,"prototype",{writable:!1}),r}();r.default=e},{"../../ViewHint.js":108,"../../array.js":110,"../../coordinate.js":128,"../../dom.js":130,"../../extent.js":142,"../../proj.js":283,"../../render/EventType.js":294,"../../render/canvas/BuilderGroup.js":299,"../../render/canvas/ExecutorGroup.js":301,"../../render/canvas/hitdetect.js":309,"../../util.js":404,"../vector.js":322,"./Layer.js":317}],321:[function(e,t,r){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var S=i(e("../../render/canvas/BuilderGroup.js")),k=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};t=s(t);if(t&&t.has(e))return t.get(e);var r,n={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in e){var o;"default"!==r&&{}.hasOwnProperty.call(e,r)&&((o=i?Object.getOwnPropertyDescriptor(e,r):null)&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=e[r])}return n.default=e,t&&t.set(e,n),n}(e("../../render/canvas/ExecutorGroup.js")),n=i(e("./TileLayer.js")),j=i(e("../../TileState.js")),B=i(e("../../ViewHint.js")),T=i(e("../../render/canvas/ZIndexContext.js")),w=e("../../render/canvas/hitdetect.js"),E=e("../../transform.js"),u=e("../../array.js"),M=e("../../extent.js"),x=e("../vector.js"),R=e("../../util.js"),C=e("../../size.js"),I=e("../../coordinate.js");function s(e){var t,r;return"function"!=typeof WeakMap?null:(t=new WeakMap,r=new WeakMap,(s=function(e){return e?r:t})(e))}function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=a(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==a(e)?e:e+""}(n.key),n)}}function l(e,t,r){t=L(t);var n=e,t=c()?Reflect.construct(t,r||[],L(e).constructor):t.apply(e,r);if(t&&("object"==a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(c=function(){return!!e})()}function D(){return(D="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=L(e)););return e}(e,t);if(n)return(n=Object.getOwnPropertyDescriptor(n,t)).get?n.get.call(arguments.length<3?e:r):n.value}).apply(null,arguments)}function L(e){return(L=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var A={image:["Polygon","Circle","LineString","Image","Text"],hybrid:["Polygon","LineString"],vector:[]},Q={hybrid:["Image","Text","Default"],vector:["Polygon","Circle","LineString","Image","Text","Default"]},e=function(){function P(e){if(this instanceof P)return(e=l(this,P,[e])).boundHandleStyleImageChange_=e.handleStyleImageChange_.bind(e),e.renderedLayerRevision_,e.renderedPixelToCoordinateTransform_=null,e.renderedRotation_,e.renderedOpacity_=1,e.tmpTransform_=(0,E.create)(),e.tileClipContexts_=null,e;throw new TypeError("Cannot call a class as a function")}var e,t=P,r=n.default;if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&f(t,r),t=P,(r=[{key:"prepareTile",value:function(e,t,r){var n,i=e.getState();return i!==j.default.LOADED&&i!==j.default.ERROR||(this.updateExecutorGroup_(e,t,r),this.tileImageNeedsRender_(e)&&(n=!0)),n}},{key:"getTile",value:function(e,t,r,n){var i=n.pixelRatio,o=n.viewState,a=o.resolution,o=o.projection,s=this.getLayer(),u=s.getSource().getTile(e,t,r,i,o),l=n.viewHints,l=!(l[B.default.ANIMATING]||l[B.default.INTERACTING]);return!l&&u.wantedResolution||(u.wantedResolution=a),this.prepareTile(u,i,o)&&(l||Date.now()-n.time<8)&&"vector"!==s.getRenderMode()&&this.renderTileImage_(u,n),D(L(P.prototype),"getTile",this).call(this,e,t,r,n)}},{key:"isDrawableTile",value:function(e){var t=this.getLayer();return D(L(P.prototype),"isDrawableTile",this).call(this,e)&&("vector"===t.getRenderMode()?(0,R.getUid)(t)in e.executorGroups:e.hasContext(t))}},{key:"getTileImage",value:function(e){return e.getImage(this.getLayer())}},{key:"prepareFrame",value:function(e){var t=this.getLayer().getRevision();return this.renderedLayerRevision_!==t&&(this.renderedLayerRevision_=t,this.renderedTiles.length=0),D(L(P.prototype),"prepareFrame",this).call(this,e)}},{key:"updateExecutorGroup_",value:function(h,p,e){var d=this,g=this.getLayer(),t=g.getRevision(),y=g.getRenderOrder()||null,A=h.wantedResolution,m=h.getReplayState(g);if(m.dirty||m.renderedResolution!==A||m.renderedRevision!=t||m.renderedRenderOrder!=y){var v=g.getSource(),b=!!g.getDeclutter(),_=v.getTileGrid(),w=v.getTileGridForProjection(e).getTileCoordExtent(h.wrappedTileCoord),E=v.getSourceTiles(p,e,h),C=(0,R.getUid)(g);delete h.hitDetectionImageData[C],h.executorGroups[C]=[],m.dirty=!1;for(var I=0,r=E.length;I<r;++I)!function(){var e=E[I];if(e.getState()!=j.default.LOADED)return;function t(e,t){var r,n=e.getStyleFunction()||g.getStyleFunction();(r=n?n(e,A):r)&&(n=this.renderFeature(e,s,r,a,b,t),m.dirty=m.dirty||n)}var r=e.tileCoord,r=_.getTileCoordExtent(r),n=(0,M.getIntersection)(w,r),i=(0,M.buffer)(n,g.getRenderBuffer()*A,d.tmpExtent),o=(0,M.equals)(r,n)?null:i,a=new S.default(0,n,A,p),s=(0,x.getSquaredTolerance)(A,p),u=e.getFeatures();y&&y!==m.renderedRenderOrder&&u.sort(y);for(var l=0,c=u.length;l<c;++l){var f=u[l];o&&!(0,M.intersects)(o,f.getGeometry().getExtent())||t.call(d,f,l)}r=a.finish(),i="vector"!==g.getRenderMode()&&b&&1===E.length?null:n,e=new k.default(i,A,p,v.getOverlaps(),r,g.getRenderBuffer(),!0);h.executorGroups[C].push(e)}();m.renderedRevision=t,m.renderedRenderOrder=y,m.renderedResolution=A}}},{key:"forEachFeatureAtCoordinate",value:function(a,s,u,o,l){var c=s.viewState.resolution,f=s.viewState.rotation,h=(u=null==u?0:u,this.getLayer()),r=h.getSource().getTileGridForProjection(s.viewState.projection),n=(0,M.boundingExtent)([a]);(0,M.buffer)(n,c*u,n);for(var p,d={},g=function(e,t,r){var n=e.getId(),i=(void 0===n&&(n=(0,R.getUid)(e)),d[n]);if(i){if(!0!==i&&r<i.distanceSq){if(0===r)return d[n]=!0,l.splice(l.lastIndexOf(i),1),o(e,h,t);i.geometry=t,i.distanceSq=r}}else{if(0===r)return d[n]=!0,o(e,h,t);l.push(d[n]={feature:e,layer:h,geometry:t,distanceSq:r,callback:o})}},i=this.renderedTiles,y=0,e=i.length;!p&&y<e;++y)!function(){var e=i[y],t=r.getTileCoordExtent(e.wrappedTileCoord);if(!(0,M.intersects)(t,n))return;var t=(0,R.getUid)(h),e=[e.executorGroups[t]],o=h.getDeclutter();e.some(function(e){for(var t=o?s.declutter[o].all().map(function(e){return e.value}):null,r=0,n=e.length;r<n;++r){var i=e[r];if(p=i.forEachFeatureAtCoordinate(a,c,f,u,g,t))return!0}})}();return p}},{key:"getFeatures",value:function(b){var _=this;return new Promise(function(e,t){for(var r,n,i,o,a,s,u=_.getLayer(),l=(0,R.getUid)(u),c=u.getSource(),f=_.renderedProjection,h=f.getExtent(),p=_.renderedResolution,d=c.getTileGridForProjection(f),g=(0,E.apply)(_.renderedPixelToCoordinateTransform_,b.slice()),y=d.getTileCoordForCoordAndResolution(g,p),A=0,m=_.renderedTiles.length;A<m;++A)if(y.toString()===_.renderedTiles[A].tileCoord.toString()){if((r=_.renderedTiles[A]).getState()===j.default.LOADED){var v=d.getTileCoordExtent(r.tileCoord);c.getWrapX()&&f.canWrapX()&&!(0,M.containsExtent)(h,v)&&(0,I.wrapX)(g,f);break}r=void 0}!r||0<r.loadingSourceTiles?e([]):(n=d.getTileCoordExtent(r.wrappedTileCoord),n=(0,M.getTopLeft)(n),n=[(g[0]-n[0])/p,(n[1]-g[1])/p],i=r.getSourceTiles().reduce(function(e,t){return e.concat(t.getFeatures())},[]),(s=r.hitDetectionImageData[l])||(o=(0,C.toSize)(d.getTileSize(d.getZForResolution(p,c.zDirection))),a=_.renderedRotation_,p=[_.getRenderTransform(d.getTileCoordCenter(r.wrappedTileCoord),p,0,w.HIT_DETECT_RESOLUTION,o[0]*w.HIT_DETECT_RESOLUTION,o[1]*w.HIT_DETECT_RESOLUTION,0)],s=(0,w.createHitDetectionImageData)(o,p,i,u.getStyleFunction(),d.getTileCoordExtent(r.wrappedTileCoord),r.getReplayState(u).renderedResolution,a),r.hitDetectionImageData[l]=s),e((0,w.hitDetect)(n,i,s)))})}},{key:"handleFontsChanged",value:function(){var e=this.getLayer();e.getVisible()&&void 0!==this.renderedLayerRevision_&&e.changed()}},{key:"handleStyleImageChange_",value:function(e){this.renderIfReadyAndVisible()}},{key:"renderDeclutter",value:function(e,t){var r=this.context,n=r.globalAlpha;r.globalAlpha=t.opacity;for(var t=e.viewHints,i=!(t[B.default.ANIMATING]||t[B.default.INTERACTING]),o=this.renderedTiles,a=0,s=o.length;a<s;++a){var u=o[a],l=u.executorGroups[(0,R.getUid)(this.getLayer())],c=this.getLayer().getDeclutter();if(l)for(var f=l.length-1;0<=f;--f)l[f].execute(this.context,[this.context.canvas.width,this.context.canvas.height],this.getTileRenderTransform(u,e),e.viewState.rotation,i,k.DECLUTTER,c?e.declutter[c]:void 0)}r.globalAlpha=n}},{key:"renderDeferredInternal",value:function(e){for(var t,o=this,a=this.renderedTiles.reduce(function(t,e,r){return e.executorGroups[(0,R.getUid)(o.getLayer())].forEach(function(e){return t.push({executorGroup:e,index:r})}),t},[]),r=a.map(function(e){return e.executorGroup.getDeferredZIndexContexts()}),n={},i=0,s=a.length;i<s;++i)for(t in a[i].executorGroup.getDeferredZIndexContexts())n[t]=!0;Object.keys(n).sort(u.ascending).map(Number).forEach(function(t){r.forEach(function(e,i){e[t]&&(e[t].forEach(function(e){var t=a[i],r=t.executorGroup,t=t.index,r=r.getRenderedContext(),n=r.globalAlpha,t=(r.globalAlpha=o.renderedOpacity_,o.tileClipContexts_[t]);t&&t.draw(r),e.draw(r),t&&r.restore(),r.globalAlpha=n,e.clear()}),e[t].length=0)})})}},{key:"getTileRenderTransform",value:function(e,t){var r=t.pixelRatio,n=t.viewState,i=n.center,o=n.resolution,n=n.rotation,a=t.size,s=Math.round(a[0]*r),a=Math.round(a[1]*r),t=this.getLayer().getSource().getTileGridForProjection(t.viewState.projection),u=e.tileCoord,e=t.getTileCoordExtent(e.wrappedTileCoord),t=t.getTileCoordExtent(u,this.tmpExtent)[0]-e[0];return(0,E.multiply)((0,E.scale)(this.inversePixelTransform.slice(),1/r,1/r),this.getRenderTransform(i,o,n,r,s,a,t))}},{key:"postRender",value:function(e,t){var r=t.viewHints,n=!(r[B.default.ANIMATING]||r[B.default.INTERACTING]),i=(this.renderedPixelToCoordinateTransform_=t.pixelToCoordinateTransform.slice(),this.renderedRotation_=t.viewState.rotation,this.renderedOpacity_=t.layerStatesArray[t.layerIndex].opacity,this.getLayer()),r=i.getRenderMode(),o=e.globalAlpha;e.globalAlpha=this.renderedOpacity_;for(var a=i.getDeclutter(),s=a?Q[r].filter(function(e){return!k.DECLUTTER.includes(e)}):Q[r],r=t.viewState,u=r.rotation,l=i.getSource(),c=l.getTileGridForProjection(r.projection).getZForResolution(r.resolution,l.zDirection),f=this.renderedTiles,h=[],p=[],d=[],g=!0,y=f.length-1;0<=y;--y){var A=f[y],g=g&&!A.getReplayState(i).dirty,m=A.executorGroups[(0,R.getUid)(i)].filter(function(e){return e.hasExecutors(s)});if(0!==m.length){var v=this.getTileRenderTransform(A,t),b=A.tileCoord[0],_=!1,w=m[0].getClipCoords(v),E=e,A=void 0;if(w){for(var C,E=(A=new T.default).getContext(),I=0,S=h.length;I<S;++I)c!==b&&b<p[I]&&(C=h[I],(0,M.intersects)([w[0],w[3],w[4],w[7]],[C[0],C[3],C[4],C[7]]))&&(_||(E.save(),_=!0),E.beginPath(),E.moveTo(w[0],w[1]),E.lineTo(w[2],w[3]),E.lineTo(w[4],w[5]),E.lineTo(w[6],w[7]),E.moveTo(C[6],C[7]),E.lineTo(C[4],C[5]),E.lineTo(C[2],C[3]),E.lineTo(C[0],C[1]),E.clip());h.push(w),p.push(b)}for(var j,x=0,O=m.length;x<O;++x)m[x].execute(e,[e.canvas.width,e.canvas.height],v,u,n,s,null==(j=t.declutter)?void 0:j[a]);_&&(E===e?E.restore():d[y]=A)}}e.globalAlpha=o,this.ready=g,this.tileClipContexts_=d,t.declutter||this.renderDeferredInternal(t),D(L(P.prototype),"postRender",this).call(this,e,t)}},{key:"renderFeature",value:function(e,t,r,n,i,o){if(!r)return!1;var a=!1;if(Array.isArray(r))for(var s=0,u=r.length;s<u;++s)a=(0,x.renderFeature)(n,e,r[s],t,this.boundHandleStyleImageChange_,void 0,i,o)||a;else a=(0,x.renderFeature)(n,e,r,t,this.boundHandleStyleImageChange_,void 0,i,o);return a}},{key:"tileImageNeedsRender_",value:function(e){var t,r=this.getLayer();return"vector"!==r.getRenderMode()&&(t=e.getReplayState(r),r=r.getRevision(),e=e.wantedResolution,t.renderedTileResolution!==e||t.renderedTileRevision!==r)}},{key:"renderTileImage_",value:function(e,t){var r=this.getLayer(),n=e.getReplayState(r),i=r.getRevision(),o=e.executorGroups[(0,R.getUid)(r)],i=(n.renderedTileRevision=i,e.wrappedTileCoord),a=i[0],s=r.getSource(),u=t.pixelRatio,l=t.viewState.projection,c=s.getTileGridForProjection(l),f=c.getResolution(e.tileCoord[0]),t=t.pixelRatio/e.wantedResolution*f,f=c.getResolution(a),h=e.getContext(r),u=Math.round(Math.max(u,t/u)),s=s.getTilePixelSize(a,u,l),p=(h.canvas.width=s[0],h.canvas.height=s[1],u/t),l=(1!=p&&(a=(0,E.reset)(this.tmpTransform_),(0,E.scale)(a,p,p),h.setTransform.apply(h,a)),c.getTileCoordExtent(i,this.tmpExtent)),s=t/f,d=(0,E.reset)(this.tmpTransform_);(0,E.scale)(d,s,-s),(0,E.translate)(d,-l[0],-l[3]);for(var g=0,y=o.length;g<y;++g)o[g].execute(h,[h.canvas.width*p,h.canvas.height*p],d,0,!0,A[r.getRenderMode()],null);n.renderedTileResolution=e.wantedResolution}}])&&o(t.prototype,r),e&&o(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();r.default=e},{"../../TileState.js":104,"../../ViewHint.js":108,"../../array.js":110,"../../coordinate.js":128,"../../extent.js":142,"../../render/canvas/BuilderGroup.js":299,"../../render/canvas/ExecutorGroup.js":301,"../../render/canvas/ZIndexContext.js":308,"../../render/canvas/hitdetect.js":309,"../../size.js":337,"../../transform.js":402,"../../util.js":404,"../vector.js":322,"./TileLayer.js":318}],322:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.defaultOrder=function(e,t){return parseInt((0,n.getUid)(e),10)-parseInt((0,n.getUid)(t),10)},r.getSquaredTolerance=function(e,t){e=i*e/t;return e*e},r.getTolerance=o,r.renderFeature=function(e,t,r,n,i,o,a,s){var u=[],l=r.getImage();l&&(f=!0,(c=l.getImageState())==h.default.LOADED||c==h.default.ERROR?f=!1:c==h.default.IDLE&&l.load(),f)&&u.push(l.ready());var c=r.getFill(),f=(c&&c.loading()&&u.push(c.ready()),0<u.length);return f&&Promise.all(u).then(function(){return i(null)}),function(e,t,r,n,i,o,a){var s=r.getGeometryFunction()(t);s&&(s=s.simplifyTransformed(n,i),r.getRenderer()?function e(t,r,n,i,o){if("GeometryCollection"!=r.getType())t.getBuilder(n.getZIndex(),"Default").drawCustom(r,i,n.getRenderer(),n.getHitDetectionRenderer(),o);else for(var a=r.getGeometries(),s=0,u=a.length;s<u;++s)e(t,a[s],n,i,o)}(e,s,r,t,a):(0,p[s.getType()])(e,s,r,t,a,o))}(e,t,r,n,o,a,s),f};var h=(r=e("../ImageState.js"))&&r.__esModule?r:{default:r},n=e("../util.js");var i=.5,p={Point:function(e,t,r,n,i,o){var a=r.getImage(),s=r.getText(),u=s&&s.getText(),o=o&&a&&u?{}:void 0;if(a){if(a.getImageState()!=h.default.LOADED)return;var l=e.getBuilder(r.getZIndex(),"Image");l.setImageStyle(a,o),l.drawPoint(t,n,i)}u&&((a=e.getBuilder(r.getZIndex(),"Text")).setTextStyle(s,o),a.drawText(t,n,i))},LineString:function(e,t,r,n,i){var o=r.getStroke();o&&((a=e.getBuilder(r.getZIndex(),"LineString")).setFillStrokeStyle(null,o),a.drawLineString(t,n,i));o=r.getText();{var a;o&&o.getText()&&((a=e.getBuilder(r.getZIndex(),"Text")).setTextStyle(o),a.drawText(t,n,i))}},Polygon:function(e,t,r,n,i){var o=r.getFill(),a=r.getStroke();{var s;(o||a)&&((s=e.getBuilder(r.getZIndex(),"Polygon")).setFillStrokeStyle(o,a),s.drawPolygon(t,n,i))}o=r.getText();o&&o.getText()&&((a=e.getBuilder(r.getZIndex(),"Text")).setTextStyle(o),a.drawText(t,n,i))},MultiPoint:function(e,t,r,n,i,o){var a=r.getImage(),s=a&&0!==a.getOpacity(),u=r.getText(),l=u&&u.getText(),o=o&&s&&l?{}:void 0;if(s){if(a.getImageState()!=h.default.LOADED)return;s=e.getBuilder(r.getZIndex(),"Image");s.setImageStyle(a,o),s.drawMultiPoint(t,n,i)}l&&((a=e.getBuilder(r.getZIndex(),"Text")).setTextStyle(u,o),a.drawText(t,n,i))},MultiLineString:function(e,t,r,n,i){var o=r.getStroke();o&&((a=e.getBuilder(r.getZIndex(),"LineString")).setFillStrokeStyle(null,o),a.drawMultiLineString(t,n,i));o=r.getText();{var a;o&&o.getText()&&((a=e.getBuilder(r.getZIndex(),"Text")).setTextStyle(o),a.drawText(t,n,i))}},MultiPolygon:function(e,t,r,n,i){var o=r.getFill(),a=r.getStroke();{var s;(a||o)&&((s=e.getBuilder(r.getZIndex(),"Polygon")).setFillStrokeStyle(o,a),s.drawMultiPolygon(t,n,i))}o=r.getText();o&&o.getText()&&((a=e.getBuilder(r.getZIndex(),"Text")).setTextStyle(o),a.drawText(t,n,i))},GeometryCollection:function(e,t,r,n,i,o){var a,s,u=t.getGeometriesArray();for(a=0,s=u.length;a<s;++a)(0,p[u[a].getType()])(e,u[a],r,n,i,o)},Circle:function(e,t,r,n,i){var o=r.getFill(),a=r.getStroke();{var s;(o||a)&&((s=e.getBuilder(r.getZIndex(),"Circle")).setFillStrokeStyle(o,a),s.drawCircle(t,n,i))}o=r.getText();o&&o.getText()&&((a=e.getBuilder(r.getZIndex(),"Text")).setTextStyle(o),a.drawText(t,n))}};function o(e,t){return i*e/t}},{"../ImageState.js":86,"../util.js":404}],323:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=l(e("../../layer/Property.js")),o=l(e("../Layer.js")),a=l(e("../../render/Event.js")),s=l(e("../../render/EventType.js")),c=l(e("../../webgl/Helper.js")),u=e("../../transform.js");function l(e){return e&&e.__esModule?e:{default:e}}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function h(e,t,r){t=g(t);var n=e,t=p()?Reflect.construct(t,r||[],g(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(p=function(){return!!e})()}function d(){return(d="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=g(e)););return e}(e,t);if(n)return(n=Object.getOwnPropertyDescriptor(n,t)).get?n.get.call(arguments.length<3?e:r):n.value}).apply(null,arguments)}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t){return(y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}e=function(){function l(e,t){var r;if(this instanceof l)return t=t||{},(r=h(this,l,[e])).inversePixelTransform_=(0,u.create)(),r.pixelContext_=null,r.postProcesses_=t.postProcesses,r.uniforms_=t.uniforms,r.helper,e.addChangeListener(n.default.MAP,r.removeHelper.bind(r)),r.dispatchPreComposeEvent=r.dispatchPreComposeEvent.bind(r),r.dispatchPostComposeEvent=r.dispatchPostComposeEvent.bind(r),r;throw new TypeError("Cannot call a class as a function")}var e,t=l,r=o.default;if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&y(t,r),t=l,(r=[{key:"dispatchPreComposeEvent",value:function(e,t){var r=this.getLayer();r.hasListener(s.default.PRECOMPOSE)&&(t=new a.default(s.default.PRECOMPOSE,void 0,t,e),r.dispatchEvent(t))}},{key:"dispatchPostComposeEvent",value:function(e,t){var r=this.getLayer();r.hasListener(s.default.POSTCOMPOSE)&&(t=new a.default(s.default.POSTCOMPOSE,void 0,t,e),r.dispatchEvent(t))}},{key:"reset",value:function(e){this.uniforms_=e.uniforms,this.helper&&this.helper.setUniforms(this.uniforms_)}},{key:"removeHelper",value:function(){this.helper&&(this.helper.dispose(),delete this.helper)}},{key:"prepareFrame",value:function(e){if(this.getLayer().getRenderSource()){for(var t,r=!0,n=-1,i=0,o=e.layerStatesArray.length;i<o;i++){var a=e.layerStatesArray[i].layer,s=a.getRenderer();if(s instanceof l){a=a.getClassName();if(!r&&a===t||(n+=1,r=!1),t=a,s===this)break}else r=!0}var u="map/"+e.mapId+"/group/"+n;this.helper&&this.helper.canvasCacheKeyMatches(u)&&!this.helper.needsToBeRecreated()||(this.removeHelper(),this.helper=new c.default({postProcesses:this.postProcesses_,uniforms:this.uniforms_,canvasCacheKey:u}),t&&(this.helper.getCanvas().className=t),this.afterHelperCreated())}return this.prepareFrameInternal(e)}},{key:"afterHelperCreated",value:function(){}},{key:"prepareFrameInternal",value:function(e){return!0}},{key:"disposeInternal",value:function(){this.removeHelper(),d(g(l.prototype),"disposeInternal",this).call(this)}},{key:"dispatchRenderEvent_",value:function(e,t,r){var n=this.getLayer();n.hasListener(e)&&((0,u.compose)(this.inversePixelTransform_,0,0,r.pixelRatio,-r.pixelRatio,0,0,-r.size[1]),e=new a.default(e,this.inversePixelTransform_,r,t),n.dispatchEvent(e))}},{key:"preRender",value:function(e,t){this.dispatchRenderEvent_(s.default.PRERENDER,e,t)}},{key:"postRender",value:function(e,t){this.dispatchRenderEvent_(s.default.POSTRENDER,e,t)}}])&&f(t.prototype,r),e&&f(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();r.default=e},{"../../layer/Property.js":270,"../../render/Event.js":293,"../../render/EventType.js":294,"../../transform.js":402,"../../webgl/Helper.js":410,"../Layer.js":314}],324:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=o(e("../../layer/BaseVector.js")),a=o(e("../../source/VectorEventType.js")),u=o(e("../../ViewHint.js")),l=o(e("../../webgl/Buffer.js")),n=o(e("./Layer.js")),c=o(e("../../webgl/RenderTarget.js")),f=e("../../webgl.js"),h=e("../../webgl/Helper.js"),d=e("../../render/webgl/constants.js"),g=e("../../transform.js"),p=e("../../asserts.js"),y=e("../../extent.js"),A=e("../../render/webgl/utils.js"),m=e("../../worker/webgl.js"),v=e("../../proj.js"),b=e("../../util.js"),_=e("./worldUtil.js"),w=e("../../events.js");function o(e){return e&&e.__esModule?e:{default:e}}function E(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o,a,s=[],u=!0,l=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=o.call(r)).done)&&(s.push(n.value),s.length!==t);u=!0);}catch(e){l=!0,i=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}(e,t)||I(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(e){return function(e){if(Array.isArray(e))return S(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||I(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(e,t){var r;if(e)return"string"==typeof e?S(e,t):"Map"===(r="Object"===(r={}.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?S(e,t):void 0}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function j(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function x(e,t,r){t=k(t);var n=e,t=O()?Reflect.construct(t,r||[],k(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(O=function(){return!!e})()}function P(){return(P="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=k(e)););return e}(e,t);if(n)return(n=Object.getOwnPropertyDescriptor(n,t)).get?n.get.call(arguments.length<3?e:r):n.value}).apply(null,arguments)}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function B(e,t){return(B=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}e=function(){function o(e,t){var n,r,i;if(this instanceof o)return i=t.uniforms||{},r=(0,g.create)(),i[h.DefaultUniform.PROJECTION_MATRIX]=r,(n=x(this,o,[e,{uniforms:i,postProcesses:t.postProcesses}])).sourceRevision_=-1,n.verticesBuffer_=new l.default(f.ARRAY_BUFFER,f.DYNAMIC_DRAW),n.indicesBuffer_=new l.default(f.ELEMENT_ARRAY_BUFFER,f.DYNAMIC_DRAW),n.vertexShader_=t.vertexShader,n.fragmentShader_=t.fragmentShader,n.program_,n.hitDetectionEnabled_=null==(e=t.hitDetectionEnabled)||e,i=t.attributes?t.attributes.map(function(e){return{name:"a_prop_"+e.name,size:1,type:h.AttributeType.FLOAT}}):[],n.attributes=[{name:"a_position",size:2,type:h.AttributeType.FLOAT},{name:"a_index",size:1,type:h.AttributeType.FLOAT}],n.hitDetectionEnabled_&&(n.attributes.push({name:"a_prop_hitColor",size:4,type:h.AttributeType.FLOAT}),n.attributes.push({name:"a_featureUid",size:1,type:h.AttributeType.FLOAT})),(e=n.attributes).push.apply(e,C(i)),n.customAttributes=t.attributes||[],n.previousExtent_=(0,y.createEmpty)(),n.currentTransform_=r,n.renderTransform_=(0,g.create)(),n.invertRenderTransform_=(0,g.create)(),n.renderInstructions_=new Float32Array(0),n.hitRenderTarget_,n.lastSentId=0,n.worker_=(0,m.create)(),n.worker_.addEventListener("message",function(e){var t,r=e.data;r.type===d.WebGLWorkerMessageType.GENERATE_POINT_BUFFERS&&(t=r.projectionTransform,n.verticesBuffer_.fromArrayBuffer(r.vertexBuffer),n.helper.flushBufferData(n.verticesBuffer_),n.indicesBuffer_.fromArrayBuffer(r.indexBuffer),n.helper.flushBufferData(n.indicesBuffer_),n.renderTransform_=t,(0,g.makeInverse)(n.invertRenderTransform_,n.renderTransform_),n.renderInstructions_=new Float32Array(e.data.renderInstructions),r.id===n.lastSentId&&(n.ready=!0),n.getLayer().changed())}),n.featureCache_={},n.featureCount_=0,e=n.getLayer().getSource(),n.sourceListenKeys_=[(0,w.listen)(e,a.default.ADDFEATURE,n.handleSourceFeatureAdded_,n),(0,w.listen)(e,a.default.CHANGEFEATURE,n.handleSourceFeatureChanged_,n),(0,w.listen)(e,a.default.REMOVEFEATURE,n.handleSourceFeatureDelete_,n),(0,w.listen)(e,a.default.CLEAR,n.handleSourceFeatureClear_,n)],e.forEachFeature(function(e){n.featureCache_[(0,b.getUid)(e)]={feature:e,properties:e.getProperties(),geometry:e.getGeometry()},n.featureCount_++}),n;throw new TypeError("Cannot call a class as a function")}var e,t=o,r=n.default;if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&B(t,r),t=o,(r=[{key:"afterHelperCreated",value:function(){this.program_=this.helper.getProgram(this.fragmentShader_,this.vertexShader_),this.hitDetectionEnabled_&&(this.hitRenderTarget_=new c.default(this.helper))}},{key:"handleSourceFeatureAdded_",value:function(e){e=e.feature;this.featureCache_[(0,b.getUid)(e)]={feature:e,properties:e.getProperties(),geometry:e.getGeometry()},this.featureCount_++}},{key:"handleSourceFeatureChanged_",value:function(e){e=e.feature;this.featureCache_[(0,b.getUid)(e)]={feature:e,properties:e.getProperties(),geometry:e.getGeometry()}}},{key:"handleSourceFeatureDelete_",value:function(e){e=e.feature;delete this.featureCache_[(0,b.getUid)(e)],this.featureCount_--}},{key:"handleSourceFeatureClear_",value:function(){this.featureCache_={},this.featureCount_=0}},{key:"renderFrame",value:function(e){var t=this.helper.getGL(),r=(this.preRender(t,e),E((0,_.getWorldParameters)(e,this.getLayer()),3)),n=r[0],i=r[1],r=r[2];return this.renderWorlds(e,!1,n,i,r),this.helper.finalizeDraw(e,this.dispatchPreComposeEvent,this.dispatchPostComposeEvent),this.hitDetectionEnabled_&&(this.renderWorlds(e,!0,n,i,r),this.hitRenderTarget_.clearCachedData()),this.postRender(t,e),this.helper.getCanvas()}},{key:"prepareFrameInternal",value:function(e){var t=this.getLayer(),r=t.getSource(),n=e.viewState,i=!e.viewHints[u.default.ANIMATING]&&!e.viewHints[u.default.INTERACTING],o=!(0,y.equals)(this.previousExtent_,e.extent),a=this.sourceRevision_<r.getRevision();return a&&(this.sourceRevision_=r.getRevision()),i&&(o||a)&&(i=n.projection,o=n.resolution,a=t instanceof s.default?t.getRenderBuffer():0,n=(0,y.buffer)(e.extent,a*o),r.loadFeatures(n,o,i),this.rebuildBuffers_(e),this.previousExtent_=e.extent.slice()),this.helper.useProgram(this.program_,e),this.helper.prepareDraw(e),this.helper.bindBuffer(this.verticesBuffer_),this.helper.bindBuffer(this.indicesBuffer_),this.helper.enableAttributes(this.attributes),!0}},{key:"rebuildBuffers_",value:function(e){var t=(0,g.create)();this.helper.makeProjectionTransform(e,t);var r,n,i,o,a=(0,v.getUserProjection)(),s=(this.hitDetectionEnabled_?7:2)+this.customAttributes.length,u=s*this.featureCount_,l=(this.renderInstructions_&&this.renderInstructions_.length===u||(this.renderInstructions_=new Float32Array(u)),[]),c=[],f=-1;for(i in this.featureCache_)if((n=(r=this.featureCache_[i]).geometry)&&"Point"===n.getType()){a?(o=(0,v.fromUserCoordinate)(n.getFlatCoordinates(),e.viewState.projection),l[0]=o[0],l[1]=o[1]):(l[0]=n.getFlatCoordinates()[0],l[1]=n.getFlatCoordinates()[1]),(0,g.apply)(t,l),this.renderInstructions_[++f]=l[0],this.renderInstructions_[++f]=l[1],this.hitDetectionEnabled_&&(o=(0,A.colorEncodeId)(f+5,c),this.renderInstructions_[++f]=o[0],this.renderInstructions_[++f]=o[1],this.renderInstructions_[++f]=o[2],this.renderInstructions_[++f]=o[3],this.renderInstructions_[++f]=Number(i));for(var h=0;h<this.customAttributes.length;h++){var p=this.customAttributes[h].callback(r.feature,r.properties);this.renderInstructions_[++f]=p}}u={id:++this.lastSentId,type:d.WebGLWorkerMessageType.GENERATE_POINT_BUFFERS,renderInstructions:this.renderInstructions_.buffer,customAttributesSize:s-2};u.projectionTransform=t,this.ready=!1,this.worker_.postMessage(u,[this.renderInstructions_.buffer]),this.renderInstructions_=null}},{key:"forEachFeatureAtCoordinate",value:function(e,t,r,n,i){if((0,p.assert)(this.hitDetectionEnabled_,"`forEachFeatureAtCoordinate` cannot be used on a WebGL layer if the hit detection logic has been disabled using the `disableHitDetection: true` option."),this.renderInstructions_&&this.hitDetectionEnabled_)return t=(0,g.apply)(t.coordinateToPixelTransform,e.slice()),t=[(e=this.hitRenderTarget_.readPixel(t[0]/2,t[1]/2))[0]/255,e[1]/255,e[2]/255,e[3]/255],e=(0,A.colorDecodeId)(t),t=this.renderInstructions_[e],e=Math.floor(t).toString(),(t=this.getLayer().getSource().getFeatureByUid(e))?n(t,this.getLayer(),null):void 0}},{key:"renderWorlds",value:function(e,t,r,n,i){var o=r;this.helper.useProgram(this.program_,e),t&&(this.hitRenderTarget_.setSize([Math.floor(e.size[0]/2),Math.floor(e.size[1]/2)]),this.helper.prepareDrawToRenderTarget(e,this.hitRenderTarget_,!0)),this.helper.bindBuffer(this.verticesBuffer_),this.helper.bindBuffer(this.indicesBuffer_),this.helper.enableAttributes(this.attributes);do{this.helper.makeProjectionTransform(e,this.currentTransform_),(0,g.translate)(this.currentTransform_,o*i,0),(0,g.multiply)(this.currentTransform_,this.invertRenderTransform_),this.helper.applyUniforms(e),this.helper.applyHitDetectionUniform(t);var a=this.indicesBuffer_.getSize()}while(this.helper.drawElements(0,a),++o<n)}},{key:"disposeInternal",value:function(){this.worker_.terminate(),this.layer_=null,this.sourceListenKeys_.forEach(function(e){(0,w.unlistenByKey)(e)}),this.sourceListenKeys_=null,P(k(o.prototype),"disposeInternal",this).call(this)}},{key:"renderDeclutter",value:function(){}}])&&j(t.prototype,r),e&&j(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();r.default=e},{"../../ViewHint.js":108,"../../asserts.js":111,"../../events.js":132,"../../extent.js":142,"../../layer/BaseVector.js":264,"../../proj.js":283,"../../render/webgl/constants.js":311,"../../render/webgl/utils.js":312,"../../source/VectorEventType.js":368,"../../transform.js":402,"../../util.js":404,"../../webgl.js":406,"../../webgl/Buffer.js":408,"../../webgl/Helper.js":410,"../../webgl/RenderTarget.js":413,"../../worker/webgl.js":417,"./Layer.js":323,"./worldUtil.js":327}],325:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.Uniforms=r.Attributes=void 0;var m=u(e("../../reproj/DataTile.js")),v=u(e("../../reproj/Tile.js")),b=u(e("../../TileState.js")),n=u(e("../../webgl/TileTexture.js")),o=u(e("../../webgl/Buffer.js")),_=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=l(e)&&"function"!=typeof e)return{default:e};t=s(t);if(t&&t.has(e))return t.get(e);var r,n={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in e){var o;"default"!==r&&{}.hasOwnProperty.call(e,r)&&((o=i?Object.getOwnPropertyDescriptor(e,r):null)&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=e[r])}return n.default=e,t&&t.set(e,n),n}(e("./TileLayerBase.js")),i=e("../../webgl/Helper.js"),a=e("../../webgl.js"),w=e("../../transform.js"),E=e("../../extent.js"),C=e("../../proj.js"),I=e("../../vec/mat4.js"),S=e("../../size.js");function s(e){var t,r;return"function"!=typeof WeakMap?null:(t=new WeakMap,r=new WeakMap,(s=function(e){return e?r:t})(e))}function u(e){return e&&e.__esModule?e:{default:e}}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){var r,n,i,o,a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(a)return i=!(n=!0),{s:function(){a=a.call(e)},n:function(){var e=a.next();return n=e.done,e},e:function(e){i=!0,r=e},f:function(){try{n||null==a.return||a.return()}finally{if(i)throw r}}};if(Array.isArray(e)||(a=function(e,t){{var r;if(e)return"string"==typeof e?f(e,t):"Map"===(r="Object"===(r={}.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?f(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length)return a&&(e=a),o=0,{s:t=function(){},n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function h(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,O(n.key),n)}}function p(e,t,r){t=y(t);var n=e,t=d()?Reflect.construct(t,r||[],y(e).constructor):t.apply(e,r);if(t&&("object"==l(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(d=function(){return!!e})()}function g(){return(g="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=y(e)););return e}(e,t);if(n)return(n=Object.getOwnPropertyDescriptor(n,t)).get?n.get.call(arguments.length<3?e:r):n.value}).apply(null,arguments)}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function A(e,t){return(A=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function j(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function x(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?j(Object(i),!0).forEach(function(e){var t,r;t=n,r=i[e=e],(e=O(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):j(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))})}return n}function O(e){e=function(e,t){if("object"!=l(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=l(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==l(e)?e:e+""}var P=r.Uniforms=x(x({},_.Uniforms),{},{TILE_TEXTURE_ARRAY:"u_tileTextures",TEXTURE_PIXEL_WIDTH:"u_texturePixelWidth",TEXTURE_PIXEL_HEIGHT:"u_texturePixelHeight",TEXTURE_RESOLUTION:"u_textureResolution",TEXTURE_ORIGIN_X:"u_textureOriginX",TEXTURE_ORIGIN_Y:"u_textureOriginY"}),k=[{name:(r.Attributes={TEXTURE_COORD:"a_textureCoord"}).TEXTURE_COORD,size:2,type:i.AttributeType.FLOAT}],e=function(){function i(e,t){if(this instanceof i)return(e=p(this,i,[e,t])).program_,e.vertexShader_=t.vertexShader,e.fragmentShader_=t.fragmentShader,e.indices_=new o.default(a.ELEMENT_ARRAY_BUFFER,a.STATIC_DRAW),e.indices_.fromArray([0,1,3,1,2,3]),e.paletteTextures_=t.paletteTextures||[],e;throw new TypeError("Cannot call a class as a function")}var e,t=i,r=_.default;if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&A(t,r),t=i,(r=[{key:"reset",value:function(e){if(g(y(i.prototype),"reset",this).call(this,e),this.helper){var t,r=this.helper.getGL(),n=c(this.paletteTextures_);try{for(n.s();!(t=n.n()).done;)t.value.delete(r)}catch(e){n.e(e)}finally{n.f()}}this.vertexShader_=e.vertexShader,this.fragmentShader_=e.fragmentShader,this.paletteTextures_=e.paletteTextures||[],this.helper&&(this.program_=this.helper.getProgram(this.fragmentShader_,this.vertexShader_))}},{key:"afterHelperCreated",value:function(){this.program_=this.helper.getProgram(this.fragmentShader_,this.vertexShader_),this.helper.flushBufferData(this.indices_)}},{key:"removeHelper",value:function(){if(this.helper){var e,t=this.helper.getGL(),r=c(this.paletteTextures_);try{for(r.s();!(e=r.n()).done;)e.value.delete(t)}catch(e){r.e(e)}finally{r.f()}}g(y(i.prototype),"removeHelper",this).call(this)}},{key:"createTileRepresentation",value:function(e){return new n.default(e)}},{key:"beforeTilesRender",value:function(e,t){g(y(i.prototype),"beforeTilesRender",this).call(this,e,t),this.helper.useProgram(this.program_,e)}},{key:"renderTile",value:function(e,t,r,n,i,o,a,s,u,l,c){var f=this.helper.getGL();this.helper.bindBuffer(e.coords),this.helper.bindBuffer(this.indices_),this.helper.enableAttributes(k);for(var h=0;h<e.textures.length;){var p="".concat(P.TILE_TEXTURE_ARRAY,"[").concat(h,"]");this.helper.bindTexture(e.textures[h],h,p),++h}for(var d=0;d<this.paletteTextures_.length;++d){var g=this.paletteTextures_[d],y=g.getTexture(f);this.helper.bindTexture(y,h,g.name),++h}var r=r.viewState,A=o[0]+2*l,m=o[1]+2*l,v=e.tile.tileCoord,b=v[1],v=v[2],t=(this.helper.setUniformMatrixValue(P.TILE_TRANSFORM,(0,I.fromTransform)(this.tempMat4,t)),this.helper.setUniformFloatValue(P.TRANSITION_ALPHA,c),this.helper.setUniformFloatValue(P.DEPTH,u),n);0<l&&(0,E.getIntersection)(t=s,n,t),this.helper.setUniformFloatVec4(P.RENDER_EXTENT,t),this.helper.setUniformFloatValue(P.RESOLUTION,r.resolution),this.helper.setUniformFloatValue(P.ZOOM,r.zoom),this.helper.setUniformFloatValue(P.TEXTURE_PIXEL_WIDTH,A),this.helper.setUniformFloatValue(P.TEXTURE_PIXEL_HEIGHT,m),this.helper.setUniformFloatValue(P.TEXTURE_RESOLUTION,i),this.helper.setUniformFloatValue(P.TEXTURE_ORIGIN_X,a[0]+b*o[0]*i-l*i),this.helper.setUniformFloatValue(P.TEXTURE_ORIGIN_Y,a[1]-v*o[1]*i+l*i),this.helper.drawElements(0,this.indices_.getSize())}},{key:"getData",value:function(e){if(this.helper.getGL()){var t=this.frameState;if(t){var r=this.getLayer(),n=(0,w.apply)(t.pixelToCoordinateTransform,e.slice()),i=t.viewState,e=r.getExtent();if(!e||(0,E.containsCoordinate)((0,C.fromUserExtent)(e,i.projection),n)){for(var o,a,s=r.getSources((0,E.boundingExtent)([n]),i.resolution),u=s.length-1;0<=u;--u)if("ready"===(o=s[u]).getState()){if(a=o.getTileGridForProjection(i.projection),o.getWrapX())break;var l=a.getExtent();if(!l||(0,E.containsCoordinate)(l,n))break}if(!(u<0))for(var c=this.tileRepresentationCache,f=a.getZForResolution(i.resolution);f>=a.getMinZoom();--f){var h=a.getTileCoordForCoordAndZ(n,f),p=(0,_.getCacheKey)(o,h);if(c.containsKey(p)){var d,g,y,p=c.get(p),A=p.tile;if((A instanceof v.default||A instanceof m.default)&&A.getState()===b.default.EMPTY)return null;if(p.loaded)return A=a.getOrigin(f),d=(0,S.toSize)(a.getTileSize(f)),g=a.getResolution(f),y=(n[0]-A[0])/g-h[1]*d[0],A=(A[1]-n[1])/g-h[2]*d[1],p.getPixelData(y,A)}}}}}return null}},{key:"disposeInternal",value:function(){var e=this.helper;if(e){var t,r=e.getGL(),n=c(this.paletteTextures_);try{for(n.s();!(t=n.n()).done;)t.value.delete(r)}catch(e){n.e(e)}finally{n.f()}this.paletteTextures_.length=0,r.deleteProgram(this.program_),delete this.program_,e.deleteBuffer(this.indices_)}g(y(i.prototype),"disposeInternal",this).call(this),delete this.indices_}}])&&h(t.prototype,r),e&&h(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();r.default=e},{"../../TileState.js":104,"../../extent.js":142,"../../proj.js":283,"../../reproj/DataTile.js":329,"../../reproj/Tile.js":331,"../../size.js":337,"../../transform.js":402,"../../vec/mat4.js":405,"../../webgl.js":406,"../../webgl/Buffer.js":408,"../../webgl/Helper.js":410,"../../webgl/TileTexture.js":415,"./TileLayerBase.js":326}],326:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.Uniforms=void 0,r.getCacheKey=j,r.newTileRepresentationLookup=te;var o=c(e("../../structs/LRUCache.js")),W=c(e("../../reproj/DataTile.js")),Y=c(e("../../reproj/Tile.js")),a=c(e("../../TileRange.js")),V=c(e("../../TileState.js")),s=c(e("./Layer.js")),K=e("../../util.js"),u=e("../../vec/mat4.js"),X=e("../../tilecoord.js"),v=e("../../transform.js"),J=e("../../array.js"),n=e("../../proj.js"),l=e("../../extent.js"),b=e("../../size.js");function c(e){return e&&e.__esModule?e:{default:e}}function Z(e,t){var r,n,i,o,a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(a)return i=!(n=!0),{s:function(){a=a.call(e)},n:function(){var e=a.next();return n=e.done,e},e:function(e){i=!0,r=e},f:function(){try{n||null==a.return||a.return()}finally{if(i)throw r}}};if(Array.isArray(e)||(a=function(e,t){{var r;if(e)return"string"==typeof e?f(e,t):"Map"===(r="Object"===(r={}.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?f(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length)return a&&(e=a),o=0,{s:t=function(){},n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function h(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function p(e,t,r){t=y(t);var n=e,t=d()?Reflect.construct(t,r||[],y(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(d=function(){return!!e})()}function g(){return(g="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=y(e)););return e}(e,t);if(n)return(n=Object.getOwnPropertyDescriptor(n,t)).get?n.get.call(arguments.length<3?e:r):n.value}).apply(null,arguments)}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function A(e,t){return(A=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}r.Uniforms={TILE_TRANSFORM:"u_tileTransform",TRANSITION_ALPHA:"u_transitionAlpha",DEPTH:"u_depth",RENDER_EXTENT:"u_renderExtent",PATTERN_ORIGIN:"u_patternOrigin",RESOLUTION:"u_resolution",ZOOM:"u_zoom",GLOBAL_ALPHA:"u_globalAlpha",PROJECTION_MATRIX:"u_projectionMatrix",SCREEN_TO_WORLD_MATRIX:"u_screenToWorldMatrix"};var $={};function ee(e){return 1/(e+2)}function te(){return{tileIds:new Set,representationsByZ:{}}}function I(e,t){return e.tileIds.has((0,K.getUid)(t))}function S(e,t,r){var n=e.representationsByZ;r in n||(n[r]=new Set),n[r].add(t),e.tileIds.add((0,K.getUid)(t.tile))}function re(e,t){var r=e.layerStatesArray[e.layerIndex],r=(r.extent&&(t=(0,l.getIntersection)(t,(0,n.fromUserExtent)(r.extent,e.viewState.projection))),r.layer.getRenderSource());return r.getWrapX()||(r=r.getTileGridForProjection(e.viewState.projection).getExtent())&&(t=(0,l.getIntersection)(t,r)),t}function j(e,t){return"".concat(e.getKey(),",").concat((0,X.getKey)(t))}e=function(){function r(e,t){if(!(this instanceof r))throw new TypeError("Cannot call a class as a function");(e=p(this,r,[e,{uniforms:t.uniforms,postProcesses:t.postProcesses}])).renderComplete=!1,e.tileTransform_=(0,v.create)(),e.tempMat4=(0,u.create)(),e.tempTileRange_=new a.default(0,0,0,0),e.tempTileCoord_=(0,X.createOrUpdate)(0,0,0),e.tempSize_=[0,0];t=void 0!==t.cacheSize?t.cacheSize:512;return e.tileRepresentationCache=new o.default(t),e.frameState=null,e.projection_=void 0,e}var e,t=r,n=s.default;if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&A(t,n),t=r,(n=[{key:"reset",value:function(e){g(y(r.prototype),"reset",this).call(this,{uniforms:e.uniforms})}},{key:"isDrawableTile_",value:function(e){var t=this.getLayer(),e=e.getState(),t=t.getUseInterimTilesOnError();return e==V.default.LOADED||e==V.default.EMPTY||e==V.default.ERROR&&!t}},{key:"prepareFrameInternal",value:function(e){this.projection_?e.viewState.projection!==this.projection_&&(this.clearCache(),this.projection_=e.viewState.projection):this.projection_=e.viewState.projection;var t=this.getLayer().getRenderSource();return!!t&&!(0,l.isEmpty)(re(e,e.extent))&&"ready"===t.getState()}},{key:"createTileRepresentation",value:function(e){return(0,K.abstract)()}},{key:"enqueueTiles",value:function(e,t,r,n,i){var o=e.viewState,a=this.getLayer(),s=a.getRenderSource(),u=s.getTileGridForProjection(o.projection),l=s.getGutterForProjection(o.projection),c=(0,K.getUid)(s);c in e.wantedTiles||(e.wantedTiles[c]={});for(var f=e.wantedTiles[c],h=this.tileRepresentationCache,p=a.getMapInternal(),d=Math.max(r-i,u.getMinZoom(),u.getZForResolution(Math.min(a.getMaxResolution(),p?p.getView().getResolutionForZoom(Math.max(a.getMinZoom(),0)):u.getResolution(0)),s.zDirection)),g=r;d<=g;--g)for(var y=u.getTileRangeForExtentAndZ(t,g,this.tempTileRange_),A=u.getResolution(g),m=y.minX;m<=y.maxX;++m)for(var v=y.minY;v<=y.maxY;++v){var b,_=(0,X.createOrUpdate)(g,m,v,this.tempTileCoord_),w=j(s,_),E=void 0,C=void 0;h.containsKey(w)&&(C=(E=h.get(w)).tile),I(n,C=E&&E.tile.key===s.getKey()?C:s.getTile(g,m,v,e.pixelRatio,o.projection))||(E?this.isDrawableTile_(C)?E.setTile(C):(b=C.getInterimTile(),E.setTile(b)):(E=this.createTileRepresentation({tile:C,grid:u,helper:this.helper,gutter:l}),h.set(w,E)),S(n,E,g),f[b=C.getKey()]=!0,C.getState()!==V.default.IDLE)||e.tileQueue.isKeyQueued(b)||e.tileQueue.enqueue([C,c,u.getTileCoordCenter(_),A])}}},{key:"beforeTilesRender",value:function(e,t){this.helper.prepareDraw(this.frameState,!t,!0)}},{key:"beforeTilesMaskRender",value:function(e){return!1}},{key:"renderTile",value:function(e,t,r,n,i,o,a,s,u,l,c){}},{key:"renderTileMask",value:function(e,t,r,n){}},{key:"drawTile_",value:function(e,t,r,n,i,o,a){var s,u,l,c,f,h,p,d,g,y,A,m;t.ready&&(m=t.tile.tileCoord,o=(s=(0,X.getKey)(m))in o?o[s]:1,s=a.getResolution(r),u=(0,b.toSize)(a.getTileSize(r),this.tempSize_),l=a.getOrigin(r),a=a.getTileCoordExtent(m),r=o<1?-1:ee(r),o<1&&(e.animate=!0),d=(c=e.viewState).center[0],g=c.center[1],p=(f=u[0]+2*n)/(h=u[1]+2*n),d=(d-l[0])/(u[0]*s),g=(l[1]-g)/(u[1]*s),y=c.resolution/s,A=m[1],m=m[2],(0,v.reset)(this.tileTransform_),(0,v.scale)(this.tileTransform_,2/(e.size[0]*y/f),-2/(e.size[1]*y/f)),(0,v.rotate)(this.tileTransform_,c.rotation),(0,v.scale)(this.tileTransform_,1,1/p),(0,v.translate)(this.tileTransform_,(u[0]*(A-d)-n)/f,(u[1]*(m-g)-n)/h),this.renderTile(t,this.tileTransform_,e,i,s,u,l,a,r,n,o))}},{key:"renderFrame",value:function(e){var D=this,t=(this.frameState=e,this.renderComplete=!0,this.helper.getGL()),r=(this.preRender(t,e),e.viewState),n=this.getLayer(),i=n.getRenderSource(),o=i.getTileGridForProjection(r.projection),a=i.getGutterForProjection(r.projection),s=re(e,e.extent),u=o.getZForResolution(r.resolution,i.zDirection),l=te(),c=n.getPreload();e.nextExtent&&(n=o.getZForResolution(r.nextResolution,i.zDirection),r=re(e,e.nextExtent),this.enqueueTiles(e,r,n,l,c)),this.enqueueTiles(e,s,u,l,0),0<c&&setTimeout(function(){D.enqueueTiles(e,s,u-1,l,c-1)},0);var f,h={},p=(0,K.getUid)(this),L=e.time,d=!1,g=Z(l.representationsByZ[u]);try{for(g.s();!(f=g.n()).done;){var y=f.value,A=y.tile;if(!(A instanceof Y.default||A instanceof W.default)||A.getState()!==V.default.EMPTY){var m=A.tileCoord;if(y.ready){var v=A.getAlpha(p,L);if(1===v){A.endTransition(p);continue}d=!0,h[(0,X.getKey)(m)]=v}if(this.renderComplete=!1,!this.findAltTiles_(o,m,u+1,l))for(var Q=o.getMinZoom(),b=u-1;Q<=b&&!this.findAltTiles_(o,m,b,l);--b);}}}catch(e){g.e(e)}finally{g.f()}var _=l.representationsByZ,w=Object.keys(_).map(Number).sort(J.descending);if(this.beforeTilesMaskRender(e))for(var E=0,F=w.length;E<F;++E){var C,I=w[E],S=Z(_[I]);try{for(S.s();!(C=S.n()).done;){var j,x=C.value,O=x.tile.tileCoord;(0,X.getKey)(O)in h||(j=o.getTileCoordExtent(O),this.renderTileMask(x,I,j,ee(I)))}}catch(e){S.e(e)}finally{S.f()}}this.beforeTilesRender(e,d);for(var P=0,N=w.length;P<N;++P){var k,B=w[P],T=Z(_[B]);try{for(T.s();!(k=T.n()).done;){var M=k.value,G=M.tile.tileCoord;(0,X.getKey)(G)in h||this.drawTile_(e,M,B,a,s,h,o)}}catch(e){T.e(e)}finally{T.f()}}var U,R=Z(_[u]);try{for(R.s();!(U=R.n()).done;){var z=U.value,q=z.tile.tileCoord;(0,X.getKey)(q)in h&&this.drawTile_(e,z,u,a,s,h,o)}}catch(e){R.e(e)}finally{R.f()}this.helper.finalizeDraw(e,this.dispatchPreComposeEvent,this.dispatchPostComposeEvent);for(var r=this.helper.getCanvas(),H=this.tileRepresentationCache;H.canExpireCache();)H.pop().dispose();return e.postRenderFunctions.push(function(e,t){i.updateCacheSize(.1,t.viewState.projection),i.expireCache(t.viewState.projection,$)}),this.postRender(t,e),r}},{key:"findAltTiles_",value:function(e,t,r,n){var i=e.getTileRangeForTileCoordAndZ(t,r,this.tempTileRange_);if(!i)return!1;for(var o=!0,a=this.tileRepresentationCache,s=this.getLayer().getRenderSource(),u=i.minX;u<=i.maxX;++u)for(var l=i.minY;l<=i.maxY;++l){var c=j(s,[r,u,l]),f=!1;a.containsKey(c)&&(c=a.get(c)).ready&&!I(n,c.tile)&&(S(n,c,r),f=!0),f||(o=!1)}return o}},{key:"clearCache",value:function(){var e=this.tileRepresentationCache;e.forEach(function(e){return e.dispose()}),e.clear()}},{key:"removeHelper",value:function(){this.helper&&this.clearCache(),g(y(r.prototype),"removeHelper",this).call(this)}},{key:"disposeInternal",value:function(){g(y(r.prototype),"disposeInternal",this).call(this),delete this.frameState}}])&&h(t.prototype,n),e&&h(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();r.default=e},{"../../TileRange.js":103,"../../TileState.js":104,"../../array.js":110,"../../extent.js":142,"../../proj.js":283,"../../reproj/DataTile.js":329,"../../reproj/Tile.js":331,"../../size.js":337,"../../structs/LRUCache.js":381,"../../tilecoord.js":396,"../../transform.js":402,"../../util.js":404,"../../vec/mat4.js":405,"./Layer.js":323}],327:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getWorldParameters=function(e,t){var r=e.viewState.projection,t=t.getSource().getWrapX()&&r.canWrapX(),r=r.getExtent(),e=e.extent,n=t?(0,o.getWidth)(r):null,i=t?Math.ceil((e[2]-r[2])/n)+1:1;return[t?Math.floor((e[0]-r[0])/n):0,i,n]};var o=e("../../extent.js")},{"../../extent.js":142}],328:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.calculateSourceExtentResolution=function(t,r,e,n){var i=(0,x.getCenter)(e),o=a(t,r,i,n);return(!isFinite(o)||o<=0)&&(0,x.forEachCorner)(e,function(e){return o=a(t,r,e,n),isFinite(o)&&0<o}),o},r.calculateSourceResolution=a,r.canvasPool=void 0,r.render=function(e,t,r,n,i,m,o,a,v,s,u,b,l,c){var _,w,f,E,C,I=(0,O.createCanvasContext2D)(Math.round(r*e),Math.round(r*t),k);return b||(I.imageSmoothingEnabled=!1),0!==v.length&&(I.scale(r,r),I.globalCompositeOperation="lighter",w=(0,x.createEmpty)(),v.forEach(function(e,t,r){(0,x.extend)(w,e.extent)}),f=r/n,E=(b?1:1+Math.pow(2,-24))/f,l&&1===v.length&&0===s||(_=(0,O.createCanvasContext2D)(Math.round((0,x.getWidth)(w)*f),Math.round((0,x.getHeight)(w)*f),k),b||(_.imageSmoothingEnabled=!1),i&&c&&(e=(i[0]-w[0])*f,t=-(i[3]-w[3])*f,n=(0,x.getWidth)(i)*f,l=(0,x.getHeight)(i)*f,_.rect(e,t,n,l),_.clip()),v.forEach(function(e,t,r){var n,i,o,a;0<e.image.width&&0<e.image.height&&(e.clipExtent&&(_.save(),i=(e.clipExtent[0]-w[0])*f,a=-(e.clipExtent[3]-w[3])*f,n=(0,x.getWidth)(e.clipExtent)*f,o=(0,x.getHeight)(e.clipExtent)*f,_.rect(b?i:Math.round(i),b?a:Math.round(a),b?n:Math.round(i+n)-Math.round(i),b?o:Math.round(a+o)-Math.round(a)),_.clip()),n=(e.extent[0]-w[0])*f,i=-(e.extent[3]-w[3])*f,o=(0,x.getWidth)(e.extent)*f,a=(0,x.getHeight)(e.extent)*f,_.drawImage(e.image,s,s,e.image.width-2*s,e.image.height-2*s,b?n:Math.round(n),b?i:Math.round(i),b?o:Math.round(n+o)-Math.round(n),b?a:Math.round(i+a)-Math.round(i)),e.clipExtent)&&_.restore()})),C=(0,x.getTopLeft)(o),a.getTriangles().forEach(function(e,t,r){var n,i=e.source,e=e.target,o=i[0][0],a=i[0][1],s=i[1][0],u=i[1][1],l=i[2][0],i=i[2][1],c=S((e[0][0]-C[0])/m),f=S(-(e[0][1]-C[1])/m),h=S((e[1][0]-C[0])/m),p=S(-(e[1][1]-C[1])/m),d=S((e[2][0]-C[0])/m),e=S(-(e[2][1]-C[1])/m),s=[[s-=o,u-=a,0,0,h-c],[l-=o,i-=a,0,0,d-c],[0,0,s,u,p-f],[0,0,l,i,e-f]],u=(0,P.solveLinearSystem)(s);if(u){if(I.save(),I.beginPath(),function(){{var e,t;void 0===j&&((e=(0,O.createCanvasContext2D)(6,6,k)).globalCompositeOperation="lighter",e.fillStyle="rgba(210, 0, 0, 0.75)",B(e,4,5,4,0),B(e,4,5,0,5),t=e.getImageData(0,0,3,3).data,j=T(t,0)||T(t,4)||T(t,8),(0,O.releaseCanvas)(e),k.push(e.canvas))}return j}()||!b){I.moveTo(h,p);for(var g=c-h,y=f-p,A=0;A<4;A++)I.lineTo(h+S((A+1)*g/4),p+S(A*y/3)),3!=A&&I.lineTo(h+S((A+1)*g/4),p+S((A+1)*y/3))}else I.moveTo(h,p),I.lineTo(c,f);I.lineTo(d,e),I.clip(),I.transform(u[0],u[2],u[1],u[3],c,f),I.translate(w[0]-o,w[3]-a),_?(n=_.canvas,I.scale(E,-E)):(i=(l=v[0]).extent,n=l.image,I.scale((0,x.getWidth)(i)/n.width,-(0,x.getHeight)(i)/n.height)),I.drawImage(n,0,0),I.restore()}}),_&&((0,O.releaseCanvas)(_),k.push(_.canvas)),u)&&(I.save(),I.globalCompositeOperation="source-over",I.strokeStyle="black",I.lineWidth=1,a.getTriangles().forEach(function(e,t,r){var e=e.target,n=(e[0][0]-C[0])/m,i=-(e[0][1]-C[1])/m,o=(e[1][0]-C[0])/m,a=-(e[1][1]-C[1])/m,s=(e[2][0]-C[0])/m,e=-(e[2][1]-C[1])/m;I.beginPath(),I.moveTo(o,a),I.lineTo(n,i),I.lineTo(s,e),I.closePath(),I.stroke()}),I.restore()),I.canvas;function S(e){return Math.round(e*r)/r}};var j,x=e("./extent.js"),O=e("./dom.js"),o=e("./proj.js"),P=e("./math.js"),k=r.canvasPool=[];function B(e,t,r,n,i){e.beginPath(),e.moveTo(0,0),e.lineTo(t,r),e.lineTo(n,i),e.closePath(),e.save(),e.clip(),e.fillRect(0,0,Math.max(t,n)+1,Math.max(r,i)),e.restore()}function T(e,t){return 2<Math.abs(e[4*t]-210)||2<Math.abs(e[4*t+3]-191.25)}function a(e,t,r,n){var i=(0,o.transform)(r,t,e),n=(0,o.getPointResolution)(t,n,r),r=t.getMetersPerUnit(),t=(void 0!==r&&(n*=r),e.getMetersPerUnit()),r=(void 0!==t&&(n/=t),e.getExtent());return r&&!(0,x.containsCoordinate)(r,i)||(t=(0,o.getPointResolution)(e,n,i)/n,isFinite(t)&&0<t&&(n/=t)),n}},{"./dom.js":130,"./extent.js":142,"./math.js":279,"./proj.js":283}],329:[function(e,t,r){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var p=e("./common.js"),R=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};t=u(t);if(t&&t.has(e))return t.get(e);var r,n={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in e){var o;"default"!==r&&{}.hasOwnProperty.call(e,r)&&((o=i?Object.getOwnPropertyDescriptor(e,r):null)&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=e[r])}return n.default=e,t&&t.set(e,n),n}(e("../DataTile.js")),o=n(e("../events/EventType.js")),D=n(e("../TileState.js")),d=n(e("./Triangulation.js")),L=e("../reproj.js"),g=e("../math.js"),Q=e("../dom.js"),y=e("../extent.js"),s=e("../events.js");function n(e){return e&&e.__esModule?e:{default:e}}function u(e){var t,r;return"function"!=typeof WeakMap?null:(t=new WeakMap,r=new WeakMap,(u=function(e){return e?r:t})(e))}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=a(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==a(e)?e:e+""}(n.key),n)}}function A(e,t){if(t&&("object"==a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");t=e;if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function m(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(m=function(){return!!e})()}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}e=function(){function h(s){var u;if(!(this instanceof h))throw new TypeError("Cannot call a class as a function");t=this,e=h,r=[{tileCoord:s.tileCoord,loader:function(){return Promise.resolve(new Uint8Array(4))},interpolate:s.interpolate,transition:s.transition}],e=v(e),(u=A(t,m()?Reflect.construct(e,r||[],v(t).constructor):e.apply(t,r))).pixelRatio_=s.pixelRatio,u.gutter_=s.gutter,u.reprojData_=null,u.reprojError_=null,u.reprojSize_=void 0,u.sourceTileGrid_=s.sourceTileGrid,u.targetTileGrid_=s.targetTileGrid,u.wrappedTileCoord_=s.wrappedTileCoord||s.tileCoord,u.sourceTiles_=[],u.sourcesListenerKeys_=null,u.sourceZ_=0;var e=s.sourceProj,t=e.getExtent(),r=s.sourceTileGrid.getExtent(),r=(u.clipExtent_=e.canWrapX()?r?(0,y.getIntersection)(t,r):t:r,u.targetTileGrid_.getTileCoordExtent(u.wrappedTileCoord_)),n=u.targetTileGrid_.getExtent(),i=u.sourceTileGrid_.getExtent(),n=n?(0,y.getIntersection)(r,n):r;if(0===(0,y.getArea)(n))return u.state=D.default.EMPTY,A(u);t&&(i=i?(0,y.getIntersection)(i,t):t);var r=u.targetTileGrid_.getResolution(u.wrappedTileCoord_[0]),o=s.targetProj,a=(0,L.calculateSourceExtentResolution)(e,o,n,r);if(!isFinite(a)||a<=0)return u.state=D.default.EMPTY,A(u);var l=void 0!==s.errorThreshold?s.errorThreshold:p.ERROR_THRESHOLD;if(u.triangulation_=new d.default(e,o,n,i,a*l,r),0===u.triangulation_.getTriangles().length)return u.state=D.default.EMPTY,A(u);u.sourceZ_=u.sourceTileGrid_.getZForResolution(a);var c,f,o=u.triangulation_.calculateSourceExtent();return i&&(e.canWrapX()?(o[1]=(0,g.clamp)(o[1],i[1],i[3]),o[3]=(0,g.clamp)(o[3],i[1],i[3])):o=(0,y.getIntersection)(o,i)),(0,y.getArea)(o)&&(f=c=0,e.canWrapX()&&(c=(0,y.getWidth)(t),f=Math.floor((o[0]-t[0])/c)),(0,y.wrapAndSliceX)(o.slice(),e,!0).forEach(function(e){for(var t=u.sourceTileGrid_.getTileRangeForExtentAndZ(e,u.sourceZ_),r=s.getTileFunction,n=t.minX;n<=t.maxX;n++)for(var i=t.minY;i<=t.maxY;i++){var o,a=r(u.sourceZ_,n,i,u.pixelRatio_);a&&(o=f*c,u.sourceTiles_.push({tile:a,offset:o}))}++f}),0!==u.sourceTiles_.length)||(u.state=D.default.EMPTY),u}var e,t=h,r=R.default;if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&l(t,r),t=h,(r=[{key:"getSize",value:function(){return this.reprojSize_}},{key:"getData",value:function(){return this.reprojData_}},{key:"getError",value:function(){return this.reprojError_}},{key:"reproject_",value:function(){var y=this,A=[];if(this.sourceTiles_.forEach(function(e){var t=e.tile;if(t&&t.getState()===D.default.LOADED){var r=t.getSize(),n=y.gutter_,i=(0,R.asArrayLike)(t.getData())||(0,R.toArray)((0,R.asImageLike)(t.getData())),o=[r[0]+2*n,r[1]+2*n],r=i instanceof Float32Array,n=o[0]*o[1],r=r?Float32Array:Uint8Array,a=new r(i.buffer),s=r.BYTES_PER_ELEMENT,i=s*a.length/n,u=a.byteLength/o[1],l=Math.floor(u/s/o[0]),n=n*l,c=a;if(a.length!==n)for(var c=new r(n),f=0,h=0,p=o[0]*l,d=0;d<o[1];++d){for(var g=0;g<p;++g)c[f++]=a[h+g];h+=u/s}n=y.sourceTileGrid_.getTileCoordExtent(t.tileCoord),t=(n[0]+=e.offset,n[2]+=e.offset,null==(l=y.clipExtent_)?void 0:l.slice());t&&(t[0]+=e.offset,t[2]+=e.offset),A.push({extent:n,clipExtent:t,data:new Uint8Array(c.buffer),dataType:r,bytesPerPixel:i,pixelSize:o})}}),(this.sourceTiles_.length=0)===A.length)this.state=D.default.ERROR;else{for(var e,t,r=this.wrappedTileCoord_[0],n=this.targetTileGrid_.getTileSize(r),i="number"==typeof n?n:n[0],o="number"==typeof n?n:n[1],a=this.targetTileGrid_.getResolution(r),s=this.sourceTileGrid_.getResolution(this.sourceZ_),u=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_),l=A[0].bytesPerPixel,c=Math.ceil(l/3)-1;0<=c;--c){for(var f=[],h=0,p=A.length;h<p;++h){for(var d=A[h],g=d.data,m=d.pixelSize,v=m[0],m=m[1],b=(0,Q.createCanvasContext2D)(v,m,L.canvasPool),v=b.createImageData(v,m),_=v.data,w=3*c,E=0,C=_.length;E<C;E+=4)_[E]=g[w],_[E+1]=g[w+1],_[E+2]=g[w+2],_[E+3]=255,w+=l;b.putImageData(v,0,0),f.push({extent:d.extent,clipExtent:d.clipExtent,image:b.canvas})}for(var I=(0,L.render)(i,o,this.pixelRatio_,s,this.sourceTileGrid_.getExtent(),a,u,this.triangulation_,f,this.gutter_,!1,!1,!1),S=0,j=f.length;S<j;++S){var x=f[S].image.getContext("2d");(0,Q.releaseCanvas)(x),L.canvasPool.push(x.canvas)}var O=I.getContext("2d"),P=O.getImageData(0,0,I.width,I.height);(0,Q.releaseCanvas)(O),L.canvasPool.push(I),e||(t=new Uint8Array(l*P.width*P.height),e=new A[0].dataType(t.buffer));for(var k=P.data,B=3*c,T=0,M=k.length;T<M;T+=4)255===k[T+3]?(t[B]=k[T],t[B+1]=k[T+1],t[B+2]=k[T+2]):(t[B]=0,t[B+1]=0,t[B+2]=0),B+=l}this.reprojData_=e,this.reprojSize_=[Math.round(i*this.pixelRatio_),Math.round(o*this.pixelRatio_)],this.state=D.default.LOADED}this.changed()}},{key:"load",value:function(){var n,i=this;this.state!==D.default.IDLE&&this.state!==D.default.ERROR||(this.state=D.default.LOADING,this.changed(),n=0,this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(function(e){var t,r=e.tile,e=r.getState();e!==D.default.IDLE&&e!==D.default.LOADING||(n++,t=(0,s.listen)(r,o.default.CHANGE,function(){var e=r.getState();e!=D.default.LOADED&&e!=D.default.ERROR&&e!=D.default.EMPTY||((0,s.unlistenByKey)(t),0==--n&&(this.unlistenSources_(),this.reproject_()))},i),i.sourcesListenerKeys_.push(t))}),0===n?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function(e){e=e.tile;e.getState()==D.default.IDLE&&e.load()}))}},{key:"unlistenSources_",value:function(){this.sourcesListenerKeys_.forEach(s.unlistenByKey),this.sourcesListenerKeys_=null}}])&&i(t.prototype,r),e&&i(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();r.default=e},{"../DataTile.js":80,"../TileState.js":104,"../dom.js":130,"../events.js":132,"../events/EventType.js":134,"../extent.js":142,"../math.js":279,"../reproj.js":328,"./Triangulation.js":332,"./common.js":333}],330:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var h=e("./common.js"),n=u(e("../events/EventType.js")),p=u(e("../ImageState.js")),o=u(e("../Image.js")),d=u(e("./Triangulation.js")),g=e("../reproj.js"),a=e("../resolution.js"),y=e("../extent.js"),s=e("../events.js");function u(e){return e&&e.__esModule?e:{default:e}}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function A(e,t,r){t=v(t);var n=e,t=c()?Reflect.construct(t,r||[],v(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(c=function(){return!!e})()}function m(){return(m="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=v(e)););return e}(e,t);if(n)return(n=Object.getOwnPropertyDescriptor(n,t)).get?n.get.call(arguments.length<3?e:r):n.value}).apply(null,arguments)}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t){return(b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}e=function(){function f(e,t,r,n,i,o,a){var s,u,l,c;if(this instanceof f)return(s=e.getExtent())&&e.canWrapX()&&((s=s.slice())[0]=-1/0,s[2]=1/0),(c=t.getExtent())&&t.canWrapX()&&((c=c.slice())[0]=-1/0,c[2]=1/0),c=c?(0,y.getIntersection)(r,c):r,u=(0,y.getCenter)(c),u=(0,g.calculateSourceResolution)(e,t,u,n),l=h.ERROR_THRESHOLD,c=(e=new d.default(e,t,c,s,u*l,n)).calculateSourceExtent(),o=(l=(0,y.isEmpty)(c)?null:o(c,u,i))?p.default.IDLE:p.default.EMPTY,(u=A(this,f,[r,n,c=l?l.getPixelRatio():1,o])).targetProj_=t,u.maxSourceExtent_=s,u.triangulation_=e,u.targetResolution_=n,u.targetExtent_=r,u.sourceImage_=l,u.sourcePixelRatio_=c,u.interpolate_=a,u.canvas_=null,u.sourceListenerKey_=null,u;throw new TypeError("Cannot call a class as a function")}var e,t=f,r=o.default;if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&b(t,r),t=f,(r=[{key:"disposeInternal",value:function(){this.state==p.default.LOADING&&this.unlistenSource_(),m(v(f.prototype),"disposeInternal",this).call(this)}},{key:"getImage",value:function(){return this.canvas_}},{key:"getProjection",value:function(){return this.targetProj_}},{key:"reproject_",value:function(){var e,t,r=this.sourceImage_.getState();r==p.default.LOADED&&(e=(0,y.getWidth)(this.targetExtent_)/this.targetResolution_,t=(0,y.getHeight)(this.targetExtent_)/this.targetResolution_,this.canvas_=(0,g.render)(e,t,this.sourcePixelRatio_,(0,a.fromResolutionLike)(this.sourceImage_.getResolution()),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0,void 0,this.interpolate_,!0)),this.state=r,this.changed()}},{key:"load",value:function(){var e;this.state==p.default.IDLE&&(this.state=p.default.LOADING,this.changed(),(e=this.sourceImage_.getState())==p.default.LOADED||e==p.default.ERROR?this.reproject_():(this.sourceListenerKey_=(0,s.listen)(this.sourceImage_,n.default.CHANGE,function(e){var t=this.sourceImage_.getState();t!=p.default.LOADED&&t!=p.default.ERROR||(this.unlistenSource_(),this.reproject_())},this),this.sourceImage_.load()))}},{key:"unlistenSource_",value:function(){(0,s.unlistenByKey)(this.sourceListenerKey_),this.sourceListenerKey_=null}}])&&l(t.prototype,r),e&&l(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();r.default=e},{"../Image.js":84,"../ImageState.js":86,"../events.js":132,"../events/EventType.js":134,"../extent.js":142,"../reproj.js":328,"../resolution.js":334,"./Triangulation.js":332,"./common.js":333}],331:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var m=e("./common.js"),o=u(e("../events/EventType.js")),n=u(e("../Tile.js")),v=u(e("../TileState.js")),b=u(e("./Triangulation.js")),_=e("../reproj.js"),w=e("../math.js"),E=e("../extent.js"),a=e("../events.js"),s=e("../dom.js");function u(e){return e&&e.__esModule?e:{default:e}}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function C(e,t){if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");t=e;if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function I(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(I=function(){return!!e})()}function c(){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=S(e)););return e}(e,t);if(n)return(n=Object.getOwnPropertyDescriptor(n,t)).get?n.get.call(arguments.length<3?e:r):n.value}).apply(null,arguments)}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}e=function(){function A(e,a,t,r,n,i,s,o,u,l,c,f){var h;if(!(this instanceof A))throw new TypeError("Cannot call a class as a function");d=this,p=A,f=[n,v.default.IDLE,f],p=S(p),(h=C(d,I()?Reflect.construct(p,f||[],S(d).constructor):p.apply(d,f))).renderEdges_=void 0!==c&&c,h.pixelRatio_=s,h.gutter_=o,h.canvas_=null,h.sourceTileGrid_=a,h.targetTileGrid_=r,h.wrappedTileCoord_=i||n,h.sourceTiles_=[],h.sourcesListenerKeys_=null,h.sourceZ_=0,h.clipExtent_=e.canWrapX()?e.getExtent():void 0;var p=r.getTileCoordExtent(h.wrappedTileCoord_),d=h.targetTileGrid_.getExtent(),f=h.sourceTileGrid_.getExtent(),c=d?(0,E.getIntersection)(p,d):p;if(0===(0,E.getArea)(c))return h.state=v.default.EMPTY,C(h);o=e.getExtent(),o&&(f=f?(0,E.getIntersection)(f,o):o),i=r.getResolution(h.wrappedTileCoord_[0]),n=(0,_.calculateSourceExtentResolution)(e,t,c,i);if(!isFinite(n)||n<=0)return h.state=v.default.EMPTY,C(h);d=void 0!==l?l:m.ERROR_THRESHOLD;if(h.triangulation_=new b.default(e,t,c,f,n*d,i),0===h.triangulation_.getTriangles().length)return h.state=v.default.EMPTY,C(h);h.sourceZ_=a.getZForResolution(n);var g,y,p=h.triangulation_.calculateSourceExtent();return f&&(e.canWrapX()?(p[1]=(0,w.clamp)(p[1],f[1],f[3]),p[3]=(0,w.clamp)(p[3],f[1],f[3])):p=(0,E.getIntersection)(p,f)),(0,E.getArea)(p)&&(y=g=0,e.canWrapX()&&(g=(0,E.getWidth)(o),y=Math.floor((p[0]-o[0])/g)),(0,E.wrapAndSliceX)(p.slice(),e,!0).forEach(function(e){for(var t=a.getTileRangeForExtentAndZ(e,h.sourceZ_),r=t.minX;r<=t.maxX;r++)for(var n=t.minY;n<=t.maxY;n++){var i,o=u(h.sourceZ_,r,n,s);o&&(i=y*g,h.sourceTiles_.push({tile:o,offset:i}))}++y}),0!==h.sourceTiles_.length)||(h.state=v.default.EMPTY),h}var e,t=A,r=n.default;if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&f(t,r),t=A,(r=[{key:"getImage",value:function(){return this.canvas_}},{key:"reproject_",value:function(){var e,t,r,n,i,o=this,a=[];this.sourceTiles_.forEach(function(e){var t,r,n=e.tile;n&&n.getState()==v.default.LOADED&&((t=o.sourceTileGrid_.getTileCoordExtent(n.tileCoord))[0]+=e.offset,t[2]+=e.offset,(r=null==(r=o.clipExtent_)?void 0:r.slice())&&(r[0]+=e.offset,r[2]+=e.offset),a.push({extent:t,clipExtent:r,image:n.getImage()}))}),(this.sourceTiles_.length=0)===a.length?this.state=v.default.ERROR:(r=this.wrappedTileCoord_[0],e="number"==typeof(t=this.targetTileGrid_.getTileSize(r))?t:t[0],t="number"==typeof t?t:t[1],r=this.targetTileGrid_.getResolution(r),n=this.sourceTileGrid_.getResolution(this.sourceZ_),i=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_),this.canvas_=(0,_.render)(e,t,this.pixelRatio_,n,this.sourceTileGrid_.getExtent(),r,i,this.triangulation_,a,this.gutter_,this.renderEdges_,this.interpolate),this.state=v.default.LOADED),this.changed()}},{key:"load",value:function(){var i,t=this;this.state==v.default.IDLE&&(this.state=v.default.LOADING,this.changed(),i=0,this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(function(e){var r,n=e.tile,e=n.getState();e!=v.default.IDLE&&e!=v.default.LOADING||(i++,r=(0,a.listen)(n,o.default.CHANGE,function(e){var t=n.getState();t!=v.default.LOADED&&t!=v.default.ERROR&&t!=v.default.EMPTY||((0,a.unlistenByKey)(r),0==--i&&(this.unlistenSources_(),this.reproject_()))},t),t.sourcesListenerKeys_.push(r))}),0===i?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function(e,t,r){e=e.tile;e.getState()==v.default.IDLE&&e.load()}))}},{key:"unlistenSources_",value:function(){this.sourcesListenerKeys_.forEach(a.unlistenByKey),this.sourcesListenerKeys_=null}},{key:"release",value:function(){this.canvas_&&((0,s.releaseCanvas)(this.canvas_.getContext("2d")),_.canvasPool.push(this.canvas_),this.canvas_=null),c(S(A.prototype),"release",this).call(this)}}])&&l(t.prototype,r),e&&l(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();r.default=e},{"../Tile.js":100,"../TileState.js":104,"../dom.js":130,"../events.js":132,"../events/EventType.js":134,"../extent.js":142,"../math.js":279,"../reproj.js":328,"./Triangulation.js":332,"./common.js":333}],332:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var g=e("../extent.js"),y=e("../proj.js"),A=e("../math.js");function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}e=function e(t,r,n,i,o,a){var s=this;if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.sourceProj_=t,this.targetProj_=r;var u,l={},c=(0,y.getTransform)(this.targetProj_,this.sourceProj_),t=(this.transformInv_=function(e){var t=e[0]+"/"+e[1];return l[t]||(l[t]=c(e)),l[t]},this.maxSourceExtent_=i,this.errorThresholdSquared_=o*o,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!i&&!!this.sourceProj_.getExtent()&&(0,g.getWidth)(i)>=(0,g.getWidth)(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?(0,g.getWidth)(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?(0,g.getWidth)(this.targetProj_.getExtent()):null,(0,g.getTopLeft)(n)),r=(0,g.getTopRight)(n),o=(0,g.getBottomRight)(n),i=(0,g.getBottomLeft)(n),f=this.transformInv_(t),h=this.transformInv_(r),p=this.transformInv_(o),d=this.transformInv_(i),n=10+(a?Math.max(0,Math.ceil(Math.log2((0,g.getArea)(n)/(a*a*256*256)))):0);this.addQuad_(t,r,o,i,f,h,p,d,n),this.wrapsXInSource_&&(u=1/0,this.triangles_.forEach(function(e,t,r){u=Math.min(u,e.source[0][0],e.source[1][0],e.source[2][0])}),this.triangles_.forEach(function(e){var t,r;Math.max(e.source[0][0],e.source[1][0],e.source[2][0])-u>s.sourceWorldWidth_/2&&((t=[[e.source[0][0],e.source[0][1]],[e.source[1][0],e.source[1][1]],[e.source[2][0],e.source[2][1]]])[0][0]-u>s.sourceWorldWidth_/2&&(t[0][0]-=s.sourceWorldWidth_),t[1][0]-u>s.sourceWorldWidth_/2&&(t[1][0]-=s.sourceWorldWidth_),t[2][0]-u>s.sourceWorldWidth_/2&&(t[2][0]-=s.sourceWorldWidth_),r=Math.min(t[0][0],t[1][0],t[2][0]),Math.max(t[0][0],t[1][0],t[2][0])-r<s.sourceWorldWidth_/2)&&(e.source=t)})),l={}},(a=[{key:"addTriangle_",value:function(e,t,r,n,i,o){this.triangles_.push({source:[n,i,o],target:[e,t,r]})}},{key:"addQuad_",value:function(e,t,r,n,i,o,a,s,u){var l=(0,g.boundingExtent)([i,o,a,s]),c=this.sourceWorldWidth_?(0,g.getWidth)(l)/this.sourceWorldWidth_:null,f=this.sourceWorldWidth_,h=this.sourceProj_.canWrapX()&&.5<c&&c<1,p=!1;if(!(!(p=0<u&&(this.targetProj_.isGlobal()&&this.targetWorldWidth_&&(d=(0,g.boundingExtent)([e,t,r,n]),p=.25<(0,g.getWidth)(d)/this.targetWorldWidth_||p),!h)&&this.sourceProj_.isGlobal()&&c?.25<c||p:p)&&this.maxSourceExtent_&&isFinite(l[0])&&isFinite(l[1])&&isFinite(l[2])&&isFinite(l[3]))||(0,g.intersects)(l,this.maxSourceExtent_)){var d=0;if(!(p||isFinite(i[0])&&isFinite(i[1])&&isFinite(o[0])&&isFinite(o[1])&&isFinite(a[0])&&isFinite(a[1])&&isFinite(s[0])&&isFinite(s[1])))if(0<u)p=!0;else if(1!=(d=(isFinite(i[0])&&isFinite(i[1])?0:8)+(isFinite(o[0])&&isFinite(o[1])?0:4)+(isFinite(a[0])&&isFinite(a[1])?0:2)+(isFinite(s[0])&&isFinite(s[1])?0:1))&&2!=d&&4!=d&&8!=d)return;if(0<u)if(p||(c=[(e[0]+r[0])/2,(e[1]+r[1])/2],l=this.transformInv_(c),p=(c=h?((0,A.modulo)(i[0],f)+(0,A.modulo)(a[0],f))/2-(0,A.modulo)(l[0],f):(i[0]+a[0])/2-l[0])*c+(f=(i[1]+a[1])/2-l[1])*f>this.errorThresholdSquared_),p)return void(Math.abs(e[0]-r[0])<=Math.abs(e[1]-r[1])?(c=[(t[0]+r[0])/2,(t[1]+r[1])/2],l=this.transformInv_(c),f=[(n[0]+e[0])/2,(n[1]+e[1])/2],p=this.transformInv_(f),this.addQuad_(e,t,c,f,i,o,l,p,u-1),this.addQuad_(f,c,r,n,p,l,a,s,u-1)):(f=[(e[0]+t[0])/2,(e[1]+t[1])/2],c=this.transformInv_(f),p=[(r[0]+n[0])/2,(r[1]+n[1])/2],l=this.transformInv_(p),this.addQuad_(e,f,p,n,i,c,l,s,u-1),this.addQuad_(f,t,r,p,c,o,a,l,u-1)));if(h){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}0==(11&d)&&this.addTriangle_(e,r,n,i,a,s),0==(14&d)&&this.addTriangle_(e,r,t,i,a,o),d&&(0==(13&d)&&this.addTriangle_(t,n,e,o,s,i),0==(7&d))&&this.addTriangle_(t,n,r,o,s,a)}}},{key:"calculateSourceExtent",value:function(){var n=(0,g.createEmpty)();return this.triangles_.forEach(function(e,t,r){e=e.source;(0,g.extendCoordinate)(n,e[0]),(0,g.extendCoordinate)(n,e[1]),(0,g.extendCoordinate)(n,e[2])}),n}},{key:"getTriangles",value:function(){return this.triangles_}}])&&n(e.prototype,a),o&&n(e,o),Object.defineProperty(e,"prototype",{writable:!1});var o,a=e;r.default=a},{"../extent.js":142,"../math.js":279,"../proj.js":283}],333:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ERROR_THRESHOLD=void 0;r.ERROR_THRESHOLD=.5},{}],334:[function(e,t,r){"use strict";function n(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){{var r;if(e)return"string"==typeof e?i(e,t):"Map"===(r="Object"===(r={}.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}Object.defineProperty(r,"__esModule",{value:!0}),r.fromResolutionLike=function(e){return Array.isArray(e)?Math.min.apply(Math,n(e)):e}},{}],335:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.createMinMaxResolution=function(i,o,a,s,u){return a=void 0===a||a,function(e,t,r,n){if(void 0!==e)return r=s?h(i,s,r,u):i,a&&n?p(e,r,o):(0,c.clamp)(e,o,r)}},r.createSnapToPower=function(i,o,a,s,u,l){return s=void 0===s||s,a=void 0!==a?a:0,function(e,t,r,n){if(void 0!==e)return r=u?h(o,u,r,l):o,n?s?p(e,r,a):(0,c.clamp)(e,a,r):(n=Math.ceil(Math.log(o/r)/Math.log(i)-1e-9),t=-t*(.5-1e-9)+.5,e=Math.min(r,e),e=Math.floor(Math.log(o/e)/Math.log(i)+t),t=Math.max(n,e),n=o/Math.pow(i,t),(0,c.clamp)(n,a,r))}},r.createSnapToResolutions=function(a,s,u,l){return s=void 0===s||s,function(e,t,r,n){var i,o;if(void 0!==e)return o=a[0],i=a[a.length-1],r=u?h(o,u,r,l):o,n?s?p(e,r,i):(0,c.clamp)(e,i,r):(o=Math.min(r,e),n=Math.floor((0,f.linearFindNearest)(a,o,t)),a[n]>r&&n<a.length-1?a[n+1]:a[n])}};var c=e("./math.js"),o=e("./extent.js"),f=e("./array.js");function h(e,t,r,n){var i=(0,o.getWidth)(t)/r[0],t=(0,o.getHeight)(t)/r[1];return n?Math.min(e,Math.max(i,t)):Math.min(e,Math.min(i,t))}function p(e,t,r){var n=Math.min(e,t);return n*=Math.log(1+50*Math.max(0,e/t-1))/50+1,r&&(n=Math.max(n,r),n/=Math.log(1+50*Math.max(0,r/e-1))/50+1),(0,c.clamp)(n,r/2,2*t)}},{"./array.js":110,"./extent.js":142,"./math.js":279}],336:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.createSnapToN=function(e){var r=2*Math.PI/e;return function(e,t){return t?e:void 0!==e?Math.floor(e/r+.5)*r:void 0}},r.createSnapToZero=function(e){var r=void 0===e?(0,n.toRadians)(5):e;return function(e,t){return!t&&void 0!==e&&Math.abs(e)<=r?0:e}},r.disable=function(e){if(void 0!==e)return 0},r.none=function(e){if(void 0!==e)return e};var n=e("./math.js")},{"./math.js":279}],337:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.buffer=function(e,t,r){return(r=void 0===r?[0,0]:r)[0]=e[0]+2*t,r[1]=e[1]+2*t,r},r.hasArea=function(e){return 0<e[0]&&0<e[1]},r.scale=function(e,t,r){return(r=void 0===r?[0,0]:r)[0]=e[0]*t+.5|0,r[1]=e[1]*t+.5|0,r},r.toSize=function(e,t){return Array.isArray(e)?e:(void 0===t?t=[e,e]:(t[0]=e,t[1]=e),t)}},{}],338:[function(e,D,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BingMaps",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(t,"CartoDB",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"Cluster",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"DataTile",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"GeoTIFF",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"Google",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"IIIF",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"Image",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(t,"ImageArcGISRest",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(t,"ImageCanvas",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(t,"ImageMapGuide",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(t,"ImageStatic",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(t,"ImageWMS",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(t,"OGCMapTile",{enumerable:!0,get:function(){return A.default}}),Object.defineProperty(t,"OGCVectorTile",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(t,"OSM",{enumerable:!0,get:function(){return v.default}}),Object.defineProperty(t,"Raster",{enumerable:!0,get:function(){return b.default}}),Object.defineProperty(t,"Source",{enumerable:!0,get:function(){return _.default}}),Object.defineProperty(t,"StadiaMaps",{enumerable:!0,get:function(){return w.default}}),Object.defineProperty(t,"Tile",{enumerable:!0,get:function(){return E.default}}),Object.defineProperty(t,"TileArcGISRest",{enumerable:!0,get:function(){return C.default}}),Object.defineProperty(t,"TileDebug",{enumerable:!0,get:function(){return I.default}}),Object.defineProperty(t,"TileImage",{enumerable:!0,get:function(){return S.default}}),Object.defineProperty(t,"TileJSON",{enumerable:!0,get:function(){return j.default}}),Object.defineProperty(t,"TileWMS",{enumerable:!0,get:function(){return x.default}}),Object.defineProperty(t,"UTFGrid",{enumerable:!0,get:function(){return P.default}}),Object.defineProperty(t,"UrlTile",{enumerable:!0,get:function(){return O.default}}),Object.defineProperty(t,"Vector",{enumerable:!0,get:function(){return k.default}}),Object.defineProperty(t,"VectorTile",{enumerable:!0,get:function(){return B.default}}),Object.defineProperty(t,"WMTS",{enumerable:!0,get:function(){return T.default}}),Object.defineProperty(t,"XYZ",{enumerable:!0,get:function(){return M.default}}),Object.defineProperty(t,"Zoomify",{enumerable:!0,get:function(){return L.default}}),Object.defineProperty(t,"createArcGISRestLoader",{enumerable:!0,get:function(){return F.createLoader}}),Object.defineProperty(t,"createMapGuideLoader",{enumerable:!0,get:function(){return G.createLoader}}),Object.defineProperty(t,"createStaticLoader",{enumerable:!0,get:function(){return N.createLoader}}),Object.defineProperty(t,"createWMSLoader",{enumerable:!0,get:function(){return Q.createLoader}}),t.sourcesFromTileGrid=function(n,i){var o=new r.default(32),a=n.getExtent();return function(e,t){o.expireCache(),a&&(e=(0,s.getIntersection)(a,e));var t=n.getZForResolution(t),r=[];return n.forEachTileCoord(e,t,function(e){var t=e.toString();o.containsKey(t)||(e=i(e),o.set(t,e)),r.push(o.get(t))}),r}};var r=R(e("./structs/LRUCache.js")),s=e("./extent.js"),n=R(e("./source/BingMaps.js")),i=R(e("./source/CartoDB.js")),o=R(e("./source/Cluster.js")),a=R(e("./source/DataTile.js")),u=R(e("./source/GeoTIFF.js")),l=R(e("./source/Google.js")),c=R(e("./source/IIIF.js")),f=R(e("./source/Image.js")),h=R(e("./source/ImageArcGISRest.js")),p=R(e("./source/ImageCanvas.js")),d=R(e("./source/ImageMapGuide.js")),g=R(e("./source/ImageStatic.js")),y=R(e("./source/ImageWMS.js")),A=R(e("./source/OGCMapTile.js")),m=R(e("./source/OGCVectorTile.js")),v=R(e("./source/OSM.js")),b=R(e("./source/Raster.js")),_=R(e("./source/Source.js")),w=R(e("./source/StadiaMaps.js")),E=R(e("./source/Tile.js")),C=R(e("./source/TileArcGISRest.js")),I=R(e("./source/TileDebug.js")),S=R(e("./source/TileImage.js")),j=R(e("./source/TileJSON.js")),x=R(e("./source/TileWMS.js")),O=R(e("./source/UrlTile.js")),P=R(e("./source/UTFGrid.js")),k=R(e("./source/Vector.js")),B=R(e("./source/VectorTile.js")),T=R(e("./source/WMTS.js")),M=R(e("./source/XYZ.js")),L=R(e("./source/Zoomify.js")),Q=e("./source/wms.js"),F=e("./source/arcgisRest.js"),N=e("./source/static.js"),G=e("./source/mapguide.js");function R(e){return e&&e.__esModule?e:{default:e}}},{"./extent.js":142,"./source/BingMaps.js":339,"./source/CartoDB.js":340,"./source/Cluster.js":341,"./source/DataTile.js":342,"./source/GeoTIFF.js":343,"./source/Google.js":344,"./source/IIIF.js":345,"./source/Image.js":346,"./source/ImageArcGISRest.js":347,"./source/ImageCanvas.js":348,"./source/ImageMapGuide.js":349,"./source/ImageStatic.js":350,"./source/ImageWMS.js":351,"./source/OGCMapTile.js":352,"./source/OGCVectorTile.js":353,"./source/OSM.js":354,"./source/Raster.js":355,"./source/Source.js":356,"./source/StadiaMaps.js":357,"./source/Tile.js":358,"./source/TileArcGISRest.js":359,"./source/TileDebug.js":360,"./source/TileImage.js":362,"./source/TileJSON.js":363,"./source/TileWMS.js":364,"./source/UTFGrid.js":365,"./source/UrlTile.js":366,"./source/Vector.js":367,"./source/VectorTile.js":369,"./source/WMTS.js":370,"./source/XYZ.js":371,"./source/Zoomify.js":372,"./source/arcgisRest.js":373,"./source/mapguide.js":375,"./source/static.js":377,"./source/wms.js":378,"./structs/LRUCache.js":381}],339:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,r.quadKey=y;var o=(n=e("./TileImage.js"))&&n.__esModule?n:{default:n},c=e("../extent.js"),f=e("../tileurlfunction.js"),h=e("../tilecoord.js"),p=e("../tilegrid.js"),d=e("../proj.js");function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function s(e,t,r){t=l(t);var n=e,t=u()?Reflect.construct(t,r||[],l(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(u=function(){return!!e})()}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){return(g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function y(e){for(var t,r=e[0],n=new Array(r),i=1<<r-1,o=0;o<r;++o)t=48,e[1]&i&&(t+=1),e[2]&i&&(t+=2),n[o]=String.fromCharCode(t),i>>=1;return n.join("")}var n=function(){function n(e){var t,r;if(this instanceof n)return r=void 0!==e.hidpi&&e.hidpi,(t=s(this,n,[{cacheSize:e.cacheSize,crossOrigin:"anonymous",interpolate:e.interpolate,opaque:!0,projection:(0,d.get)("EPSG:3857"),reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:"loading",tileLoadFunction:e.tileLoadFunction,tilePixelRatio:r?2:1,wrapX:void 0===e.wrapX||e.wrapX,transition:e.transition,zDirection:e.zDirection}])).hidpi_=r,t.culture_=void 0!==e.culture?e.culture:"en-us",t.maxZoom_=void 0!==e.maxZoom?e.maxZoom:-1,t.apiKey_=e.key,t.imagerySet_=e.imagerySet,t.placeholderTiles_=e.placeholderTiles,r="https://dev.virtualearth.net/REST/v1/Imagery/Metadata/"+t.imagerySet_+"?uriScheme=https&include=ImageryProviders&key="+t.apiKey_+"&c="+t.culture_,fetch(r).then(function(e){return e.json()}).then(function(e){return t.handleImageryMetadataResponse(e)}),t;throw new TypeError("Cannot call a class as a function")}var e,t=n,r=o.default;if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&g(t,r),t=n,(r=[{key:"getApiKey",value:function(){return this.apiKey_}},{key:"getImagerySet",value:function(){return this.imagerySet_}},{key:"handleImageryMetadataResponse",value:function(e){var n,t,r,a,s,u,l,i=this;200==e.statusCode&&"OK"==e.statusDescription&&"ValidCredentials"==e.authenticationResultCode&&1==e.resourceSets.length&&1==e.resourceSets[0].resources.length?(n=e.resourceSets[0].resources[0],e=-1==this.maxZoom_?n.zoomMax:this.maxZoom_,r=this.getProjection(),r=(0,p.extentFromProjection)(r),t=this.hidpi_?2:1,t=n.imageWidth==n.imageHeight?n.imageWidth/t:[n.imageWidth/t,n.imageHeight/t],r=(0,p.createXYZ)({extent:r,minZoom:n.zoomMin,maxZoom:e,tileSize:t}),this.tileGrid=r,a=this.culture_,s=this.hidpi_,u=this.placeholderTiles_,this.tileUrlFunction=(0,f.createFromTileUrlFunctions)(n.imageUrlSubdomains.map(function(e){var i=[0,0,0],o=n.imageUrl.replace("{subdomain}",e).replace("{culture}",a);return function(e,t,r){var n;if(e)return(0,h.createOrUpdate)(e[0],e[1],e[2],i),n=(e=new URL(o.replace("{quadkey}",y(i)))).searchParams,s&&(n.set("dpi","d1"),n.set("device","mobile")),!0===u?n.delete("n"):!1===u&&n.set("n","z"),e.toString()}})),n.imageryProviders&&(l=(0,d.getTransformFromProjections)((0,d.get)("EPSG:4326"),this.getProjection()),this.setAttributions(function(a){var s=[],e=a.viewState,t=i.getTileGrid(),r=t.getZForResolution(e.resolution,i.zDirection),u=t.getTileCoordForCoordAndZ(e.center,r)[0];return n.imageryProviders.map(function(e){for(var t=!1,r=e.coverageAreas,n=0,i=r.length;n<i;++n){var o=r[n];if(u>=o.zoomMin&&u<=o.zoomMax){o=o.bbox,o=[o[1],o[0],o[3],o[2]],o=(0,c.applyTransform)(o,l);if((0,c.intersects)(o,a.extent)){t=!0;break}}}t&&s.push(e.attribution)}),s.push('<a class="ol-attribution-bing-tos" href="https://www.microsoft.com/maps/product/terms.html" target="_blank">Terms of Use</a>'),s})),this.setState("ready")):this.setState("error")}}])&&a(t.prototype,r),e&&a(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();r.default=n},{"../extent.js":142,"../proj.js":283,"../tilecoord.js":396,"../tilegrid.js":397,"../tileurlfunction.js":401,"./TileImage.js":362}],340:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=(e=e("./XYZ.js"))&&e.__esModule?e:{default:e};function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function s(e,t,r){t=l(t);var n=e,t=u()?Reflect.construct(t,r||[],l(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(u=function(){return!!e})()}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}e=function(){function r(e){var t;if(this instanceof r)return(t=s(this,r,[{attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,maxZoom:void 0!==e.maxZoom?e.maxZoom:18,minZoom:e.minZoom,projection:e.projection,transition:e.transition,wrapX:e.wrapX,zDirection:e.zDirection}])).account_=e.account,t.mapId_=e.map||"",t.config_=e.config||{},t.templateCache_={},t.initializeMap_(),t;throw new TypeError("Cannot call a class as a function")}var e,t=r,n=o.default;if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&c(t,n),t=r,(n=[{key:"getConfig",value:function(){return this.config_}},{key:"updateConfig",value:function(e){Object.assign(this.config_,e),this.initializeMap_()}},{key:"setConfig",value:function(e){this.config_=e||{},this.initializeMap_()}},{key:"initializeMap_",value:function(){var e,t,r=JSON.stringify(this.config_);this.templateCache_[r]?this.applyTemplate_(this.templateCache_[r]):(e="https://"+this.account_+".carto.com/api/v1/map",this.mapId_&&(e+="/named/"+this.mapId_),(t=new XMLHttpRequest).addEventListener("load",this.handleInitResponse_.bind(this,r)),t.addEventListener("error",this.handleInitError_.bind(this)),t.open("POST",e),t.setRequestHeader("Content-type","application/json"),t.send(JSON.stringify(this.config_)))}},{key:"handleInitResponse_",value:function(e,t){var r,t=t.target;if(!t.status||200<=t.status&&t.status<300){try{r=JSON.parse(t.responseText)}catch(e){return void this.setState("error")}this.applyTemplate_(r),this.templateCache_[e]=r,this.setState("ready")}else this.setState("error")}},{key:"handleInitError_",value:function(e){this.setState("error")}},{key:"applyTemplate_",value:function(e){e="https://"+e.cdn_url.https+"/"+this.account_+"/api/v1/map/"+e.layergroupid+"/{z}/{x}/{y}.png";this.setUrl(e)}}])&&a(t.prototype,n),e&&a(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();r.default=e},{"./XYZ.js":371}],341:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("../events/EventType.js")),a=n(e("../Feature.js")),s=n(e("../geom/Point.js")),u=n(e("./Vector.js")),l=e("../coordinate.js"),c=e("../asserts.js"),f=e("../extent.js"),h=e("../util.js");function n(e){return e&&e.__esModule?e:{default:e}}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function d(e,t,r){t=A(t);var n=e,t=g()?Reflect.construct(t,r||[],A(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(g=function(){return!!e})()}function y(){return(y="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=A(e)););return e}(e,t);if(n)return(n=Object.getOwnPropertyDescriptor(n,t)).get?n.get.call(arguments.length<3?e:r):n.value}).apply(null,arguments)}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}e=function(){function r(e){var t;if(this instanceof r)return(t=d(this,r,[{attributions:(e=e||{}).attributions,wrapX:e.wrapX}])).resolution=void 0,t.distance=void 0!==e.distance?e.distance:20,t.minDistance=e.minDistance||0,t.interpolationRatio=0,t.features=[],t.geometryFunction=e.geometryFunction||function(e){e=e.getGeometry();return(0,c.assert)(!e||"Point"===e.getType(),"The default `geometryFunction` can only handle `Point` or null geometries"),e},t.createCustomCluster_=e.createCluster,t.source=null,t.boundRefresh_=t.refresh.bind(t),t.updateDistance(t.distance,t.minDistance),t.setSource(e.source||null),t;throw new TypeError("Cannot call a class as a function")}var e,t=r,n=u.default;if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&m(t,n),t=r,(n=[{key:"clear",value:function(e){this.features.length=0,y(A(r.prototype),"clear",this).call(this,e)}},{key:"getDistance",value:function(){return this.distance}},{key:"getSource",value:function(){return this.source}},{key:"loadFeatures",value:function(e,t,r){var n;null!=(n=this.source)&&n.loadFeatures(e,t,r),t!==this.resolution&&(this.resolution=t,this.refresh())}},{key:"setDistance",value:function(e){this.updateDistance(e,this.minDistance)}},{key:"setMinDistance",value:function(e){this.updateDistance(this.distance,e)}},{key:"getMinDistance",value:function(){return this.minDistance}},{key:"setSource",value:function(e){this.source&&this.source.removeEventListener(o.default.CHANGE,this.boundRefresh_),(this.source=e)&&e.addEventListener(o.default.CHANGE,this.boundRefresh_),this.refresh()}},{key:"refresh",value:function(){this.clear(),this.cluster(),this.addFeatures(this.features)}},{key:"updateDistance",value:function(e,t){var r=0===e?0:Math.min(t,e)/e,n=e!==this.distance||this.interpolationRatio!==r;this.distance=e,this.minDistance=t,this.interpolationRatio=r,n&&this.refresh()}},{key:"cluster",value:function(){if(void 0!==this.resolution&&this.source)for(var e=(0,f.createEmpty)(),t=this.distance*this.resolution,r=this.source.getFeatures(),n={},i=0,o=r.length;i<o;i++){var a=r[i];(0,h.getUid)(a)in n||(a=this.geometryFunction(a))&&(a=a.getCoordinates(),(0,f.createOrUpdateFromCoordinate)(a,e),(0,f.buffer)(e,t,e),a=this.source.getFeaturesInExtent(e).filter(function(e){e=(0,h.getUid)(e);return!(e in n||(n[e]=!0,0))}),this.features.push(this.createCluster(a,e)))}}},{key:"createCluster",value:function(e,t){for(var r=[0,0],n=e.length-1;0<=n;--n){var i=this.geometryFunction(e[n]);i?(0,l.add)(r,i.getCoordinates()):e.splice(n,1)}(0,l.scale)(r,1/e.length);var t=(0,f.getCenter)(t),o=this.interpolationRatio,t=new s.default([r[0]*(1-o)+t[0]*o,r[1]*(1-o)+t[1]*o]);return this.createCustomCluster_?this.createCustomCluster_(t,e):new a.default({geometry:t,features:e})}}])&&p(t.prototype,n),e&&p(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();r.default=e},{"../Feature.js":82,"../asserts.js":111,"../coordinate.js":128,"../events/EventType.js":134,"../extent.js":142,"../geom/Point.js":210,"../util.js":404,"./Vector.js":367}],342:[function(e,t,r){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=n(e("../DataTile.js")),u=n(e("../events/EventType.js")),c=n(e("../reproj/DataTile.js")),i=n(e("../TileCache.js")),o=n(e("./TileEventType.js")),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};t=m(t);if(t&&t.has(e))return t.get(e);var r,n={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in e){var o;"default"!==r&&{}.hasOwnProperty.call(e,r)&&((o=i?Object.getOwnPropertyDescriptor(e,r):null)&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=e[r])}return n.default=e,t&&t.set(e,n),n}(e("./Tile.js")),f=n(e("../TileState.js")),h=e("../tilegrid.js"),p=e("../proj.js"),d=e("../tilecoord.js"),g=e("../util.js"),y=e("../functions.js"),A=e("../size.js");function m(e){var t,r;return"function"!=typeof WeakMap?null:(t=new WeakMap,r=new WeakMap,(m=function(e){return e?r:t})(e))}function n(e){return e&&e.__esModule?e:{default:e}}function v(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=a(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==a(e)?e:e+""}(n.key),n)}}function b(e,t,r){t=E(t);var n=e,t=_()?Reflect.construct(t,r||[],E(e).constructor):t.apply(e,r);if(t&&("object"==a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(_=function(){return!!e})()}function w(){return(w="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=E(e)););return e}(e,t);if(n)return(n=Object.getOwnPropertyDescriptor(n,t)).get?n.get.call(arguments.length<3?e:r):n.value}).apply(null,arguments)}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function C(e,t){return(C=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}e=function(){function n(e){var t,r;if(this instanceof n)return t=void 0===e.projection?"EPSG:3857":e.projection,void 0===(r=e.tileGrid)&&t&&(r=(0,h.createXYZ)({extent:(0,h.extentFromProjection)(t),maxResolution:e.maxResolution,maxZoom:e.maxZoom,minZoom:e.minZoom,tileSize:e.tileSize})),(t=b(this,n,[{cacheSize:.1,attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:t,tileGrid:r,opaque:e.opaque,state:e.state,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate}])).gutter_=void 0!==e.gutter?e.gutter:0,t.tileSize_=e.tileSize?(0,A.toSize)(e.tileSize):null,t.tileSizes_=null,t.tileLoadingKeys_={},t.loader_=e.loader,t.handleTileChange_=t.handleTileChange_.bind(t),t.bandCount=void 0===e.bandCount?4:e.bandCount,t.tileGridForProjection_={},t.tileCacheForProjection_={},t;throw new TypeError("Cannot call a class as a function")}var e,t=n,r=l.default;if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&C(t,r),t=n,(r=[{key:"setTileSizes",value:function(e){this.tileSizes_=e}},{key:"getTileSize",value:function(e){var t;return this.tileSizes_?this.tileSizes_[e]:this.tileSize_||((t=this.getTileGrid())?(0,A.toSize)(t.getTileSize(e)):[256,256])}},{key:"getGutterForProjection",value:function(e){var t=this.getProjection();return!t||(0,p.equivalent)(t,e)?this.gutter_:0}},{key:"setLoader",value:function(e){this.loader_=e}},{key:"getReprojTile_",value:function(e,t,r,n,i){var o=this,a=this.getTileCacheForProjection(n),s=(0,d.getKeyZXY)(e,t,r);if(a.containsKey(s)){a=a.get(s);if(a&&a.key==this.getKey())return a}var u=this.getTileGrid(),s=Math.max.apply(null,u.getResolutions().map(function(e,t){var r=(0,A.toSize)(u.getTileSize(t)),t=o.getTileSize(t);return Math.max(t[0]/r[0],t[1]/r[1])})),a=this.getTileGridForProjection(i),l=this.getTileGridForProjection(n),e=[e,t,r],t=this.getTileCoordForTileUrlFunction(e,n),r=Object.assign({sourceProj:i,sourceTileGrid:a,targetProj:n,targetTileGrid:l,tileCoord:e,wrappedTileCoord:t,pixelRatio:s,gutter:this.getGutterForProjection(i),getTileFunction:function(e,t,r,n){return o.getTile(e,t,r,n,i)}},this.tileOptions),a=new c.default(r);return a.key=this.getKey(),a}},{key:"getTile",value:function(e,t,r,n,i){var o,a=this.getProjection();return a&&i&&!(0,p.equivalent)(a,i)?this.getReprojTile_(e,t,r,i,a):(i=this.getTileSize(e),a=(0,d.getKeyZXY)(e,t,r),this.tileCache.containsKey(a)?this.tileCache.get(a):(o=this.loader_,i=Object.assign({tileCoord:[e,t,r],loader:function(){return(0,y.toPromise)(function(){return o(e,t,r)})},size:i},this.tileOptions),(i=new s.default(i)).key=this.getKey(),i.addEventListener(u.default.CHANGE,this.handleTileChange_),this.tileCache.set(a,i),i))}},{key:"handleTileChange_",value:function(e){var t,e=e.target,r=(0,g.getUid)(e),n=e.getState();n==f.default.LOADING?(this.tileLoadingKeys_[r]=!0,t=o.default.TILELOADSTART):r in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[r],t=n==f.default.ERROR?o.default.TILELOADERROR:n==f.default.LOADED?o.default.TILELOADEND:void 0),t&&this.dispatchEvent(new l.TileSourceEvent(t,e))}},{key:"getTileGridForProjection",value:function(e){var t=this.getProjection();return!this.tileGrid||t&&!(0,p.equivalent)(t,e)?((t=(0,g.getUid)(e))in this.tileGridForProjection_||(this.tileGridForProjection_[t]=(0,h.getForProjection)(e)),this.tileGridForProjection_[t]):this.tileGrid}},{key:"setTileGridForProjection",value:function(e,t){var e=(0,p.get)(e);!e||(e=(0,g.getUid)(e))in this.tileGridForProjection_||(this.tileGridForProjection_[e]=t)}},{key:"getTileCacheForProjection",value:function(e){var t=this.getProjection();return!t||(0,p.equivalent)(t,e)?this.tileCache:((t=(0,g.getUid)(e))in this.tileCacheForProjection_||(this.tileCacheForProjection_[t]=new i.default(.1)),this.tileCacheForProjection_[t])}},{key:"expireCache",value:function(e,t){var r,n=this.getTileCacheForProjection(e);for(r in this.tileCache.expireCache(this.tileCache==n?t:{}),this.tileCacheForProjection_){var i=this.tileCacheForProjection_[r];i.expireCache(i==n?t:{})}}},{key:"clear",value:function(){for(var e in w(E(n.prototype),"clear",this).call(this),this.tileCacheForProjection_)this.tileCacheForProjection_[e].clear()}}])&&v(t.prototype,r),e&&v(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();r.default=e},{"../DataTile.js":80,"../TileCache.js":101,"../TileState.js":104,"../events/EventType.js":134,"../functions.js":200,"../proj.js":283,"../reproj/DataTile.js":329,"../size.js":337,"../tilecoord.js":396,"../tilegrid.js":397,"../util.js":404,"./Tile.js":358,"./TileEventType.js":361}],343:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=o(e("./DataTile.js")),h=o(e("../tilegrid/TileGrid.js")),y=e("geotiff"),p=e("../proj.js"),x=e("../math.js"),j=e("../extent.js"),A=e("../console.js"),s=e("../proj/Units.js");function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function l(e,t,r){t=c(t);var n=e,t=u()?Reflect.construct(t,r||[],c(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(u=function(){return!!e})()}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var m,O="STATISTICS_MAXIMUM",P="STATISTICS_MINIMUM";function d(n){return n.getImageCount().then(function(e){for(var t=new Array(e),r=0;r<e;++r)t[r]=n.getImage(r);return Promise.all(t)})}function k(e,t,r,n,i){if(Array.isArray(e)){var o,a=e.length;if(!Array.isArray(t)||a!=t.length)throw i(o=new Error(n)),o;for(var s=0;s<a;++s)k(e[s],t[s],r,n,i)}else if(Math.abs(e-t)>r*e)throw new Error(n)}e=function(){function u(e){var t;if(!(this instanceof u))throw new TypeError("Cannot call a class as a function");(t=l(this,u,[{state:"loading",tileGrid:null,projection:e.projection||null,opaque:e.opaque,transition:e.transition,interpolate:!1!==e.interpolate,wrapX:e.wrapX}])).sourceInfo_=e.sources;var r=t.sourceInfo_.length;t.sourceOptions_=e.sourceOptions,t.sourceImagery_=new Array(r),t.sourceMasks_=new Array(r),t.resolutionFactors_=new Array(r),t.samplesPerPixel_,t.nodataValues_,t.metadata_,t.normalize_=!1!==e.normalize,t.addAlpha_=!1,t.error_=null,t.convertToRGB_=e.convertToRGB||!1,t.setKey(t.sourceInfo_.map(function(e){return e.url}).join(","));for(var n,i,o=t,a=new Array(r),s=0;s<r;++s)a[s]=(n=t.sourceInfo_[s],i=t.sourceOptions_,(n.blob?(0,y.fromBlob)(n.blob):n.overviews?(0,y.fromUrls)(n.url,n.overviews,i):(0,y.fromUrl)(n.url,i)).then(d));return Promise.all(a).then(function(e){o.configure_(e)}).catch(function(e){(0,A.error)(e),o.error_=e,o.setState("error")}),t}var e,t=u,r=n.default;if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&f(t,r),t=u,(r=[{key:"getError",value:function(){return this.error_}},{key:"determineProjection",value:function(e){for(var t,r,n,i=e[0],o=i.length-1;0<=o;--o){a=i[o],n=r=t=void 0;var a=(a=a.geoKeys)?a.ProjectedCSTypeGeoKey&&32767!==a.ProjectedCSTypeGeoKey?(t="EPSG:"+a.ProjectedCSTypeGeoKey,(n=(0,p.get)(t))||(r=(0,s.fromCode)(a.ProjLinearUnitsGeoKey))&&(n=new p.Projection({code:t,units:r})),n):a.GeographicTypeGeoKey&&32767!==a.GeographicTypeGeoKey?(t="EPSG:"+a.GeographicTypeGeoKey,(r=(0,p.get)(t))||(n=(0,s.fromCode)(a.GeogAngularUnitsGeoKey))&&(r=new p.Projection({code:t,units:n})),r):null:null;if(a){this.projection=a;break}}}},{key:"configure_",value:function(g){for(var y,A,m,v,b,_=this,w=new Array(g.length),E=new Array(g.length),C=new Array(g.length),I=0,e=g.length,S=0;S<e;++S)!function(){var t=[],r=[];g[S].forEach(function(e){(4==(4&(e.fileDirectory.NewSubfileType||0))?r:t).push(e)});var e=t.length;if(0<r.length&&r.length!==e)throw new Error("Expected one mask per image found ".concat(r.length," masks and ").concat(e," images"));var n=new Array(e),i=new Array(e),o=new Array(e);E[S]=new Array(e),C[S]=new Array(e);for(var a,s,u,l=0;l<e;++l){var c=t[l],f=c.getGDALNoData(),f=(C[S][l]=c.getGDALMetadata(0),E[S][l]=f,_.sourceInfo_[S].bands),f=(w[S]=f?f.length:c.getSamplesPerPixel(),e-(l+1)),h=h||function(t){try{return t.getBoundingBox()}catch(e){return[0,0,t.getWidth(),t.getHeight()]}}(c),p=p||function(t){try{return t.getOrigin().slice(0,2)}catch(e){return[0,t.getHeight()]}}(c),d=function(t,r){try{return t.getResolution(r)}catch(e){return[r.getWidth()/t.getWidth(),r.getHeight()/t.getHeight()]}}(c,t[0]),c=(o[f]=d[0],[c.getTileWidth(),c.getTileHeight()]),d=(c[0]!==c[1]&&c[1]<256&&(c[0]=256,c[1]=256),n[f]=c,d[0]/Math.abs(d[1]));i[f]=[c[0],c[1]/d]}y?(0,j.getIntersection)(y,h,y):y=h,A?(s="Origin mismatch for source ".concat(S,", got [").concat(p,"] but expected [").concat(A,"]"),k(A,p,0,s,_.viewRejector)):A=p,b?(b.length-I>o.length&&(I=b.length-o.length),a=b[b.length-1]/o[o.length-1],_.resolutionFactors_[S]=a,s=o.map(function(e){return e*a}),u="Resolution mismatch for source ".concat(S,", got [").concat(s,"] but expected [").concat(b,"]"),k(b.slice(I,b.length),s,.02,u,_.viewRejector)):(b=o,_.resolutionFactors_[S]=1),m?k(m.slice(I,m.length),i,.01,"Tile size mismatch for source ".concat(S),_.viewRejector):m=i,v?k(v.slice(I,v.length),n,0,"Tile size mismatch for source ".concat(S),_.viewRejector):v=n,_.sourceImagery_[S]=t.reverse(),_.sourceMasks_[S]=r.reverse()}();for(var t=0,r=this.sourceImagery_.length;t<r;++t)for(var n=this.sourceImagery_[t];n.length<b.length;)n.unshift(void 0);this.getProjection()||this.determineProjection(g),this.samplesPerPixel_=w,this.nodataValues_=E,this.metadata_=C;e:for(var i=0;i<e;++i){if(void 0!==this.sourceInfo_[i].nodata){this.addAlpha_=!0;break}if(this.sourceMasks_[i].length){this.addAlpha_=!0;break}var o=E[i],a=this.sourceInfo_[i].bands;if(a){for(var s=0;s<a.length;++s)if(null!==o[a[s]-1]){this.addAlpha_=!0;break e}}else for(var u=0;u<o.length;++u)if(null!==o[u]){this.addAlpha_=!0;break e}}for(var l=this.addAlpha_?1:0,c=0;c<e;++c)l+=w[c];this.bandCount=l;var f=new h.default({extent:y,minZoom:I,origin:A,resolutions:b,tileSizes:m});this.tileGrid=f,this.setTileSizes(v),this.setLoader(this.loadTile_.bind(this)),this.setState("ready"),2===b.length?b=[b[0],b[1],b[1]/2]:1===b.length&&(b=[2*b[0],b[0],b[0]/2]),this.viewResolver({showFullExtent:!0,projection:this.projection,resolutions:b,center:(0,p.toUserCoordinate)((0,j.getCenter)(y),this.projection),extent:(0,p.toUserExtent)(y,this.projection),zoom:1})}},{key:"loadTile_",value:function(a,s,u){for(var l=this,c=this.getTileSize(a),f=this.sourceImagery_.length,h=new Array(2*f),p=this.nodataValues_,d=this.sourceInfo_,g=m=m||new y.Pool,e=function(t){var e=d[t],r=l.resolutionFactors_[t],r=[Math.round(s*(c[0]*r)),Math.round(u*(c[1]*r)),Math.round((s+1)*(c[0]*r)),Math.round((u+1)*(c[1]*r))],n=l.sourceImagery_[t][a],i=(e.bands&&(i=e.bands.map(function(e){return e-1})),e="nodata"in e&&null!==e.nodata?e.nodata:i?i.map(function(e){return p[t][e]}):p[t],{window:r,width:c[0],height:c[1],samples:i,fillValue:e,pool:g,interleave:!1}),e=(e=l.convertToRGB_,o=n,e&&(!0===e||(3===o.getSamplesPerPixel()?(e=o.fileDirectory.PhotometricInterpretation)===(o=y.globals.photometricInterpretations).CMYK||e===o.YCbCr||e===o.CIELab||e===o.ICCLab:void 0))?h[t]=n.readRGB(i):h[t]=n.readRasters(i),f+t),o=l.sourceMasks_[t][a];if(!o)return h[e]=Promise.resolve(null),1;h[e]=o.readRasters({window:r,width:c[0],height:c[1],samples:[0],pool:g,interleave:!1})},t=0;t<f;++t)e(t);return Promise.all(h).then(this.composeTile_.bind(this,c)).catch(function(e){throw(0,A.error)(e),e})}},{key:"composeTile_",value:function(e,t){for(var r,n=this.metadata_,i=this.sourceInfo_,o=this.sourceImagery_.length,a=this.bandCount,s=this.samplesPerPixel_,u=this.nodataValues_,l=this.normalize_,c=this.addAlpha_,f=e[0]*e[1],e=f*a,h=new(l?Uint8Array:Float32Array)(e),p=0,d=0;d<f;++d){for(var g=c,y=0;y<o;++y){var A=i[y],m=A.min,v=A.max,b=void 0,_=void 0;l&&(w=n[y][0],_=-(m=void 0===m?w&&P in w?parseFloat(w[P]):(r=t[y][0])instanceof Int8Array?-128:r instanceof Int16Array?-32768:r instanceof Int32Array?-2147483648:r instanceof Float32Array?12e-39:0:m)*(b=255/((v=void 0===v?w&&O in w?parseFloat(w[O]):(r=t[y][0])instanceof Int8Array?127:r instanceof Uint8Array||r instanceof Uint8ClampedArray?255:r instanceof Int16Array?32767:r instanceof Uint16Array?65535:r instanceof Int32Array?2147483647:r instanceof Uint32Array?4294967295:r instanceof Float32Array?34e37:255:v)-m)));for(var w,E=0;E<s[y];++E){var C,I,S=t[y][E][d],j=l?(0,x.clamp)(b*S+_,0,255):S;c?(void 0===(C=A.nodata)&&(I=void 0,I=A.bands?A.bands[E]-1:E,C=u[y][I]),(!(I=isNaN(C))&&S!==C||I&&!isNaN(S))&&(g=!1,h[p]=j)):h[p]=j,p++}g||(w=t[o+y])&&!w[0][d]&&(g=!0)}c&&(g||(h[p]=255),p++)}return h}}])&&a(t.prototype,r),e&&a(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();e.prototype.getView,r.default=e},{"../console.js":115,"../extent.js":142,"../math.js":279,"../proj.js":283,"../proj/Units.js":285,"../tilegrid/TileGrid.js":398,"./DataTile.js":342,geotiff:32}],344:[function(e,t,r){"use strict";function x(e){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=n(e("./TileImage.js")),s=n(e("../ViewHint.js")),u=e("../tilegrid.js"),l=e("../extent.js"),c=e("../proj.js");function n(e){return e&&e.__esModule?e:{default:e}}function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o,a,s=[],u=!0,l=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=o.call(r)).done)&&(s.push(n.value),s.length!==t);u=!0);}catch(e){l=!0,i=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}(e,t)||function(e,t){{var r;if(e)return"string"==typeof e?i(e,t):"Map"===(r="Object"===(r={}.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function O(){O=function(){return a};var u,a={},e=Object.prototype,l=e.hasOwnProperty,c=Object.defineProperty||function(e,t,r){e[t]=r.value},t="function"==typeof Symbol?Symbol:{},n=t.iterator||"@@iterator",r=t.asyncIterator||"@@asyncIterator",i=t.toStringTag||"@@toStringTag";function o(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{o({},"")}catch(u){o=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var i,o,a,s,t=t&&t.prototype instanceof A?t:A,t=Object.create(t.prototype),n=new S(n||[]);return c(t,"_invoke",{value:(i=e,o=r,a=n,s=h,function(e,t){if(s===d)throw Error("Generator is already running");if(s===g){if("throw"===e)throw t;return{value:u,done:!0}}for(a.method=e,a.arg=t;;){var r=a.delegate;if(r){r=function e(t,r){var n=r.method,i=t.iterator[n];if(i===u)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=u,e(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;n=f(i,t.iterator,r.arg);if("throw"===n.type)return r.method="throw",r.arg=n.arg,r.delegate=null,y;i=n.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=u),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}(r,a);if(r){if(r===y)continue;return r}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(s===h)throw s=g,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);s=d;r=f(i,o,a);if("normal"===r.type){if(s=a.done?g:p,r.arg===y)continue;return{value:r.arg,done:a.done}}"throw"===r.type&&(s=g,a.method="throw",a.arg=r.arg)}})}),t}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}a.wrap=s;var h="suspendedStart",p="suspendedYield",d="executing",g="completed",y={};function A(){}function m(){}function v(){}var t={},b=(o(t,n,function(){return this}),Object.getPrototypeOf),b=b&&b(b(j([]))),_=(b&&b!==e&&l.call(b,n)&&(t=b),v.prototype=A.prototype=Object.create(t));function w(e){["next","throw","return"].forEach(function(t){o(e,t,function(e){return this._invoke(t,e)})})}function E(a,s){var t;c(this,"_invoke",{value:function(r,n){function e(){return new s(function(e,t){!function t(e,r,n,i){var o,e=f(a[e],a,r);if("throw"!==e.type)return(r=(o=e.arg).value)&&"object"==x(r)&&l.call(r,"__await")?s.resolve(r.__await).then(function(e){t("next",e,n,i)},function(e){t("throw",e,n,i)}):s.resolve(r).then(function(e){o.value=e,n(o)},function(e){return t("throw",e,n,i)});i(e.arg)}(r,n,e,t)})}return t=t?t.then(e,e):e()}})}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function j(t){if(t||""===t){var r,e=t[n];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return r=-1,(e=function e(){for(;++r<t.length;)if(l.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=u,e.done=!0,e}).next=e}throw new TypeError(x(t)+" is not iterable")}return c(_,"constructor",{value:m.prototype=v,configurable:!0}),c(v,"constructor",{value:m,configurable:!0}),m.displayName=o(v,i,"GeneratorFunction"),a.isGeneratorFunction=function(e){e="function"==typeof e&&e.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},a.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,o(e,i,"GeneratorFunction")),e.prototype=Object.create(_),e},a.awrap=function(e){return{__await:e}},w(E.prototype),o(E.prototype,r,function(){return this}),a.AsyncIterator=E,a.async=function(e,t,r,n,i){void 0===i&&(i=Promise);var o=new E(s(e,t,r,n),i);return a.isGeneratorFunction(t)?o:o.next().then(function(e){return e.done?e.value:o.next()})},w(_),o(_,i,"Generator"),o(_,n,function(){return this}),o(_,"toString",function(){return"[object Generator]"}),a.keys=function(e){var t,r=Object(e),n=[];for(t in r)n.push(t);return n.reverse(),function e(){for(;n.length;){var t=n.pop();if(t in r)return e.value=t,e.done=!1,e}return e.done=!0,e}},a.values=j,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=u,this.done=!1,this.delegate=null,this.method="next",this.arg=u,this.tryEntries.forEach(I),!e)for(var t in this)"t"===t.charAt(0)&&l.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=u)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(r){if(this.done)throw r;var n=this;function e(e,t){return o.type="throw",o.arg=r,n.next=e,t&&(n.method="next",n.arg=u),!!t}for(var t=this.tryEntries.length-1;0<=t;--t){var i=this.tryEntries[t],o=i.completion;if("root"===i.tryLoc)return e("end");if(i.tryLoc<=this.prev){var a=l.call(i,"catchLoc"),s=l.call(i,"finallyLoc");if(a&&s){if(this.prev<i.catchLoc)return e(i.catchLoc,!0);if(this.prev<i.finallyLoc)return e(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return e(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return e(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;0<=r;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&l.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}var o=(i=i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc?null:i)?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var r,n,i=this.tryEntries[t];if(i.tryLoc===e)return"throw"===(r=i.completion).type&&(n=r.arg,I(i)),n}throw Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:j(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=u),y}},a}function h(e,t,r,n,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return r(e)}s.done?t(u):Promise.resolve(u).then(n,i)}function p(s){return function(){var e=this,a=arguments;return new Promise(function(t,r){var n=s.apply(e,a);function i(e){h(n,t,r,i,o,"next",e)}function o(e){h(n,t,r,i,o,"throw",e)}i(void 0)})}}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=x(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=x(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==x(e)?e:e+""}(n.key),n)}}function g(e,t,r){t=A(t);var n=e,t=o()?Reflect.construct(t,r||[],A(e).constructor):t.apply(e,r);if(t&&("object"==x(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function o(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(o=function(){return!!e})()}function y(){return(y="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=A(e)););return e}(e,t);if(n)return(n=Object.getOwnPropertyDescriptor(n,t)).get?n.get.call(arguments.length<3?e:r):n.value}).apply(null,arguments)}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}e=function(){function i(e){var t,r,n;if(this instanceof i)return t=!!e.highDpi,r=!(!0===e.overlay),(r=g(this,i,[{attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,crossOrigin:"anonymous",interpolate:e.interpolate,opaque:r,projection:"EPSG:3857",reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:"loading",tileLoadFunction:e.tileLoadFunction,tilePixelRatio:t?2:1,wrapX:void 0===e.wrapX||e.wrapX,transition:e.transition,zDirection:e.zDirection}])).apiKey_=e.key,r.error_=null,n={mapType:e.mapType||"roadmap",language:e.language||"en-US",region:e.region||"US"},e.imageFormat&&(n.imageFormat=e.imageFormat),e.scale&&(n.scale=e.scale),t&&(n.highDpi=!0),e.layerTypes&&(n.layerTypes=e.layerTypes),e.styles&&(n.styles=e.styles),!0===e.overlay&&(n.overlay=!0),r.sessionTokenRequest_=n,r.sessionTokenValue_,r.sessionRefreshId_,r.previousViewportAttribution_,r.previousViewportExtent_,r.createSession_(),r;throw new TypeError("Cannot call a class as a function")}var e,t,r,n=i,o=a.default;if("function"!=typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function");return n.prototype=Object.create(o&&o.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),o&&m(n,o),n=i,(o=[{key:"getError",value:function(){return this.error_}},{key:"fetchSessionToken",value:function(e,t){return fetch(e,t)}},{key:"createSession_",value:(r=p(O().mark(function e(){var t,r,n,o,a,i,s=this;return O().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r="https://tile.googleapis.com/v1/createSession?key="+this.apiKey_,n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(this.sessionTokenRequest_)},e.next=4,this.fetchSessionToken(r,n);case 4:if((t=e.sent).ok){e.next=18;break}return e.prev=6,e.next=9,t.json();case 9:r=e.sent,this.error_=new Error(r.error.message),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(6),this.error_=new Error("Error fetching session token");case 16:return this.setState("error"),e.abrupt("return");case 18:return e.next=20,t.json();case 20:n=e.sent,i=this.getTilePixelRatio(1),i=[n.tileWidth/i,n.tileHeight/i],this.tileGrid=(0,u.createXYZ)({extent:(0,u.extentFromProjection)(this.getProjection()),maxZoom:22,tileSize:i}),o=n.session,this.sessionTokenValue_=o,a=this.apiKey_,this.tileUrlFunction=function(e,t,r){var n=e[0],i=e[1],e=e[2];return"".concat("https://tile.googleapis.com/v1/2dtiles","/").concat(n,"/").concat(i,"/").concat(e,"?session=").concat(o,"&key=").concat(a)},i=1e3*parseInt(n.expiry,10),i=Math.max(i-Date.now()-6e4,1),this.sessionRefreshId_=setTimeout(function(){return s.createSession_()},i),this.setAttributions(this.fetchAttributions_.bind(this)),this.setState("ready");case 33:case"end":return e.stop()}},e,this,[[6,13]])})),function(){return r.apply(this,arguments)})},{key:"fetchAttributions_",value:(t=p(O().mark(function e(t){var r,n,i,o,a;return O().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.viewHints[s.default.ANIMATING]||t.viewHints[s.default.INTERACTING]||t.animate)return e.abrupt("return",this.previousViewportAttribution_);e.next=2;break;case 2:if(o=(0,c.toLonLat)((0,l.getBottomLeft)(t.extent),t.viewState.projection),o=f(o,2),r=o[0],o=o[1],i=(0,c.toLonLat)((0,l.getTopRight)(t.extent),t.viewState.projection),i=f(i,2),a=i[0],i=i[1],n=this.getTileGrid(),n=n.getZForResolution(t.viewState.resolution,this.zDirection),n="zoom=".concat(n,"&north=").concat(i,"&south=").concat(o,"&east=").concat(a,"&west=").concat(r),this.previousViewportExtent_==n)return e.abrupt("return",this.previousViewportAttribution_);e.next=9;break;case 9:return this.previousViewportExtent_=n,i=this.sessionTokenValue_,o=this.apiKey_,a="".concat("https://tile.googleapis.com/tile/v1/viewport","?session=").concat(i,"&key=").concat(o,"&").concat(n),e.next=15,fetch(a).then(function(e){return e.json()}).then(function(e){return e.copyright});case 15:return this.previousViewportAttribution_=e.sent,e.abrupt("return",this.previousViewportAttribution_);case 17:case"end":return e.stop()}},e,this)})),function(e){return t.apply(this,arguments)})},{key:"disposeInternal",value:function(){clearTimeout(this.sessionRefreshId_),y(A(i.prototype),"disposeInternal",this).call(this)}}])&&d(n.prototype,o),e&&d(n,e),Object.defineProperty(n,"prototype",{writable:!1}),n}();r.default=e},{"../ViewHint.js":108,"../extent.js":142,"../proj.js":283,"../tilegrid.js":397,"./TileImage.js":362}],345:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var f=n(e("../tilegrid/TileGrid.js")),o=n(e("./TileImage.js")),j=e("./Zoomify.js"),x=e("../tilegrid/common.js"),O=e("../format/IIIFInfo.js"),P=e("../asserts.js"),k=e("../extent.js"),B=e("../size.js");function n(e){return e&&e.__esModule?e:{default:e}}function T(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){{var r;if(e)return"string"==typeof e?a(e,t):"Map"===(r="Object"===(r={}.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function M(e,t,r){t=l(t);var n=e,t=u()?Reflect.construct(t,r||[],l(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(u=function(){return!!e})()}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function R(e){return e.toLocaleString("en",{maximumFractionDigits:10})}e=function(){function c(e){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");var e=e||{},h=e.url||"",p=(h+=h.lastIndexOf("/")===h.length-1||""===h?"":"/",e.version||O.Versions.VERSION2),d=e.sizes||[],t=e.size;(0,P.assert)(null!=t&&Array.isArray(t)&&2==t.length&&!isNaN(t[0])&&0<t[0]&&!isNaN(t[1])&&0<t[1],"Missing or invalid `size`");var g,y,A=t[0],m=t[1],t=e.tileSize,r=e.tilePixelRatio||1,v=e.format||"jpg",b=e.quality||(e.version==O.Versions.VERSION1?"native":"default"),_=e.resolutions||[],w=e.supports||[],n=e.extent||[0,-m,A,0],E=null!=d&&Array.isArray(d)&&0<d.length,C=void 0!==t&&("number"==typeof t&&Number.isInteger(t)&&0<t||Array.isArray(t)&&0<t.length),I=null!=w&&Array.isArray(w)&&(w.includes("regionByPx")||w.includes("regionByPct"))&&(w.includes("sizeByWh")||w.includes("sizeByH")||w.includes("sizeByW")||w.includes("sizeByPct"));if(_.sort(function(e,t){return t-e}),C||I)if(null!=t&&("number"==typeof t&&Number.isInteger(t)&&0<t?y=g=t:Array.isArray(t)&&0<t.length&&((1==t.length||null==t[1]&&Number.isInteger(t[0]))&&(g=t[0],y=t[0]),2==t.length)&&(Number.isInteger(t[0])&&Number.isInteger(t[1])?(g=t[0],y=t[1]):null==t[0]&&Number.isInteger(t[1])&&(g=t[1],y=t[1]))),void 0!==g&&void 0!==y||(g=x.DEFAULT_TILE_SIZE,y=x.DEFAULT_TILE_SIZE),0==_.length)for(var i=S=Math.max(Math.ceil(Math.log(A/g)/Math.LN2),Math.ceil(Math.log(m/y)/Math.LN2));0<=i;i--)_.push(Math.pow(2,i));else var o=Math.max.apply(Math,T(_)),S=Math.round(Math.log(o)/Math.LN2);else if(g=A,y=m,_=[],E){d.sort(function(e,t){return e[0]-t[0]}),S=-1;for(var a=[],s=0;s<d.length;s++){var u=A/d[s][0];0<_.length&&_[_.length-1]==u?a.push(s):(_.push(u),S++)}if(0<a.length)for(var l=0;l<a.length;l++)d.splice(a[l]-l,1)}else _.push(1),d.push([A,m]),S=0;o=new f.default({tileSize:[g,y],extent:n,origin:(0,k.getTopLeft)(n),resolutions:_}),n=j.CustomTile.bind(null,(0,B.toSize)(t||256).map(function(e){return e*r}));return(t=M(this,c,[{attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:e.state,tileClass:n,tileGrid:o,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:function(e,t,r){var n,i=e[0];if(!(S<i)){var o,a,s,u,l,c=e[1],e=e[2],f=_[i];if(!(void 0===c||void 0===e||void 0===f||c<0||Math.ceil(A/f/g)<=c||e<0||Math.ceil(m/f/y)<=e))return I||C?(A<(c=c*g*f)+(o=g*f)&&(o=A-c),m<(u=e*(e=y)*f)+(a=y*f)&&(a=m-u),A<c+(s=g)*f&&(s=Math.floor((A-c+f-1)/f)),m<u+y*f&&(e=Math.floor((m-u+f-1)/f)),0==c&&o==A&&0==u&&a==m?n="full":!I||w.includes("regionByPx")?n=c+","+u+","+o+","+a:w.includes("regionByPct")&&(n="pct:"+R(c/A*100)+","+R(u/m*100)+","+R(o/A*100)+","+R(a/m*100)),p!=O.Versions.VERSION3||I&&!w.includes("sizeByWh")?!I||w.includes("sizeByW")?l=s+",":w.includes("sizeByH")?l=","+e:w.includes("sizeByWh")?l=s+","+e:w.includes("sizeByPct")&&(l="pct:"+R(100/f)):l=s+","+e):(n="full",l=E?(c=d[i][0],u=d[i][1],p==O.Versions.VERSION3?c==A&&u==m?"max":c+","+u:c==A?"full":c+","):p==O.Versions.VERSION3?"max":"full"),h+n+"/"+l+"/0/"+b+"."+v}},transition:e.transition}])).zDirection=e.zDirection,t}var e,t,r=c,n=o.default;if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");return r.prototype=Object.create(n&&n.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),n&&h(r,n),r=c,e&&s(r.prototype,e),t&&s(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}();r.default=e},{"../asserts.js":111,"../extent.js":142,"../format/IIIFInfo.js":156,"../size.js":337,"../tilegrid/TileGrid.js":398,"../tilegrid/common.js":400,"./TileImage.js":362,"./Zoomify.js":372}],346:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.ImageSourceEventType=r.ImageSourceEvent=void 0,r.defaultImageLoadFunction=function(e,t){e.getImage().src=t},r.getRequestExtent=O;var n=y(e("../events/Event.js")),o=y(e("../events/EventType.js")),a=y(e("../ImageState.js")),s=y(e("../Image.js")),u=y(e("../reproj/Image.js")),l=y(e("./Source.js")),c=e("./common.js"),f=e("../math.js"),h=e("../extent.js"),p=e("../proj.js"),d=e("../resolution.js"),g=e("../array.js");function y(e){return e&&e.__esModule?e:{default:e}}function A(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function m(e,t,r){return t&&A(e.prototype,t),r&&A(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t,r){t=w(t);var n=e,t=_()?Reflect.construct(t,r||[],w(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(_=function(){return!!e})()}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function E(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&C(e,t)}function C(e,t){return(C=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var I=r.ImageSourceEventType={IMAGELOADSTART:"imageloadstart",IMAGELOADEND:"imageloadend",IMAGELOADERROR:"imageloaderror"},S=r.ImageSourceEvent=(E(x,n.default),m(x)),e=(E(j,l.default),m(j,[{key:"getResolutions",value:function(){return this.resolutions_}},{key:"setResolutions",value:function(e){this.resolutions_=e}},{key:"findNearestResolution",value:function(e){var t=this.getResolutions();return e=t?t[(0,g.linearFindNearest)(t,e,0)]:e}},{key:"getImage",value:function(e,t,r,n){var i=this,o=this.getProjection();if(!o||!n||(0,p.equivalent)(o,n))return this.getImageInternal(e,t,r,n=o?o:n);if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&(0,p.equivalent)(this.reprojectedImage_.getProjection(),n)&&this.reprojectedImage_.getResolution()==t&&(0,h.equals)(this.reprojectedImage_.getExtent(),e))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new u.default(o,n,e,t,r,function(e,t,r){return i.getImageInternal(e,t,r,o)},this.getInterpolate()),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}},{key:"getImageInternal",value:function(e,t,r,n){if(this.loader){e=O(e,t,r,1),t=this.findNearestResolution(t);if(this.image&&(this.static_||this.wantedProjection_===n&&(this.wantedExtent_&&(0,h.containsExtent)(this.wantedExtent_,e)||(0,h.containsExtent)(this.image.getExtent(),e))&&(this.wantedResolution_&&(0,d.fromResolutionLike)(this.wantedResolution_)===t||(0,d.fromResolutionLike)(this.image.getResolution())===t)))return this.image;this.wantedProjection_=n,this.wantedExtent_=e,this.wantedResolution_=t,this.image=new s.default(e,t,r,this.loader),this.image.addEventListener(o.default.CHANGE,this.handleImageChange.bind(this))}return this.image}},{key:"handleImageChange",value:function(e){var t,e=e.target;switch(e.getState()){case a.default.LOADING:this.loading=!0,t=I.IMAGELOADSTART;break;case a.default.LOADED:this.loading=!1,t=I.IMAGELOADEND;break;case a.default.ERROR:this.loading=!1,t=I.IMAGELOADERROR;break;default:return}this.hasListener(t)&&this.dispatchEvent(new S(t,e))}}]));function j(e){var t;return v(this,j),(t=b(this,j,[{attributions:e.attributions,projection:e.projection,state:e.state,interpolate:void 0===e.interpolate||e.interpolate}])).on,t.once,t.un,t.loader=e.loader||null,t.resolutions_=void 0!==e.resolutions?e.resolutions:null,t.reprojectedImage_=null,t.reprojectedRevision_=0,t.image=null,t.wantedExtent_,t.wantedResolution_,t.static_=!!e.loader&&0===e.loader.length,t.wantedProjection_=null,t}function x(e,t){return v(this,x),(e=b(this,x,[e])).image=t,e}function O(e,t,r,n){var t=t/r,r=(0,h.getCenter)(e),i=(0,f.ceil)((0,h.getWidth)(e)/t,c.DECIMALS),e=(0,f.ceil)((0,h.getHeight)(e)/t,c.DECIMALS),i=i+2*(0,f.ceil)((n-1)*i/2,c.DECIMALS),n=e+2*(0,f.ceil)((n-1)*e/2,c.DECIMALS);return(0,h.getForViewAndSize)(r,t,0,[i,n])}r.default=e},{"../Image.js":84,"../ImageState.js":86,"../array.js":110,"../events/Event.js":133,"../events/EventType.js":134,"../extent.js":142,"../math.js":279,"../proj.js":283,"../reproj/Image.js":330,"../resolution.js":334,"./Source.js":356,"./common.js":374}],347:[function(e,t,r){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};t=l(t);if(t&&t.has(e))return t.get(e);var r,n={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in e){var o;"default"!==r&&{}.hasOwnProperty.call(e,r)&&((o=i?Object.getOwnPropertyDescriptor(e,r):null)&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=e[r])}return n.default=e,t&&t.set(e,n),n}(e("./Image.js")),s=e("./arcgisRest.js"),u=e("../Image.js");function l(e){var t,r;return"function"!=typeof WeakMap?null:(t=new WeakMap,r=new WeakMap,(l=function(e){return e?r:t})(e))}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=a(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==a(e)?e:e+""}(n.key),n)}}function c(e,t,r){t=h(t);var n=e,t=o()?Reflect.construct(t,r||[],h(e).constructor):t.apply(e,r);if(t&&("object"==a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function o(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(o=function(){return!!e})()}function f(){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=h(e)););return e}(e,t);if(n)return(n=Object.getOwnPropertyDescriptor(n,t)).get?n.get.call(arguments.length<3?e:r):n.value}).apply(null,arguments)}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}e=function(){function o(e){var t;if(this instanceof o)return(t=c(this,o,[{attributions:(e=e||{}).attributions,interpolate:e.interpolate,projection:e.projection,resolutions:e.resolutions}])).crossOrigin_=void 0!==e.crossOrigin?e.crossOrigin:null,t.hidpi_=void 0===e.hidpi||e.hidpi,t.url_=e.url,t.imageLoadFunction_=void 0!==e.imageLoadFunction?e.imageLoadFunction:n.defaultImageLoadFunction,t.params_=Object.assign({},e.params),t.imageSize_=[0,0],t.renderedRevision_=0,t.ratio_=void 0!==e.ratio?e.ratio:1.5,t.loaderProjection_=null,t;throw new TypeError("Cannot call a class as a function")}var e,t=o,r=n.default;if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&p(t,r),t=o,(r=[{key:"getParams",value:function(){return this.params_}},{key:"getImageInternal",value:function(e,t,r,n){var i=this;return void 0===this.url_?null:(this.loader&&this.loaderProjection_===n||(this.loaderProjection_=n,this.loader=(0,s.createLoader)({crossOrigin:this.crossOrigin_,params:this.params_,projection:n,hidpi:this.hidpi_,url:this.url_,ratio:this.ratio_,load:function(e,t){return i.image.setImage(e),i.imageLoadFunction_(i.image,t),(0,u.decode)(e)}})),f(h(o.prototype),"getImageInternal",this).call(this,e,t,r,n))}},{key:"getImageLoadFunction",value:function(){return this.imageLoadFunction_}},{key:"getUrl",value:function(){return this.url_}},{key:"setImageLoadFunction",value:function(e){this.imageLoadFunction_=e,this.changed()}},{key:"setUrl",value:function(e){e!=this.url_&&(this.url_=e,this.loader=null,this.changed())}},{key:"updateParams",value:function(e){Object.assign(this.params_,e),this.changed()}},{key:"changed",value:function(){this.image=null,f(h(o.prototype),"changed",this).call(this)}}])&&i(t.prototype,r),e&&i(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();r.default=e},{"../Image.js":84,"./Image.js":346,"./arcgisRest.js":373}],348:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=n(e("../ImageCanvas.js")),o=n(e("./Image.js")),s=e("../extent.js");function n(e){return e&&e.__esModule?e:{default:e}}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function l(e,t,r){t=f(t);var n=e,t=c()?Reflect.construct(t,r||[],f(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(c=function(){return!!e})()}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}e=function(){function r(e){var t;if(this instanceof r)return(t=l(this,r,[{attributions:(e=e||{}).attributions,interpolate:e.interpolate,projection:e.projection,resolutions:e.resolutions,state:e.state}])).canvasFunction_=e.canvasFunction,t.canvas_=null,t.renderedRevision_=0,t.ratio_=void 0!==e.ratio?e.ratio:1.5,t;throw new TypeError("Cannot call a class as a function")}var e,t=r,n=o.default;if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&h(t,n),t=r,(n=[{key:"getImageInternal",value:function(e,t,r,n){t=this.findNearestResolution(t);var i,o=this.canvas_;return o&&this.renderedRevision_==this.getRevision()&&o.getResolution()==t&&o.getPixelRatio()==r&&(0,s.containsExtent)(o.getExtent(),e)||(e=e.slice(),(0,s.scaleFromCenter)(e,this.ratio_),i=[(0,s.getWidth)(e)/t*r,(0,s.getHeight)(e)/t*r],(i=this.canvasFunction_.call(this,e,t,r,i,n))&&(o=new a.default(e,t,r,i)),this.canvas_=o,this.renderedRevision_=this.getRevision()),o}}])&&u(t.prototype,n),e&&u(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();r.default=e},{"../ImageCanvas.js":85,"../extent.js":142,"./Image.js":346}],349:[function(e,t,r){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};t=l(t);if(t&&t.has(e))return t.get(e);var r,n={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in e){var o;"default"!==r&&{}.hasOwnProperty.call(e,r)&&((o=i?Object.getOwnPropertyDescriptor(e,r):null)&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=e[r])}return n.default=e,t&&t.set(e,n),n}(e("./Image.js")),s=e("./mapguide.js"),u=e("../Image.js");function l(e){var t,r;return"function"!=typeof WeakMap?null:(t=new WeakMap,r=new WeakMap,(l=function(e){return e?r:t})(e))}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=a(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==a(e)?e:e+""}(n.key),n)}}function c(e,t,r){t=h(t);var n=e,t=o()?Reflect.construct(t,r||[],h(e).constructor):t.apply(e,r);if(t&&("object"==a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function o(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(o=function(){return!!e})()}function f(){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=h(e)););return e}(e,t);if(n)return(n=Object.getOwnPropertyDescriptor(n,t)).get?n.get.call(arguments.length<3?e:r):n.value}).apply(null,arguments)}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}e=function(){function o(e){var t;if(this instanceof o)return(t=c(this,o,[{interpolate:e.interpolate,projection:e.projection,resolutions:e.resolutions}])).crossOrigin_=void 0!==e.crossOrigin?e.crossOrigin:null,t.displayDpi_=void 0!==e.displayDpi?e.displayDpi:96,t.params_=Object.assign({},e.params),t.url_=e.url,t.imageLoadFunction_=void 0!==e.imageLoadFunction?e.imageLoadFunction:n.defaultImageLoadFunction,t.hidpi_=void 0===e.hidpi||e.hidpi,t.metersPerUnit_=void 0!==e.metersPerUnit?e.metersPerUnit:1,t.ratio_=void 0!==e.ratio?e.ratio:1,t.useOverlay_=void 0!==e.useOverlay&&e.useOverlay,t.renderedRevision_=0,t.loaderProjection_=null,t;throw new TypeError("Cannot call a class as a function")}var e,t=o,r=n.default;if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&p(t,r),t=o,(r=[{key:"getParams",value:function(){return this.params_}},{key:"getImageInternal",value:function(e,t,r,n){var i=this;return void 0===this.url_?null:(this.loader&&this.loaderProjection_===n||(this.loaderProjection_=n,this.loader=(0,s.createLoader)({crossOrigin:this.crossOrigin_,params:this.params_,hidpi:this.hidpi_,metersPerUnit:this.metersPerUnit_,url:this.url_,useOverlay:this.useOverlay_,ratio:this.ratio_,load:function(e,t){return i.image.setImage(e),i.imageLoadFunction_(i.image,t),(0,u.decode)(e)}})),f(h(o.prototype),"getImageInternal",this).call(this,e,t,r,n))}},{key:"getImageLoadFunction",value:function(){return this.imageLoadFunction_}},{key:"updateParams",value:function(e){Object.assign(this.params_,e),this.changed()}},{key:"setImageLoadFunction",value:function(e){this.imageLoadFunction_=e,this.changed()}},{key:"changed",value:function(){this.image=null,f(h(o.prototype),"changed",this).call(this)}}])&&i(t.prototype,r),e&&i(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();r.default=e},{"../Image.js":84,"./Image.js":346,"./mapguide.js":375}],350:[function(e,t,r){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=(A=e("../events/EventType.js"))&&A.__esModule?A:{default:A},s=n(e("./Image.js")),u=n(e("../Image.js")),l=e("./static.js"),c=e("../proj.js"),f=e("../extent.js");function h(e){var t,r;return"function"!=typeof WeakMap?null:(t=new WeakMap,r=new WeakMap,(h=function(e){return e?r:t})(e))}function n(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};t=h(t);if(t&&t.has(e))return t.get(e);var r,n,i={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in e)"default"!==r&&{}.hasOwnProperty.call(e,r)&&((n=o?Object.getOwnPropertyDescriptor(e,r):null)&&(n.get||n.set)?Object.defineProperty(i,r,n):i[r]=e[r]);return i.default=e,t&&t.set(e,i),i}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=a(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==a(e)?e:e+""}(n.key),n)}}function d(e,t,r){t=g(t);var n=e,t=i()?Reflect.construct(t,r||[],g(e).constructor):t.apply(e,r);if(t&&("object"==a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function i(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(i=function(){return!!e})()}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t){return(y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var A=function(){function i(e){var r,t,n;if(this instanceof i)return t=void 0!==e.crossOrigin?e.crossOrigin:null,n=void 0!==e.imageLoadFunction?e.imageLoadFunction:s.defaultImageLoadFunction,(r=d(this,i,[{attributions:e.attributions,interpolate:e.interpolate,projection:(0,c.get)(e.projection)}])).url_=e.url,r.imageExtent_=e.imageExtent,r.image=null,r.image=new u.default(r.imageExtent_,void 0,1,(0,l.createLoader)({url:e.url,imageExtent:e.imageExtent,crossOrigin:t,load:function(e,t){return r.image.setImage(e),n(r.image,t),(0,u.decode)(e)}})),r.image.addEventListener(o.default.CHANGE,r.handleImageChange.bind(r)),r;throw new TypeError("Cannot call a class as a function")}var e,t=i,r=s.default;if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&y(t,r),t=i,(r=[{key:"getImageExtent",value:function(){return this.imageExtent_}},{key:"getImageInternal",value:function(e,t,r,n){return(0,f.intersects)(e,this.image.getExtent())?this.image:null}},{key:"getUrl",value:function(){return this.url_}}])&&p(t.prototype,r),e&&p(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();r.default=A},{"../Image.js":84,"../events/EventType.js":134,"../extent.js":142,"../proj.js":283,"./Image.js":346,"./static.js":377}],351:[function(e,t,r){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};t=f(t);if(t&&t.has(e))return t.get(e);var r,n={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in e){var o;"default"!==r&&{}.hasOwnProperty.call(e,r)&&((o=i?Object.getOwnPropertyDescriptor(e,r):null)&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=e[r])}return n.default=e,t&&t.set(e,n),n}(e("./Image.js")),s=e("../reproj.js"),u=e("./wms.js"),l=e("../Image.js"),c=e("../proj.js");function f(e){var t,r;return"function"!=typeof WeakMap?null:(t=new WeakMap,r=new WeakMap,(f=function(e){return e?r:t})(e))}function o(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function h(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?o(Object(i),!0).forEach(function(e){var t,r;t=n,r=i[e=e],(e=p(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):o(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))})}return n}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,p(n.key),n)}}function p(e){e=function(e,t){if("object"!=a(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==a(e)?e:e+""}function d(e,t,r){t=A(t);var n=e,t=g()?Reflect.construct(t,r||[],A(e).constructor):t.apply(e,r);if(t&&("object"==a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(g=function(){return!!e})()}function y(){return(y="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=A(e)););return e}(e,t);if(n)return(n=Object.getOwnPropertyDescriptor(n,t)).get?n.get.call(arguments.length<3?e:r):n.value}).apply(null,arguments)}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}e=function(){function o(e){var t;if(this instanceof o)return(t=d(this,o,[{attributions:(e=e||{}).attributions,interpolate:e.interpolate,projection:e.projection,resolutions:e.resolutions}])).crossOrigin_=void 0!==e.crossOrigin?e.crossOrigin:null,t.url_=e.url,t.imageLoadFunction_=void 0!==e.imageLoadFunction?e.imageLoadFunction:n.defaultImageLoadFunction,t.params_=Object.assign({},e.params),t.serverType_=e.serverType,t.hidpi_=void 0===e.hidpi||e.hidpi,t.renderedRevision_=0,t.ratio_=void 0!==e.ratio?e.ratio:1.5,t.loaderProjection_=null,t;throw new TypeError("Cannot call a class as a function")}var e,t=o,r=n.default;if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&m(t,r),t=o,(r=[{key:"getFeatureInfoUrl",value:function(e,t,r,n){var r=(0,c.get)(r),i=this.getProjection(),n=(i&&i!==r&&(t=(0,s.calculateSourceResolution)(i,r,e,t),e=(0,c.transform)(e,r,i)),{url:this.url_,params:h(h({},this.params_),n),projection:i||r});return(0,u.getFeatureInfoUrl)(n,e,t)}},{key:"getLegendUrl",value:function(e,t){return(0,u.getLegendUrl)({url:this.url_,params:h(h({},this.params_),t)},e)}},{key:"getParams",value:function(){return this.params_}},{key:"getImageInternal",value:function(e,t,r,n){var i=this;return void 0===this.url_?null:(this.loader&&this.loaderProjection_===n||(this.loaderProjection_=n,this.loader=(0,u.createLoader)({crossOrigin:this.crossOrigin_,params:this.params_,projection:n,serverType:this.serverType_,hidpi:this.hidpi_,url:this.url_,ratio:this.ratio_,load:function(e,t){return i.image.setImage(e),i.imageLoadFunction_(i.image,t),(0,l.decode)(e)}})),y(A(o.prototype),"getImageInternal",this).call(this,e,t,r,n))}},{key:"getImageLoadFunction",value:function(){return this.imageLoadFunction_}},{key:"getUrl",value:function(){return this.url_}},{key:"setImageLoadFunction",value:function(e){this.imageLoadFunction_=e,this.changed()}},{key:"setUrl",value:function(e){e!=this.url_&&(this.url_=e,this.loader=null,this.changed())}},{key:"updateParams",value:function(e){Object.assign(this.params_,e),this.changed()}},{key:"changed",value:function(){this.image=null,y(A(o.prototype),"changed",this).call(this)}}])&&i(t.prototype,r),e&&i(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();r.default=e},{"../Image.js":84,"../proj.js":283,"../reproj.js":328,"./Image.js":346,"./wms.js":378}],352:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=(n=e("./TileImage.js"))&&n.__esModule?n:{default:n},a=e("./ogcTileUtil.js"),s=e("../console.js");function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function l(e,t,r){t=f(t);var n=e,t=c()?Reflect.construct(t,r||[],f(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(c=function(){return!!e})()}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var n=function(){function r(e){var t;if(this instanceof r)return t=l(this,r,[{attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:"loading",tileLoadFunction:e.tileLoadFunction,wrapX:void 0===e.wrapX||e.wrapX,transition:e.transition}]),e={url:e.url,projection:t.getProjection(),mediaType:e.mediaType,context:e.context||null,collections:e.collections},(0,a.getTileSetInfo)(e).then(t.handleTileSetInfo_.bind(t)).catch(t.handleError_.bind(t)),t;throw new TypeError("Cannot call a class as a function")}var e,t=r,n=o.default;if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&h(t,n),t=r,(n=[{key:"handleTileSetInfo_",value:function(e){this.tileGrid=e.grid,this.setTileUrlFunction(e.urlFunction,e.urlTemplate),this.setState("ready")}},{key:"handleError_",value:function(e){(0,s.error)(e),this.setState("error")}}])&&u(t.prototype,n),e&&u(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();r.default=n},{"../console.js":115,"./TileImage.js":362,"./ogcTileUtil.js":376}],353:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=(n=e("./VectorTile.js"))&&n.__esModule?n:{default:n},a=e("./ogcTileUtil.js"),s=e("../console.js");function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function l(e,t,r){t=f(t);var n=e,t=c()?Reflect.construct(t,r||[],f(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(c=function(){return!!e})()}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var n=function(){function r(e){var t;if(this instanceof r)return t=l(this,r,[{attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,format:e.format,overlaps:e.overlaps,projection:e.projection,tileClass:e.tileClass,transition:e.transition,wrapX:e.wrapX,zDirection:e.zDirection,state:"loading"}]),e={url:e.url,projection:t.getProjection(),mediaType:e.mediaType,supportedMediaTypes:e.format.supportedMediaTypes,context:e.context||null,collections:e.collections},(0,a.getTileSetInfo)(e).then(t.handleTileSetInfo_.bind(t)).catch(t.handleError_.bind(t)),t;throw new TypeError("Cannot call a class as a function")}var e,t=r,n=o.default;if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&h(t,n),t=r,(n=[{key:"handleTileSetInfo_",value:function(e){this.tileGrid=e.grid,this.setTileUrlFunction(e.urlFunction,e.urlTemplate),this.setState("ready")}},{key:"handleError_",value:function(e){(0,s.error)(e),this.setState("error")}}])&&u(t.prototype,n),e&&u(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();r.default=n},{"../console.js":115,"./VectorTile.js":369,"./ogcTileUtil.js":376}],354:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.ATTRIBUTION=void 0;var o=(e=e("./XYZ.js"))&&e.__esModule?e:{default:e};function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function s(e,t,r){t=l(t);var n=e,t=u()?Reflect.construct(t,r||[],l(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(u=function(){return!!e})()}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}r.ATTRIBUTION='&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.';e=function(){function i(e){var t,r,n;if(this instanceof i)return t=void 0!==(e=e||{}).attributions?e.attributions:['&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.'],r=void 0!==e.crossOrigin?e.crossOrigin:"anonymous",n=void 0!==e.url?e.url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png",s(this,i,[{attributions:t,attributionsCollapsible:!1,cacheSize:e.cacheSize,crossOrigin:r,interpolate:e.interpolate,maxZoom:void 0!==e.maxZoom?e.maxZoom:19,opaque:void 0===e.opaque||e.opaque,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileLoadFunction:e.tileLoadFunction,transition:e.transition,url:n,wrapX:e.wrapX,zDirection:e.zDirection}]);throw new TypeError("Cannot call a class as a function")}var e,t,r=i,n=o.default;if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");return r.prototype=Object.create(n&&n.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),n&&c(r,n),r=i,e&&a(r.prototype,e),t&&a(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}();r.default=e},{"./XYZ.js":371}],355:[function(Q,e,F){!function(L){!function(){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(F,"__esModule",{value:!0}),F.default=F.RasterSourceEvent=F.Processor=void 0,F.newImageData=j;var e=r(Q("../Disposable.js")),t=r(Q("../events/Event.js")),a=r(Q("../events/EventType.js")),u=r(Q("../ImageCanvas.js")),s=r(Q("../layer/Image.js")),l=r(Q("./Image.js")),c=r(Q("./Source.js")),f=r(Q("../layer/Tile.js")),h=r(Q("../TileQueue.js")),p=r(Q("./Tile.js")),d=Q("../dom.js"),g=Q("../transform.js"),y=Q("../extent.js"),A=Q("../util.js");function r(e){return e&&e.__esModule?e:{default:e}}function o(){return(o="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=w(e)););return e}(e,t);if(n)return(n=Object.getOwnPropertyDescriptor(n,t)).get?n.get.call(arguments.length<3?e:r):n.value}).apply(null,arguments)}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function v(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function b(e,t,r){t=w(t);var n=e,t=_()?Reflect.construct(t,r||[],w(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(_=function(){return!!e})()}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function E(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&C(e,t)}function C(e,t){return(C=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var I,S=!0;try{new ImageData(10,10)}catch(e){S=!1}function j(e,t,r){return S?new ImageData(e,t,r):((t=(I=I||document.createElement("canvas").getContext("2d")).createImageData(t,r)).data.set(e),t)}function x(_){var w=!0;try{new ImageData(10,10)}catch(_){w=!1}return function(e){var t,r,n,i=e.buffers,o=e.meta,a=e.imageOps,s=e.width,u=e.height,l=i.length,c=i[0].byteLength;if(a){for(var f=new Array(l),h=0;h<l;++h)f[h]=(t=new Uint8ClampedArray(i[h]),r=s,n=u,w?new ImageData(t,r,n):{data:t,width:r,height:n});return _(f,o).data.buffer}for(var p=new Uint8ClampedArray(c),d=new Array(l),g=new Array(l),y=0;y<l;++y)d[y]=new Uint8ClampedArray(i[y]),g[y]=[0,0,0,0];for(var A=0;A<c;A+=4){for(var m=0;m<l;++m){var v=d[m];g[m][0]=v[A],g[m][1]=v[A+1],g[m][2]=v[A+2],g[m][3]=v[A+3]}var b=_(g,o);p[A]=b[0],p[A+1]=b[1],p[A+2]=b[2],p[A+3]=b[3]}return p.buffer}}var O=F.Processor=(E(M,e.default),v(M,[{key:"process",value:function(e,t,r){this._enqueue({inputs:e,meta:t,callback:r}),this._dispatch()}},{key:"_enqueue",value:function(e){for(this._queue.push(e);this._queue.length>this._maxQueueLength;)this._queue.shift().callback(null,null)}},{key:"_dispatch",value:function(){if(!this._running&&0!==this._queue.length){var e=this._queue.shift(),t=(this._job=e).inputs[0].width,r=e.inputs[0].height,n=e.inputs.map(function(e){return e.data.buffer}),i=this._workers.length;if(1!==(this._running=i))for(var o=e.inputs[0].data.length,a=4*Math.ceil(o/4/i),s=0;s<i;++s){for(var u=s*a,l=[],c=0,f=n.length;c<f;++c)l.push(n[c].slice(u,u+a));this._workers[s].postMessage({buffers:l,meta:e.meta,imageOps:this._imageOps,width:t,height:r},l)}else this._workers[0].postMessage({buffers:n,meta:e.meta,imageOps:this._imageOps,width:t,height:r},n)}}},{key:"_onWorkerMessage",value:function(e,t){this.disposed||(this._dataLookup[e]=t.data,--this._running,0===this._running&&this._resolveJob())}},{key:"_resolveJob",value:function(){var e=this._job,t=this._workers.length;if(1===t)n=new Uint8ClampedArray(this._dataLookup[0].buffer),i=this._dataLookup[0].meta;else for(var r=e.inputs[0].data.length,n=new Uint8ClampedArray(r),i=new Array(t),o=4*Math.ceil(r/4/t),a=0;a<t;++a){var s=this._dataLookup[a].buffer,u=a*o;n.set(new Uint8ClampedArray(s),u),i[a]=this._dataLookup[a].meta}this._job=null,this._dataLookup={},e.callback(null,j(n,e.inputs[0].width,e.inputs[0].height),i),this._dispatch()}},{key:"disposeInternal",value:function(){for(var e=0;e<this._workers.length;++e)this._workers[e].terminate();this._workers.length=0}}])),P="beforeoperations",D="afteroperations",k=F.RasterSourceEvent=(E(T,t.default),v(T)),e=(E(B,l.default),v(B,[{key:"setOperation",value:function(e,t){this.processor_&&this.processor_.dispose(),this.processor_=new O({operation:e,imageOps:"image"===this.operationType_,queue:1,lib:t,threads:this.threads_}),this.changed()}},{key:"updateFrameState_",value:function(e,t,r){var n=Object.assign({},this.frameState_),i=(n.viewState=Object.assign({},n.viewState),(0,y.getCenter)(e)),e=(n.size[0]=Math.ceil((0,y.getWidth)(e)/t),n.size[1]=Math.ceil((0,y.getHeight)(e)/t),n.extent=[i[0]-n.size[0]*t/2,i[1]-n.size[1]*t/2,i[0]+n.size[0]*t/2,i[1]+n.size[1]*t/2],n.time=Date.now(),n.viewState);return e.center=i,e.projection=r,e.resolution=t,n}},{key:"allSourcesReady_",value:function(){for(var e,t=!0,r=0,n=this.layers_.length;r<n;++r)if(!(e=this.layers_[r].getSource())||"ready"!==e.getState()){t=!1;break}return t}},{key:"getImage",value:function(e,t,r,n){if(!this.allSourcesReady_())return null;this.tileQueue_.loadMoreTiles(16,16),t=this.findNearestResolution(t);var i,e=this.updateFrameState_(e,t,n);return this.requestedFrameState_=e,this.renderedImageCanvas_&&(n=this.renderedImageCanvas_.getResolution(),i=this.renderedImageCanvas_.getExtent(),t===n&&(0,y.equals)(e.extent,i)||(this.renderedImageCanvas_=null)),this.renderedImageCanvas_&&this.getRevision()===this.renderedRevision_||this.processSources_(),e.animate&&requestAnimationFrame(this.changed.bind(this)),this.renderedImageCanvas_}},{key:"processSources_",value:function(){for(var e=this.requestedFrameState_,t=this.layers_.length,r=new Array(t),n=0;n<t;++n){e.layerIndex=n,e.renderTargets={};var i=function(e,t){var r=e.getRenderer();if(!r)throw new Error("Unsupported layer type: "+e);if(!r.prepareFrame(t))return null;var e=t.size[0],n=t.size[1];if(0===e||0===n)return null;var i,r=r.renderFrame(t,null);if(r instanceof HTMLCanvasElement)i=r;else{if(!((i=r?r.firstElementChild:i)instanceof HTMLCanvasElement))throw new Error("Unsupported rendered element: "+i);if(i.width===e&&i.height===n)return i.getContext("2d").getImageData(0,0,e,n)}!R||(t=R.canvas).width!==e||t.height!==n?R=(0,d.createCanvasContext2D)(e,n,void 0,{willReadFrequently:!0}):R.clearRect(0,0,e,n);return R.drawImage(i,0,0,e,n),R.getImageData(0,0,e,n)}(this.layers_[n],e);if(!i)return;r[n]=i}var o={};this.dispatchEvent(new k(P,e,o)),this.processor_.process(r,o,this.onWorkerComplete_.bind(this,e))}},{key:"onWorkerComplete_",value:function(e,t,r,n){var i,o,a,s;!t&&r&&(t=e.extent,(i=e.viewState.resolution)===this.requestedFrameState_.viewState.resolution)&&(0,y.equals)(t,this.requestedFrameState_.extent)&&(this.renderedImageCanvas_?s=this.renderedImageCanvas_.getImage().getContext("2d"):(o=Math.round((0,y.getWidth)(t)/i),a=Math.round((0,y.getHeight)(t)/i),s=(0,d.createCanvasContext2D)(o,a),this.renderedImageCanvas_=new u.default(t,i,1,s.canvas)),s.putImageData(r,0,0),e.animate?requestAnimationFrame(this.changed.bind(this)):this.changed(),this.renderedRevision_=this.getRevision(),this.dispatchEvent(new k(D,e,n)))}},{key:"getResolutions",value:function(e){if(!this.useResolutions_)return null;var t=o(w(B.prototype),"getResolutions",this).call(this);if(!t)for(var r=0,n=this.layers_.length;r<n&&!(t=this.layers_[r].getSource().getResolutions(e));++r);return t}},{key:"disposeInternal",value:function(){this.processor_&&this.processor_.dispose(),o(w(B.prototype),"disposeInternal",this).call(this)}}]));function B(o){var e;m(this,B),(e=b(this,B,[{projection:null}])).on,e.once,e.un,e.processor_=null,e.operationType_=void 0!==o.operationType?o.operationType:"pixel",e.threads_=void 0!==o.threads?o.threads:1,e.layers_=function(e){for(var t=e.length,r=new Array(t),n=0;n<t;++n)r[n]=function(e){var t;return e instanceof c.default?e instanceof p.default?t=new f.default({source:e}):e instanceof l.default&&(t=new s.default({source:e})):t=e,t}(e[n]);return r}(o.sources);for(var t=e.changed.bind(e),r=0,n=e.layers_.length;r<n;++r)e.layers_[r].addEventListener(a.default.CHANGE,t);return e.useResolutions_=null!==o.resolutions,e.tileQueue_=new h.default(function(){return 1},e.processSources_.bind(e)),e.requestedFrameState_,e.renderedImageCanvas_=null,e.renderedRevision_,e.frameState_={animate:!1,coordinateToPixelTransform:(0,g.create)(),declutter:null,extent:null,index:0,layerIndex:0,layerStatesArray:e.layers_.map(function(e){return e.getLayerState()}),pixelRatio:1,pixelToCoordinateTransform:(0,g.create)(),postRenderFunctions:[],size:[0,0],tileQueue:e.tileQueue_,time:Date.now(),usedTiles:{},viewState:{rotation:0},viewHints:[],wantedTiles:{},mapId:(0,A.getUid)(e),renderTargets:{}},e.setAttributions(function(e){for(var t=[],r=0,n=o.sources.length;r<n;++r){var i=o.sources[r],i=i instanceof c.default?i:i.getSource();i&&"function"==typeof(i=i.getAttributions())&&(i=i(e),t.push.apply(t,i))}return 0!==t.length?t:null}),void 0!==o.operation&&e.setOperation(o.operation,o.lib),e}function T(e,t,r){return m(this,T),(e=b(this,T,[e])).extent=t.extent,e.resolution=t.viewState.resolution/t.pixelRatio,e.data=r,e}function M(e){m(this,M),(t=b(this,M))._imageOps=!!e.imageOps,r=0===e.threads?0:!t._imageOps&&e.threads||1;var t,r,n,i,o,a,s=new Array(r);if(r)for(var u=0;u<r;++u)s[u]=function(t,e){var r=Object.keys(t.lib||{}).map(function(e){return"const "+e+" = "+t.lib[e].toString()+";"}).concat(["const __minion__ = ("+x.toString()+")(",t.operation.toString(),");",'self.addEventListener("message", function(event) {',"  const buffer = __minion__(event.data);","  self.postMessage({buffer: buffer, meta: event.data.meta}, [buffer]);","});"]);return(r=new Worker("undefined"==typeof Blob?"data:text/javascript;base64,"+L.from(r.join("\n"),"binary").toString("base64"):URL.createObjectURL(new Blob(r,{type:"text/javascript"})))).addEventListener("message",e),r}(e,t._onWorkerMessage.bind(t,u));else s[0]=(n=e,i=t._onWorkerMessage.bind(t,0),o=x(n.operation),a=!1,{postMessage:function(e){setTimeout(function(){a||i({data:{buffer:o(e),meta:e.meta}})},0)},terminate:function(){a=!0}});return t._workers=s,t._queue=[],t._maxQueueLength=e.queue||1/0,t._running=0,t._dataLookup={},t._job=null,t}e.prototype.dispose;var R=null;F.default=e}.call(this)}.call(this,Q("buffer").Buffer)},{"../Disposable.js":81,"../ImageCanvas.js":85,"../TileQueue.js":102,"../dom.js":130,"../events/Event.js":133,"../events/EventType.js":134,"../extent.js":142,"../layer/Image.js":268,"../layer/Tile.js":271,"../transform.js":402,"../util.js":404,"./Image.js":346,"./Source.js":356,"./Tile.js":358,buffer:9}],356:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=(n=e("../Object.js"))&&n.__esModule?n:{default:n},a=e("../proj.js");function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function u(e,t,r){t=c(t);var n=e,t=l()?Reflect.construct(t,r||[],c(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(l=function(){return!!e})()}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var n=function(){function n(e){var t;if(!(this instanceof n))throw new TypeError("Cannot call a class as a function");(t=u(this,n)).projection=(0,a.get)(e.projection),t.attributions_=h(e.attributions),t.attributionsCollapsible_=void 0===e.attributionsCollapsible||e.attributionsCollapsible,t.loading=!1,t.state_=void 0!==e.state?e.state:"ready",t.wrapX_=void 0!==e.wrapX&&e.wrapX,t.interpolate_=!!e.interpolate,t.viewResolver=null,t.viewRejector=null;var r=t;return t.viewPromise_=new Promise(function(e,t){r.viewResolver=e,r.viewRejector=t}),t}var e,t=n,r=o.default;if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&f(t,r),t=n,(r=[{key:"getAttributions",value:function(){return this.attributions_}},{key:"getAttributionsCollapsible",value:function(){return this.attributionsCollapsible_}},{key:"getProjection",value:function(){return this.projection}},{key:"getResolutions",value:function(e){return null}},{key:"getView",value:function(){return this.viewPromise_}},{key:"getState",value:function(){return this.state_}},{key:"getWrapX",value:function(){return this.wrapX_}},{key:"getInterpolate",value:function(){return this.interpolate_}},{key:"refresh",value:function(){this.changed()}},{key:"setAttributions",value:function(e){this.attributions_=h(e),this.changed()}},{key:"setState",value:function(e){this.state_=e,this.changed()}}])&&s(t.prototype,r),e&&s(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();function h(t){return t?Array.isArray(t)?function(e){return t}:"function"==typeof t?t:function(e){return[t]}:null}r.default=n},{"../Object.js":96,"../proj.js":283}],357:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=(n=e("./XYZ.js"))&&n.__esModule?n:{default:n},s=e("./OSM.js");function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function l(e,t,r){t=c(t);var n=e,t=a()?Reflect.construct(t,r||[],c(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function a(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(a=function(){return!!e})()}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var h={stamen_terrain:{extension:"png",opaque:!0},stamen_terrain_background:{extension:"png",opaque:!0},stamen_terrain_labels:{extension:"png",opaque:!1},stamen_terrain_lines:{extension:"png",opaque:!1},stamen_toner_background:{extension:"png",opaque:!0},stamen_toner:{extension:"png",opaque:!0},stamen_toner_labels:{extension:"png",opaque:!1},stamen_toner_lines:{extension:"png",opaque:!1},stamen_toner_lite:{extension:"png",opaque:!0},stamen_watercolor:{extension:"jpg",opaque:!0},alidade_smooth:{extension:"png",opaque:!0},alidade_smooth_dark:{extension:"png",opaque:!0},alidade_satellite:{extension:"png",opaque:!0},outdoors:{extension:"png",opaque:!0},osm_bright:{extension:"png",opaque:!0}},p={stamen_terrain:{minZoom:0,maxZoom:18,retina:!0},stamen_toner:{minZoom:0,maxZoom:20,retina:!0},stamen_watercolor:{minZoom:1,maxZoom:18,retina:!1}},n=function(){function a(e){var t,r,n,i,o;if(this instanceof a)return t=-1==(t=e.layer.indexOf("-"))?e.layer:e.layer.slice(0,t),r=h[e.layer],i=e.apiKey?"?api_key="+e.apiKey:"",n=(t=p[t]||{minZoom:0,maxZoom:20,retina:!0}).retina&&e.retina?"@2x":"",i=void 0!==e.url?e.url:"https://tiles.stadiamaps.com/tiles/"+e.layer+"/{z}/{x}/{y}"+n+"."+r.extension+i,o=['&copy; <a href="https://www.stadiamaps.com/" target="_blank">Stadia Maps</a>','&copy; <a href="https://openmaptiles.org/" target="_blank">OpenMapTiles</a>',s.ATTRIBUTION],e.layer.startsWith("stamen_")&&o.splice(1,0,'&copy; <a href="https://stamen.com/" target="_blank">Stamen Design</a>'),l(this,a,[{attributions:o,cacheSize:e.cacheSize,crossOrigin:"anonymous",interpolate:e.interpolate,maxZoom:(void 0!==e.maxZoom?e:t).maxZoom,minZoom:(void 0!==e.minZoom?e:t).minZoom,opaque:r.opaque,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileLoadFunction:e.tileLoadFunction,transition:e.transition,url:i,tilePixelRatio:n?2:1,wrapX:e.wrapX,zDirection:e.zDirection}]);throw new TypeError("Cannot call a class as a function")}var e,t,r=a,n=o.default;if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");return r.prototype=Object.create(n&&n.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),n&&f(r,n),r=a,e&&u(r.prototype,e),t&&u(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}();r.default=n},{"./OSM.js":354,"./XYZ.js":371}],358:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.TileSourceEvent=void 0;var n=d(e("../events/Event.js")),o=d(e("./Source.js")),a=d(e("../TileCache.js")),c=d(e("../TileState.js")),s=e("../util.js"),u=e("../asserts.js"),l=e("../proj.js"),f=e("../tilecoord.js"),h=e("../tilegrid.js"),p=e("../size.js");function d(e){return e&&e.__esModule?e:{default:e}}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function A(e,t,r){return t&&y(e.prototype,t),r&&y(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function m(e,t,r){t=_(t);var n=e,t=v()?Reflect.construct(t,r||[],_(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(v=function(){return!!e})()}function b(){return(b="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=_(e)););return e}(e,t);if(n)return(n=Object.getOwnPropertyDescriptor(n,t)).get?n.get.call(arguments.length<3?e:r):n.value}).apply(null,arguments)}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function w(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&E(e,t)}function E(e,t){return(E=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}w(I,o.default);e=A(I,[{key:"canExpireCache",value:function(){return this.tileCache.canExpireCache()}},{key:"expireCache",value:function(e,t){e=this.getTileCacheForProjection(e);e&&e.expireCache(t)}},{key:"forEachLoadedTile",value:function(e,t,r,n){var i=this.getTileCacheForProjection(e);if(!i)return!1;for(var o,a,s=!0,u=r.minX;u<=r.maxX;++u)for(var l=r.minY;l<=r.maxY;++l)o=(0,f.getKeyZXY)(t,u,l),a=!1,(a=i.containsKey(o)?(a=(o=i.get(o)).getState()===c.default.LOADED)&&!1!==n(o):a)||(s=!1);return s}},{key:"getGutterForProjection",value:function(e){return 0}},{key:"getKey",value:function(){return this.key_}},{key:"setKey",value:function(e){this.key_!==e&&(this.key_=e,this.changed())}},{key:"getOpaque",value:function(e){return this.opaque_}},{key:"getResolutions",value:function(e){e=e?this.getTileGridForProjection(e):this.tileGrid;return e?e.getResolutions():null}},{key:"getTile",value:function(e,t,r,n,i){return(0,s.abstract)()}},{key:"getTileGrid",value:function(){return this.tileGrid}},{key:"getTileGridForProjection",value:function(e){return this.tileGrid||(0,h.getForProjection)(e)}},{key:"getTileCacheForProjection",value:function(e){var t=this.getProjection();return(0,u.assert)(null===t||(0,l.equivalent)(t,e),"A VectorTile source can only be rendered if it has a projection compatible with the view projection."),this.tileCache}},{key:"getTilePixelRatio",value:function(e){return this.tilePixelRatio_}},{key:"getTilePixelSize",value:function(e,t,r){r=this.getTileGridForProjection(r),t=this.getTilePixelRatio(t),r=(0,p.toSize)(r.getTileSize(e),this.tmpSize);return 1==t?r:(0,p.scale)(r,t,this.tmpSize)}},{key:"getTileCoordForTileUrlFunction",value:function(e,t){t=void 0!==t?t:this.getProjection();var r=this.getTileGridForProjection(t);return this.getWrapX()&&t.isGlobal()&&(e=(0,h.wrapX)(r,e,t)),(0,f.withinExtentAndZ)(e,r)?e:null}},{key:"clear",value:function(){this.tileCache.clear()}},{key:"refresh",value:function(){this.clear(),b(_(I.prototype),"refresh",this).call(this)}},{key:"updateCacheSize",value:function(e,t){t=this.getTileCacheForProjection(t);e>t.highWaterMark&&(t.highWaterMark=e)}},{key:"useTile",value:function(e,t,r,n){}}]);r.TileSourceEvent=(w(C,n.default),A(C)),r.default=e;function C(e,t){return g(this,C),(e=m(this,C,[e])).tile=t,e}function I(e){var t;return g(this,I),(t=m(this,I,[{attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX,interpolate:e.interpolate}])).on,t.once,t.un,t.opaque_=void 0!==e.opaque&&e.opaque,t.tilePixelRatio_=void 0!==e.tilePixelRatio?e.tilePixelRatio:1,t.tileGrid=void 0!==e.tileGrid?e.tileGrid:null,t.tileGrid&&(0,p.toSize)(t.tileGrid.getTileSize(t.tileGrid.getMinZoom()),[256,256]),t.tileCache=new a.default(e.cacheSize||0),t.tmpSize=[0,0],t.key_=e.key||"",t.tileOptions={transition:e.transition,interpolate:e.interpolate},t.zDirection=e.zDirection||0,t}},{"../TileCache.js":101,"../TileState.js":104,"../asserts.js":111,"../events/Event.js":133,"../proj.js":283,"../size.js":337,"../tilecoord.js":396,"../tilegrid.js":397,"../util.js":404,"./Source.js":356}],359:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=(n=e("./TileImage.js"))&&n.__esModule?n:{default:n},a=e("../extent.js"),s=e("./arcgisRest.js"),u=e("../math.js"),l=e("../size.js"),c=e("../tilecoord.js");function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function h(e,t,r){t=d(t);var n=e,t=p()?Reflect.construct(t,r||[],d(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(p=function(){return!!e})()}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){return(g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var n=function(){function r(e){var t;if(this instanceof r)return(t=h(this,r,[{attributions:(e=e||{}).attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction,url:e.url,urls:e.urls,wrapX:void 0===e.wrapX||e.wrapX,transition:e.transition,zDirection:e.zDirection}])).params_=Object.assign({},e.params),t.hidpi_=void 0===e.hidpi||e.hidpi,t.tmpExtent_=(0,a.createEmpty)(),t.setKey(t.getKeyForParams_()),t;throw new TypeError("Cannot call a class as a function")}var e,t=r,n=o.default;if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&g(t,n),t=r,(n=[{key:"getKeyForParams_",value:function(){var e,t=0,r=[];for(e in this.params_)r[t++]=e+"-"+this.params_[e];return r.join("/")}},{key:"getParams",value:function(){return this.params_}},{key:"getRequestUrl_",value:function(e,t,r,n,i,o){var a=this.urls;if(a)return a=1==a.length?a[0]:a[(0,u.modulo)((0,c.hash)(e),a.length)],(0,s.getRequestUrl)(a,r,(this.tileGrid||this.getTileGridForProjection(i)).getResolution(e[0]),n,i,o)}},{key:"getTilePixelRatio",value:function(e){return this.hidpi_?e:1}},{key:"updateParams",value:function(e){Object.assign(this.params_,e),this.setKey(this.getKeyForParams_())}},{key:"tileUrlFunction",value:function(e,t,r){var n,i,o=this.getTileGrid();if(!((o=o||this.getTileGridForProjection(r)).getResolutions().length<=e[0]))return 1==t||this.hidpi_||(t=1),n=o.getTileCoordExtent(e,this.tmpExtent_),o=(0,l.toSize)(o.getTileSize(e[0]),this.tmpSize),1!=t&&(o=(0,l.scale)(o,t,this.tmpSize)),i={F:"image",FORMAT:"PNG32",TRANSPARENT:!0},Object.assign(i,this.params_),this.getRequestUrl_(e,o,n,t,r,i)}}])&&f(t.prototype,n),e&&f(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();r.default=n},{"../extent.js":142,"../math.js":279,"../size.js":337,"../tilecoord.js":396,"./TileImage.js":362,"./arcgisRest.js":373}],360:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=(n=e("./XYZ.js"))&&n.__esModule?n:{default:n},a=e("../dom.js"),s=e("../size.js");function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function l(e,t,r){t=f(t);var n=e,t=c()?Reflect.construct(t,r||[],f(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(c=function(){return!!e})()}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var n=function(){function t(e){var i;if(this instanceof t)return i=l(this,t,[{opaque:!1,projection:(e=e||{}).projection,tileGrid:e.tileGrid,wrapX:void 0===e.wrapX||e.wrapX,zDirection:e.zDirection,url:e.template||"z:{z} x:{x} y:{y}",tileLoadFunction:function(e,t){var r=e.getTileCoord()[0],r=(0,s.toSize)(i.tileGrid.getTileSize(r)),n=(0,a.createCanvasContext2D)(r[0],r[1]);n.strokeStyle="grey",n.strokeRect(.5,.5,r[0]+.5,r[1]+.5),n.fillStyle="grey",n.strokeStyle="white",n.textAlign="center",n.textBaseline="middle",n.font="24px sans-serif",n.lineWidth=4,n.strokeText(t,r[0]/2,r[1]/2,r[0]),n.fillText(t,r[0]/2,r[1]/2,r[0]),e.setImage(n.canvas)}}]);throw new TypeError("Cannot call a class as a function")}var e,r,n=t,i=o.default;if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function");return n.prototype=Object.create(i&&i.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),i&&h(n,i),n=t,e&&u(n.prototype,e),r&&u(n,r),Object.defineProperty(n,"prototype",{writable:!1}),n}();r.default=n},{"../dom.js":130,"../size.js":337,"./XYZ.js":371}],361:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;r.default={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"}},{}],362:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=n(e("../events/EventType.js")),o=n(e("../ImageTile.js")),g=n(e("../reproj/Tile.js")),s=n(e("../TileCache.js")),l=n(e("../TileState.js")),u=n(e("./UrlTile.js")),y=e("../proj.js"),A=e("../tilecoord.js"),c=e("../tilegrid.js"),f=e("../util.js");function n(e){return e&&e.__esModule?e:{default:e}}function h(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function p(e,t,r){t=v(t);var n=e,t=d()?Reflect.construct(t,r||[],v(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(d=function(){return!!e})()}function m(){return(m="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=v(e)););return e}(e,t);if(n)return(n=Object.getOwnPropertyDescriptor(n,t)).get?n.get.call(arguments.length<3?e:r):n.value}).apply(null,arguments)}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t){return(b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}e=function(){function r(e){var t;if(this instanceof r)return(t=p(this,r,[{attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction||_,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,interpolate:void 0===e.interpolate||e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}])).crossOrigin=void 0!==e.crossOrigin?e.crossOrigin:null,t.tileClass=void 0!==e.tileClass?e.tileClass:o.default,t.tileCacheForProjection={},t.tileGridForProjection={},t.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,t.renderReprojectionEdges_=!1,t;throw new TypeError("Cannot call a class as a function")}var e,t=r,n=u.default;if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&b(t,n),t=r,(n=[{key:"canExpireCache",value:function(){if(this.tileCache.canExpireCache())return!0;for(var e in this.tileCacheForProjection)if(this.tileCacheForProjection[e].canExpireCache())return!0;return!1}},{key:"expireCache",value:function(e,t){var r,n=this.getTileCacheForProjection(e);for(r in this.tileCache.expireCache(this.tileCache==n?t:{}),this.tileCacheForProjection){var i=this.tileCacheForProjection[r];i.expireCache(i==n?t:{})}}},{key:"getGutterForProjection",value:function(e){return this.getProjection()&&e&&!(0,y.equivalent)(this.getProjection(),e)?0:this.getGutter()}},{key:"getGutter",value:function(){return 0}},{key:"getKey",value:function(){var e=m(v(r.prototype),"getKey",this).call(this);return this.getInterpolate()||(e+=":disable-interpolation"),e}},{key:"getOpaque",value:function(e){return!(this.getProjection()&&e&&!(0,y.equivalent)(this.getProjection(),e))&&m(v(r.prototype),"getOpaque",this).call(this,e)}},{key:"getTileGridForProjection",value:function(e){var t=this.getProjection();return!this.tileGrid||t&&!(0,y.equivalent)(t,e)?((t=(0,f.getUid)(e))in this.tileGridForProjection||(this.tileGridForProjection[t]=(0,c.getForProjection)(e)),this.tileGridForProjection[t]):this.tileGrid}},{key:"getTileCacheForProjection",value:function(e){var t=this.getProjection();return!t||(0,y.equivalent)(t,e)?this.tileCache:((t=(0,f.getUid)(e))in this.tileCacheForProjection||(this.tileCacheForProjection[t]=new s.default(this.tileCache.highWaterMark)),this.tileCacheForProjection[t])}},{key:"createTile_",value:function(e,t,r,n,i,o){e=[e,t,r],t=this.getTileCoordForTileUrlFunction(e,i),r=t?this.tileUrlFunction(t,n,i):void 0,t=new this.tileClass(e,void 0!==r?l.default.IDLE:l.default.EMPTY,void 0!==r?r:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return t.key=o,t.addEventListener(a.default.CHANGE,this.handleTileChange.bind(this)),t}},{key:"getTile",value:function(e,t,r,n,i){var o,a,s,u,l,c,f,h,p=this,d=this.getProjection();return d&&i&&!(0,y.equivalent)(d,i)?(a=this.getTileCacheForProjection(i),u=(0,A.getKey)(s=[e,t,r]),a.containsKey(u)&&(o=a.get(u)),l=this.getKey(),o&&o.key==l?o:(h=this.getTileGridForProjection(d),c=this.getTileGridForProjection(i),f=this.getTileCoordForTileUrlFunction(s,i),(h=new g.default(d,h,i,c,s,f,this.getTilePixelRatio(n),this.getGutter(),function(e,t,r,n){return p.getTileInternal(e,t,r,n,d)},this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.tileOptions)).key=l,o?(h.interimTile=o,h.refreshInterimChain(),a.replace(u,h)):a.set(u,h),h)):this.getTileInternal(e,t,r,n,d||i)}},{key:"getTileInternal",value:function(e,t,r,n,i){var o,a=null,s=(0,A.getKeyZXY)(e,t,r),u=this.getKey();return this.tileCache.containsKey(s)?(a=this.tileCache.get(s)).key!=u&&(o=a,a=this.createTile_(e,t,r,n,i,u),o.getState()==l.default.IDLE?a.interimTile=o.interimTile:a.interimTile=o,a.refreshInterimChain(),this.tileCache.replace(s,a)):(a=this.createTile_(e,t,r,n,i,u),this.tileCache.set(s,a)),a}},{key:"setRenderReprojectionEdges",value:function(e){if(this.renderReprojectionEdges_!=e){for(var t in this.renderReprojectionEdges_=e,this.tileCacheForProjection)this.tileCacheForProjection[t].clear();this.changed()}}},{key:"setTileGridForProjection",value:function(e,t){var e=(0,y.get)(e);!e||(e=(0,f.getUid)(e))in this.tileGridForProjection||(this.tileGridForProjection[e]=t)}},{key:"clear",value:function(){for(var e in m(v(r.prototype),"clear",this).call(this),this.tileCacheForProjection)this.tileCacheForProjection[e].clear()}}])&&h(t.prototype,n),e&&h(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();function _(e,t){e.getImage().src=t}r.default=e},{"../ImageTile.js":87,"../TileCache.js":101,"../TileState.js":104,"../events/EventType.js":134,"../proj.js":283,"../reproj/Tile.js":331,"../tilecoord.js":396,"../tilegrid.js":397,"../util.js":404,"./UrlTile.js":366}],363:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=(n=e("./TileImage.js"))&&n.__esModule?n:{default:n},a=e("../extent.js"),s=e("../tileurlfunction.js"),u=e("../tilegrid.js"),l=e("../proj.js"),c=e("../net.js");function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function h(e,t,r){t=d(t);var n=e,t=p()?Reflect.construct(t,r||[],d(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(p=function(){return!!e})()}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){return(g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var n=function(){function n(e){var t,r;if(!(this instanceof n))throw new TypeError("Cannot call a class as a function");if((t=h(this,n,[{attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:(0,l.get)("EPSG:3857"),reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:"loading",tileLoadFunction:e.tileLoadFunction,wrapX:void 0===e.wrapX||e.wrapX,transition:e.transition,zDirection:e.zDirection}])).tileJSON_=null,t.tileSize_=e.tileSize,e.url)e.jsonp?(0,c.jsonp)(e.url,t.handleTileJSONResponse.bind(t),t.handleTileJSONError.bind(t)):((r=new XMLHttpRequest).addEventListener("load",t.onXHRLoad_.bind(t)),r.addEventListener("error",t.onXHRError_.bind(t)),r.open("GET",e.url),r.send());else{if(!e.tileJSON)throw new Error("Either `url` or `tileJSON` options must be provided");t.handleTileJSONResponse(e.tileJSON)}return t}var e,t=n,r=o.default;if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&g(t,r),t=n,(r=[{key:"onXHRLoad_",value:function(e){var t,r=e.target;if(!r.status||200<=r.status&&r.status<300){try{t=JSON.parse(r.responseText)}catch(e){return void this.handleTileJSONError()}this.handleTileJSONResponse(t)}else this.handleTileJSONError()}},{key:"onXHRError_",value:function(e){this.handleTileJSONError()}},{key:"getTileJSON",value:function(){return this.tileJSON_}},{key:"handleTileJSONResponse",value:function(t){var e,r,n=(0,l.get)("EPSG:4326"),i=this.getProjection(),n=(void 0!==t.bounds&&(n=(0,l.getTransformFromProjections)(n,i),e=(0,a.applyTransform)(t.bounds,n)),(0,u.extentFromProjection)(i)),i=t.minzoom||0,o=t.maxzoom||22,o=(0,u.createXYZ)({extent:n,maxZoom:o,minZoom:i,tileSize:this.tileSize_});this.tileGrid=o,this.tileUrlFunction=(0,s.createFromTemplates)(t.tiles,o),t.attribution&&!this.getAttributions()&&(r=void 0!==e?e:n,this.setAttributions(function(e){return(0,a.intersects)(r,e.extent)?[t.attribution]:null})),this.tileJSON_=t,this.setState("ready")}},{key:"handleTileJSONError",value:function(){this.setState("error")}}])&&f(t.prototype,r),e&&f(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();r.default=n},{"../extent.js":142,"../net.js":280,"../proj.js":283,"../tilegrid.js":397,"../tileurlfunction.js":401,"./TileImage.js":362}],364:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=(n=e("./TileImage.js"))&&n.__esModule?n:{default:n},u=e("./wms.js"),a=e("../uri.js"),l=e("../extent.js"),c=e("../reproj.js"),s=e("../string.js"),f=e("../proj.js"),h=e("../math.js"),p=e("../tilecoord.js");function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function g(e,t,r){t=A(t);var n=e,t=y()?Reflect.construct(t,r||[],A(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(y=function(){return!!e})()}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var n=function(){function n(e){if(!(this instanceof n))throw new TypeError("Cannot call a class as a function");e=e||{};var t=Object.assign({},e.params),r=!("TRANSPARENT"in t)||t.TRANSPARENT;return(r=g(this,n,[{attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,opaque:!r,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileClass:e.tileClass,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction,url:e.url,urls:e.urls,wrapX:void 0===e.wrapX||e.wrapX,transition:e.transition,zDirection:e.zDirection}])).gutter_=void 0!==e.gutter?e.gutter:0,r.params_=t,r.v13_=!0,r.serverType_=e.serverType,r.hidpi_=void 0===e.hidpi||e.hidpi,r.tmpExtent_=(0,l.createEmpty)(),r.updateV13_(),r.setKey(r.getKeyForParams_()),r}var e,t=n,r=o.default;if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&m(t,r),t=n,(r=[{key:"getFeatureInfoUrl",value:function(e,t,r,n){var i,r=(0,f.get)(r),o=this.getProjection()||r,a=(a=this.getTileGrid())||this.getTileGridForProjection(o),s=(0,f.transform)(e,r,o),e=(0,c.calculateSourceResolution)(o,r,e,t),t=a.getZForResolution(e,this.zDirection),e=a.getResolution(t),t=a.getTileCoordForCoordAndZ(s,t);if(!(a.getResolutions().length<=t[0]))return a=a.getTileCoordExtent(t,this.tmpExtent_),0!==(i=this.gutter_)&&(a=(0,l.buffer)(a,e*i,a)),i={QUERY_LAYERS:this.params_.LAYERS},Object.assign(i,(0,u.getRequestParams)(this.params_,"GetFeatureInfo"),n),n=Math.floor((s[0]-a[0])/e),s=Math.floor((a[3]-s[1])/e),i[this.v13_?"I":"X"]=n,i[this.v13_?"J":"Y"]=s,this.getRequestUrl_(t,a,1,o||r,i)}},{key:"getLegendUrl",value:function(e,t){if(void 0!==this.urls[0]){var r={SERVICE:"WMS",VERSION:u.DEFAULT_VERSION,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(void 0===t||void 0===t.LAYER){var n=this.params_.LAYERS;if(Array.isArray(n)&&1!==n.length)return;r.LAYER=n}return void 0!==e&&(n=this.getProjection()?this.getProjection().getMetersPerUnit():1,r.SCALE=e*n/28e-5),Object.assign(r,t),(0,a.appendParams)(this.urls[0],r)}}},{key:"getGutter",value:function(){return this.gutter_}},{key:"getParams",value:function(){return this.params_}},{key:"getRequestUrl_",value:function(e,t,r,n,i){var o=this.urls;if(o)return o=1==o.length?o[0]:o[(0,h.modulo)((0,p.hash)(e),o.length)],(0,u.getImageSrc)(t,(this.tileGrid||this.getTileGridForProjection(n)).getResolution(e[0]),r,n,o,i,this.serverType_)}},{key:"getTilePixelRatio",value:function(e){return this.hidpi_&&void 0!==this.serverType_?e:1}},{key:"getKeyForParams_",value:function(){var e,t=0,r=[];for(e in this.params_)r[t++]=e+"-"+this.params_[e];return r.join("/")}},{key:"updateParams",value:function(e){Object.assign(this.params_,e),this.updateV13_(),this.setKey(this.getKeyForParams_())}},{key:"updateV13_",value:function(){var e=this.params_.VERSION||u.DEFAULT_VERSION;this.v13_=0<=(0,s.compareVersions)(e,"1.3")}},{key:"tileUrlFunction",value:function(e,t,r){var n,i,o=this.getTileGrid();if(!((o=o||this.getTileGridForProjection(r)).getResolutions().length<=e[0]))return 1==t||this.hidpi_&&void 0!==this.serverType_||(t=1),i=o.getResolution(e[0]),o=o.getTileCoordExtent(e,this.tmpExtent_),0!==(n=this.gutter_)&&(o=(0,l.buffer)(o,i*n,o)),i=Object.assign({},(0,u.getRequestParams)(this.params_,"GetMap")),this.getRequestUrl_(e,o,t,r,i)}}])&&d(t.prototype,r),e&&d(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();r.default=n},{"../extent.js":142,"../math.js":279,"../proj.js":283,"../reproj.js":328,"../string.js":380,"../tilecoord.js":396,"../uri.js":403,"./TileImage.js":362,"./wms.js":378}],365:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.CustomTile=void 0;var o=g(e("../events/EventType.js")),n=g(e("../Tile.js")),a=g(e("./Tile.js")),s=g(e("../TileState.js")),u=e("../extent.js"),l=e("../tileurlfunction.js"),c=e("../tilegrid.js"),f=e("../tilecoord.js"),h=e("../proj.js"),p=e("../events.js"),d=e("../net.js");function g(e){return e&&e.__esModule?e:{default:e}}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function A(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function m(e,t,r){return t&&A(e.prototype,t),r&&A(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function v(e,t,r){t=_(t);var n=e,t=b()?Reflect.construct(t,r||[],_(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(b=function(){return!!e})()}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function w(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&E(e,t)}function E(e,t){return(E=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var C=r.CustomTile=(w(S,n.default),m(S,[{key:"getImage",value:function(){return null}},{key:"getData",value:function(e){var t;return!this.grid_||!this.keys_||(t=(e[0]-this.extent_[0])/(this.extent_[2]-this.extent_[0]),e=(e[1]-this.extent_[1])/(this.extent_[3]-this.extent_[1]),"string"!=typeof(e=this.grid_[Math.floor((1-e)*this.grid_.length)]))?null:(93<=(t=e.charCodeAt(Math.floor(t*e.length)))&&t--,35<=t&&t--,e=null,(t-=32)in this.keys_&&(t=this.keys_[t],e=this.data_&&t in this.data_?this.data_[t]:t),e)}},{key:"forDataAtCoordinate",value:function(t,r,e){var n=this;this.state==s.default.EMPTY&&!0===e?(this.state=s.default.IDLE,(0,p.listenOnce)(this,o.default.CHANGE,function(e){r(this.getData(t))},this),this.loadInternal_()):!0===e?setTimeout(function(){r(n.getData(t))},0):r(this.getData(t))}},{key:"getKey",value:function(){return this.src_}},{key:"handleError_",value:function(){this.state=s.default.ERROR,this.changed()}},{key:"handleLoad_",value:function(e){this.grid_=e.grid,this.keys_=e.keys,this.data_=e.data,this.state=s.default.LOADED,this.changed()}},{key:"loadInternal_",value:function(){var e;this.state==s.default.IDLE&&(this.state=s.default.LOADING,this.jsonp_?(0,d.jsonp)(this.src_,this.handleLoad_.bind(this),this.handleError_.bind(this)):((e=new XMLHttpRequest).addEventListener("load",this.onXHRLoad_.bind(this)),e.addEventListener("error",this.onXHRError_.bind(this)),e.open("GET",this.src_),e.send()))}},{key:"onXHRLoad_",value:function(e){var t,r=e.target;if(!r.status||200<=r.status&&r.status<300){try{t=JSON.parse(r.responseText)}catch(e){return void this.handleError_()}this.handleLoad_(t)}else this.handleError_()}},{key:"onXHRError_",value:function(e){this.handleError_()}},{key:"load",value:function(){this.preemptive_?this.loadInternal_():this.setState(s.default.EMPTY)}}])),e=(w(I,a.default),m(I,[{key:"onXHRLoad_",value:function(e){var t,r=e.target;if(!r.status||200<=r.status&&r.status<300){try{t=JSON.parse(r.responseText)}catch(e){return void this.handleTileJSONError()}this.handleTileJSONResponse(t)}else this.handleTileJSONError()}},{key:"onXHRError_",value:function(e){this.handleTileJSONError()}},{key:"getTemplate",value:function(){return this.template_}},{key:"forDataAtCoordinateAndResolution",value:function(e,t,r,n){this.tileGrid?(t=this.tileGrid.getZForResolution(t,this.zDirection),t=this.tileGrid.getTileCoordForCoordAndZ(e,t),this.getTile(t[0],t[1],t[2],1,this.getProjection()).forDataAtCoordinate(e,r,n)):!0===n?setTimeout(function(){r(null)},0):r(null)}},{key:"handleTileJSONError",value:function(){this.setState("error")}},{key:"handleTileJSONResponse",value:function(t){var e,r,n=(0,h.get)("EPSG:4326"),i=this.getProjection(),n=(void 0!==t.bounds&&(n=(0,h.getTransformFromProjections)(n,i),e=(0,u.applyTransform)(t.bounds,n)),(0,c.extentFromProjection)(i)),i=t.minzoom||0,o=t.maxzoom||22,o=(0,c.createXYZ)({extent:n,maxZoom:o,minZoom:i}),i=(this.tileGrid=o,this.template_=t.template,t.grids);i?(this.tileUrlFunction_=(0,l.createFromTemplates)(i,o),t.attribution&&(r=void 0!==e?e:n,this.setAttributions(function(e){return(0,u.intersects)(r,e.extent)?[t.attribution]:null})),this.setState("ready")):this.setState("error")}},{key:"getTile",value:function(e,t,r,n,i){var o=(0,f.getKeyZXY)(e,t,r);return this.tileCache.containsKey(o)?this.tileCache.get(o):(t=this.getTileCoordForTileUrlFunction(e=[e,t,r],i),r=this.tileUrlFunction_(t,n,i),t=new C(e,void 0!==r?s.default.IDLE:s.default.EMPTY,void 0!==r?r:"",this.tileGrid.getTileCoordExtent(e),this.preemptive_,this.jsonp_),this.tileCache.set(o,t),t)}},{key:"useTile",value:function(e,t,r){e=(0,f.getKeyZXY)(e,t,r);this.tileCache.containsKey(e)&&this.tileCache.get(e)}}]));r.default=e;function I(e){var t,r;if(y(this,I),(t=v(this,I,[{projection:(0,h.get)("EPSG:3857"),state:"loading",wrapX:void 0===e.wrapX||e.wrapX,zDirection:e.zDirection}])).preemptive_=void 0===e.preemptive||e.preemptive,t.tileUrlFunction_=l.nullTileUrlFunction,t.template_=void 0,t.jsonp_=e.jsonp||!1,e.url)t.jsonp_?(0,d.jsonp)(e.url,t.handleTileJSONResponse.bind(t),t.handleTileJSONError.bind(t)):((r=new XMLHttpRequest).addEventListener("load",t.onXHRLoad_.bind(t)),r.addEventListener("error",t.onXHRError_.bind(t)),r.open("GET",e.url),r.send());else{if(!e.tileJSON)throw new Error("Either `url` or `tileJSON` options must be provided");t.handleTileJSONResponse(e.tileJSON)}return t}function S(e,t,r,n,i,o){return y(this,S),(e=v(this,S,[e,t])).src_=r,e.extent_=n,e.preemptive_=i,e.grid_=null,e.keys_=null,e.data_=null,e.jsonp_=o,e}},{"../Tile.js":100,"../TileState.js":104,"../events.js":132,"../events/EventType.js":134,"../extent.js":142,"../net.js":280,"../proj.js":283,"../tilecoord.js":396,"../tilegrid.js":397,"../tileurlfunction.js":401,"./Tile.js":358}],366:[function(e,t,r){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("./TileEventType.js")),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};t=f(t);if(t&&t.has(e))return t.get(e);var r,n={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in e){var o;"default"!==r&&{}.hasOwnProperty.call(e,r)&&((o=i?Object.getOwnPropertyDescriptor(e,r):null)&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=e[r])}return n.default=e,t&&t.set(e,n),n}(e("./Tile.js")),s=n(e("../TileState.js")),u=e("../tileurlfunction.js"),l=e("../tilecoord.js"),c=e("../util.js");function f(e){var t,r;return"function"!=typeof WeakMap?null:(t=new WeakMap,r=new WeakMap,(f=function(e){return e?r:t})(e))}function n(e){return e&&e.__esModule?e:{default:e}}function h(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=a(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==a(e)?e:e+""}(n.key),n)}}function p(e,t,r){t=g(t);var n=e,t=d()?Reflect.construct(t,r||[],g(e).constructor):t.apply(e,r);if(t&&("object"==a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(d=function(){return!!e})()}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t){return(y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}e=function(){function r(e){var t;if(this instanceof r)return(t=p(this,r,[{attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}])).generateTileUrlFunction_=t.tileUrlFunction===r.prototype.tileUrlFunction,t.tileLoadFunction=e.tileLoadFunction,e.tileUrlFunction&&(t.tileUrlFunction=e.tileUrlFunction),t.urls=null,e.urls?t.setUrls(e.urls):e.url&&t.setUrl(e.url),t.tileLoadingKeys_={},t;throw new TypeError("Cannot call a class as a function")}var e,t=r,n=o.default;if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&y(t,n),t=r,(n=[{key:"getTileLoadFunction",value:function(){return this.tileLoadFunction}},{key:"getTileUrlFunction",value:function(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}},{key:"getUrls",value:function(){return this.urls}},{key:"handleTileChange",value:function(e){var t,e=e.target,r=(0,c.getUid)(e),n=e.getState();n==s.default.LOADING?(this.tileLoadingKeys_[r]=!0,t=i.default.TILELOADSTART):r in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[r],t=n==s.default.ERROR?i.default.TILELOADERROR:n==s.default.LOADED?i.default.TILELOADEND:void 0),null!=t&&this.dispatchEvent(new o.TileSourceEvent(t,e))}},{key:"setTileLoadFunction",value:function(e){this.tileCache.clear(),this.tileLoadFunction=e,this.changed()}},{key:"setTileUrlFunction",value:function(e,t){this.tileUrlFunction=e,this.tileCache.pruneExceptNewestZ(),void 0!==t?this.setKey(t):this.changed()}},{key:"setUrl",value:function(e){e=(0,u.expandUrl)(e);this.urls=e,this.setUrls(e)}},{key:"setUrls",value:function(e){var t=(this.urls=e).join("\n");this.generateTileUrlFunction_?this.setTileUrlFunction((0,u.createFromTemplates)(e,this.tileGrid),t):this.setKey(t)}},{key:"tileUrlFunction",value:function(e,t,r){}},{key:"useTile",value:function(e,t,r){e=(0,l.getKeyZXY)(e,t,r);this.tileCache.containsKey(e)&&this.tileCache.get(e)}}])&&h(t.prototype,n),e&&h(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();r.default=e},{"../TileState.js":104,"../tilecoord.js":396,"../tileurlfunction.js":401,"../util.js":404,"./Tile.js":358,"./TileEventType.js":361}],367:[function(e,D,t){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.VectorSourceEvent=void 0;var o=_(e("../Collection.js")),a=_(e("../CollectionEventType.js")),r=_(e("../events/Event.js")),n=_(e("../events/EventType.js")),s=_(e("../ObjectEventType.js")),u=_(e("../structs/RBush.js")),c=_(e("../render/Feature.js")),l=_(e("./Source.js")),g=_(e("./VectorEventType.js")),f=e("../functions.js"),h=e("../loadingstrategy.js"),p=e("../asserts.js"),d=e("../extent.js"),y=e("../array.js"),A=e("../util.js"),m=e("../obj.js"),v=e("../events.js"),b=e("../featureloader.js");function _(e){return e&&e.__esModule?e:{default:e}}function w(e){return function(e){if(Array.isArray(e))return E(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){{var r;if(e)return"string"==typeof e?E(e,t):"Map"===(r="Object"===(r={}.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?E(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function C(){return(C="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=P(e)););return e}(e,t);if(n)return(n=Object.getOwnPropertyDescriptor(n,t)).get?n.get.call(arguments.length<3?e:r):n.value}).apply(null,arguments)}function I(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function S(e,t,r){return t&&I(e.prototype,t),r&&I(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function j(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function x(e,t,r){t=P(t);var n=e,t=O()?Reflect.construct(t,r||[],P(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(O=function(){return!!e})()}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function k(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&B(e,t)}function B(e,t){return(B=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var T=t.VectorSourceEvent=(k(R,r.default),S(R)),e=(k(M,l.default),S(M,[{key:"addFeature",value:function(e){this.addFeatureInternal(e),this.changed()}},{key:"addFeatureInternal",value:function(e){var t,r=(0,A.getUid)(e);this.addToIndex_(r,e)?(this.setupChangeEvents_(r,e),(t=e.getGeometry())?(t=t.getExtent(),this.featuresRtree_&&this.featuresRtree_.insert(t,e)):this.nullGeometryFeatures_[r]=e,this.dispatchEvent(new T(g.default.ADDFEATURE,e))):this.featuresCollection_&&this.featuresCollection_.remove(e)}},{key:"setupChangeEvents_",value:function(e,t){t instanceof c.default||(this.featureChangeKeys_[e]=[(0,v.listen)(t,n.default.CHANGE,this.handleFeatureChange_,this),(0,v.listen)(t,s.default.PROPERTYCHANGE,this.handleFeatureChange_,this)])}},{key:"addToIndex_",value:function(e,t){var r,n,i=!0;return void 0!==t.getId()&&((r=String(t.getId()))in this.idIndex_?t instanceof c.default&&(n=this.idIndex_[r])instanceof c.default?Array.isArray(n)?n.push(t):this.idIndex_[r]=[n,t]:i=!1:this.idIndex_[r]=t),i&&((0,p.assert)(!(e in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[e]=t),i}},{key:"addFeatures",value:function(e){this.addFeaturesInternal(e),this.changed()}},{key:"addFeaturesInternal",value:function(e){for(var t=[],r=[],n=[],i=0,o=e.length;i<o;i++){var a=e[i],s=(0,A.getUid)(a);this.addToIndex_(s,a)&&r.push(a)}for(var u=0,l=r.length;u<l;u++){var c=r[u],f=(0,A.getUid)(c),h=(this.setupChangeEvents_(f,c),c.getGeometry());h?(h=h.getExtent(),t.push(h),n.push(c)):this.nullGeometryFeatures_[f]=c}if(this.featuresRtree_&&this.featuresRtree_.load(t,n),this.hasListener(g.default.ADDFEATURE))for(var p=0,d=r.length;p<d;p++)this.dispatchEvent(new T(g.default.ADDFEATURE,r[p]))}},{key:"bindFeaturesCollection_",value:function(t){var r=this,n=!1;this.addEventListener(g.default.ADDFEATURE,function(e){n||(n=!0,t.push(e.feature),n=!1)}),this.addEventListener(g.default.REMOVEFEATURE,function(e){n||(n=!0,t.remove(e.feature),n=!1)}),t.addEventListener(a.default.ADD,function(e){n||(n=!0,r.addFeature(e.element),n=!1)}),t.addEventListener(a.default.REMOVE,function(e){n||(n=!0,r.removeFeature(e.element),n=!1)}),this.featuresCollection_=t}},{key:"clear",value:function(e){var t=this;if(e){for(var r in this.featureChangeKeys_)this.featureChangeKeys_[r].forEach(v.unlistenByKey);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_)for(var n in this.featuresRtree_.forEach(function(e){t.removeFeatureInternal(e)}),this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[n]);this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};e=new T(g.default.CLEAR);this.dispatchEvent(e),this.changed()}},{key:"forEachFeature",value:function(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}},{key:"forEachFeatureAtCoordinateDirect",value:function(r,n){var e=[r[0],r[1],r[0],r[1]];return this.forEachFeatureInExtent(e,function(e){var t=e.getGeometry();if(t instanceof c.default||t.intersectsCoordinate(r))return n(e)})}},{key:"forEachFeatureInExtent",value:function(e,t){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}},{key:"forEachFeatureIntersectingExtent",value:function(r,n){return this.forEachFeatureInExtent(r,function(e){var t=e.getGeometry();if(t instanceof c.default||t.intersectsExtent(r)){t=n(e);if(t)return t}})}},{key:"getFeaturesCollection",value:function(){return this.featuresCollection_}},{key:"getFeatures",value:function(){var e;return this.featuresCollection_?e=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(e=this.featuresRtree_.getAll(),(0,m.isEmpty)(this.nullGeometryFeatures_)||(0,y.extend)(e,Object.values(this.nullGeometryFeatures_))),e}},{key:"getFeaturesAtCoordinate",value:function(e){var t=[];return this.forEachFeatureAtCoordinateDirect(e,function(e){t.push(e)}),t}},{key:"getFeaturesInExtent",value:function(e,t){var r,n=this;return this.featuresRtree_?t&&t.canWrapX()&&this.getWrapX()?(t=(0,d.wrapAndSliceX)(e,t),(r=[]).concat.apply(r,w(t.map(function(e){return n.featuresRtree_.getInExtent(e)})))):this.featuresRtree_.getInExtent(e):this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}},{key:"getClosestFeatureToCoordinate",value:function(e,n){var i=e[0],o=e[1],a=null,s=[NaN,NaN],u=1/0,l=[-1/0,-1/0,1/0,1/0];return n=n||f.TRUE,this.featuresRtree_.forEachInExtent(l,function(e){var t,r;n(e)&&(r=e.getGeometry(),t=u,(u=r instanceof c.default?0:r.closestPointXY(i,o,s,u))<t)&&(a=e,r=Math.sqrt(u),l[0]=i-r,l[1]=o-r,l[2]=i+r,l[3]=o+r)}),a}},{key:"getExtent",value:function(e){return this.featuresRtree_.getExtent(e)}},{key:"getFeatureById",value:function(e){e=this.idIndex_[e.toString()];return void 0!==e?e:null}},{key:"getFeatureByUid",value:function(e){e=this.uidIndex_[e];return void 0!==e?e:null}},{key:"getFormat",value:function(){return this.format_}},{key:"getOverlaps",value:function(){return this.overlaps_}},{key:"getUrl",value:function(){return this.url_}},{key:"handleFeatureChange_",value:function(e){var e=e.target,t=(0,A.getUid)(e),r=e.getGeometry(),r=(r?(r=r.getExtent(),t in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[t],this.featuresRtree_&&this.featuresRtree_.insert(r,e)):this.featuresRtree_&&this.featuresRtree_.update(r,e)):t in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(e),this.nullGeometryFeatures_[t]=e),e.getId());void 0!==r?(r=r.toString(),this.idIndex_[r]!==e&&(this.removeFromIdIndex_(e),this.idIndex_[r]=e)):(this.removeFromIdIndex_(e),this.uidIndex_[t]=e),this.changed(),this.dispatchEvent(new T(g.default.CHANGEFEATURE,e))}},{key:"hasFeature",value:function(e){var t=e.getId();return void 0!==t?t in this.idIndex_:(0,A.getUid)(e)in this.uidIndex_}},{key:"isEmpty",value:function(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&(0,m.isEmpty)(this.nullGeometryFeatures_):!this.featuresCollection_||0===this.featuresCollection_.getLength()}},{key:"loadFeatures",value:function(e,r,n){for(var i=this,o=this.loadedExtentsRtree_,a=this.strategy_(e,r,n),s=0,t=a.length;s<t;++s)!function(){var t=a[s];o.forEachInExtent(t,function(e){return(0,d.containsExtent)(e.extent,t)})||(++i.loadingExtentsCount_,i.dispatchEvent(new T(g.default.FEATURESLOADSTART)),i.loader_.call(i,t,r,n,function(e){--i.loadingExtentsCount_,i.dispatchEvent(new T(g.default.FEATURESLOADEND,void 0,e))},function(){--i.loadingExtentsCount_,i.dispatchEvent(new T(g.default.FEATURESLOADERROR))}),o.insert(t,{extent:t.slice()}))}();this.loading=!(this.loader_.length<4)&&0<this.loadingExtentsCount_}},{key:"refresh",value:function(){this.clear(!0),this.loadedExtentsRtree_.clear(),C(P(M.prototype),"refresh",this).call(this)}},{key:"removeLoadedExtent",value:function(t){var r,e=this.loadedExtentsRtree_;e.forEachInExtent(t,function(e){if((0,d.equals)(e.extent,t))return r=e,!0}),r&&e.remove(r)}},{key:"removeFeatures",value:function(e){for(var t=[],r=0,n=e.length;r<n;++r){var i=e[r],i=this.removeFeatureInternal(i);i&&t.push(i)}0<t.length&&this.changed()}},{key:"removeFeature",value:function(e){e&&this.removeFeatureInternal(e)&&this.changed()}},{key:"removeFeatureInternal",value:function(e){var t,r,n=(0,A.getUid)(e);if(n in this.uidIndex_)return n in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[n]:this.featuresRtree_&&this.featuresRtree_.remove(e),null!=(t=this.featureChangeKeys_[n])&&t.forEach(v.unlistenByKey),delete this.featureChangeKeys_[n],void 0!==(t=e.getId())&&(t=t.toString(),(r=this.idIndex_[t])===e?delete this.idIndex_[t]:Array.isArray(r)&&(r.splice(r.indexOf(e),1),1===r.length)&&(this.idIndex_[t]=r[0])),delete this.uidIndex_[n],this.hasListener(g.default.REMOVEFEATURE)&&this.dispatchEvent(new T(g.default.REMOVEFEATURE,e)),e}},{key:"removeFromIdIndex_",value:function(e){var t,r=!1;for(t in this.idIndex_){var n=this.idIndex_[t];if(e instanceof c.default&&Array.isArray(n)&&n.includes(e))n.splice(n.indexOf(e),1);else if(this.idIndex_[t]===e){delete this.idIndex_[t],r=!0;break}}return r}},{key:"setLoader",value:function(e){this.loader_=e}},{key:"setUrl",value:function(e){(0,p.assert)(this.format_,"`format` must be set when `url` is set"),this.url_=e,this.setLoader((0,b.xhr)(e,this.format_))}}]));t.default=e;function M(e){var t;j(this,M),(t=x(this,M,[{attributions:(e=e||{}).attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:void 0===e.wrapX||e.wrapX}])).on,t.once,t.un,t.loader_=f.VOID,t.format_=e.format,t.overlaps_=void 0===e.overlaps||e.overlaps,t.url_=e.url,void 0!==e.loader?t.loader_=e.loader:void 0!==t.url_&&((0,p.assert)(t.format_,"`format` must be set when `url` is set"),t.loader_=(0,b.xhr)(t.url_,t.format_)),t.strategy_=void 0!==e.strategy?e.strategy:h.all;var r,n,i=void 0===e.useSpatialIndex||e.useSpatialIndex;return t.featuresRtree_=i?new u.default:null,t.loadedExtentsRtree_=new u.default,t.loadingExtentsCount_=0,t.nullGeometryFeatures_={},t.idIndex_={},t.uidIndex_={},t.featureChangeKeys_={},t.featuresCollection_=null,Array.isArray(e.features)?n=e.features:e.features&&(n=(r=e.features).getArray()),i||void 0!==r||(r=new o.default(n)),void 0!==n&&t.addFeaturesInternal(n),void 0!==r&&t.bindFeaturesCollection_(r),t}function R(e,t,r){return j(this,R),(e=x(this,R,[e])).feature=t,e.features=r,e}},{"../Collection.js":78,"../CollectionEventType.js":79,"../ObjectEventType.js":97,"../array.js":110,"../asserts.js":111,"../events.js":132,"../events/Event.js":133,"../events/EventType.js":134,"../extent.js":142,"../featureloader.js":144,"../functions.js":200,"../loadingstrategy.js":278,"../obj.js":281,"../render/Feature.js":295,"../structs/RBush.js":383,"../util.js":404,"./Source.js":356,"./VectorEventType.js":368}],368:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;r.default={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"}},{}],369:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,r.defaultLoadFunction=I;var l=n(e("../events/EventType.js")),o=n(e("../VectorTile.js")),a=n(e("../TileCache.js")),u=n(e("../tilegrid/TileGrid.js")),g=n(e("../TileState.js")),s=n(e("./UrlTile.js")),p=n(e("../VectorRenderTile.js")),c=e("../tilegrid/common.js"),y=e("../extent.js"),f=e("../tilegrid.js"),A=e("../tilecoord.js"),h=e("../obj.js"),d=e("../featureloader.js"),m=e("../size.js");function n(e){return e&&e.__esModule?e:{default:e}}function v(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function b(e,t,r){t=E(t);var n=e,t=_()?Reflect.construct(t,r||[],E(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(_=function(){return!!e})()}function w(){return(w="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=E(e)););return e}(e,t);if(n)return(n=Object.getOwnPropertyDescriptor(n,t)).get?n.get.call(arguments.length<3?e:r):n.value}).apply(null,arguments)}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function C(e,t){return(C=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}e=function(){function n(e){var t,r;if(this instanceof n)return t=e.projection||"EPSG:3857",r=e.extent||(0,f.extentFromProjection)(t),r=e.tileGrid||(0,f.createXYZ)({extent:r,maxResolution:e.maxResolution,maxZoom:void 0!==e.maxZoom?e.maxZoom:22,minZoom:e.minZoom,tileSize:e.tileSize||512}),(t=b(this,n,[{attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,interpolate:!0,opaque:!1,projection:t,state:e.state,tileGrid:r,tileLoadFunction:e.tileLoadFunction||I,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:void 0===e.wrapX||e.wrapX,transition:e.transition,zDirection:void 0===e.zDirection?1:e.zDirection}])).format_=e.format||null,t.sourceTileCache=new a.default(t.tileCache.highWaterMark),t.overlaps_=null==e.overlaps||e.overlaps,t.tileClass=e.tileClass||o.default,t.tileGrids_={},t;throw new TypeError("Cannot call a class as a function")}var e,t=n,r=s.default;if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&C(t,r),t=n,(r=[{key:"getFeaturesInExtent",value:function(f){var h,p,d=[],e=this.tileCache;return 0!==e.getCount()&&(h=(0,A.fromKey)(e.peekFirstKey())[0],p=this.tileGrid,e.forEach(function(e){if(e.tileCoord[0]===h&&e.getState()===g.default.LOADED)for(var t=e.getSourceTiles(),r=0,n=t.length;r<n;++r){var i=t[r],o=i.tileCoord;if((0,y.intersects)(f,p.getTileCoordExtent(o))){var a=i.getFeatures();if(a)for(var s=0,u=a.length;s<u;++s){var l=a[s],c=l.getGeometry();(0,y.intersects)(f,c.getExtent())&&d.push(l)}}}})),d}},{key:"getOverlaps",value:function(){return this.overlaps_}},{key:"clear",value:function(){this.tileCache.clear(),this.sourceTileCache.clear()}},{key:"expireCache",value:function(e,t){var o=this.getTileCacheForProjection(e),r=Object.keys(t).reduce(function(e,t){t=(0,A.getCacheKeyForTileKey)(t),t=o.peek(t);if(t)for(var r=t.sourceTiles,n=0,i=r.length;n<i;++n)e[r[n].getKey()]=!0;return e},{});w(E(n.prototype),"expireCache",this).call(this,e,t),this.sourceTileCache.expireCache(r)}},{key:"getSourceTiles",value:function(i,o,a){var e,t,s,r,u=this;return a.getState()===g.default.IDLE&&(a.setState(g.default.LOADING),r=a.wrappedTileCoord,e=(t=this.getTileGridForProjection(o)).getTileCoordExtent(r),r=r[0],t=t.getResolution(r),(0,y.buffer)(e,-t,e),(r=(s=this.tileGrid).getExtent())&&(0,y.getIntersection)(e,r,e),r=s.getZForResolution(t,this.zDirection),s.forEachTileCoord(e,r,function(e){var t=u.tileUrlFunction(e,i,o),n=u.sourceTileCache.containsKey(t)?u.sourceTileCache.get(t):new u.tileClass(e,t?g.default.IDLE:g.default.EMPTY,t,u.format_,u.tileLoadFunction),r=(a.sourceTiles.push(n),n.getState());r<g.default.LOADED&&(n.addEventListener(l.default.CHANGE,function e(t){u.handleTileChange(t);var r,t=n.getState();t!==g.default.LOADED&&t!==g.default.ERROR||((r=n.getKey())in a.errorTileKeys?n.getState()===g.default.LOADED&&delete a.errorTileKeys[r]:a.loadingSourceTiles--,t===g.default.ERROR?a.errorTileKeys[r]=!0:n.removeEventListener(l.default.CHANGE,e),0===a.loadingSourceTiles&&a.setState((0,h.isEmpty)(a.errorTileKeys)?g.default.LOADED:g.default.ERROR))}),a.loadingSourceTiles++),r===g.default.IDLE&&(n.extent=s.getTileCoordExtent(e),n.projection=o,n.resolution=s.getResolution(e[0]),u.sourceTileCache.set(t,n),n.load())}),a.loadingSourceTiles||a.setState(a.sourceTiles.some(function(e){return e.getState()===g.default.ERROR})?g.default.ERROR:g.default.LOADED)),a.sourceTiles}},{key:"getTile",value:function(e,t,r,n,i){var o,a,s,u,l,c=this,f=(0,A.getKeyZXY)(e,t,r),h=this.getKey();return this.tileCache.containsKey(f)&&(o=this.tileCache.get(f)).key===h?o:(r=this.getTileCoordForTileUrlFunction(t=[e,t,r],i),s=this.getTileGrid().getExtent(),u=this.getTileGridForProjection(i),r&&s&&(l=u.getTileCoordExtent(r),(0,y.buffer)(l,-u.getResolution(e),l),(0,y.intersects)(s,l)||(r=null)),a=!0,null!==r&&(s=this.tileGrid,l=u.getResolution(e),e=s.getZForResolution(l,1),u=u.getTileCoordExtent(r),(0,y.buffer)(u,-l,u),s.forEachTileCoord(u,e,function(e){a=a&&!c.tileUrlFunction(e,n,i)})),(l=new p.default(t,a?g.default.EMPTY:g.default.IDLE,r,this.getSourceTiles.bind(this,n,i))).key=h,o?(l.interimTile=o,l.refreshInterimChain(),this.tileCache.replace(f,l)):this.tileCache.set(f,l),l)}},{key:"getTileGridForProjection",value:function(e){var e=e.getCode(),t=this.tileGrids_[e];if(!t){for(var r=this.tileGrid,n=r.getResolutions().slice(),i=n.map(function(e,t){return r.getOrigin(t)}),o=n.map(function(e,t){return r.getTileSize(t)}),a=c.DEFAULT_MAX_ZOOM+1,s=n.length;s<a;++s)n.push(n[s-1]/2),i.push(i[s-1]),o.push(o[s-1]);t=new u.default({extent:r.getExtent(),origins:i,resolutions:n,tileSizes:o}),this.tileGrids_[e]=t}return t}},{key:"getTilePixelRatio",value:function(e){return e}},{key:"getTilePixelSize",value:function(e,t,r){r=this.getTileGridForProjection(r),r=(0,m.toSize)(r.getTileSize(e),this.tmpSize);return[Math.round(r[0]*t),Math.round(r[1]*t)]}},{key:"updateCacheSize",value:function(e,t){w(E(n.prototype),"updateCacheSize",this).call(this,2*e,t),this.sourceTileCache.highWaterMark=this.getTileCacheForProjection(t).highWaterMark}}])&&v(t.prototype,r),e&&v(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();r.default=e;function I(n,i){n.setLoader(function(e,t,r){(0,d.loadFeaturesXhr)(i,n.getFormat(),e,t,r,n.onLoad.bind(n),n.onError.bind(n))})}},{"../TileCache.js":101,"../TileState.js":104,"../VectorRenderTile.js":105,"../VectorTile.js":106,"../events/EventType.js":134,"../extent.js":142,"../featureloader.js":144,"../obj.js":281,"../size.js":337,"../tilecoord.js":396,"../tilegrid.js":397,"../tilegrid/TileGrid.js":398,"../tilegrid/common.js":400,"./UrlTile.js":366}],370:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,r.optionsFromCapabilities=function(e,i){var t=e.Contents.Layer,t=null==t?void 0:t.find(function(e){return e.Identifier==i.layer});if(!t)return null;var o=e.Contents.TileMatrixSet,r=((s=1<t.TileMatrixSetLink.length?"projection"in i?t.TileMatrixSetLink.findIndex(function(t){var e=o.find(function(e){return e.Identifier==t.TileMatrixSet}).SupportedCRS,r=(0,S.get)(e),n=(0,S.get)(i.projection);return r&&n?(0,S.equivalent)(r,n):e==i.projection}):t.TileMatrixSetLink.findIndex(function(e){return e.TileMatrixSet==i.matrixSet}):0)<0&&(s=0),t.TileMatrixSetLink[s].TileMatrixSet),n=t.TileMatrixSetLink[s].TileMatrixSetLimits,a=t.Format[0],s=("format"in i&&(a=i.format),(s=t.Style.findIndex(function(e){return"style"in i?e.Title==i.style:e.isDefault}))<0&&(s=0),t.Style[s].Identifier),u={};"Dimension"in t&&t.Dimension.forEach(function(e,t,r){var n=e.Identifier,i=e.Default;void 0===i&&(i=e.Value[0]),u[n]=i});var l,c=e.Contents.TileMatrixSet.find(function(e){return e.Identifier==r}),f=c.SupportedCRS;f&&(l=(0,S.get)(f)),"projection"in i&&(!(f=(0,S.get)(i.projection))||l&&!(0,S.equivalent)(f,l)||(l=f));var f=!1,h="ne"==l.getAxisOrientation().substr(0,2),p=c.TileMatrix[0],d={MinTileCol:0,MinTileRow:0,MaxTileCol:p.MatrixWidth-1,MaxTileRow:p.MatrixHeight-1};n&&(d=n[n.length-1],g=c.TileMatrix.find(function(e){return e.Identifier===d.TileMatrix||c.Identifier+":"+e.Identifier===d.TileMatrix}))&&(p=g);var g=28e-5*p.ScaleDenominator/l.getMetersPerUnit(),y=h?[p.TopLeftCorner[1],p.TopLeftCorner[0]]:p.TopLeftCorner,A=p.TileWidth*g,p=p.TileHeight*g,g=c.BoundingBox,h=(g&&h&&(g=[g[1],g[0],g[3],g[2]]),[y[0]+A*d.MinTileCol,y[1]-p*(1+d.MaxTileRow),y[0]+A*(1+d.MaxTileCol),y[1]-p*d.MinTileRow]);void 0===g||(0,C.containsExtent)(g,h)||(A=t.WGS84BoundingBox,y=(0,S.get)("EPSG:4326").getExtent(),h=g,f=A?A[0]===y[0]&&A[2]===y[2]:(p=(0,S.transformExtent)(g,c.SupportedCRS,"EPSG:4326"))[0]-1e-10<=y[0]&&p[2]+1e-10>=y[2]);var A=(0,I.createFromCapabilitiesMatrixSet)(c,h,n),m=[],v=i.requestEncoding;if(v=void 0!==v?v:"","OperationsMetadata"in e&&"GetTile"in e.OperationsMetadata)for(var b=e.OperationsMetadata.GetTile.DCP.HTTP.Get,_=0,w=b.length;_<w;++_)if(b[_].Constraint){var E=b[_].Constraint.find(function(e){return"GetEncoding"==e.name}).AllowedValues.Value;if("KVP"!==(v=""===v?E[0]:v))break;E.includes("KVP")&&m.push(b[_].href)}else b[_].href&&(v="KVP",m.push(b[_].href));return 0===m.length&&(v="REST",t.ResourceURL.forEach(function(e){"tile"===e.resourceType&&(a=e.format,m.push(e.template))})),{urls:m,layer:i.layer,matrixSet:r,format:a,projection:l,requestEncoding:v,tileGrid:A,style:s,dimensions:u,wrapX:f,crossOrigin:i.crossOrigin}};var n=(h=e("./TileImage.js"))&&h.__esModule?h:{default:h},u=e("../uri.js"),C=e("../extent.js"),I=e("../tilegrid/WMTS.js"),o=e("../tileurlfunction.js"),S=e("../proj.js");function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function s(e,t,r){t=c(t);var n=e,t=l()?Reflect.construct(t,r||[],c(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(l=function(){return!!e})()}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var h=function(){function i(e){var t,r,n;if(this instanceof i)return t=void 0!==e.requestEncoding?e.requestEncoding:"KVP",r=e.tileGrid,void 0===(n=e.urls)&&void 0!==e.url&&(n=(0,o.expandUrl)(e.url)),(r=s(this,i,[{attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileClass:e.tileClass,tileGrid:r,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,urls:n,wrapX:void 0!==e.wrapX&&e.wrapX,transition:e.transition,zDirection:e.zDirection}])).version_=void 0!==e.version?e.version:"1.0.0",r.format_=void 0!==e.format?e.format:"image/jpeg",r.dimensions_=void 0!==e.dimensions?e.dimensions:{},r.layer_=e.layer,r.matrixSet_=e.matrixSet,r.style_=e.style,r.requestEncoding_=t,r.setKey(r.getKeyForDimensions_()),n&&0<n.length&&(r.tileUrlFunction=(0,o.createFromTileUrlFunctions)(n.map(r.createFromWMTSTemplate.bind(r)))),r;throw new TypeError("Cannot call a class as a function")}var e,t=i,r=n.default;if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&f(t,r),t=i,(r=[{key:"setUrls",value:function(e){var t=(this.urls=e).join("\n");this.setTileUrlFunction((0,o.createFromTileUrlFunctions)(e.map(this.createFromWMTSTemplate.bind(this))),t)}},{key:"getDimensions",value:function(){return this.dimensions_}},{key:"getFormat",value:function(){return this.format_}},{key:"getLayer",value:function(){return this.layer_}},{key:"getMatrixSet",value:function(){return this.matrixSet_}},{key:"getRequestEncoding",value:function(){return this.requestEncoding_}},{key:"getStyle",value:function(){return this.style_}},{key:"getVersion",value:function(){return this.version_}},{key:"getKeyForDimensions_",value:function(){var e,t=this.urls?this.urls.slice(0):[];for(e in this.dimensions_)t.push(e+"-"+this.dimensions_[e]);return t.join("/")}},{key:"updateDimensions",value:function(e){Object.assign(this.dimensions_,e),this.setKey(this.getKeyForDimensions_())}},{key:"createFromWMTSTemplate",value:function(i){var o=this.requestEncoding_,r={layer:this.layer_,style:this.style_,tilematrixset:this.matrixSet_},a=("KVP"==o&&Object.assign(r,{Service:"WMTS",Request:"GetTile",Version:this.version_,Format:this.format_}),i="KVP"==o?(0,u.appendParams)(i,r):i.replace(/\{(\w+?)\}/g,function(e,t){return t.toLowerCase()in r?r[t.toLowerCase()]:e}),this.tileGrid),s=this.dimensions_;return function(e,t,r){var n;if(e)return n={TileMatrix:a.getMatrixId(e[0]),TileCol:e[1],TileRow:e[2]},Object.assign(n,s),e=i,"KVP"==o?(0,u.appendParams)(e,n):e.replace(/\{(\w+?)\}/g,function(e,t){return n[t]})}}}])&&a(t.prototype,r),e&&a(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();r.default=h},{"../extent.js":142,"../proj.js":283,"../tilegrid/WMTS.js":399,"../tileurlfunction.js":401,"../uri.js":403,"./TileImage.js":362}],371:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=(n=e("./TileImage.js"))&&n.__esModule?n:{default:n},a=e("../tilegrid.js");function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function u(e,t,r){t=c(t);var n=e,t=l()?Reflect.construct(t,r||[],c(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(l=function(){return!!e})()}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var n=function(){function n(e){var t,r;if(this instanceof n)return t=void 0!==(e=e||{}).projection?e.projection:"EPSG:3857",r=void 0!==e.tileGrid?e.tileGrid:(0,a.createXYZ)({extent:(0,a.extentFromProjection)(t),maxResolution:e.maxResolution,maxZoom:e.maxZoom,minZoom:e.minZoom,tileSize:e.tileSize}),(t=u(this,n,[{attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,opaque:e.opaque,projection:t,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileGrid:r,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:void 0===e.wrapX||e.wrapX,transition:e.transition,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}])).gutter_=void 0!==e.gutter?e.gutter:0,t;throw new TypeError("Cannot call a class as a function")}var e,t=n,r=o.default;if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&f(t,r),t=n,(r=[{key:"getGutter",value:function(){return this.gutter_}}])&&s(t.prototype,r),e&&s(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();r.default=n},{"../tilegrid.js":397,"./TileImage.js":362}],372:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.CustomTile=void 0;var m=e("../tilegrid/common.js"),n=u(e("../ImageTile.js")),v=u(e("../tilegrid/TileGrid.js")),o=u(e("./TileImage.js")),a=u(e("../TileState.js")),s=e("../dom.js"),b=e("../tileurlfunction.js"),_=e("../extent.js"),w=e("../size.js");function u(e){return e&&e.__esModule?e:{default:e}}function E(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function c(e,t,r){return t&&l(e.prototype,t),r&&l(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function C(e,t,r){t=p(t);var n=e,t=f()?Reflect.construct(t,r||[],p(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(f=function(){return!!e})()}function h(){return(h="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=p(e)););return e}(e,t);if(n)return(n=Object.getOwnPropertyDescriptor(n,t)).get?n.get.call(arguments.length<3?e:r):n.value}).apply(null,arguments)}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}function g(e,t){return(g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var I=r.CustomTile=(d(y,n.default),c(y,[{key:"getImage",value:function(){var e,t;return this.zoomifyImage_||(e=h(p(y.prototype),"getImage",this).call(this),this.state==a.default.LOADED?(t=this.tileSize_,e.width==t[0]&&e.height==t[1]?this.zoomifyImage_=e:((t=(0,s.createCanvasContext2D)(t[0],t[1])).drawImage(e,0,0),this.zoomifyImage_=t.canvas,t.canvas)):e)}}])),e=(d(S,o.default),c(S));r.default=e;function S(e){E(this,S);var t,r=e.size,n=void 0!==e.tierSizeCalculation?e.tierSizeCalculation:"default",i=e.tilePixelRatio||1,o=r[0],a=r[1],u=[],s=e.tileSize||m.DEFAULT_TILE_SIZE,l=s*i;switch(n){case"default":for(;l<o||l<a;)u.push([Math.ceil(o/l),Math.ceil(a/l)]),l+=l;break;case"truncated":for(var c=o,f=a;l<c||l<f;)u.push([Math.ceil(c/l),Math.ceil(f/l)]),c>>=1,f>>=1;break;default:throw new Error("Unknown `tierSizeCalculation` configured")}u.push([1,1]),u.reverse();for(var h=[i],p=[0],d=1,g=u.length;d<g;d++)h.push(i<<d),p.push(u[d-1][0]*u[d-1][1]+p[d-1]);h.reverse();var r=new v.default({tileSize:s,extent:e.extent||[0,-a,o,0],resolutions:h}),n=e.url,n=(!n||n.includes("{TileGroup}")||n.includes("{tileIndex}")||(n+="{TileGroup}/{z}-{x}-{y}.jpg"),(0,b.expandUrl)(n)),y=s*i,n=(0,b.createFromTileUrlFunctions)(n.map(function(s){return function(e,t,r){var n,i,o,a;if(e)return n=e[0],o=(i=e[1])+(e=e[2])*u[n][0],a={z:n,x:i,y:e,tileIndex:o,TileGroup:"TileGroup"+((o+p[n])/y|0)},s.replace(/\{(\w+?)\}/g,function(e,t){return a[t]})}})),A=I.bind(null,(0,w.toSize)(s*i)),A=((t=C(this,S,[{attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:e.projection,tilePixelRatio:i,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileClass:A,tileGrid:r,tileUrlFunction:n,transition:e.transition}])).zDirection=e.zDirection,n(r.getTileCoordForCoordAndResolution((0,_.getCenter)(r.getExtent()),h[h.length-1]),1,null)),e=new Image;return e.addEventListener("error",function(){y=s,t.changed()}),e.src=A,t}function y(e,t,r,n,i,o,a){return E(this,y),(t=C(this,y,[t,r,n,i,o,a])).zoomifyImage_=null,t.tileSize_=e,t}},{"../ImageTile.js":87,"../TileState.js":104,"../dom.js":130,"../extent.js":142,"../size.js":337,"../tilegrid/TileGrid.js":398,"../tilegrid/common.js":400,"../tileurlfunction.js":401,"./TileImage.js":362}],373:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.createLoader=function(i){var o=i.load||n.decode,a=(0,l.get)(i.projection||"EPSG:3857");return function(r,e,n){n=i.hidpi?n:1;var t={F:"image",FORMAT:"PNG32",TRANSPARENT:!0},e=(Object.assign(t,i.params),r=(0,c.getRequestExtent)(r,e,n,i.ratio),h(i.url,r,e,n,a,t)),t=new Image;return null!==i.crossOrigin&&(t.crossOrigin=i.crossOrigin),o(t,e).then(function(e){var t=(0,u.getWidth)(r)/e.width*n;return{image:e,extent:r,resolution:t,pixelRatio:n}})}},r.getRequestUrl=h;var a=e("./common.js"),s=e("../uri.js"),n=e("../Image.js"),u=e("../extent.js"),l=e("../proj.js"),c=e("./Image.js"),f=e("../math.js");function h(e,t,r,n,i,o){i=i.getCode().split(/:(?=\d+$)/).pop(),r/=n,r=[(0,f.round)((0,u.getWidth)(t)/r,a.DECIMALS),(0,f.round)((0,u.getHeight)(t)/r,a.DECIMALS)],o.SIZE=r[0]+","+r[1],o.BBOX=t.join(","),o.BBOXSR=i,o.IMAGESR=i,o.DPI=Math.round(o.DPI?o.DPI*n:90*n),r=e.replace(/MapServer\/?$/,"MapServer/export").replace(/ImageServer\/?$/,"ImageServer/exportImage");return(0,s.appendParams)(r,o)}},{"../Image.js":84,"../extent.js":142,"../math.js":279,"../proj.js":283,"../uri.js":403,"./Image.js":346,"./common.js":374}],374:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.DEFAULT_WMS_VERSION=r.DECIMALS=void 0;r.DEFAULT_WMS_VERSION="1.3.0",r.DECIMALS=4},{}],375:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.createLoader=function(o){var a=o.load||n.decode;return function(t,e,r){var n=new Image,i=(null!==o.crossOrigin&&(n.crossOrigin=o.crossOrigin),t=(0,l.getRequestExtent)(t,e,r,o.ratio),(0,u.getWidth)(t)/e),e=(0,u.getHeight)(t)/e,i=function(e,t,r,n,i,o,a){o=function(e,t,r,n){var i=(0,u.getWidth)(e),e=(0,u.getHeight)(e),o=t[0],t=t[1],n=.0254/n;return o*e<t*i?i*r/(o*n):e*r/(t*n)}(r,n,o,a),r=(0,u.getCenter)(r),i={OPERATION:i?"GETDYNAMICMAPOVERLAYIMAGE":"GETMAPIMAGE",VERSION:"2.0.0",LOCALE:"en",CLIENTAGENT:"ol/source/ImageMapGuide source",CLIP:"1",SETDISPLAYDPI:a,SETDISPLAYWIDTH:Math.round(n[0]),SETDISPLAYHEIGHT:Math.round(n[1]),SETVIEWSCALE:o,SETVIEWCENTERX:r[0],SETVIEWCENTERY:r[1]};return Object.assign(i,t),(0,s.appendParams)(e,i)}(o.url,o.params,t,[i*r,e*r],o.useOverlay,o.metersPerUnit||1,o.displayDpi||96);return a(n,i).then(function(e){return{image:e,extent:t,pixelRatio:r}})}};var s=e("../uri.js"),n=e("../Image.js"),u=e("../extent.js"),l=e("./Image.js")},{"../Image.js":84,"../extent.js":142,"../uri.js":403,"./Image.js":346}],376:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.appendCollectionsQueryParam=h,r.getMapTileUrlTemplate=o,r.getTileSetInfo=function(i){return(0,R.getJSON)(i.url).then(function(e){var t,r=i,n=e.tileMatrixSetLimits;if("map"===e.dataType)t=o(e.links,r.mediaType,r.collections);else{if("vector"!==e.dataType)throw new Error('Expected tileset data type to be "map" or "vector"');t=a(e.links,r.mediaType,r.supportedMediaTypes,r.collections)}if(e.tileMatrixSet)return u(r,e.tileMatrixSet,t,n);if(e=e.links.find(function(e){return"http://www.opengis.net/def/rel/ogc/1.0/tiling-scheme"===e.rel}))return e=e.href,e=(0,R.resolveUrl)(r.url,e),(0,R.getJSON)(e).then(function(e){return u(r,e,t,n)});throw new Error("Expected http://www.opengis.net/def/rel/ogc/1.0/tiling-scheme link or tileMatrixSet")})},r.getVectorTileUrlTemplate=a;var M=(r=e("../tilegrid/TileGrid.js"))&&r.__esModule?r:{default:r},R=e("../net.js"),D=e("../proj.js"),L=e("../extent.js"),n=e("../console.js");var s={"image/png":!0,"image/jpeg":!0,"image/gif":!0,"image/webp":!0},f={"application/vnd.mapbox-vector-tile":!0,"application/geo+json":!0};function h(e,t){var r;return t.length?(r=new URL(e,"file:/")).pathname.split("/").includes("collections")?((0,n.error)('The "collections" query parameter cannot be added to collection endpoints'),e):(t=t.map(function(e){return encodeURIComponent(e)}).join(","),r.searchParams.append("collections",t),t=e.split("?")[0],r=decodeURIComponent(r.searchParams.toString()),"".concat(t,"?").concat(r)):e}function o(e,t,r){for(var n,i,o=0;o<e.length;++o){var a=e[o];if("item"===a.rel){if(a.type===t){n=a.href;break}(s[a.type]||!i&&a.type.startsWith("image/"))&&(i=a.href)}}if(!n){if(!i)throw new Error('Could not find "item" link');n=i}return n=r?h(n,r):n}function a(e,t,r,n){for(var i,o,a={},s=0;s<e.length;++s){var u=e[s];if(a[u.type]=u.href,"item"===u.rel){if(u.type===t){i=u.href;break}f[u.type]&&(o=u.href)}}if(!i&&r)for(var l=0;l<r.length;++l){var c=r[l];if(a[c]){i=a[c];break}}if(!i){if(!o)throw new Error('Could not find "item" link');i=o}return i=n?h(i,n):i}function u(e,t,s,u){var r=e.projection;if(!r&&!(r=(0,D.get)(t.crs)))throw new Error("Unsupported CRS: ".concat(t.crs));for(var n=t.orderedAxes,i="en"!==(n?n.slice(0,2).map(function(e){return e.replace(/E|X|Lon/i,"e").replace(/N|Y|Lat/i,"n")}).join(""):r.getAxisOrientation().substr(0,2)),o=t.tileMatrices,l={},a=0;a<o.length;++a){var c=o[a];l[c.id]=c}var f={},h=[];if(u)for(var p=0;p<u.length;++p){var d=u[p],g=d.tileMatrix;h.push(g),f[g]=d}else for(var y=0;y<o.length;++y){var A=o[y].id;h.push(A)}for(var m=h.length,v=new Array(m),b=new Array(m),_=new Array(m),w=new Array(m),E=[-1/0,-1/0,1/0,1/0],C=0;C<m;++C){var I,S,j,x,O=h[C],P=l[O],k=P.pointOfOrigin,k=(v[C]=i?[k[1],k[0]]:k,b[C]=P.cellSize,_[C]=[P.matrixWidth,P.matrixHeight],w[C]=[P.tileWidth,P.tileHeight],f[O]);k&&(O=P.cellSize*P.tileWidth,I=v[C][0]+k.minTileCol*O,O=v[C][0]+(k.maxTileCol+1)*O,S=P.cellSize*P.tileHeight,x=j=void 0,x="bottomLeft"===P.cornerOfOrigin?(j=v[C][1]+k.minTileRow*S,v[C][1]+(k.maxTileRow+1)*S):(j=v[C][1]-(k.maxTileRow+1)*S,v[C][1]-k.minTileRow*S),(0,L.getIntersection)(E,[I,j,O,x],E))}var n=new M.default({origins:v,resolutions:b,sizes:_,tileSizes:w,extent:u?E:void 0}),B=e.context,T=e.url;return{grid:n,urlTemplate:s,urlFunction:function(e,t,r){if(e){var n=h[e[0]],i=l[n],o="bottomLeft"===i.cornerOfOrigin,a={tileMatrix:n,tileCol:e[1],tileRow:o?-e[2]-1:e[2]};if(u){n=f[i.id];if(a.tileCol<n.minTileCol||a.tileCol>n.maxTileCol||a.tileRow<n.minTileRow||a.tileRow>n.maxTileRow)return}Object.assign(a,B);o=s.replace(/\{(\w+?)\}/g,function(e,t){return a[t]});return(0,R.resolveUrl)(T,o)}}}}},{"../console.js":115,"../extent.js":142,"../net.js":280,"../proj.js":283,"../tilegrid/TileGrid.js":398}],377:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.createLoader=function(e){var t=e.load||i.decode,n=e.imageExtent,r=new Image;return null!==e.crossOrigin&&(r.crossOrigin=e.crossOrigin),function(){return t(r,e.url).then(function(e){var t=(0,o.getWidth)(n)/e.width,r=(0,o.getHeight)(n)/e.height;return{image:e,extent:n,resolution:t!=r?[t,r]:r,pixelRatio:1}})}};var i=e("../Image.js"),o=e("../extent.js")},{"../Image.js":84,"../extent.js":142}],378:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.DEFAULT_VERSION=void 0,r.createLoader=function(i){var o=void 0===i.hidpi||i.hidpi,a=(0,f.get)(i.projection||"EPSG:3857"),s=i.ratio||1.5,u=i.load||n.decode;return function(t,e,r){t=(0,h.getRequestExtent)(t,e,r,s),1==r||o&&void 0!==i.serverType||(r=1);var e=g(t,e,r,a,i.url,y(i.params,"GetMap"),i.serverType),n=new Image;return null!==i.crossOrigin&&(n.crossOrigin=i.crossOrigin),u(n,e).then(function(e){return{image:e,extent:t,pixelRatio:r}})}},r.getFeatureInfoUrl=function(e,t,r){{var n,i,o,a;if(void 0!==e.url)return n=(0,f.get)(e.projection||"EPSG:3857"),i=(0,c.getForViewAndSize)(t,r,0,p),o={QUERY_LAYERS:e.params.LAYERS,INFO_FORMAT:"application/json"},Object.assign(o,y(e.params,"GetFeatureInfo"),e.params),a=(0,l.floor)((t[0]-i[0])/r,u.DECIMALS),t=(0,l.floor)((i[3]-t[1])/r,u.DECIMALS),r=0<=(0,s.compareVersions)(o.VERSION,"1.3"),o[r?"I":"X"]=a,o[r?"J":"Y"]=t,d(e.url,i,p,n,o)}},r.getImageSrc=g,r.getLegendUrl=function(e,t){if(void 0!==e.url){var r={SERVICE:"WMS",VERSION:i,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(void 0===e.params||void 0===e.params.LAYER){var n=e.params.LAYERS;if(Array.isArray(n)&&1!==n.length)return;r.LAYER=n}return void 0!==t&&(n=(0,f.get)(e.projection||"EPSG:3857").getMetersPerUnit()||1,r.SCALE=t*n/28e-5),Object.assign(r,e.params),(0,a.appendParams)(e.url,r)}},r.getRequestParams=y,r.getRequestUrl=d;var u=e("./common.js"),a=e("../uri.js"),s=e("../string.js"),n=e("../Image.js"),l=e("../math.js"),c=e("../extent.js"),f=e("../proj.js"),h=e("./Image.js"),i=r.DEFAULT_VERSION="1.3.0",p=[101,101];function d(e,t,r,n,i){i.WIDTH=r[0],i.HEIGHT=r[1];var r=n.getAxisOrientation(),o=0<=(0,s.compareVersions)(i.VERSION,"1.3");return i[o?"CRS":"SRS"]=n.getCode(),n=o&&"ne"==r.substr(0,2)?[t[1],t[0],t[3],t[2]]:t,i.BBOX=n.join(","),(0,a.appendParams)(e,i)}function g(e,t,r,n,i,o,a){o=Object.assign({REQUEST:"GetMap"},o);t/=r,t=[(0,l.round)((0,c.getWidth)(e)/t,u.DECIMALS),(0,l.round)((0,c.getHeight)(e)/t,u.DECIMALS)];if(1!=r)switch(a){case"geoserver":var s=90*r+.5|0;"FORMAT_OPTIONS"in o?o.FORMAT_OPTIONS+=";dpi:"+s:o.FORMAT_OPTIONS="dpi:"+s;break;case"mapserver":o.MAP_RESOLUTION=90*r;break;case"carmentaserver":case"qgis":o.DPI=90*r;break;default:throw new Error("Unknown `serverType` configured")}return d(i,e,t,n,o)}function y(e,t){return Object.assign({REQUEST:t,SERVICE:"WMS",VERSION:i,FORMAT:"image/png",STYLES:"",TRANSPARENT:!0},e)}},{"../Image.js":84,"../extent.js":142,"../math.js":279,"../proj.js":283,"../string.js":380,"../uri.js":403,"./Image.js":346,"./common.js":374}],379:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.DEFAULT_RADIUS=void 0,r.getArea=function e(t,r){var n=(r=r||{}).radius||d,i=r.projection||"EPSG:3857",o=t.getType();"GeometryCollection"!==o&&(t=t.clone().transform(i,"EPSG:4326"));var a,s,u,l,c,f,h=0;switch(o){case"Point":case"MultiPoint":case"LineString":case"MultiLineString":case"LinearRing":break;case"Polygon":for(a=t.getCoordinates(),h=Math.abs(y(a[0],n)),u=1,l=a.length;u<l;++u)h-=Math.abs(y(a[u],n));break;case"MultiPolygon":for(u=0,l=(a=t.getCoordinates()).length;u<l;++u)for(s=a[u],h+=Math.abs(y(s[0],n)),c=1,f=s.length;c<f;++c)h-=Math.abs(y(s[c],n));break;case"GeometryCollection":var p=t.getGeometries();for(u=0,l=p.length;u<l;++u)h+=e(p[u],r);break;default:throw new Error("Unsupported geometry type: "+o)}return h},r.getDistance=o,r.getLength=function e(t,r){var n=(r=r||{}).radius||d,i=r.projection||"EPSG:3857",o=t.getType();"GeometryCollection"!==o&&(t=t.clone().transform(i,"EPSG:4326"));var a,s,u,l,c,f,h=0;switch(o){case"Point":case"MultiPoint":break;case"LineString":case"LinearRing":h=g(a=t.getCoordinates(),n);break;case"MultiLineString":case"Polygon":for(u=0,l=(a=t.getCoordinates()).length;u<l;++u)h+=g(a[u],n);break;case"MultiPolygon":for(u=0,l=(a=t.getCoordinates()).length;u<l;++u)for(c=0,f=(s=a[u]).length;c<f;++c)h+=g(s[c],n);break;case"GeometryCollection":var p=t.getGeometries();for(u=0,l=p.length;u<l;++u)h+=e(p[u],r);break;default:throw new Error("Unsupported geometry type: "+o)}return h},r.offset=function(e,t,r,n){n=n||d;var i=(0,l.toRadians)(e[1]),e=(0,l.toRadians)(e[0]),t=t/n,n=Math.asin(Math.sin(i)*Math.cos(t)+Math.cos(i)*Math.sin(t)*Math.cos(r)),e=e+Math.atan2(Math.sin(r)*Math.sin(t)*Math.cos(i),Math.cos(t)-Math.sin(i)*Math.sin(n));return[(0,l.toDegrees)(e),(0,l.toDegrees)(n)]};var l=e("./math.js"),d=r.DEFAULT_RADIUS=6371008.8;function o(e,t,r){r=r||d;var n=(0,l.toRadians)(e[1]),i=(0,l.toRadians)(t[1]),o=(i-n)/2,t=(0,l.toRadians)(t[0]-e[0])/2,e=Math.sin(o)*Math.sin(o)+Math.sin(t)*Math.sin(t)*Math.cos(n)*Math.cos(i);return 2*r*Math.atan2(Math.sqrt(e),Math.sqrt(1-e))}function g(e,t){for(var r=0,n=0,i=e.length;n<i-1;++n)r+=o(e[n],e[n+1],t);return r}function y(e,t){for(var r=0,n=e.length,i=e[n-1][0],o=e[n-1][1],a=0;a<n;a++){var s=e[a][0],u=e[a][1];r+=(0,l.toRadians)(s-i)*(2+Math.sin((0,l.toRadians)(o))+Math.sin((0,l.toRadians)(u))),i=s,o=u}return r*t*t/2}},{"./math.js":279}],380:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.compareVersions=function(e,t){for(var r=(""+e).split("."),n=(""+t).split("."),i=0;i<Math.max(r.length,n.length);i++){var o=parseInt(r[i]||"0",10),a=parseInt(n[i]||"0",10);if(a<o)return 1;if(o<a)return-1}return 0},r.padNumber=function(e,t,r){return(e=-1===(e=(r=void 0!==r?e.toFixed(r):""+e).indexOf("."))?r.length:e)>t?r:new Array(1+t-e).join("0")+r}},{}],381:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("../asserts.js");function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}e=function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.highWaterMark=void 0!==t?t:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null},(s=[{key:"canExpireCache",value:function(){return 0<this.highWaterMark&&this.getCount()>this.highWaterMark}},{key:"expireCache",value:function(e){for(;this.canExpireCache();)this.pop()}},{key:"clear",value:function(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}},{key:"containsKey",value:function(e){return this.entries_.hasOwnProperty(e)}},{key:"forEach",value:function(e){for(var t=this.oldest_;t;)e(t.value_,t.key_,this),t=t.newer}},{key:"get",value:function(e,t){e=this.entries_[e];return(0,n.assert)(void 0!==e,"Tried to get a value for a key that does not exist in the cache"),e===this.newest_||(e===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(e.newer.older=e.older,e.older.newer=e.newer),e.newer=null,e.older=this.newest_,this.newest_.newer=e,this.newest_=e),e.value_}},{key:"remove",value:function(e){var t=this.entries_[e];return(0,n.assert)(void 0!==t,"Tried to get a value for a key that does not exist in the cache"),t===this.newest_?(this.newest_=t.older,this.newest_&&(this.newest_.newer=null)):t===this.oldest_?(this.oldest_=t.newer,this.oldest_&&(this.oldest_.older=null)):(t.newer.older=t.older,t.older.newer=t.newer),delete this.entries_[e],--this.count_,t.value_}},{key:"getCount",value:function(){return this.count_}},{key:"getKeys",value:function(){for(var e=new Array(this.count_),t=0,r=this.newest_;r;r=r.older)e[t++]=r.key_;return e}},{key:"getValues",value:function(){for(var e=new Array(this.count_),t=0,r=this.newest_;r;r=r.older)e[t++]=r.value_;return e}},{key:"peekLast",value:function(){return this.oldest_.value_}},{key:"peekLastKey",value:function(){return this.oldest_.key_}},{key:"peekFirstKey",value:function(){return this.newest_.key_}},{key:"peek",value:function(e){return null==(e=this.entries_[e])?void 0:e.value_}},{key:"pop",value:function(){var e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_}},{key:"replace",value:function(e,t){this.get(e),this.entries_[e].value_=t}},{key:"set",value:function(e,t){(0,n.assert)(!(e in this.entries_),"Tried to set a value for a key that is used already");t={key_:e,newer:null,older:this.newest_,value_:t};this.newest_?this.newest_.newer=t:this.oldest_=t,this.newest_=t,this.entries_[e]=t,++this.count_}},{key:"setSize",value:function(e){this.highWaterMark=e}}])&&o(e.prototype,s),a&&o(e,a),Object.defineProperty(e,"prototype",{writable:!1});var a,s=e;r.default=s},{"../asserts.js":111}],382:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.DROP=void 0;var n=e("../asserts.js"),i=e("../obj.js");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=o(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==o(e)?e:e+""}(n.key),n)}}r.DROP=1/0;e=function e(t,r){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.priorityFunction_=t,this.keyFunction_=r,this.elements_=[],this.priorities_=[],this.queuedElements_={}},(u=[{key:"clear",value:function(){this.elements_.length=0,(this.priorities_.length=0,i.clear)(this.queuedElements_)}},{key:"dequeue",value:function(){var e=this.elements_,t=this.priorities_,r=e[0],e=(1==e.length?(e.length=0,t.length=0):(e[0]=e.pop(),t[0]=t.pop(),this.siftUp_(0)),this.keyFunction_(r));return delete this.queuedElements_[e],r}},{key:"enqueue",value:function(e){(0,n.assert)(!(this.keyFunction_(e)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");var t=this.priorityFunction_(e);return t!=1/0&&(this.elements_.push(e),this.priorities_.push(t),this.queuedElements_[this.keyFunction_(e)]=!0,this.siftDown_(0,this.elements_.length-1),!0)}},{key:"getCount",value:function(){return this.elements_.length}},{key:"getLeftChildIndex_",value:function(e){return 2*e+1}},{key:"getRightChildIndex_",value:function(e){return 2*e+2}},{key:"getParentIndex_",value:function(e){return e-1>>1}},{key:"heapify_",value:function(){for(var e=(this.elements_.length>>1)-1;0<=e;e--)this.siftUp_(e)}},{key:"isEmpty",value:function(){return 0===this.elements_.length}},{key:"isKeyQueued",value:function(e){return e in this.queuedElements_}},{key:"isQueued",value:function(e){return this.isKeyQueued(this.keyFunction_(e))}},{key:"siftUp_",value:function(e){for(var t=this.elements_,r=this.priorities_,n=t.length,i=t[e],o=r[e],a=e;e<n>>1;){var s=this.getLeftChildIndex_(e),u=this.getRightChildIndex_(e),u=u<n&&r[u]<r[s]?u:s;t[e]=t[u],r[e]=r[u],e=u}t[e]=i,r[e]=o,this.siftDown_(a,e)}},{key:"siftDown_",value:function(e,t){for(var r=this.elements_,n=this.priorities_,i=r[t],o=n[t];e<t;){var a=this.getParentIndex_(t);if(!(n[a]>o))break;r[t]=r[a],n[t]=n[a],t=a}r[t]=i,n[t]=o}},{key:"reprioritize",value:function(){for(var e,t,r=this.priorityFunction_,n=this.elements_,i=this.priorities_,o=0,a=n.length,s=0;s<a;++s)(t=r(e=n[s]))==1/0?delete this.queuedElements_[this.keyFunction_(e)]:(i[o]=t,n[o++]=e);n.length=o,i.length=o,this.heapify_()}}])&&a(e.prototype,u),s&&a(e,s),Object.defineProperty(e,"prototype",{writable:!1});var s,u=e;r.default=u},{"../asserts.js":111,"../obj.js":281}],383:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=(l=e("rbush"))&&l.__esModule?l:{default:l},i=e("../extent.js"),s=e("../util.js"),o=e("../obj.js");function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=a(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==a(e)?e:e+""}(n.key),n)}}l=function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.rbush_=new n.default(t),this.items_={}},(e=[{key:"insert",value:function(e,t){e={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:t};this.rbush_.insert(e),this.items_[(0,s.getUid)(t)]=e}},{key:"load",value:function(e,t){for(var r=new Array(t.length),n=0,i=t.length;n<i;n++){var o=e[n],a=t[n],o={minX:o[0],minY:o[1],maxX:o[2],maxY:o[3],value:a};r[n]=o,this.items_[(0,s.getUid)(a)]=o}this.rbush_.load(r)}},{key:"remove",value:function(e){var e=(0,s.getUid)(e),t=this.items_[e];return delete this.items_[e],null!==this.rbush_.remove(t)}},{key:"update",value:function(e,t){var r=this.items_[(0,s.getUid)(t)],r=[r.minX,r.minY,r.maxX,r.maxY];(0,i.equals)(r,e)||(this.remove(t),this.insert(e,t))}},{key:"getAll",value:function(){return this.rbush_.all().map(function(e){return e.value})}},{key:"getInExtent",value:function(e){e={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]};return this.rbush_.search(e).map(function(e){return e.value})}},{key:"forEach",value:function(e){return this.forEach_(this.getAll(),e)}},{key:"forEachInExtent",value:function(e,t){return this.forEach_(this.getInExtent(e),t)}},{key:"forEach_",value:function(e,t){for(var r,n=0,i=e.length;n<i;n++)if(r=t(e[n]))return r;return r}},{key:"isEmpty",value:function(){return(0,o.isEmpty)(this.items_)}},{key:"clear",value:function(){this.rbush_.clear(),this.items_={}}},{key:"getExtent",value:function(e){var t=this.rbush_.toJSON();return(0,i.createOrUpdate)(t.minX,t.minY,t.maxX,t.maxY,e)}},{key:"concat",value:function(e){for(var t in this.rbush_.load(e.rbush_.all()),e.items_)this.items_[t]=e.items_[t]}}])&&u(l.prototype,e),c&&u(l,c),Object.defineProperty(l,"prototype",{writable:!1});var l,c,e=l;r.default=e},{"../extent.js":142,"../obj.js":281,"../util.js":404,rbush:427}],384:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"Circle",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(r,"Fill",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(r,"Icon",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(r,"IconImage",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(r,"Image",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(r,"RegularShape",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(r,"Stroke",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(r,"Style",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(r,"Text",{enumerable:!0,get:function(){return f.default}});var n=h(e("./style/Circle.js")),i=h(e("./style/Fill.js")),o=h(e("./style/Icon.js")),a=h(e("./style/IconImage.js")),s=h(e("./style/Image.js")),u=h(e("./style/RegularShape.js")),l=h(e("./style/Stroke.js")),c=h(e("./style/Style.js")),f=h(e("./style/Text.js"));function h(e){return e&&e.__esModule?e:{default:e}}},{"./style/Circle.js":385,"./style/Fill.js":386,"./style/Icon.js":387,"./style/IconImage.js":388,"./style/Image.js":390,"./style/RegularShape.js":391,"./style/Stroke.js":392,"./style/Style.js":393,"./style/Text.js":394}],385:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=(e=e("./RegularShape.js"))&&e.__esModule?e:{default:e};function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function s(e,t,r){t=l(t);var n=e,t=u()?Reflect.construct(t,r||[],l(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(u=function(){return!!e})()}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}e=function(){function t(e){if(this instanceof t)return s(this,t,[{points:1/0,fill:(e=e||{radius:5}).fill,radius:e.radius,stroke:e.stroke,scale:void 0!==e.scale?e.scale:1,rotation:void 0!==e.rotation?e.rotation:0,rotateWithView:void 0!==e.rotateWithView&&e.rotateWithView,displacement:void 0!==e.displacement?e.displacement:[0,0],declutterMode:e.declutterMode}]);throw new TypeError("Cannot call a class as a function")}var e,r=t,n=o.default;if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");return r.prototype=Object.create(n&&n.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),n&&c(r,n),r=t,(n=[{key:"clone",value:function(){var e=this.getScale(),e=new t({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return e.setOpacity(this.getOpacity()),e}},{key:"setRadius",value:function(e){this.radius_=e,this.render()}}])&&a(r.prototype,n),e&&a(r,e),Object.defineProperty(r,"prototype",{writable:!1}),r}();r.default=e},{"./RegularShape.js":391}],386:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=(s=e("../ImageState.js"))&&s.__esModule?s:{default:s},i=e("./IconImage.js");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=o(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==o(e)?e:e+""}(n.key),n)}}s=l,(e=[{key:"clone",value:function(){var e=this.getColor();return new l({color:Array.isArray(e)?e.slice():e||void 0})}},{key:"getColor",value:function(){return this.color_}},{key:"setColor",value:function(e){var t,r=this;null!==e&&"object"===o(e)&&"src"in e&&((t=(0,i.get)(null,e.src,"anonymous",void 0,!e.offset&&e.color||null,!(e.offset&&e.size))).ready().then(function(){r.patternImage_=null}),t.getImageState()===n.default.IDLE&&t.load(),t.getImageState()===n.default.LOADING)&&(this.patternImage_=t),this.color_=e}},{key:"loading",value:function(){return!!this.patternImage_}},{key:"ready",value:function(){return this.patternImage_?this.patternImage_.ready():Promise.resolve()}}])&&a(s.prototype,e),u&&a(s,u),Object.defineProperty(s,"prototype",{writable:!1});var s,u,e=s;r.default=e;function l(e){if(!(this instanceof l))throw new TypeError("Cannot call a class as a function");e=e||{},this.patternImage_=null,this.color_=null,void 0!==e.color&&this.setColor(e.color)}},{"../ImageState.js":86,"./IconImage.js":388}],387:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=a(e("../events/EventType.js")),h=a(e("../ImageState.js")),o=a(e("./Image.js")),p=e("../color.js"),d=e("../asserts.js"),g=e("./IconImage.js"),y=e("../util.js");function a(e){return e&&e.__esModule?e:{default:e}}function A(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o,a,s=[],u=!0,l=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=o.call(r)).done)&&(s.push(n.value),s.length!==t);u=!0);}catch(e){l=!0,i=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}(e,t)||function(e,t){{var r;if(e)return"string"==typeof e?s(e,t):"Map"===(r="Object"===(r={}.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function m(e,t){if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");t=e;if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function v(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(v=function(){return!!e})()}function l(){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=b(e)););return e}(e,t);if(n)return(n=Object.getOwnPropertyDescriptor(n,t)).get?n.get.call(arguments.length<3?e:r):n.value}).apply(null,arguments)}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function _(e,t,r,n){return void 0!==r&&void 0!==n?[r/e,n/t]:void 0!==r?r/e:void 0!==n?n/t:1}e=function(){function f(r){var n;if(!(this instanceof f))throw new TypeError("Cannot call a class as a function");var e,t=void 0!==(r=r||{}).opacity?r.opacity:1,i=void 0!==r.rotation?r.rotation:0,o=void 0!==r.scale?r.scale:1,a=void 0!==r.rotateWithView&&r.rotateWithView;e=this,c=f,t=[{opacity:t,rotation:i,scale:o,displacement:void 0!==r.displacement?r.displacement:[0,0],rotateWithView:a,declutterMode:r.declutterMode}],c=b(c),(n=m(e,v()?Reflect.construct(c,t||[],b(e).constructor):c.apply(e,t))).anchor_=void 0!==r.anchor?r.anchor:[.5,.5],n.normalizedAnchor_=null,n.anchorOrigin_=void 0!==r.anchorOrigin?r.anchorOrigin:"top-left",n.anchorXUnits_=void 0!==r.anchorXUnits?r.anchorXUnits:"fraction",n.anchorYUnits_=void 0!==r.anchorYUnits?r.anchorYUnits:"fraction",n.crossOrigin_=void 0!==r.crossOrigin?r.crossOrigin:null;var s,i=void 0!==r.img?r.img:null,o=r.src;if((0,d.assert)(!(void 0!==o&&i),"`image` and `src` cannot be provided at the same time"),void 0!==o&&0!==o.length||!i||(o=i.src||(0,y.getUid)(i)),(0,d.assert)(void 0!==o&&0<o.length,"A defined and non-empty `src` or `image` must be provided"),(0,d.assert)(!((void 0!==r.width||void 0!==r.height)&&void 0!==r.scale),"`width` or `height` cannot be provided together with `scale`"),void 0!==r.src?s=h.default.IDLE:void 0!==i&&(s="complete"in i?i.complete?i.src?h.default.LOADED:h.default.IDLE:h.default.LOADING:h.default.LOADED),n.color_=void 0!==r.color?(0,p.asArray)(r.color):null,n.iconImage_=(0,g.get)(i,o,n.crossOrigin_,s,n.color_),n.offset_=void 0!==r.offset?r.offset:[0,0],n.offsetOrigin_=void 0!==r.offsetOrigin?r.offsetOrigin:"top-left",n.origin_=null,n.size_=void 0!==r.size?r.size:null,void 0!==r.width||void 0!==r.height){if(r.size)var a=A(r.size,2),u=a[0],l=a[1];else{var c=n.getImage(1);if(c.width&&c.height)u=c.width,l=c.height;else if(c instanceof HTMLImageElement)return n.initialOptions_=r,n.listenImageChange(function e(){var t;n.unlistenImageChange(e),n.initialOptions_&&(t=n.iconImage_.getSize(),n.setScale(_(t[0],t[1],r.width,r.height)))}),m(n)}void 0!==u&&n.setScale(_(u,l,r.width,r.height))}return n}var e,t=f,r=o.default;if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&c(t,r),t=f,(r=[{key:"clone",value:function(){var e,t,r;return this.initialOptions_?(t=this.initialOptions_.width,r=this.initialOptions_.height):(e=this.getScale(),e=Array.isArray(e)?e.slice():e),new f({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:e,width:t,height:r,size:null!==this.size_?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}},{key:"getAnchor",value:function(){if(!(e=this.normalizedAnchor_)){var e=this.anchor_,t=this.getSize();if("fraction"==this.anchorXUnits_||"fraction"==this.anchorYUnits_){if(!t)return null;e=this.anchor_.slice(),"fraction"==this.anchorXUnits_&&(e[0]*=t[0]),"fraction"==this.anchorYUnits_&&(e[1]*=t[1])}if("top-left"!=this.anchorOrigin_){if(!t)return null;e===this.anchor_&&(e=this.anchor_.slice()),"top-right"!=this.anchorOrigin_&&"bottom-right"!=this.anchorOrigin_||(e[0]=-e[0]+t[0]),"bottom-left"!=this.anchorOrigin_&&"bottom-right"!=this.anchorOrigin_||(e[1]=-e[1]+t[1])}this.normalizedAnchor_=e}var t=this.getDisplacement(),r=this.getScaleArray();return[e[0]-t[0]/r[0],e[1]+t[1]/r[1]]}},{key:"setAnchor",value:function(e){this.anchor_=e,this.normalizedAnchor_=null}},{key:"getColor",value:function(){return this.color_}},{key:"getImage",value:function(e){return this.iconImage_.getImage(e)}},{key:"getPixelRatio",value:function(e){return this.iconImage_.getPixelRatio(e)}},{key:"getImageSize",value:function(){return this.iconImage_.getSize()}},{key:"getImageState",value:function(){return this.iconImage_.getImageState()}},{key:"getHitDetectionImage",value:function(){return this.iconImage_.getHitDetectionImage()}},{key:"getOrigin",value:function(){if(!this.origin_){var e=this.offset_;if("top-left"!=this.offsetOrigin_){var t=this.getSize(),r=this.iconImage_.getSize();if(!t||!r)return null;e=e.slice(),"top-right"!=this.offsetOrigin_&&"bottom-right"!=this.offsetOrigin_||(e[0]=r[0]-t[0]-e[0]),"bottom-left"!=this.offsetOrigin_&&"bottom-right"!=this.offsetOrigin_||(e[1]=r[1]-t[1]-e[1])}this.origin_=e}return this.origin_}},{key:"getSrc",value:function(){return this.iconImage_.getSrc()}},{key:"getSize",value:function(){return this.size_||this.iconImage_.getSize()}},{key:"getWidth",value:function(){var e=this.getScaleArray();return this.size_?this.size_[0]*e[0]:this.iconImage_.getImageState()==h.default.LOADED?this.iconImage_.getSize()[0]*e[0]:void 0}},{key:"getHeight",value:function(){var e=this.getScaleArray();return this.size_?this.size_[1]*e[1]:this.iconImage_.getImageState()==h.default.LOADED?this.iconImage_.getSize()[1]*e[1]:void 0}},{key:"setScale",value:function(e){delete this.initialOptions_,l(b(f.prototype),"setScale",this).call(this,e)}},{key:"listenImageChange",value:function(e){this.iconImage_.addEventListener(n.default.CHANGE,e)}},{key:"load",value:function(){this.iconImage_.load()}},{key:"unlistenImageChange",value:function(e){this.iconImage_.removeEventListener(n.default.CHANGE,e)}},{key:"ready",value:function(){return this.iconImage_.ready()}}])&&u(t.prototype,r),e&&u(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();r.default=e},{"../ImageState.js":86,"../asserts.js":111,"../color.js":113,"../events/EventType.js":134,"../util.js":404,"./IconImage.js":388,"./Image.js":390}],388:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,r.get=function(e,t,r,n,i,o){var a=void 0===t?void 0:f.shared.get(t,r,i);return a||(a=new m(e,e&&"src"in e?e.src||void 0:t,r,n,i),f.shared.set(t,r,i,a,o)),o&&a&&!f.shared.getPattern(t,r,i)&&f.shared.set(t,r,i,a,o),a};var n=a(e("../events/Target.js")),o=a(e("../events/EventType.js")),s=a(e("../ImageState.js")),u=e("../color.js"),l=e("../dom.js"),c=e("../Image.js"),f=e("./IconImageCache.js");function a(e){return e&&e.__esModule?e:{default:e}}function h(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function p(e,t,r){t=g(t);var n=e,t=d()?Reflect.construct(t,r||[],g(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(d=function(){return!!e})()}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t){return(y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var A=null,m=function(){function a(e,t,r,n,i){var o;if(this instanceof a)return(o=p(this,a)).hitDetectionImage_=null,o.image_=e,o.crossOrigin_=r,o.canvas_={},o.color_=i,o.imageState_=void 0===n?s.default.IDLE:n,o.size_=e&&e.width&&e.height?[e.width,e.height]:null,o.src_=t,o.tainted_,o.ready_=null,o;throw new TypeError("Cannot call a class as a function")}var e,t=a,r=n.default;if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&y(t,r),t=a,(r=[{key:"initializeImage_",value:function(){this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)}},{key:"isTainted_",value:function(){if(void 0===this.tainted_&&this.imageState_===s.default.LOADED){(A=A||(0,l.createCanvasContext2D)(1,1,void 0,{willReadFrequently:!0})).drawImage(this.image_,0,0);try{A.getImageData(0,0,1,1),this.tainted_=!1}catch(e){A=null,this.tainted_=!0}}return!0===this.tainted_}},{key:"dispatchChangeEvent_",value:function(){this.dispatchEvent(o.default.CHANGE)}},{key:"handleImageError_",value:function(){this.imageState_=s.default.ERROR,this.dispatchChangeEvent_()}},{key:"handleImageLoad_",value:function(){this.imageState_=s.default.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}},{key:"getImage",value:function(e){return this.image_||this.initializeImage_(),this.replaceColor_(e),this.canvas_[e]||this.image_}},{key:"getPixelRatio",value:function(e){return this.replaceColor_(e),this.canvas_[e]?e:1}},{key:"getImageState",value:function(){return this.imageState_}},{key:"getHitDetectionImage",value:function(){var e,t,r;return this.image_||this.initializeImage_(),this.hitDetectionImage_||(this.isTainted_()?(e=this.size_[0],t=this.size_[1],(r=(0,l.createCanvasContext2D)(e,t)).fillRect(0,0,e,t),this.hitDetectionImage_=r.canvas):this.hitDetectionImage_=this.image_),this.hitDetectionImage_}},{key:"getSize",value:function(){return this.size_}},{key:"getSrc",value:function(){return this.src_}},{key:"load",value:function(){var t=this;if(this.imageState_===s.default.IDLE){this.image_||this.initializeImage_(),this.imageState_=s.default.LOADING;try{void 0!==this.src_&&(this.image_.src=this.src_)}catch(t){this.handleImageError_()}this.image_ instanceof HTMLImageElement&&(0,c.decodeFallback)(this.image_,this.src_).then(function(e){t.image_=e,t.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}},{key:"replaceColor_",value:function(e){var t,r,n;this.color_&&!this.canvas_[e]&&this.imageState_===s.default.LOADED&&(t=this.image_,(r=document.createElement("canvas")).width=Math.ceil(t.width*e),r.height=Math.ceil(t.height*e),(n=r.getContext("2d")).scale(e,e),n.drawImage(t,0,0),n.globalCompositeOperation="multiply",n.fillStyle=(0,u.asString)(this.color_),n.fillRect(0,0,r.width/e,r.height/e),n.globalCompositeOperation="destination-in",n.drawImage(t,0,0),this.canvas_[e]=r)}},{key:"ready",value:function(){var e=this;return this.ready_||(this.ready_=new Promise(function(t){e.imageState_===s.default.LOADED||e.imageState_===s.default.ERROR?t():e.addEventListener(o.default.CHANGE,function e(){this.imageState_!==s.default.LOADED&&this.imageState_!==s.default.ERROR||(this.removeEventListener(o.default.CHANGE,e),t())})})),this.ready_}}])&&h(t.prototype,r),e&&h(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();r.default=m},{"../Image.js":84,"../ImageState.js":86,"../color.js":113,"../dom.js":130,"../events/EventType.js":134,"../events/Target.js":137,"./IconImageCache.js":389}],389:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,r.getCacheKey=c,r.shared=void 0;var s=(a=e("../ImageState.js"))&&a.__esModule?a:{default:a},n=e("../color.js"),u=e("../dom.js");function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}a=function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.cache_={},this.patternCache_={},this.cacheSize_=0,this.maxCacheSize_=32},(e=[{key:"clear",value:function(){this.cache_={},this.patternCache_={},this.cacheSize_=0}},{key:"canExpireCache",value:function(){return this.cacheSize_>this.maxCacheSize_}},{key:"expire",value:function(){if(this.canExpireCache()){var e,t=0;for(e in this.cache_){var r=this.cache_[e];0!=(3&t++)||r.hasListener()||(delete this.cache_[e],delete this.patternCache_[e],--this.cacheSize_)}}}},{key:"get",value:function(e,t,r){e=c(e,t,r);return e in this.cache_?this.cache_[e]:null}},{key:"getPattern",value:function(e,t,r){e=c(e,t,r);return e in this.patternCache_?this.patternCache_[e]:null}},{key:"set",value:function(e,t,r,n,i){var o=this,a=c(e,t,r),e=a in this.cache_;this.cache_[a]=n,i&&(n.getImageState()===s.default.IDLE&&n.load(),n.getImageState()===s.default.LOADING?n.ready().then(function(){o.patternCache_[a]=(0,u.getSharedCanvasContext2D)().createPattern(n.getImage(1),"repeat")}):this.patternCache_[a]=(0,u.getSharedCanvasContext2D)().createPattern(n.getImage(1),"repeat")),e||++this.cacheSize_}},{key:"setSize",value:function(e){this.maxCacheSize_=e,this.expire()}}])&&o(a.prototype,e),l&&o(a,l),Object.defineProperty(a,"prototype",{writable:!1});var a,l,e=a;function c(e,t,r){return t+":"+e+":"+(r?(0,n.asArray)(r):"null")}r.default=e,r.shared=new e},{"../ImageState.js":86,"../color.js":113,"../dom.js":130}],390:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("../util.js"),i=e("../size.js");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=o(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==o(e)?e:e+""}(n.key),n)}}e=l,(u=[{key:"clone",value:function(){var e=this.getScale();return new l({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}},{key:"getOpacity",value:function(){return this.opacity_}},{key:"getRotateWithView",value:function(){return this.rotateWithView_}},{key:"getRotation",value:function(){return this.rotation_}},{key:"getScale",value:function(){return this.scale_}},{key:"getScaleArray",value:function(){return this.scaleArray_}},{key:"getDisplacement",value:function(){return this.displacement_}},{key:"getDeclutterMode",value:function(){return this.declutterMode_}},{key:"getAnchor",value:function(){return(0,n.abstract)()}},{key:"getImage",value:function(e){return(0,n.abstract)()}},{key:"getHitDetectionImage",value:function(){return(0,n.abstract)()}},{key:"getPixelRatio",value:function(e){return 1}},{key:"getImageState",value:function(){return(0,n.abstract)()}},{key:"getImageSize",value:function(){return(0,n.abstract)()}},{key:"getOrigin",value:function(){return(0,n.abstract)()}},{key:"getSize",value:function(){return(0,n.abstract)()}},{key:"setDisplacement",value:function(e){this.displacement_=e}},{key:"setOpacity",value:function(e){this.opacity_=e}},{key:"setRotateWithView",value:function(e){this.rotateWithView_=e}},{key:"setRotation",value:function(e){this.rotation_=e}},{key:"setScale",value:function(e){this.scale_=e,this.scaleArray_=(0,i.toSize)(e)}},{key:"listenImageChange",value:function(e){(0,n.abstract)()}},{key:"load",value:function(){(0,n.abstract)()}},{key:"unlistenImageChange",value:function(e){(0,n.abstract)()}},{key:"ready",value:function(){return Promise.resolve()}}])&&a(e.prototype,u),s&&a(e,s),Object.defineProperty(e,"prototype",{writable:!1});var s,u=e;r.default=u;function l(e){if(!(this instanceof l))throw new TypeError("Cannot call a class as a function");this.opacity_=e.opacity,this.rotateWithView_=e.rotateWithView,this.rotation_=e.rotation,this.scale_=e.scale,this.scaleArray_=(0,i.toSize)(e.scale),this.displacement_=e.displacement,this.declutterMode_=e.declutterMode}},{"../size.js":337,"../util.js":404}],391:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("../ImageState.js")),a=n(e("./Image.js")),s=e("../color.js"),l=e("../colorlike.js"),u=e("../dom.js"),c=e("../render/canvas.js");function n(e){return e&&e.__esModule?e:{default:e}}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function h(e,t,r){t=d(t);var n=e,t=p()?Reflect.construct(t,r||[],d(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(p=function(){return!!e})()}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){return(g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}e=function(){function r(e){var t;if(this instanceof r)return(t=h(this,r,[{opacity:1,rotateWithView:void 0!==e.rotateWithView&&e.rotateWithView,rotation:void 0!==e.rotation?e.rotation:0,scale:void 0!==e.scale?e.scale:1,displacement:void 0!==e.displacement?e.displacement:[0,0],declutterMode:e.declutterMode}])).canvases_,t.hitDetectionCanvas_=null,t.fill_=void 0!==e.fill?e.fill:null,t.origin_=[0,0],t.points_=e.points,t.radius_=e.radius,t.radius2_=e.radius2,t.angle_=void 0!==e.angle?e.angle:0,t.stroke_=void 0!==e.stroke?e.stroke:null,t.size_,t.renderOptions_,t.imageState_=t.fill_&&t.fill_.loading()?o.default.LOADING:o.default.LOADED,t.imageState_===o.default.LOADING&&t.ready().then(function(){return t.imageState_=o.default.LOADED}),t.render(),t;throw new TypeError("Cannot call a class as a function")}var e,t=r,n=a.default;if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&g(t,n),t=r,(n=[{key:"clone",value:function(){var e=this.getScale(),e=new r({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return e.setOpacity(this.getOpacity()),e}},{key:"getAnchor",value:function(){var e=this.size_,t=this.getDisplacement(),r=this.getScaleArray();return[e[0]/2-t[0]/r[0],e[1]/2+t[1]/r[1]]}},{key:"getAngle",value:function(){return this.angle_}},{key:"getFill",value:function(){return this.fill_}},{key:"setFill",value:function(e){this.fill_=e,this.render()}},{key:"getHitDetectionImage",value:function(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}},{key:"getImage",value:function(e){var t,r,n=this.canvases_[e];return n||(t=this.renderOptions_,r=(0,u.createCanvasContext2D)(t.size*e,t.size*e),this.draw_(t,r,e),n=r.canvas,this.canvases_[e]=n),n}},{key:"getPixelRatio",value:function(e){return e}},{key:"getImageSize",value:function(){return this.size_}},{key:"getImageState",value:function(){return this.imageState_}},{key:"getOrigin",value:function(){return this.origin_}},{key:"getPoints",value:function(){return this.points_}},{key:"getRadius",value:function(){return this.radius_}},{key:"getRadius2",value:function(){return this.radius2_}},{key:"getSize",value:function(){return this.size_}},{key:"getStroke",value:function(){return this.stroke_}},{key:"setStroke",value:function(e){this.stroke_=e,this.render()}},{key:"listenImageChange",value:function(e){}},{key:"load",value:function(){}},{key:"unlistenImageChange",value:function(e){}},{key:"calculateLineJoinSize_",value:function(e,t,r){var n,i,o,a,s,u;return 0===t||this.points_===1/0||"bevel"!==e&&"miter"!==e?t:((n=this.radius_)<(i=void 0===this.radius2_?n:this.radius2_)&&(o=n,n=i,i=o),o=void 0===this.radius2_?this.points_:2*this.points_,o=2*Math.PI/o,s=i*Math.sin(o),u=n-Math.sqrt(i*i-s*s),s=(a=Math.sqrt(s*s+u*u))/s,"miter"===e&&s<=r?s*t:(s=t/2/s,u=t/2*(u/a),a=Math.sqrt((n+s)*(n+s)+u*u)-n,void 0!==this.radius2_&&"bevel"!==e&&(s=n*Math.sin(o),u=i-Math.sqrt(n*n-s*s),(e=Math.sqrt(s*s+u*u)/s)<=r)?2*Math.max(a,e*t/2-i-n):2*a))}},{key:"createRenderOptions",value:function(){var e,t=c.defaultLineCap,r=c.defaultLineJoin,n=0,i=null,o=0,a=0,s=(this.stroke_&&(e=(0,l.asColorLike)(null!=(e=this.stroke_.getColor())?e:c.defaultStrokeStyle),a=null!=(s=this.stroke_.getWidth())?s:c.defaultLineWidth,i=this.stroke_.getLineDash(),o=null!=(s=this.stroke_.getLineDashOffset())?s:0,r=null!=(s=this.stroke_.getLineJoin())?s:c.defaultLineJoin,t=null!=(s=this.stroke_.getLineCap())?s:c.defaultLineCap,n=null!=(s=this.stroke_.getMiterLimit())?s:c.defaultMiterLimit),this.calculateLineJoinSize_(r,a,n)),u=Math.max(this.radius_,this.radius2_||0);return{strokeStyle:e,strokeWidth:a,size:Math.ceil(2*u+s),lineCap:t,lineDash:i,lineDashOffset:o,lineJoin:r,miterLimit:n}}},{key:"render",value:function(){this.renderOptions_=this.createRenderOptions();var e=this.renderOptions_.size;this.canvases_={},this.hitDetectionCanvas_=null,this.size_=[e,e]}},{key:"draw_",value:function(e,t,r){t.scale(r,r),t.translate(e.size/2,e.size/2),this.createPath_(t),this.fill_&&(null===(r=this.fill_.getColor())&&(r=c.defaultFillStyle),t.fillStyle=(0,l.asColorLike)(r),t.fill()),e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineCap=e.lineCap,t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}},{key:"createHitDetectionCanvas_",value:function(e){var t,r,n;return this.fill_&&(n=0,null===(r="string"==typeof(r=this.fill_.getColor())?(0,s.asArray)(r):r)?n=1:Array.isArray(r)&&(n=4===r.length?r[3]:1),0===n)&&(t=(0,u.createCanvasContext2D)(e.size,e.size),this.drawHitDetectionCanvas_(e,t)),t?t.canvas:this.getImage(1)}},{key:"createPath_",value:function(e){var t=this.points_,r=this.radius_;if(t===1/0)e.arc(0,0,r,0,2*Math.PI);else{var n=void 0===this.radius2_?r:this.radius2_;void 0!==this.radius2_&&(t*=2);for(var i=this.angle_-Math.PI/2,o=2*Math.PI/t,a=0;a<t;a++){var s=i+a*o,u=a%2==0?r:n;e.lineTo(u*Math.cos(s),u*Math.sin(s))}e.closePath()}}},{key:"drawHitDetectionCanvas_",value:function(e,t){t.translate(e.size/2,e.size/2),this.createPath_(t),t.fillStyle=c.defaultFillStyle,t.fill(),e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}},{key:"ready",value:function(){return this.fill_?this.fill_.ready():Promise.resolve()}}])&&f(t.prototype,n),e&&f(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();r.default=e},{"../ImageState.js":86,"../color.js":113,"../colorlike.js":114,"../dom.js":130,"../render/canvas.js":297,"./Image.js":390}],392:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;o=u,(s=[{key:"clone",value:function(){var e=this.getColor();return new u({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}},{key:"getColor",value:function(){return this.color_}},{key:"getLineCap",value:function(){return this.lineCap_}},{key:"getLineDash",value:function(){return this.lineDash_}},{key:"getLineDashOffset",value:function(){return this.lineDashOffset_}},{key:"getLineJoin",value:function(){return this.lineJoin_}},{key:"getMiterLimit",value:function(){return this.miterLimit_}},{key:"getWidth",value:function(){return this.width_}},{key:"setColor",value:function(e){this.color_=e}},{key:"setLineCap",value:function(e){this.lineCap_=e}},{key:"setLineDash",value:function(e){this.lineDash_=e}},{key:"setLineDashOffset",value:function(e){this.lineDashOffset_=e}},{key:"setLineJoin",value:function(e){this.lineJoin_=e}},{key:"setMiterLimit",value:function(e){this.miterLimit_=e}},{key:"setWidth",value:function(e){this.width_=e}}])&&n(o.prototype,s),a&&n(o,a),Object.defineProperty(o,"prototype",{writable:!1});var o,a,s=o;r.default=s;function u(e){if(!(this instanceof u))throw new TypeError("Cannot call a class as a function");this.color_=void 0!==(e=e||{}).color?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=void 0!==e.lineDash?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}},{}],393:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.createDefaultStyle=function(e,t){{var r,n;d||(r=new o.default({color:"rgba(255,255,255,0.4)"}),n=new a.default({color:"#3399CC",width:1.25}),d=[new h({image:new i.default({fill:r,stroke:n,radius:5}),fill:r,stroke:n})])}return d},r.createEditingStyle=function(){var e={},t=[255,255,255,1],r=[0,153,255,1];return e.Polygon=[new h({fill:new o.default({color:[255,255,255,.5]})})],e.MultiPolygon=e.Polygon,e.LineString=[new h({stroke:new a.default({color:t,width:5})}),new h({stroke:new a.default({color:r,width:3})})],e.MultiLineString=e.LineString,e.Circle=e.Polygon.concat(e.LineString),e.Point=[new h({image:new i.default({radius:6,fill:new o.default({color:r}),stroke:new a.default({color:t,width:1.5})}),zIndex:1/0})],e.MultiPoint=e.Point,e.GeometryCollection=e.Polygon.concat(e.LineString,e.Point),e},r.default=void 0,r.toFunction=function(e){var t;e="function"==typeof e?e:(t=Array.isArray(e)?e:((0,n.assert)("function"==typeof e.getZIndex,"Expected an `Style` or an array of `Style`"),[e]),function(){return t});return e};var i=s(e("./Circle.js")),o=s(e("./Fill.js")),a=s(e("./Stroke.js")),n=e("../asserts.js");function s(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=u(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==u(e)?e:e+""}(n.key),n)}}e=p,(c=[{key:"clone",value:function(){var e=this.getGeometry();return new p({geometry:null!=(e=e=e&&"object"===u(e)?e.clone():e)?e:void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:null!=(e=this.getRenderer())?e:void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}},{key:"getRenderer",value:function(){return this.renderer_}},{key:"setRenderer",value:function(e){this.renderer_=e}},{key:"setHitDetectionRenderer",value:function(e){this.hitDetectionRenderer_=e}},{key:"getHitDetectionRenderer",value:function(){return this.hitDetectionRenderer_}},{key:"getGeometry",value:function(){return this.geometry_}},{key:"getGeometryFunction",value:function(){return this.geometryFunction_}},{key:"getFill",value:function(){return this.fill_}},{key:"setFill",value:function(e){this.fill_=e}},{key:"getImage",value:function(){return this.image_}},{key:"setImage",value:function(e){this.image_=e}},{key:"getStroke",value:function(){return this.stroke_}},{key:"setStroke",value:function(e){this.stroke_=e}},{key:"getText",value:function(){return this.text_}},{key:"setText",value:function(e){this.text_=e}},{key:"getZIndex",value:function(){return this.zIndex_}},{key:"setGeometry",value:function(t){"function"==typeof t?this.geometryFunction_=t:"string"==typeof t?this.geometryFunction_=function(e){return e.get(t)}:t?void 0!==t&&(this.geometryFunction_=function(){return t}):this.geometryFunction_=g,this.geometry_=t}},{key:"setZIndex",value:function(e){this.zIndex_=e}}])&&l(e.prototype,c),f&&l(e,f),Object.defineProperty(e,"prototype",{writable:!1});var c,f,h=e;function p(e){if(!(this instanceof p))throw new TypeError("Cannot call a class as a function");e=e||{},this.geometry_=null,this.geometryFunction_=g,void 0!==e.geometry&&this.setGeometry(e.geometry),this.fill_=void 0!==e.fill?e.fill:null,this.image_=void 0!==e.image?e.image:null,this.renderer_=void 0!==e.renderer?e.renderer:null,this.hitDetectionRenderer_=void 0!==e.hitDetectionRenderer?e.hitDetectionRenderer:null,this.stroke_=void 0!==e.stroke?e.stroke:null,this.text_=void 0!==e.text?e.text:null,this.zIndex_=e.zIndex}var d=null;function g(e){return e.getGeometry()}r.default=h},{"../asserts.js":111,"./Circle.js":385,"./Fill.js":386,"./Stroke.js":392}],394:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=(s=e("./Fill.js"))&&s.__esModule?s:{default:s},i=e("../size.js");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=o(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==o(e)?e:e+""}(n.key),n)}}s=l,(e=[{key:"clone",value:function(){var e=this.getScale();return new l({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0,declutterMode:this.getDeclutterMode()})}},{key:"getOverflow",value:function(){return this.overflow_}},{key:"getFont",value:function(){return this.font_}},{key:"getMaxAngle",value:function(){return this.maxAngle_}},{key:"getPlacement",value:function(){return this.placement_}},{key:"getRepeat",value:function(){return this.repeat_}},{key:"getOffsetX",value:function(){return this.offsetX_}},{key:"getOffsetY",value:function(){return this.offsetY_}},{key:"getFill",value:function(){return this.fill_}},{key:"getRotateWithView",value:function(){return this.rotateWithView_}},{key:"getRotation",value:function(){return this.rotation_}},{key:"getScale",value:function(){return this.scale_}},{key:"getScaleArray",value:function(){return this.scaleArray_}},{key:"getStroke",value:function(){return this.stroke_}},{key:"getText",value:function(){return this.text_}},{key:"getTextAlign",value:function(){return this.textAlign_}},{key:"getJustify",value:function(){return this.justify_}},{key:"getTextBaseline",value:function(){return this.textBaseline_}},{key:"getBackgroundFill",value:function(){return this.backgroundFill_}},{key:"getBackgroundStroke",value:function(){return this.backgroundStroke_}},{key:"getPadding",value:function(){return this.padding_}},{key:"getDeclutterMode",value:function(){return this.declutterMode_}},{key:"setOverflow",value:function(e){this.overflow_=e}},{key:"setFont",value:function(e){this.font_=e}},{key:"setMaxAngle",value:function(e){this.maxAngle_=e}},{key:"setOffsetX",value:function(e){this.offsetX_=e}},{key:"setOffsetY",value:function(e){this.offsetY_=e}},{key:"setPlacement",value:function(e){this.placement_=e}},{key:"setRepeat",value:function(e){this.repeat_=e}},{key:"setRotateWithView",value:function(e){this.rotateWithView_=e}},{key:"setFill",value:function(e){this.fill_=e}},{key:"setRotation",value:function(e){this.rotation_=e}},{key:"setScale",value:function(e){this.scale_=e,this.scaleArray_=(0,i.toSize)(void 0!==e?e:1)}},{key:"setStroke",value:function(e){this.stroke_=e}},{key:"setText",value:function(e){this.text_=e}},{key:"setTextAlign",value:function(e){this.textAlign_=e}},{key:"setJustify",value:function(e){this.justify_=e}},{key:"setTextBaseline",value:function(e){this.textBaseline_=e}},{key:"setBackgroundFill",value:function(e){this.backgroundFill_=e}},{key:"setBackgroundStroke",value:function(e){this.backgroundStroke_=e}},{key:"setPadding",value:function(e){this.padding_=e}}])&&a(s.prototype,e),u&&a(s,u),Object.defineProperty(s,"prototype",{writable:!1});var s,u,e=s;r.default=e;function l(e){if(!(this instanceof l))throw new TypeError("Cannot call a class as a function");this.font_=(e=e||{}).font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.scale_=e.scale,this.scaleArray_=(0,i.toSize)(void 0!==e.scale?e.scale:1),this.text_=e.text,this.textAlign_=e.textAlign,this.justify_=e.justify,this.repeat_=e.repeat,this.textBaseline_=e.textBaseline,this.fill_=void 0!==e.fill?e.fill:new n.default({color:"#333"}),this.maxAngle_=void 0!==e.maxAngle?e.maxAngle:Math.PI/4,this.placement_=void 0!==e.placement?e.placement:"point",this.overflow_=!!e.overflow,this.stroke_=void 0!==e.stroke?e.stroke:null,this.offsetX_=void 0!==e.offsetX?e.offsetX:0,this.offsetY_=void 0!==e.offsetY?e.offsetY:0,this.backgroundFill_=e.backgroundFill||null,this.backgroundStroke_=e.backgroundStroke||null,this.padding_=void 0===e.padding?null:e.padding,this.declutterMode_=e.declutterMode}},{"../size.js":337,"./Fill.js":386}],395:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.createDefaultStyle=function(){return{"fill-color":"rgba(255,255,255,0.4)","stroke-color":"#3399CC","stroke-width":1.25,"circle-radius":5,"circle-fill-color":"rgba(255,255,255,0.4)","circle-stroke-width":1.25,"circle-stroke-color":"#3399CC"}}},{}],396:[function(e,t,r){"use strict";function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o,a,s=[],u=!0,l=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=o.call(r)).done)&&(s.push(n.value),s.length!==t);u=!0);}catch(e){l=!0,i=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}(e,t)||function(e,t){{var r;if(e)return"string"==typeof e?i(e,t):"Map"===(r="Object"===(r={}.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function o(e,t,r){return e+"/"+t+"/"+r}Object.defineProperty(r,"__esModule",{value:!0}),r.createOrUpdate=function(e,t,r,n){return void 0!==n?(n[0]=e,n[1]=t,n[2]=r,n):[e,t,r]},r.fromKey=function(e){return e.split("/").map(Number)},r.getCacheKeyForTileKey=function(e){return o((e=n(e.substring(e.lastIndexOf("/")+1,e.length).split(",").map(Number),3))[0],e[1],e[2])},r.getKey=function(e){return o(e[0],e[1],e[2])},r.getKeyZXY=o,r.hash=function(e){return(e[1]<<e[0])+e[2]},r.withinExtentAndZ=function(e,t){var r=e[0],n=e[1],e=e[2];return!(t.getMinZoom()>r||r>t.getMaxZoom())&&(!(t=t.getFullTileRange(r))||t.containsXY(n,e))}},{}],397:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"TileGrid",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(r,"WMTS",{enumerable:!0,get:function(){return o.default}}),r.createForExtent=s,r.createForProjection=h,r.createXYZ=function(e){var e=e||{},t=e.extent||(0,n.get)("EPSG:3857").getExtent(),t={extent:t,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:f(t,e.maxZoom,e.tileSize,e.maxResolution)};return new i.default(t)},r.extentFromProjection=p,r.getForProjection=function(e){var t=e.getDefaultTileGrid();return t||(t=h(e),e.setDefaultTileGrid(t)),t},r.wrapX=function(e,t,r){var n=t[0],i=e.getTileCoordCenter(t),r=p(r);return(0,l.containsCoordinate)(r,i)?t:(t=(0,l.getWidth)(r),r=Math.ceil((r[0]-i[0])/t),i[0]+=t*r,e.getTileCoordForCoordAndZ(i,n))};var i=a(e("./tilegrid/TileGrid.js")),u=e("./tilegrid/common.js"),n=e("./proj.js"),l=e("./extent.js"),c=e("./size.js"),o=a(e("./tilegrid/WMTS.js"));function a(e){return e&&e.__esModule?e:{default:e}}function s(e,t,r,n){n=void 0!==n?n:"top-left";t=f(e,t,r);return new i.default({extent:e,origin:(0,l.getCorner)(e,n),resolutions:t,tileSize:r})}function f(e,t,r,n){t=void 0!==t?t:u.DEFAULT_MAX_ZOOM,r=(0,c.toSize)(void 0!==r?r:u.DEFAULT_TILE_SIZE);var i=(0,l.getHeight)(e),e=(0,l.getWidth)(e);n=0<n?n:Math.max(e/r[0],i/r[1]);for(var o=t+1,a=new Array(o),s=0;s<o;++s)a[s]=n/Math.pow(2,s);return a}function h(e,t,r,n){return s(p(e),t,r,n)}function p(e){var t=(e=(0,n.get)(e)).getExtent();return t||(e=180*n.METERS_PER_UNIT.degrees/e.getMetersPerUnit(),t=(0,l.createOrUpdate)(-e,-e,e,e)),t}},{"./extent.js":142,"./proj.js":283,"./size.js":337,"./tilegrid/TileGrid.js":398,"./tilegrid/WMTS.js":399,"./tilegrid/common.js":400}],398:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=g(e)&&"function"!=typeof e)return{default:e};t=a(t);if(t&&t.has(e))return t.get(e);var r,n={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in e){var o;"default"!==r&&{}.hasOwnProperty.call(e,r)&&((o=i?Object.getOwnPropertyDescriptor(e,r):null)&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=e[r])}return n.default=e,t&&t.set(e,n),n}(e("../TileRange.js")),s=e("./common.js"),u=e("../asserts.js"),c=e("../math.js"),f=e("../extent.js"),h=e("../tilecoord.js"),n=e("../geom/flat/intersectsextent.js"),p=e("../array.js"),d=e("../size.js");function a(e){var t,r;return"function"!=typeof WeakMap?null:(t=new WeakMap,r=new WeakMap,(a=function(e){return e?r:t})(e))}function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=g(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=g(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==g(e)?e:e+""}(n.key),n)}}var o,y=[0,0,0],A=(e=function e(t){var r,n=this;if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");if(this.minZoom=void 0!==t.minZoom?t.minZoom:0,this.resolutions_=t.resolutions,(0,u.assert)((0,p.isSorted)(this.resolutions_,function(e,t){return t-e},!0),"`resolutions` must be sorted in descending order"),!t.origins)for(var i=0,o=this.resolutions_.length-1;i<o;++i)if(r){if(this.resolutions_[i]/this.resolutions_[i+1]!==r){r=void 0;break}}else r=this.resolutions_[i]/this.resolutions_[i+1];this.zoomFactor_=r,this.maxZoom=this.resolutions_.length-1,this.origin_=void 0!==t.origin?t.origin:null,this.origins_=null,void 0!==t.origins&&(this.origins_=t.origins,(0,u.assert)(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));var a=t.extent;void 0===a||this.origin_||this.origins_||(this.origin_=(0,f.getTopLeft)(a)),(0,u.assert)(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,void 0!==t.tileSizes&&(this.tileSizes_=t.tileSizes,(0,u.assert)(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=void 0!==t.tileSize?t.tileSize:this.tileSizes_?null:s.DEFAULT_TILE_SIZE,(0,u.assert)(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=void 0!==a?a:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],void 0!==t.sizes?this.fullTileRanges_=t.sizes.map(function(e,t){e=new l.default(Math.min(0,e[0]),Math.max(e[0]-1,-1),Math.min(0,e[1]),Math.max(e[1]-1,-1));return a&&(t=n.getTileRangeForExtentAndZ(a,t),e.minX=Math.max(t.minX,e.minX),e.maxX=Math.min(t.maxX,e.maxX),e.minY=Math.max(t.minY,e.minY),e.maxY=Math.min(t.maxY,e.maxY)),e}):a&&this.calculateTileRanges_(a)},(A=[{key:"forEachTileCoord",value:function(e,t,r){for(var n=this.getTileRangeForExtentAndZ(e,t),i=n.minX,o=n.maxX;i<=o;++i)for(var a=n.minY,s=n.maxY;a<=s;++a)r([t,i,a])}},{key:"forEachTileCoordParentTileRange",value:function(e,t,r,n){var i,o,a=null,s=e[0]-1;for(2===this.zoomFactor_?(i=e[1],o=e[2]):a=this.getTileCoordExtent(e,n);s>=this.minZoom;){if(t(s,void 0!==i&&void 0!==o?(i=Math.floor(i/2),o=Math.floor(o/2),(0,l.createOrUpdate)(i,i,o,o,r)):this.getTileRangeForExtentAndZ(a,s,r)))return!0;--s}return!1}},{key:"getExtent",value:function(){return this.extent_}},{key:"getMaxZoom",value:function(){return this.maxZoom}},{key:"getMinZoom",value:function(){return this.minZoom}},{key:"getOrigin",value:function(e){return this.origin_||this.origins_[e]}},{key:"getResolution",value:function(e){return this.resolutions_[e]}},{key:"getResolutions",value:function(){return this.resolutions_}},{key:"getTileCoordChildTileRange",value:function(e,t,r){var n,i;return e[0]<this.maxZoom?2===this.zoomFactor_?(i=2*e[1],n=2*e[2],(0,l.createOrUpdate)(i,1+i,n,1+n,t)):(i=this.getTileCoordExtent(e,r||this.tmpExtent_),this.getTileRangeForExtentAndZ(i,e[0]+1,t)):null}},{key:"getTileRangeForTileCoordAndZ",value:function(e,t,r){var n,i,o,a,s,u;return t>this.maxZoom||t<this.minZoom?null:(a=e[0],s=e[1],n=e[2],t===a?(0,l.createOrUpdate)(s,n,s,n,r):this.zoomFactor_?(u=Math.pow(this.zoomFactor_,t-a),i=Math.floor(s*u),o=Math.floor(n*u),t<a?(0,l.createOrUpdate)(i,i,o,o,r):(a=Math.floor(u*(s+1))-1,s=Math.floor(u*(n+1))-1,(0,l.createOrUpdate)(i,a,o,s,r))):(u=this.getTileCoordExtent(e,this.tmpExtent_),this.getTileRangeForExtentAndZ(u,t,r)))}},{key:"getTileRangeForExtentAndZ",value:function(e,t,r){this.getTileCoordForXYAndZ_(e[0],e[3],t,!1,y);var n=y[1],i=y[2];return this.getTileCoordForXYAndZ_(e[2],e[1],t,!0,y),(0,l.createOrUpdate)(n,y[1],i,y[2],r)}},{key:"getTileCoordCenter",value:function(e){var t=this.getOrigin(e[0]),r=this.getResolution(e[0]),n=(0,d.toSize)(this.getTileSize(e[0]),this.tmpSize_);return[t[0]+(e[1]+.5)*n[0]*r,t[1]-(e[2]+.5)*n[1]*r]}},{key:"getTileCoordExtent",value:function(e,t){var r=this.getOrigin(e[0]),n=this.getResolution(e[0]),i=(0,d.toSize)(this.getTileSize(e[0]),this.tmpSize_),o=r[0]+e[1]*i[0]*n,r=r[1]-(e[2]+1)*i[1]*n,e=o+i[0]*n,i=r+i[1]*n;return(0,f.createOrUpdate)(o,r,e,i,t)}},{key:"getTileCoordForCoordAndResolution",value:function(e,t,r){return this.getTileCoordForXYAndResolution_(e[0],e[1],t,!1,r)}},{key:"getTileCoordForXYAndResolution_",value:function(e,t,r,n,i){var o=this.getZForResolution(r),a=r/this.getResolution(o),s=this.getOrigin(o),u=(0,d.toSize)(this.getTileSize(o),this.tmpSize_),e=a*(e-s[0])/r/u[0],a=a*(s[1]-t)/r/u[1],a=n?(e=(0,c.ceil)(e,5)-1,(0,c.ceil)(a,5)-1):(e=(0,c.floor)(e,5),(0,c.floor)(a,5));return(0,h.createOrUpdate)(o,e,a,i)}},{key:"getTileCoordForXYAndZ_",value:function(e,t,r,n,i){var o=this.getOrigin(r),a=this.getResolution(r),s=(0,d.toSize)(this.getTileSize(r),this.tmpSize_),e=(e-o[0])/a/s[0],o=(o[1]-t)/a/s[1],o=n?(e=(0,c.ceil)(e,5)-1,(0,c.ceil)(o,5)-1):(e=(0,c.floor)(e,5),(0,c.floor)(o,5));return(0,h.createOrUpdate)(r,e,o,i)}},{key:"getTileCoordForCoordAndZ",value:function(e,t,r){return this.getTileCoordForXYAndZ_(e[0],e[1],t,!1,r)}},{key:"getTileCoordResolution",value:function(e){return this.resolutions_[e[0]]}},{key:"getTileSize",value:function(e){return this.tileSize_||this.tileSizes_[e]}},{key:"getFullTileRange",value:function(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null}},{key:"getZForResolution",value:function(e,t){e=(0,p.linearFindNearest)(this.resolutions_,e,t||0);return(0,c.clamp)(e,this.minZoom,this.maxZoom)}},{key:"tileCoordIntersectsViewport",value:function(e,t){return(0,n.intersectsLinearRing)(t,0,t.length,2,this.getTileCoordExtent(e))}},{key:"calculateTileRanges_",value:function(e){for(var t=this.resolutions_.length,r=new Array(t),n=this.minZoom;n<t;++n)r[n]=this.getTileRangeForExtentAndZ(e,n);this.fullTileRanges_=r}}])&&i(e.prototype,A),o&&i(e,o),Object.defineProperty(e,"prototype",{writable:!1}),e);r.default=A},{"../TileRange.js":103,"../array.js":110,"../asserts.js":111,"../extent.js":142,"../geom/flat/intersectsextent.js":223,"../math.js":279,"../size.js":337,"../tilecoord.js":396,"./common.js":400}],399:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.createFromCapabilitiesMatrixSet=function(i,e,o){var a=[],s=[],u=[],l=[],c=[],t=(o=void 0!==o?o:[],i.SupportedCRS),t=(0,p.get)(t),f=t.getMetersPerUnit(),h="ne"==t.getAxisOrientation().substr(0,2);return i.TileMatrix.sort(function(e,t){return t.ScaleDenominator-e.ScaleDenominator}),i.TileMatrix.forEach(function(t){var e,r,n;0<o.length&&!o.find(function(e){return t.Identifier==e.TileMatrix||!t.Identifier.includes(":")&&i.Identifier+":"+t.Identifier===e.TileMatrix})||(s.push(t.Identifier),e=28e-5*t.ScaleDenominator/f,r=t.TileWidth,n=t.TileHeight,u.push(h?[t.TopLeftCorner[1],t.TopLeftCorner[0]]:t.TopLeftCorner),a.push(e),l.push(r==n?r:[r,n]),c.push([t.MatrixWidth,t.MatrixHeight]))}),new d({extent:e,origins:u,resolutions:a,matrixIds:s,tileSizes:l,sizes:c})},r.default=void 0;var n,o=(n=e("./TileGrid.js"))&&n.__esModule?n:{default:n},p=e("../proj.js");function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function s(e,t,r){t=l(t);var n=e,t=u()?Reflect.construct(t,r||[],l(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(u=function(){return!!e})()}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var d=function(){function r(e){var t;if(this instanceof r)return(t=s(this,r,[{extent:e.extent,origin:e.origin,origins:e.origins,resolutions:e.resolutions,tileSize:e.tileSize,tileSizes:e.tileSizes,sizes:e.sizes}])).matrixIds_=e.matrixIds,t;throw new TypeError("Cannot call a class as a function")}var e,t=r,n=o.default;if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&c(t,n),t=r,(n=[{key:"getMatrixId",value:function(e){return this.matrixIds_[e]}},{key:"getMatrixIds",value:function(){return this.matrixIds_}}])&&a(t.prototype,n),e&&a(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();r.default=d},{"../proj.js":283,"./TileGrid.js":398}],400:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.DEFAULT_TILE_SIZE=r.DEFAULT_MAX_ZOOM=void 0;r.DEFAULT_MAX_ZOOM=42,r.DEFAULT_TILE_SIZE=256},{}],401:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.createFromTemplate=s,r.createFromTemplates=function(e,t){for(var r=e.length,n=new Array(r),i=0;i<r;++i)n[i]=s(e[i],t);return u(n)},r.createFromTileUrlFunctions=u,r.expandUrl=function(e){var t=[],r=/\{([a-z])-([a-z])\}/.exec(e);if(r){var n,i=r[1].charCodeAt(0),o=r[2].charCodeAt(0);for(n=i;n<=o;++n)t.push(e.replace(r[0],String.fromCharCode(n)))}else if(r=/\{(\d+)-(\d+)\}/.exec(e))for(var a=parseInt(r[2],10),s=parseInt(r[1],10);s<=a;s++)t.push(e.replace(r[0],s.toString()));else t.push(e);return t},r.nullTileUrlFunction=function(e,t,r){};var o=e("./math.js"),a=e("./tilecoord.js");function s(n,i){var o=/\{z\}/g,a=/\{x\}/g,s=/\{y\}/g,u=/\{-y\}/g;return function(t,e,r){if(t)return n.replace(o,t[0].toString()).replace(a,t[1].toString()).replace(s,t[2].toString()).replace(u,function(){var e=t[0],e=i.getFullTileRange(e);if(e)return(e.getHeight()-t[2]-1).toString();throw new Error("The {-y} placeholder requires a tile grid with extent")})}}function u(i){return 1===i.length?i[0]:function(e,t,r){var n;if(e)return n=(0,a.hash)(e),n=(0,o.modulo)(n,i.length),i[n](e,t,r)}}},{"./math.js":279,"./tilecoord.js":396}],402:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.apply=function(e,t){var r=t[0],n=t[1];return t[0]=e[0]*r+e[2]*n+e[4],t[1]=e[1]*r+e[3]*n+e[5],t},r.compose=l,r.composeCssTransform=function(e,t,r,n,i,o,a){return h(l(s(),e,t,r,n,i,o,a))},r.create=s,r.determinant=c,r.invert=function(e){return a(e,e)},r.makeInverse=a,r.makeScale=function(e,t,r){return o(e,t,0,0,r,0,0)},r.multiply=i,r.reset=function(e){return o(e,1,0,0,1,0,0)},r.rotate=function(e,t){var r=Math.cos(t),t=Math.sin(t);return i(e,o(n,r,t,-t,r,0,0))},r.scale=function(e,t,r){return i(e,o(n,t,0,0,r,0,0))},r.set=o,r.setFromArray=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},r.toString=h,r.translate=function(e,t,r){return i(e,o(n,1,0,0,1,t,r))};var u=e("./asserts.js"),n=new Array(6);function s(){return[1,0,0,1,0,0]}function i(e,t){var r=e[0],n=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=t[0],l=t[1],c=t[2],f=t[3],h=t[4],t=t[5];return e[0]=r*u+i*l,e[1]=n*u+o*l,e[2]=r*c+i*f,e[3]=n*c+o*f,e[4]=r*h+i*t+a,e[5]=n*h+o*t+s,e}function o(e,t,r,n,i,o,a){return e[0]=t,e[1]=r,e[2]=n,e[3]=i,e[4]=o,e[5]=a,e}function l(e,t,r,n,i,o,a,s){var u=Math.sin(o),o=Math.cos(o);return e[0]=n*o,e[1]=i*u,e[2]=-n*u,e[3]=i*o,e[4]=a*n*o-s*n*u+t,e[5]=a*i*u+s*i*o+r,e}function a(e,t){var r=c(t),n=((0,u.assert)(0!==r,"Transformation matrix cannot be inverted"),t[0]),i=t[1],o=t[2],a=t[3],s=t[4],t=t[5];return e[0]=a/r,e[1]=-i/r,e[2]=-o/r,e[3]=n/r,e[4]=(o*t-a*s)/r,e[5]=-(n*t-i*s)/r,e}function c(e){return e[0]*e[3]-e[1]*e[2]}var f=[1e6,1e6,1e6,1e6,2,2];function h(e){return"matrix("+e.map(function(e,t){return Math.round(e*f[t])/f[t]}).join(", ")+")"}},{"./asserts.js":111}],403:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.appendParams=function(e,t){var r=[],n=(Object.keys(t).forEach(function(e){null!==t[e]&&void 0!==t[e]&&r.push(e+"="+encodeURIComponent(t[e]))}),r.join("&"));return e=e.replace(/[?&]$/,""),(e+=e.includes("?")?"&":"?")+n}},{}],404:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.VERSION=void 0,r.abstract=function(){throw new Error("Unimplemented abstract method.")},r.getUid=function(e){return e.ol_uid||(e.ol_uid=String(++n))};var n=0;r.VERSION="9.2.4"},{}],405:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.create=function(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},r.fromTransform=function(e,t){return e[0]=t[0],e[1]=t[1],e[4]=t[2],e[5]=t[3],e[12]=t[4],e[13]=t[5],e}},{}],406:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.UNSIGNED_SHORT=r.UNSIGNED_INT=r.UNSIGNED_BYTE=r.STREAM_DRAW=r.STATIC_DRAW=r.FLOAT=r.ELEMENT_ARRAY_BUFFER=r.DYNAMIC_DRAW=r.ARRAY_BUFFER=void 0,r.getContext=n,r.getSupportedExtensions=function(){{var e;i||(e=n(document.createElement("canvas")))&&(i=e.getSupportedExtensions())}return i};var o=e("./has.js"),a=(r.ARRAY_BUFFER=34962,r.ELEMENT_ARRAY_BUFFER=34963,r.STREAM_DRAW=35040,r.STATIC_DRAW=35044,r.DYNAMIC_DRAW=35048,r.UNSIGNED_BYTE=5121,r.UNSIGNED_SHORT=5123,r.UNSIGNED_INT=5125,r.FLOAT=5126,["experimental-webgl","webgl","webkit-3d","moz-webgl"]);function n(e,t){t=Object.assign({preserveDrawingBuffer:!0,antialias:!o.SAFARI_BUG_237906},t);for(var r=a.length,n=0;n<r;++n)try{var i=e.getContext(a[n],t);if(i)return i}catch(e){}return null}var i=null},{"./has.js":233}],407:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("../events/Target.js")),a=n(e("../events/EventType.js")),s=n(e("../ImageTile.js")),u=n(e("../TileState.js")),l=e("../util.js");function n(e){return e&&e.__esModule?e:{default:e}}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function f(e,t,r){t=p(t);var n=e,t=h()?Reflect.construct(t,r||[],p(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(h=function(){return!!e})()}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}e=function(){function r(e){var t;if(this instanceof r)return(t=f(this,r)).tile,t.handleTileChange_=t.handleTileChange_.bind(t),t.gutter_=e.gutter||0,t.helper_=e.helper,t.loaded=!1,t.ready=!1,t;throw new TypeError("Cannot call a class as a function")}var e,t=r,n=o.default;if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&d(t,n),t=r,(n=[{key:"setTile",value:function(e){var t;e!==this.tile&&(this.tile&&this.tile.removeEventListener(a.default.CHANGE,this.handleTileChange_),this.tile=e,this.loaded=e.getState()===u.default.LOADED,this.loaded?this.uploadTile():(e instanceof s.default&&(t=e.getImage())instanceof Image&&!t.crossOrigin&&(t.crossOrigin="anonymous"),e.addEventListener(a.default.CHANGE,this.handleTileChange_)))}},{key:"uploadTile",value:function(){(0,l.abstract)()}},{key:"setReady",value:function(){this.ready=!0,this.dispatchEvent(a.default.CHANGE)}},{key:"handleTileChange_",value:function(){this.tile.getState()===u.default.LOADED&&(this.loaded=!0,this.uploadTile())}},{key:"disposeInternal",value:function(){this.tile.removeEventListener(a.default.CHANGE,this.handleTileChange_)}}])&&c(t.prototype,n),e&&c(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();r.default=e},{"../ImageTile.js":87,"../TileState.js":104,"../events/EventType.js":134,"../events/Target.js":137,"../util.js":404}],408:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.BufferUsage=void 0,r.getArrayClassForType=c;var n=e("../webgl.js"),i=e("../asserts.js");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=o(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==o(e)?e:e+""}(n.key),n)}}var s,u=r.BufferUsage={STATIC_DRAW:n.STATIC_DRAW,STREAM_DRAW:n.STREAM_DRAW,DYNAMIC_DRAW:n.DYNAMIC_DRAW},l=(e=function e(t,r){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.array_=null,this.type_=t,(0,i.assert)(t===n.ARRAY_BUFFER||t===n.ELEMENT_ARRAY_BUFFER,"A `WebGLArrayBuffer` must either be of type `ELEMENT_ARRAY_BUFFER` or `ARRAY_BUFFER`"),this.usage_=void 0!==r?r:u.STATIC_DRAW},(l=[{key:"ofSize",value:function(e){return this.array_=new(c(this.type_))(e),this}},{key:"fromArray",value:function(e){return this.array_=c(this.type_).from(e),this}},{key:"fromArrayBuffer",value:function(e){return this.array_=new(c(this.type_))(e),this}},{key:"getType",value:function(){return this.type_}},{key:"getArray",value:function(){return this.array_}},{key:"getUsage",value:function(){return this.usage_}},{key:"getSize",value:function(){return this.array_?this.array_.length:0}}])&&a(e.prototype,l),s&&a(e,s),Object.defineProperty(e,"prototype",{writable:!1}),e);function c(e){switch(e){case n.ARRAY_BUFFER:return Float32Array;case n.ELEMENT_ARRAY_BUFFER:return Uint32Array;default:return Float32Array}}r.default=l},{"../asserts.js":111,"../webgl.js":406}],409:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;r.default={LOST:"webglcontextlost",RESTORED:"webglcontextrestored"}},{}],410:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.ShaderType=r.DefaultUniform=r.AttributeType=void 0,r.computeAttributesStride=E,r.default=void 0;var a=o(e("../webgl/ContextEventType.js")),n=o(e("../Disposable.js")),s=o(e("./PostProcessingPass.js")),u=e("../webgl.js"),l=e("../obj.js"),c=e("../transform.js"),f=e("../vec/mat4.js"),h=e("../util.js");function o(e){return e&&e.__esModule?e:{default:e}}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}function d(e,t,r){t=y(t);var n=e,t=g()?Reflect.construct(t,r||[],y(e).constructor):t.apply(e,r);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(g=function(){return!!e})()}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function A(e,t){return(A=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}r.ShaderType={FRAGMENT_SHADER:35632,VERTEX_SHADER:35633};var m=r.DefaultUniform={PROJECTION_MATRIX:"u_projectionMatrix",SCREEN_TO_WORLD_MATRIX:"u_screenToWorldMatrix",TIME:"u_time",ZOOM:"u_zoom",RESOLUTION:"u_resolution",ROTATION:"u_rotation",VIEWPORT_SIZE_PX:"u_viewportSizePx",PIXEL_RATIO:"u_pixelRatio",HIT_DETECTION:"u_hitDetection"},v=r.AttributeType={UNSIGNED_BYTE:u.UNSIGNED_BYTE,UNSIGNED_SHORT:u.UNSIGNED_SHORT,UNSIGNED_INT:u.UNSIGNED_INT,FLOAT:u.FLOAT},b={};function _(e){return"shared/"+e}var w=0;e=function(){function o(e){var t,r,n;if(!(this instanceof o))throw new TypeError("Cannot call a class as a function");e=e||{},(t=d(this,o)).boundHandleWebGLContextLost_=t.handleWebGLContextLost.bind(t),t.boundHandleWebGLContextRestored_=t.handleWebGLContextRestored.bind(t),t.canvasCacheKey_=e.canvasCacheKey?_(e.canvasCacheKey):(n="unique/"+w,w+=1,n),t.gl_=(n=t.canvasCacheKey_,(r=b[n])||((i=document.createElement("canvas")).width=1,i.height=1,i.style.position="absolute",i.style.left="0",r={users:0,context:(0,u.getContext)(i)},b[n]=r),r.users+=1,r.context),t.bufferCache_={},t.extensionCache_={},t.currentProgram_=null,t.needsToBeRecreated_=!1;var i=t.gl_.canvas;return i.addEventListener(a.default.LOST,t.boundHandleWebGLContextLost_),i.addEventListener(a.default.RESTORED,t.boundHandleWebGLContextRestored_),t.offsetRotateMatrix_=(0,c.create)(),t.offsetScaleMatrix_=(0,c.create)(),t.tmpMat4_=(0,f.create)(),t.uniformLocationsByProgram_={},t.attribLocationsByProgram_={},t.uniforms_=[],e.uniforms&&t.setUniforms(e.uniforms),t.postProcessPasses_=e.postProcesses?e.postProcesses.map(function(e){return new s.default({webGlContext:t.gl_,scaleRatio:e.scaleRatio,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader,uniforms:e.uniforms})}):[new s.default({webGlContext:t.gl_})],t.shaderCompileErrors_=null,t.startTime_=Date.now(),t}var e,t=o,r=n.default;if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&A(t,r),t=o,(r=[{key:"setUniforms",value:function(e){this.uniforms_=[],this.addUniforms(e)}},{key:"addUniforms",value:function(e){for(var t in e)this.uniforms_.push({name:t,value:e[t]})}},{key:"canvasCacheKeyMatches",value:function(e){return this.canvasCacheKey_===_(e)}},{key:"getExtension",value:function(e){var t;return e in this.extensionCache_?this.extensionCache_[e]:(t=this.gl_.getExtension(e),this.extensionCache_[e]=t)}},{key:"bindBuffer",value:function(e){var t=this.gl_,r=(0,h.getUid)(e),n=this.bufferCache_[r];n||(n={buffer:e,webGlBuffer:t.createBuffer()},this.bufferCache_[r]=n),t.bindBuffer(e.getType(),n.webGlBuffer)}},{key:"flushBufferData",value:function(e){var t=this.gl_;this.bindBuffer(e),t.bufferData(e.getType(),e.getArray(),e.getUsage())}},{key:"deleteBuffer",value:function(e){var t=this.gl_,e=(0,h.getUid)(e),r=this.bufferCache_[e];r&&!t.isContextLost()&&t.deleteBuffer(r.webGlBuffer),delete this.bufferCache_[e]}},{key:"disposeInternal",value:function(){var e,t,r=this.gl_.canvas;r.removeEventListener(a.default.LOST,this.boundHandleWebGLContextLost_),r.removeEventListener(a.default.RESTORED,this.boundHandleWebGLContextRestored_),r=this.canvasCacheKey_,!(t=b[r])||(--t.users,0<t.users)||((e=(t=t.context).getExtension("WEBGL_lose_context"))&&e.loseContext(),(e=t.canvas).width=1,e.height=1,delete b[r]),delete this.gl_}},{key:"prepareDraw",value:function(e,t,r){var n=this.gl_,i=this.getCanvas(),o=e.size,a=e.pixelRatio;i.width===o[0]*a&&i.height===o[1]*a||(i.width=o[0]*a,i.height=o[1]*a,i.style.width=o[0]+"px",i.style.height=o[1]+"px");for(var s=this.postProcessPasses_.length-1;0<=s;s--)this.postProcessPasses_[s].init(e);n.bindTexture(n.TEXTURE_2D,null),n.clearColor(0,0,0,0),n.depthRange(0,1),n.clearDepth(1),n.clear(n.COLOR_BUFFER_BIT|n.DEPTH_BUFFER_BIT),n.enable(n.BLEND),n.blendFunc(n.ONE,t?n.ZERO:n.ONE_MINUS_SRC_ALPHA),r?(n.enable(n.DEPTH_TEST),n.depthFunc(n.LEQUAL)):n.disable(n.DEPTH_TEST)}},{key:"bindTexture",value:function(e,t,r){var n=this.gl_;n.activeTexture(n.TEXTURE0+t),n.bindTexture(n.TEXTURE_2D,e),n.uniform1i(this.getUniformLocation(r),t)}},{key:"prepareDrawToRenderTarget",value:function(e,t,r,n){var i=this.gl_,o=t.getSize();i.bindFramebuffer(i.FRAMEBUFFER,t.getFramebuffer()),i.bindRenderbuffer(i.RENDERBUFFER,t.getDepthbuffer()),i.viewport(0,0,o[0],o[1]),i.bindTexture(i.TEXTURE_2D,t.getTexture()),i.clearColor(0,0,0,0),i.depthRange(0,1),i.clearDepth(1),i.clear(i.COLOR_BUFFER_BIT|i.DEPTH_BUFFER_BIT),i.enable(i.BLEND),i.blendFunc(i.ONE,r?i.ZERO:i.ONE_MINUS_SRC_ALPHA),n?(i.enable(i.DEPTH_TEST),i.depthFunc(i.LEQUAL)):i.disable(i.DEPTH_TEST)}},{key:"drawElements",value:function(e,t){var r=this.gl_,n=(this.getExtension("OES_element_index_uint"),r.UNSIGNED_INT);r.drawElements(r.TRIANGLES,t-e,n,4*e)}},{key:"finalizeDraw",value:function(e,t,r){for(var n=0,i=this.postProcessPasses_.length;n<i;n++)n===i-1?this.postProcessPasses_[n].apply(e,null,t,r):this.postProcessPasses_[n].apply(e,this.postProcessPasses_[n+1])}},{key:"getCanvas",value:function(){return this.gl_.canvas}},{key:"getGL",value:function(){return this.gl_}},{key:"applyFrameState",value:function(e){var t=e.size,r=e.viewState.rotation,n=e.pixelRatio;this.setUniformFloatValue(m.TIME,.001*(Date.now()-this.startTime_)),this.setUniformFloatValue(m.ZOOM,e.viewState.zoom),this.setUniformFloatValue(m.RESOLUTION,e.viewState.resolution),this.setUniformFloatValue(m.PIXEL_RATIO,n),this.setUniformFloatVec2(m.VIEWPORT_SIZE_PX,[t[0],t[1]]),this.setUniformFloatValue(m.ROTATION,r)}},{key:"applyHitDetectionUniform",value:function(e){var t=this.getUniformLocation(m.HIT_DETECTION);this.getGL().uniform1i(t,e?1:0),e&&this.setUniformFloatValue(m.PIXEL_RATIO,.5)}},{key:"applyUniforms",value:function(r){var n,i=this,o=this.gl_,a=0;this.uniforms_.forEach(function(e){if((n="function"==typeof e.value?e.value(r):e.value)instanceof HTMLCanvasElement||n instanceof HTMLImageElement||n instanceof ImageData||n instanceof WebGLTexture){n instanceof WebGLTexture&&!e.texture?(e.prevValue=void 0,e.texture=n):e.texture||(e.prevValue=void 0,e.texture=o.createTexture()),i.bindTexture(e.texture,a,e.name),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.LINEAR),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE);var t=!(n instanceof HTMLImageElement)||n.complete;n instanceof WebGLTexture||!t||e.prevValue===n||(e.prevValue=n,o.texImage2D(o.TEXTURE_2D,0,o.RGBA,o.RGBA,o.UNSIGNED_BYTE,n)),a++}else if(Array.isArray(n)&&6===n.length)i.setUniformMatrixValue(e.name,(0,f.fromTransform)(i.tmpMat4_,n));else if(Array.isArray(n)&&n.length<=4)switch(n.length){case 2:return void o.uniform2f(i.getUniformLocation(e.name),n[0],n[1]);case 3:return void o.uniform3f(i.getUniformLocation(e.name),n[0],n[1],n[2]);case 4:return void o.uniform4f(i.getUniformLocation(e.name),n[0],n[1],n[2],n[3]);default:return}else"number"==typeof n&&o.uniform1f(i.getUniformLocation(e.name),n)})}},{key:"useProgram",value:function(e,t){this.gl_.useProgram(e),this.currentProgram_=e,this.applyFrameState(t),this.applyUniforms(t)}},{key:"compileShader",value:function(e,t){var r=this.gl_,t=r.createShader(t);return r.shaderSource(t,e),r.compileShader(t),t}},{key:"getProgram",value:function(e,t){var r,n=this.gl_,e=this.compileShader(e,n.FRAGMENT_SHADER),t=this.compileShader(t,n.VERTEX_SHADER),i=n.createProgram();if(n.attachShader(i,e),n.attachShader(i,t),n.linkProgram(i),!n.getShaderParameter(e,n.COMPILE_STATUS))throw r="Fragment shader compilation failed: ".concat(n.getShaderInfoLog(e)),new Error(r);if(n.deleteShader(e),!n.getShaderParameter(t,n.COMPILE_STATUS))throw r="Vertex shader compilation failed: ".concat(n.getShaderInfoLog(t)),new Error(r);if(n.deleteShader(t),n.getProgramParameter(i,n.LINK_STATUS))return i;throw e="GL program linking failed: ".concat(n.getProgramInfoLog(i)),new Error(e)}},{key:"getUniformLocation",value:function(e){var t=(0,h.getUid)(this.currentProgram_);return void 0===this.uniformLocationsByProgram_[t]&&(this.uniformLocationsByProgram_[t]={}),void 0===this.uniformLocationsByProgram_[t][e]&&(this.uniformLocationsByProgram_[t][e]=this.gl_.getUniformLocation(this.currentProgram_,e)),this.uniformLocationsByProgram_[t][e]}},{key:"getAttributeLocation",value:function(e){var t=(0,h.getUid)(this.currentProgram_);return void 0===this.attribLocationsByProgram_[t]&&(this.attribLocationsByProgram_[t]={}),void 0===this.attribLocationsByProgram_[t][e]&&(this.attribLocationsByProgram_[t][e]=this.gl_.getAttribLocation(this.currentProgram_,e)),this.attribLocationsByProgram_[t][e]}},{key:"makeProjectionTransform",value:function(e,t){var r=e.size,n=e.viewState.rotation,i=e.viewState.resolution,e=e.viewState.center;return(0,c.compose)(t,0,0,2/(i*r[0]),2/(i*r[1]),-n,-e[0],-e[1]),t}},{key:"setUniformFloatValue",value:function(e,t){this.gl_.uniform1f(this.getUniformLocation(e),t)}},{key:"setUniformFloatVec2",value:function(e,t){this.gl_.uniform2fv(this.getUniformLocation(e),t)}},{key:"setUniformFloatVec4",value:function(e,t){this.gl_.uniform4fv(this.getUniformLocation(e),t)}},{key:"setUniformMatrixValue",value:function(e,t){this.gl_.uniformMatrix4fv(this.getUniformLocation(e),!1,t)}},{key:"enableAttributeArray_",value:function(e,t,r,n,i){e=this.getAttributeLocation(e);e<0||(this.gl_.enableVertexAttribArray(e),this.gl_.vertexAttribPointer(e,t,r,!1,n,i))}},{key:"enableAttributes",value:function(e){for(var t=E(e),r=0,n=0;n<e.length;n++){var i=e[n];this.enableAttributeArray_(i.name,i.size,i.type||u.FLOAT,t,r),r+=i.size*C(i.type)}}},{key:"handleWebGLContextLost",value:function(e){(0,l.clear)(this.bufferCache_),this.currentProgram_=null,e.preventDefault()}},{key:"handleWebGLContextRestored",value:function(){this.needsToBeRecreated_=!0}},{key:"needsToBeRecreated",value:function(){return this.needsToBeRecreated_}},{key:"createTexture",value:function(e,t,r){var n=this.gl_,i=(r=r||n.createTexture(),n.RGBA),o=n.RGBA,a=n.UNSIGNED_BYTE;return n.bindTexture(n.TEXTURE_2D,r),t?n.texImage2D(n.TEXTURE_2D,0,i,o,a,t):n.texImage2D(n.TEXTURE_2D,0,i,e[0],e[1],0,o,a,null),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),r}}])&&p(t.prototype,r),e&&p(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();function E(e){for(var t=0,r=0;r<e.length;r++){var n=e[r];t+=n.size*C(n.type)}return t}function C(e){switch(e){case v.UNSIGNED_BYTE:return Uint8Array.BYTES_PER_ELEMENT;case v.UNSIGNED_SHORT:return Uint16Array.BYTES_PER_ELEMENT;case v.UNSIGNED_INT:return Uint32Array.BYTES_PER_ELEMENT;default:v.FLOAT;return Float32Array.BYTES_PER_ELEMENT}}r.default=e},{"../Disposable.js":81,"../obj.js":281,"../transform.js":402,"../util.js":404,"../vec/mat4.js":405,"../webgl.js":406,"../webgl/ContextEventType.js":409,"./PostProcessingPass.js":412}],411:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;o=function e(t,r){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.name=t,this.data=r,this.texture_=null},(s=[{key:"getTexture",value:function(e){var t;return this.texture_||(t=e.createTexture(),e.bindTexture(e.TEXTURE_2D,t),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,this.data.length/4,1,0,e.RGBA,e.UNSIGNED_BYTE,this.data),this.texture_=t),this.texture_}},{key:"delete",value:function(e){this.texture_&&e.deleteTexture(this.texture_),this.texture_=null}}])&&n(o.prototype,s),a&&n(o,a),Object.defineProperty(o,"prototype",{writable:!1});var o,a,s=o;r.default=s},{}],412:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=e("../util.js");function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}e=function e(t){var r=this;if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.gl_=t.webGlContext;var n=this.gl_,i=(this.scaleRatio_=t.scaleRatio||1,this.renderTargetTexture_=n.createTexture(),this.renderTargetTextureSize_=null,this.frameBuffer_=n.createFramebuffer(),this.depthBuffer_=n.createRenderbuffer(),n.createShader(n.VERTEX_SHADER)),o=(n.shaderSource(i,t.vertexShader||"\n  precision mediump float;\n  \n  attribute vec2 a_position;\n  varying vec2 v_texCoord;\n  varying vec2 v_screenCoord;\n  \n  uniform vec2 u_screenSize;\n   \n  void main() {\n    v_texCoord = a_position * 0.5 + 0.5;\n    v_screenCoord = v_texCoord * u_screenSize;\n    gl_Position = vec4(a_position, 0.0, 1.0);\n  }\n"),n.compileShader(i),n.createShader(n.FRAGMENT_SHADER));n.shaderSource(o,t.fragmentShader||"\n  precision mediump float;\n   \n  uniform sampler2D u_image;\n  uniform float u_opacity;\n   \n  varying vec2 v_texCoord;\n   \n  void main() {\n    gl_FragColor = texture2D(u_image, v_texCoord) * u_opacity;\n  }\n"),n.compileShader(o),this.renderTargetProgram_=n.createProgram(),n.attachShader(this.renderTargetProgram_,i),n.attachShader(this.renderTargetProgram_,o),n.linkProgram(this.renderTargetProgram_),this.renderTargetVerticesBuffer_=n.createBuffer(),n.bindBuffer(n.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),n.bufferData(n.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,1,-1,1,1,-1,1]),n.STATIC_DRAW),this.renderTargetAttribLocation_=n.getAttribLocation(this.renderTargetProgram_,"a_position"),this.renderTargetUniformLocation_=n.getUniformLocation(this.renderTargetProgram_,"u_screenSize"),this.renderTargetOpacityLocation_=n.getUniformLocation(this.renderTargetProgram_,"u_opacity"),this.renderTargetTextureLocation_=n.getUniformLocation(this.renderTargetProgram_,"u_image"),this.uniforms_=[],t.uniforms&&Object.keys(t.uniforms).forEach(function(e){r.uniforms_.push({value:t.uniforms[e],location:n.getUniformLocation(r.renderTargetProgram_,e)})})},(a=[{key:"getGL",value:function(){return this.gl_}},{key:"init",value:function(e){var t,r,n,i=this.getGL(),o=[i.drawingBufferWidth*this.scaleRatio_,i.drawingBufferHeight*this.scaleRatio_];i.bindFramebuffer(i.FRAMEBUFFER,this.getFrameBuffer()),i.bindRenderbuffer(i.RENDERBUFFER,this.getDepthBuffer()),i.viewport(0,0,o[0],o[1]),this.renderTargetTextureSize_&&this.renderTargetTextureSize_[0]===o[0]&&this.renderTargetTextureSize_[1]===o[1]||(this.renderTargetTextureSize_=o,t=i.RGBA,r=i.RGBA,n=i.UNSIGNED_BYTE,i.bindTexture(i.TEXTURE_2D,this.renderTargetTexture_),i.texImage2D(i.TEXTURE_2D,0,t,o[0],o[1],0,r,n,null),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,this.renderTargetTexture_,0),i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_COMPONENT16,o[0],o[1]),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.RENDERBUFFER,this.depthBuffer_))}},{key:"apply",value:function(e,t,r,n){var i=this.getGL(),o=e.size,a=(i.bindFramebuffer(i.FRAMEBUFFER,t?t.getFrameBuffer():null),i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,this.renderTargetTexture_),t||(t=(0,s.getUid)(i.canvas),e.renderTargets[t])||((a=i.getContextAttributes())&&a.preserveDrawingBuffer&&(i.clearColor(0,0,0,0),i.clearDepth(1),i.clear(i.COLOR_BUFFER_BIT|i.DEPTH_BUFFER_BIT)),e.renderTargets[t]=!0),i.disable(i.DEPTH_TEST),i.enable(i.BLEND),i.blendFunc(i.ONE,i.ONE_MINUS_SRC_ALPHA),i.viewport(0,0,i.drawingBufferWidth,i.drawingBufferHeight),i.bindBuffer(i.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),i.useProgram(this.renderTargetProgram_),i.enableVertexAttribArray(this.renderTargetAttribLocation_),i.vertexAttribPointer(this.renderTargetAttribLocation_,2,i.FLOAT,!1,0,0),i.uniform2f(this.renderTargetUniformLocation_,o[0],o[1]),i.uniform1i(this.renderTargetTextureLocation_,0),e.layerStatesArray[e.layerIndex].opacity);i.uniform1f(this.renderTargetOpacityLocation_,a),this.applyUniforms(e),r&&r(i,e),i.drawArrays(i.TRIANGLES,0,6),n&&n(i,e)}},{key:"getFrameBuffer",value:function(){return this.frameBuffer_}},{key:"getDepthBuffer",value:function(){return this.depthBuffer_}},{key:"applyUniforms",value:function(t){var r,n=this.getGL(),i=1;this.uniforms_.forEach(function(e){if((r="function"==typeof e.value?e.value(t):e.value)instanceof HTMLCanvasElement||r instanceof ImageData)e.texture||(e.texture=n.createTexture()),n.activeTexture(n["TEXTURE".concat(i)]),n.bindTexture(n.TEXTURE_2D,e.texture),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),r instanceof ImageData?n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,r.width,r.height,0,n.UNSIGNED_BYTE,new Uint8Array(r.data)):n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,r),n.uniform1i(e.location,i++);else if(Array.isArray(r))switch(r.length){case 2:return void n.uniform2f(e.location,r[0],r[1]);case 3:return void n.uniform3f(e.location,r[0],r[1],r[2]);case 4:return void n.uniform4f(e.location,r[0],r[1],r[2],r[3]);default:return}else"number"==typeof r&&n.uniform1f(e.location,r)})}}])&&n(e.prototype,a),o&&n(e,o),Object.defineProperty(e,"prototype",{writable:!1});var o,a=e;r.default=a},{"../util.js":404}],413:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("../array.js");function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:e+""}(n.key),n)}}var a,s=new Uint8Array(4),u=(e=function e(t,r){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");t=(this.helper_=t).getGL();this.texture_=t.createTexture(),this.framebuffer_=t.createFramebuffer(),this.depthbuffer_=t.createRenderbuffer(),this.size_=r||[1,1],this.data_=new Uint8Array(0),this.dataCacheDirty_=!0,this.updateSize_()},(u=[{key:"setSize",value:function(e){(0,n.equals)(e,this.size_)||(this.size_[0]=e[0],this.size_[1]=e[1],this.updateSize_())}},{key:"getSize",value:function(){return this.size_}},{key:"clearCachedData",value:function(){this.dataCacheDirty_=!0}},{key:"readAll",value:function(){var e,t;return this.dataCacheDirty_&&(e=this.size_,(t=this.helper_.getGL()).bindFramebuffer(t.FRAMEBUFFER,this.framebuffer_),t.readPixels(0,0,e[0],e[1],t.RGBA,t.UNSIGNED_BYTE,this.data_),this.dataCacheDirty_=!1),this.data_}},{key:"readPixel",value:function(e,t){return e<0||t<0||e>this.size_[0]||t>=this.size_[1]?(s[0]=0,s[1]=0,s[2]=0,s[3]=0):(this.readAll(),e=Math.floor(e)+(this.size_[1]-Math.floor(t)-1)*this.size_[0],s[0]=this.data_[4*e],s[1]=this.data_[4*e+1],s[2]=this.data_[4*e+2],s[3]=this.data_[4*e+3]),s}},{key:"getTexture",value:function(){return this.texture_}},{key:"getFramebuffer",value:function(){return this.framebuffer_}},{key:"getDepthbuffer",value:function(){return this.depthbuffer_}},{key:"updateSize_",value:function(){var e=this.size_,t=this.helper_.getGL();this.texture_=this.helper_.createTexture(e,null,this.texture_),t.bindFramebuffer(t.FRAMEBUFFER,this.framebuffer_),t.viewport(0,0,e[0],e[1]),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this.texture_,0),t.bindRenderbuffer(t.RENDERBUFFER,this.depthbuffer_),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_COMPONENT16,e[0],e[1]),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,this.depthbuffer_),this.data_=new Uint8Array(e[0]*e[1]*4)}}])&&o(e.prototype,u),a&&o(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e);r.default=u},{"../array.js":110}],414:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ShaderBuilder=r.COMMON_HEADER=void 0;var n=e("../render/webgl/utils.js"),i=e("../expr/gpu.js"),e=e("../style/flat.js");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=o(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==o(e)?e:e+""}(n.key),n)}}var s,u=r.COMMON_HEADER="#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nuniform mat4 u_projectionMatrix;\nuniform mat4 u_screenToWorldMatrix;\nuniform vec2 u_viewportSizePx;\nuniform float u_pixelRatio;\nuniform float u_globalAlpha;\nuniform float u_time;\nuniform float u_zoom;\nuniform float u_resolution;\nuniform float u_rotation;\nuniform vec4 u_renderExtent;\nuniform vec2 u_patternOrigin;\nuniform float u_depth;\nuniform mediump int u_hitDetection;\n\nconst float PI = 3.141592653589793238;\nconst float TWO_PI = 2.0 * PI;\n\n// this used to produce an alpha-premultiplied color from a texture\nvec4 samplePremultiplied(sampler2D sampler, vec2 texCoord) {\n  vec4 color = texture2D(sampler, texCoord);\n  return vec4(color.rgb * color.a, color.a);\n}\n",l=(0,e.createDefaultStyle)();r.ShaderBuilder=(e=function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.uniforms_=[],this.attributes_=[],this.varyings_=[],this.hasSymbol_=!1,this.symbolSizeExpression_="vec2(".concat((0,i.numberToGlsl)(l["circle-radius"])," + ").concat((0,i.numberToGlsl)(.5*l["circle-stroke-width"]),")"),this.symbolRotationExpression_="0.0",this.symbolOffsetExpression_="vec2(0.0)",this.symbolColorExpression_=(0,i.colorToGlsl)(l["circle-fill-color"]),this.texCoordExpression_="vec4(0.0, 0.0, 1.0, 1.0)",this.discardExpression_="false",this.symbolRotateWithView_=!1,this.hasStroke_=!1,this.strokeWidthExpression_=(0,i.numberToGlsl)(l["stroke-width"]),this.strokeColorExpression_=(0,i.colorToGlsl)(l["stroke-color"]),this.strokeOffsetExpression_="0.",this.strokeCapExpression_=(0,i.stringToGlsl)("round"),this.strokeJoinExpression_=(0,i.stringToGlsl)("round"),this.strokeMiterLimitExpression_="10.",this.strokeDistanceFieldExpression_="-1000.",this.hasFill_=!1,this.fillColorExpression_=(0,i.colorToGlsl)(l["fill-color"]),this.vertexShaderFunctions_=[],this.fragmentShaderFunctions_=[]},(r=[{key:"addUniform",value:function(e){return this.uniforms_.push(e),this}},{key:"addAttribute",value:function(e){return this.attributes_.push(e),this}},{key:"addVarying",value:function(e,t,r){return this.varyings_.push({name:e,type:t,expression:r}),this}},{key:"setSymbolSizeExpression",value:function(e){return this.hasSymbol_=!0,this.symbolSizeExpression_=e,this}},{key:"getSymbolSizeExpression",value:function(){return this.symbolSizeExpression_}},{key:"setSymbolRotationExpression",value:function(e){return this.symbolRotationExpression_=e,this}},{key:"setSymbolOffsetExpression",value:function(e){return this.symbolOffsetExpression_=e,this}},{key:"getSymbolOffsetExpression",value:function(){return this.symbolOffsetExpression_}},{key:"setSymbolColorExpression",value:function(e){return this.hasSymbol_=!0,this.symbolColorExpression_=e,this}},{key:"getSymbolColorExpression",value:function(){return this.symbolColorExpression_}},{key:"setTextureCoordinateExpression",value:function(e){return this.texCoordExpression_=e,this}},{key:"setFragmentDiscardExpression",value:function(e){return this.discardExpression_=e,this}},{key:"getFragmentDiscardExpression",value:function(){return this.discardExpression_}},{key:"setSymbolRotateWithView",value:function(e){return this.symbolRotateWithView_=e,this}},{key:"setStrokeWidthExpression",value:function(e){return this.hasStroke_=!0,this.strokeWidthExpression_=e,this}},{key:"setStrokeColorExpression",value:function(e){return this.hasStroke_=!0,this.strokeColorExpression_=e,this}},{key:"getStrokeColorExpression",value:function(){return this.strokeColorExpression_}},{key:"setStrokeOffsetExpression",value:function(e){return this.strokeOffsetExpression_=e,this}},{key:"setStrokeCapExpression",value:function(e){return this.strokeCapExpression_=e,this}},{key:"setStrokeJoinExpression",value:function(e){return this.strokeJoinExpression_=e,this}},{key:"setStrokeMiterLimitExpression",value:function(e){return this.strokeMiterLimitExpression_=e,this}},{key:"setStrokeDistanceFieldExpression",value:function(e){return this.strokeDistanceFieldExpression_=e,this}},{key:"setFillColorExpression",value:function(e){return this.hasFill_=!0,this.fillColorExpression_=e,this}},{key:"getFillColorExpression",value:function(){return this.fillColorExpression_}},{key:"addVertexShaderFunction",value:function(e){this.vertexShaderFunctions_.includes(e)||this.vertexShaderFunctions_.push(e)}},{key:"addFragmentShaderFunction",value:function(e){this.fragmentShaderFunctions_.includes(e)||this.fragmentShaderFunctions_.push(e)}},{key:"getSymbolVertexShader",value:function(){return this.hasSymbol_?"".concat(u,"\n").concat(this.uniforms_.map(function(e){return"uniform "+e+";"}).join("\n"),"\nattribute vec2 a_position;\nattribute float a_index;\nattribute vec4 a_prop_hitColor;\n").concat(this.attributes_.map(function(e){return"attribute "+e+";"}).join("\n"),"\nvarying vec2 v_texCoord;\nvarying vec2 v_quadCoord;\nvarying vec4 v_prop_hitColor;\nvarying vec2 v_centerPx;\nvarying float v_angle;\nvarying vec2 v_quadSizePx;\n").concat(this.varyings_.map(function(e){return"varying "+e.type+" "+e.name+";"}).join("\n"),"\n").concat(this.vertexShaderFunctions_.join("\n"),"\nvec2 pxToScreen(vec2 coordPx) {\n  vec2 scaled = coordPx / u_viewportSizePx / 0.5;\n  return scaled;\n}\n\nvec2 screenToPx(vec2 coordScreen) {\n  return (coordScreen * 0.5 + 0.5) * u_viewportSizePx;\n}\n\nvoid main(void) {\n  v_quadSizePx = ").concat(this.symbolSizeExpression_,";\n  vec2 halfSizePx = v_quadSizePx * 0.5;\n  vec2 centerOffsetPx = ").concat(this.symbolOffsetExpression_,";\n  vec2 offsetPx = centerOffsetPx;\n  if (a_index == 0.0) {\n    offsetPx -= halfSizePx;\n  } else if (a_index == 1.0) {\n    offsetPx += halfSizePx * vec2(1., -1.);\n  } else if (a_index == 2.0) {\n    offsetPx += halfSizePx;\n  } else {\n    offsetPx += halfSizePx * vec2(-1., 1.);\n  }\n  float angle = ").concat(this.symbolRotationExpression_,";\n  ").concat(this.symbolRotateWithView_?"angle += u_rotation;":"","\n  float c = cos(-angle);\n  float s = sin(-angle);\n  offsetPx = vec2(c * offsetPx.x - s * offsetPx.y, s * offsetPx.x + c * offsetPx.y);\n  vec4 center = u_projectionMatrix * vec4(a_position, 0.0, 1.0);\n  gl_Position = center + vec4(pxToScreen(offsetPx), u_depth, 0.);\n  vec4 texCoord = ").concat(this.texCoordExpression_,";\n  float u = a_index == 0.0 || a_index == 3.0 ? texCoord.s : texCoord.p;\n  float v = a_index == 2.0 || a_index == 3.0 ? texCoord.t : texCoord.q;\n  v_texCoord = vec2(u, v);\n  v_prop_hitColor = a_prop_hitColor;\n  v_angle = angle;\n  c = cos(-v_angle);\n  s = sin(-v_angle);\n  centerOffsetPx = vec2(c * centerOffsetPx.x - s * centerOffsetPx.y, s * centerOffsetPx.x + c * centerOffsetPx.y); \n  v_centerPx = screenToPx(center.xy) + centerOffsetPx;\n").concat(this.varyings_.map(function(e){return"  "+e.name+" = "+e.expression+";"}).join("\n"),"\n}"):null}},{key:"getSymbolFragmentShader",value:function(){return this.hasSymbol_?"".concat(u,"\n").concat(this.uniforms_.map(function(e){return"uniform "+e+";"}).join("\n"),"\nvarying vec2 v_texCoord;\nvarying vec4 v_prop_hitColor;\nvarying vec2 v_centerPx;\nvarying float v_angle;\nvarying vec2 v_quadSizePx;\n").concat(this.varyings_.map(function(e){return"varying "+e.type+" "+e.name+";"}).join("\n"),"\n").concat(this.fragmentShaderFunctions_.join("\n"),"\n\nvoid main(void) {\n  if (").concat(this.discardExpression_,") { discard; }\n  vec2 coordsPx = gl_FragCoord.xy / u_pixelRatio - v_centerPx; // relative to center\n  float c = cos(v_angle);\n  float s = sin(v_angle);\n  coordsPx = vec2(c * coordsPx.x - s * coordsPx.y, s * coordsPx.x + c * coordsPx.y);\n  gl_FragColor = ").concat(this.symbolColorExpression_,";\n  if (u_hitDetection > 0) {\n    if (gl_FragColor.a < 0.05) { discard; };\n    gl_FragColor = v_prop_hitColor;\n  }\n}"):null}},{key:"getStrokeVertexShader",value:function(){return this.hasStroke_?"".concat(u,"\n").concat(this.uniforms_.map(function(e){return"uniform "+e+";"}).join("\n"),"\nattribute vec2 a_position;\nattribute float a_index;\nattribute vec2 a_segmentStart;\nattribute vec2 a_segmentEnd;\nattribute float a_parameters;\nattribute float a_distance;\nattribute vec2 a_joinAngles;\nattribute vec4 a_prop_hitColor;\n").concat(this.attributes_.map(function(e){return"attribute "+e+";"}).join("\n"),"\nvarying vec2 v_segmentStart;\nvarying vec2 v_segmentEnd;\nvarying float v_angleStart;\nvarying float v_angleEnd;\nvarying float v_width;\nvarying vec4 v_prop_hitColor;\nvarying float v_distanceOffsetPx;\n").concat(this.varyings_.map(function(e){return"varying "+e.type+" "+e.name+";"}).join("\n"),"\n").concat(this.vertexShaderFunctions_.join("\n"),'\nvec2 worldToPx(vec2 worldPos) {\n  vec4 screenPos = u_projectionMatrix * vec4(worldPos, 0.0, 1.0);\n  return (0.5 * screenPos.xy + 0.5) * u_viewportSizePx;\n}\n\nvec4 pxToScreen(vec2 pxPos) {\n  vec2 screenPos = 2.0 * pxPos / u_viewportSizePx - 1.0;\n  return vec4(screenPos, u_depth, 1.0);\n}\n\nbool isCap(float joinAngle) {\n  return joinAngle < -0.1;\n}\n\nvec2 getJoinOffsetDirection(vec2 normalPx, float joinAngle) {\n  float halfAngle = joinAngle / 2.0;\n  float c = cos(halfAngle);\n  float s = sin(halfAngle);\n  vec2 angleBisectorNormal = vec2(s * normalPx.x + c * normalPx.y, -c * normalPx.x + s * normalPx.y);\n  float length = 1.0 / s;\n  return angleBisectorNormal * length;\n}\n\nvec2 getOffsetPoint(vec2 point, vec2 normal, float joinAngle, float offsetPx) {\n  // if on a cap or the join angle is too high, offset the line along the segment normal\n  if (cos(joinAngle) > 0.998 || isCap(joinAngle)) {\n    return point - normal * offsetPx;\n  }\n  // offset is applied along the inverted normal (positive offset goes "right" relative to line direction)\n  return point - getJoinOffsetDirection(normal, joinAngle) * offsetPx;\n}\n\nvoid main(void) {\n  v_angleStart = a_joinAngles.x;\n  v_angleEnd = a_joinAngles.y;\n  float vertexNumber = floor(abs(a_parameters) / 10000. + 0.5);\n  // we\'re reading the fractional part while keeping the sign (so -4.12 gives -0.12, 3.45 gives 0.45)\n  float angleTangentSum = fract(abs(a_parameters) / 10000.) * 10000. * sign(a_parameters);\n\n  float lineWidth = ').concat(this.strokeWidthExpression_,";\n  float lineOffsetPx = ").concat(this.strokeOffsetExpression_,";\n\n  // compute segment start/end in px with offset\n  vec2 segmentStartPx = worldToPx(a_segmentStart);\n  vec2 segmentEndPx = worldToPx(a_segmentEnd);\n  vec2 tangentPx = normalize(segmentEndPx - segmentStartPx);\n  vec2 normalPx = vec2(-tangentPx.y, tangentPx.x);\n  segmentStartPx = getOffsetPoint(segmentStartPx, normalPx, v_angleStart, lineOffsetPx),\n  segmentEndPx = getOffsetPoint(segmentEndPx, normalPx, v_angleEnd, lineOffsetPx);\n  \n  // compute current vertex position\n  float normalDir = vertexNumber < 0.5 || (vertexNumber > 1.5 && vertexNumber < 2.5) ? 1.0 : -1.0;\n  float tangentDir = vertexNumber < 1.5 ? 1.0 : -1.0;\n  float angle = vertexNumber < 1.5 ? v_angleStart : v_angleEnd;\n  vec2 joinDirection;\n  vec2 positionPx = vertexNumber < 1.5 ? segmentStartPx : segmentEndPx;\n  // if angle is too high, do not make a proper join\n  if (cos(angle) > ").concat(n.LINESTRING_ANGLE_COSINE_CUTOFF," || isCap(angle)) {\n    joinDirection = normalPx * normalDir - tangentPx * tangentDir;\n  } else {\n    joinDirection = getJoinOffsetDirection(normalPx * normalDir, angle);\n  }\n  positionPx = positionPx + joinDirection * (lineWidth * 0.5 + 1.); // adding 1 pixel for antialiasing\n  gl_Position = pxToScreen(positionPx);\n\n  v_segmentStart = segmentStartPx;\n  v_segmentEnd = segmentEndPx;\n  v_width = lineWidth;\n  v_prop_hitColor = a_prop_hitColor;\n  v_distanceOffsetPx = a_distance / u_resolution - (lineOffsetPx * angleTangentSum);\n").concat(this.varyings_.map(function(e){return"  "+e.name+" = "+e.expression+";"}).join("\n"),"\n}"):null}},{key:"getStrokeFragmentShader",value:function(){return this.hasStroke_?"".concat(u,"\n").concat(this.uniforms_.map(function(e){return"uniform "+e+";"}).join("\n"),"\nvarying vec2 v_segmentStart;\nvarying vec2 v_segmentEnd;\nvarying float v_angleStart;\nvarying float v_angleEnd;\nvarying float v_width;\nvarying vec4 v_prop_hitColor;\nvarying float v_distanceOffsetPx;\n").concat(this.varyings_.map(function(e){return"varying "+e.type+" "+e.name+";"}).join("\n"),"\n").concat(this.fragmentShaderFunctions_.join("\n"),"\n\nvec2 pxToWorld(vec2 pxPos) {\n  vec2 screenPos = 2.0 * pxPos / u_viewportSizePx - 1.0;\n  return (u_screenToWorldMatrix * vec4(screenPos, 0.0, 1.0)).xy;\n}\n\nbool isCap(float joinAngle) {\n  return joinAngle < -0.1;\n}\n\nfloat segmentDistanceField(vec2 point, vec2 start, vec2 end, float width) {\n  vec2 tangent = normalize(end - start);\n  vec2 normal = vec2(-tangent.y, tangent.x);\n  vec2 startToPoint = point - start;\n  return abs(dot(startToPoint, normal)) - width * 0.5;\n}\n\nfloat buttCapDistanceField(vec2 point, vec2 start, vec2 end) {\n  vec2 startToPoint = point - start;\n  vec2 tangent = normalize(end - start);\n  return dot(startToPoint, -tangent);\n}\n\nfloat squareCapDistanceField(vec2 point, vec2 start, vec2 end, float width) {\n  return buttCapDistanceField(point, start, end) - width * 0.5;\n}\n\nfloat roundCapDistanceField(vec2 point, vec2 start, vec2 end, float width) {\n  float onSegment = max(0., 1000. * dot(point - start, end - start)); // this is very high when inside the segment\n  return length(point - start) - width * 0.5 - onSegment;\n}\n\nfloat roundJoinDistanceField(vec2 point, vec2 start, vec2 end, float width) {\n  return roundCapDistanceField(point, start, end, width);\n}\n\nfloat bevelJoinField(vec2 point, vec2 start, vec2 end, float width, float joinAngle) {\n  vec2 startToPoint = point - start;\n  vec2 tangent = normalize(end - start);\n  float c = cos(joinAngle * 0.5);\n  float s = sin(joinAngle * 0.5);\n  float direction = -sign(sin(joinAngle));\n  vec2 bisector = vec2(c * tangent.x - s * tangent.y, s * tangent.x + c * tangent.y);\n  float radius = width * 0.5 * s;\n  return dot(startToPoint, bisector * direction) - radius;\n}\n\nfloat miterJoinDistanceField(vec2 point, vec2 start, vec2 end, float width, float joinAngle) {\n  if (cos(joinAngle) > ").concat(n.LINESTRING_ANGLE_COSINE_CUTOFF,") { // avoid risking a division by zero\n    return bevelJoinField(point, start, end, width, joinAngle);\n  }\n  float miterLength = 1. / sin(joinAngle * 0.5);\n  float miterLimit = ").concat(this.strokeMiterLimitExpression_,";\n  if (miterLength > miterLimit) {\n    return bevelJoinField(point, start, end, width, joinAngle);\n  }\n  return -1000.;\n}\n\nfloat capDistanceField(vec2 point, vec2 start, vec2 end, float width, float capType) {\n   if (capType == ").concat((0,i.stringToGlsl)("butt"),") {\n    return buttCapDistanceField(point, start, end);\n  } else if (capType == ").concat((0,i.stringToGlsl)("square"),") {\n    return squareCapDistanceField(point, start, end, width);\n  }\n  return roundCapDistanceField(point, start, end, width);\n}\n\nfloat joinDistanceField(vec2 point, vec2 start, vec2 end, float width, float joinAngle, float joinType) {\n  if (joinType == ").concat((0,i.stringToGlsl)("bevel"),") {\n    return bevelJoinField(point, start, end, width, joinAngle);\n  } else if (joinType == ").concat((0,i.stringToGlsl)("miter"),") {\n    return miterJoinDistanceField(point, start, end, width, joinAngle);\n  }\n  return roundJoinDistanceField(point, start, end, width);\n}\n\nfloat computeSegmentPointDistance(vec2 point, vec2 start, vec2 end, float width, float joinAngle, float capType, float joinType) {\n  if (isCap(joinAngle)) {\n    return capDistanceField(point, start, end, width, capType);\n  }\n  return joinDistanceField(point, start, end, width, joinAngle, joinType);\n}\n\nvoid main(void) {\n  vec2 currentPoint = gl_FragCoord.xy / u_pixelRatio;\n  #ifdef GL_FRAGMENT_PRECISION_HIGH\n  vec2 worldPos = pxToWorld(currentPoint);\n  if (\n    abs(u_renderExtent[0] - u_renderExtent[2]) > 0.0 && (\n      worldPos[0] < u_renderExtent[0] ||\n      worldPos[1] < u_renderExtent[1] ||\n      worldPos[0] > u_renderExtent[2] ||\n      worldPos[1] > u_renderExtent[3]\n    )\n  ) {\n    discard;\n  }\n  #endif\n  if (").concat(this.discardExpression_,") { discard; }\n\n  float segmentLength = length(v_segmentEnd - v_segmentStart);\n  vec2 segmentTangent = (v_segmentEnd - v_segmentStart) / segmentLength;\n  vec2 segmentNormal = vec2(-segmentTangent.y, segmentTangent.x);\n  vec2 startToPoint = currentPoint - v_segmentStart;\n  float currentLengthPx = max(0., min(dot(segmentTangent, startToPoint), segmentLength)) + v_distanceOffsetPx; \n  float currentRadiusPx = abs(dot(segmentNormal, startToPoint));\n  float currentRadiusRatio = dot(segmentNormal, startToPoint) * 2. / v_width;\n  vec4 color = ").concat(this.strokeColorExpression_," * u_globalAlpha;\n  float capType = ").concat(this.strokeCapExpression_,";\n  float joinType = ").concat(this.strokeJoinExpression_,";\n  float segmentStartDistance = computeSegmentPointDistance(currentPoint, v_segmentStart, v_segmentEnd, v_width, v_angleStart, capType, joinType);\n  float segmentEndDistance = computeSegmentPointDistance(currentPoint, v_segmentEnd, v_segmentStart, v_width, v_angleEnd, capType, joinType);\n  float distance = max(\n    segmentDistanceField(currentPoint, v_segmentStart, v_segmentEnd, v_width),\n    max(segmentStartDistance, segmentEndDistance)\n  );\n  distance = max(distance, ").concat(this.strokeDistanceFieldExpression_,");\n  gl_FragColor = color * smoothstep(0.5, -0.5, distance);\n  if (u_hitDetection > 0) {\n    if (gl_FragColor.a < 0.1) { discard; };\n    gl_FragColor = v_prop_hitColor;\n  }\n}"):null}},{key:"getFillVertexShader",value:function(){return this.hasFill_?"".concat(u,"\n").concat(this.uniforms_.map(function(e){return"uniform "+e+";"}).join("\n"),"\nattribute vec2 a_position;\nattribute vec4 a_prop_hitColor;\n").concat(this.attributes_.map(function(e){return"attribute "+e+";"}).join("\n"),"\nvarying vec4 v_prop_hitColor;\n").concat(this.varyings_.map(function(e){return"varying "+e.type+" "+e.name+";"}).join("\n"),"\n").concat(this.vertexShaderFunctions_.join("\n"),"\nvoid main(void) {\n  gl_Position = u_projectionMatrix * vec4(a_position, u_depth, 1.0);\n  v_prop_hitColor = a_prop_hitColor;\n").concat(this.varyings_.map(function(e){return"  "+e.name+" = "+e.expression+";"}).join("\n"),"\n}"):null}},{key:"getFillFragmentShader",value:function(){return this.hasFill_?"".concat(u,"\n").concat(this.uniforms_.map(function(e){return"uniform "+e+";"}).join("\n"),"\nvarying vec4 v_prop_hitColor;\n").concat(this.varyings_.map(function(e){return"varying "+e.type+" "+e.name+";"}).join("\n"),"\n").concat(this.fragmentShaderFunctions_.join("\n"),"\nvec2 pxToWorld(vec2 pxPos) {\n  vec2 screenPos = 2.0 * pxPos / u_viewportSizePx - 1.0;\n  return (u_screenToWorldMatrix * vec4(screenPos, 0.0, 1.0)).xy;\n}\n\nvec2 worldToPx(vec2 worldPos) {\n  vec4 screenPos = u_projectionMatrix * vec4(worldPos, 0.0, 1.0);\n  return (0.5 * screenPos.xy + 0.5) * u_viewportSizePx;\n}\n\nvoid main(void) {\n  vec2 pxPos = gl_FragCoord.xy / u_pixelRatio;\n  vec2 pxOrigin = worldToPx(u_patternOrigin);\n  #ifdef GL_FRAGMENT_PRECISION_HIGH\n  vec2 worldPos = pxToWorld(pxPos);\n  if (\n    abs(u_renderExtent[0] - u_renderExtent[2]) > 0.0 && (\n      worldPos[0] < u_renderExtent[0] ||\n      worldPos[1] < u_renderExtent[1] ||\n      worldPos[0] > u_renderExtent[2] ||\n      worldPos[1] > u_renderExtent[3]\n    )\n  ) {\n    discard;\n  }\n  #endif\n  if (").concat(this.discardExpression_,") { discard; }\n  gl_FragColor = ").concat(this.fillColorExpression_," * u_globalAlpha;\n  if (u_hitDetection > 0) {\n    if (gl_FragColor.a < 0.1) { discard; };\n    gl_FragColor = v_prop_hitColor;\n  }\n}"):null}}])&&a(e.prototype,r),s&&a(e,s),Object.defineProperty(e,"prototype",{writable:!1}),e)},{"../expr/gpu.js":141,"../render/webgl/utils.js":312,"../style/flat.js":395}],415:[function(e,t,r){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("./BaseTileRepresentation.js")),O=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};t=f(t);if(t&&t.has(e))return t.get(e);var r,n={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in e){var o;"default"!==r&&{}.hasOwnProperty.call(e,r)&&((o=i?Object.getOwnPropertyDescriptor(e,r):null)&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=e[r])}return n.default=e,t&&t.set(e,n),n}(e("../DataTile.js")),o=n(e("../events/EventType.js")),P=n(e("../ImageTile.js")),k=n(e("../reproj/Tile.js")),s=n(e("./Buffer.js")),u=e("../webgl.js"),l=e("../dom.js"),c=e("../size.js");function f(e){var t,r;return"function"!=typeof WeakMap?null:(t=new WeakMap,r=new WeakMap,(f=function(e){return e?r:t})(e))}function n(e){return e&&e.__esModule?e:{default:e}}function h(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=a(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==a(e)?e:e+""}(n.key),n)}}function p(e,t,r){t=g(t);var n=e,t=d()?Reflect.construct(t,r||[],g(e).constructor):t.apply(e,r);if(t&&("object"==a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(d=function(){return!!e})()}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t){return(y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function B(e,t,r){r=r?e.LINEAR:e.NEAREST;e.bindTexture(e.TEXTURE_2D,t),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,r),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,r)}function T(e,t,r,n,i,o){var a,s=e.getGL(),e=r instanceof Float32Array?(a=s.FLOAT,e.getExtension("OES_texture_float"),null!==e.getExtension("OES_texture_float_linear")):(a=s.UNSIGNED_BYTE,!0);B(s,t,o&&e);var u,t=r.byteLength/n[1],o=1;switch(t%8==0?o=8:t%4==0?o=4:t%2==0&&(o=2),i){case 1:u=s.LUMINANCE;break;case 2:u=s.LUMINANCE_ALPHA;break;case 3:u=s.RGB;break;case 4:u=s.RGBA;break;default:throw new Error("Unsupported number of bands: ".concat(i))}e=s.getParameter(s.UNPACK_ALIGNMENT);s.pixelStorei(s.UNPACK_ALIGNMENT,o),s.texImage2D(s.TEXTURE_2D,0,u,n[0],n[1],0,u,a,r),s.pixelStorei(s.UNPACK_ALIGNMENT,e)}var A=null;e=function(){function n(e){var t;if(!(this instanceof n))throw new TypeError("Cannot call a class as a function");(t=p(this,n,[e])).textures=[],t.renderSize_=(0,c.toSize)(e.grid.getTileSize(e.tile.tileCoord[0])),t.bandCount=NaN;var r=new s.default(u.ARRAY_BUFFER,u.STATIC_DRAW);return r.fromArray([0,1,1,1,1,0,0,0]),t.helper_.flushBufferData(r),t.coords=r,t.setTile(e.tile),t}var e,t=n,r=i.default;if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&y(t,r),t=n,(r=[{key:"uploadTile",value:function(){var e=this.helper_,t=e.getGL(),r=this.tile,n=(this.textures.length=0,o=r instanceof P.default||r instanceof k.default?r.getImage():r.getData(),(0,O.asImageLike)(o));if(n)a=t.createTexture(),this.textures.push(a),this.bandCount=4,i=t,n=n,u=r.interpolate,B(i,a,u),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,n);else{var i,o=(0,O.asArrayLike)(o),a=r.getSize(),s=[a[0]+2*this.gutter_,a[1]+2*this.gutter_],u=o instanceof Float32Array,l=s[0]*s[1],c=u?Float32Array:Uint8Array,f=c.BYTES_PER_ELEMENT,h=o.byteLength/s[1],p=(this.bandCount=Math.floor(h/f/s[0]),Math.ceil(this.bandCount/4));if(1===p)i=t.createTexture(),this.textures.push(i),T(e,i,o,s,this.bandCount,r.interpolate);else{for(var d=new Array(p),g=0;g<p;++g){var y=t.createTexture(),y=(this.textures.push(y),g<p-1?4:(this.bandCount-1)%4+1);d[g]=new c(l*y)}for(var A=0,m=0,v=s[0]*this.bandCount,b=0;b<s[1];++b){for(var _=0;_<v;++_){var w=o[m+_],E=Math.floor(A/this.bandCount),C=_%this.bandCount,I=d[Math.floor(C/4)];I[E*(I.length/l)+C%4]=w,++A}m+=h/f}for(var S=0;S<p;++S){var j=this.textures[S],x=d[S];T(e,j,x,s,x.length/l,r.interpolate)}}}this.setReady()}},{key:"disposeInternal",value:function(){var e=this.helper_.getGL();this.helper_.deleteBuffer(this.coords);for(var t=0;t<this.textures.length;++t)e.deleteTexture(this.textures[t]);this.tile.removeEventListener(o.default.CHANGE,this.handleTileChange_)}},{key:"getImagePixelData_",value:function(e,t,r){var n=this.gutter_,i=this.renderSize_[0],o=this.renderSize_[1];(A=A?A:(0,l.createCanvasContext2D)(1,1,void 0,{willReadFrequently:!0})).clearRect(0,0,1,1);var a,s=e.width-2*n,u=e.height-2*n,t=n+Math.floor(t/i*s),i=n+Math.floor(r/o*u);try{A.drawImage(e,t,i,1,1,0,0,1,1),a=A.getImageData(0,0,1,1).data}catch(e){return A=null}return a}},{key:"getArrayPixelData_",value:function(e,t,r,n){var i=this.gutter_,o=this.renderSize_[0],a=this.renderSize_[1],s=t[0],t=t[1],u=s+2*i,l=t+2*i,s=i+Math.floor(s*(r/o)),r=i+Math.floor(t*(n/a));return e instanceof DataView?(o=e.byteLength/(u*l),t=e.buffer.slice(i=o*(r*u+s),i+o),new DataView(t)):(n=this.bandCount*(r*u+s),e.slice(n,n+this.bandCount))}},{key:"getPixelData",value:function(e,t){var r,n,i;return this.loaded?this.tile instanceof O.default?(r=this.tile.getData(),(n=(0,O.asArrayLike)(r))?(i=this.tile.getSize(),this.getArrayPixelData_(n,i,e,t)):this.getImagePixelData_((0,O.asImageLike)(r),e,t)):this.getImagePixelData_(this.tile.getImage(),e,t):null}}])&&h(t.prototype,r),e&&h(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();r.default=e},{"../DataTile.js":80,"../ImageTile.js":87,"../dom.js":130,"../events/EventType.js":134,"../reproj/Tile.js":331,"../size.js":337,"../webgl.js":406,"./BaseTileRepresentation.js":407,"./Buffer.js":408}],416:[function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.computeHash=b,r.expressionToGlsl=A,r.packColor=h,r.parseLiteralStyle=function(n){var i={inFragmentShader:!1,properties:{},variables:{},functions:{},style:n},o={inFragmentShader:!0,variables:i.variables,properties:{},functions:{},style:n},a=new u.ShaderBuilder,s={};"icon-src"in n?function(e,t,r,n,i){var o="vec4(1.0)",i=("icon-color"in e&&(o=A(i,e["icon-color"],d.ColorType)),"icon-opacity"in e&&(o="".concat(o," * ").concat(A(i,e["icon-opacity"],d.NumberType))),b(e["icon-src"])),r=E(e,t,r,"icon-",i);t.setSymbolColorExpression("".concat(o," * samplePremultiplied(u_texture").concat(i,", v_texCoord)")).setSymbolSizeExpression(r),"icon-width"in e&&"icon-height"in e&&t.setSymbolSizeExpression("vec2(".concat(A(n,e["icon-width"],d.NumberType),", ").concat(A(n,e["icon-height"],d.NumberType),")")),"icon-offset"in e&&"icon-size"in e&&(o=A(n,e["icon-size"],d.NumberArrayType),i=t.getSymbolSizeExpression(),t.setSymbolSizeExpression(o),r=C(e,"icon-",n,"v_quadSizePx",o),t.setTextureCoordinateExpression("(vec4((".concat(r,").xyxy) + vec4(0., 0., ").concat(o,")) / (").concat(i,").xyxy")));if(_(e,t,n,"icon-"),"icon-anchor"in e){var a,r=A(n,e["icon-anchor"],d.NumberArrayType),o="1.0",s=("icon-scale"in e&&(o=A(n,e["icon-scale"],d.SizeType)),a="pixels"===e["icon-anchor-x-units"]&&"pixels"===e["icon-anchor-y-units"]?"".concat(r," * ").concat(o):"pixels"===e["icon-anchor-x-units"]?"".concat(r," * vec2(vec2(").concat(o,").x, v_quadSizePx.y)"):"pixels"===e["icon-anchor-y-units"]?"".concat(r," * vec2(v_quadSizePx.x, vec2(").concat(o,").x)"):"".concat(r," * v_quadSizePx"),"v_quadSizePx * vec2(0.5, -0.5) + ".concat(a," * vec2(-1., 1.)"));if("icon-anchor-origin"in e)switch(e["icon-anchor-origin"]){case"top-right":s="v_quadSizePx * -0.5 + ".concat(a);break;case"bottom-left":s="v_quadSizePx * 0.5 - ".concat(a);break;case"bottom-right":s="v_quadSizePx * vec2(-0.5, 0.5) + ".concat(a," * vec2(1., -1.)")}t.setSymbolOffsetExpression("".concat(t.getSymbolOffsetExpression()," + ").concat(s))}}(n,a,s,i,o):"shape-points"in n?function(e,t,r,n){n.functions.round="float round(float v) {\n  return sign(v) * floor(abs(v) + 0.5);\n}",n.functions.starDistanceField="float starDistanceField(vec2 point, float numPoints, float radius, float radius2, float angle) {\n  float startAngle = -PI * 0.5 + angle; // tip starts upwards and rotates clockwise with angle\n  float c = cos(startAngle);\n  float s = sin(startAngle);\n  vec2 pointRotated = vec2(c * point.x - s * point.y, s * point.x + c * point.y);\n  float alpha = TWO_PI / numPoints; // the angle of one sector\n  float beta = atan(pointRotated.y, pointRotated.x);\n  float gamma = round(beta / alpha) * alpha; // angle in sector\n  c = cos(-gamma);\n  s = sin(-gamma);\n  vec2 inSector = vec2(c * pointRotated.x - s * pointRotated.y, abs(s * pointRotated.x + c * pointRotated.y));\n  vec2 tipToPoint = inSector + vec2(-radius, 0.);\n  vec2 edgeNormal = vec2(radius2 * sin(alpha * 0.5), -radius2 * cos(alpha * 0.5) + radius);\n  return dot(normalize(edgeNormal), tipToPoint);\n}",n.functions.regularDistanceField="float regularDistanceField(vec2 point, float numPoints, float radius, float angle) {\n  float startAngle = -PI * 0.5 + angle; // tip starts upwards and rotates clockwise with angle\n  float c = cos(startAngle);\n  float s = sin(startAngle);\n  vec2 pointRotated = vec2(c * point.x - s * point.y, s * point.x + c * point.y);\n  float alpha = TWO_PI / numPoints; // the angle of one sector\n  float radiusIn = radius * cos(PI / numPoints);\n  float beta = atan(pointRotated.y, pointRotated.x);\n  float gamma = round((beta - alpha * 0.5) / alpha) * alpha + alpha * 0.5; // angle in sector from mid\n  c = cos(-gamma);\n  s = sin(-gamma);\n  vec2 inSector = vec2(c * pointRotated.x - s * pointRotated.y, abs(s * pointRotated.x + c * pointRotated.y));\n  return inSector.x - radiusIn;\n}",_(e,t,r,"shape-");var r=null,i=("shape-opacity"in e&&(r=A(n,e["shape-opacity"],d.NumberType)),"coordsPx");"shape-scale"in e&&(o=A(n,e["shape-scale"],d.SizeType),i="coordsPx / ".concat(o));var o=null,a=("shape-fill-color"in e&&(o=A(n,e["shape-fill-color"],d.ColorType)),null),s=("shape-stroke-color"in e&&(a=A(n,e["shape-stroke-color"],d.ColorType)),null);"shape-stroke-width"in e&&(s=A(n,e["shape-stroke-width"],d.NumberType));var u=A(n,e["shape-points"],d.NumberType),l="0.",c=("shape-angle"in e&&(l=A(n,e["shape-angle"],d.NumberType)),A(n,e["shape-radius"],d.NumberType));null!==s&&(c="".concat(c," + ").concat(s," * 0.5")),e=("shape-radius2"in e?(n=A(n,e["shape-radius2"],d.NumberType),null!==s&&(n="".concat(n," + ").concat(s," * 0.5")),"starDistanceField(".concat(i,", ").concat(u,", ").concat(c,", ").concat(n,", ")):"regularDistanceField(".concat(i,", ").concat(u,", ").concat(c,", ")).concat(l,")");n=w(e,o,a,s,r);t.setSymbolColorExpression(n)}(n,a,i,o):"circle-radius"in n&&function(e,t,r,n){n.functions.circleDistanceField="float circleDistanceField(vec2 point, float radius) {\n  return length(point) - radius;\n}",_(e,t,r,"circle-");var r=null,i=("circle-opacity"in e&&(r=A(n,e["circle-opacity"],d.NumberType)),"coordsPx");"circle-scale"in e&&(o=A(n,e["circle-scale"],d.SizeType),i="coordsPx / ".concat(o));var o=null,a=("circle-fill-color"in e&&(o=A(n,e["circle-fill-color"],d.ColorType)),null),s=("circle-stroke-color"in e&&(a=A(n,e["circle-stroke-color"],d.ColorType)),A(n,e["circle-radius"],d.NumberType)),u=null,n=("circle-stroke-width"in e&&(u=A(n,e["circle-stroke-width"],d.NumberType),s="(".concat(s," + ").concat(u," * 0.5)")),w("circleDistanceField(".concat(i,", ").concat(s,")"),o,a,u,r));t.setSymbolColorExpression(n)}(n,a,i,o),function(e,t,r,n,i){{var o;"stroke-color"in e&&t.setStrokeColorExpression(A(i,e["stroke-color"],d.ColorType)),"stroke-pattern-src"in e&&(u=b(e["stroke-pattern-src"]),r=E(e,t,r,"stroke-pattern-",u),c=r,l="vec2(0.)","stroke-pattern-offset"in e&&"stroke-pattern-size"in e&&(c=A(i,e["stroke-pattern-size"],d.NumberArrayType),l=C(e,"stroke-pattern-",i,r,c)),o="0.","stroke-pattern-spacing"in e&&(o=A(i,e["stroke-pattern-spacing"],d.NumberType)),i.functions.sampleStrokePattern="vec4 sampleStrokePattern(sampler2D texture, vec2 textureSize, vec2 textureOffset, vec2 sampleSize, float spacingPx, float currentLengthPx, float currentRadiusRatio, float lineWidth) {\n  float currentLengthScaled = currentLengthPx * sampleSize.y / lineWidth;\n  float spacingScaled = spacingPx * sampleSize.y / lineWidth;\n  float uCoordPx = mod(currentLengthScaled, (sampleSize.x + spacingScaled));\n  // make sure that we're not sampling too close to the borders to avoid interpolation with outside pixels\n  uCoordPx = clamp(uCoordPx, 0.5, sampleSize.x - 0.5);\n  float vCoordPx = (-currentRadiusRatio * 0.5 + 0.5) * sampleSize.y;\n  vec2 texCoord = (vec2(uCoordPx, vCoordPx) + textureOffset) / textureSize;\n  return samplePremultiplied(texture, texCoord);\n}",u="u_texture".concat(u),s="1.","stroke-color"in e&&(s=t.getStrokeColorExpression()),t.setStrokeColorExpression("".concat(s," * sampleStrokePattern(").concat(u,", ").concat(r,", ").concat(l,", ").concat(c,", ").concat(o,", currentLengthPx, currentRadiusRatio, v_width)")))}if("stroke-width"in e&&t.setStrokeWidthExpression(A(n,e["stroke-width"],d.NumberType)),"stroke-offset"in e&&t.setStrokeOffsetExpression(A(n,e["stroke-offset"],d.NumberType)),"stroke-line-cap"in e&&t.setStrokeCapExpression(A(n,e["stroke-line-cap"],d.StringType)),"stroke-line-join"in e&&t.setStrokeJoinExpression(A(n,e["stroke-line-join"],d.StringType)),"stroke-miter-limit"in e&&t.setStrokeMiterLimitExpression(A(n,e["stroke-miter-limit"],d.NumberType)),"stroke-line-dash"in e){i.functions.getSingleDashDistance="float getSingleDashDistance(float distance, float radius, float dashOffset, float dashLength, float dashLengthTotal, float capType) {\n  float localDistance = mod(distance, dashLengthTotal);\n  float distanceSegment = abs(localDistance - dashOffset - dashLength * 0.5) - dashLength * 0.5;\n  distanceSegment = min(distanceSegment, dashLengthTotal - localDistance);\n  if (capType == ".concat((0,g.stringToGlsl)("square"),") {\n    distanceSegment -= v_width * 0.5;\n  } else if (capType == ").concat((0,g.stringToGlsl)("round"),") {\n    distanceSegment = min(distanceSegment, sqrt(distanceSegment * distanceSegment + radius * radius) - v_width * 0.5);\n  }\n  return distanceSegment;\n}");var a=e["stroke-line-dash"].map(function(e){return A(i,e,d.NumberType)}),s=(a.length%2==1&&(a=[].concat(y(a),y(a))),"0.");"stroke-line-dash-offset"in e&&(s=A(n,e["stroke-line-dash-offset"],d.NumberType));for(var u=b(e["stroke-line-dash"]),r="dashDistanceField_".concat(u),l=a.map(function(e,t){return"float dashLength".concat(t," = ").concat(e,";")}),c=a.map(function(e,t){return"dashLength".concat(t)}).join(" + "),f="0.",h="getSingleDashDistance(distance, radius, ".concat(f,", dashLength0, totalDashLength, capType)"),p=2;p<a.length;p+=2)f="".concat(f," + dashLength").concat(p-2," + dashLength").concat(p-1),h="min(".concat(h,", getSingleDashDistance(distance, radius, ").concat(f,", dashLength").concat(p,", totalDashLength, capType))");i.functions[r]="float ".concat(r,"(float distance, float radius, float capType) {\n  ").concat(l.join("\n  "),"\n  float totalDashLength = ").concat(c,";\n  return ").concat(h,";\n}"),t.setStrokeDistanceFieldExpression("".concat(r,"(currentLengthPx + ").concat(s,", currentRadiusPx, capType)"))}}(n,a,s,i,o),function(e,t,r,n){{var i,o,a;"fill-color"in e&&t.setFillColorExpression(A(n,e["fill-color"],d.ColorType)),"fill-pattern-src"in e&&(a=b(e["fill-pattern-src"]),r=E(e,t,r,"fill-pattern-",a),i=r,o="vec2(0.)","fill-pattern-offset"in e&&"fill-pattern-size"in e&&(o=C(e,"fill-pattern-",n,r,i=A(n,e["fill-pattern-size"],d.NumberArrayType))),n.functions.sampleFillPattern="vec4 sampleFillPattern(sampler2D texture, vec2 textureSize, vec2 textureOffset, vec2 sampleSize, vec2 pxOrigin, vec2 pxPosition) {\n  float scaleRatio = pow(2., mod(u_zoom + 0.5, 1.) - 0.5);\n  vec2 pxRelativePos = pxPosition - pxOrigin;\n  // rotate the relative position from origin by the current view rotation\n  pxRelativePos = vec2(pxRelativePos.x * cos(u_rotation) - pxRelativePos.y * sin(u_rotation), pxRelativePos.x * sin(u_rotation) + pxRelativePos.y * cos(u_rotation));\n  // sample position is computed according to the sample offset & size\n  vec2 samplePos = mod(pxRelativePos / scaleRatio, sampleSize);\n  // also make sure that we're not sampling too close to the borders to avoid interpolation with outside pixels\n  samplePos = clamp(samplePos, vec2(0.5), sampleSize - vec2(0.5));\n  samplePos.y = sampleSize.y - samplePos.y; // invert y axis so that images appear upright\n  return samplePremultiplied(texture, (samplePos + textureOffset) / textureSize);\n}",n="u_texture".concat(a),a="1.","fill-color"in e&&(a=t.getFillColorExpression()),t.setFillColorExpression("".concat(a," * sampleFillPattern(").concat(n,", ").concat(r,", ").concat(o,", ").concat(i,", pxOrigin, pxPos)")))}}(n,a,s,o),n.filter&&(r=A(o,n.filter,d.BooleanType),a.setFragmentDiscardExpression("!".concat(r)));Object.keys(o.variables).forEach(function(e){var t,r=o.variables[e],e=(0,g.uniformNameForVariable)(r.name);a.addUniform("".concat(v(r.type)," ").concat(e)),t=r.type===d.StringType?function(){return(0,g.getStringNumberEquivalent)(n.variables[r.name])}:r.type===d.ColorType?function(){return h(y((0,l.asArray)(n.variables[r.name]||"#eee")))}:r.type===d.BooleanType?function(){return n.variables[r.name]?1:0}:function(){return n.variables[r.name]},s[e]=t}),Object.keys(o.properties).forEach(function(e){var t=o.properties[e],e=(i.properties[e]||(i.properties[e]=t),v(t.type)),r="a_prop_".concat(t.name);t.type===d.ColorType&&(e="vec4",r="unpackColor(".concat(r,")"),a.addVertexShaderFunction(p)),a.addVarying("v_prop_".concat(t.name),e,r)}),Object.keys(i.properties).forEach(function(e){e=i.properties[e];a.addAttribute("".concat(v(e.type)," a_prop_").concat(e.name))});var e,t,r=Object.keys(i.properties).map(function(e){var t=i.properties[e],e=t.evaluator||(t.type===d.StringType?function(e){return(0,g.getStringNumberEquivalent)(e.get(t.name))}:t.type===d.ColorType?function(e){return h(y((0,l.asArray)(e.get(t.name)||"#eee")))}:t.type===d.BooleanType?function(e){return e.get(t.name)?1:0}:function(e){return e.get(t.name)});return{name:t.name,size:m(t.type),callback:e}});for(e in i.functions)a.addVertexShaderFunction(i.functions[e]);for(t in o.functions)a.addFragmentShaderFunction(o.functions[t]);return{builder:a,attributes:r.reduce(function(e,t){return c(c({},e),{},f({},t.name,{callback:t.callback,size:t.size}))},{}),uniforms:s}};var d=e("../expr/expression.js"),u=e("./ShaderBuilder.js"),g=e("../expr/gpu.js"),l=e("../color.js");function i(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function c(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?i(Object(r),!0).forEach(function(e){f(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function f(e,t,r){return(t=function(e){e=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==n(e)?e:e+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function y(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){{var r;if(e)return"string"==typeof e?o(e,t):"Map"===(r="Object"===(r={}.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function A(e,t,r){var n=(0,d.newParsingContext)();return n.style=e.style,(0,g.buildExpression)(t,r,n,e)}function h(e){e=(0,l.asArray)(e);return[256*e[0]+e[1],256*e[2]+Math.round(255*e[3])]}var p="vec4 unpackColor(vec2 packedColor) {\n  return fract(packedColor[1] / 256.0) * vec4(\n    fract(floor(packedColor[0] / 256.0) / 256.0),\n    fract(packedColor[0] / 256.0),\n    fract(floor(packedColor[1] / 256.0) / 256.0),\n    1.0\n  );\n}";function m(e){return e===d.ColorType||e===d.SizeType?2:e===d.NumberArrayType?4:1}function v(e){e=m(e);return 1<e?"vec".concat(e):"float"}function b(e){return(JSON.stringify(e).split("").reduce(function(e,t){return(e<<5)-e+t.charCodeAt(0)},0)>>>0).toString()}function _(e,t,r,n){var i,o;"".concat(n,"radius")in e&&"icon-"!==n&&(i=A(r,e["".concat(n,"radius")],d.NumberType),"".concat(n,"radius2")in e&&(o=A(r,e["".concat(n,"radius2")],d.NumberType),i="max(".concat(i,", ").concat(o,")")),"".concat(n,"stroke-width")in e&&(i="(".concat(i," + ").concat(A(r,e["".concat(n,"stroke-width")],d.NumberType)," * 0.5)")),t.setSymbolSizeExpression("vec2(".concat(i," * 2. + 0.5)"))),"".concat(n,"scale")in e&&(o=A(r,e["".concat(n,"scale")],d.SizeType),t.setSymbolSizeExpression("".concat(t.getSymbolSizeExpression()," * ").concat(o))),"".concat(n,"displacement")in e&&t.setSymbolOffsetExpression(A(r,e["".concat(n,"displacement")],d.NumberArrayType)),"".concat(n,"rotation")in e&&t.setSymbolRotationExpression(A(r,e["".concat(n,"rotation")],d.NumberType)),"".concat(n,"rotate-with-view")in e&&t.setSymbolRotateWithView(!!e["".concat(n,"rotate-with-view")])}function w(e,t,r,n,i){t=null!==t?t:"vec4(0.)",null!==r&&null!==n&&(n="smoothstep(-".concat(n," + 0.63, -").concat(n," - 0.58, ").concat(e,")"),t="mix(".concat(r,", ").concat(t,", ").concat(n,")")),r="(1.0 - smoothstep(-0.63, 0.58, ".concat(e,"))"),n="".concat(t," * ").concat(r);return n=null!==i?"".concat(n," * ").concat(i):n}function E(e,t,r,n,i){var o=new Image;return o.crossOrigin=void 0===e["".concat(n,"cross-origin")]?"anonymous":e["".concat(n,"cross-origin")],o.src=e["".concat(n,"src")],e=o.complete&&o.width&&o.height?(0,g.arrayToGlsl)([o.width,o.height]):(r["u_texture".concat(i,"_size")]=function(){return o.complete?[o.width,o.height]:[0,0]},t.addUniform("vec2 u_texture".concat(i,"_size")),"u_texture".concat(i,"_size")),r["u_texture".concat(i)]=o,t.addUniform("sampler2D u_texture".concat(i)),e}function C(e,t,r,n,i){var o=A(r,e["".concat(t,"offset")],d.NumberArrayType);if("".concat(t,"offset-origin")in e)switch(e["".concat(t,"offset-origin")]){case"top-right":o="vec2(".concat(n,".x, 0.) + ").concat(i," * vec2(-1., 0.) + ").concat(o," * vec2(-1., 1.)");break;case"bottom-left":o="vec2(0., ".concat(n,".y) + ").concat(i," * vec2(0., -1.) + ").concat(o," * vec2(1., -1.)");break;case"bottom-right":o="".concat(n," - ").concat(i," - ").concat(o)}return o}},{"../color.js":113,"../expr/expression.js":140,"../expr/gpu.js":141,"./ShaderBuilder.js":414}],417:[function(e,t,r){!function(t){!function(){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.create=function(){var e='const e="GENERATE_POLYGON_BUFFERS",t="GENERATE_POINT_BUFFERS",n="GENERATE_LINE_STRING_BUFFERS";function r(e,t){const n=t[0],r=t[1];return t[0]=e[0]*n+e[2]*r+e[4],t[1]=e[1]*n+e[3]*r+e[5],t}function x(e,t){const n=(r=t)[0]*r[3]-r[1]*r[2];var r;!function(e,t){if(!e)throw new Error(t)}(0!==n,"Transformation matrix cannot be inverted");const x=t[0],i=t[1],u=t[2],o=t[3],f=t[4],s=t[5];return e[0]=o/n,e[1]=-i/n,e[2]=-u/n,e[3]=x/n,e[4]=(u*s-o*f)/n,e[5]=-(x*s-i*f)/n,e}function i(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}new Array(6);var u={exports:{}};function o(e,t,n){n=n||2;var r,x,i,u,o,s,l,v=t&&t.length,h=v?t[0]*n:e.length,c=f(e,0,h,n,!0),g=[];if(!c||c.next===c.prev)return g;if(v&&(c=function(e,t,n,r){var x,i,u,o=[];for(x=0,i=t.length;x<i;x++)(u=f(e,t[x]*r,x<i-1?t[x+1]*r:e.length,r,!1))===u.next&&(u.steiner=!0),o.push(d(u));for(o.sort(p),x=0;x<o.length;x++)n=y(o[x],n);return n}(e,t,c,n)),e.length>80*n){r=i=e[0],x=u=e[1];for(var b=n;b<h;b+=n)(o=e[b])<r&&(r=o),(s=e[b+1])<x&&(x=s),o>i&&(i=o),s>u&&(u=s);l=0!==(l=Math.max(i-r,u-x))?32767/l:0}return a(c,g,n,r,x,l,0),g}function f(e,t,n,r,x){var i,u;if(x===O(e,t,n,r)>0)for(i=t;i<n;i+=r)u=P(i,e[i],e[i+1],u);else for(i=n-r;i>=t;i-=r)u=P(i,e[i],e[i+1],u);return u&&m(u,u.next)&&(B(u),u=u.next),u}function s(e,t){if(!e)return e;t||(t=e);var n,r=e;do{if(n=!1,r.steiner||!m(r,r.next)&&0!==w(r.prev,r,r.next))r=r.next;else{if(B(r),(r=t=r.prev)===r.next)break;n=!0}}while(n||r!==t);return t}function a(e,t,n,r,x,i,u){if(e){!u&&i&&function(e,t,n,r){var x=e;do{0===x.z&&(x.z=b(x.x,x.y,t,n,r)),x.prevZ=x.prev,x.nextZ=x.next,x=x.next}while(x!==e);x.prevZ.nextZ=null,x.prevZ=null,function(e){var t,n,r,x,i,u,o,f,s=1;do{for(n=e,e=null,i=null,u=0;n;){for(u++,r=n,o=0,t=0;t<s&&(o++,r=r.nextZ);t++);for(f=s;o>0||f>0&&r;)0!==o&&(0===f||!r||n.z<=r.z)?(x=n,n=n.nextZ,o--):(x=r,r=r.nextZ,f--),i?i.nextZ=x:e=x,x.prevZ=i,i=x;n=r}i.nextZ=null,s*=2}while(u>1)}(x)}(e,r,x,i);for(var o,f,p=e;e.prev!==e.next;)if(o=e.prev,f=e.next,i?v(e,r,x,i):l(e))t.push(o.i/n|0),t.push(e.i/n|0),t.push(f.i/n|0),B(e),e=f.next,p=f.next;else if((e=f)===p){u?1===u?a(e=h(s(e),t,n),t,n,r,x,i,2):2===u&&c(e,t,n,r,x,i):a(s(e),t,n,r,x,i,1);break}}}function l(e){var t=e.prev,n=e,r=e.next;if(w(t,n,r)>=0)return!1;for(var x=t.x,i=n.x,u=r.x,o=t.y,f=n.y,s=r.y,a=x<i?x<u?x:u:i<u?i:u,l=o<f?o<s?o:s:f<s?f:s,v=x>i?x>u?x:u:i>u?i:u,h=o>f?o>s?o:s:f>s?f:s,c=r.next;c!==t;){if(c.x>=a&&c.x<=v&&c.y>=l&&c.y<=h&&M(x,o,i,f,u,s,c.x,c.y)&&w(c.prev,c,c.next)>=0)return!1;c=c.next}return!0}function v(e,t,n,r){var x=e.prev,i=e,u=e.next;if(w(x,i,u)>=0)return!1;for(var o=x.x,f=i.x,s=u.x,a=x.y,l=i.y,v=u.y,h=o<f?o<s?o:s:f<s?f:s,c=a<l?a<v?a:v:l<v?l:v,p=o>f?o>s?o:s:f>s?f:s,y=a>l?a>v?a:v:l>v?l:v,g=b(h,c,t,n,r),d=b(p,y,t,n,r),Z=e.prevZ,m=e.nextZ;Z&&Z.z>=g&&m&&m.z<=d;){if(Z.x>=h&&Z.x<=p&&Z.y>=c&&Z.y<=y&&Z!==x&&Z!==u&&M(o,a,f,l,s,v,Z.x,Z.y)&&w(Z.prev,Z,Z.next)>=0)return!1;if(Z=Z.prevZ,m.x>=h&&m.x<=p&&m.y>=c&&m.y<=y&&m!==x&&m!==u&&M(o,a,f,l,s,v,m.x,m.y)&&w(m.prev,m,m.next)>=0)return!1;m=m.nextZ}for(;Z&&Z.z>=g;){if(Z.x>=h&&Z.x<=p&&Z.y>=c&&Z.y<=y&&Z!==x&&Z!==u&&M(o,a,f,l,s,v,Z.x,Z.y)&&w(Z.prev,Z,Z.next)>=0)return!1;Z=Z.prevZ}for(;m&&m.z<=d;){if(m.x>=h&&m.x<=p&&m.y>=c&&m.y<=y&&m!==x&&m!==u&&M(o,a,f,l,s,v,m.x,m.y)&&w(m.prev,m,m.next)>=0)return!1;m=m.nextZ}return!0}function h(e,t,n){var r=e;do{var x=r.prev,i=r.next.next;!m(x,i)&&A(x,r,r.next,i)&&z(x,i)&&z(i,x)&&(t.push(x.i/n|0),t.push(r.i/n|0),t.push(i.i/n|0),B(r),B(r.next),r=e=i),r=r.next}while(r!==e);return s(r)}function c(e,t,n,r,x,i){var u=e;do{for(var o=u.next.next;o!==u.prev;){if(u.i!==o.i&&Z(u,o)){var f=F(u,o);return u=s(u,u.next),f=s(f,f.next),a(u,t,n,r,x,i,0),void a(f,t,n,r,x,i,0)}o=o.next}u=u.next}while(u!==e)}function p(e,t){return e.x-t.x}function y(e,t){var n=function(e,t){var n,r=t,x=e.x,i=e.y,u=-1/0;do{if(i<=r.y&&i>=r.next.y&&r.next.y!==r.y){var o=r.x+(i-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(o<=x&&o>u&&(u=o,n=r.x<r.next.x?r:r.next,o===x))return n}r=r.next}while(r!==t);if(!n)return null;var f,s=n,a=n.x,l=n.y,v=1/0;r=n;do{x>=r.x&&r.x>=a&&x!==r.x&&M(i<l?x:u,i,a,l,i<l?u:x,i,r.x,r.y)&&(f=Math.abs(i-r.y)/(x-r.x),z(r,e)&&(f<v||f===v&&(r.x>n.x||r.x===n.x&&g(n,r)))&&(n=r,v=f)),r=r.next}while(r!==s);return n}(e,t);if(!n)return t;var r=F(n,e);return s(r,r.next),s(n,n.next)}function g(e,t){return w(e.prev,e,t.prev)<0&&w(t.next,e,e.next)<0}function b(e,t,n,r,x){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-n)*x|0)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-r)*x|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function d(e){var t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function M(e,t,n,r,x,i,u,o){return(x-u)*(t-o)>=(e-u)*(i-o)&&(e-u)*(r-o)>=(n-u)*(t-o)&&(n-u)*(i-o)>=(x-u)*(r-o)}function Z(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&A(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(z(e,t)&&z(t,e)&&function(e,t){var n=e,r=!1,x=(e.x+t.x)/2,i=(e.y+t.y)/2;do{n.y>i!=n.next.y>i&&n.next.y!==n.y&&x<(n.next.x-n.x)*(i-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}(e,t)&&(w(e.prev,e,t.prev)||w(e,t.prev,t))||m(e,t)&&w(e.prev,e,e.next)>0&&w(t.prev,t,t.next)>0)}function w(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function m(e,t){return e.x===t.x&&e.y===t.y}function A(e,t,n,r){var x=I(w(e,t,n)),i=I(w(e,t,r)),u=I(w(n,r,e)),o=I(w(n,r,t));return x!==i&&u!==o||(!(0!==x||!E(e,n,t))||(!(0!==i||!E(e,r,t))||(!(0!==u||!E(n,e,r))||!(0!==o||!E(n,t,r)))))}function E(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function I(e){return e>0?1:e<0?-1:0}function z(e,t){return w(e.prev,e,e.next)<0?w(e,t,e.next)>=0&&w(e,e.prev,t)>=0:w(e,t,e.prev)<0||w(e,e.next,t)<0}function F(e,t){var n=new _(e.i,e.x,e.y),r=new _(t.i,t.x,t.y),x=e.next,i=t.prev;return e.next=t,t.prev=e,n.next=x,x.prev=n,r.next=n,n.prev=r,i.next=r,r.prev=i,r}function P(e,t,n,r){var x=new _(e,t,n);return r?(x.next=r.next,x.prev=r,r.next.prev=x,r.next=x):(x.prev=x,x.next=x),x}function B(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function _(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function O(e,t,n,r){for(var x=0,i=t,u=n-r;i<n;i+=r)x+=(e[u]-e[i])*(e[i+1]+e[u+1]),u=i;return x}u.exports=o,u.exports.default=o,o.deviation=function(e,t,n,r){var x=t&&t.length,i=x?t[0]*n:e.length,u=Math.abs(O(e,0,i,n));if(x)for(var o=0,f=t.length;o<f;o++){var s=t[o]*n,a=o<f-1?t[o+1]*n:e.length;u-=Math.abs(O(e,s,a,n))}var l=0;for(o=0;o<r.length;o+=3){var v=r[o]*n,h=r[o+1]*n,c=r[o+2]*n;l+=Math.abs((e[v]-e[c])*(e[h+1]-e[v+1])-(e[v]-e[h])*(e[c+1]-e[v+1]))}return 0===u&&0===l?0:Math.abs((l-u)/u)},o.flatten=function(e){for(var t=e[0][0].length,n={vertices:[],holes:[],dimensions:t},r=0,x=0;x<e.length;x++){for(var i=0;i<e[x].length;i++)for(var u=0;u<t;u++)n.vertices.push(e[x][i][u]);x>0&&(r+=e[x-1].length,n.holes.push(r))}return n};var N=i(u.exports);const R=[],S={vertexPosition:0,indexPosition:0};function T(e,t,n,r,x){e[t+0]=n,e[t+1]=r,e[t+2]=x}function U(e,t,n,r,x,i){const u=3+x,o=e[t+0],f=e[t+1],s=R;s.length=x;for(let n=0;n<s.length;n++)s[n]=e[t+2+n];let a=i?i.vertexPosition:0,l=i?i.indexPosition:0;const v=a/u;return T(n,a,o,f,0),s.length&&n.set(s,a+3),a+=u,T(n,a,o,f,1),s.length&&n.set(s,a+3),a+=u,T(n,a,o,f,2),s.length&&n.set(s,a+3),a+=u,T(n,a,o,f,3),s.length&&n.set(s,a+3),a+=u,r[l++]=v,r[l++]=v+1,r[l++]=v+3,r[l++]=v+1,r[l++]=v+2,r[l++]=v+3,S.vertexPosition=a,S.indexPosition=l,S}function k(e,t,n,x,i,u,o,f,s,a,l){const v=8+f.length,h=u.length/v,c=[e[t+0],e[t+1]],p=[e[n],e[n+1]],y=r(s,[...c]),g=r(s,[...p]);function b(e,t,n){const r=Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1])),x=[(t[0]-e[0])/r,(t[1]-e[1])/r],i=[-x[1],x[0]],u=Math.sqrt((n[0]-e[0])*(n[0]-e[0])+(n[1]-e[1])*(n[1]-e[1])),o=[(n[0]-e[0])/u,(n[1]-e[1])/u],f=0===r||0===u?0:Math.acos((s=o[0]*x[0]+o[1]*x[1],a=-1,l=1,Math.min(Math.max(s,a),l)));var s,a,l;return o[0]*i[0]+o[1]*i[1]>0?f:2*Math.PI-f}let d=-1,M=-1,Z=l;const w=null!==i;if(null!==x){d=b(y,g,r(s,[...[e[x],e[x+1]]])),Math.cos(d)<=.985&&(Z+=Math.tan((d-Math.PI)/2))}if(w){M=b(g,y,r(s,[...[e[i],e[i+1]]])),Math.cos(M)<=.985&&(Z+=Math.tan((Math.PI-M)/2))}function m(e,t){return 0===t?1e4*e:Math.sign(t)*(1e4*e+Math.abs(t))}return u.push(c[0],c[1],p[0],p[1],d,M,a,m(0,l)),u.push(...f),u.push(c[0],c[1],p[0],p[1],d,M,a,m(1,l)),u.push(...f),u.push(c[0],c[1],p[0],p[1],d,M,a,m(2,l)),u.push(...f),u.push(c[0],c[1],p[0],p[1],d,M,a,m(3,l)),u.push(...f),o.push(h,h+1,h+2,h+1,h+3,h+2),{length:a+Math.sqrt((g[0]-y[0])*(g[0]-y[0])+(g[1]-y[1])*(g[1]-y[1])),angle:Z}}function G(e,t,n,r,x){const i=2+x;let u=t;const o=e.slice(u,u+x);u+=x;const f=e[u++];let s=0;const a=new Array(f-1);for(let t=0;t<f;t++)s+=e[u++],t<f-1&&(a[t]=s);const l=e.slice(u,u+2*s),v=N(l,a,2);for(let e=0;e<v.length;e++)r.push(v[e]+n.length/i);for(let e=0;e<l.length;e+=2)n.push(l[e],l[e+1],...o);return u+2*s}const j=self;j.onmessage=r=>{const i=r.data;switch(i.type){case t:{const e=3,t=2,n=i.customAttributesSize,r=t+n,x=new Float32Array(i.renderInstructions),u=x.length/r,o=4*u*(n+e),f=new Uint32Array(6*u),s=new Float32Array(o);let a;for(let e=0;e<x.length;e+=r)a=U(x,e,s,f,n,a);const l=Object.assign({vertexBuffer:s.buffer,indexBuffer:f.buffer,renderInstructions:x.buffer},i);j.postMessage(l,[s.buffer,f.buffer,x.buffer]);break}case n:{const e=[],t=[],n=i.customAttributesSize,r=2,u=new Float32Array(i.renderInstructions);let o=0;const f=[1,0,0,1,0,0];let s,a;for(x(f,i.renderInstructionsTransform);o<u.length;){a=Array.from(u.slice(o,o+n)),o+=n,s=u[o++];const x=o,i=o+(s-1)*r,l=u[x]===u[i]&&u[x+1]===u[i+1];let v=0,h=0;for(let n=0;n<s-1;n++){let c=null;n>0?c=o+(n-1)*r:l&&(c=i-r);let p=null;n<s-2?p=o+(n+2)*r:l&&(p=x+r);const y=k(u,o+n*r,o+(n+1)*r,c,p,e,t,a,f,v,h);v=y.length,h=y.angle}o+=s*r}const l=Uint32Array.from(t),v=Float32Array.from(e),h=Object.assign({vertexBuffer:v.buffer,indexBuffer:l.buffer,renderInstructions:u.buffer},i);j.postMessage(h,[v.buffer,l.buffer,u.buffer]);break}case e:{const e=[],t=[],n=i.customAttributesSize,r=new Float32Array(i.renderInstructions);let x=0;for(;x<r.length;)x=G(r,x,e,t,n);const u=Uint32Array.from(t),o=Float32Array.from(e),f=Object.assign({vertexBuffer:o.buffer,indexBuffer:u.buffer,renderInstructions:r.buffer},i);j.postMessage(f,[o.buffer,u.buffer,r.buffer]);break}}};';return new Worker("undefined"==typeof Blob?"data:application/javascript;base64,"+t.from(e,"binary").toString("base64"):URL.createObjectURL(new Blob([e],{type:"application/javascript"})))}}.call(this)}.call(this,e("buffer").Buffer)},{buffer:9}],418:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.XML_SCHEMA_INSTANCE_URI=r.OBJECT_PROPERTY_NODE_FACTORY=void 0,r.createElementNS=a,r.getAllTextContent=function(e,t){return o(e,t,[]).join("")},r.getAllTextContent_=o,r.getAttributeNS=function(e,t,r){return e.getAttributeNS(t,r)||""},r.getDocument=f,r.getXMLSerializer=function(){return n=void 0===n&&"undefined"!=typeof XMLSerializer?new XMLSerializer:n},r.isDocument=function(e){return"documentElement"in e},r.makeArrayExtender=function(r,n){return function(e,t){e=r.call(void 0!==n?n:this,e,t);void 0!==e&&(t=t[t.length-1],(0,i.extend)(t,e))}},r.makeArrayPusher=function(r,n){return function(e,t){e=r.call(void 0!==n?n:this,e,t);void 0!==e&&t[t.length-1].push(e)}},r.makeArraySerializer=function(i,e){var o,a;return function(e,t,r){var n;void 0===o&&(o={},(n={})[e.localName]=i,o[e.namespaceURI]=n,a=s(e.localName)),l(o,a,t,r)}},r.makeChildAppender=function(n,i){return function(e,t,r){n.call(void 0!==i?i:this,e,t,r),r[r.length-1].node.appendChild(e)}},r.makeObjectPropertyPusher=function(i,o,a){return function(e,t){var r,n=i.call(void 0!==a?a:this,e,t);void 0!==n&&(t=t[t.length-1],(e=void 0!==o?o:e.localName)in t?r=t[e]:t[e]=r=[],r.push(n))}},r.makeObjectPropertySetter=function(n,i,o){return function(e,t){var r=n.call(void 0!==o?o:this,e,t);void 0!==r&&(t[t.length-1][void 0!==i?i:e.localName]=r)}},r.makeReplacer=function(r,n){return function(e,t){e=r.call(void 0!==n?n:this,e,t);void 0!==e&&(t[t.length-1]=e)}},r.makeSequence=function(e,t){for(var r=t.length,n=new Array(r),i=0;i<r;++i)n[i]=e[t[i]];return n},r.makeSimpleNodeFactory=s,r.makeStructureNS=function(e,t,r){var n,i;for(r=void 0!==r?r:{},n=0,i=e.length;n<i;++n)r[e[n]]=t;return r},r.parse=function(e){return(new DOMParser).parseFromString(e,"application/xml")},r.parseNode=u,r.pushParseAndPop=function(e,t,r,n,i){return n.push(e),u(t,r,n,i),n.pop()},r.pushSerializeAndPop=function(e,t,r,n,i,o,a){return i.push(e),l(t,r,n,i,o,a),i.pop()},r.registerDocument=function(e){c=e},r.registerXMLSerializer=function(e){n=e},r.serialize=l;var i=e("./array.js");r.XML_SCHEMA_INSTANCE_URI="http://www.w3.org/2001/XMLSchema-instance";function a(e,t){return f().createElementNS(e,t)}function o(e,t,r){var n;if(e.nodeType==Node.CDATA_SECTION_NODE||e.nodeType==Node.TEXT_NODE)t?r.push(String(e.nodeValue).replace(/(\r\n|\r|\n)/g,"")):r.push(e.nodeValue);else for(n=e.firstChild;n;n=n.nextSibling)o(n,t,r);return r}function s(i,o){return function(e,t,r){var t=t[t.length-1].node,n=i;return a(void 0!==o?o:t.namespaceURI,n=void 0===n?r:n)}}r.OBJECT_PROPERTY_NODE_FACTORY=s();function u(e,t,r,n){for(var i=t.firstElementChild;i;i=i.nextElementSibling){var o=e[i.namespaceURI];void 0!==o&&void 0!==(o=o[i.localName])&&o.call(n,i,r)}}function l(e,t,r,n,i,o){for(var a,s,u=(void 0!==i?i:r).length,l=0;l<u;++l)void 0!==(a=r[l])&&void 0!==(s=t.call(void 0!==o?o:this,a,n,void 0!==i?i[l]:void 0))&&e[s.namespaceURI][s.localName].call(o,s,a,n)}var n=void 0;var c=void 0;function f(){return c=void 0===c&&"undefined"!=typeof document?document.implementation.createDocument("","",null):c}},{"./array.js":110}],419:[function(e,t,r){"use strict";t.exports=i;var n=e("ieee754");function i(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}i.Varint=0,i.Fixed64=1,i.Bytes=2,i.Fixed32=5;var o=4294967296,a=1/o,p="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function s(e){return e.type===i.Bytes?e.readVarint()+e.pos:e.pos+1}function u(e,t,r){return r?4294967296*t+(e>>>0):4294967296*(t>>>0)+(e>>>0)}function l(e,t,r){var n=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(7*Math.LN2));r.realloc(n);for(var i=r.pos-1;e<=i;i--)r.buf[i+n]=r.buf[i]}function c(e,t){for(var r=0;r<e.length;r++)t.writeVarint(e[r])}function f(e,t){for(var r=0;r<e.length;r++)t.writeSVarint(e[r])}function h(e,t){for(var r=0;r<e.length;r++)t.writeFloat(e[r])}function d(e,t){for(var r=0;r<e.length;r++)t.writeDouble(e[r])}function g(e,t){for(var r=0;r<e.length;r++)t.writeBoolean(e[r])}function y(e,t){for(var r=0;r<e.length;r++)t.writeFixed32(e[r])}function A(e,t){for(var r=0;r<e.length;r++)t.writeSFixed32(e[r])}function m(e,t){for(var r=0;r<e.length;r++)t.writeFixed64(e[r])}function v(e,t){for(var r=0;r<e.length;r++)t.writeSFixed64(e[r])}function b(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+16777216*e[t+3]}function _(e,t,r){e[r]=t,e[r+1]=t>>>8,e[r+2]=t>>>16,e[r+3]=t>>>24}function w(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+(e[t+3]<<24)}i.prototype={destroy:function(){this.buf=null},readFields:function(e,t,r){for(r=r||this.length;this.pos<r;){var n=this.readVarint(),i=n>>3,o=this.pos;this.type=7&n,e(i,t,this),this.pos===o&&this.skip(n)}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=b(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=w(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=b(this.buf,this.pos)+b(this.buf,this.pos+4)*o;return this.pos+=8,e},readSFixed64:function(){var e=b(this.buf,this.pos)+w(this.buf,this.pos+4)*o;return this.pos+=8,e},readFloat:function(){var e=n.read(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=n.read(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var t=this.buf,r=127&(i=t[this.pos++]);if(i<128||(r|=(127&(i=t[this.pos++]))<<7,i<128)||(r|=(127&(i=t[this.pos++]))<<14,i<128)||(r|=(127&(i=t[this.pos++]))<<21,i<128))return r;var n,i=r|=(15&t[this.pos])<<28,t=e,r=this,e=r.buf,o=(112&(n=e[r.pos++]))>>4;if(n<128)return u(i,o,t);if(o|=(127&(n=e[r.pos++]))<<3,n<128)return u(i,o,t);if(o|=(127&(n=e[r.pos++]))<<10,n<128)return u(i,o,t);if(o|=(127&(n=e[r.pos++]))<<17,n<128)return u(i,o,t);if(o|=(127&(n=e[r.pos++]))<<24,n<128)return u(i,o,t);if(o|=(1&(n=e[r.pos++]))<<31,n<128)return u(i,o,t);throw new Error("Expected varint not more than 10 bytes")},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2==1?(e+1)/-2:e/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var e,t=this.readVarint()+this.pos,r=this.pos;if(12<=(this.pos=t)-r&&p)return e=this.buf,p.decode(e.subarray(r,t));for(var n=this.buf,i=t,o="",a=r;a<i;){var s,u,l,c=n[a],f=null,h=239<c?4:223<c?3:191<c?2:1;if(i<a+h)break;1===h?c<128&&(f=c):2===h?128==(192&(s=n[a+1]))&&(f=(31&c)<<6|63&s)<=127&&(f=null):3===h?(s=n[a+1],u=n[a+2],128==(192&s)&&128==(192&u)&&((f=(15&c)<<12|(63&s)<<6|63&u)<=2047||55296<=f&&f<=57343)&&(f=null)):4===h&&(s=n[a+1],u=n[a+2],l=n[a+3],128==(192&s))&&128==(192&u)&&128==(192&l)&&((f=(15&c)<<18|(63&s)<<12|(63&u)<<6|63&l)<=65535||1114112<=f)&&(f=null),null===f?(f=65533,h=1):65535<f&&(f-=65536,o+=String.fromCharCode(f>>>10&1023|55296),f=56320|1023&f),o+=String.fromCharCode(f),a+=h}return o},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t},readPackedVarint:function(e,t){if(this.type!==i.Bytes)return e.push(this.readVarint(t));var r=s(this);for(e=e||[];this.pos<r;)e.push(this.readVarint(t));return e},readPackedSVarint:function(e){if(this.type!==i.Bytes)return e.push(this.readSVarint());var t=s(this);for(e=e||[];this.pos<t;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){if(this.type!==i.Bytes)return e.push(this.readBoolean());var t=s(this);for(e=e||[];this.pos<t;)e.push(this.readBoolean());return e},readPackedFloat:function(e){if(this.type!==i.Bytes)return e.push(this.readFloat());var t=s(this);for(e=e||[];this.pos<t;)e.push(this.readFloat());return e},readPackedDouble:function(e){if(this.type!==i.Bytes)return e.push(this.readDouble());var t=s(this);for(e=e||[];this.pos<t;)e.push(this.readDouble());return e},readPackedFixed32:function(e){if(this.type!==i.Bytes)return e.push(this.readFixed32());var t=s(this);for(e=e||[];this.pos<t;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){if(this.type!==i.Bytes)return e.push(this.readSFixed32());var t=s(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){if(this.type!==i.Bytes)return e.push(this.readFixed64());var t=s(this);for(e=e||[];this.pos<t;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){if(this.type!==i.Bytes)return e.push(this.readSFixed64());var t=s(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed64());return e},skip:function(e){e&=7;if(e===i.Varint)for(;127<this.buf[this.pos++];);else if(e===i.Bytes)this.pos=this.readVarint()+this.pos;else if(e===i.Fixed32)this.pos+=4;else{if(e!==i.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){for(var t,r=this.length||16;r<this.pos+e;)r*=2;r!==this.length&&((t=new Uint8Array(r)).set(this.buf),this.buf=t,this.length=r)},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),_(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),_(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),_(this.buf,-1&e,this.pos),_(this.buf,Math.floor(e*a),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),_(this.buf,-1&e,this.pos),_(this.buf,Math.floor(e*a),this.pos+4),this.pos+=8},writeVarint:function(e){if(268435455<(e=+e||0)||e<0){var t,r,n,i=e,o=this;if(0<=i?(n=i%4294967296|0,t=i/4294967296|0):(t=~(-i/4294967296),4294967295^(n=~(-i%4294967296))?n=n+1|0:t=t+1|(n=0)),0x10000000000000000<=i||i<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");o.realloc(10),i=n,(n=o).buf[n.pos++]=127&i|128,i>>>=7,n.buf[n.pos++]=127&i|128,i>>>=7,n.buf[n.pos++]=127&i|128,i>>>=7,n.buf[n.pos++]=127&i|128,i>>>=7,n.buf[n.pos]=127&i,r=(7&(i=t))<<4,(o=o).buf[o.pos++]|=r|((i>>>=3)?128:0),i&&(o.buf[o.pos++]=127&i|((i>>>=7)?128:0),i)&&(o.buf[o.pos++]=127&i|((i>>>=7)?128:0),i)&&(o.buf[o.pos++]=127&i|((i>>>=7)?128:0),i)&&(o.buf[o.pos++]=127&i|((i>>>=7)?128:0),i)&&(o.buf[o.pos++]=127&i)}else this.realloc(4),this.buf[this.pos++]=127&e|(127<e?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(127<e?128:0),e<=127)||(this.buf[this.pos++]=127&(e>>>=7)|(127<e?128:0),e<=127)||(this.buf[this.pos++]=e>>>7&127)},writeSVarint:function(e){this.writeVarint(e<0?2*-e-1:2*e)},writeBoolean:function(e){this.writeVarint(Boolean(e))},writeString:function(e){e=String(e),this.realloc(4*e.length),this.pos++;var t=this.pos,e=(this.pos=function(e,t,r){for(var n,i,o=0;o<t.length;o++){if(55295<(n=t.charCodeAt(o))&&n<57344){if(!i){56319<n||o+1===t.length?(e[r++]=239,e[r++]=191,e[r++]=189):i=n;continue}if(n<56320){e[r++]=239,e[r++]=191,e[r++]=189,i=n;continue}n=i-55296<<10|n-56320|65536,i=null}else i&&(e[r++]=239,e[r++]=191,e[r++]=189,i=null);n<128?e[r++]=n:(n<2048?e[r++]=n>>6|192:(n<65536?e[r++]=n>>12|224:(e[r++]=n>>18|240,e[r++]=n>>12&63|128),e[r++]=n>>6&63|128),e[r++]=63&n|128)}return r}(this.buf,e,this.pos),this.pos-t);128<=e&&l(t,e,this),this.pos=t-1,this.writeVarint(e),this.pos+=e},writeFloat:function(e){this.realloc(4),n.write(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),n.write(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var t=e.length;this.writeVarint(t),this.realloc(t);for(var r=0;r<t;r++)this.buf[this.pos++]=e[r]},writeRawMessage:function(e,t){this.pos++;var r=this.pos,e=(e(t,this),this.pos-r);128<=e&&l(r,e,this),this.pos=r-1,this.writeVarint(e),this.pos+=e},writeMessage:function(e,t,r){this.writeTag(e,i.Bytes),this.writeRawMessage(t,r)},writePackedVarint:function(e,t){t.length&&this.writeMessage(e,c,t)},writePackedSVarint:function(e,t){t.length&&this.writeMessage(e,f,t)},writePackedBoolean:function(e,t){t.length&&this.writeMessage(e,g,t)},writePackedFloat:function(e,t){t.length&&this.writeMessage(e,h,t)},writePackedDouble:function(e,t){t.length&&this.writeMessage(e,d,t)},writePackedFixed32:function(e,t){t.length&&this.writeMessage(e,y,t)},writePackedSFixed32:function(e,t){t.length&&this.writeMessage(e,A,t)},writePackedFixed64:function(e,t){t.length&&this.writeMessage(e,m,t)},writePackedSFixed64:function(e,t){t.length&&this.writeMessage(e,v,t)},writeBytesField:function(e,t){this.writeTag(e,i.Bytes),this.writeBytes(t)},writeFixed32Field:function(e,t){this.writeTag(e,i.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(e,t){this.writeTag(e,i.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(e,t){this.writeTag(e,i.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(e,t){this.writeTag(e,i.Fixed64),this.writeSFixed64(t)},writeVarintField:function(e,t){this.writeTag(e,i.Varint),this.writeVarint(t)},writeSVarintField:function(e,t){this.writeTag(e,i.Varint),this.writeSVarint(t)},writeStringField:function(e,t){this.writeTag(e,i.Bytes),this.writeString(t)},writeFloatField:function(e,t){this.writeTag(e,i.Fixed32),this.writeFloat(t)},writeDoubleField:function(e,t){this.writeTag(e,i.Fixed64),this.writeDouble(t)},writeBooleanField:function(e,t){this.writeVarintField(e,Boolean(t))}}},{ieee754:71}],420:[function(e,t,r){"use strict";var n,i,t=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return(n=setTimeout)(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{i="function"==typeof clearTimeout?clearTimeout:a}catch(e){i=a}var u,l=[],c=!1,f=-1;function h(){c&&u&&(c=!1,u.length?l=u.concat(l):f=-1,l.length)&&p()}function p(){if(!c){var e=s(h);c=!0;for(var t=l.length;t;){for(u=l,l=[];++f<t;)u&&u[f].run();f=-1,t=l.length}u=null,c=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===a||!i)&&clearTimeout)return(i=clearTimeout)(t);try{i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(e)}}function d(e,t){this.fun=e,this.array=t}function g(){}t.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];l.push(new d(e,t)),1!==l.length||c||s(p)},d.prototype.run=function(){this.fun.apply(null,this.array)},t.title="browser",t.browser=!0,t.env={},t.argv=[],t.version="",t.versions={},t.on=g,t.addListener=g,t.once=g,t.off=g,t.removeListener=g,t.removeAllListeners=g,t.emit=g,t.prependListener=g,t.prependOnceListener=g,t.listeners=function(e){return[]},t.binding=function(e){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(e){throw new Error("process.chdir is not supported")},t.umask=function(){return 0}},{}],421:[function(e,t,r){"use strict";function Kt(e){return(Kt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n;n=function(){var A=1,m=2,v=3,G=4,U=5,E=484813681109536e-20,y=Math.PI/2,z=.16666666666666666,q=.04722222222222222,H=.022156084656084655,b=1e-10,_=.017453292519943295,w=57.29577951308232,C=Math.PI/4,I=2*Math.PI,l=3.14159265359,s={greenwich:0,lisbon:-9.131906111111,paris:2.337229166667,bogota:-74.080916666667,madrid:-3.687938888889,rome:12.452333333333,bern:7.439583333333,jakarta:106.807719444444,ferro:-17.666666666667,brussels:4.367975,stockholm:18.058277777778,athens:23.7163375,oslo:10.722916666667},u={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}},W=/[\s_\-\/\(\)]/g;function S(e,t){if(e[t])return e[t];for(var r,n=Object.keys(e),i=t.toLowerCase().replace(W,""),o=-1;++o<n.length;)if((r=n[o]).toLowerCase().replace(W,"")===i)return e[r]}var Y=function(e){var t,r,n,i={},o=e.split("+").map(function(e){return e.trim()}).filter(function(e){return e}).reduce(function(e,t){t=t.split("=");return t.push(!0),e[t[0].toLowerCase()]=t[1],e},{}),a={proj:"projName",datum:"datumCode",rf:function(e){i.rf=parseFloat(e)},lat_0:function(e){i.lat0=e*_},lat_1:function(e){i.lat1=e*_},lat_2:function(e){i.lat2=e*_},lat_ts:function(e){i.lat_ts=e*_},lon_0:function(e){i.long0=e*_},lon_1:function(e){i.long1=e*_},lon_2:function(e){i.long2=e*_},alpha:function(e){i.alpha=parseFloat(e)*_},gamma:function(e){i.rectified_grid_angle=parseFloat(e)},lonc:function(e){i.longc=e*_},x_0:function(e){i.x0=parseFloat(e)},y_0:function(e){i.y0=parseFloat(e)},k_0:function(e){i.k0=parseFloat(e)},k:function(e){i.k0=parseFloat(e)},a:function(e){i.a=parseFloat(e)},b:function(e){i.b=parseFloat(e)},r:function(e){i.a=i.b=parseFloat(e)},r_a:function(){i.R_A=!0},zone:function(e){i.zone=parseInt(e,10)},south:function(){i.utmSouth=!0},towgs84:function(e){i.datum_params=e.split(",").map(function(e){return parseFloat(e)})},to_meter:function(e){i.to_meter=parseFloat(e)},units:function(e){e=S(u,i.units=e);e&&(i.to_meter=e.to_meter)},from_greenwich:function(e){i.from_greenwich=e*_},pm:function(e){var t=S(s,e);i.from_greenwich=(t||parseFloat(e))*_},nadgrids:function(e){"@null"===e?i.datumCode="none":i.nadgrids=e},axis:function(e){3===e.length&&-1!=="ewnsud".indexOf(e.substr(0,1))&&-1!=="ewnsud".indexOf(e.substr(1,1))&&-1!=="ewnsud".indexOf(e.substr(2,1))&&(i.axis=e)},approx:function(){i.approx=!0}};for(t in o)r=o[t],t in a?"function"==typeof(n=a[t])?n(r):i[n]=r:i[t]=r;return"string"==typeof i.datumCode&&"WGS84"!==i.datumCode&&(i.datumCode=i.datumCode.toLowerCase()),i},r=1,n=/\s/,o=/[A-Za-z]/,V=/[A-Za-z84_]/,K=/[,\]]/,X=/[\d\.E\-\+]/;function c(e){if("string"!=typeof e)throw new Error("not a string");this.text=e.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=r}function J(e,t,r){Array.isArray(t)&&(r.unshift(t),t=null);r=r.reduce(function(e,t){return f(t,e),e},t?{}:e);t&&(e[t]=r)}function f(e,t){if(Array.isArray(e)){var r,n=e.shift();if("PARAMETER"===n&&(n=e.shift()),1===e.length)return Array.isArray(e[0])?(t[n]={},void f(e[0],t[n])):void(t[n]=e[0]);if(e.length)if("TOWGS84"!==n)if("AXIS"===n)n in t||(t[n]=[]),t[n].push(e);else switch(Array.isArray(n)||(t[n]={}),n){case"UNIT":case"PRIMEM":case"VERT_DATUM":return t[n]={name:e[0].toLowerCase(),convert:e[1]},void(3===e.length&&f(e[2],t[n]));case"SPHEROID":case"ELLIPSOID":return t[n]={name:e[0],a:e[1],rf:e[2]},void(4===e.length&&f(e[3],t[n]));case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":return e[0]=["name",e[0]],void J(t,n,e);default:for(r=-1;++r<e.length;)if(!Array.isArray(e[r]))return f(e,t[n]);return J(t,n,e)}else t[n]=e;else t[n]=!0}else t[e]=!0}c.prototype.readCharicter=function(){var e=this.text[this.place++];if(4!==this.state)for(;n.test(e);){if(this.place>=this.text.length)return;e=this.text[this.place++]}switch(this.state){case r:return this.neutral(e);case 2:return this.keyword(e);case 4:return this.quoted(e);case 5:return this.afterquote(e);case 3:return this.number(e);case-1:return}},c.prototype.afterquote=function(e){if('"'===e)this.word+='"',this.state=4;else{if(!K.test(e))throw new Error("havn't handled \""+e+'" in afterquote yet, index '+this.place);this.word=this.word.trim(),this.afterItem(e)}},c.prototype.afterItem=function(e){return","===e?(null!==this.word&&this.currentObject.push(this.word),this.word=null,void(this.state=r)):"]"===e?(this.level--,null!==this.word&&(this.currentObject.push(this.word),this.word=null),this.state=r,this.currentObject=this.stack.pop(),void(this.currentObject||(this.state=-1))):void 0},c.prototype.number=function(e){if(!X.test(e)){if(K.test(e))return this.word=parseFloat(this.word),void this.afterItem(e);throw new Error("havn't handled \""+e+'" in number yet, index '+this.place)}this.word+=e},c.prototype.quoted=function(e){'"'!==e?this.word+=e:this.state=5},c.prototype.keyword=function(e){var t;if(V.test(e))this.word+=e;else if("["===e)(t=[]).push(this.word),this.level++,null===this.root?this.root=t:this.currentObject.push(t),this.stack.push(this.currentObject),this.currentObject=t,this.state=r;else{if(!K.test(e))throw new Error("havn't handled \""+e+'" in keyword yet, index '+this.place);this.afterItem(e)}},c.prototype.neutral=function(e){if(o.test(e))this.word=e,this.state=2;else if('"'===e)this.word="",this.state=4;else if(X.test(e))this.word=e,this.state=3;else{if(!K.test(e))throw new Error("havn't handled \""+e+'" in neutral yet, index '+this.place);this.afterItem(e)}},c.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(-1===this.state)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};var Z=.017453292519943295;function h(e){return e*Z}var $=function(e){var e=new c(e).output(),t=e.shift(),r=e.shift(),r=(e.unshift(["name",r]),e.unshift(["type",t]),{}),i=(f(e,r),r);if("GEOGCS"===i.type?i.projName="longlat":"LOCAL_CS"===i.type?(i.projName="identity",i.local=!0):"object"===Kt(i.PROJECTION)?i.projName=Object.keys(i.PROJECTION)[0]:i.projName=i.PROJECTION,i.AXIS){for(var n="",o=0,a=i.AXIS.length;o<a;++o){var s=[i.AXIS[o][0].toLowerCase(),i.AXIS[o][1].toLowerCase()];-1!==s[0].indexOf("north")||("y"===s[0]||"lat"===s[0])&&"north"===s[1]?n+="n":-1!==s[0].indexOf("south")||("y"===s[0]||"lat"===s[0])&&"south"===s[1]?n+="s":-1!==s[0].indexOf("east")||("x"===s[0]||"lon"===s[0])&&"east"===s[1]?n+="e":-1===s[0].indexOf("west")&&("x"!==s[0]&&"lon"!==s[0]||"west"!==s[1])||(n+="w")}2===n.length&&(n+="u"),3===n.length&&(i.axis=n)}i.UNIT&&(i.units=i.UNIT.name.toLowerCase(),"metre"===i.units&&(i.units="meter"),i.UNIT.convert)&&("GEOGCS"===i.type?i.DATUM&&i.DATUM.SPHEROID&&(i.to_meter=i.UNIT.convert*i.DATUM.SPHEROID.a):i.to_meter=i.UNIT.convert);t=i.GEOGCS;function u(e){return e*(i.to_meter||1)}return(t="GEOGCS"===i.type?i:t)&&(t.DATUM?i.datumCode=t.DATUM.name.toLowerCase():i.datumCode=t.name.toLowerCase(),"d_"===i.datumCode.slice(0,2)&&(i.datumCode=i.datumCode.slice(2)),"new_zealand_geodetic_datum_1949"!==i.datumCode&&"new_zealand_1949"!==i.datumCode||(i.datumCode="nzgd49"),"wgs_1984"!==i.datumCode&&"world_geodetic_system_1984"!==i.datumCode||("Mercator_Auxiliary_Sphere"===i.PROJECTION&&(i.sphere=!0),i.datumCode="wgs84"),"_ferro"===i.datumCode.slice(-6)&&(i.datumCode=i.datumCode.slice(0,-6)),"_jakarta"===i.datumCode.slice(-8)&&(i.datumCode=i.datumCode.slice(0,-8)),~i.datumCode.indexOf("belge")&&(i.datumCode="rnb72"),t.DATUM&&t.DATUM.SPHEROID&&(i.ellps=t.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===i.ellps.toLowerCase().slice(0,13)&&(i.ellps="intl"),i.a=t.DATUM.SPHEROID.a,i.rf=parseFloat(t.DATUM.SPHEROID.rf,10)),t.DATUM&&t.DATUM.TOWGS84&&(i.datum_params=t.DATUM.TOWGS84),~i.datumCode.indexOf("osgb_1936")&&(i.datumCode="osgb36"),~i.datumCode.indexOf("osni_1952")&&(i.datumCode="osni52"),(~i.datumCode.indexOf("tm65")||~i.datumCode.indexOf("geodetic_datum_of_1965"))&&(i.datumCode="ire65"),"ch1903+"===i.datumCode&&(i.datumCode="ch1903"),~i.datumCode.indexOf("israel"))&&(i.datumCode="isr93"),i.b&&!isFinite(i.b)&&(i.b=i.a),[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",h],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",h],["x0","false_easting",u],["y0","false_northing",u],["long0","central_meridian",h],["lat0","latitude_of_origin",h],["lat0","standard_parallel_1",h],["lat1","standard_parallel_1",h],["lat2","standard_parallel_2",h],["azimuth","Azimuth"],["alpha","azimuth",h],["srsCode","name"]].forEach(function(e){var t=i,r=(e=e)[0],n=e[1];!(r in t)&&n in t&&(t[r]=t[n],3===e.length)&&(t[r]=e[2](t[r]))}),i.long0||!i.longc||"Albers_Conic_Equal_Area"!==i.projName&&"Lambert_Azimuthal_Equal_Area"!==i.projName||(i.long0=i.longc),i.lat_ts||!i.lat1||"Stereographic_South_Pole"!==i.projName&&"Polar Stereographic (variant B)"!==i.projName?!i.lat_ts&&i.lat0&&"Polar_Stereographic"===i.projName&&(i.lat_ts=i.lat0,i.lat0=h(0<i.lat0?90:-90)):(i.lat0=h(0<i.lat1?90:-90),i.lat_ts=i.lat1),r};function j(e){var t=this;if(2===arguments.length){var r=arguments[1];"string"==typeof r?"+"===r.charAt(0)?j[e]=Y(arguments[1]):j[e]=$(arguments[1]):j[e]=r}else if(1===arguments.length){if(Array.isArray(e))return e.map(function(e){Array.isArray(e)?j.apply(t,e):j(e)});if("string"==typeof e){if(e in j)return j[e]}else"EPSG"in e?j["EPSG:"+e.EPSG]=e:"ESRI"in e?j["ESRI:"+e.ESRI]=e:"IAU2000"in e?j["IAU2000:"+e.IAU2000]=e:console.log(e)}}(e=j)("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),e("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),e("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),e.WGS84=e["EPSG:4326"],e["EPSG:3785"]=e["EPSG:3857"],e.GOOGLE=e["EPSG:3857"],e["EPSG:900913"]=e["EPSG:3857"],e["EPSG:102113"]=e["EPSG:3857"];var ee=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"],te=["3857","900913","3785","102113"];function re(e,t){var r,n;if(e=e||{},t)for(n in t)void 0!==(r=t[n])&&(e[n]=r)}function a(e,t,r){return e*=t,r/Math.sqrt(1-e*e)}function ne(e){return e<0?-1:1}function x(e,t,r){return r*=e,r=Math.pow((1-r)/(1+r),.5*e),Math.tan(.5*(y-t))/r}function ie(e,t){for(var r,n=.5*e,i=y-2*Math.atan(t),o=0;o<=15;o++)if(r=e*Math.sin(i),i+=r=y-2*Math.atan(t*Math.pow((1-r)/(1+r),n))-i,Math.abs(r)<=1e-10)return i;return-9999}var O=function(e){return Math.abs(e)<=l?e:e-ne(e)*I};function oe(e){return e}var ae=[{init:function(){var e=this.b/this.a;this.es=1-e*e,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=a(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)},forward:function(e){var t,r,n=e.x,i=e.y;return 90<i*w&&i*w<-90&&180<n*w&&n*w<-180||Math.abs(Math.abs(i)-y)<=b?null:(r=this.sphere?(t=this.x0+this.a*this.k0*O(n-this.long0),this.y0+this.a*this.k0*Math.log(Math.tan(C+.5*i))):(r=Math.sin(i),i=x(this.e,i,r),t=this.x0+this.a*this.k0*O(n-this.long0),this.y0-this.a*this.k0*Math.log(i)),e.x=t,e.y=r,e)},inverse:function(e){var t,r=e.x-this.x0,n=e.y-this.y0;if(this.sphere)t=y-2*Math.atan(Math.exp(-n/(this.a*this.k0)));else{var n=Math.exp(-n/(this.a*this.k0));if(-9999===(t=ie(this.e,n)))return null}return n=O(this.long0+r/(this.a*this.k0)),e.x=n,e.y=t,e},names:["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"]},{init:function(){},forward:oe,inverse:oe,names:["longlat","identity"]}],se={},ue=[];function le(e,t){var r=ue.length;return e.names?((ue[r]=e).names.forEach(function(e){se[e.toLowerCase()]=r}),this):(console.log(t),!0)}var e={start:function(){ae.forEach(le)},add:le,get:function(e){return!!e&&(e=e.toLowerCase(),void 0!==se[e]&&ue[se[e]]?ue[se[e]]:void 0)}},ce={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},APL4:{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},andrae:{a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},clrk80:{a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk80ign:{a:6378249.2,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"},clrk58:{a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:6355834.8467,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS7:{a:6378135,rf:298.26,ellipseName:"WGS 72"}},fe=ce.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"},P=(ce.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"},{}),he=(P.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},P.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},P.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},P.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},P.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},P.potsdam={towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},P.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},P.hermannskogel={towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},P.militargeographische_institut={towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Militar-Geographische Institut"},P.osni52={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},P.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},P.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},P.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},P.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},P.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},P.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},P.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},P.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"},{});function pe(e){var t;return 0===e.length?null:"null"===(e=(t="@"===e[0])?e.slice(1):e)?{name:"null",mandatory:!t,grid:null,isNull:!0}:{name:e,mandatory:!t,grid:he[e]||null,isNull:!1}}function p(e){return e/3600*Math.PI/180}function de(e,t,r){return String.fromCharCode.apply(null,new Uint8Array(e.buffer.slice(t,r)))}function k(e,t){if(!(this instanceof k))return new k(e);t=t||function(e){if(e)throw e};var r,n,i,o,a,s,u,l,c,f,h,p,d,g,y="string"!=typeof(i=e)?i:i in j?j[i]:(n=i,ee.some(function(e){return-1<n.indexOf(e)})?(r=$(i),function(){var e=S(r,"authority");if(e)return(e=S(e,"epsg"))&&-1<te.indexOf(e)}()?j["EPSG:3857"]:(y=function(){var e=S(r,"extension");if(e)return S(e,"proj4")}())?Y(y):r):"+"===i[0]?Y(i):void 0);"object"===Kt(y)&&(i=k.projections.get(y.projName))?(y.datumCode&&"none"!==y.datumCode&&(f=S(P,y.datumCode))&&(y.datum_params=y.datum_params||(f.towgs84?f.towgs84.split(","):null),y.ellps=f.ellipse,y.datumName=f.datumName||y.datumCode),y.k0=y.k0||1,y.axis=y.axis||"enu",y.ellps=y.ellps||"wgs84",y.lat1=y.lat1||y.lat0,f=y.a,h=y.b,p=y.rf,d=y.ellps,g=y.sphere,f||(f=(d=(d=S(ce,d))||fe).a,h=d.b,p=d.rf),p&&!h&&(h=(1-1/p)*f),(0===p||Math.abs(f-h)<b)&&(g=!0,h=f),c=((p=(h=(d={a:f,b:h,rf:p,sphere:g}).a)*h)-(g=(g=d.b)*g))/p,u=0,y.R_A?(p=(h*=1-c*(z+c*(q+c*H)))*h,c=0):u=Math.sqrt(c),h={es:c,e:u,ep2:(p-g)/g},u=void 0===(c=y.nadgrids)?null:c.split(",").map(pe),p=y.datum||(p=y.datumCode,g=y.datum_params,c=d.a,o=d.b,a=h.es,s=h.ep2,u=u,(l={}).datum_type=void 0===p||"none"===p?U:G,g&&(l.datum_params=g.map(parseFloat),0===l.datum_params[0]&&0===l.datum_params[1]&&0===l.datum_params[2]||(l.datum_type=A),3<l.datum_params.length)&&(0===l.datum_params[3]&&0===l.datum_params[4]&&0===l.datum_params[5]&&0===l.datum_params[6]||(l.datum_type=m,l.datum_params[3]*=E,l.datum_params[4]*=E,l.datum_params[5]*=E,l.datum_params[6]=l.datum_params[6]/1e6+1)),u&&(l.datum_type=v,l.grids=u),l.a=c,l.b=o,l.es=a,l.ep2=s,l),re(this,y),re(this,i),this.a=d.a,this.b=d.b,this.rf=d.rf,this.sphere=d.sphere,this.es=h.es,this.e=h.e,this.ep2=h.ep2,this.datum=p,this.init(),t(null,this)):t(e)}function ge(e,t,r){var n=e.x,i=e.y,o=e.z||0;if(i<-y&&-1.001*y<i)i=-y;else if(y<i&&i<1.001*y)i=y;else{if(i<-y)return{x:-1/0,y:-1/0,z:e.z};if(y<i)return{x:1/0,y:1/0,z:e.z}}return n>Math.PI&&(n-=2*Math.PI),e=Math.sin(i),i=Math.cos(i),{x:((r=r/Math.sqrt(1-t*(e*e)))+o)*i*Math.cos(n),y:(r+o)*i*Math.sin(n),z:(r*(1-t)+o)*e}}function ye(e,t,r,n){var i,o,a,s,u,l,c,f,h,p,d,g=e.x,y=e.y,A=e.z||0,m=Math.sqrt(g*g+y*y),v=Math.sqrt(g*g+y*y+A*A);if(m/r<1e-12){if(p=0,v/r<1e-12)return d=-n,{x:e.x,y:e.y,z:e.z}}else p=Math.atan2(y,g);for(i=A/v,s=(o=m/v)*(1-t)*(a=1/Math.sqrt(1-t*(2-t)*o*o)),u=i*a,h=0;h++,f=t*(f=r/Math.sqrt(1-t*u*u))/(f+(d=m*s+A*u-f*(1-t*u*u))),f=(c=i*(a=1/Math.sqrt(1-f*(2-f)*o*o)))*s-(l=o*(1-f)*a)*u,s=l,u=c,1e-24<f*f&&h<30;);return{x:p,y:Math.atan(c/Math.abs(l)),z:d}}function Ae(e){return e===A||e===m}(k.projections=e).start();function me(e,t,r){if(i=t,(n=e).datum_type===i.datum_type&&!(n.a!==i.a||5e-11<Math.abs(n.es-i.es))&&(n.datum_type===A?n.datum_params[0]===i.datum_params[0]&&n.datum_params[1]===i.datum_params[1]&&n.datum_params[2]===i.datum_params[2]:n.datum_type!==m||n.datum_params[0]===i.datum_params[0]&&n.datum_params[1]===i.datum_params[1]&&n.datum_params[2]===i.datum_params[2]&&n.datum_params[3]===i.datum_params[3]&&n.datum_params[4]===i.datum_params[4]&&n.datum_params[5]===i.datum_params[5]&&n.datum_params[6]===i.datum_params[6]))return r;if(e.datum_type===U||t.datum_type===U)return r;var n=e.a,i=e.es;if(e.datum_type===v){if(0!==ve(e,!1,r))return;n=6378137,i=.0066943799901413165}var o,a,s,u,l,c=t.a,f=t.b,h=t.es;return t.datum_type===v&&(c=6378137,f=6356752.314,h=.0066943799901413165),i===h&&n===c&&!Ae(e.datum_type)&&!Ae(t.datum_type)||(r=ge(r,i,n),Ae(e.datum_type)&&(i=r,n=e.datum_type,e=e.datum_params,r=n===A?{x:i.x+e[0],y:i.y+e[1],z:i.z+e[2]}:n===m?(n=e[0],o=e[1],a=e[2],s=e[3],u=e[4],l=e[5],{x:(e=e[6])*(i.x-l*i.y+u*i.z)+n,y:e*(l*i.x+i.y-s*i.z)+o,z:e*(-u*i.x+s*i.y+i.z)+a}):void 0),Ae(t.datum_type)&&(n=r,l=t.datum_type,o=t.datum_params,r=l===A?{x:n.x-o[0],y:n.y-o[1],z:n.z-o[2]}:l===m?(l=o[0],e=o[1],u=o[2],s=o[3],i=o[4],a=o[5],o=o[6],{x:(l=(n.x-l)/o)+a*(e=(n.y-e)/o)-i*(n=(n.z-u)/o),y:-a*l+e+s*n,z:i*l-s*e+n}):void 0),r=ye(r,h,c,f),t.datum_type!==v)||0===ve(t,!0,r)?r:void 0}function ve(e,t,r){if(null===e.grids||0===e.grids.length)return console.log("Grid shift grids not found"),-1;var n={x:-r.x,y:r.y},i={x:Number.NaN,y:Number.NaN},o=[];e:for(var a=0;a<e.grids.length;a++){var s=e.grids[a];if(o.push(s.name),s.isNull){i=n;break}if(null!==s.grid)for(var u=s.grid.subgrids,l=0,c=u.length;l<c;l++){var f=u[l],h=(Math.abs(f.del[1])+Math.abs(f.del[0]))/1e4,p=f.ll[0]-h,d=f.ll[1]-h,g=f.ll[0]+(f.lim[0]-1)*f.del[0]+h,h=f.ll[1]+(f.lim[1]-1)*f.del[1]+h;if(!(n.y<d||n.x<p||h<n.y||g<n.x||(i=function(e,t,r){var n={x:Number.NaN,y:Number.NaN};if(!isNaN(e.x)){var i={x:e.x,y:e.y},o=(i.x-=r.ll[0],i.y-=r.ll[1],i.x=O(i.x-Math.PI)+Math.PI,be(i,r));if(t){if(isNaN(o.x))return n;o.x=i.x-o.x,o.y=i.y-o.y;var a,s=9;do{if(a=be(o,r),isNaN(a.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}}while(a={x:i.x-(a.x+o.x),y:i.y-(a.y+o.y)},o.x+=a.x,o.y+=a.y,s--&&1e-12<Math.abs(a.x)&&1e-12<Math.abs(a.y));if(s<0)return console.log("Inverse grid shift iterator failed to converge."),n;n.x=O(o.x+r.ll[0]),n.y=o.y+r.ll[1]}else isNaN(o.x)||(n.x=e.x+o.x,n.y=e.y+o.y)}return n}(n,t,f),isNaN(i.x))))break e}else if(s.mandatory)return console.log("Unable to find mandatory grid '"+s.name+"'"),-1}return isNaN(i.x)?(console.log("Failed to find a grid shift table for location '"+-n.x*w+" "+n.y*w+" tried: '"+o+"'"),-1):(r.x=-i.x,r.y=i.y,0)}function be(e,t){var r,n,i,o,a,s,e={x:e.x/t.del[0],y:e.y/t.del[1]},u=Math.floor(e.x),l=Math.floor(e.y),c=e.x-+u,e=e.y-+l,f={x:Number.NaN,y:Number.NaN};return u<0||u>=t.lim[0]||l<0||l>=t.lim[1]||(l=l*t.lim[0]+u,u=t.cvs[l][0],r=t.cvs[l][1],s=t.cvs[++l][0],n=t.cvs[l][1],l+=t.lim[0],i=t.cvs[l][0],o=t.cvs[l][1],a=t.cvs[--l][0],t=t.cvs[l][1],f.x=(l=(1-c)*(1-e))*u+(u=c*(1-e))*s+(s=(1-c)*e)*a+(a=c*e)*i,f.y=l*r+u*n+s*t+a*o),f}function _e(e,t,r){for(var n,i,o=r.x,a=r.y,s=r.z||0,u={},l=0;l<3;l++)if(!t||2!==l||void 0!==r.z)switch(i=0===l?(n=o,-1!=="ew".indexOf(e.axis[l])?"x":"y"):1===l?(n=a,-1!=="ns".indexOf(e.axis[l])?"y":"x"):(n=s,"z"),e.axis[l]){case"e":u[i]=n;break;case"w":u[i]=-n;break;case"n":u[i]=n;break;case"s":u[i]=-n;break;case"u":void 0!==r[i]&&(u.z=n);break;case"d":void 0!==r[i]&&(u.z=-n);break;default:return null}return u}function we(e){var t={x:e[0],y:e[1]};return 2<e.length&&(t.z=e[2]),3<e.length&&(t.m=e[3]),t}function Ee(e){Ce(e.x),Ce(e.y)}function Ce(e){if("function"==typeof Number.isFinite){if(Number.isFinite(e))return;throw new TypeError("coordinates must be finite numbers")}if("number"!=typeof e||e!=e||!isFinite(e))throw new TypeError("coordinates must be finite numbers")}function Ie(e,t,r,n){var i,o=void 0!==(r=Array.isArray(r)?we(r):{x:r.x,y:r.y,z:r.z,m:r.m}).z;if(Ee(r),e.datum&&t.datum&&(((i=e).datum.datum_type===A||i.datum.datum_type===m||i.datum.datum_type===v)&&"WGS84"!==t.datumCode||(t.datum.datum_type===A||t.datum.datum_type===m||t.datum.datum_type===v)&&"WGS84"!==i.datumCode)&&(r=Ie(e,i=new k("WGS84"),r,n),e=i),n&&"enu"!==e.axis&&(r=_e(e,!1,r)),"longlat"===e.projName)r={x:r.x*_,y:r.y*_,z:r.z||0};else if(e.to_meter&&(r={x:r.x*e.to_meter,y:r.y*e.to_meter,z:r.z||0}),!(r=e.inverse(r)))return;if(e.from_greenwich&&(r.x+=e.from_greenwich),r=me(e.datum,t.datum,r))return t.from_greenwich&&(r={x:r.x-t.from_greenwich,y:r.y,z:r.z||0}),"longlat"===t.projName?r={x:r.x*w,y:r.y*w,z:r.z||0}:(r=t.forward(r),t.to_meter&&(r={x:r.x/t.to_meter,y:r.y/t.to_meter,z:r.z||0})),n&&"enu"!==t.axis?_e(t,!0,r):(r&&!o&&delete r.z,r)}var Se=k("WGS84");function je(t,r,n,e){var i,o;return Array.isArray(n)?(o=Ie(t,r,n,e)||{x:NaN,y:NaN},2<n.length?void 0!==t.name&&"geocent"===t.name||void 0!==r.name&&"geocent"===r.name?("number"==typeof o.z?[o.x,o.y,o.z]:[o.x,o.y,n[2]]).concat(n.splice(3)):[o.x,o.y].concat(n.splice(2)):[o.x,o.y]):(i=Ie(t,r,n,e),2===(o=Object.keys(n)).length||o.forEach(function(e){if(void 0!==t.name&&"geocent"===t.name||void 0!==r.name&&"geocent"===r.name){if("x"===e||"y"===e||"z"===e)return}else if("x"===e||"y"===e)return;i[e]=n[e]}),i)}function xe(e){return e instanceof k?e:e.oProj||k(e)}function t(r,n,e){r=xe(r);var t=!1;return void 0===n?(n=r,r=Se,t=!0):void 0===n.x&&!Array.isArray(n)||(e=n,n=r,r=Se,t=!0),n=xe(n),e?je(r,n,e):(e={forward:function(e,t){return je(r,n,e,t)},inverse:function(e,t){return je(n,r,e,t)}},t&&(e.oProj=n),e)}var Oe=6,e={forward:Pe,inverse:function(e){e=Me(De(e.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat,e.lon,e.lat]:[e.left,e.bottom,e.right,e.top]},toPoint:ke};function Pe(e,t){return t=t||5,e={lat:e[1],lon:e[0]},r=e.lat,e=e.lon,n=Be(r),i=Be(e),o=Math.floor((e+180)/6)+1,180===e&&(o=60),56<=r&&r<64&&3<=e&&e<12&&(o=32),72<=r&&r<84&&(0<=e&&e<9?o=31:9<=e&&e<21?o=33:21<=e&&e<33?o=35:33<=e&&e<42&&(o=37)),e=Be(6*(o-1)-180+3),a=6378137/Math.sqrt(1-.00669438*Math.sin(n)*Math.sin(n)),s=Math.tan(n)*Math.tan(n),u=.006739496752268451*Math.cos(n)*Math.cos(n),e=.9996*a*((i=Math.cos(n)*(i-e))+(1-s+u)*i*i*i/6+(5-18*s+s*s+72*u-.39089081163157013)*i*i*i*i*i/120)+5e5,a=.9996*(6378137*(.9983242984503243*n-.002514607064228144*Math.sin(2*n)+2639046602129982e-21*Math.sin(4*n)-3.418046101696858e-9*Math.sin(6*n))+a*Math.tan(n)*(i*i/2+(5-s+9*u+4*u*u)*i*i*i*i/24+(61-58*s+s*s+600*u-2.2240339282485886)*i*i*i*i*i*i/720)),r<0&&(a+=1e7),u={northing:Math.round(a),easting:Math.round(e),zoneNumber:o,zoneLetter:(n="Z",(s=r)<=84&&72<=s?n="X":s<72&&64<=s?n="W":s<64&&56<=s?n="V":s<56&&48<=s?n="U":s<48&&40<=s?n="T":s<40&&32<=s?n="S":s<32&&24<=s?n="R":s<24&&16<=s?n="Q":s<16&&8<=s?n="P":s<8&&0<=s?n="N":s<0&&-8<=s?n="M":s<-8&&-16<=s?n="L":s<-16&&-24<=s?n="K":s<-24&&-32<=s?n="J":s<-32&&-40<=s?n="H":s<-40&&-48<=s?n="G":s<-48&&-56<=s?n="F":s<-56&&-64<=s?n="E":s<-64&&-72<=s?n="D":s<-72&&-80<=s&&(n="C"),n)},i=t,a="00000"+u.easting,e="00000"+u.northing,u.zoneNumber+u.zoneLetter+(o=u.easting,r=u.northing,u=Re(u.zoneNumber),o=Math.floor(o/1e5),r=Math.floor(r/1e5)%20,s=!1,90<(o=(n="AJSAJS".charCodeAt(u=u-1))+o-1)&&(o=o-90+65-1,s=!0),(73===o||n<73&&73<o||(73<o||n<73)&&s)&&o++,(79===o||n<79&&79<o||(79<o||n<79)&&s)&&73==++o&&o++,90<o&&(o=o-90+65-1),s=86<(u=(n="AFAFAF".charCodeAt(u))+r)&&(u=u-86+65-1,!0),(73===u||n<73&&73<u||(73<u||n<73)&&s)&&u++,(79===u||n<79&&79<u||(79<u||n<79)&&s)&&73==++u&&u++,86<u&&(u=u-86+65-1),String.fromCharCode(o)+String.fromCharCode(u))+a.substr(a.length-5,i)+e.substr(e.length-5,i);var r,n,i,o,a,s,u}function ke(e){e=Me(De(e.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function Be(e){return e*(Math.PI/180)}function Te(e){return e/Math.PI*180}function Me(e){var t,r,n,i=e.northing,o=e.easting,a=e.zoneLetter,s=e.zoneNumber;return s<0||60<s?null:(o=o-5e5,i=i,a<"N"&&(i-=1e7),a=6*(s-1)-180+3,i=(s=i/.9996/6367449.145945056)+(3*(i=(1-Math.sqrt(.99330562))/(1+Math.sqrt(.99330562)))/2-27*i*i*i/32)*Math.sin(2*s)+(21*i*i/16-55*i*i*i*i/32)*Math.sin(4*s)+151*i*i*i/96*Math.sin(6*s),s=6378137/Math.sqrt(1-.00669438*Math.sin(i)*Math.sin(i)),t=Math.tan(i)*Math.tan(i),r=.006739496752268451*Math.cos(i)*Math.cos(i),n=6335439.32722994/Math.pow(1-.00669438*Math.sin(i)*Math.sin(i),1.5),o=o/(.9996*s),s=Te(s=i-s*Math.tan(i)/n*(o*o/2-(5+3*t+10*r-4*r*r-.06065547077041606)*o*o*o*o/24+(61+90*t+298*r+45*t*t-1.6983531815716497-3*r*r)*o*o*o*o*o*o/720)),n=a+Te(n=(o-(1+2*t+r)*o*o*o/6+(5-2*r+28*t-3*r*r+.05391597401814761+24*t*t)*o*o*o*o*o/120)/Math.cos(i)),e.accuracy?{top:(a=Me({northing:e.northing+e.accuracy,easting:e.easting+e.accuracy,zoneLetter:e.zoneLetter,zoneNumber:e.zoneNumber})).lat,right:a.lon,bottom:s,left:n}:{lat:s,lon:n})}function Re(e){e%=Oe;return e=0===e?Oe:e}function De(e){if(e&&0===e.length)throw"MGRSPoint coverting from nothing";for(var t,r=e.length,n=null,i="",o=0;!/[A-Z]/.test(t=e.charAt(o));){if(2<=o)throw"MGRSPoint bad conversion from: "+e;i+=t,o++}var a=parseInt(i,10);if(0===o||r<o+3)throw"MGRSPoint bad conversion from: "+e;var s=e.charAt(o++);if(s<="A"||"B"===s||"Y"===s||"Z"<=s||"I"===s||"O"===s)throw"MGRSPoint zone letter "+s+" not handled: "+e;for(var n=e.substring(o,o+=2),u=Re(a),l=function(e){for(var t="AJSAJS".charCodeAt(u-1),r=1e5,n=!1;t!==e.charCodeAt(0);){if(73==++t&&t++,79===t&&t++,90<t){if(n)throw"Bad character: "+e;t=65,n=!0}r+=1e5}return r}(n.charAt(0)),c=function(e){if("V"<e)throw"MGRSPoint given invalid Northing "+e;for(var t="AFAFAF".charCodeAt(u-1),r=0,n=!1;t!==e.charCodeAt(0);){if(73==++t&&t++,79===t&&t++,86<t){if(n)throw"Bad character: "+e;t=65,n=!0}r+=1e5}return r}(n.charAt(1));c<function(e){var t;switch(e){case"C":t=11e5;break;case"D":t=2e6;break;case"E":t=28e5;break;case"F":t=37e5;break;case"G":t=46e5;break;case"H":t=55e5;break;case"J":t=64e5;break;case"K":t=73e5;break;case"L":t=82e5;break;case"M":t=91e5;break;case"N":t=0;break;case"P":t=8e5;break;case"Q":t=17e5;break;case"R":t=26e5;break;case"S":t=35e5;break;case"T":t=44e5;break;case"U":t=53e5;break;case"V":t=62e5;break;case"W":t=7e6;break;case"X":t=79e5;break;default:t=-1}if(0<=t)return t;throw"Invalid zone letter: "+e}(s);)c+=2e6;n=r-o;if(n%2!=0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+e;var f,h,r=n/2,n=0,p=0;return 0<r&&(f=1e5/Math.pow(10,r),h=e.substring(o,o+r),n=parseFloat(h)*f,h=e.substring(o+r),p=parseFloat(h)*f),{easting:n+l,northing:p+c,zoneLetter:s,zoneNumber:a,accuracy:f}}function i(e,t,r){if(!(this instanceof i))return new i(e,t,r);var n;Array.isArray(e)?(this.x=e[0],this.y=e[1],this.z=e[2]||0):"object"===Kt(e)?(this.x=e.x,this.y=e.y,this.z=e.z||0):"string"==typeof e&&void 0===t?(n=e.split(","),this.x=parseFloat(n[0],10),this.y=parseFloat(n[1],10),this.z=parseFloat(n[2],10)||0):(this.x=e,this.y=t,this.z=r||0),console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}i.fromMGRS=function(e){return new i(ke(e))},i.prototype.toMGRS=function(e){return Pe([this.x,this.y],e)};function Le(e){var t=[],r=(t[0]=1-e*(.25+e*(.046875+e*(.01953125+e*Ke))),t[1]=e*(.75-e*(.046875+e*(.01953125+e*Ke))),e*e);return t[2]=r*(.46875-e*(.013020833333333334+.007120768229166667*e)),t[3]=(r*=e)*(.3645833333333333-.005696614583333333*e),t[4]=r*e*.3076171875,t}function Qe(e,t,r,n){return n[0]*e-(r*=t)*(n[1]+(t*=t)*(n[2]+t*(n[3]+t*n[4])))}function Fe(e,t,r){for(var n=1/(1-t),i=e,o=20;o;--o){var a=Math.sin(i),s=1-t*a*a;if(i-=s=(Qe(i,a,Math.cos(i),r)-e)*(s*Math.sqrt(s))*n,Math.abs(s)<b)return i}return i}function Ne(e){return((e=Math.exp(e))-1/e)/2}function d(e,t){e=Math.abs(e),t=Math.abs(t);var r=Math.max(e,t),e=Math.min(e,t)/(r||1);return r*Math.sqrt(1+Math.pow(e,2))}function Ge(e,t){for(var r,n=2*Math.cos(2*t),i=e.length-1,o=e[i],a=0;0<=--i;)r=n*o-a+e[i],a=o,o=r;return t+r*Math.sin(2*t)}function Ue(e,t,r){for(var n,i,o=Math.sin(t),t=Math.cos(t),a=Ne(r),r=((r=Math.exp(r))+1/r)/2,s=2*t*r,u=-2*o*a,l=e.length-1,c=e[l],f=0,h=0,p=0;0<=--l;)n=h,i=f,c=s*(h=c)-n-u*(f=p)+e[l],p=u*h-i+s*f;return[(s=o*r)*c-(u=t*a)*p,s*p+u*c]}function ze(e,t){return Math.pow((1-e)/(1+e),t)}function g(e,t,r,n,i){return e*i-t*Math.sin(2*i)+r*Math.sin(4*i)-n*Math.sin(6*i)}function qe(e){return 1-.25*e*(1+e/16*(3+1.25*e))}function He(e){return.375*e*(1+.25*e*(1+.46875*e))}function We(e){return.05859375*e*e*(1+.75*e)}function Ye(e){return e*e*e*(35/3072)}function B(e,t,r){return t*=r,e/Math.sqrt(1-t*t)}function T(e){return Math.abs(e)<y?e:e-ne(e)*Math.PI}function Ve(e,t,r,n,i){for(var o,a=e/t,s=0;s<15;s++)if(a+=o=(e-(t*a-r*Math.sin(2*a)+n*Math.sin(4*a)-i*Math.sin(6*a)))/(t-2*r*Math.cos(2*a)+4*n*Math.cos(4*a)-6*i*Math.cos(6*a)),Math.abs(o)<=1e-10)return a;return NaN}function M(e,t){var r;return 1e-7<e?(1-e*e)*(t/(1-(r=e*t)*r)-.5/e*Math.log((1-r)/(1+r))):2*t}function R(e){return 1<Math.abs(e)&&(e=1<e?1:-1),Math.asin(e)}var Ke=.01068115234375,Xe={init:function(){this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.es&&(this.en=Le(this.es),this.ml0=Qe(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))},forward:function(e){var t=e.x,r=e.y,t=O(t-this.long0),n=Math.sin(r),i=Math.cos(r);if(this.es)var o=i*t,a=Math.pow(o,2),s=this.ep2*Math.pow(i,2),u=Math.pow(s,2),l=Math.abs(i)>b?Math.tan(r):0,l=Math.pow(l,2),c=Math.pow(l,2),f=1-this.es*Math.pow(n,2),f=(o/=Math.sqrt(f),Qe(r,n,i,this.en)),h=this.a*(this.k0*o*(1+a/6*(1-l+s+a/20*(5-18*l+c+14*s-58*l*s+a/42*(61+179*c-c*l-479*l)))))+this.x0,f=this.a*(this.k0*(f-this.ml0+n*t*o/2*(1+a/12*(5-l+9*s+4*u+a/30*(61+c-58*l+270*s-330*l*s+a/56*(1385+543*c-c*l-3111*l))))))+this.y0;else{n=i*Math.sin(t);if(Math.abs(Math.abs(n)-1)<b)return 93;if(h=.5*this.a*this.k0*Math.log((1+n)/(1-n))+this.x0,f=i*Math.cos(t)/Math.sqrt(1-Math.pow(n,2)),1<=(n=Math.abs(f))){if(b<n-1)return 93;f=0}else f=Math.acos(f);f=this.a*this.k0*((f=r<0?-f:f)-this.lat0)+this.y0}return e.x=h,e.y=f,e},inverse:function(e){var t,r,n,i,o,a,s,u,l,c=(e.x-this.x0)*(1/this.a),f=(e.y-this.y0)*(1/this.a);return o=this.es?(n=this.ml0+f/this.k0,l=Fe(n,this.es,this.en),Math.abs(l)<y?(s=Math.sin(l),t=Math.cos(l),i=Math.abs(t)>b?Math.tan(l):0,u=this.ep2*Math.pow(t,2),a=Math.pow(u,2),r=Math.pow(i,2),o=Math.pow(r,2),n=1-this.es*Math.pow(s,2),s=c*Math.sqrt(n)/this.k0,i=l-(n*=i)*(l=Math.pow(s,2))/(1-this.es)*.5*(1-l/12*(5+3*r-9*u*r+u-4*a-l/30*(61+90*r-252*u*r+45*o+46*u-l/56*(1385+3633*r+4095*o+1574*o*r)))),O(this.long0+s*(1-l/6*(1+2*r+u-l/20*(5+28*r+24*o+8*u*r+6*u-l/42*(61+662*r+1320*o+720*o*r))))/t)):(i=y*ne(f),0)):(s=.5*((a=Math.exp(c/this.k0))-1/a),u=this.lat0+f/this.k0,l=Math.cos(u),n=Math.sqrt((1-Math.pow(l,2))/(1+Math.pow(s,2))),i=Math.asin(n),f<0&&(i=-i),0==s&&0===l?0:O(Math.atan2(s,l)+this.long0)),e.x=o,e.y=i,e},names:["Fast_Transverse_Mercator","Fast Transverse Mercator"]},Je={init:function(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(Xe.init.apply(this),this.forward=Xe.forward,this.inverse=Xe.inverse),this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var e=this.es/(1+Math.sqrt(1-this.es)),e=e/(2-e),t=e,e=(this.cgb[0]=e*(2+e*(-2/3+e*(e*(116/45+e*(26/45+-2854/675*e))-2))),this.cbg[0]=e*(e*(2/3+e*(4/3+e*(-82/45+e*(32/45+4642/4725*e))))-2),this.cgb[1]=(t*=e)*(7/3+e*(e*(-227/45+e*(2704/315+2323/945*e))-1.6)),this.cbg[1]=t*(5/3+e*(-16/15+e*(-13/9+e*(904/315+-1522/945*e)))),this.cgb[2]=(t*=e)*(56/15+e*(-136/35+e*(-1262/105+73814/2835*e))),this.cbg[2]=t*(-26/15+e*(34/21+e*(1.6+-12686/2835*e))),this.cgb[3]=(t*=e)*(4279/630+e*(-332/35+-399572/14175*e)),this.cbg[3]=t*(1237/630+e*(-24832/14175*e-2.4)),this.cgb[4]=(t*=e)*(4174/315+-144838/6237*e),this.cbg[4]=t*(-734/315+109598/31185*e),this.cgb[5]=601676/22275*(t*=e),this.cbg[5]=444337/155925*t,t=Math.pow(e,2),this.Qn=this.k0/(1+e)*(1+t*(.25+t*(1/64+t/256))),this.utg[0]=e*(e*(2/3+e*(-37/96+e*(1/360+e*(81/512+-96199/604800*e))))-.5),this.gtu[0]=e*(.5+e*(-2/3+e*(5/16+e*(41/180+e*(-127/288+7891/37800*e))))),this.utg[1]=t*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+1118711/3870720*e)))),this.gtu[1]=t*(13/48+e*(e*(557/1440+e*(281/630+-1983433/1935360*e))-.6)),this.utg[2]=(t*=e)*(-17/480+e*(37/840+e*(209/4480+-5569/90720*e))),this.gtu[2]=t*(61/240+e*(-103/140+e*(15061/26880+167603/181440*e))),this.utg[3]=(t*=e)*(-4397/161280+e*(11/504+830251/7257600*e)),this.gtu[3]=t*(49561/161280+e*(-179/168+6601661/7257600*e)),this.utg[4]=(t*=e)*(-4583/161280+108847/3991680*e),this.gtu[4]=t*(34729/80640+-3418889/1995840*e),this.utg[5]=-.03233083094085698*(t*=e),this.gtu[5]=.6650675310896665*t,Ge(this.cbg,this.lat0));this.Zb=-this.Qn*(e+function(e,t){for(var r,n=2*Math.cos(t),i=e.length-1,o=e[i],a=0;0<=--i;)r=n*o-a+e[i],a=o,o=r;return Math.sin(t)*r}(this.gtu,2*e))},forward:function(e){var t,r=O(e.x-this.long0),n=e.y,n=Ge(this.cbg,n),i=Math.sin(n),o=Math.cos(n),a=Math.sin(r),s=Math.cos(r);n=Math.atan2(i,s*o),r=Math.atan2(a*o,d(i,o*s)),a=Math.tan(r),i=Math.abs(a),o=i*(1+i/(d(1,i)+1)),i=0==(t=(s=1+o)-1)?o:o*Math.log(s)/t;var u,o=Ue(this.gtu,2*n,2*(r=a<0?-i:i));return n+=o[0],r+=o[1],s=Math.abs(r)<=2.623395162778?(u=this.a*(this.Qn*r)+this.x0,this.a*(this.Qn*n+this.Zb)+this.y0):u=1/0,e.x=u,e.y=s,e},inverse:function(e){var t,r,n,i,o=(e.x-this.x0)*(1/this.a),a=(e.y-this.y0)*(1/this.a);return a=(a-this.Zb)/this.Qn,o/=this.Qn,i=Math.abs(o)<=2.623395162778?(a+=(n=Ue(this.utg,2*a,2*o))[0],o+=n[1],o=Math.atan(Ne(o)),n=Math.sin(a),t=Math.cos(a),i=Math.sin(o),r=Math.cos(o),a=Math.atan2(n*r,d(i,r*t)),o=Math.atan2(i,r*t),n=O(o+this.long0),Ge(this.cgb,a)):n=1/0,e.x=n,e.y=i,e},names:["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","Gauss Kruger","Gauss_Kruger","tmerc"]},Ze={init:function(){var e=function(e,t){if(void 0===e){if((e=Math.floor(30*(O(t)+Math.PI)/Math.PI)+1)<0)return 0;if(60<e)return 60}return e}(this.zone,this.long0);if(void 0===e)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(e)-183)*_,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,Je.init.apply(this),this.forward=Je.forward,this.inverse=Je.inverse},names:["Universal Transverse Mercator System","utm"],dependsOn:"etmerc"},$e={init:function(){var e=Math.sin(this.lat0),t=Math.cos(this.lat0);t*=t,this.rc=Math.sqrt(1-this.es)/(1-this.es*e*e),this.C=Math.sqrt(1+this.es*t*t/(1-this.es)),this.phic0=Math.asin(e/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+C)/(Math.pow(Math.tan(.5*this.lat0+C),this.C)*ze(this.e*e,this.ratexp))},forward:function(e){var t=e.x,r=e.y;return e.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*r+C),this.C)*ze(this.e*Math.sin(r),this.ratexp))-y,e.x=this.C*t,e},inverse:function(e){for(var t=e.x/this.C,r=e.y,n=Math.pow(Math.tan(.5*r+C)/this.K,1/this.C),i=20;0<i&&(r=2*Math.atan(n*ze(this.e*Math.sin(e.y),-.5*this.e))-y,!(Math.abs(r-e.y)<1e-14));--i)e.y=r;return i?(e.x=t,e.y=r,e):null},names:["gauss"]},et={init:function(){$e.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))},forward:function(e){var t,r,n,i;return e.x=O(e.x-this.long0),$e.forward.apply(this,[e]),t=Math.sin(e.y),r=Math.cos(e.y),n=Math.cos(e.x),i=this.k0*this.R2/(1+this.sinc0*t+this.cosc0*r*n),e.x=i*r*Math.sin(e.x),e.y=i*(this.cosc0*t-this.sinc0*r*n),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e},inverse:function(e){var t,r,n,i;return e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,e.x/=this.k0,e.y/=this.k0,i=(i=d(e.x,e.y))?(r=2*Math.atan2(i,this.R2),t=Math.sin(r),r=Math.cos(r),n=Math.asin(r*this.sinc0+e.y*t*this.cosc0/i),Math.atan2(e.x*t,i*this.cosc0*r-e.y*this.sinc0*t)):(n=this.phic0,0),e.x=i,e.y=n,$e.inverse.apply(this,[e]),e.x=O(e.x+this.long0),e},names:["Stereographic_North_Pole","Oblique_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"]},tt={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=b&&(this.k0=.5*(1+ne(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=b&&(0<this.lat0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=b&&Math.abs(Math.cos(this.lat_ts))>b&&(this.k0=.5*this.cons*a(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/x(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=a(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-y,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))},forward:function(e){var t,r,n=e.x,i=e.y,o=Math.sin(i),a=Math.cos(i),s=O(n-this.long0);return Math.abs(Math.abs(n-this.long0)-Math.PI)<=b&&Math.abs(i+this.lat0)<=b?(e.x=NaN,e.y=NaN):this.sphere?(t=2*this.k0/(1+this.sinlat0*o+this.coslat0*a*Math.cos(s)),e.x=this.a*t*a*Math.sin(s)+this.x0,e.y=this.a*t*(this.coslat0*o-this.sinlat0*a*Math.cos(s))+this.y0):(a=2*Math.atan(this.ssfn_(i,o,this.e))-y,r=Math.cos(a),a=Math.sin(a),Math.abs(this.coslat0)<=b?(i=x(this.e,i*this.con,this.con*o),o=2*this.a*this.k0*i/this.cons,e.x=this.x0+o*Math.sin(n-this.long0),e.y=this.y0-this.con*o*Math.cos(n-this.long0)):(Math.abs(this.sinlat0)<b?(t=2*this.a*this.k0/(1+r*Math.cos(s)),e.y=t*a):(t=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*a+this.cosX0*r*Math.cos(s))),e.y=t*(this.cosX0*a-this.sinX0*r*Math.cos(s))+this.y0),e.x=t*r*Math.sin(s)+this.x0)),e},inverse:function(e){e.x-=this.x0,e.y-=this.y0;var t,r,n,i,o=Math.sqrt(e.x*e.x+e.y*e.y);if(this.sphere)r=2*Math.atan(o/(2*this.a*this.k0)),n=this.long0,i=this.lat0,o<=b||(i=Math.asin(Math.cos(r)*this.sinlat0+e.y*Math.sin(r)*this.coslat0/o),n=Math.abs(this.coslat0)<b?0<this.lat0?O(this.long0+Math.atan2(e.x,-1*e.y)):O(this.long0+Math.atan2(e.x,e.y)):O(this.long0+Math.atan2(e.x*Math.sin(r),o*this.coslat0*Math.cos(r)-e.y*this.sinlat0*Math.sin(r))));else if(Math.abs(this.coslat0)<=b){if(o<=b)return i=this.lat0,n=this.long0,e.x=n,e.y=i,e;e.x*=this.con,e.y*=this.con,r=o*this.cons/(2*this.a*this.k0),i=this.con*ie(this.e,r),n=this.con*O(this.con*this.long0+Math.atan2(e.x,-1*e.y))}else r=2*Math.atan(o*this.cosX0/(2*this.a*this.k0*this.ms1)),n=this.long0,o<=b?t=this.X0:(t=Math.asin(Math.cos(r)*this.sinX0+e.y*Math.sin(r)*this.cosX0/o),n=O(this.long0+Math.atan2(e.x*Math.sin(r),o*this.cosX0*Math.cos(r)-e.y*this.sinX0*Math.sin(r)))),i=-1*ie(this.e,Math.tan(.5*(y+t)));return e.x=n,e.y=i,e},names:["stere","Stereographic_South_Pole","Polar Stereographic (variant B)","Polar_Stereographic"],ssfn_:function(e,t,r){return t*=r,Math.tan(.5*(y+e))*Math.pow((1-t)/(1+t),.5*r)}},rt={init:function(){var e=this.lat0,t=(this.lambda0=this.long0,Math.sin(e)),r=this.a,n=1/this.rf,n=2*n-Math.pow(n,2),i=this.e=Math.sqrt(n),r=(this.R=this.k0*r*Math.sqrt(1-n)/(1-n*Math.pow(t,2)),this.alpha=Math.sqrt(1+n/(1-n)*Math.pow(Math.cos(e),4)),this.b0=Math.asin(t/this.alpha),Math.log(Math.tan(Math.PI/4+this.b0/2))),n=Math.log(Math.tan(Math.PI/4+e/2)),e=Math.log((1+i*t)/(1-i*t));this.K=r-this.alpha*n+this.alpha*i/2*e},forward:function(e){var t=Math.log(Math.tan(Math.PI/4-e.y/2)),r=this.e/2*Math.log((1+this.e*Math.sin(e.y))/(1-this.e*Math.sin(e.y))),t=-this.alpha*(t+r)+this.K,r=2*(Math.atan(Math.exp(t))-Math.PI/4),t=this.alpha*(e.x-this.lambda0),n=Math.atan(Math.sin(t)/(Math.sin(this.b0)*Math.tan(r)+Math.cos(this.b0)*Math.cos(t))),r=Math.asin(Math.cos(this.b0)*Math.sin(r)-Math.sin(this.b0)*Math.cos(r)*Math.cos(t));return e.y=this.R/2*Math.log((1+Math.sin(r))/(1-Math.sin(r)))+this.y0,e.x=this.R*n+this.x0,e},inverse:function(e){for(var t,r=e.x-this.x0,n=e.y-this.y0,r=r/this.R,n=2*(Math.atan(Math.exp(n/this.R))-Math.PI/4),i=Math.asin(Math.cos(this.b0)*Math.sin(n)+Math.sin(this.b0)*Math.cos(n)*Math.cos(r)),r=Math.atan(Math.sin(r)/(Math.cos(this.b0)*Math.cos(r)-Math.sin(this.b0)*Math.tan(n))),n=this.lambda0+r/this.alpha,o=i,a=-1e3,s=0;1e-7<Math.abs(o-a);){if(20<++s)return;t=1/this.alpha*(Math.log(Math.tan(Math.PI/4+i/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(o))/2)),a=o,o=2*Math.atan(Math.exp(t))-Math.PI/2}return e.x=n,e.y=o,e},names:["somerc"]},nt={init:function(){var e,t,r,n,i,o=0,a=0,s=0,u=0,l=0,c=0,f=0,h=(this.no_off=(h="object"===Kt(this.PROJECTION)?Object.keys(this.PROJECTION)[0]:this.PROJECTION,"no_uoff"in this||"no_off"in this||-1!==["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"].indexOf(h)),this.no_rot="no_rot"in this,!1),p=("alpha"in this&&(h=!0),!1);if("rectified_grid_angle"in this&&(p=!0),h&&(f=this.alpha),p&&(o=this.rectified_grid_angle*_),h||p)a=this.longc;else if(s=this.long1,l=this.lat1,u=this.long2,c=this.lat2,Math.abs(l-c)<=1e-7||(e=Math.abs(l))<=1e-7||Math.abs(e-y)<=1e-7||Math.abs(Math.abs(this.lat0)-y)<=1e-7||Math.abs(Math.abs(c)-y)<=1e-7)throw new Error;var d=1-this.es,g=Math.sqrt(d);Math.abs(this.lat0)>b?(n=Math.sin(this.lat0),t=Math.cos(this.lat0),e=1-this.es*n*n,this.B=t*t,this.B=Math.sqrt(1+this.es*this.B*this.B/d),this.A=this.B*this.k0*g/e,(r=(t=this.B*g/(t*Math.sqrt(e)))*t-1)<=0?r=0:(r=Math.sqrt(r),this.lat0<0&&(r=-r)),this.E=r+=t,this.E*=Math.pow(x(this.e,this.lat0,n),this.B)):(this.B=1/g,this.A=this.k0,this.E=t=r=1),h||p?(h?(i=Math.asin(Math.sin(f)/t),p||(o=f)):(i=o,f=Math.asin(t*Math.sin(i))),this.lam0=a-Math.asin(.5*(r-1/r)*Math.tan(i))/this.B):(d=Math.pow(x(this.e,l,Math.sin(l)),this.B),n=Math.pow(x(this.e,c,Math.sin(c)),this.B),r=this.E/d,g=(n-d)/(n+d),h=((h=this.E*this.E)-n*d)/(h+n*d),(e=s-u)<-Math.pi?u-=I:e>Math.pi&&(u+=I),this.lam0=O(.5*(s+u)-Math.atan(h*Math.tan(.5*this.B*(s-u))/g)/this.B),i=Math.atan(2*Math.sin(this.B*O(s-this.lam0))/(r-1/r)),o=f=Math.asin(t*Math.sin(i))),this.singam=Math.sin(i),this.cosgam=Math.cos(i),this.sinrot=Math.sin(o),this.cosrot=Math.cos(o),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(t*t-1)/Math.cos(f))),this.lat0<0&&(this.u_0=-this.u_0)),r=.5*i,this.v_pole_n=this.ArB*Math.log(Math.tan(C-r)),this.v_pole_s=this.ArB*Math.log(Math.tan(C+r))},forward:function(e){var t,r,n,i,o={};if(e.x=e.x-this.lam0,Math.abs(Math.abs(e.y)-y)>b){if(n=.5*((i=this.E/Math.pow(x(this.e,e.y,Math.sin(e.y)),this.B))-(r=1/i)),i=.5*(i+r),t=Math.sin(this.B*e.x),i=(n*this.singam-t*this.cosgam)/i,Math.abs(Math.abs(i)-1)<b)throw new Error;i=.5*this.ArB*Math.log((1-i)/(1+i)),r=Math.cos(this.B*e.x),n=Math.abs(r)<1e-7?this.A*e.x:this.ArB*Math.atan2(n*this.cosgam+t*this.singam,r)}else i=0<e.y?this.v_pole_n:this.v_pole_s,n=this.ArB*e.y;return this.no_rot?(o.x=n,o.y=i):(n-=this.u_0,o.x=i*this.cosrot+n*this.sinrot,o.y=n*this.cosrot-i*this.sinrot),o.x=this.a*o.x+this.x0,o.y=this.a*o.y+this.y0,o},inverse:function(e){var t,r,n,i={};if(e.x=(e.x-this.x0)*(1/this.a),e.y=(e.y-this.y0)*(1/this.a),e=this.no_rot?(n=e.y,e.x):(n=e.x*this.cosrot-e.y*this.sinrot,e.y*this.cosrot+e.x*this.sinrot+this.u_0),t=.5*((n=Math.exp(-this.BrA*n))-1/n),n=.5*(n+1/n),n=((r=Math.sin(this.BrA*e))*this.cosgam+t*this.singam)/n,Math.abs(Math.abs(n)-1)<b)i.x=0,i.y=n<0?-y:y;else{if(i.y=this.E/Math.sqrt((1+n)/(1-n)),i.y=ie(this.e,Math.pow(i.y,1/this.B)),i.y===1/0)throw new Error;i.x=-this.rB*Math.atan2(t*this.cosgam-r*this.singam,Math.cos(this.BrA*e))}return i.x+=this.lam0,i},names:["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"]},it={init:function(){var e,t,r,n,i,o;this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,Math.abs(this.lat1+this.lat2)<b||(e=this.b/this.a,this.e=Math.sqrt(1-e*e),e=Math.sin(this.lat1),t=Math.cos(this.lat1),t=a(this.e,e,t),r=x(this.e,this.lat1,e),i=Math.sin(this.lat2),n=Math.cos(this.lat2),n=a(this.e,i,n),i=x(this.e,this.lat2,i),o=x(this.e,this.lat0,Math.sin(this.lat0)),Math.abs(this.lat1-this.lat2)>b?this.ns=Math.log(t/n)/Math.log(r/i):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=t/(this.ns*Math.pow(r,this.ns)),this.rh=this.a*this.f0*Math.pow(o,this.ns),this.title)||(this.title="Lambert Conformal Conic")},forward:function(e){var t=e.x,r=e.y;Math.abs(2*Math.abs(r)-Math.PI)<=b&&(r=ne(r)*(y-2*b));var n,i=Math.abs(Math.abs(r)-y);if(b<i)i=x(this.e,r,Math.sin(r)),n=this.a*this.f0*Math.pow(i,this.ns);else{if(r*this.ns<=0)return null;n=0}i=this.ns*O(t-this.long0);return e.x=this.k0*(n*Math.sin(i))+this.x0,e.y=this.k0*(this.rh-n*Math.cos(i))+this.y0,e},inverse:function(e){var t,r,n=(e.x-this.x0)/this.k0,i=this.rh-(e.y-this.y0)/this.k0,o=0<this.ns?(t=Math.sqrt(n*n+i*i),1):(t=-Math.sqrt(n*n+i*i),-1),a=0;if(0!==t&&(a=Math.atan2(o*n,o*i)),0!==t||0<this.ns){if(o=1/this.ns,n=Math.pow(t/(this.a*this.f0),o),-9999===(r=ie(this.e,n)))return null}else r=-y;return i=O(a/this.ns+this.long0),e.x=i,e.y=r,e},names:["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"]},ot={init:function(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq},forward:function(e){var t=e.x,r=e.y,t=O(t-this.long0),n=Math.pow((1+this.e*Math.sin(r))/(1-this.e*Math.sin(r)),this.alfa*this.e/2),r=2*(Math.atan(this.k*Math.pow(Math.tan(r/2+this.s45),this.alfa)/n)-this.s45),n=-t*this.alfa,t=Math.asin(Math.cos(this.ad)*Math.sin(r)+Math.sin(this.ad)*Math.cos(r)*Math.cos(n)),r=Math.asin(Math.cos(r)*Math.sin(n)/Math.cos(t)),n=this.n*r,r=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(t/2+this.s45),this.n);return e.y=r*Math.cos(n),e.x=r*Math.sin(n),this.czech||(e.y*=-1,e.x*=-1),e},inverse:function(e){for(var t,r,n,i,o=e.x,a=(e.x=e.y,e.y=o,this.czech||(e.y*=-1,e.x*=-1),o=Math.sqrt(e.x*e.x+e.y*e.y),r=Math.atan2(e.y,e.x)/Math.sin(this.s0),o=2*(Math.atan(Math.pow(this.ro0/o,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),t=Math.asin(Math.cos(this.ad)*Math.sin(o)-Math.sin(this.ad)*Math.cos(o)*Math.cos(r)),o=Math.asin(Math.cos(o)*Math.sin(r)/Math.cos(t)),e.x=this.long0-o/this.alfa,n=t,i=0);e.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(t/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(n))/(1-this.e*Math.sin(n)),this.e/2))-this.s45),Math.abs(n-e.y)<1e-10&&(i=1),n=e.y,a+=1,0===i&&a<15;);return 15<=a?null:e},names:["Krovak","krovak"]},at={init:function(){this.sphere||(this.e0=qe(this.es),this.e1=He(this.es),this.e2=We(this.es),this.e3=Ye(this.es),this.ml0=this.a*g(this.e0,this.e1,this.e2,this.e3,this.lat0))},forward:function(e){var t,r,n,i,o,a,s=e.x,u=e.y,s=O(s-this.long0);return u=this.sphere?(a=this.a*Math.asin(Math.cos(u)*Math.sin(s)),this.a*(Math.atan2(Math.tan(u),Math.cos(s))-this.lat0)):(t=Math.sin(u),r=Math.cos(u),n=B(this.a,this.e,t),i=Math.tan(u)*Math.tan(u),a=n*(s=s*Math.cos(u))*(1-(s=s*s)*i*(1/6-(8-i+8*(o=this.es*r*r/(1-this.es)))*s/120)),this.a*g(this.e0,this.e1,this.e2,this.e3,u)-this.ml0+n*t/r*s*(.5+(5-i+6*o)*s/24)),e.x=a+this.x0,e.y=u+this.y0,e},inverse:function(e){e.x-=this.x0,e.y-=this.y0;var t=e.x/this.a,r=e.y/this.a;if(this.sphere)var n=r+this.lat0,i=Math.asin(Math.sin(n)*Math.cos(t)),n=Math.atan2(Math.tan(t),Math.cos(n));else{var o=this.ml0/this.a+r,o=Ve(o,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(o)-y)<=b)return e.x=this.long0,e.y=y,r<0&&(e.y*=-1),e;var r=B(this.a,this.e,Math.sin(o)),a=r*r*r/this.a/this.a*(1-this.es),s=Math.pow(Math.tan(o),2),t=t*this.a/r,u=t*t;i=o-r*Math.tan(o)/a*t*t*(.5-(1+3*s)*t*t/24),n=t*(1-u*(s/3+(1+3*s)*s*u/15))/Math.cos(o)}return e.x=O(n+this.long0),e.y=T(i),e},names:["Cassini","Cassini_Soldner","cass"]},st={init:function(){var e,t,r,n=Math.abs(this.lat0);if(Math.abs(n-y)<b?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(n)<b?this.mode=this.EQUIT:this.mode=this.OBLIQ,0<this.es)switch(this.qp=M(this.e,1),this.mmf=.5/(1-this.es),this.apa=(n=this.es,r=[],r[0]=.3333333333333333*n,r[0]+=.17222222222222222*(t=n*n),r[1]=.06388888888888888*t,r[0]+=.10257936507936508*(t*=n),r[1]+=.0664021164021164*t,r[2]=.016415012942191543*t,r),this.mode){case this.N_POLE:case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),e=Math.sin(this.lat0),this.sinb1=M(this.e,e)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*e*e)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))},forward:function(e){var t,r,n,i,o,a,s,u,l,c,f=e.x,h=e.y,f=O(f-this.long0);if(this.sphere){if(o=Math.sin(h),c=Math.cos(h),n=Math.cos(f),this.mode===this.OBLIQ||this.mode===this.EQUIT){if((r=this.mode===this.EQUIT?1+c*n:1+this.sinph0*o+this.cosph0*c*n)<=b)return null;t=(r=Math.sqrt(2/r))*c*Math.sin(f),r*=this.mode===this.EQUIT?o:this.cosph0*o-this.sinph0*c*n}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(n=-n),Math.abs(h+this.lat0)<b)return null;r=C-.5*h,t=(r=2*(this.mode===this.S_POLE?Math.cos(r):Math.sin(r)))*Math.sin(f),r*=n}}else{switch(l=u=s=0,n=Math.cos(f),i=Math.sin(f),o=Math.sin(h),a=M(this.e,o),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(s=a/this.qp,u=Math.sqrt(1-s*s)),this.mode){case this.OBLIQ:l=1+this.sinb1*s+this.cosb1*u*n;break;case this.EQUIT:l=1+u*n;break;case this.N_POLE:l=y+h,a=this.qp-a;break;case this.S_POLE:l=h-y,a=this.qp+a}if(Math.abs(l)<b)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:l=Math.sqrt(2/l),r=this.mode===this.OBLIQ?this.ymf*l*(this.cosb1*s-this.sinb1*u*n):(l=Math.sqrt(2/(1+u*n)))*s*this.ymf,t=this.xmf*l*u*i;break;case this.N_POLE:case this.S_POLE:0<=a?(t=(l=Math.sqrt(a))*i,r=n*(this.mode===this.S_POLE?l:-l)):t=r=0}}return e.x=this.a*t+this.x0,e.y=this.a*r+this.y0,e},inverse:function(e){e.x-=this.x0,e.y-=this.y0;var t,r,n,i,o,a,s,u=e.x/this.a,l=e.y/this.a;if(this.sphere){var c,f=0,h=0;if(1<(r=.5*(c=Math.sqrt(u*u+l*l))))return null;switch(r=2*Math.asin(r),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(h=Math.sin(r),f=Math.cos(r)),this.mode){case this.EQUIT:r=Math.abs(c)<=b?0:Math.asin(l*h/c),u*=h,l=f*c;break;case this.OBLIQ:r=Math.abs(c)<=b?this.lat0:Math.asin(f*this.sinph0+l*h*this.cosph0/c),u*=h*this.cosph0,l=(f-Math.sin(r)*this.sinph0)*c;break;case this.N_POLE:l=-l,r=y-r;break;case this.S_POLE:r-=y}t=0!==l||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(u,l):0}else{if(i=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(u/=this.dd,l*=this.dd,(s=Math.sqrt(u*u+l*l))<b)return e.x=this.long0,e.y=this.lat0,e;o=2*Math.asin(.5*s/this.rq),a=Math.cos(o),u*=o=Math.sin(o),l=this.mode===this.OBLIQ?(i=a*this.sinb1+l*o*this.cosb1/s,n=this.qp*i,s*this.cosb1*a-l*this.sinb1*o):(n=this.qp*(i=l*o/s),s*a)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(!(n=u*u+(l=this.mode===this.N_POLE?-l:l)*l))return e.x=this.long0,e.y=this.lat0,e;i=1-n/this.qp,this.mode===this.S_POLE&&(i=-i)}t=Math.atan2(u,l),s=(o=Math.asin(i))+o,r=o+(a=this.apa)[0]*Math.sin(s)+a[1]*Math.sin(s+s)+a[2]*Math.sin(s+s+s)}return e.x=O(this.long0+t),e.y=r,e},names:["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],S_POLE:1,N_POLE:2,EQUIT:3,OBLIQ:4},ut={init:function(){Math.abs(this.lat1+this.lat2)<b||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=a(this.e3,this.sin_po,this.cos_po),this.qs1=M(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=a(this.e3,this.sin_po,this.cos_po),this.qs2=M(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=M(this.e3,this.sin_po),Math.abs(this.lat1-this.lat2)>b?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)},forward:function(e){var t=e.x,r=e.y,r=(this.sin_phi=Math.sin(r),this.cos_phi=Math.cos(r),M(this.e3,this.sin_phi)),r=this.a*Math.sqrt(this.c-this.ns0*r)/this.ns0,t=this.ns0*O(t-this.long0),n=r*Math.sin(t)+this.x0,r=this.rh-r*Math.cos(t)+this.y0;return e.x=n,e.y=r,e},inverse:function(e){var t,r,n;return e.x-=this.x0,e.y=this.rh-e.y+this.y0,n=0<=this.ns0?(r=Math.sqrt(e.x*e.x+e.y*e.y),1):(r=-Math.sqrt(e.x*e.x+e.y*e.y),-1),(t=0)!==r&&(t=Math.atan2(n*e.x,n*e.y)),n=r*this.ns0/this.a,n=this.sphere?Math.asin((this.c-n*n)/(2*this.ns0)):(r=(this.c-n*n)/this.ns0,this.phi1z(this.e3,r)),r=O(t/this.ns0+this.long0),e.x=r,e.y=n,e},names:["Albers_Conic_Equal_Area","Albers","aea"],phi1z:function(e,t){var r,n,i,o=R(.5*t);if(e<b)return o;for(var a=e*e,s=1;s<=25;s++)if(o+=i=.5*(n=1-(r=e*(i=Math.sin(o)))*r)*n/Math.cos(o)*(t/(1-a)-i/n+.5/e*Math.log((1-r)/(1+r))),Math.abs(i)<=1e-7)return o;return null}},lt={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1},forward:function(e){var t,r=e.x,n=e.y,r=O(r-this.long0),i=Math.sin(n),n=Math.cos(n),o=Math.cos(r),a=0<(a=this.sin_p14*i+this.cos_p14*n*o)||Math.abs(a)<=b?(t=this.x0+ +this.a*n*Math.sin(r)/a,this.y0+ +this.a*(this.cos_p14*i-this.sin_p14*n*o)/a):(t=this.x0+this.infinity_dist*n*Math.sin(r),this.y0+this.infinity_dist*(this.cos_p14*i-this.sin_p14*n*o));return e.x=t,e.y=a,e},inverse:function(e){var t,r,n,i;return e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,e.x/=this.k0,e.y/=this.k0,n=(t=Math.sqrt(e.x*e.x+e.y*e.y))?(n=Math.atan2(t,this.rc),r=Math.sin(n),n=Math.cos(n),i=R(n*this.sin_p14+e.y*r*this.cos_p14/t),n=Math.atan2(e.x*r,t*this.cos_p14*n-e.y*this.sin_p14*r),O(this.long0+n)):(i=this.phic0,0),e.x=n,e.y=i,e},names:["gnom"]},ct={init:function(){this.sphere||(this.k0=a(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))},forward:function(e){var t,r=e.x,n=e.y,r=O(r-this.long0);return r=this.sphere?(t=this.x0+this.a*r*Math.cos(this.lat_ts),this.y0+this.a*Math.sin(n)/Math.cos(this.lat_ts)):(n=M(this.e,Math.sin(n)),t=this.x0+this.a*this.k0*r,this.y0+this.a*n*.5/this.k0),e.x=t,e.y=r,e},inverse:function(e){var t,r;return e.x-=this.x0,e.y-=this.y0,this.sphere?(t=O(this.long0+e.x/this.a/Math.cos(this.lat_ts)),r=Math.asin(e.y/this.a*Math.cos(this.lat_ts))):(r=function(e,t){var r=1-(1-e*e)/(2*e)*Math.log((1-e)/(1+e));if(Math.abs(Math.abs(t)-r)<1e-6)return t<0?-1*y:y;for(var n,i,o,a=Math.asin(.5*t),s=0;s<30;s++)if(n=Math.sin(a),i=Math.cos(a),o=e*n,a+=i=Math.pow(1-o*o,2)/(2*i)*(t/(1-e*e)-n/(1-o*o)+.5/e*Math.log((1-o)/(1+o))),Math.abs(i)<=1e-10)return a;return NaN}(this.e,2*e.y*this.k0/this.a),t=O(this.long0+e.x/(this.a*this.k0))),e.x=t,e.y=r,e},names:["cea"]},ft={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)},forward:function(e){var t=e.x,r=e.y,t=O(t-this.long0),r=T(r-this.lat0);return e.x=this.x0+this.a*t*this.rc,e.y=this.y0+this.a*r,e},inverse:function(e){var t=e.x,r=e.y;return e.x=O(this.long0+(t-this.x0)/(this.a*this.rc)),e.y=T(this.lat0+(r-this.y0)/this.a),e},names:["Equirectangular","Equidistant_Cylindrical","eqc"]},ht={init:function(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=qe(this.es),this.e1=He(this.es),this.e2=We(this.es),this.e3=Ye(this.es),this.ml0=this.a*g(this.e0,this.e1,this.e2,this.e3,this.lat0)},forward:function(e){var t,r=e.x,n=e.y,r=O(r-this.long0),i=r*Math.sin(n);return n=this.sphere?Math.abs(n)<=b?(t=this.a*r,-1*this.a*this.lat0):(t=this.a*Math.sin(i)/Math.tan(n),this.a*(T(n-this.lat0)+(1-Math.cos(i))/Math.tan(n))):Math.abs(n)<=b?(t=this.a*r,-1*this.ml0):(t=(r=B(this.a,this.e,Math.sin(n))/Math.tan(n))*Math.sin(i),this.a*g(this.e0,this.e1,this.e2,this.e3,n)-this.ml0+r*(1-Math.cos(i))),e.x=t+this.x0,e.y=n+this.y0,e},inverse:function(e){var t,r,n,i,o,a,s=e.x-this.x0,u=e.y-this.y0;if(this.sphere)if(Math.abs(u+this.a*this.lat0)<=b)t=O(s/this.a+this.long0),r=0;else{for(var l,c=this.lat0+u/this.a,f=s*s/this.a/this.a+c*c,h=c,p=20;p;--p)if(h+=n=-1*(c*(h*(l=Math.tan(h))+1)-h-.5*(h*h+f)*l)/((h-c)/l-1),Math.abs(n)<=b){r=h;break}t=O(this.long0+Math.asin(s*Math.tan(h)/this.a)/Math.sin(r))}else if(Math.abs(u+this.ml0)<=b)r=0,t=O(this.long0+s/this.a);else{for(c=(this.ml0+u)/this.a,f=s*s/this.a/this.a+c*c,h=c,p=20;p;--p)if(a=this.e*Math.sin(h),i=Math.sqrt(1-a*a)*Math.tan(h),a=this.a*g(this.e0,this.e1,this.e2,this.e3,h),o=this.e0-2*this.e1*Math.cos(2*h)+4*this.e2*Math.cos(4*h)-6*this.e3*Math.cos(6*h),h-=n=(c*(i*(a=a/this.a)+1)-a-.5*i*(a*a+f))/(this.es*Math.sin(2*h)*(a*a+f-2*c*a)/(4*i)+(c-a)*(i*o-2/Math.sin(2*h))-o),Math.abs(n)<=b){r=h;break}i=Math.sqrt(1-this.es*Math.pow(Math.sin(r),2))*Math.tan(r),t=O(this.long0+Math.asin(s*i/this.a)/Math.sin(r))}return e.x=t,e.y=r,e},names:["Polyconic","poly"]},pt={init:function(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013},forward:function(e){for(var t=e.x,r=e.y-this.lat0,t=t-this.long0,n=r/E*1e-5,r=t,i=1,o=0,a=1;a<=10;a++)o+=this.A[a]*(i*=n);var s,u=o,l=r,c=1,f=0,h=0,p=0;for(a=1;a<=6;a++)s=f*u+c*l,h=h+this.B_re[a]*(c=c*u-f*l)-this.B_im[a]*(f=s),p=p+this.B_im[a]*c+this.B_re[a]*f;return e.x=p*this.a+this.x0,e.y=h*this.a+this.y0,e},inverse:function(e){var t,r=e.x,n=e.y,r=r-this.x0,i=(n-this.y0)/this.a,o=r/this.a,a=1,s=0,u=0,l=0;for(y=1;y<=6;y++)t=s*i+a*o,u=u+this.C_re[y]*(a=a*i-s*o)-this.C_im[y]*(s=t),l=l+this.C_im[y]*a+this.C_re[y]*s;for(var c=0;c<this.iterations;c++){for(var f,h=u,p=l,d=i,g=o,y=2;y<=6;y++)f=p*u+h*l,h=h*u-p*l,p=f,d+=(y-1)*(this.B_re[y]*h-this.B_im[y]*p),g+=(y-1)*(this.B_im[y]*h+this.B_re[y]*p);var h=1,p=0,A=this.B_re[1],m=this.B_im[1];for(y=2;y<=6;y++)f=p*u+h*l,h=h*u-p*l,p=f,A+=y*(this.B_re[y]*h-this.B_im[y]*p),m+=y*(this.B_im[y]*h+this.B_re[y]*p);var v=A*A+m*m,u=(d*A+g*m)/v,l=(g*A-d*m)/v}var b=u,n=l,_=1,w=0;for(y=1;y<=9;y++)w+=this.D[y]*(_*=b);r=this.lat0+w*E*1e5,n=this.long0+n;return e.x=n,e.y=r,e},names:["New_Zealand_Map_Grid","nzmg"]},dt={init:function(){},forward:function(e){var t=e.x,r=e.y,t=O(t-this.long0),t=this.x0+this.a*t,r=this.y0+this.a*Math.log(Math.tan(Math.PI/4+r/2.5))*1.25;return e.x=t,e.y=r,e},inverse:function(e){e.x-=this.x0,e.y-=this.y0;var t=O(this.long0+e.x/this.a),r=2.5*(Math.atan(Math.exp(.8*e.y/this.a))-Math.PI/4);return e.x=t,e.y=r,e},names:["Miller_Cylindrical","mill"]},gt={init:function(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=Le(this.es)},forward:function(e){var t=e.x,r=e.y,t=O(t-this.long0);if(this.sphere){if(this.m)for(var n=this.n*Math.sin(r),i=20;i;--i){var o=(this.m*r+Math.sin(r)-n)/(this.m+Math.cos(r));if(r-=o,Math.abs(o)<b)break}else r=1!==this.n?Math.asin(this.n*Math.sin(r)):r;l=this.a*this.C_x*t*(this.m+Math.cos(r)),u=this.a*this.C_y*r}else var a=Math.sin(r),s=Math.cos(r),u=this.a*Qe(r,a,s,this.en),l=this.a*t*s/Math.sqrt(1-this.es*a*a);return e.x=l,e.y=u,e},inverse:function(e){var t,r,n,i;return e.x-=this.x0,n=e.x/this.a,e.y-=this.y0,t=e.y/this.a,this.sphere?(t/=this.C_y,n/=this.C_x*(this.m+Math.cos(t)),this.m?t=R((this.m*t+Math.sin(t))/this.n):1!==this.n&&(t=R(Math.sin(t)/this.n)),n=O(n+this.long0),t=T(t)):(t=Fe(e.y/this.a,this.es,this.en),(i=Math.abs(t))<y?(i=Math.sin(t),r=this.long0+e.x*Math.sqrt(1-this.es*i*i)/(this.a*Math.cos(t)),n=O(r)):i-b<y&&(n=this.long0)),e.x=n,e.y=t,e},names:["Sinusoidal","sinu"]},yt={init:function(){},forward:function(e){for(var t=e.x,r=e.y,t=O(t-this.long0),n=r,i=Math.PI*Math.sin(r);;){var o=-(n+Math.sin(n)-i)/(1+Math.cos(n));if(n+=o,Math.abs(o)<b)break}n/=2,Math.PI/2-Math.abs(r)<b&&(t=0);r=.900316316158*this.a*t*Math.cos(n)+this.x0,t=1.4142135623731*this.a*Math.sin(n)+this.y0;return e.x=r,e.y=t,e},inverse:function(e){e.x-=this.x0,e.y-=this.y0,t=e.y/(1.4142135623731*this.a),.999999999999<Math.abs(t)&&(t=.999999999999),n=Math.asin(t);var t,r=O(this.long0+e.x/(.900316316158*this.a*Math.cos(n))),n=((r=r<-Math.PI?-Math.PI:r)>Math.PI&&(r=Math.PI),t=(2*n+Math.sin(2*n))/Math.PI,1<Math.abs(t)&&(t=1),Math.asin(t));return e.x=r,e.y=n,e},names:["Mollweide","moll"]},At={init:function(){Math.abs(this.lat1+this.lat2)<b||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=qe(this.es),this.e1=He(this.es),this.e2=We(this.es),this.e3=Ye(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=a(this.e,this.sinphi,this.cosphi),this.ml1=g(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<b?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=a(this.e,this.sinphi,this.cosphi),this.ml2=g(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=g(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))},forward:function(e){var t=e.x,r=e.y,t=(r=this.sphere?this.a*(this.g-r):(r=g(this.e0,this.e1,this.e2,this.e3,r),this.a*(this.g-r)),this.ns*O(t-this.long0)),n=this.x0+r*Math.sin(t),r=this.y0+this.rh-r*Math.cos(t);return e.x=n,e.y=r,e},inverse:function(e){e.x-=this.x0,e.y=this.rh-e.y+this.y0,r=0<=this.ns?(t=Math.sqrt(e.x*e.x+e.y*e.y),1):(t=-Math.sqrt(e.x*e.x+e.y*e.y),-1);var t,r,n,i,o=0;return(0!==t&&(o=Math.atan2(r*e.x,r*e.y)),this.sphere)?(i=O(this.long0+o/this.ns),n=T(this.g-t/this.a),e.x=i,e.y=n):(r=this.g-t/this.a,n=Ve(r,this.e0,this.e1,this.e2,this.e3),i=O(this.long0+o/this.ns),e.x=i,e.y=n),e},names:["Equidistant_Conic","eqdc"]},mt={init:function(){this.R=this.a},forward:function(e){var t,r=e.x,n=e.y,r=O(r-this.long0),i=(Math.abs(n)<=b&&(t=this.x0+this.R*r,c=this.y0),R(2*Math.abs(n/Math.PI))),o=((Math.abs(r)<=b||Math.abs(Math.abs(n)-y)<=b)&&(t=this.x0,c=0<=n?this.y0+Math.PI*this.R*Math.tan(.5*i):this.y0+Math.PI*this.R*-Math.tan(.5*i)),.5*Math.abs(Math.PI/r-r/Math.PI)),a=o*o,s=Math.sin(i),i=Math.cos(i),i=i/(s+i-1),s=i*(2/s-1),u=s*s,l=Math.PI*this.R*(o*(i-u)+Math.sqrt(a*(i-u)*(i-u)-(u+a)*(i*i-u)))/(u+a),r=(t=this.x0+(l=r<0?-l:l),a+i),l=Math.PI*this.R*(s*r-o*Math.sqrt((u+a)*(1+a)-r*r))/(u+a),c=0<=n?this.y0+l:this.y0-l;return e.x=t,e.y=c,e},inverse:function(e){var t,r,n,i,o,a,s;return e.x-=this.x0,e.y-=this.y0,s=Math.PI*this.R,n=(t=e.x/s)*t+(r=e.y/s)*r,s=3*(r*r/(o=-2*(a=-Math.abs(r)*(1+n))+1+2*r*r+n*n)+(2*(i=a-2*r*r+t*t)*i*i/o/o/o-9*a*i/o/o)/27)/(a=(a-i*i/3/o)/o)/(a=2*Math.sqrt(-a/3)),1<Math.abs(s)&&(s=0<=s?1:-1),s=Math.acos(s)/3,a=0<=e.y?(-a*Math.cos(s+Math.PI/3)-i/3/o)*Math.PI:-(-a*Math.cos(s+Math.PI/3)-i/3/o)*Math.PI,s=Math.abs(t)<b?this.long0:O(this.long0+Math.PI*(n-1+Math.sqrt(1+2*(t*t-r*r)+n*n))/2/t),e.x=s,e.y=a,e},names:["Van_der_Grinten_I","VanDerGrinten","vandg"]},vt={init:function(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)},forward:function(e){var t,r,n,i,o,a,s,u=e.x,l=e.y,c=Math.sin(e.y),f=Math.cos(e.y),u=O(u-this.long0);return this.sphere?Math.abs(this.sin_p12-1)<=b?(e.x=this.x0+this.a*(y-l)*Math.sin(u),e.y=this.y0-this.a*(y-l)*Math.cos(u)):Math.abs(this.sin_p12+1)<=b?(e.x=this.x0+this.a*(y+l)*Math.sin(u),e.y=this.y0+this.a*(y+l)*Math.cos(u)):(o=this.sin_p12*c+this.cos_p12*f*Math.cos(u),i=(o=Math.acos(o))?o/Math.sin(o):1,e.x=this.x0+this.a*i*f*Math.sin(u),e.y=this.y0+this.a*i*(this.cos_p12*c-this.sin_p12*f*Math.cos(u))):(i=qe(this.es),t=He(this.es),n=We(this.es),s=Ye(this.es),Math.abs(this.sin_p12-1)<=b?(a=this.a*g(i,t,n,s,y),r=this.a*g(i,t,n,s,l),e.x=this.x0+(a-r)*Math.sin(u),e.y=this.y0-(a-r)*Math.cos(u)):Math.abs(this.sin_p12+1)<=b?(a=this.a*g(i,t,n,s,y),r=this.a*g(i,t,n,s,l),e.x=this.x0+(a+r)*Math.sin(u),e.y=this.y0+(a+r)*Math.cos(u)):(i=c/f,t=B(this.a,this.e,this.sin_p12),n=B(this.a,this.e,c),s=Math.atan((1-this.es)*i+this.es*t*this.sin_p12/(n*f)),a=0===(l=Math.atan2(Math.sin(u),this.cos_p12*Math.tan(s)-this.sin_p12*Math.cos(u)))?Math.asin(this.cos_p12*Math.sin(s)-this.sin_p12*Math.cos(s)):Math.abs(Math.abs(l)-Math.PI)<=b?-Math.asin(this.cos_p12*Math.sin(s)-this.sin_p12*Math.cos(s)):Math.asin(Math.sin(u)*Math.cos(s)/Math.sin(l)),r=this.e*this.sin_p12/Math.sqrt(1-this.es),o=t*a*(1-(c=a*a)*(n=(i=this.e*this.cos_p12*Math.cos(l)/Math.sqrt(1-this.es))*i)*(1-n)/6+(f=c*a)/8*(u=r*i)*(1-2*n)+(s=f*a)/120*(n*(4-7*n)-3*r*r*(1-7*n))-s*a/48*u),e.x=this.x0+o*Math.sin(l),e.y=this.y0+o*Math.cos(l))),e},inverse:function(e){var t,r,n,i,o,a,s,u;return e.x-=this.x0,e.y-=this.y0,this.sphere?(u=Math.sqrt(e.x*e.x+e.y*e.y))>2*y*this.a?void 0:(i=u/this.a,s=Math.sin(i),i=Math.cos(i),t=this.long0,Math.abs(u)<=b?r=this.lat0:(r=R(i*this.sin_p12+e.y*s*this.cos_p12/u),a=Math.abs(this.lat0)-y,t=Math.abs(a)<=b?0<=this.lat0?O(this.long0+Math.atan2(e.x,-e.y)):O(this.long0-Math.atan2(-e.x,e.y)):O(this.long0+Math.atan2(e.x*s,u*this.cos_p12*i-e.y*this.sin_p12*s))),e.x=t,e.y=r,e):(a=qe(this.es),i=He(this.es),s=We(this.es),o=Ye(this.es),Math.abs(this.sin_p12-1)<=b?(n=this.a*g(a,i,s,o,y),u=Math.sqrt(e.x*e.x+e.y*e.y),r=Ve((n-u)/this.a,a,i,s,o),t=O(this.long0+Math.atan2(e.x,-1*e.y))):Math.abs(this.sin_p12+1)<=b?(n=this.a*g(a,i,s,o,y),u=Math.sqrt(e.x*e.x+e.y*e.y),r=Ve((u-n)/this.a,a,i,s,o),t=O(this.long0+Math.atan2(e.x,e.y))):(u=Math.sqrt(e.x*e.x+e.y*e.y),n=Math.atan2(e.x,e.y),a=B(this.a,this.e,this.sin_p12),i=Math.cos(n),o=-(s=this.e*this.cos_p12*i)*s/(1-this.es),s=3*this.es*(1-o)*this.sin_p12*this.cos_p12*i/(1-this.es),s=1-o*(a=(u=u/a)-o*(1+o)*Math.pow(u,3)/6-s*(1+3*o)*Math.pow(u,4)/24)*a/2-u*a*a*a/6,o=Math.asin(this.sin_p12*Math.cos(a)+this.cos_p12*Math.sin(a)*i),t=O(this.long0+Math.asin(Math.sin(n)*Math.sin(a)/Math.cos(o))),u=Math.sin(o),r=Math.atan2((u-this.es*s*this.sin_p12)*Math.tan(o),u*(1-this.es))),e.x=t,e.y=r,e)},names:["Azimuthal_Equidistant","aeqd"]},bt={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)},forward:function(e){var t,r,n,i=e.x,o=e.y,i=O(i-this.long0),a=Math.sin(o),o=Math.cos(o),s=Math.cos(i);return(0<(t=this.sin_p14*a+this.cos_p14*o*s)||Math.abs(t)<=b)&&(r=+this.a*o*Math.sin(i),n=this.y0+ +this.a*(this.cos_p14*a-this.sin_p14*o*s)),e.x=r,e.y=n,e},inverse:function(e){var t,r,n,i,o,a;return e.x-=this.x0,e.y-=this.y0,t=Math.sqrt(e.x*e.x+e.y*e.y),n=R(t/this.a),r=Math.sin(n),n=Math.cos(n),o=this.long0,Math.abs(t)<=b?a=this.lat0:(a=R(n*this.sin_p14+e.y*r*this.cos_p14/t),i=Math.abs(this.lat0)-y,o=Math.abs(i)<=b?0<=this.lat0?O(this.long0+Math.atan2(e.x,-e.y)):O(this.long0-Math.atan2(-e.x,e.y)):O(this.long0+Math.atan2(e.x*r,t*this.cos_p14*n-e.y*this.sin_p14*r))),e.x=o,e.y=a,e},names:["ortho"]},_t=1,wt=2,Et=3,Ct=4,It=5,St=6,D=1,L=2,Q=3,F=4;function jt(e,t,r,n){var i;return e<b?(n.value=D,i=0):(i=Math.atan2(t,r),Math.abs(i)<=C?n.value=D:C<i&&i<=y+C?(n.value=L,i-=y):y+C<i||i<=-(y+C)?(n.value=Q,i=0<=i?i-l:i+l):(n.value=F,i+=y)),i}function N(e,t){e+=t;return e<-l?e+=I:l<e&&(e-=I),e}function xt(e,t){return e[0]+t*(e[1]+t*(e[2]+t*e[3]))}var Ot={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=y-C/2?this.face=It:this.lat0<=-(y-C/2)?this.face=St:Math.abs(this.long0)<=C?this.face=_t:Math.abs(this.long0)<=y+C?this.face=0<this.long0?wt:Ct:this.face=Et,0!==this.es&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)},forward:function(e){var t,r,n,i,o,a,s={x:0,y:0},u={value:0};return e.x-=this.long0,o=0!==this.es?Math.atan(this.one_minus_f_squared*Math.tan(e.y)):e.y,n=e.x,this.face===It?(r=y-o,t=C<=n&&n<=y+C?(u.value=D,n-y):y+C<n||n<=-(y+C)?(u.value=L,0<n?n-l:n+l):-(y+C)<n&&n<=-C?(u.value=Q,n+y):(u.value=F,n)):this.face===St?(r=y+o,t=C<=n&&n<=y+C?(u.value=D,-n+y):n<C&&-C<=n?(u.value=L,-n):n<-C&&-(y+C)<=n?(u.value=Q,-n-y):(u.value=F,0<n?l-n:-n-l)):(this.face===wt?n=N(n,+y):this.face===Et?n=N(n,l):this.face===Ct&&(n=N(n,-y)),i=Math.sin(o),o=Math.cos(o),a=Math.sin(n),n=o*Math.cos(n),o=o*a,a=i,this.face===_t?t=jt(r=Math.acos(n),a,o,u):this.face===wt?t=jt(r=Math.acos(o),a,-n,u):this.face===Et?t=jt(r=Math.acos(-n),a,-o,u):this.face===Ct?t=jt(r=Math.acos(-o),a,n,u):(r=t=0,u.value=D)),i=Math.atan(12/l*(t+Math.acos(Math.sin(t)*Math.cos(C))-y)),o=Math.sqrt((1-Math.cos(r))/(Math.cos(i)*Math.cos(i))/(1-Math.cos(Math.atan(1/Math.cos(t))))),u.value===L?i+=y:u.value===Q?i+=l:u.value===F&&(i+=1.5*l),s.x=o*Math.cos(i),s.y=o*Math.sin(i),s.x=s.x*this.a+this.x0,s.y=s.y*this.a+this.y0,e.x=s.x,e.y=s.y,e},inverse:function(e){var t,r,n,i,o,a={lam:0,phi:0},s={value:0};return e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,o=Math.atan(Math.sqrt(e.x*e.x+e.y*e.y)),r=Math.atan2(e.y,e.x),0<=e.x&&e.x>=Math.abs(e.y)?s.value=D:0<=e.y&&e.y>=Math.abs(e.x)?(s.value=L,r-=y):e.x<0&&-e.x>=Math.abs(e.y)?(s.value=Q,r=r<0?r+l:r-l):(s.value=F,r+=y),i=l/12*Math.tan(r),t=Math.sin(i)/(Math.cos(i)-1/Math.sqrt(2)),t=Math.atan(t),(o=1-(r=Math.cos(r))*r*(r=Math.tan(o))*r*(1-Math.cos(Math.atan(1/Math.cos(t)))))<-1?o=-1:1<o&&(o=1),this.face===It?(n=Math.acos(o),a.phi=y-n,a.lam=s.value===D?t+y:s.value===L?t<0?t+l:t-l:s.value===Q?t-y:t):this.face===St?(n=Math.acos(o),a.phi=n-y,a.lam=s.value===D?-t+y:s.value===L?-t:s.value===Q?-t-y:t<0?-t-l:l-t):(i=(r=o)*r,o=1<=(i+=(n=1<=i?0:Math.sqrt(1-i)*Math.sin(t))*n)?0:Math.sqrt(1-i),s.value===L?(i=o,o=-n,n=i):s.value===Q?(o=-o,n=-n):s.value===F&&(i=o,o=n,n=-i),this.face===wt?(i=r,r=-o,o=i):this.face===Et?(r=-r,o=-o):this.face===Ct&&(i=r,r=o,o=-i),a.phi=Math.acos(-n)-y,a.lam=Math.atan2(o,r),this.face===wt?a.lam=N(a.lam,-y):this.face===Et?a.lam=N(a.lam,-l):this.face===Ct&&(a.lam=N(a.lam,+y))),0!==this.es&&(t=a.phi<0?1:0,s=Math.tan(a.phi),i=this.b/Math.sqrt(s*s+this.one_minus_f_squared),a.phi=Math.atan(Math.sqrt(this.a*this.a-i*i)/(this.one_minus_f*i)),t)&&(a.phi=-a.phi),a.lam+=this.long0,e.x=a.lam,e.y=a.phi,e},names:["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"]},Pt=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-9.86701e-7],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,1.8736e-8],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,9.34959e-7],[.7986,-.00755338,-500009e-10,9.35324e-7],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],kt=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-1.26793e-9,4.22642e-10],[.124,.0124,5.07171e-9,-1.60604e-9],[.186,.0123999,-1.90189e-8,6.00152e-9],[.248,.0124002,7.10039e-8,-2.24e-8],[.31,.0123992,-2.64997e-7,8.35986e-8],[.372,.0124029,9.88983e-7,-3.11994e-7],[.434,.0123893,-369093e-11,-4.35621e-7],[.4958,.0123198,-102252e-10,-3.45523e-7],[.5571,.0121916,-154081e-10,-5.82288e-7],[.6176,.0119938,-241424e-10,-5.25327e-7],[.6769,.011713,-320223e-10,-5.16405e-7],[.7346,.0113541,-397684e-10,-6.09052e-7],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-1.40374e-9],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],Bt=w/5,Tt=1/Bt,Mt={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"},forward:function(e){var t=O(e.x-this.long0),r=Math.abs(e.y),n=Math.floor(r*Bt),t=(n<0?n=0:18<=n&&(n=17),{x:xt(Pt[n],r=w*(r-Tt*n))*t,y:xt(kt[n],r)});return e.y<0&&(t.y=-t.y),t.x=t.x*this.a*.8487+this.x0,t.y=t.y*this.a*1.3523+this.y0,t},inverse:function(e){var i={x:(e.x-this.x0)/(.8487*this.a),y:Math.abs(e.y-this.y0)/(1.3523*this.a)};if(1<=i.y)i.x/=Pt[18][0],i.y=e.y<0?-y:y;else{var t=Math.floor(18*i.y);for(t<0?t=0:18<=t&&(t=17);;)if(kt[t][0]>i.y)--t;else{if(!(kt[t+1][0]<=i.y))break;++t}var o=kt[t],a=5*(i.y-o[0])/(kt[t+1][0]-o[0]),a=function(e,t){for(var r=a;t;--t){var n=(xt(o,n=r)-i.y)/function(e,t){return e[1]+t*(2*e[2]+3*t*e[3])}(o,n);if(r-=n,Math.abs(n)<e)break}return r}(b,100);i.x/=xt(Pt[t],a),i.y=(5*t+a)*_,e.y<0&&(i.y=-i.y)}return i.x=O(i.x+this.long0),i},names:["Robinson","robin"]},Rt={init:function(){this.name="geocent"},forward:function(e){return ge(e,this.es,this.a)},inverse:function(e){return ye(e,this.es,this.a,this.b)},names:["Geocentric","geocentric","geocent","Geocent"]},Dt=0,Lt=1,Qt=2,Ft=3,Nt={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}},Gt={init:function(){if(Object.keys(Nt).forEach(function(e){if(void 0===this[e])this[e]=Nt[e].def;else{if(Nt[e].num&&isNaN(this[e]))throw new Error("Invalid parameter value, must be numeric "+e+" = "+this[e]);Nt[e].num&&(this[e]=parseFloat(this[e]))}Nt[e].degrees&&(this[e]=this[e]*_)}.bind(this)),Math.abs(Math.abs(this.lat0)-y)<b?this.mode=this.lat0<0?Lt:Dt:Math.abs(this.lat0)<b?this.mode=Qt:(this.mode=Ft,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||1e10<this.pn1)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var e=this.tilt,t=this.azi;this.cg=Math.cos(t),this.sg=Math.sin(t),this.cw=Math.cos(e),this.sw=Math.sin(e)},forward:function(e){e.x-=this.long0;var t,r,n,i,o=Math.sin(e.y),a=Math.cos(e.y),s=Math.cos(e.x);switch(this.mode){case Ft:r=this.sinph0*o+this.cosph0*a*s;break;case Qt:r=a*s;break;case Lt:r=-o;break;case Dt:r=o}switch(t=(r=this.pn1/(this.p-r))*a*Math.sin(e.x),this.mode){case Ft:r*=this.cosph0*o-this.sinph0*a*s;break;case Qt:r*=o;break;case Dt:r*=-a*s;break;case Lt:r*=a*s}return i=1/((n=r*this.cg+t*this.sg)*this.sw*this.h1+this.cw),t=(t*this.cg-r*this.sg)*this.cw*i,r=n*i,e.x=t*this.a,e.y=r*this.a,e},inverse:function(e){e.x/=this.a,e.y/=this.a;var t={x:e.x,y:e.y},r=1/(this.pn1-e.y*this.sw),n=this.pn1*e.x*r,r=this.pn1*e.y*this.cw*r,i=(e.x=n*this.cg+r*this.sg,e.y=r*this.cg-n*this.sg,d(e.x,e.y));if(Math.abs(i)<b)t.x=0,t.y=e.y;else{var o,a=1-i*i*this.pfact;switch(a=(this.p-Math.sqrt(a))/(this.pn1/i+i/this.pn1),o=Math.sqrt(1-a*a),this.mode){case Ft:t.y=Math.asin(o*this.sinph0+e.y*a*this.cosph0/i),e.y=(o-this.sinph0*Math.sin(t.y))*i,e.x*=a*this.cosph0;break;case Qt:t.y=Math.asin(e.y*a/i),e.y=o*i,e.x*=a;break;case Dt:t.y=Math.asin(o),e.y=-e.y;break;case Lt:t.y=-Math.asin(o)}t.x=Math.atan2(e.x,e.y)}return e.x=t.x+this.long0,e.y=t.y,e},names:["Tilted_Perspective","tpers"]},Ut={init:function(){if(this.flip_axis="x"===this.sweep?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||1e10<this.radius_g_1)throw new Error;var e,t;this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,0!==this.es?(t=1/(e=1-this.es),this.radius_p=Math.sqrt(e),this.radius_p2=e,this.radius_p_inv2=t,this.shape="ellipse"):(this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere"),this.title||(this.title="Geostationary Satellite View")},forward:function(e){var t,r=e.x,n=e.y;if(r-=this.long0,"ellipse"===this.shape){var n=Math.atan(this.radius_p2*Math.tan(n)),i=this.radius_p/d(this.radius_p*Math.cos(n),Math.sin(n)),o=i*Math.cos(r)*Math.cos(n),a=i*Math.sin(r)*Math.cos(n),i=i*Math.sin(n);if((this.radius_g-o)*o-a*a-i*i*this.radius_p_inv2<0)return e.x=Number.NaN,e.y=Number.NaN,e;t=this.radius_g-o,this.flip_axis?(e.x=this.radius_g_1*Math.atan(a/d(i,t)),e.y=this.radius_g_1*Math.atan(i/t)):(e.x=this.radius_g_1*Math.atan(a/t),e.y=this.radius_g_1*Math.atan(i/d(a,t)))}else"sphere"===this.shape&&(t=Math.cos(n),o=Math.cos(r)*t,a=Math.sin(r)*t,i=Math.sin(n),t=this.radius_g-o,this.flip_axis?(e.x=this.radius_g_1*Math.atan(a/d(i,t)),e.y=this.radius_g_1*Math.atan(i/t)):(e.x=this.radius_g_1*Math.atan(a/t),e.y=this.radius_g_1*Math.atan(i/d(a,t))));return e.x=e.x*this.a,e.y=e.y*this.a,e},inverse:function(e){var t,r,n,i=-1,o=0,a=0;if(e.x=e.x/this.a,e.y=e.y/this.a,"ellipse"===this.shape){this.flip_axis?(a=Math.tan(e.y/this.radius_g_1),o=Math.tan(e.x/this.radius_g_1)*d(1,a)):(o=Math.tan(e.x/this.radius_g_1),a=Math.tan(e.y/this.radius_g_1)*d(1,o));var s=a/this.radius_p,s=o*o+s*s+i*i;if((r=(t=2*this.radius_g*i)*t-4*s*this.C)<0)return e.x=Number.NaN,e.y=Number.NaN,e;n=(-t-Math.sqrt(r))/(2*s),i=this.radius_g+n*i,o*=n,a*=n,e.x=Math.atan2(o,i),e.y=Math.atan(a*Math.cos(e.x)/i),e.y=Math.atan(this.radius_p_inv2*Math.tan(e.y))}else if("sphere"===this.shape){if(this.flip_axis?(a=Math.tan(e.y/this.radius_g_1),o=Math.tan(e.x/this.radius_g_1)*Math.sqrt(1+a*a)):(o=Math.tan(e.x/this.radius_g_1),a=Math.tan(e.y/this.radius_g_1)*Math.sqrt(1+o*o)),(r=(t=2*this.radius_g*i)*t-4*(s=o*o+a*a+i*i)*this.C)<0)return e.x=Number.NaN,e.y=Number.NaN,e;n=(-t-Math.sqrt(r))/(2*s),i=this.radius_g+n*i,o*=n,a*=n,e.x=Math.atan2(o,i),e.y=Math.atan(a*Math.cos(e.x)/i)}return e.x=e.x+this.long0,e},names:["Geostationary Satellite View","Geostationary_Satellite","geos"]},zt=1.340264,qt=-.081106,Ht=893e-6,Wt=.003796,Yt=Math.sqrt(3)/2,Vt={init:function(){this.es=0,this.long0=void 0!==this.long0?this.long0:0},forward:function(e){var t=O(e.x-this.long0),r=e.y,r=Math.asin(Yt*Math.sin(r)),n=r*r,i=n*n*n;return e.x=t*Math.cos(r)/(Yt*(zt+3*qt*n+i*(7*Ht+9*Wt*n))),e.y=r*(zt+qt*n+i*(Ht+Wt*n)),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e},inverse:function(e){e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a;for(var t,r,n,i=e.y,o=0;o<12&&(i-=n=(i*(zt+qt*(t=i*i)+(r=t*t*t)*(Ht+Wt*t))-e.y)/(zt+3*qt*t+r*(7*Ht+9*Wt*t)),!(Math.abs(n)<1e-9));++o);return r=(t=i*i)*t*t,e.x=Yt*e.x*(zt+3*qt*t+r*(7*Ht+9*Wt*t))/Math.cos(i),e.y=Math.asin(Math.sin(i)/Yt),e.x=O(e.x+this.long0),e},names:["eqearth","Equal Earth","Equal_Earth"]};return t.defaultDatum="WGS84",t.Proj=k,t.WGS84=new t.Proj("WGS84"),t.Point=i,t.toPoint=we,t.defs=j,t.nadgrid=function(e,t){var t=new DataView(t),r=11!==(r=t).getInt32(8,!1)&&(11!==r.getInt32(8,!0)&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0),n=(i=r,{nFields:(n=t).getInt32(8,i),nSubgridFields:n.getInt32(24,i),nSubgrids:n.getInt32(40,i),shiftType:de(n,56,64).trim(),fromSemiMajorAxis:n.getFloat64(120,i),fromSemiMinorAxis:n.getFloat64(136,i),toSemiMajorAxis:n.getFloat64(152,i),toSemiMinorAxis:n.getFloat64(168,i)}),i={header:n,subgrids:function(e,t,r){for(var n=176,i=[],o=0;o<t.nSubgrids;o++){u=r;var a={name:de(a=e,(s=n)+8,s+16).trim(),parent:de(a,s+24,s+24+8).trim(),lowerLatitude:a.getFloat64(s+72,u),upperLatitude:a.getFloat64(s+88,u),lowerLongitude:a.getFloat64(s+104,u),upperLongitude:a.getFloat64(s+120,u),latitudeInterval:a.getFloat64(s+136,u),longitudeInterval:a.getFloat64(s+152,u),gridNodeCount:a.getInt32(s+168,u)},s=function(e,t,r,n){for(var i=t+176,o=[],a=0;a<r.gridNodeCount;a++){var s={latitudeShift:e.getFloat32(i+16*a,n),longitudeShift:e.getFloat32(i+16*a+4,n),latitudeAccuracy:e.getFloat32(i+16*a+8,n),longitudeAccuracy:e.getFloat32(i+16*a+12,n)};o.push(s)}return o}(e,n,a,r),u=Math.round(1+(a.upperLongitude-a.lowerLongitude)/a.longitudeInterval),l=Math.round(1+(a.upperLatitude-a.lowerLatitude)/a.latitudeInterval);i.push({ll:[p(a.lowerLongitude),p(a.lowerLatitude)],del:[p(a.longitudeInterval),p(a.latitudeInterval)],lim:[u,l],count:a.gridNodeCount,cvs:s.map(function(e){return[p(e.longitudeShift),p(e.latitudeShift)]})}),n+=176+16*a.gridNodeCount}return i}(t,n,r)};return he[e]=i},t.transform=Ie,t.mgrs=e,t.version="2.11.0",(e=t).Proj.projections.add(Xe),e.Proj.projections.add(Je),e.Proj.projections.add(Ze),e.Proj.projections.add(et),e.Proj.projections.add(tt),e.Proj.projections.add(rt),e.Proj.projections.add(nt),e.Proj.projections.add(it),e.Proj.projections.add(ot),e.Proj.projections.add(at),e.Proj.projections.add(st),e.Proj.projections.add(ut),e.Proj.projections.add(lt),e.Proj.projections.add(ct),e.Proj.projections.add(ft),e.Proj.projections.add(ht),e.Proj.projections.add(pt),e.Proj.projections.add(dt),e.Proj.projections.add(gt),e.Proj.projections.add(yt),e.Proj.projections.add(At),e.Proj.projections.add(mt),e.Proj.projections.add(vt),e.Proj.projections.add(bt),e.Proj.projections.add(Ot),e.Proj.projections.add(Mt),e.Proj.projections.add(Rt),e.Proj.projections.add(Gt),e.Proj.projections.add(Ut),e.Proj.projections.add(Vt),t},"object"===(void 0===r?"undefined":Kt(r))&&void 0!==t?t.exports=n():"function"==typeof define&&define.amd?define(n):(void 0).proj4=n()},{}],422:[function(e,O,P){!function(x){!function(){"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var e=void 0,r="object"==(void 0===P?"undefined":t(P))&&P&&!P.nodeType&&P,n="object"==(void 0===O?"undefined":t(O))&&O&&!O.nodeType&&O,i="object"==(void 0===x?"undefined":t(x))&&x;i.global!==i&&i.window!==i&&i.self!==i||(e=i);var o,a,y=2147483647,A=36,m=26,s=38,u=700,l=/^xn--/,c=/[^\x20-\x7E]/,f=/[\x2E\u3002\uFF0E\uFF61]/g,h={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},p=A-1,v=Math.floor,b=String.fromCharCode;function _(e){throw new RangeError(h[e])}function d(e,t){for(var r=e.length,n=[];r--;)n[r]=t(e[r]);return n}function g(e,t){var r=e.split("@"),n="";return 1<r.length&&(n=r[0]+"@",e=r[1]),n+d((e=e.replace(f,".")).split("."),t).join(".")}function w(e){for(var t,r,n=[],i=0,o=e.length;i<o;)55296<=(t=e.charCodeAt(i++))&&t<=56319&&i<o?56320==(64512&(r=e.charCodeAt(i++)))?n.push(((1023&t)<<10)+(1023&r)+65536):(n.push(t),i--):n.push(t);return n}function E(e){return d(e,function(e){var t="";return 65535<e&&(t+=b((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+b(e)}).join("")}function C(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function I(e,t,r){var n=0;for(e=r?v(e/u):e>>1,e+=v(e/t);p*m>>1<e;n+=A)e=v(e/p);return v(n+(p+1)*e/(e+s))}function S(e){var t,r,n,i,o,a,s,u,l=[],c=e.length,f=0,h=128,p=72;for((r=e.lastIndexOf("-"))<0&&(r=0),n=0;n<r;++n)128<=e.charCodeAt(n)&&_("not-basic"),l.push(e.charCodeAt(n));for(i=0<r?r+1:0;i<c;){for(o=f,a=1,s=A;c<=i&&_("invalid-input"),((u=(u=e.charCodeAt(i++))-48<10?u-22:u-65<26?u-65:u-97<26?u-97:A)>=A||u>v((y-f)/a))&&_("overflow"),f+=u*a,!(u<(u=s<=p?1:p+m<=s?m:s-p));s+=A)a>v(y/(u=A-u))&&_("overflow"),a*=u;p=I(f-o,t=l.length+1,0==o),v(f/t)>y-h&&_("overflow"),h+=v(f/t),f%=t,l.splice(f++,0,h)}return E(l)}function j(e){for(var t,r,n,i,o,a,s,u,l,c=[],f=(e=w(e)).length,h=128,p=0,d=72,g=0;g<f;++g)(a=e[g])<128&&c.push(b(a));for(t=r=c.length,r&&c.push("-");t<f;){for(n=y,g=0;g<f;++g)(a=e[g])>=h&&a<n&&(n=a);for(n-h>v((y-p)/(s=t+1))&&_("overflow"),p+=(n-h)*s,h=n,g=0;g<f;++g)if((a=e[g])<h&&++p>y&&_("overflow"),a==h){for(i=p,o=A;!(i<(u=o<=d?1:d+m<=o?m:o-d));o+=A)c.push(b(C(u+(l=i-u)%(u=A-u),0))),i=v(l/u);c.push(b(C(i,0))),d=I(p,s,t==r),p=0,++t}++p,++h}return c.join("")}if(o={version:"1.4.1",ucs2:{decode:w,encode:E},decode:S,encode:j,toASCII:function(e){return g(e,function(e){return c.test(e)?"xn--"+j(e):e})},toUnicode:function(e){return g(e,function(e){return l.test(e)?S(e.slice(4).toLowerCase()):e})}},"function"==typeof define&&"object"==t(define.amd)&&define.amd)define("punycode",function(){return o});else if(r&&n)if(O.exports==r)n.exports=o;else for(a in o)o.hasOwnProperty(a)&&(r[a]=o[a]);else e.punycode=o}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],423:[function(e,t,r){"use strict";t.exports=function(e,t,r,n){t=t||"&",r=r||"=";var i={};if("string"==typeof e&&0!==e.length){var o=/\+/g,t=(e=e.split(t),1e3),a=(n&&"number"==typeof n.maxKeys&&(t=n.maxKeys),e.length);0<t&&t<a&&(a=t);for(var s=0;s<a;++s){var u,l=e[s].replace(o,"%20"),c=l.indexOf(r),c=0<=c?(u=l.substr(0,c),l.substr(c+1)):(u=l,""),l=decodeURIComponent(u),c=decodeURIComponent(c);Object.prototype.hasOwnProperty.call(i,l)?f(i[l])?i[l].push(c):i[l]=[i[l],c]:i[l]=c}}return i};var f=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},{}],424:[function(e,t,r){"use strict";function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e){switch(o(e)){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}}t.exports=function(r,n,i,e){return n=n||"&",i=i||"=","object"===o(r=null===r?void 0:r)?u(l(r),function(e){var t=encodeURIComponent(a(e))+i;return s(r[e])?u(r[e],function(e){return t+encodeURIComponent(a(e))}).join(n):t+encodeURIComponent(a(r[e]))}).join(n):e?encodeURIComponent(a(e))+i+encodeURIComponent(a(r)):""};var s=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function u(e,t){if(e.map)return e.map(t);for(var r=[],n=0;n<e.length;n++)r.push(t(e[n],n));return r}var l=Object.keys||function(e){var t,r=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&r.push(t);return r}},{}],425:[function(e,t,r){"use strict";r.decode=r.parse=e("./decode"),r.encode=r.stringify=e("./encode")},{"./decode":423,"./encode":424}],426:[function(e,t,r){"use strict";function x(e){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e){return function(e){if(Array.isArray(e))return n(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||s(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(){O=function(){return a};var u,a={},e=Object.prototype,l=e.hasOwnProperty,c=Object.defineProperty||function(e,t,r){e[t]=r.value},t="function"==typeof Symbol?Symbol:{},n=t.iterator||"@@iterator",r=t.asyncIterator||"@@asyncIterator",i=t.toStringTag||"@@toStringTag";function o(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{o({},"")}catch(u){o=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var i,o,a,s,t=t&&t.prototype instanceof A?t:A,t=Object.create(t.prototype),n=new S(n||[]);return c(t,"_invoke",{value:(i=e,o=r,a=n,s=h,function(e,t){if(s===d)throw Error("Generator is already running");if(s===g){if("throw"===e)throw t;return{value:u,done:!0}}for(a.method=e,a.arg=t;;){var r=a.delegate;if(r){r=function e(t,r){var n=r.method,i=t.iterator[n];if(i===u)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=u,e(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;n=f(i,t.iterator,r.arg);if("throw"===n.type)return r.method="throw",r.arg=n.arg,r.delegate=null,y;i=n.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=u),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}(r,a);if(r){if(r===y)continue;return r}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(s===h)throw s=g,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);s=d;r=f(i,o,a);if("normal"===r.type){if(s=a.done?g:p,r.arg===y)continue;return{value:r.arg,done:a.done}}"throw"===r.type&&(s=g,a.method="throw",a.arg=r.arg)}})}),t}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}a.wrap=s;var h="suspendedStart",p="suspendedYield",d="executing",g="completed",y={};function A(){}function m(){}function v(){}var t={},b=(o(t,n,function(){return this}),Object.getPrototypeOf),b=b&&b(b(j([]))),_=(b&&b!==e&&l.call(b,n)&&(t=b),v.prototype=A.prototype=Object.create(t));function w(e){["next","throw","return"].forEach(function(t){o(e,t,function(e){return this._invoke(t,e)})})}function E(a,s){var t;c(this,"_invoke",{value:function(r,n){function e(){return new s(function(e,t){!function t(e,r,n,i){var o,e=f(a[e],a,r);if("throw"!==e.type)return(r=(o=e.arg).value)&&"object"==x(r)&&l.call(r,"__await")?s.resolve(r.__await).then(function(e){t("next",e,n,i)},function(e){t("throw",e,n,i)}):s.resolve(r).then(function(e){o.value=e,n(o)},function(e){return t("throw",e,n,i)});i(e.arg)}(r,n,e,t)})}return t=t?t.then(e,e):e()}})}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function j(t){if(t||""===t){var r,e=t[n];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return r=-1,(e=function e(){for(;++r<t.length;)if(l.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=u,e.done=!0,e}).next=e}throw new TypeError(x(t)+" is not iterable")}return c(_,"constructor",{value:m.prototype=v,configurable:!0}),c(v,"constructor",{value:m,configurable:!0}),m.displayName=o(v,i,"GeneratorFunction"),a.isGeneratorFunction=function(e){e="function"==typeof e&&e.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},a.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,o(e,i,"GeneratorFunction")),e.prototype=Object.create(_),e},a.awrap=function(e){return{__await:e}},w(E.prototype),o(E.prototype,r,function(){return this}),a.AsyncIterator=E,a.async=function(e,t,r,n,i){void 0===i&&(i=Promise);var o=new E(s(e,t,r,n),i);return a.isGeneratorFunction(t)?o:o.next().then(function(e){return e.done?e.value:o.next()})},w(_),o(_,i,"Generator"),o(_,n,function(){return this}),o(_,"toString",function(){return"[object Generator]"}),a.keys=function(e){var t,r=Object(e),n=[];for(t in r)n.push(t);return n.reverse(),function e(){for(;n.length;){var t=n.pop();if(t in r)return e.value=t,e.done=!1,e}return e.done=!0,e}},a.values=j,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=u,this.done=!1,this.delegate=null,this.method="next",this.arg=u,this.tryEntries.forEach(I),!e)for(var t in this)"t"===t.charAt(0)&&l.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=u)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(r){if(this.done)throw r;var n=this;function e(e,t){return o.type="throw",o.arg=r,n.next=e,t&&(n.method="next",n.arg=u),!!t}for(var t=this.tryEntries.length-1;0<=t;--t){var i=this.tryEntries[t],o=i.completion;if("root"===i.tryLoc)return e("end");if(i.tryLoc<=this.prev){var a=l.call(i,"catchLoc"),s=l.call(i,"finallyLoc");if(a&&s){if(this.prev<i.catchLoc)return e(i.catchLoc,!0);if(this.prev<i.finallyLoc)return e(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return e(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return e(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;0<=r;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&l.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}var o=(i=i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc?null:i)?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var r,n,i=this.tryEntries[t];if(i.tryLoc===e)return"throw"===(r=i.completion).type&&(n=r.arg,I(i)),n}throw Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:j(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=u),y}},a}function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o,a,s=[],u=!0,l=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=o.call(r)).done)&&(s.push(n.value),s.length!==t);u=!0);}catch(e){l=!0,i=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}(e,t)||s(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){var r,n,i,o,a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(a)return i=!(n=!0),{s:function(){a=a.call(e)},n:function(){var e=a.next();return n=e.done,e},e:function(e){i=!0,r=e},f:function(){try{n||null==a.return||a.return()}finally{if(i)throw r}}};if(Array.isArray(e)||(a=s(e))||t&&e&&"number"==typeof e.length)return a&&(e=a),o=0,{s:t=function(){},n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(e,t){var r;if(e)return"string"==typeof e?n(e,t):"Map"===(r="Object"===(r={}.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=x(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=x(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==x(e)?e:e+""}(n.key),n)}}function o(e,t,r){t=p(t);var n=e,t=f()?Reflect.construct(t,r||[],p(e).constructor):t.apply(e,r);if(t&&("object"==x(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function a(e){var r="function"==typeof Map?new Map:void 0;return function(e){if(null===e||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(e){return"function"==typeof t}}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==r){if(r.has(e))return r.get(e);r.set(e,t)}function t(){return function(e,t,r){var n;return f()?Reflect.construct.apply(null,arguments):((n=[null]).push.apply(n,t),t=new(e.bind.apply(e,n)),r&&h(t,r.prototype),t)}(e,arguments,p(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),h(t,e)}(e)}function f(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(f=function(){return!!e})()}function h(e,t){return(h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;r.default=function(){function n(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=this,r=n;if(!(t instanceof r))throw new TypeError("Cannot call a class as a function");if(t=o(this,n),!(e.maxSize&&0<e.maxSize))throw new TypeError("`maxSize` must be a number greater than 0");if("number"==typeof e.maxAge&&0===e.maxAge)throw new TypeError("`maxAge` must be a number greater than 0");return t.maxSize=e.maxSize,t.maxAge=e.maxAge||Number.POSITIVE_INFINITY,t.onEviction=e.onEviction,t.cache=new Map,t.oldCache=new Map,t._size=0,t}var e,t=n,r=a(Map);if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&h(t,r),t=n,(r=[{key:"_emitEvictions",value:function(e){if("function"==typeof this.onEviction){var t,r=c(e);try{for(r.s();!(t=r.n()).done;){var n=l(t.value,2),i=n[0],o=n[1];this.onEviction(i,o.value)}}catch(e){r.e(e)}finally{r.f()}}}},{key:"_deleteIfExpired",value:function(e,t){return"number"==typeof t.expiry&&t.expiry<=Date.now()&&("function"==typeof this.onEviction&&this.onEviction(e,t.value),this.delete(e))}},{key:"_getOrDeleteIfExpired",value:function(e,t){if(!1===this._deleteIfExpired(e,t))return t.value}},{key:"_getItemValue",value:function(e,t){return t.expiry?this._getOrDeleteIfExpired(e,t):t.value}},{key:"_peek",value:function(e,t){t=t.get(e);return this._getItemValue(e,t)}},{key:"_set",value:function(e,t){this.cache.set(e,t),this._size++,this._size>=this.maxSize&&(this._size=0,this._emitEvictions(this.oldCache),this.oldCache=this.cache,this.cache=new Map)}},{key:"_moveToRecent",value:function(e,t){this.oldCache.delete(e),this._set(e,t)}},{key:"_entriesAscending",value:O().mark(function e(){var t,r,n,i,o,a,s;return O().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=c(this.oldCache),e.prev=1,t.s();case 3:if((o=t.n()).done)e.next=13;else{if(o=o.value,i=l(o,2),n=i[0],i=i[1],!this.cache.has(n)&&!1===this._deleteIfExpired(n,i))return e.next=11,o;e.next=11}break;case 11:e.next=3;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(1),t.e(e.t0);case 18:return e.prev=18,t.f(),e.finish(18);case 21:r=c(this.cache),e.prev=22,r.s();case 24:if((n=r.n()).done)e.next=33;else{if(i=n.value,o=l(i,2),a=o[0],s=o[1],!1===this._deleteIfExpired(a,s))return e.next=31,i;e.next=31}break;case 31:e.next=24;break;case 33:e.next=38;break;case 35:e.prev=35,e.t1=e.catch(22),r.e(e.t1);case 38:return e.prev=38,r.f(),e.finish(38);case 41:case"end":return e.stop()}},e,this,[[1,15,18,21],[22,35,38,41]])})},{key:"get",value:function(e){if(this.cache.has(e))return t=this.cache.get(e),this._getItemValue(e,t);if(this.oldCache.has(e)){var t=this.oldCache.get(e);if(!1===this._deleteIfExpired(e,t))return this._moveToRecent(e,t),t.value}}},{key:"set",value:function(e,t){var r=(2<arguments.length&&void 0!==arguments[2]?arguments[2]:{}).maxAge,r=void 0===r?this.maxAge:r,r="number"==typeof r&&r!==Number.POSITIVE_INFINITY?Date.now()+r:void 0;return this.cache.has(e)?this.cache.set(e,{value:t,expiry:r}):this._set(e,{value:t,expiry:r}),this}},{key:"has",value:function(e){return this.cache.has(e)?!this._deleteIfExpired(e,this.cache.get(e)):!!this.oldCache.has(e)&&!this._deleteIfExpired(e,this.oldCache.get(e))}},{key:"peek",value:function(e){return this.cache.has(e)?this._peek(e,this.cache):this.oldCache.has(e)?this._peek(e,this.oldCache):void 0}},{key:"delete",value:function(e){var t=this.cache.delete(e);return t&&this._size--,this.oldCache.delete(e)||t}},{key:"clear",value:function(){this.cache.clear(),this.oldCache.clear(),this._size=0}},{key:"resize",value:function(e){if(!(e&&0<e))throw new TypeError("`maxSize` must be a number greater than 0");var t=u(this._entriesAscending()),r=t.length-e;r<0?(this.cache=new Map(t),this.oldCache=new Map,this._size=t.length):(0<r&&this._emitEvictions(t.slice(0,r)),this.oldCache=new Map(t.slice(r)),this.cache=new Map,this._size=0),this.maxSize=e}},{key:"keys",value:O().mark(function e(){var t,r;return O().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=c(this),e.prev=1,t.s();case 3:if((r=t.n()).done){e.next=9;break}return r=l(r.value,1),r=r[0],e.next=7,r;case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),t.e(e.t0);case 14:return e.prev=14,t.f(),e.finish(14);case 17:case"end":return e.stop()}},e,this,[[1,11,14,17]])})},{key:"values",value:O().mark(function e(){var t,r;return O().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=c(this),e.prev=1,t.s();case 3:if((r=t.n()).done){e.next=9;break}return r=l(r.value,2),r=r[1],e.next=7,r;case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),t.e(e.t0);case 14:return e.prev=14,t.f(),e.finish(14);case 17:case"end":return e.stop()}},e,this,[[1,11,14,17]])})},{key:Symbol.iterator,value:O().mark(function(){var t,r,n,i,o,a,s;return O().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=c(this.cache),e.prev=1,t.s();case 3:if((i=t.n()).done)e.next=12;else{if(i=i.value,i=l(i,2),o=i[0],r=i[1],!1===this._deleteIfExpired(o,r))return e.next=10,[o,r.value];e.next=10}break;case 10:e.next=3;break;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),t.e(e.t0);case 17:return e.prev=17,t.f(),e.finish(17);case 20:n=c(this.oldCache),e.prev=21,n.s();case 23:if((i=n.n()).done)e.next=33;else{if(o=i.value,s=l(o,2),a=s[0],s=s[1],!this.cache.has(a)&&!1===this._deleteIfExpired(a,s))return e.next=31,[a,s.value];e.next=31}break;case 31:e.next=23;break;case 33:e.next=38;break;case 35:e.prev=35,e.t1=e.catch(21),n.e(e.t1);case 38:return e.prev=38,n.f(),e.finish(38);case 41:case"end":return e.stop()}},r,this,[[1,14,17,20],[21,35,38,41]])})},{key:"entriesDescending",value:O().mark(function e(){var t,r,n,i,o,a,s;return O().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=u(this.cache),r=t.length-1;case 2:if(0<=r){if(o=t[r],o=l(o,2),i=o[0],o=o[1],!1===this._deleteIfExpired(i,o))return e.next=9,[i,o.value];e.next=9}else e.next=12;break;case 9:--r,e.next=2;break;case 12:t=u(this.oldCache),n=t.length-1;case 14:if(0<=n){if(i=t[n],o=l(i,2),a=o[0],s=o[1],!this.cache.has(a)&&!1===this._deleteIfExpired(a,s))return e.next=22,[a,s.value];e.next=22}else e.next=25;break;case 22:--n,e.next=14;break;case 25:case"end":return e.stop()}},e,this)})},{key:"entriesAscending",value:O().mark(function e(){var t,r,n;return O().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=c(this._entriesAscending()),e.prev=1,t.s();case 3:if((n=t.n()).done){e.next=9;break}return n=l(n.value,2),r=n[0],n=n[1],e.next=7,[r,n.value];case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),t.e(e.t0);case 14:return e.prev=14,t.f(),e.finish(14);case 17:case"end":return e.stop()}},e,this,[[1,11,14,17]])})},{key:"size",get:function(){if(!this._size)return this.oldCache.size;var e,t=0,r=c(this.oldCache.keys());try{for(r.s();!(e=r.n()).done;){var n=e.value;this.cache.has(n)||t++}}catch(e){r.e(e)}finally{r.f()}return Math.min(this._size+t,this.maxSize)}},{key:"entries",value:function(){return this.entriesAscending()}},{key:"forEach",value:function(e){var t,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this,n=c(this.entriesAscending());try{for(n.s();!(t=n.n()).done;){var i=l(t.value,2),o=i[0],a=i[1];e.call(r,a,o,this)}}catch(e){n.e(e)}finally{n.f()}}},{key:Symbol.toStringTag,get:function(){return JSON.stringify(u(this.entriesAscending()))}}])&&i(t.prototype,r),e&&i(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}()},{}],427:[function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i;i=function(){function p(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function u(e,t){return e<t?-1:t<e?1:0}function e(e){void 0===e&&(e=9),this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()}function d(e,t){g(e,0,e.children.length,t,e)}function g(e,t,r,n,i){(i=i||m(null)).minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var o=t;o<r;o++){var a=e.children[o];h(i,e.leaf?n(a):a)}return i}function h(e,t){return e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),e}function o(e,t){return e.minX-t.minX}function a(e,t){return e.minY-t.minY}function y(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function A(e){return e.maxX-e.minX+(e.maxY-e.minY)}function c(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function l(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function m(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function v(e,t,r,n,i){for(var o,a,s=[t,r];s.length;)(r=s.pop())-(t=s.pop())<=n||(o=t+Math.ceil((r-t)/n/2)*n,function e(t,r,n,i,o){for(;n<i;){600<i-n&&(a=i-n+1,s=r-n+1,l=Math.log(a),u=.5*Math.exp(2*l/3),l=.5*Math.sqrt(l*u*(a-u)/a)*(s-a/2<0?-1:1),e(t,r,Math.max(n,Math.floor(r-s*u/a+l)),Math.min(i,Math.floor(r+(a-s)*u/a+l)),o));var a,s,u,l,c=t[r],f=n,h=i;for(p(t,n,r),0<o(t[i],c)&&p(t,n,i);f<h;){for(p(t,f,h),f++,h--;o(t[f],c)<0;)f++;for(;0<o(t[h],c);)h--}0===o(t[n],c)?p(t,n,h):p(t,++h,i),h<=r&&(n=h+1),r<=h&&(i=h-1)}}(a=e,o,t||0,r||a.length-1,i||u),s.push(t,o,o,r))}return e.prototype.all=function(){return this._all(this.data,[])},e.prototype.search=function(e){var t=this.data,r=[];if(l(e,t))for(var n=this.toBBox,i=[];t;){for(var o=0;o<t.children.length;o++){var a=t.children[o],s=t.leaf?n(a):a;l(e,s)&&(t.leaf?r.push(a):c(e,s)?this._all(a,r):i.push(a))}t=i.pop()}return r},e.prototype.collides=function(e){var t=this.data;if(l(e,t))for(var r=[];t;){for(var n=0;n<t.children.length;n++){var i=t.children[n],o=t.leaf?this.toBBox(i):i;if(l(e,o)){if(t.leaf||c(e,o))return!0;r.push(i)}}t=r.pop()}return!1},e.prototype.load=function(e){if(e&&e.length)if(e.length<this._minEntries)for(var t=0;t<e.length;t++)this.insert(e[t]);else{var r,n=this._build(e.slice(),0,e.length-1,0);this.data.children.length?this.data.height===n.height?this._splitRoot(this.data,n):(this.data.height<n.height&&(r=this.data,this.data=n,n=r),this._insert(n,this.data.height-n.height-1,!0)):this.data=n}return this},e.prototype.insert=function(e){return e&&this._insert(e,this.data.height-1),this},e.prototype.clear=function(){return this.data=m([]),this},e.prototype.remove=function(e,t){if(e)for(var r,n,i,o=this.data,a=this.toBBox(e),s=[],u=[];o||s.length;){if(o||(o=s.pop(),n=s[s.length-1],r=u.pop(),i=!0),o.leaf){var l=function(e,t,r){if(!r)return t.indexOf(e);for(var n=0;n<t.length;n++)if(r(e,t[n]))return n;return-1}(e,o.children,t);if(-1!==l)return o.children.splice(l,1),s.push(o),this._condense(s),this}i||o.leaf||!c(o,a)?n?(r++,o=n.children[r],i=!1):o=null:(s.push(o),u.push(r),o=(n=o).children[r=0])}return this},e.prototype.toBBox=function(e){return e},e.prototype.compareMinX=function(e,t){return e.minX-t.minX},e.prototype.compareMinY=function(e,t){return e.minY-t.minY},e.prototype.toJSON=function(){return this.data},e.prototype.fromJSON=function(e){return this.data=e,this},e.prototype._all=function(e,t){for(var r=[];e;)e.leaf?t.push.apply(t,e.children):r.push.apply(r,e.children),e=r.pop();return t},e.prototype._build=function(e,t,r,n){var i,o=r-t+1,a=this._maxEntries;if(o<=a)d(i=m(e.slice(t,r+1)),this.toBBox);else{n||(n=Math.ceil(Math.log(o)/Math.log(a)),a=Math.ceil(o/Math.pow(a,n-1))),(i=m([])).leaf=!1,i.height=n;var s=Math.ceil(o/a),u=s*Math.ceil(Math.sqrt(a));v(e,t,r,u,this.compareMinX);for(var l=t;l<=r;l+=u){var c=Math.min(l+u-1,r);v(e,l,c,s,this.compareMinY);for(var f=l;f<=c;f+=s){var h=Math.min(f+s-1,c);i.children.push(this._build(e,f,h,n-1))}}d(i,this.toBBox)}return i},e.prototype._chooseSubtree=function(e,t,r,n){for(;n.push(t),!t.leaf&&n.length-1!==r;){for(var i=1/0,o=1/0,a=void 0,s=0;s<t.children.length;s++){var u=t.children[s],l=y(u),c=(f=e,c=u,(Math.max(c.maxX,f.maxX)-Math.min(c.minX,f.minX))*(Math.max(c.maxY,f.maxY)-Math.min(c.minY,f.minY))-l);c<o?(o=c,i=l<i?l:i,a=u):c===o&&l<i&&(i=l,a=u)}t=a||t.children[0]}var f,c;return t},e.prototype._insert=function(e,t,r){var r=r?e:this.toBBox(e),n=[],i=this._chooseSubtree(r,this.data,t,n);for(i.children.push(e),h(i,r);0<=t&&n[t].children.length>this._maxEntries;)this._split(n,t),t--;this._adjustParentBBoxes(r,n,t)},e.prototype._split=function(e,t){var r=e[t],n=r.children.length,i=this._minEntries,i=(this._chooseSplitAxis(r,i,n),this._chooseSplitIndex(r,i,n)),n=m(r.children.splice(i,r.children.length-i));n.height=r.height,n.leaf=r.leaf,d(r,this.toBBox),d(n,this.toBBox),t?e[t-1].children.push(n):this._splitRoot(r,n)},e.prototype._splitRoot=function(e,t){this.data=m([e,t]),this.data.height=e.height+1,this.data.leaf=!1,d(this.data,this.toBBox)},e.prototype._chooseSplitIndex=function(e,t,r){for(var n,i,o,a,s=1/0,u=1/0,l=t;l<=r-t;l++){var c=g(e,0,l,this.toBBox),f=g(e,l,r,this.toBBox),h=(a=c,h=f,i=Math.max(a.minX,h.minX),o=Math.max(a.minY,h.minY),p=Math.min(a.maxX,h.maxX),a=Math.min(a.maxY,h.maxY),Math.max(0,p-i)*Math.max(0,a-o)),p=y(c)+y(f);h<s?(s=h,n=l,u=p<u?p:u):h===s&&p<u&&(u=p,n=l)}return n||r-t},e.prototype._chooseSplitAxis=function(e,t,r){var n=e.leaf?this.compareMinX:o,i=e.leaf?this.compareMinY:a;this._allDistMargin(e,t,r,n)<this._allDistMargin(e,t,r,i)&&e.children.sort(n)},e.prototype._allDistMargin=function(e,t,r,n){e.children.sort(n);for(var i=this.toBBox,o=g(e,0,t,i),a=g(e,r-t,r,i),s=A(o)+A(a),u=t;u<r-t;u++){var l=e.children[u];h(o,e.leaf?i(l):l),s+=A(o)}for(var c=r-t-1;t<=c;c--){var f=e.children[c];h(a,e.leaf?i(f):f),s+=A(a)}return s},e.prototype._adjustParentBBoxes=function(e,t,r){for(var n=r;0<=n;n--)h(t[n],e)},e.prototype._condense=function(e){for(var t=e.length-1,r=void 0;0<=t;t--)0===e[t].children.length?0<t?(r=e[t-1].children).splice(r.indexOf(e[t]),1):this.clear():d(e[t],this.toBBox)},e},"object"==(void 0===r?"undefined":n(r))&&void 0!==t?t.exports=i():"function"==typeof define&&define.amd?define(i):self.RBush=i()},{}],428:[function(n,e,i){!function(l){!function(){"use strict";var a=n("./lib/request"),e=n("./lib/response"),s=n("xtend"),t=n("builtin-status-codes"),u=n("url"),r=i;r.request=function(e,t){e="string"==typeof e?u.parse(e):s(e);var r=-1===l.location.protocol.search(/^https?:$/)?"http:":"",r=e.protocol||r,n=e.hostname||e.host,i=e.port,o=e.path||"/",r=(n&&-1!==n.indexOf(":")&&(n="["+n+"]"),e.url=(n?r+"//"+n:"")+(i?":"+i:"")+o,e.method=(e.method||"GET").toUpperCase(),e.headers=e.headers||{},new a(e));return t&&r.on("response",t),r},r.get=function(e,t){e=r.request(e,t);return e.end(),e},r.ClientRequest=a,r.IncomingMessage=e.IncomingMessage,r.Agent=function(){},r.Agent.defaultMaxSockets=4,r.globalAgent=new r.Agent,r.STATUS_CODES=t,r.METHODS=["CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REPORT","SEARCH","SUBSCRIBE","TRACE","UNLOCK","UNSUBSCRIBE"]}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./lib/request":430,"./lib/response":431,"builtin-status-codes":10,url:449,xtend:459}],429:[function(e,t,o){!function(i){!function(){"use strict";var t;function r(){if(void 0===t)if(i.XMLHttpRequest){t=new i.XMLHttpRequest;try{t.open("GET",i.XDomainRequest?"/":"https://example.com")}catch(e){t=null}}else t=null;return t}function e(e){var t=r();if(t)try{return t.responseType=e,t.responseType===e}catch(e){}return!1}function n(e){return"function"==typeof e}o.fetch=n(i.fetch)&&n(i.ReadableStream),o.writableStream=n(i.WritableStream),o.abortController=n(i.AbortController),o.arraybuffer=o.fetch||e("arraybuffer"),o.msstream=!o.fetch&&e("ms-stream"),o.mozchunkedarraybuffer=!o.fetch&&e("moz-chunked-arraybuffer"),o.overrideMimeType=o.fetch||!!r()&&n(r().overrideMimeType),t=null}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],430:[function(a,s,e){!function(c,f,o){!function(){"use strict";var u=a("./capability"),e=a("inherits"),t=a("./response"),i=a("readable-stream"),r=t.IncomingMessage,l=t.readyStates;t=s.exports=function(t){var e,r=this,n=(i.Writable.call(r),r._opts=t,r._body=[],r._headers={},t.auth&&r.setHeader("Authorization","Basic "+o.from(t.auth).toString("base64")),Object.keys(t.headers).forEach(function(e){r.setHeader(e,t.headers[e])}),!0);if("disable-fetch"===t.mode||"requestTimeout"in t&&!u.abortController)e=!(n=!1);else if("prefer-streaming"===t.mode)e=!1;else if("allow-wrong-content-type"===t.mode)e=!u.overrideMimeType;else{if(t.mode&&"default"!==t.mode&&"prefer-fast"!==t.mode)throw new Error("Invalid value for opts.mode");e=!0}r._mode=(e=e,n=n,u.fetch&&n?"fetch":u.mozchunkedarraybuffer?"moz-chunked-arraybuffer":u.msstream?"ms-stream":u.arraybuffer&&e?"arraybuffer":"text"),r._fetchTimer=null,r.on("finish",function(){r._onFinish()})};e(t,i.Writable),t.prototype.setHeader=function(e,t){var r=e.toLowerCase();-1===n.indexOf(r)&&(this._headers[r]={name:e,value:t})},t.prototype.getHeader=function(e){e=this._headers[e.toLowerCase()];return e?e.value:null},t.prototype.removeHeader=function(e){delete this._headers[e.toLowerCase()]},t.prototype._onFinish=function(){var t=this;if(!t._destroyed){var e=t._opts,r=t._headers,n=null,i=("GET"!==e.method&&"HEAD"!==e.method&&(n=new Blob(t._body,{type:(r["content-type"]||{}).value||""})),[]);if(Object.keys(r).forEach(function(e){var t=r[e].name,e=r[e].value;Array.isArray(e)?e.forEach(function(e){i.push([t,e])}):i.push([t,e])}),"fetch"===t._mode){var o,a=null;u.abortController&&(a=(o=new AbortController).signal,t._fetchAbortController=o,"requestTimeout"in e)&&0!==e.requestTimeout&&(t._fetchTimer=f.setTimeout(function(){t.emit("requestTimeout"),t._fetchAbortController&&t._fetchAbortController.abort()},e.requestTimeout)),f.fetch(t._opts.url,{method:t._opts.method,headers:i,body:n||void 0,mode:"cors",credentials:e.withCredentials?"include":"same-origin",signal:a}).then(function(e){t._fetchResponse=e,t._connect()},function(e){f.clearTimeout(t._fetchTimer),t._destroyed||t.emit("error",e)})}else{var s=t._xhr=new f.XMLHttpRequest;try{s.open(t._opts.method,t._opts.url,!0)}catch(e){return void c.nextTick(function(){t.emit("error",e)})}"responseType"in s&&(s.responseType=t._mode),"withCredentials"in s&&(s.withCredentials=!!e.withCredentials),"text"===t._mode&&"overrideMimeType"in s&&s.overrideMimeType("text/plain; charset=x-user-defined"),"requestTimeout"in e&&(s.timeout=e.requestTimeout,s.ontimeout=function(){t.emit("requestTimeout")}),i.forEach(function(e){s.setRequestHeader(e[0],e[1])}),t._response=null,s.onreadystatechange=function(){switch(s.readyState){case l.LOADING:case l.DONE:t._onXHRProgress()}},"moz-chunked-arraybuffer"===t._mode&&(s.onprogress=function(){t._onXHRProgress()}),s.onerror=function(){t._destroyed||t.emit("error",new Error("XHR error"))};try{s.send(n)}catch(e){c.nextTick(function(){t.emit("error",e)})}}}},t.prototype._onXHRProgress=function(){!function(e){try{var t=e.status;return null!==t&&0!==t}catch(e){}}(this._xhr)||this._destroyed||(this._response||this._connect(),this._response._onXHRProgress())},t.prototype._connect=function(){var t=this;t._destroyed||(t._response=new r(t._xhr,t._fetchResponse,t._mode,t._fetchTimer),t._response.on("error",function(e){t.emit("error",e)}),t.emit("response",t._response))},t.prototype._write=function(e,t,r){this._body.push(e),r()},t.prototype.abort=t.prototype.destroy=function(){this._destroyed=!0,f.clearTimeout(this._fetchTimer),this._response&&(this._response._destroyed=!0),this._xhr?this._xhr.abort():this._fetchAbortController&&this._fetchAbortController.abort()},t.prototype.end=function(e,t,r){"function"==typeof e&&(r=e,e=void 0),i.Writable.prototype.end.call(this,e,t,r)},t.prototype.flushHeaders=function(){},t.prototype.setTimeout=function(){},t.prototype.setNoDelay=function(){},t.prototype.setSocketKeepAlive=function(){};var n=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","date","dnt","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","via"]}.call(this)}.call(this,a("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},a("buffer").Buffer)},{"./capability":429,"./response":431,_process:420,buffer:9,inherits:72,"readable-stream":446}],431:[function(r,e,n){!function(l,c,f){!function(){"use strict";var a=r("./capability"),e=r("inherits"),s=r("readable-stream"),u=n.readyStates={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},t=n.IncomingMessage=function(e,t,r,n){var i=this;if(s.Readable.call(i),i._mode=r,i.headers={},i.rawHeaders=[],i.trailers={},i.rawTrailers=[],i.on("end",function(){l.nextTick(function(){i.emit("close")})}),"fetch"===r){if(i._fetchResponse=t,i.url=t.url,i.statusCode=t.status,i.statusMessage=t.statusText,t.headers.forEach(function(e,t){i.headers[t.toLowerCase()]=e,i.rawHeaders.push(t,e)}),a.writableStream){var r=new WritableStream({write:function(r){return new Promise(function(e,t){i._destroyed?t():i.push(f.from(r))?e():i._resumeFetch=e})},close:function(){c.clearTimeout(n),i._destroyed||i.push(null)},abort:function(e){i._destroyed||i.emit("error",e)}});try{return void t.body.pipeTo(r).catch(function(e){c.clearTimeout(n),i._destroyed||i.emit("error",e)})}catch(e){}}var o=t.body.getReader();!function t(){o.read().then(function(e){i._destroyed||(e.done?(c.clearTimeout(n),i.push(null)):(i.push(f.from(e.value)),t()))}).catch(function(e){c.clearTimeout(n),i._destroyed||i.emit("error",e)})}()}else i._xhr=e,i._pos=0,i.url=e.responseURL,i.statusCode=e.status,i.statusMessage=e.statusText,e.getAllResponseHeaders().split(/\r?\n/).forEach(function(e){var t,e=e.match(/^([^:]+):\s*(.*)/);e&&("set-cookie"===(t=e[1].toLowerCase())?(void 0===i.headers[t]&&(i.headers[t]=[]),i.headers[t].push(e[2])):void 0!==i.headers[t]?i.headers[t]+=", "+e[2]:i.headers[t]=e[2],i.rawHeaders.push(e[1],e[2]))}),i._charset="x-user-defined",a.overrideMimeType||((r=i.rawHeaders["mime-type"])&&(t=r.match(/;\s*charset=([^;])(;|$)/))&&(i._charset=t[1].toLowerCase()),i._charset)||(i._charset="utf-8")};e(t,s.Readable),t.prototype._read=function(){var e=this._resumeFetch;e&&(this._resumeFetch=null,e())},t.prototype._onXHRProgress=function(){var e=this,t=e._xhr,r=null;switch(e._mode){case"text":if((r=t.responseText).length>e._pos){var n=r.substr(e._pos);if("x-user-defined"===e._charset){for(var i=f.alloc(n.length),o=0;o<n.length;o++)i[o]=255&n.charCodeAt(o);e.push(i)}else e.push(n,e._charset);e._pos=r.length}break;case"arraybuffer":t.readyState===u.DONE&&t.response&&(r=t.response,e.push(f.from(new Uint8Array(r))));break;case"moz-chunked-arraybuffer":r=t.response,t.readyState===u.LOADING&&r&&e.push(f.from(new Uint8Array(r)));break;case"ms-stream":var a,r=t.response;t.readyState===u.LOADING&&((a=new c.MSStreamReader).onprogress=function(){a.result.byteLength>e._pos&&(e.push(f.from(new Uint8Array(a.result.slice(e._pos)))),e._pos=a.result.byteLength)},a.onload=function(){e.push(null)},a.readAsArrayBuffer(r))}e._xhr.readyState===u.DONE&&"ms-stream"!==e._mode&&e.push(null)}}.call(this)}.call(this,r("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},r("buffer").Buffer)},{"./capability":429,_process:420,buffer:9,inherits:72,"readable-stream":446}],432:[function(e,t,r){"use strict";function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var s={};function n(e,n,t){t=t||Error;r=i=t,(o=a).prototype=Object.create(r.prototype),(o.prototype.constructor=o).__proto__=r;var i,r,o=a;function a(e,t,r){return i.call(this,"string"==typeof n?n:n(e,t,r))||this}o.prototype.name=t.name,o.prototype.code=e,s[e]=o}function l(e,t){var r;return Array.isArray(e)?(r=e.length,e=e.map(function(e){return String(e)}),2<r?"one of ".concat(t," ").concat(e.slice(0,r-1).join(", "),", or ")+e[r-1]:2===r?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])):"of ".concat(t," ").concat(String(e))}n("ERR_INVALID_OPT_VALUE",function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'},TypeError),n("ERR_INVALID_ARG_TYPE",function(e,t,r){var n,i,o,a,s;return"string"==typeof t&&(a="not ",t.substr(!s||s<0?0:+s,a.length)===a)?(n="must not be",t=t.replace(/^not /,"")):n="must be",s=e,a=" argument",(void 0===o||o>s.length)&&(o=s.length),(s.substring(o-a.length,o)===a?"The ".concat(e," "):(o=(i="number"!=typeof i?0:i)+(s=".").length>(o=e).length||-1===o.indexOf(s,i)?"argument":"property",'The "'.concat(e,'" ').concat(o," "))).concat(n," ").concat(l(t,"type"))+". Received type ".concat(u(r))},TypeError),n("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),n("ERR_METHOD_NOT_IMPLEMENTED",function(e){return"The "+e+" method is not implemented"}),n("ERR_STREAM_PREMATURE_CLOSE","Premature close"),n("ERR_STREAM_DESTROYED",function(e){return"Cannot call "+e+" after a stream was destroyed"}),n("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),n("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),n("ERR_STREAM_WRITE_AFTER_END","write after end"),n("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),n("ERR_UNKNOWN_ENCODING",function(e){return"Unknown encoding: "+e},TypeError),n("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),t.exports.codes=s},{}],433:[function(c,f,e){!function(l){!function(){"use strict";var e=Object.keys||function(e){var t,r=[];for(t in e)r.push(t);return r},t=(f.exports=a,c("./_stream_readable")),r=c("./_stream_writable");c("inherits")(a,t);for(var n=e(r.prototype),i=0;i<n.length;i++){var o=n[i];a.prototype[o]||(a.prototype[o]=r.prototype[o])}function a(e){if(!(this instanceof a))return new a(e);t.call(this,e),r.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen)&&(this.allowHalfOpen=!1,this.once("end",s))}function s(){this._writableState.ended||l.nextTick(u,this)}function u(e){e.end()}Object.defineProperty(a.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(a.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(a.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(a.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}})}.call(this)}.call(this,c("_process"))},{"./_stream_readable":435,"./_stream_writable":437,_process:420,inherits:72}],434:[function(e,t,r){"use strict";t.exports=i;var n=e("./_stream_transform");function i(e){if(!(this instanceof i))return new i(e);n.call(this,e)}e("inherits")(i,n),i.prototype._transform=function(e,t,r){r(null,e)}},{"./_stream_transform":436,inherits:72}],435:[function(F,N,e){!function(L,Q){!function(){"use strict";function r(e,t){return e.listeners(t).length}(N.exports=b).ReadableState=v,F("events").EventEmitter;var n,i=F("./internal/streams/stream"),f=F("buffer").Buffer,h=Q.Uint8Array||function(){};var o,e,a,t=F("util"),d=t&&t.debuglog?t.debuglog("stream"):function(){},s=F("./internal/streams/buffer_list"),t=F("./internal/streams/destroy"),u=F("./internal/streams/state").getHighWaterMark,l=F("../errors").codes,p=l.ERR_INVALID_ARG_TYPE,g=l.ERR_STREAM_PUSH_AFTER_EOF,c=l.ERR_METHOD_NOT_IMPLEMENTED,y=l.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,A=(F("inherits")(b,i),t.errorOrDestroy),m=["error","close","destroy","pause","resume"];function v(e,t,r){n=n||F("./_stream_duplex"),e=e||{},"boolean"!=typeof r&&(r=t instanceof n),this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.highWaterMark=u(this,e,"readableHighWaterMark",r),this.buffer=new s,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(o=o||F("string_decoder/").StringDecoder,this.decoder=new o(e.encoding),this.encoding=e.encoding)}function b(e){if(n=n||F("./_stream_duplex"),!(this instanceof b))return new b(e);var t=this instanceof n;this._readableState=new v(e,this,t),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy)&&(this._destroy=e.destroy),i.call(this)}function _(e,t,r,n,i){d("readableAddChunk",t);var o,a,s,u=e._readableState;if(null===t){u.reading=!1;{var l=e;var c=u;d("onEofChunk"),c.ended||(c.decoder&&(a=c.decoder.end())&&a.length&&(c.buffer.push(a),c.length+=c.objectMode?1:a.length),c.ended=!0,c.sync?I(l):(c.needReadable=!1,c.emittedReadable||(c.emittedReadable=!0,S(l))))}}else if(i||(a=u,o=s=function(e){return f.isBuffer(e)||e instanceof h}(c=t)||"string"==typeof c||void 0===c||a.objectMode?s:new p("chunk",["string","Buffer","Uint8Array"],c)),o)A(e,o);else if(u.objectMode||t&&0<t.length)if("string"==typeof t||u.objectMode||Object.getPrototypeOf(t)===f.prototype||(l=t,t=f.from(l)),n)u.endEmitted?A(e,new y):w(e,u,t,!0);else if(u.ended)A(e,new g);else{if(u.destroyed)return!1;u.reading=!1,!u.decoder||r||(t=u.decoder.write(t),u.objectMode)||0!==t.length?w(e,u,t,!1):j(e,u)}else n||(u.reading=!1,j(e,u));return!u.ended&&(u.length<u.highWaterMark||0===u.length)}function w(e,t,r,n){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",r)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&I(e)),j(e,t)}Object.defineProperty(b.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),b.prototype.destroy=t.destroy,b.prototype._undestroy=t.undestroy,b.prototype._destroy=function(e,t){t(e)},b.prototype.push=function(e,t){var r,n=this._readableState;return n.objectMode?r=!0:"string"==typeof e&&((t=t||n.defaultEncoding)!==n.encoding&&(e=f.from(e,t),t=""),r=!0),_(this,e,t,!1,r)},b.prototype.unshift=function(e){return _(this,e,null,!0,!1)},b.prototype.isPaused=function(){return!1===this._readableState.flowing},b.prototype.setEncoding=function(e){var t=new(o=o||F("string_decoder/").StringDecoder)(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;for(var r=this._readableState.buffer.head,n="";null!==r;)n+=t.write(r.data),r=r.next;return this._readableState.buffer.clear(),""!==n&&this._readableState.buffer.push(n),this._readableState.length=n.length,this};var E=1073741824;function C(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?(t.flowing&&t.length?t.buffer.head.data:t).length:(e>t.highWaterMark&&(t.highWaterMark=(E<=(r=e)?r=E:(r--,r=(r=(r=(r=(r|=r>>>1)|r>>>2)|r>>>4)|r>>>8)|r>>>16,r++),r)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0));var r}function I(e){var t=e._readableState;d("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(d("emitReadable",t.flowing),t.emittedReadable=!0,L.nextTick(S,e))}function S(e){var t=e._readableState;d("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,B(e)}function j(e,t){t.readingMore||(t.readingMore=!0,L.nextTick(x,e,t))}function x(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var r=t.length;if(d("maybeReadMore read 0"),e.read(0),r===t.length)break}t.readingMore=!1}function O(e){var t=e._readableState;t.readableListening=0<e.listenerCount("readable"),t.resumeScheduled&&!t.paused?t.flowing=!0:0<e.listenerCount("data")&&e.resume()}function P(e){d("readable nexttick read 0"),e.read(0)}function k(e,t){d("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),B(e),t.flowing&&!t.reading&&e.read(0)}function B(e){var t=e._readableState;for(d("flow",t.flowing);t.flowing&&null!==e.read(););}function T(e,t){return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):r=t.buffer.consume(e,t.decoder),r);var r}function M(e){var t=e._readableState;d("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,L.nextTick(D,t,e))}function D(e,t){d("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)&&(!(e=t._writableState)||e.autoDestroy&&e.finished)&&t.destroy()}function R(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}b.prototype.read=function(e){d("read",e),e=parseInt(e,10);var t,r=this._readableState,n=e;return 0!==e&&(r.emittedReadable=!1),0===e&&r.needReadable&&((0!==r.highWaterMark?r.length>=r.highWaterMark:0<r.length)||r.ended)?(d("read: emitReadable",r.length,r.ended),(0===r.length&&r.ended?M:I)(this),null):0===(e=C(e,r))&&r.ended?(0===r.length&&M(this),null):(t=r.needReadable,d("need readable",t),(0===r.length||r.length-e<r.highWaterMark)&&d("length less than watermark",t=!0),r.ended||r.reading?d("reading or ended",t=!1):t&&(d("do read"),r.reading=!0,r.sync=!0,0===r.length&&(r.needReadable=!0),this._read(r.highWaterMark),r.sync=!1,r.reading||(e=C(n,r))),null===(t=0<e?T(e,r):null)?(r.needReadable=r.length<=r.highWaterMark,e=0):(r.length-=e,r.awaitDrain=0),0===r.length&&(r.ended||(r.needReadable=!0),n!==e)&&r.ended&&M(this),null!==t&&this.emit("data",t),t)},b.prototype._read=function(e){A(this,new c("_read()"))},b.prototype.pipe=function(n,e){var i=this,o=this._readableState;switch(o.pipesCount){case 0:o.pipes=n;break;case 1:o.pipes=[o.pipes,n];break;default:o.pipes.push(n)}o.pipesCount+=1,d("pipe count=%d opts=%j",o.pipesCount,e);e=e&&!1===e.end||n===L.stdout||n===L.stderr?p:a;function a(){d("onend"),n.end()}o.endEmitted?L.nextTick(e):i.once("end",e),n.on("unpipe",function e(t,r){d("onunpipe"),t===i&&r&&!1===r.hasUnpiped&&(r.hasUnpiped=!0,d("cleanup"),n.removeListener("close",f),n.removeListener("finish",h),n.removeListener("drain",s),n.removeListener("error",c),n.removeListener("unpipe",e),i.removeListener("end",a),i.removeListener("end",p),i.removeListener("data",l),u=!0,!o.awaitDrain||n._writableState&&!n._writableState.needDrain||s())});t=i;var t,s=function(){var e=t._readableState;d("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&r(t,"data")&&(e.flowing=!0,B(t))},u=(n.on("drain",s),!1);function l(e){d("ondata");e=n.write(e);d("dest.write",e),!1===e&&((1===o.pipesCount&&o.pipes===n||1<o.pipesCount&&-1!==R(o.pipes,n))&&!u&&(d("false write response, pause",o.awaitDrain),o.awaitDrain++),i.pause())}function c(e){d("onerror",e),p(),n.removeListener("error",c),0===r(n,"error")&&A(n,e)}function f(){n.removeListener("finish",h),p()}function h(){d("onfinish"),n.removeListener("close",f),p()}function p(){d("unpipe"),i.unpipe(n)}return i.on("data",l),function(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}(n,"error",c),n.once("close",f),n.once("finish",h),n.emit("pipe",i),o.flowing||(d("pipe resume"),i.resume()),n},b.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0!==t.pipesCount)if(1===t.pipesCount)e&&e!==t.pipes||(e=e||t.pipes,t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r));else if(e){var n=R(t.pipes,e);-1!==n&&(t.pipes.splice(n,1),--t.pipesCount,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r))}else{var i=t.pipes,o=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var a=0;a<o;a++)i[a].emit("unpipe",this,{hasUnpiped:!1})}return this},b.prototype.addListener=b.prototype.on=function(e,t){var t=i.prototype.on.call(this,e,t),r=this._readableState;return"data"===e?(r.readableListening=0<this.listenerCount("readable"),!1!==r.flowing&&this.resume()):"readable"!==e||r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.flowing=!1,r.emittedReadable=!1,d("on readable",r.length,r.reading),r.length?I(this):r.reading||L.nextTick(P,this)),t},b.prototype.removeListener=function(e,t){t=i.prototype.removeListener.call(this,e,t);return"readable"===e&&L.nextTick(O,this),t},b.prototype.removeAllListeners=function(e){var t=i.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&void 0!==e||L.nextTick(O,this),t},b.prototype.resume=function(){var e,t,r=this._readableState;return r.flowing||(d("resume"),r.flowing=!r.readableListening,e=this,(t=r).resumeScheduled||(t.resumeScheduled=!0,L.nextTick(k,e,t))),r.paused=!1,this},b.prototype.pause=function(){return d("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(d("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},b.prototype.wrap=function(t){var e,r=this,n=this._readableState,i=!1;for(e in t.on("end",function(){var e;d("wrapped end"),n.decoder&&!n.ended&&(e=n.decoder.end())&&e.length&&r.push(e),r.push(null)}),t.on("data",function(e){d("wrapped data"),n.decoder&&(e=n.decoder.write(e)),n.objectMode&&null==e||(n.objectMode||e&&e.length)&&!r.push(e)&&(i=!0,t.pause())}),t)void 0===this[e]&&"function"==typeof t[e]&&(this[e]=function(e){return function(){return t[e].apply(t,arguments)}}(e));for(var o=0;o<m.length;o++)t.on(m[o],this.emit.bind(this,m[o]));return this._read=function(e){d("wrapped _read",e),i&&(i=!1,t.resume())},this},"function"==typeof Symbol&&(b.prototype[Symbol.asyncIterator]=function(){return(e=void 0===e?F("./internal/streams/async_iterator"):e)(this)}),Object.defineProperty(b.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(b.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(b.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),b._fromList=T,Object.defineProperty(b.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(b.from=function(e,t){return(a=void 0===a?F("./internal/streams/from"):a)(b,e,t)})}.call(this)}.call(this,F("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../errors":432,"./_stream_duplex":433,"./internal/streams/async_iterator":438,"./internal/streams/buffer_list":439,"./internal/streams/destroy":440,"./internal/streams/from":442,"./internal/streams/state":444,"./internal/streams/stream":445,_process:420,buffer:9,events:20,inherits:72,"string_decoder/":447,util:7}],436:[function(e,t,r){"use strict";t.exports=u;var t=e("../errors").codes,n=t.ERR_METHOD_NOT_IMPLEMENTED,i=t.ERR_MULTIPLE_CALLBACK,o=t.ERR_TRANSFORM_ALREADY_TRANSFORMING,a=t.ERR_TRANSFORM_WITH_LENGTH_0,s=e("./_stream_duplex");function u(e){if(!(this instanceof u))return new u(e);s.call(this,e),this._transformState={afterTransform:function(e,t){var r=this._transformState,n=(r.transforming=!1,r.writecb);if(null===n)return this.emit("error",new i);r.writechunk=null,(r.writecb=null)!=t&&this.push(t),n(e),(r=this._readableState).reading=!1,(r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)}.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush)&&(this._flush=e.flush),this.on("prefinish",l)}function l(){var r=this;"function"!=typeof this._flush||this._readableState.destroyed?c(this,null,null):this._flush(function(e,t){c(r,e,t)})}function c(e,t,r){if(t)return e.emit("error",t);if(null!=r&&e.push(r),e._writableState.length)throw new a;if(e._transformState.transforming)throw new o;e.push(null)}e("inherits")(u,s),u.prototype.push=function(e,t){return this._transformState.needTransform=!1,s.prototype.push.call(this,e,t)},u.prototype._transform=function(e,t,r){r(new n("_transform()"))},u.prototype._write=function(e,t,r){var n=this._transformState;n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming&&(r=this._readableState,n.needTransform||r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)},u.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},u.prototype._destroy=function(e,t){s.prototype._destroy.call(this,e,function(e){t(e)})}},{"../errors":432,"./_stream_duplex":433,inherits:72}],437:[function(k,B,e){!function(O,P){!function(){"use strict";function f(o){var a=this;this.next=null,this.entry=null,this.finish=function(){var e=a,t=o,r=void 0,n=e.entry;for(e.entry=null;n;){var i=n.callback;t.pendingcb--,i(r),n=n.next}t.corkedRequestsFree.next=e}}(B.exports=_).WritableState=b;var r,e={deprecate:k("util-deprecate")},n=k("./internal/streams/stream"),h=k("buffer").Buffer,p=P.Uint8Array||function(){};var i,t=k("./internal/streams/destroy"),o=k("./internal/streams/state").getHighWaterMark,a=k("../errors").codes,d=a.ERR_INVALID_ARG_TYPE,s=a.ERR_METHOD_NOT_IMPLEMENTED,g=a.ERR_MULTIPLE_CALLBACK,u=a.ERR_STREAM_CANNOT_PIPE,l=a.ERR_STREAM_DESTROYED,y=a.ERR_STREAM_NULL_VALUES,A=a.ERR_STREAM_WRITE_AFTER_END,c=a.ERR_UNKNOWN_ENCODING,m=t.errorOrDestroy;function v(){}function b(e,c,t){r=r||k("./_stream_duplex"),e=e||{},"boolean"!=typeof t&&(t=c instanceof r),this.objectMode=!!e.objectMode,t&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=o(this,e,"writableHighWaterMark",t),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;t=(this.destroyed=!1)===e.decodeStrings;this.decodeStrings=!t,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){var t=c,r=t._writableState,n=r.sync,i=r.writecb;if("function"!=typeof i)throw new g;var o,a,s,u,l=r;l.writing=!1,l.writecb=null,l.length-=l.writelen,l.writelen=0,e?(l=t,a=n,s=e,u=i,--(o=r).pendingcb,a?(O.nextTick(u,s),O.nextTick(x,l,o),l._writableState.errorEmitted=!0,m(l,s)):(u(s),l._writableState.errorEmitted=!0,m(l,s),x(l,o))):((e=S(r)||t.destroyed)||r.corked||r.bufferProcessing||!r.bufferedRequest||I(t,r),n?O.nextTick(C,t,r,e,i):C(t,r,e,i))},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new f(this)}function _(e){var t=this instanceof(r=r||k("./_stream_duplex"));if(!t&&!i.call(_,this))return new _(e);this._writableState=new b(e,this,t),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final)&&(this._final=e.final),n.call(this)}function w(e,t,r,n,i,o){r||(a=n,u=i,a=(s=t).objectMode||!1===s.decodeStrings||"string"!=typeof a?a:h.from(a,u),n!==a&&(r=!0,i="buffer",n=a));var a,s=t.objectMode?1:n.length,u=(t.length+=s,t.length<t.highWaterMark);return u||(t.needDrain=!0),t.writing||t.corked?(a=t.lastBufferedRequest,t.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:o,next:null},a?a.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1):E(e,t,!1,s,n,i,o),u}function E(e,t,r,n,i,o,a){t.writelen=n,t.writecb=a,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new l("write")):r?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function C(e,t,r,n){var i;r||(r=e,0===(i=t).length&&i.needDrain&&(i.needDrain=!1,r.emit("drain"))),t.pendingcb--,n(),x(e,t)}function I(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var n=t.bufferedRequestCount,i=new Array(n),n=t.corkedRequestsFree;n.entry=r;for(var o=0,a=!0;r;)(i[o]=r).isBuf||(a=!1),r=r.next,o+=1;i.allBuffers=a,E(e,t,!0,t.length,i,"",n.finish),t.pendingcb++,t.lastBufferedRequest=null,n.next?(t.corkedRequestsFree=n.next,n.next=null):t.corkedRequestsFree=new f(t),t.bufferedRequestCount=0}else{for(;r;){var s=r.chunk,u=r.encoding,l=r.callback;if(E(e,t,!1,t.objectMode?1:s.length,s,u,l),r=r.next,t.bufferedRequestCount--,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}function S(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function j(t,r){t._final(function(e){r.pendingcb--,e&&m(t,e),r.prefinished=!0,t.emit("prefinish"),x(t,r)})}function x(e,t){var r,n,i=S(t);return i&&(r=e,(n=t).prefinished||n.finalCalled||("function"!=typeof r._final||n.destroyed?(n.prefinished=!0,r.emit("prefinish")):(n.pendingcb++,n.finalCalled=!0,O.nextTick(j,r,n))),0===t.pendingcb)&&(t.finished=!0,e.emit("finish"),t.autoDestroy)&&((!(r=e._readableState)||r.autoDestroy&&r.endEmitted)&&e.destroy()),i}k("inherits")(_,n),b.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t};try{Object.defineProperty(b.prototype,"buffer",{get:e.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(i=Function.prototype[Symbol.hasInstance],Object.defineProperty(_,Symbol.hasInstance,{value:function(e){return!!i.call(this,e)||this===_&&e&&e._writableState instanceof b}})):i=function(e){return e instanceof this},_.prototype.pipe=function(){m(this,new u)},_.prototype.write=function(e,t,r){var n,i,o,a,s,u,l=this._writableState,c=!1,f=!l.objectMode&&(f=e,h.isBuffer(f)||f instanceof p);return f&&!h.isBuffer(e)&&(u=e,e=h.from(u)),"function"==typeof t&&(r=t,t=null),t=f?"buffer":t||l.defaultEncoding,"function"!=typeof r&&(r=v),l.ending?(u=this,a=r,s=new A,m(u,s),O.nextTick(a,s)):f||(a=this,s=l,i=r,null===(n=e)?o=new y:"string"==typeof n||s.objectMode||(o=new d("chunk",["string","Buffer"],n)),!o)?(l.pendingcb++,c=w(this,l,f,e,t,r)):(m(a,o),O.nextTick(i,o)),c},_.prototype.cork=function(){this._writableState.corked++},_.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||I(this,e))},_.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),-1<["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase()))return this._writableState.defaultEncoding=e,this;throw new c(e)},Object.defineProperty(_.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(_.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),_.prototype._write=function(e,t,r){r(new s("_write()"))},_.prototype._writev=null,_.prototype.end=function(e,t,r){var n=this._writableState;return"function"==typeof e?(r=e,t=e=null):"function"==typeof t&&(r=t,t=null),null!=e&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),n.ending||(e=this,t=r,(r=n).ending=!0,x(e,r),t&&(r.finished?O.nextTick(t):e.once("finish",t)),r.ended=!0,e.writable=!1),this},Object.defineProperty(_.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(_.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),_.prototype.destroy=t.destroy,_.prototype._undestroy=t.undestroy,_.prototype._destroy=function(e,t){t(e)}}.call(this)}.call(this,k("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../errors":432,"./_stream_duplex":433,"./internal/streams/destroy":440,"./internal/streams/state":444,"./internal/streams/stream":445,_process:420,buffer:9,inherits:72,"util-deprecate":451}],438:[function(n,y,e){!function(g){!function(){"use strict";var e;function r(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}var i=n("./end-of-stream"),o=Symbol("lastResolve"),a=Symbol("lastReject"),s=Symbol("error"),u=Symbol("ended"),l=Symbol("lastPromise"),c=Symbol("handlePromise"),f=Symbol("stream");function h(e,t){return{value:e,done:t}}function p(e){var t,r=e[o];null!==r&&null!==(t=e[f].read())&&(e[l]=null,e[o]=null,e[a]=null,r(h(t,!1)))}var t=Object.getPrototypeOf(function(){}),d=Object.setPrototypeOf((r(e={get stream(){return this[f]},next:function(){var r=this,e=this[s];if(null!==e)return Promise.reject(e);if(this[u])return Promise.resolve(h(void 0,!0));if(this[f].destroyed)return new Promise(function(e,t){g.nextTick(function(){r[s]?t(r[s]):e(h(void 0,!0))})});var t,n,i,e=this[l];if(e)t=new Promise((n=e,i=this,function(e,t){n.then(function(){i[u]?e(h(void 0,!0)):i[c](e,t)},t)}));else{e=this[f].read();if(null!==e)return Promise.resolve(h(e,!1));t=new Promise(this[c])}return this[l]=t}},Symbol.asyncIterator,function(){return this}),r(e,"return",function(){var e=this;return new Promise(function(t,r){e[f].destroy(null,function(e){e?r(e):t(h(void 0,!0))})})}),e),t);y.exports=function(e){var t,n=Object.create(d,(r(t={},f,{value:e,writable:!0}),r(t,o,{value:null,writable:!0}),r(t,a,{value:null,writable:!0}),r(t,s,{value:null,writable:!0}),r(t,u,{value:e._readableState.endEmitted,writable:!0}),r(t,c,{value:function(e,t){var r=n[f].read();r?(n[l]=null,n[o]=null,n[a]=null,e(h(r,!1))):(n[o]=e,n[a]=t)},writable:!0}),t));return n[l]=null,i(e,function(e){var t;e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code?(null!==(t=n[a])&&(n[l]=null,n[o]=null,n[a]=null,t(e)),n[s]=e):(null!==(t=n[o])&&(n[l]=null,n[o]=null,t(h(void 0,!(n[a]=null)))),n[u]=!0)}),e.on("readable",function(e){g.nextTick(p,e)}.bind(null,n)),n}}.call(this)}.call(this,n("_process"))},{"./end-of-stream":441,_process:420}],439:[function(e,t,r){"use strict";function o(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function n(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?o(Object(i),!0).forEach(function(e){var t,r;t=n,r=i[e=e],e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):o(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))})}return n}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a,s=e("buffer").Buffer,u=e("util").inspect,e=u&&u.custom||"inspect";function l(){if(!(this instanceof l))throw new TypeError("Cannot call a class as a function");this.head=null,this.tail=null,this.length=0}t.exports=(t=l,(e=[{key:"push",value:function(e){e={data:e,next:null};0<this.length?this.tail.next=e:this.head=e,this.tail=e,++this.length}},{key:"unshift",value:function(e){e={data:e,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length}},{key:"shift",value:function(){var e;if(0!==this.length)return e=this.head.data,1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r}},{key:"concat",value:function(e){if(0===this.length)return s.alloc(0);for(var t,r,n=s.allocUnsafe(e>>>0),i=this.head,o=0;i;)t=i.data,r=o,s.prototype.copy.call(t,n,r),o+=i.data.length,i=i.next;return n}},{key:"consume",value:function(e,t){var r;return e<this.head.data.length?(r=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):r=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),r}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,r=1,n=t.data;for(e-=n.length;t=t.next;){var i=t.data,o=e>i.length?i.length:e;if(o===i.length?n+=i:n+=i.slice(0,e),0==(e-=o)){o===i.length?(++r,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t).data=i.slice(o);break}++r}return this.length-=r,n}},{key:"_getBuffer",value:function(e){var t=s.allocUnsafe(e),r=this.head,n=1;for(r.data.copy(t),e-=r.data.length;r=r.next;){var i=r.data,o=e>i.length?i.length:e;if(i.copy(t,t.length-e,0,o),0==(e-=o)){o===i.length?(++n,r.next?this.head=r.next:this.head=this.tail=null):(this.head=r).data=i.slice(o);break}++n}return this.length-=n,t}},{key:e,value:function(e,t){return u(this,n({},t,{depth:0,customInspect:!1}))}}])&&i(t.prototype,e),a&&i(t,a),l)},{buffer:9,util:7}],440:[function(e,t,r){!function(u){!function(){"use strict";function o(e,t){s(e,t),a(e)}function a(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function s(e,t){e.emit("error",t)}t.exports={destroy:function(e,t){var r=this,n=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return n||i?t?t(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,u.nextTick(s,this,e)):u.nextTick(s,this,e)):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(e){!t&&e?r._writableState?r._writableState.errorEmitted?u.nextTick(a,r):(r._writableState.errorEmitted=!0,u.nextTick(o,r,e)):u.nextTick(o,r,e):t?(u.nextTick(a,r),t(e)):u.nextTick(a,r)})),this},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var r=e._readableState,n=e._writableState;r&&r.autoDestroy||n&&n.autoDestroy?e.destroy(t):e.emit("error",t)}}}.call(this)}.call(this,e("_process"))},{_process:420}],441:[function(e,t,r){"use strict";var A=e("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function m(){}t.exports=function e(t,r,n){var i,o,a,s,u,l,c,f,h,p,d,g,y;return"function"==typeof r?e(t,null,r):(i=n||m,o=!1,n=function(){if(!o){o=!0;for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];i.apply(this,t)}},a=(r=r||{}).readable||!1!==r.readable&&t.readable,s=r.writable||!1!==r.writable&&t.writable,u=function(){t.writable||c()},l=t._writableState&&t._writableState.finished,c=function(){l=!(s=!1),a||n.call(t)},f=t._readableState&&t._readableState.endEmitted,h=function(){f=!(a=!1),s||n.call(t)},p=function(e){n.call(t,e)},d=function(){var e;return a&&!f?(t._readableState&&t._readableState.ended||(e=new A),n.call(t,e)):s&&!l?(t._writableState&&t._writableState.ended||(e=new A),n.call(t,e)):void 0},g=function(){t.req.on("finish",c)},(y=t).setHeader&&"function"==typeof y.abort?(t.on("complete",c),t.on("abort",d),t.req?g():t.on("request",g)):s&&!t._writableState&&(t.on("end",u),t.on("close",u)),t.on("end",h),t.on("finish",c),!1!==r.error&&t.on("error",p),t.on("close",d),function(){t.removeListener("complete",c),t.removeListener("abort",d),t.removeListener("request",g),t.req&&t.req.removeListener("finish",c),t.removeListener("end",u),t.removeListener("close",u),t.removeListener("finish",c),t.removeListener("end",h),t.removeListener("error",p),t.removeListener("close",d)})}},{"../../../errors":432}],442:[function(e,t,r){"use strict";t.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],443:[function(u,e,t){"use strict";var l;var r=u("../../../errors").codes,s=r.ERR_MISSING_ARGS,c=r.ERR_STREAM_DESTROYED;function f(e){if(e)throw e}function h(r,e,t,n){i=n,o=!1;var i,o,a=!(n=function(){o||(o=!0,i.apply(void 0,arguments))}),s=(r.on("close",function(){a=!0}),(l=void 0===l?u("./end-of-stream"):l)(r,{readable:e,writable:t},function(e){if(e)return n(e);a=!0,n()}),!1);return function(e){if(!a&&!s)return s=!0,(t=r).setHeader&&"function"==typeof t.abort?r.abort():"function"==typeof r.destroy?r.destroy():void n(e||new c("pipe"));var t}}function p(e){e()}function d(e,t){return e.pipe(t)}e.exports=function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];var i,r,o=!(r=n).length||"function"!=typeof r[r.length-1]?f:r.pop();if((n=Array.isArray(n[0])?n[0]:n).length<2)throw new s("streams");var a=n.map(function(e,t){var r=t<n.length-1;return h(e,r,0<t,function(e){i=i||e,e&&a.forEach(p),r||(a.forEach(p),o(i))})});return n.reduce(d)}},{"../../../errors":432,"./end-of-stream":441}],444:[function(e,t,r){"use strict";var a=e("../../../errors").codes.ERR_INVALID_OPT_VALUE;t.exports={getHighWaterMark:function(e,t,r,n){o=n,i=r;var i,o=null!=(t=t).highWaterMark?t.highWaterMark:o?t[i]:null;if(null==o)return e.objectMode?16:16384;if(!isFinite(o)||Math.floor(o)!==o||o<0)throw new a(n?r:"highWaterMark",o);return Math.floor(o)}}},{"../../../errors":432}],445:[function(e,t,r){"use strict";t.exports=e("events").EventEmitter},{events:20}],446:[function(e,t,r){"use strict";(((r=t.exports=e("./lib/_stream_readable.js")).Stream=r).Readable=r).Writable=e("./lib/_stream_writable.js"),r.Duplex=e("./lib/_stream_duplex.js"),r.Transform=e("./lib/_stream_transform.js"),r.PassThrough=e("./lib/_stream_passthrough.js"),r.finished=e("./lib/internal/streams/end-of-stream.js"),r.pipeline=e("./lib/internal/streams/pipeline.js")},{"./lib/_stream_duplex.js":433,"./lib/_stream_passthrough.js":434,"./lib/_stream_readable.js":435,"./lib/_stream_transform.js":436,"./lib/_stream_writable.js":437,"./lib/internal/streams/end-of-stream.js":441,"./lib/internal/streams/pipeline.js":443}],447:[function(e,t,r){"use strict";var n=e("safe-buffer").Buffer,i=n.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"==typeof t||n.isEncoding!==i&&i(e))return t||e;throw new Error("Unknown encoding: "+e)}function a(e){var t;switch(this.encoding=o(e),this.encoding){case"utf16le":this.text=l,this.end=c,t=4;break;case"utf8":this.fillLast=u,t=4;break;case"base64":this.text=f,this.end=h,t=3;break;default:return this.write=p,void(this.end=d)}this.lastNeed=0,this.lastTotal=0,this.lastChar=n.allocUnsafe(t)}function s(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function u(e){var t,r=this.lastTotal-this.lastNeed,n=(t=this,128!=(192&(n=e)[0])?(t.lastNeed=0,"�"):1<t.lastNeed&&1<n.length?128!=(192&n[1])?(t.lastNeed=1,"�"):2<t.lastNeed&&2<n.length&&128!=(192&n[2])?(t.lastNeed=2,"�"):void 0:void 0);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,r,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,r,0,e.length),void(this.lastNeed-=e.length))}function l(e,t){if((e.length-t)%2!=0)return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1);t=e.toString("utf16le",t);if(t){var r=t.charCodeAt(t.length-1);if(55296<=r&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],t.slice(0,-1)}return t}function c(e){var t,e=e&&e.length?this.write(e):"";return this.lastNeed?(t=this.lastTotal-this.lastNeed,e+this.lastChar.toString("utf16le",0,t)):e}function f(e,t){var r=(e.length-t)%3;return 0==r?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,1==r?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function h(e){e=e&&e.length?this.write(e):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function p(e){return e.toString(this.encoding)}function d(e){return e&&e.length?this.write(e):""}(r.StringDecoder=a).prototype.write=function(e){if(0===e.length)return"";var t,r;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""},a.prototype.end=function(e){return e=e&&e.length?this.write(e):"",this.lastNeed?e+"�":e},a.prototype.text=function(e,t){r=this,o=t;var r,n,i,o=(i=(a=e).length-1)<o?0:0<=(n=s(a[i]))?(0<n&&(r.lastNeed=n-1),n):--i<o||-2===n?0:0<=(n=s(a[i]))?(0<n&&(r.lastNeed=n-2),n):!(--i<o||-2===n)&&0<=(n=s(a[i]))?(0<n&&(2===n?n=0:r.lastNeed=n-3),n):0;if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=o;var a=e.length-(o-this.lastNeed);return e.copy(this.lastChar,0,a),e.toString("utf8",t,a)},a.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},{"safe-buffer":448}],448:[function(e,t,r){"use strict";var n=e("buffer"),i=n.Buffer;function o(e,t){for(var r in e)t[r]=e[r]}function a(e,t,r){return i(e,t,r)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?t.exports=n:(o(n,r),r.Buffer=a),a.prototype=Object.create(i.prototype),o(i,a),a.from=function(e,t,r){if("number"==typeof e)throw new TypeError("Argument must not be a number");return i(e,t,r)},a.alloc=function(e,t,r){if("number"!=typeof e)throw new TypeError("Argument must be a number");e=i(e);return void 0!==t?"string"==typeof r?e.fill(t,r):e.fill(t):e.fill(0),e},a.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i(e)},a.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return n.SlowBuffer(e)}},{buffer:9}],449:[function(e,t,r){"use strict";function E(e){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var C=e("punycode"),I=e("./util");function _(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}r.parse=i,r.resolve=function(e,t){return i(e,!1,!0).resolve(t)},r.resolveObject=function(e,t){return e?i(e,!1,!0).resolveObject(t):t},r.format=function(e){return(e=I.isString(e)?i(e):e)instanceof _?e.format():_.prototype.format.call(e)},r.Url=_;var S=/^([a-z0-9.+-]+:)/i,n=/:[0-9]*$/,j=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,r=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),x=["'"].concat(r),O=["%","/","?",";","#"].concat(x),P=["/","?","#"],k=/^[+a-z0-9A-Z_-]{0,63}$/,B=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,T={javascript:!0,"javascript:":!0},M={javascript:!0,"javascript:":!0},R={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},D=e("querystring");function i(e,t,r){var n;return e&&I.isObject(e)&&e instanceof _?e:((n=new _).parse(e,t,r),n)}_.prototype.parse=function(e,t,r){if(!I.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+E(e));var n=e.indexOf("?"),n=-1!==n&&n<e.indexOf("#")?"?":"#",i=e.split(n);i[0]=i[0].replace(/\\/g,"/");var o=(o=e=i.join(n)).trim();if(!r&&1===e.split("#").length){i=j.exec(o);if(i)return this.path=o,this.href=o,this.pathname=i[1],i[2]?(this.search=i[2],this.query=t?D.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var a,n=S.exec(o);if(n&&(a=(n=n[0]).toLowerCase(),this.protocol=a,o=o.substr(n.length)),!(r||n||o.match(/^\/\/[^@\/]+@[^@\/]+/))||!(b="//"===o.substr(0,2))||n&&M[n]||(o=o.substr(2),this.slashes=!0),!M[n]&&(b||n&&!R[n])){for(var s,u=-1,l=0;l<P.length;l++)-1!==(s=o.indexOf(P[l]))&&(-1===u||s<u)&&(u=s);for(-1!==(e=-1===u?o.lastIndexOf("@"):o.lastIndexOf("@",u))&&(i=o.slice(0,e),o=o.slice(e+1),this.auth=decodeURIComponent(i)),u=-1,l=0;l<O.length;l++)-1!==(s=o.indexOf(O[l]))&&(-1===u||s<u)&&(u=s);-1===u&&(u=o.length),this.host=o.slice(0,u),o=o.slice(u),this.parseHost(),this.hostname=this.hostname||"";r="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!r)for(var c=this.hostname.split(/\./),f=(l=0,c.length);l<f;l++){var h=c[l];if(h&&!h.match(k)){for(var p="",d=0,g=h.length;d<g;d++)127<h.charCodeAt(d)?p+="x":p+=h[d];if(!p.match(k)){var y=c.slice(0,l),A=c.slice(l+1),m=h.match(B);m&&(y.push(m[1]),A.unshift(m[2])),A.length&&(o="/"+A.join(".")+o),this.hostname=y.join(".");break}}}255<this.hostname.length?this.hostname="":this.hostname=this.hostname.toLowerCase(),r||(this.hostname=C.toASCII(this.hostname));var v=this.port?":"+this.port:"",b=this.hostname||"";this.host=b+v,this.href+=this.host,r&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==o[0])&&(o="/"+o)}if(!T[a])for(l=0,f=x.length;l<f;l++){var _,w=x[l];-1!==o.indexOf(w)&&((_=encodeURIComponent(w))===w&&(_=escape(w)),o=o.split(w).join(_))}n=o.indexOf("#"),-1!==n&&(this.hash=o.substr(n),o=o.slice(0,n)),e=o.indexOf("?");return-1!==e?(this.search=o.substr(e),this.query=o.substr(e+1),t&&(this.query=D.parse(this.query)),o=o.slice(0,e)):t&&(this.search="",this.query={}),o&&(this.pathname=o),R[a]&&this.hostname&&!this.pathname&&(this.pathname="/"),(this.pathname||this.search)&&(v=this.pathname||"",i=this.search||"",this.path=v+i),this.href=this.format(),this},_.prototype.format=function(){var e=this.auth||"",t=(e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@"),this.protocol||""),r=this.pathname||"",n=this.hash||"",i=!1,o="",e=(this.host?i=e+this.host:this.hostname&&(i=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port)&&(i+=":"+this.port),this.query&&I.isObject(this.query)&&Object.keys(this.query).length&&(o=D.stringify(this.query)),this.search||o&&"?"+o||"");return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||R[t])&&!1!==i?(i="//"+(i||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):i=i||"",n&&"#"!==n.charAt(0)&&(n="#"+n),e&&"?"!==e.charAt(0)&&(e="?"+e),t+i+(r=r.replace(/[?#]/g,function(e){return encodeURIComponent(e)}))+(e=e.replace("#","%23"))+n},_.prototype.resolve=function(e){return this.resolveObject(i(e,!1,!0)).format()},_.prototype.resolveObject=function(e){I.isString(e)&&((h=new _).parse(e,!1,!0),e=h);for(var t=new _,r=Object.keys(this),n=0;n<r.length;n++){var i=r[n];t[i]=this[i]}if(t.hash=e.hash,""!==e.href)if(e.slashes&&!e.protocol){for(var o=Object.keys(e),a=0;a<o.length;a++){var s=o[a];"protocol"!==s&&(t[s]=e[s])}R[t.protocol]&&t.hostname&&!t.pathname&&(t.path=t.pathname="/")}else if(e.protocol&&e.protocol!==t.protocol)if(R[e.protocol]){if(t.protocol=e.protocol,e.host||M[e.protocol])t.pathname=e.pathname;else{for(var u=(e.pathname||"").split("/");u.length&&!(e.host=u.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==u[0]&&u.unshift(""),u.length<2&&u.unshift(""),t.pathname=u.join("/")}t.search=e.search,t.query=e.query,t.host=e.host||"",t.auth=e.auth,t.hostname=e.hostname||e.host,t.port=e.port,(t.pathname||t.search)&&(h=t.pathname||"",p=t.search||"",t.path=h+p),t.slashes=t.slashes||e.slashes}else for(var l=Object.keys(e),c=0;c<l.length;c++){var f=l[c];t[f]=e[f]}else{var h=t.pathname&&"/"===t.pathname.charAt(0),p=e.host||e.pathname&&"/"===e.pathname.charAt(0),h=p||h||t.host&&e.pathname,d=h,g=t.pathname&&t.pathname.split("/")||[],y=(u=e.pathname&&e.pathname.split("/")||[],t.protocol&&!R[t.protocol]);if(y&&(t.hostname="",t.port=null,t.host&&(""===g[0]?g[0]=t.host:g.unshift(t.host)),t.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===u[0]?u[0]=e.host:u.unshift(e.host)),e.host=null),h=h&&(""===u[0]||""===g[0])),p)t.host=(e.host||""===e.host?e:t).host,t.hostname=(e.hostname||""===e.hostname?e:t).hostname,t.search=e.search,t.query=e.query,g=u;else if(u.length)(g=g||[]).pop(),g=g.concat(u),t.search=e.search,t.query=e.query;else if(!I.isNullOrUndefined(e.search))return y&&(t.hostname=t.host=g.shift(),b=!!(t.host&&0<t.host.indexOf("@"))&&t.host.split("@"))&&(t.auth=b.shift(),t.host=t.hostname=b.shift()),t.search=e.search,t.query=e.query,I.isNull(t.pathname)&&I.isNull(t.search)||(t.path=(t.pathname||"")+(t.search||"")),t.href=t.format(),t;if(g.length){for(var A=g.slice(-1)[0],p=(t.host||e.host||1<g.length)&&("."===A||".."===A)||""===A,m=0,v=g.length;0<=v;v--)"."===(A=g[v])?g.splice(v,1):".."===A?(g.splice(v,1),m++):m&&(g.splice(v,1),m--);if(!h&&!d)for(;m--;)g.unshift("..");!h||""===g[0]||g[0]&&"/"===g[0].charAt(0)||g.unshift(""),p&&"/"!==g.join("/").substr(-1)&&g.push("");var b,d=""===g[0]||g[0]&&"/"===g[0].charAt(0);y&&(t.hostname=t.host=!d&&g.length?g.shift():"",b=!!(t.host&&0<t.host.indexOf("@"))&&t.host.split("@"))&&(t.auth=b.shift(),t.host=t.hostname=b.shift()),(h=h||t.host&&g.length)&&!d&&g.unshift(""),g.length?t.pathname=g.join("/"):(t.pathname=null,t.path=null),I.isNull(t.pathname)&&I.isNull(t.search)||(t.path=(t.pathname||"")+(t.search||"")),t.auth=e.auth||t.auth,t.slashes=t.slashes||e.slashes}else t.pathname=null,t.search?t.path="/"+t.search:t.path=null}return t.href=t.format(),t},_.prototype.parseHost=function(){var e=this.host,t=n.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},{"./util":450,punycode:422,querystring:425}],450:[function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}t.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"===n(e)&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},{}],451:[function(e,t,r){!function(r){!function(){"use strict";function n(e){try{if(!r.localStorage)return}catch(e){return}var t=r.localStorage[e];return null!=t&&"true"===String(t).toLowerCase()}t.exports=function(e,t){var r;return n("noDeprecation")?e:(r=!1,function(){if(!r){if(n("throwDeprecation"))throw new Error(t);n("traceDeprecation")?console.trace(t):console.warn(t),r=!0}return e.apply(this,arguments)})}}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],452:[function(e,t,r){"use strict";t.exports=Worker},{}],453:[function(e,t,r){"use strict";function n(e,t){t=new RegExp(t,"g"),e=e.match(t);return e?e.length:0}t.exports=n,t.exports.default=n},{}],454:[function(e,t,r){"use strict";function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var p=e("./index-of-match.js"),d=e("./index-of-match-end.js"),g=e("./count-substring.js");function n(e,t,r){var n=r&&r.debug||!1,i=!(r&&!1===h(r.nested)),o=r&&r.startIndex||0,r=(n&&console.log("[xml-utils] starting findTagByName with",t," and ",r),p(e,"<".concat(t,"[ \n>/]"),o));if(n&&console.log("[xml-utils] start:",r),-1!==r){var a=e.slice(r+t.length),s=d(a,"^[^<]*[ /]>",0),o=-1!==s&&"/"===a[s-1];if(n&&console.log("[xml-utils] selfClosing:",o),!1==o)if(i)for(var u=0,l=1,c=0;-1!==(s=d(a,"[ /]"+t+">",u));){var f=a.substring(u,s+1);if(l+=g(f,"<"+t+"[ \n\t>]"),(c+=g(f,"</"+t+">"))>=l)break;u=s}else s=d(a,"[ /]"+t+">",0);i=r+t.length+s+1;if(n&&console.log("[xml-utils] end:",i),-1!==i)return n=e.slice(r,i),{inner:o?null:n.slice(n.indexOf(">")+1,n.lastIndexOf("<")),outer:n,start:r,end:i}}}t.exports=n,t.exports.default=n},{"./count-substring.js":453,"./index-of-match-end.js":457,"./index-of-match.js":458}],455:[function(e,t,r){"use strict";var u=e("./find-tag-by-name.js");function n(e,t,r){for(var n,i=[],o=r&&r.debug||!1,a=!r||"boolean"!=typeof r.nested||r.nested,s=r&&r.startIndex||0;n=u(e,t,{debug:o,startIndex:s});)s=a?n.start+1+t.length:n.end,i.push(n);return o&&console.log("findTagsByName found",i.length,"tags"),i}t.exports=n,t.exports.default=n},{"./find-tag-by-name.js":454}],456:[function(e,t,r){"use strict";function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t,r){var n=r&&r.debug||!1;n&&console.log("[xml-utils] getting "+t+" in "+e);for(var r="object"===u(e)?e.outer:e,i=r.slice(0,r.indexOf(">")+1),o=['"',"'"],a=0;a<o.length;a++){var s=o[a],s=t+"\\="+s+"([^"+s+"]*)"+s,s=(n&&console.log("[xml-utils] pattern:",s),new RegExp(s).exec(i));if(n&&console.log("[xml-utils] match:",s),s)return s[1]}}t.exports=n,t.exports.default=n},{}],457:[function(e,t,r){"use strict";function n(e,t,r){t=new RegExp(t).exec(e.slice(r));return t?r+t.index+t[0].length-1:-1}t.exports=n,t.exports.default=n},{}],458:[function(e,t,r){"use strict";function n(e,t,r){t=new RegExp(t).exec(e.slice(r));return t?r+t.index:-1}t.exports=n,t.exports.default=n},{}],459:[function(e,t,r){"use strict";t.exports=function(){for(var e={},t=0;t<arguments.length;t++){var r,n=arguments[t];for(r in n)i.call(n,r)&&(e[r]=n[r])}return e};var i=Object.prototype.hasOwnProperty},{}],460:[function(e,t,u){!function(s){!function(){"use strict";var e,i,o,t={env:{emscripten_notify_memory_growth:function(e){o=new Uint8Array(i.exports.memory.buffer)}}};(r=a.prototype).init=function(){return e=e||("undefined"!=typeof fetch?fetch("data:application/wasm;base64,"+n).then(function(e){return e.arrayBuffer()}).then(function(e){return WebAssembly.instantiate(e,t)}):WebAssembly.instantiate(s.from(n,"base64"),t)).then(this._init)},r._init=function(e){i=e.instance,t.env.emscripten_notify_memory_growth(0)},r.decode=function(e,t){var r,n;if(void 0===t&&(t=0),i)return n=e.byteLength,r=i.exports.malloc(n),o.set(e,r),t=t||Number(i.exports.ZSTD_findDecompressedSize(r,n)),e=i.exports.malloc(t),t=i.exports.ZSTD_decompress(e,t,r,n),n=o.slice(e,e+t),i.exports.free(r),i.exports.free(e),n;throw new Error("ZSTDDecoder: Await .init() before decoding.")};var r,n="AGFzbQEAAAABpQEVYAF/AX9gAn9/AGADf39/AX9gBX9/f39/AX9gAX8AYAJ/fwF/YAR/f39/AX9gA39/fwBgBn9/f39/fwF/YAd/f39/f39/AX9gAn9/AX5gAn5+AX5gAABgBX9/f39/AGAGf39/f39/AGAIf39/f39/f38AYAl/f39/f39/f38AYAABf2AIf39/f39/f38Bf2ANf39/f39/f39/f39/fwF/YAF/AX4CJwEDZW52H2Vtc2NyaXB0ZW5fbm90aWZ5X21lbW9yeV9ncm93dGgABANpaAEFAAAFAgEFCwACAQABAgIFBQcAAwABDgsBAQcAEhMHAAUBDAQEAAANBwQCAgYCBAgDAwMDBgEACQkHBgICAAYGAgQUBwYGAwIGAAMCAQgBBwUGCgoEEQAEBAEIAwgDBQgDEA8IAAcABAUBcAECAgUEAQCAAgYJAX8BQaCgwAILB2AHBm1lbW9yeQIABm1hbGxvYwAoBGZyZWUAJgxaU1REX2lzRXJyb3IAaBlaU1REX2ZpbmREZWNvbXByZXNzZWRTaXplAFQPWlNURF9kZWNvbXByZXNzAEoGX3N0YXJ0ACQJBwEAQQELASQKussBaA8AIAAgACgCBCABajYCBAsZACAAKAIAIAAoAgRBH3F0QQAgAWtBH3F2CwgAIABBiH9LC34BBH9BAyEBIAAoAgQiA0EgTQRAIAAoAggiASAAKAIQTwRAIAAQDQ8LIAAoAgwiAiABRgRAQQFBAiADQSBJGw8LIAAgASABIAJrIANBA3YiBCABIARrIAJJIgEbIgJrIgQ2AgggACADIAJBA3RrNgIEIAAgBCgAADYCAAsgAQsUAQF/IAAgARACIQIgACABEAEgAgv3AQECfyACRQRAIABCADcCACAAQQA2AhAgAEIANwIIQbh/DwsgACABNgIMIAAgAUEEajYCECACQQRPBEAgACABIAJqIgFBfGoiAzYCCCAAIAMoAAA2AgAgAUF/ai0AACIBBEAgAEEIIAEQFGs2AgQgAg8LIABBADYCBEF/DwsgACABNgIIIAAgAS0AACIDNgIAIAJBfmoiBEEBTQRAIARBAWtFBEAgACABLQACQRB0IANyIgM2AgALIAAgAS0AAUEIdCADajYCAAsgASACakF/ai0AACIBRQRAIABBADYCBEFsDwsgAEEoIAEQFCACQQN0ams2AgQgAgsWACAAIAEpAAA3AAAgACABKQAINwAICy8BAX8gAUECdEGgHWooAgAgACgCAEEgIAEgACgCBGprQR9xdnEhAiAAIAEQASACCyEAIAFCz9bTvtLHq9lCfiAAfEIfiUKHla+vmLbem55/fgsdAQF/IAAoAgggACgCDEYEfyAAKAIEQSBGBUEACwuCBAEDfyACQYDAAE8EQCAAIAEgAhBnIAAPCyAAIAJqIQMCQCAAIAFzQQNxRQRAAkAgAkEBSARAIAAhAgwBCyAAQQNxRQRAIAAhAgwBCyAAIQIDQCACIAEtAAA6AAAgAUEBaiEBIAJBAWoiAiADTw0BIAJBA3ENAAsLAkAgA0F8cSIEQcAASQ0AIAIgBEFAaiIFSw0AA0AgAiABKAIANgIAIAIgASgCBDYCBCACIAEoAgg2AgggAiABKAIMNgIMIAIgASgCEDYCECACIAEoAhQ2AhQgAiABKAIYNgIYIAIgASgCHDYCHCACIAEoAiA2AiAgAiABKAIkNgIkIAIgASgCKDYCKCACIAEoAiw2AiwgAiABKAIwNgIwIAIgASgCNDYCNCACIAEoAjg2AjggAiABKAI8NgI8IAFBQGshASACQUBrIgIgBU0NAAsLIAIgBE8NAQNAIAIgASgCADYCACABQQRqIQEgAkEEaiICIARJDQALDAELIANBBEkEQCAAIQIMAQsgA0F8aiIEIABJBEAgACECDAELIAAhAgNAIAIgAS0AADoAACACIAEtAAE6AAEgAiABLQACOgACIAIgAS0AAzoAAyABQQRqIQEgAkEEaiICIARNDQALCyACIANJBEADQCACIAEtAAA6AAAgAUEBaiEBIAJBAWoiAiADRw0ACwsgAAsMACAAIAEpAAA3AAALQQECfyAAKAIIIgEgACgCEEkEQEEDDwsgACAAKAIEIgJBB3E2AgQgACABIAJBA3ZrIgE2AgggACABKAAANgIAQQALDAAgACABKAIANgAAC/cCAQJ/AkAgACABRg0AAkAgASACaiAASwRAIAAgAmoiBCABSw0BCyAAIAEgAhALDwsgACABc0EDcSEDAkACQCAAIAFJBEAgAwRAIAAhAwwDCyAAQQNxRQRAIAAhAwwCCyAAIQMDQCACRQ0EIAMgAS0AADoAACABQQFqIQEgAkF/aiECIANBAWoiA0EDcQ0ACwwBCwJAIAMNACAEQQNxBEADQCACRQ0FIAAgAkF/aiICaiIDIAEgAmotAAA6AAAgA0EDcQ0ACwsgAkEDTQ0AA0AgACACQXxqIgJqIAEgAmooAgA2AgAgAkEDSw0ACwsgAkUNAgNAIAAgAkF/aiICaiABIAJqLQAAOgAAIAINAAsMAgsgAkEDTQ0AIAIhBANAIAMgASgCADYCACABQQRqIQEgA0EEaiEDIARBfGoiBEEDSw0ACyACQQNxIQILIAJFDQADQCADIAEtAAA6AAAgA0EBaiEDIAFBAWohASACQX9qIgINAAsLIAAL8wICAn8BfgJAIAJFDQAgACACaiIDQX9qIAE6AAAgACABOgAAIAJBA0kNACADQX5qIAE6AAAgACABOgABIANBfWogAToAACAAIAE6AAIgAkEHSQ0AIANBfGogAToAACAAIAE6AAMgAkEJSQ0AIABBACAAa0EDcSIEaiIDIAFB/wFxQYGChAhsIgE2AgAgAyACIARrQXxxIgRqIgJBfGogATYCACAEQQlJDQAgAyABNgIIIAMgATYCBCACQXhqIAE2AgAgAkF0aiABNgIAIARBGUkNACADIAE2AhggAyABNgIUIAMgATYCECADIAE2AgwgAkFwaiABNgIAIAJBbGogATYCACACQWhqIAE2AgAgAkFkaiABNgIAIAQgA0EEcUEYciIEayICQSBJDQAgAa0iBUIghiAFhCEFIAMgBGohAQNAIAEgBTcDGCABIAU3AxAgASAFNwMIIAEgBTcDACABQSBqIQEgAkFgaiICQR9LDQALCyAACy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAIajYCACADCy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAFajYCACADCx8AIAAgASACKAIEEAg2AgAgARAEGiAAIAJBCGo2AgQLCAAgAGdBH3MLugUBDX8jAEEQayIKJAACfyAEQQNNBEAgCkEANgIMIApBDGogAyAEEAsaIAAgASACIApBDGpBBBAVIgBBbCAAEAMbIAAgACAESxsMAQsgAEEAIAEoAgBBAXRBAmoQECENQVQgAygAACIGQQ9xIgBBCksNABogAiAAQQVqNgIAIAMgBGoiAkF8aiEMIAJBeWohDiACQXtqIRAgAEEGaiELQQQhBSAGQQR2IQRBICAAdCIAQQFyIQkgASgCACEPQQAhAiADIQYCQANAIAlBAkggAiAPS3JFBEAgAiEHAkAgCARAA0AgBEH//wNxQf//A0YEQCAHQRhqIQcgBiAQSQR/IAZBAmoiBigAACAFdgUgBUEQaiEFIARBEHYLIQQMAQsLA0AgBEEDcSIIQQNGBEAgBUECaiEFIARBAnYhBCAHQQNqIQcMAQsLIAcgCGoiByAPSw0EIAVBAmohBQNAIAIgB0kEQCANIAJBAXRqQQA7AQAgAkEBaiECDAELCyAGIA5LQQAgBiAFQQN1aiIHIAxLG0UEQCAHKAAAIAVBB3EiBXYhBAwCCyAEQQJ2IQQLIAYhBwsCfyALQX9qIAQgAEF/anEiBiAAQQF0QX9qIgggCWsiEUkNABogBCAIcSIEQQAgESAEIABIG2shBiALCyEIIA0gAkEBdGogBkF/aiIEOwEAIAlBASAGayAEIAZBAUgbayEJA0AgCSAASARAIABBAXUhACALQX9qIQsMAQsLAn8gByAOS0EAIAcgBSAIaiIFQQN1aiIGIAxLG0UEQCAFQQdxDAELIAUgDCIGIAdrQQN0awshBSACQQFqIQIgBEUhCCAGKAAAIAVBH3F2IQQMAQsLQWwgCUEBRyAFQSBKcg0BGiABIAJBf2o2AgAgBiAFQQdqQQN1aiADawwBC0FQCyEAIApBEGokACAACwkAQQFBBSAAGwsMACAAIAEoAAA2AAALqgMBCn8jAEHwAGsiCiQAIAJBAWohDiAAQQhqIQtBgIAEIAVBf2p0QRB1IQxBACECQQEhBkEBIAV0IglBf2oiDyEIA0AgAiAORkUEQAJAIAEgAkEBdCINai8BACIHQf//A0YEQCALIAhBA3RqIAI2AgQgCEF/aiEIQQEhBwwBCyAGQQAgDCAHQRB0QRB1ShshBgsgCiANaiAHOwEAIAJBAWohAgwBCwsgACAFNgIEIAAgBjYCACAJQQN2IAlBAXZqQQNqIQxBACEAQQAhBkEAIQIDQCAGIA5GBEADQAJAIAAgCUYNACAKIAsgAEEDdGoiASgCBCIGQQF0aiICIAIvAQAiAkEBajsBACABIAUgAhAUayIIOgADIAEgAiAIQf8BcXQgCWs7AQAgASAEIAZBAnQiAmooAgA6AAIgASACIANqKAIANgIEIABBAWohAAwBCwsFIAEgBkEBdGouAQAhDUEAIQcDQCAHIA1ORQRAIAsgAkEDdGogBjYCBANAIAIgDGogD3EiAiAISw0ACyAHQQFqIQcMAQsLIAZBAWohBgwBCwsgCkHwAGokAAsjAEIAIAEQCSAAhUKHla+vmLbem55/fkLj3MqV/M7y9YV/fAsQACAAQn43AwggACABNgIACyQBAX8gAARAIAEoAgQiAgRAIAEoAgggACACEQEADwsgABAmCwsfACAAIAEgAi8BABAINgIAIAEQBBogACACQQRqNgIEC0oBAX9BoCAoAgAiASAAaiIAQX9MBEBBiCBBMDYCAEF/DwsCQCAAPwBBEHRNDQAgABBmDQBBiCBBMDYCAEF/DwtBoCAgADYCACABC9cBAQh/Qbp/IQoCQCACKAIEIgggAigCACIJaiIOIAEgAGtLDQBBbCEKIAkgBCADKAIAIgtrSw0AIAAgCWoiBCACKAIIIgxrIQ0gACABQWBqIg8gCyAJQQAQKSADIAkgC2o2AgACQAJAIAwgBCAFa00EQCANIQUMAQsgDCAEIAZrSw0CIAcgDSAFayIAaiIBIAhqIAdNBEAgBCABIAgQDxoMAgsgBCABQQAgAGsQDyEBIAIgACAIaiIINgIEIAEgAGshBAsgBCAPIAUgCEEBECkLIA4hCgsgCgubAgEBfyMAQYABayINJAAgDSADNgJ8AkAgAkEDSwRAQX8hCQwBCwJAAkACQAJAIAJBAWsOAwADAgELIAZFBEBBuH8hCQwEC0FsIQkgBS0AACICIANLDQMgACAHIAJBAnQiAmooAgAgAiAIaigCABA7IAEgADYCAEEBIQkMAwsgASAJNgIAQQAhCQwCCyAKRQRAQWwhCQwCC0EAIQkgC0UgDEEZSHINAUEIIAR0QQhqIQBBACECA0AgAiAATw0CIAJBQGshAgwAAAsAC0FsIQkgDSANQfwAaiANQfgAaiAFIAYQFSICEAMNACANKAJ4IgMgBEsNACAAIA0gDSgCfCAHIAggAxAYIAEgADYCACACIQkLIA1BgAFqJAAgCQsLACAAIAEgAhALGgsQACAALwAAIAAtAAJBEHRyCy8AAn9BuH8gAUEISQ0AGkFyIAAoAAQiAEF3Sw0AGkG4fyAAQQhqIgAgACABSxsLCwkAIAAgATsAAAsDAAELigYBBX8gACAAKAIAIgVBfnE2AgBBACAAIAVBAXZqQYQgKAIAIgQgAEYbIQECQAJAIAAoAgQiAkUNACACKAIAIgNBAXENACACQQhqIgUgA0EBdkF4aiIDQQggA0EISxtnQR9zQQJ0QYAfaiIDKAIARgRAIAMgAigCDDYCAAsgAigCCCIDBEAgAyACKAIMNgIECyACKAIMIgMEQCADIAIoAgg2AgALIAIgAigCACAAKAIAQX5xajYCAEGEICEAAkACQCABRQ0AIAEgAjYCBCABKAIAIgNBAXENASADQQF2QXhqIgNBCCADQQhLG2dBH3NBAnRBgB9qIgMoAgAgAUEIakYEQCADIAEoAgw2AgALIAEoAggiAwRAIAMgASgCDDYCBAsgASgCDCIDBEAgAyABKAIINgIAQYQgKAIAIQQLIAIgAigCACABKAIAQX5xajYCACABIARGDQAgASABKAIAQQF2akEEaiEACyAAIAI2AgALIAIoAgBBAXZBeGoiAEEIIABBCEsbZ0Efc0ECdEGAH2oiASgCACEAIAEgBTYCACACIAA2AgwgAkEANgIIIABFDQEgACAFNgIADwsCQCABRQ0AIAEoAgAiAkEBcQ0AIAJBAXZBeGoiAkEIIAJBCEsbZ0Efc0ECdEGAH2oiAigCACABQQhqRgRAIAIgASgCDDYCAAsgASgCCCICBEAgAiABKAIMNgIECyABKAIMIgIEQCACIAEoAgg2AgBBhCAoAgAhBAsgACAAKAIAIAEoAgBBfnFqIgI2AgACQCABIARHBEAgASABKAIAQQF2aiAANgIEIAAoAgAhAgwBC0GEICAANgIACyACQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgIoAgAhASACIABBCGoiAjYCACAAIAE2AgwgAEEANgIIIAFFDQEgASACNgIADwsgBUEBdkF4aiIBQQggAUEISxtnQR9zQQJ0QYAfaiICKAIAIQEgAiAAQQhqIgI2AgAgACABNgIMIABBADYCCCABRQ0AIAEgAjYCAAsLDgAgAARAIABBeGoQJQsLgAIBA38CQCAAQQ9qQXhxQYQgKAIAKAIAQQF2ayICEB1Bf0YNAAJAQYQgKAIAIgAoAgAiAUEBcQ0AIAFBAXZBeGoiAUEIIAFBCEsbZ0Efc0ECdEGAH2oiASgCACAAQQhqRgRAIAEgACgCDDYCAAsgACgCCCIBBEAgASAAKAIMNgIECyAAKAIMIgFFDQAgASAAKAIINgIAC0EBIQEgACAAKAIAIAJBAXRqIgI2AgAgAkEBcQ0AIAJBAXZBeGoiAkEIIAJBCEsbZ0Efc0ECdEGAH2oiAygCACECIAMgAEEIaiIDNgIAIAAgAjYCDCAAQQA2AgggAkUNACACIAM2AgALIAELtwIBA38CQAJAIABBASAAGyICEDgiAA0AAkACQEGEICgCACIARQ0AIAAoAgAiA0EBcQ0AIAAgA0EBcjYCACADQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgEoAgAgAEEIakYEQCABIAAoAgw2AgALIAAoAggiAQRAIAEgACgCDDYCBAsgACgCDCIBBEAgASAAKAIINgIACyACECchAkEAIQFBhCAoAgAhACACDQEgACAAKAIAQX5xNgIAQQAPCyACQQ9qQXhxIgMQHSICQX9GDQIgAkEHakF4cSIAIAJHBEAgACACaxAdQX9GDQMLAkBBhCAoAgAiAUUEQEGAICAANgIADAELIAAgATYCBAtBhCAgADYCACAAIANBAXRBAXI2AgAMAQsgAEUNAQsgAEEIaiEBCyABC7kDAQJ/IAAgA2ohBQJAIANBB0wEQANAIAAgBU8NAiAAIAItAAA6AAAgAEEBaiEAIAJBAWohAgwAAAsACyAEQQFGBEACQCAAIAJrIgZBB00EQCAAIAItAAA6AAAgACACLQABOgABIAAgAi0AAjoAAiAAIAItAAM6AAMgAEEEaiACIAZBAnQiBkHAHmooAgBqIgIQFyACIAZB4B5qKAIAayECDAELIAAgAhAMCyACQQhqIQIgAEEIaiEACwJAAkACQAJAIAUgAU0EQCAAIANqIQEgBEEBRyAAIAJrQQ9Kcg0BA0AgACACEAwgAkEIaiECIABBCGoiACABSQ0ACwwFCyAAIAFLBEAgACEBDAQLIARBAUcgACACa0EPSnINASAAIQMgAiEEA0AgAyAEEAwgBEEIaiEEIANBCGoiAyABSQ0ACwwCCwNAIAAgAhAHIAJBEGohAiAAQRBqIgAgAUkNAAsMAwsgACEDIAIhBANAIAMgBBAHIARBEGohBCADQRBqIgMgAUkNAAsLIAIgASAAa2ohAgsDQCABIAVPDQEgASACLQAAOgAAIAFBAWohASACQQFqIQIMAAALAAsLQQECfyAAIAAoArjgASIDNgLE4AEgACgCvOABIQQgACABNgK84AEgACABIAJqNgK44AEgACABIAQgA2tqNgLA4AELpgEBAX8gACAAKALs4QEQFjYCyOABIABCADcD+OABIABCADcDuOABIABBwOABakIANwMAIABBqNAAaiIBQYyAgOAANgIAIABBADYCmOIBIABCADcDiOEBIABCAzcDgOEBIABBrNABakHgEikCADcCACAAQbTQAWpB6BIoAgA2AgAgACABNgIMIAAgAEGYIGo2AgggACAAQaAwajYCBCAAIABBEGo2AgALYQEBf0G4fyEDAkAgAUEDSQ0AIAIgABAhIgFBA3YiADYCCCACIAFBAXE2AgQgAiABQQF2QQNxIgM2AgACQCADQX9qIgFBAksNAAJAIAFBAWsOAgEAAgtBbA8LIAAhAwsgAwsMACAAIAEgAkEAEC4LiAQCA38CfiADEBYhBCAAQQBBKBAQIQAgBCACSwRAIAQPCyABRQRAQX8PCwJAAkAgA0EBRg0AIAEoAAAiBkGo6r5pRg0AQXYhAyAGQXBxQdDUtMIBRw0BQQghAyACQQhJDQEgAEEAQSgQECEAIAEoAAQhASAAQQE2AhQgACABrTcDAEEADwsgASACIAMQLyIDIAJLDQAgACADNgIYQXIhAyABIARqIgVBf2otAAAiAkEIcQ0AIAJBIHEiBkUEQEFwIQMgBS0AACIFQacBSw0BIAVBB3GtQgEgBUEDdkEKaq2GIgdCA4h+IAd8IQggBEEBaiEECyACQQZ2IQMgAkECdiEFAkAgAkEDcUF/aiICQQJLBEBBACECDAELAkACQAJAIAJBAWsOAgECAAsgASAEai0AACECIARBAWohBAwCCyABIARqLwAAIQIgBEECaiEEDAELIAEgBGooAAAhAiAEQQRqIQQLIAVBAXEhBQJ+AkACQAJAIANBf2oiA0ECTQRAIANBAWsOAgIDAQtCfyAGRQ0DGiABIARqMQAADAMLIAEgBGovAACtQoACfAwCCyABIARqKAAArQwBCyABIARqKQAACyEHIAAgBTYCICAAIAI2AhwgACAHNwMAQQAhAyAAQQA2AhQgACAHIAggBhsiBzcDCCAAIAdCgIAIIAdCgIAIVBs+AhALIAMLWwEBf0G4fyEDIAIQFiICIAFNBH8gACACakF/ai0AACIAQQNxQQJ0QaAeaigCACACaiAAQQZ2IgFBAnRBsB5qKAIAaiAAQSBxIgBFaiABRSAAQQV2cWoFQbh/CwsdACAAKAKQ4gEQWiAAQQA2AqDiASAAQgA3A5DiAQu1AwEFfyMAQZACayIKJABBuH8hBgJAIAVFDQAgBCwAACIIQf8BcSEHAkAgCEF/TARAIAdBgn9qQQF2IgggBU8NAkFsIQYgB0GBf2oiBUGAAk8NAiAEQQFqIQdBACEGA0AgBiAFTwRAIAUhBiAIIQcMAwUgACAGaiAHIAZBAXZqIgQtAABBBHY6AAAgACAGQQFyaiAELQAAQQ9xOgAAIAZBAmohBgwBCwAACwALIAcgBU8NASAAIARBAWogByAKEFMiBhADDQELIAYhBEEAIQYgAUEAQTQQECEJQQAhBQNAIAQgBkcEQCAAIAZqIggtAAAiAUELSwRAQWwhBgwDBSAJIAFBAnRqIgEgASgCAEEBajYCACAGQQFqIQZBASAILQAAdEEBdSAFaiEFDAILAAsLQWwhBiAFRQ0AIAUQFEEBaiIBQQxLDQAgAyABNgIAQQFBASABdCAFayIDEBQiAXQgA0cNACAAIARqIAFBAWoiADoAACAJIABBAnRqIgAgACgCAEEBajYCACAJKAIEIgBBAkkgAEEBcXINACACIARBAWo2AgAgB0EBaiEGCyAKQZACaiQAIAYLxhEBDH8jAEHwAGsiBSQAQWwhCwJAIANBCkkNACACLwAAIQogAi8AAiEJIAIvAAQhByAFQQhqIAQQDgJAIAMgByAJIApqakEGaiIMSQ0AIAUtAAohCCAFQdgAaiACQQZqIgIgChAGIgsQAw0BIAVBQGsgAiAKaiICIAkQBiILEAMNASAFQShqIAIgCWoiAiAHEAYiCxADDQEgBUEQaiACIAdqIAMgDGsQBiILEAMNASAAIAFqIg9BfWohECAEQQRqIQZBASELIAAgAUEDakECdiIDaiIMIANqIgIgA2oiDiEDIAIhBCAMIQcDQCALIAMgEElxBEAgACAGIAVB2ABqIAgQAkECdGoiCS8BADsAACAFQdgAaiAJLQACEAEgCS0AAyELIAcgBiAFQUBrIAgQAkECdGoiCS8BADsAACAFQUBrIAktAAIQASAJLQADIQogBCAGIAVBKGogCBACQQJ0aiIJLwEAOwAAIAVBKGogCS0AAhABIAktAAMhCSADIAYgBUEQaiAIEAJBAnRqIg0vAQA7AAAgBUEQaiANLQACEAEgDS0AAyENIAAgC2oiCyAGIAVB2ABqIAgQAkECdGoiAC8BADsAACAFQdgAaiAALQACEAEgAC0AAyEAIAcgCmoiCiAGIAVBQGsgCBACQQJ0aiIHLwEAOwAAIAVBQGsgBy0AAhABIActAAMhByAEIAlqIgkgBiAFQShqIAgQAkECdGoiBC8BADsAACAFQShqIAQtAAIQASAELQADIQQgAyANaiIDIAYgBUEQaiAIEAJBAnRqIg0vAQA7AAAgBUEQaiANLQACEAEgACALaiEAIAcgCmohByAEIAlqIQQgAyANLQADaiEDIAVB2ABqEA0gBUFAaxANciAFQShqEA1yIAVBEGoQDXJFIQsMAQsLIAQgDksgByACS3INAEFsIQsgACAMSw0BIAxBfWohCQNAQQAgACAJSSAFQdgAahAEGwRAIAAgBiAFQdgAaiAIEAJBAnRqIgovAQA7AAAgBUHYAGogCi0AAhABIAAgCi0AA2oiACAGIAVB2ABqIAgQAkECdGoiCi8BADsAACAFQdgAaiAKLQACEAEgACAKLQADaiEADAEFIAxBfmohCgNAIAVB2ABqEAQgACAKS3JFBEAgACAGIAVB2ABqIAgQAkECdGoiCS8BADsAACAFQdgAaiAJLQACEAEgACAJLQADaiEADAELCwNAIAAgCk0EQCAAIAYgBUHYAGogCBACQQJ0aiIJLwEAOwAAIAVB2ABqIAktAAIQASAAIAktAANqIQAMAQsLAkAgACAMTw0AIAAgBiAFQdgAaiAIEAIiAEECdGoiDC0AADoAACAMLQADQQFGBEAgBUHYAGogDC0AAhABDAELIAUoAlxBH0sNACAFQdgAaiAGIABBAnRqLQACEAEgBSgCXEEhSQ0AIAVBIDYCXAsgAkF9aiEMA0BBACAHIAxJIAVBQGsQBBsEQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiIAIAYgBUFAayAIEAJBAnRqIgcvAQA7AAAgBUFAayAHLQACEAEgACAHLQADaiEHDAEFIAJBfmohDANAIAVBQGsQBCAHIAxLckUEQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiEHDAELCwNAIAcgDE0EQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiEHDAELCwJAIAcgAk8NACAHIAYgBUFAayAIEAIiAEECdGoiAi0AADoAACACLQADQQFGBEAgBUFAayACLQACEAEMAQsgBSgCREEfSw0AIAVBQGsgBiAAQQJ0ai0AAhABIAUoAkRBIUkNACAFQSA2AkQLIA5BfWohAgNAQQAgBCACSSAFQShqEAQbBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2oiACAGIAVBKGogCBACQQJ0aiIELwEAOwAAIAVBKGogBC0AAhABIAAgBC0AA2ohBAwBBSAOQX5qIQIDQCAFQShqEAQgBCACS3JFBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2ohBAwBCwsDQCAEIAJNBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2ohBAwBCwsCQCAEIA5PDQAgBCAGIAVBKGogCBACIgBBAnRqIgItAAA6AAAgAi0AA0EBRgRAIAVBKGogAi0AAhABDAELIAUoAixBH0sNACAFQShqIAYgAEECdGotAAIQASAFKAIsQSFJDQAgBUEgNgIsCwNAQQAgAyAQSSAFQRBqEAQbBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2oiACAGIAVBEGogCBACQQJ0aiICLwEAOwAAIAVBEGogAi0AAhABIAAgAi0AA2ohAwwBBSAPQX5qIQIDQCAFQRBqEAQgAyACS3JFBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2ohAwwBCwsDQCADIAJNBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2ohAwwBCwsCQCADIA9PDQAgAyAGIAVBEGogCBACIgBBAnRqIgItAAA6AAAgAi0AA0EBRgRAIAVBEGogAi0AAhABDAELIAUoAhRBH0sNACAFQRBqIAYgAEECdGotAAIQASAFKAIUQSFJDQAgBUEgNgIUCyABQWwgBUHYAGoQCiAFQUBrEApxIAVBKGoQCnEgBUEQahAKcRshCwwJCwAACwALAAALAAsAAAsACwAACwALQWwhCwsgBUHwAGokACALC7UEAQ5/IwBBEGsiBiQAIAZBBGogABAOQVQhBQJAIARB3AtJDQAgBi0ABCEHIANB8ARqQQBB7AAQECEIIAdBDEsNACADQdwJaiIJIAggBkEIaiAGQQxqIAEgAhAxIhAQA0UEQCAGKAIMIgQgB0sNASADQdwFaiEPIANBpAVqIREgAEEEaiESIANBqAVqIQEgBCEFA0AgBSICQX9qIQUgCCACQQJ0aigCAEUNAAsgAkEBaiEOQQEhBQNAIAUgDk9FBEAgCCAFQQJ0IgtqKAIAIQwgASALaiAKNgIAIAVBAWohBSAKIAxqIQoMAQsLIAEgCjYCAEEAIQUgBigCCCELA0AgBSALRkUEQCABIAUgCWotAAAiDEECdGoiDSANKAIAIg1BAWo2AgAgDyANQQF0aiINIAw6AAEgDSAFOgAAIAVBAWohBQwBCwtBACEBIANBADYCqAUgBEF/cyAHaiEJQQEhBQNAIAUgDk9FBEAgCCAFQQJ0IgtqKAIAIQwgAyALaiABNgIAIAwgBSAJanQgAWohASAFQQFqIQUMAQsLIAcgBEEBaiIBIAJrIgRrQQFqIQgDQEEBIQUgBCAIT0UEQANAIAUgDk9FBEAgBUECdCIJIAMgBEE0bGpqIAMgCWooAgAgBHY2AgAgBUEBaiEFDAELCyAEQQFqIQQMAQsLIBIgByAPIAogESADIAIgARBkIAZBAToABSAGIAc6AAYgACAGKAIENgIACyAQIQULIAZBEGokACAFC8ENAQt/IwBB8ABrIgUkAEFsIQkCQCADQQpJDQAgAi8AACEKIAIvAAIhDCACLwAEIQYgBUEIaiAEEA4CQCADIAYgCiAMampBBmoiDUkNACAFLQAKIQcgBUHYAGogAkEGaiICIAoQBiIJEAMNASAFQUBrIAIgCmoiAiAMEAYiCRADDQEgBUEoaiACIAxqIgIgBhAGIgkQAw0BIAVBEGogAiAGaiADIA1rEAYiCRADDQEgACABaiIOQX1qIQ8gBEEEaiEGQQEhCSAAIAFBA2pBAnYiAmoiCiACaiIMIAJqIg0hAyAMIQQgCiECA0AgCSADIA9JcQRAIAYgBUHYAGogBxACQQF0aiIILQAAIQsgBUHYAGogCC0AARABIAAgCzoAACAGIAVBQGsgBxACQQF0aiIILQAAIQsgBUFAayAILQABEAEgAiALOgAAIAYgBUEoaiAHEAJBAXRqIggtAAAhCyAFQShqIAgtAAEQASAEIAs6AAAgBiAFQRBqIAcQAkEBdGoiCC0AACELIAVBEGogCC0AARABIAMgCzoAACAGIAVB2ABqIAcQAkEBdGoiCC0AACELIAVB2ABqIAgtAAEQASAAIAs6AAEgBiAFQUBrIAcQAkEBdGoiCC0AACELIAVBQGsgCC0AARABIAIgCzoAASAGIAVBKGogBxACQQF0aiIILQAAIQsgBUEoaiAILQABEAEgBCALOgABIAYgBUEQaiAHEAJBAXRqIggtAAAhCyAFQRBqIAgtAAEQASADIAs6AAEgA0ECaiEDIARBAmohBCACQQJqIQIgAEECaiEAIAkgBUHYAGoQDUVxIAVBQGsQDUVxIAVBKGoQDUVxIAVBEGoQDUVxIQkMAQsLIAQgDUsgAiAMS3INAEFsIQkgACAKSw0BIApBfWohCQNAIAVB2ABqEAQgACAJT3JFBEAgBiAFQdgAaiAHEAJBAXRqIggtAAAhCyAFQdgAaiAILQABEAEgACALOgAAIAYgBUHYAGogBxACQQF0aiIILQAAIQsgBUHYAGogCC0AARABIAAgCzoAASAAQQJqIQAMAQsLA0AgBUHYAGoQBCAAIApPckUEQCAGIAVB2ABqIAcQAkEBdGoiCS0AACEIIAVB2ABqIAktAAEQASAAIAg6AAAgAEEBaiEADAELCwNAIAAgCkkEQCAGIAVB2ABqIAcQAkEBdGoiCS0AACEIIAVB2ABqIAktAAEQASAAIAg6AAAgAEEBaiEADAELCyAMQX1qIQADQCAFQUBrEAQgAiAAT3JFBEAgBiAFQUBrIAcQAkEBdGoiCi0AACEJIAVBQGsgCi0AARABIAIgCToAACAGIAVBQGsgBxACQQF0aiIKLQAAIQkgBUFAayAKLQABEAEgAiAJOgABIAJBAmohAgwBCwsDQCAFQUBrEAQgAiAMT3JFBEAgBiAFQUBrIAcQAkEBdGoiAC0AACEKIAVBQGsgAC0AARABIAIgCjoAACACQQFqIQIMAQsLA0AgAiAMSQRAIAYgBUFAayAHEAJBAXRqIgAtAAAhCiAFQUBrIAAtAAEQASACIAo6AAAgAkEBaiECDAELCyANQX1qIQADQCAFQShqEAQgBCAAT3JFBEAgBiAFQShqIAcQAkEBdGoiAi0AACEKIAVBKGogAi0AARABIAQgCjoAACAGIAVBKGogBxACQQF0aiICLQAAIQogBUEoaiACLQABEAEgBCAKOgABIARBAmohBAwBCwsDQCAFQShqEAQgBCANT3JFBEAgBiAFQShqIAcQAkEBdGoiAC0AACECIAVBKGogAC0AARABIAQgAjoAACAEQQFqIQQMAQsLA0AgBCANSQRAIAYgBUEoaiAHEAJBAXRqIgAtAAAhAiAFQShqIAAtAAEQASAEIAI6AAAgBEEBaiEEDAELCwNAIAVBEGoQBCADIA9PckUEQCAGIAVBEGogBxACQQF0aiIALQAAIQIgBUEQaiAALQABEAEgAyACOgAAIAYgBUEQaiAHEAJBAXRqIgAtAAAhAiAFQRBqIAAtAAEQASADIAI6AAEgA0ECaiEDDAELCwNAIAVBEGoQBCADIA5PckUEQCAGIAVBEGogBxACQQF0aiIALQAAIQIgBUEQaiAALQABEAEgAyACOgAAIANBAWohAwwBCwsDQCADIA5JBEAgBiAFQRBqIAcQAkEBdGoiAC0AACECIAVBEGogAC0AARABIAMgAjoAACADQQFqIQMMAQsLIAFBbCAFQdgAahAKIAVBQGsQCnEgBUEoahAKcSAFQRBqEApxGyEJDAELQWwhCQsgBUHwAGokACAJC8oCAQR/IwBBIGsiBSQAIAUgBBAOIAUtAAIhByAFQQhqIAIgAxAGIgIQA0UEQCAEQQRqIQIgACABaiIDQX1qIQQDQCAFQQhqEAQgACAET3JFBEAgAiAFQQhqIAcQAkEBdGoiBi0AACEIIAVBCGogBi0AARABIAAgCDoAACACIAVBCGogBxACQQF0aiIGLQAAIQggBUEIaiAGLQABEAEgACAIOgABIABBAmohAAwBCwsDQCAFQQhqEAQgACADT3JFBEAgAiAFQQhqIAcQAkEBdGoiBC0AACEGIAVBCGogBC0AARABIAAgBjoAACAAQQFqIQAMAQsLA0AgACADT0UEQCACIAVBCGogBxACQQF0aiIELQAAIQYgBUEIaiAELQABEAEgACAGOgAAIABBAWohAAwBCwsgAUFsIAVBCGoQChshAgsgBUEgaiQAIAILtgMBCX8jAEEQayIGJAAgBkEANgIMIAZBADYCCEFUIQQCQAJAIANBQGsiDCADIAZBCGogBkEMaiABIAIQMSICEAMNACAGQQRqIAAQDiAGKAIMIgcgBi0ABEEBaksNASAAQQRqIQogBkEAOgAFIAYgBzoABiAAIAYoAgQ2AgAgB0EBaiEJQQEhBANAIAQgCUkEQCADIARBAnRqIgEoAgAhACABIAU2AgAgACAEQX9qdCAFaiEFIARBAWohBAwBCwsgB0EBaiEHQQAhBSAGKAIIIQkDQCAFIAlGDQEgAyAFIAxqLQAAIgRBAnRqIgBBASAEdEEBdSILIAAoAgAiAWoiADYCACAHIARrIQhBACEEAkAgC0EDTQRAA0AgBCALRg0CIAogASAEakEBdGoiACAIOgABIAAgBToAACAEQQFqIQQMAAALAAsDQCABIABPDQEgCiABQQF0aiIEIAg6AAEgBCAFOgAAIAQgCDoAAyAEIAU6AAIgBCAIOgAFIAQgBToABCAEIAg6AAcgBCAFOgAGIAFBBGohAQwAAAsACyAFQQFqIQUMAAALAAsgAiEECyAGQRBqJAAgBAutAQECfwJAQYQgKAIAIABHIAAoAgBBAXYiAyABa0F4aiICQXhxQQhHcgR/IAIFIAMQJ0UNASACQQhqC0EQSQ0AIAAgACgCACICQQFxIAAgAWpBD2pBeHEiASAAa0EBdHI2AgAgASAANgIEIAEgASgCAEEBcSAAIAJBAXZqIAFrIgJBAXRyNgIAQYQgIAEgAkH/////B3FqQQRqQYQgKAIAIABGGyABNgIAIAEQJQsLygIBBX8CQAJAAkAgAEEIIABBCEsbZ0EfcyAAaUEBR2oiAUEESSAAIAF2cg0AIAFBAnRB/B5qKAIAIgJFDQADQCACQXhqIgMoAgBBAXZBeGoiBSAATwRAIAIgBUEIIAVBCEsbZ0Efc0ECdEGAH2oiASgCAEYEQCABIAIoAgQ2AgALDAMLIARBHksNASAEQQFqIQQgAigCBCICDQALC0EAIQMgAUEgTw0BA0AgAUECdEGAH2ooAgAiAkUEQCABQR5LIQIgAUEBaiEBIAJFDQEMAwsLIAIgAkF4aiIDKAIAQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgEoAgBGBEAgASACKAIENgIACwsgAigCACIBBEAgASACKAIENgIECyACKAIEIgEEQCABIAIoAgA2AgALIAMgAygCAEEBcjYCACADIAAQNwsgAwvhCwINfwV+IwBB8ABrIgckACAHIAAoAvDhASIINgJcIAEgAmohDSAIIAAoAoDiAWohDwJAAkAgBUUEQCABIQQMAQsgACgCxOABIRAgACgCwOABIREgACgCvOABIQ4gAEEBNgKM4QFBACEIA0AgCEEDRwRAIAcgCEECdCICaiAAIAJqQazQAWooAgA2AkQgCEEBaiEIDAELC0FsIQwgB0EYaiADIAQQBhADDQEgB0EsaiAHQRhqIAAoAgAQEyAHQTRqIAdBGGogACgCCBATIAdBPGogB0EYaiAAKAIEEBMgDUFgaiESIAEhBEEAIQwDQCAHKAIwIAcoAixBA3RqKQIAIhRCEIinQf8BcSEIIAcoAkAgBygCPEEDdGopAgAiFUIQiKdB/wFxIQsgBygCOCAHKAI0QQN0aikCACIWQiCIpyEJIBVCIIghFyAUQiCIpyECAkAgFkIQiKdB/wFxIgNBAk8EQAJAIAZFIANBGUlyRQRAIAkgB0EYaiADQSAgBygCHGsiCiAKIANLGyIKEAUgAyAKayIDdGohCSAHQRhqEAQaIANFDQEgB0EYaiADEAUgCWohCQwBCyAHQRhqIAMQBSAJaiEJIAdBGGoQBBoLIAcpAkQhGCAHIAk2AkQgByAYNwNIDAELAkAgA0UEQCACBEAgBygCRCEJDAMLIAcoAkghCQwBCwJAAkAgB0EYakEBEAUgCSACRWpqIgNBA0YEQCAHKAJEQX9qIgMgA0VqIQkMAQsgA0ECdCAHaigCRCIJIAlFaiEJIANBAUYNAQsgByAHKAJINgJMCwsgByAHKAJENgJIIAcgCTYCRAsgF6chAyALBEAgB0EYaiALEAUgA2ohAwsgCCALakEUTwRAIAdBGGoQBBoLIAgEQCAHQRhqIAgQBSACaiECCyAHQRhqEAQaIAcgB0EYaiAUQhiIp0H/AXEQCCAUp0H//wNxajYCLCAHIAdBGGogFUIYiKdB/wFxEAggFadB//8DcWo2AjwgB0EYahAEGiAHIAdBGGogFkIYiKdB/wFxEAggFqdB//8DcWo2AjQgByACNgJgIAcoAlwhCiAHIAk2AmggByADNgJkAkACQAJAIAQgAiADaiILaiASSw0AIAIgCmoiEyAPSw0AIA0gBGsgC0Egak8NAQsgByAHKQNoNwMQIAcgBykDYDcDCCAEIA0gB0EIaiAHQdwAaiAPIA4gESAQEB4hCwwBCyACIARqIQggBCAKEAcgAkERTwRAIARBEGohAgNAIAIgCkEQaiIKEAcgAkEQaiICIAhJDQALCyAIIAlrIQIgByATNgJcIAkgCCAOa0sEQCAJIAggEWtLBEBBbCELDAILIBAgAiAOayICaiIKIANqIBBNBEAgCCAKIAMQDxoMAgsgCCAKQQAgAmsQDyEIIAcgAiADaiIDNgJkIAggAmshCCAOIQILIAlBEE8EQCADIAhqIQMDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALDAELAkAgCUEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgCUECdCIDQcAeaigCAGoiAhAXIAIgA0HgHmooAgBrIQIgBygCZCEDDAELIAggAhAMCyADQQlJDQAgAyAIaiEDIAhBCGoiCCACQQhqIgJrQQ9MBEADQCAIIAIQDCACQQhqIQIgCEEIaiIIIANJDQAMAgALAAsDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALCyAHQRhqEAQaIAsgDCALEAMiAhshDCAEIAQgC2ogAhshBCAFQX9qIgUNAAsgDBADDQFBbCEMIAdBGGoQBEECSQ0BQQAhCANAIAhBA0cEQCAAIAhBAnQiAmpBrNABaiACIAdqKAJENgIAIAhBAWohCAwBCwsgBygCXCEIC0G6fyEMIA8gCGsiACANIARrSw0AIAQEfyAEIAggABALIABqBUEACyABayEMCyAHQfAAaiQAIAwLkRcCFn8FfiMAQdABayIHJAAgByAAKALw4QEiCDYCvAEgASACaiESIAggACgCgOIBaiETAkACQCAFRQRAIAEhAwwBCyAAKALE4AEhESAAKALA4AEhFSAAKAK84AEhDyAAQQE2AozhAUEAIQgDQCAIQQNHBEAgByAIQQJ0IgJqIAAgAmpBrNABaigCADYCVCAIQQFqIQgMAQsLIAcgETYCZCAHIA82AmAgByABIA9rNgJoQWwhECAHQShqIAMgBBAGEAMNASAFQQQgBUEESBshFyAHQTxqIAdBKGogACgCABATIAdBxABqIAdBKGogACgCCBATIAdBzABqIAdBKGogACgCBBATQQAhBCAHQeAAaiEMIAdB5ABqIQoDQCAHQShqEARBAksgBCAXTnJFBEAgBygCQCAHKAI8QQN0aikCACIdQhCIp0H/AXEhCyAHKAJQIAcoAkxBA3RqKQIAIh5CEIinQf8BcSEJIAcoAkggBygCREEDdGopAgAiH0IgiKchCCAeQiCIISAgHUIgiKchAgJAIB9CEIinQf8BcSIDQQJPBEACQCAGRSADQRlJckUEQCAIIAdBKGogA0EgIAcoAixrIg0gDSADSxsiDRAFIAMgDWsiA3RqIQggB0EoahAEGiADRQ0BIAdBKGogAxAFIAhqIQgMAQsgB0EoaiADEAUgCGohCCAHQShqEAQaCyAHKQJUISEgByAINgJUIAcgITcDWAwBCwJAIANFBEAgAgRAIAcoAlQhCAwDCyAHKAJYIQgMAQsCQAJAIAdBKGpBARAFIAggAkVqaiIDQQNGBEAgBygCVEF/aiIDIANFaiEIDAELIANBAnQgB2ooAlQiCCAIRWohCCADQQFGDQELIAcgBygCWDYCXAsLIAcgBygCVDYCWCAHIAg2AlQLICCnIQMgCQRAIAdBKGogCRAFIANqIQMLIAkgC2pBFE8EQCAHQShqEAQaCyALBEAgB0EoaiALEAUgAmohAgsgB0EoahAEGiAHIAcoAmggAmoiCSADajYCaCAKIAwgCCAJSxsoAgAhDSAHIAdBKGogHUIYiKdB/wFxEAggHadB//8DcWo2AjwgByAHQShqIB5CGIinQf8BcRAIIB6nQf//A3FqNgJMIAdBKGoQBBogB0EoaiAfQhiIp0H/AXEQCCEOIAdB8ABqIARBBHRqIgsgCSANaiAIazYCDCALIAg2AgggCyADNgIEIAsgAjYCACAHIA4gH6dB//8DcWo2AkQgBEEBaiEEDAELCyAEIBdIDQEgEkFgaiEYIAdB4ABqIRogB0HkAGohGyABIQMDQCAHQShqEARBAksgBCAFTnJFBEAgBygCQCAHKAI8QQN0aikCACIdQhCIp0H/AXEhCyAHKAJQIAcoAkxBA3RqKQIAIh5CEIinQf8BcSEIIAcoAkggBygCREEDdGopAgAiH0IgiKchCSAeQiCIISAgHUIgiKchDAJAIB9CEIinQf8BcSICQQJPBEACQCAGRSACQRlJckUEQCAJIAdBKGogAkEgIAcoAixrIgogCiACSxsiChAFIAIgCmsiAnRqIQkgB0EoahAEGiACRQ0BIAdBKGogAhAFIAlqIQkMAQsgB0EoaiACEAUgCWohCSAHQShqEAQaCyAHKQJUISEgByAJNgJUIAcgITcDWAwBCwJAIAJFBEAgDARAIAcoAlQhCQwDCyAHKAJYIQkMAQsCQAJAIAdBKGpBARAFIAkgDEVqaiICQQNGBEAgBygCVEF/aiICIAJFaiEJDAELIAJBAnQgB2ooAlQiCSAJRWohCSACQQFGDQELIAcgBygCWDYCXAsLIAcgBygCVDYCWCAHIAk2AlQLICCnIRQgCARAIAdBKGogCBAFIBRqIRQLIAggC2pBFE8EQCAHQShqEAQaCyALBEAgB0EoaiALEAUgDGohDAsgB0EoahAEGiAHIAcoAmggDGoiGSAUajYCaCAbIBogCSAZSxsoAgAhHCAHIAdBKGogHUIYiKdB/wFxEAggHadB//8DcWo2AjwgByAHQShqIB5CGIinQf8BcRAIIB6nQf//A3FqNgJMIAdBKGoQBBogByAHQShqIB9CGIinQf8BcRAIIB+nQf//A3FqNgJEIAcgB0HwAGogBEEDcUEEdGoiDSkDCCIdNwPIASAHIA0pAwAiHjcDwAECQAJAAkAgBygCvAEiDiAepyICaiIWIBNLDQAgAyAHKALEASIKIAJqIgtqIBhLDQAgEiADayALQSBqTw0BCyAHIAcpA8gBNwMQIAcgBykDwAE3AwggAyASIAdBCGogB0G8AWogEyAPIBUgERAeIQsMAQsgAiADaiEIIAMgDhAHIAJBEU8EQCADQRBqIQIDQCACIA5BEGoiDhAHIAJBEGoiAiAISQ0ACwsgCCAdpyIOayECIAcgFjYCvAEgDiAIIA9rSwRAIA4gCCAVa0sEQEFsIQsMAgsgESACIA9rIgJqIhYgCmogEU0EQCAIIBYgChAPGgwCCyAIIBZBACACaxAPIQggByACIApqIgo2AsQBIAggAmshCCAPIQILIA5BEE8EQCAIIApqIQoDQCAIIAIQByACQRBqIQIgCEEQaiIIIApJDQALDAELAkAgDkEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgDkECdCIKQcAeaigCAGoiAhAXIAIgCkHgHmooAgBrIQIgBygCxAEhCgwBCyAIIAIQDAsgCkEJSQ0AIAggCmohCiAIQQhqIgggAkEIaiICa0EPTARAA0AgCCACEAwgAkEIaiECIAhBCGoiCCAKSQ0ADAIACwALA0AgCCACEAcgAkEQaiECIAhBEGoiCCAKSQ0ACwsgCxADBEAgCyEQDAQFIA0gDDYCACANIBkgHGogCWs2AgwgDSAJNgIIIA0gFDYCBCAEQQFqIQQgAyALaiEDDAILAAsLIAQgBUgNASAEIBdrIQtBACEEA0AgCyAFSARAIAcgB0HwAGogC0EDcUEEdGoiAikDCCIdNwPIASAHIAIpAwAiHjcDwAECQAJAAkAgBygCvAEiDCAepyICaiIKIBNLDQAgAyAHKALEASIJIAJqIhBqIBhLDQAgEiADayAQQSBqTw0BCyAHIAcpA8gBNwMgIAcgBykDwAE3AxggAyASIAdBGGogB0G8AWogEyAPIBUgERAeIRAMAQsgAiADaiEIIAMgDBAHIAJBEU8EQCADQRBqIQIDQCACIAxBEGoiDBAHIAJBEGoiAiAISQ0ACwsgCCAdpyIGayECIAcgCjYCvAEgBiAIIA9rSwRAIAYgCCAVa0sEQEFsIRAMAgsgESACIA9rIgJqIgwgCWogEU0EQCAIIAwgCRAPGgwCCyAIIAxBACACaxAPIQggByACIAlqIgk2AsQBIAggAmshCCAPIQILIAZBEE8EQCAIIAlqIQYDQCAIIAIQByACQRBqIQIgCEEQaiIIIAZJDQALDAELAkAgBkEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgBkECdCIGQcAeaigCAGoiAhAXIAIgBkHgHmooAgBrIQIgBygCxAEhCQwBCyAIIAIQDAsgCUEJSQ0AIAggCWohBiAIQQhqIgggAkEIaiICa0EPTARAA0AgCCACEAwgAkEIaiECIAhBCGoiCCAGSQ0ADAIACwALA0AgCCACEAcgAkEQaiECIAhBEGoiCCAGSQ0ACwsgEBADDQMgC0EBaiELIAMgEGohAwwBCwsDQCAEQQNHBEAgACAEQQJ0IgJqQazQAWogAiAHaigCVDYCACAEQQFqIQQMAQsLIAcoArwBIQgLQbp/IRAgEyAIayIAIBIgA2tLDQAgAwR/IAMgCCAAEAsgAGoFQQALIAFrIRALIAdB0AFqJAAgEAslACAAQgA3AgAgAEEAOwEIIABBADoACyAAIAE2AgwgACACOgAKC7QFAQN/IwBBMGsiBCQAIABB/wFqIgVBfWohBgJAIAMvAQIEQCAEQRhqIAEgAhAGIgIQAw0BIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahASOgAAIAMgBEEIaiAEQRhqEBI6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0FIAEgBEEQaiAEQRhqEBI6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBSABIARBCGogBEEYahASOgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEjoAACABIAJqIABrIQIMAwsgAyAEQRBqIARBGGoQEjoAAiADIARBCGogBEEYahASOgADIANBBGohAwwAAAsACyAEQRhqIAEgAhAGIgIQAw0AIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahAROgAAIAMgBEEIaiAEQRhqEBE6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0EIAEgBEEQaiAEQRhqEBE6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBCABIARBCGogBEEYahAROgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEToAACABIAJqIABrIQIMAgsgAyAEQRBqIARBGGoQEToAAiADIARBCGogBEEYahAROgADIANBBGohAwwAAAsACyAEQTBqJAAgAgtpAQF/An8CQAJAIAJBB00NACABKAAAQbfIwuF+Rw0AIAAgASgABDYCmOIBQWIgAEEQaiABIAIQPiIDEAMNAhogAEKBgICAEDcDiOEBIAAgASADaiACIANrECoMAQsgACABIAIQKgtBAAsLrQMBBn8jAEGAAWsiAyQAQWIhCAJAIAJBCUkNACAAQZjQAGogAUEIaiIEIAJBeGogAEGY0AAQMyIFEAMiBg0AIANBHzYCfCADIANB/ABqIANB+ABqIAQgBCAFaiAGGyIEIAEgAmoiAiAEaxAVIgUQAw0AIAMoAnwiBkEfSw0AIAMoAngiB0EJTw0AIABBiCBqIAMgBkGAC0GADCAHEBggA0E0NgJ8IAMgA0H8AGogA0H4AGogBCAFaiIEIAIgBGsQFSIFEAMNACADKAJ8IgZBNEsNACADKAJ4IgdBCk8NACAAQZAwaiADIAZBgA1B4A4gBxAYIANBIzYCfCADIANB/ABqIANB+ABqIAQgBWoiBCACIARrEBUiBRADDQAgAygCfCIGQSNLDQAgAygCeCIHQQpPDQAgACADIAZBwBBB0BEgBxAYIAQgBWoiBEEMaiIFIAJLDQAgAiAFayEFQQAhAgNAIAJBA0cEQCAEKAAAIgZBf2ogBU8NAiAAIAJBAnRqQZzQAWogBjYCACACQQFqIQIgBEEEaiEEDAELCyAEIAFrIQgLIANBgAFqJAAgCAtGAQN/IABBCGohAyAAKAIEIQJBACEAA0AgACACdkUEQCABIAMgAEEDdGotAAJBFktqIQEgAEEBaiEADAELCyABQQggAmt0C4YDAQV/Qbh/IQcCQCADRQ0AIAItAAAiBEUEQCABQQA2AgBBAUG4fyADQQFGGw8LAn8gAkEBaiIFIARBGHRBGHUiBkF/Sg0AGiAGQX9GBEAgA0EDSA0CIAUvAABBgP4BaiEEIAJBA2oMAQsgA0ECSA0BIAItAAEgBEEIdHJBgIB+aiEEIAJBAmoLIQUgASAENgIAIAVBAWoiASACIANqIgNLDQBBbCEHIABBEGogACAFLQAAIgVBBnZBI0EJIAEgAyABa0HAEEHQEUHwEiAAKAKM4QEgACgCnOIBIAQQHyIGEAMiCA0AIABBmCBqIABBCGogBUEEdkEDcUEfQQggASABIAZqIAgbIgEgAyABa0GAC0GADEGAFyAAKAKM4QEgACgCnOIBIAQQHyIGEAMiCA0AIABBoDBqIABBBGogBUECdkEDcUE0QQkgASABIAZqIAgbIgEgAyABa0GADUHgDkGQGSAAKAKM4QEgACgCnOIBIAQQHyIAEAMNACAAIAFqIAJrIQcLIAcLrQMBCn8jAEGABGsiCCQAAn9BUiACQf8BSw0AGkFUIANBDEsNABogAkEBaiELIABBBGohCUGAgAQgA0F/anRBEHUhCkEAIQJBASEEQQEgA3QiB0F/aiIMIQUDQCACIAtGRQRAAkAgASACQQF0Ig1qLwEAIgZB//8DRgRAIAkgBUECdGogAjoAAiAFQX9qIQVBASEGDAELIARBACAKIAZBEHRBEHVKGyEECyAIIA1qIAY7AQAgAkEBaiECDAELCyAAIAQ7AQIgACADOwEAIAdBA3YgB0EBdmpBA2ohBkEAIQRBACECA0AgBCALRkUEQCABIARBAXRqLgEAIQpBACEAA0AgACAKTkUEQCAJIAJBAnRqIAQ6AAIDQCACIAZqIAxxIgIgBUsNAAsgAEEBaiEADAELCyAEQQFqIQQMAQsLQX8gAg0AGkEAIQIDfyACIAdGBH9BAAUgCCAJIAJBAnRqIgAtAAJBAXRqIgEgAS8BACIBQQFqOwEAIAAgAyABEBRrIgU6AAMgACABIAVB/wFxdCAHazsBACACQQFqIQIMAQsLCyEFIAhBgARqJAAgBQvjBgEIf0FsIQcCQCACQQNJDQACQAJAAkACQCABLQAAIgNBA3EiCUEBaw4DAwEAAgsgACgCiOEBDQBBYg8LIAJBBUkNAkEDIQYgASgAACEFAn8CQAJAIANBAnZBA3EiCEF+aiIEQQFNBEAgBEEBaw0BDAILIAVBDnZB/wdxIQQgBUEEdkH/B3EhAyAIRQwCCyAFQRJ2IQRBBCEGIAVBBHZB//8AcSEDQQAMAQsgBUEEdkH//w9xIgNBgIAISw0DIAEtAARBCnQgBUEWdnIhBEEFIQZBAAshBSAEIAZqIgogAksNAgJAIANBgQZJDQAgACgCnOIBRQ0AQQAhAgNAIAJBg4ABSw0BIAJBQGshAgwAAAsACwJ/IAlBA0YEQCABIAZqIQEgAEHw4gFqIQIgACgCDCEGIAUEQCACIAMgASAEIAYQXwwCCyACIAMgASAEIAYQXQwBCyAAQbjQAWohAiABIAZqIQEgAEHw4gFqIQYgAEGo0ABqIQggBQRAIAggBiADIAEgBCACEF4MAQsgCCAGIAMgASAEIAIQXAsQAw0CIAAgAzYCgOIBIABBATYCiOEBIAAgAEHw4gFqNgLw4QEgCUECRgRAIAAgAEGo0ABqNgIMCyAAIANqIgBBiOMBakIANwAAIABBgOMBakIANwAAIABB+OIBakIANwAAIABB8OIBakIANwAAIAoPCwJ/AkACQAJAIANBAnZBA3FBf2oiBEECSw0AIARBAWsOAgACAQtBASEEIANBA3YMAgtBAiEEIAEvAABBBHYMAQtBAyEEIAEQIUEEdgsiAyAEaiIFQSBqIAJLBEAgBSACSw0CIABB8OIBaiABIARqIAMQCyEBIAAgAzYCgOIBIAAgATYC8OEBIAEgA2oiAEIANwAYIABCADcAECAAQgA3AAggAEIANwAAIAUPCyAAIAM2AoDiASAAIAEgBGo2AvDhASAFDwsCfwJAAkACQCADQQJ2QQNxQX9qIgRBAksNACAEQQFrDgIAAgELQQEhByADQQN2DAILQQIhByABLwAAQQR2DAELIAJBBEkgARAhIgJBj4CAAUtyDQFBAyEHIAJBBHYLIQIgAEHw4gFqIAEgB2otAAAgAkEgahAQIQEgACACNgKA4gEgACABNgLw4QEgB0EBaiEHCyAHC0sAIABC+erQ0OfJoeThADcDICAAQgA3AxggAELP1tO+0ser2UI3AxAgAELW64Lu6v2J9eAANwMIIABCADcDACAAQShqQQBBKBAQGgviAgICfwV+IABBKGoiASAAKAJIaiECAn4gACkDACIDQiBaBEAgACkDECIEQgeJIAApAwgiBUIBiXwgACkDGCIGQgyJfCAAKQMgIgdCEol8IAUQGSAEEBkgBhAZIAcQGQwBCyAAKQMYQsXP2bLx5brqJ3wLIAN8IQMDQCABQQhqIgAgAk0EQEIAIAEpAAAQCSADhUIbiUKHla+vmLbem55/fkLj3MqV/M7y9YV/fCEDIAAhAQwBCwsCQCABQQRqIgAgAksEQCABIQAMAQsgASgAAK1Ch5Wvr5i23puef34gA4VCF4lCz9bTvtLHq9lCfkL5893xmfaZqxZ8IQMLA0AgACACSQRAIAAxAABCxc/ZsvHluuonfiADhUILiUKHla+vmLbem55/fiEDIABBAWohAAwBCwsgA0IhiCADhULP1tO+0ser2UJ+IgNCHYggA4VC+fPd8Zn2masWfiIDQiCIIAOFC+8CAgJ/BH4gACAAKQMAIAKtfDcDAAJAAkAgACgCSCIDIAJqIgRBH00EQCABRQ0BIAAgA2pBKGogASACECAgACgCSCACaiEEDAELIAEgAmohAgJ/IAMEQCAAQShqIgQgA2ogAUEgIANrECAgACAAKQMIIAQpAAAQCTcDCCAAIAApAxAgACkAMBAJNwMQIAAgACkDGCAAKQA4EAk3AxggACAAKQMgIABBQGspAAAQCTcDICAAKAJIIQMgAEEANgJIIAEgA2tBIGohAQsgAUEgaiACTQsEQCACQWBqIQMgACkDICEFIAApAxghBiAAKQMQIQcgACkDCCEIA0AgCCABKQAAEAkhCCAHIAEpAAgQCSEHIAYgASkAEBAJIQYgBSABKQAYEAkhBSABQSBqIgEgA00NAAsgACAFNwMgIAAgBjcDGCAAIAc3AxAgACAINwMICyABIAJPDQEgAEEoaiABIAIgAWsiBBAgCyAAIAQ2AkgLCy8BAX8gAEUEQEG2f0EAIAMbDwtBun8hBCADIAFNBH8gACACIAMQEBogAwVBun8LCy8BAX8gAEUEQEG2f0EAIAMbDwtBun8hBCADIAFNBH8gACACIAMQCxogAwVBun8LC6gCAQZ/IwBBEGsiByQAIABB2OABaikDAEKAgIAQViEIQbh/IQUCQCAEQf//B0sNACAAIAMgBBBCIgUQAyIGDQAgACgCnOIBIQkgACAHQQxqIAMgAyAFaiAGGyIKIARBACAFIAYbayIGEEAiAxADBEAgAyEFDAELIAcoAgwhBCABRQRAQbp/IQUgBEEASg0BCyAGIANrIQUgAyAKaiEDAkAgCQRAIABBADYCnOIBDAELAkACQAJAIARBBUgNACAAQdjgAWopAwBCgICACFgNAAwBCyAAQQA2ApziAQwBCyAAKAIIED8hBiAAQQA2ApziASAGQRRPDQELIAAgASACIAMgBSAEIAgQOSEFDAELIAAgASACIAMgBSAEIAgQOiEFCyAHQRBqJAAgBQtnACAAQdDgAWogASACIAAoAuzhARAuIgEQAwRAIAEPC0G4fyECAkAgAQ0AIABB7OABaigCACIBBEBBYCECIAAoApjiASABRw0BC0EAIQIgAEHw4AFqKAIARQ0AIABBkOEBahBDCyACCycBAX8QVyIERQRAQUAPCyAEIAAgASACIAMgBBBLEE8hACAEEFYgAAs/AQF/AkACQAJAIAAoAqDiAUEBaiIBQQJLDQAgAUEBaw4CAAECCyAAEDBBAA8LIABBADYCoOIBCyAAKAKU4gELvAMCB38BfiMAQRBrIgkkAEG4fyEGAkAgBCgCACIIQQVBCSAAKALs4QEiBRtJDQAgAygCACIHQQFBBSAFGyAFEC8iBRADBEAgBSEGDAELIAggBUEDakkNACAAIAcgBRBJIgYQAw0AIAEgAmohCiAAQZDhAWohCyAIIAVrIQIgBSAHaiEHIAEhBQNAIAcgAiAJECwiBhADDQEgAkF9aiICIAZJBEBBuH8hBgwCCyAJKAIAIghBAksEQEFsIQYMAgsgB0EDaiEHAn8CQAJAAkAgCEEBaw4CAgABCyAAIAUgCiAFayAHIAYQSAwCCyAFIAogBWsgByAGEEcMAQsgBSAKIAVrIActAAAgCSgCCBBGCyIIEAMEQCAIIQYMAgsgACgC8OABBEAgCyAFIAgQRQsgAiAGayECIAYgB2ohByAFIAhqIQUgCSgCBEUNAAsgACkD0OABIgxCf1IEQEFsIQYgDCAFIAFrrFINAQsgACgC8OABBEBBaiEGIAJBBEkNASALEEQhDCAHKAAAIAynRw0BIAdBBGohByACQXxqIQILIAMgBzYCACAEIAI2AgAgBSABayEGCyAJQRBqJAAgBgsuACAAECsCf0EAQQAQAw0AGiABRSACRXJFBEBBYiAAIAEgAhA9EAMNARoLQQALCzcAIAEEQCAAIAAoAsTgASABKAIEIAEoAghqRzYCnOIBCyAAECtBABADIAFFckUEQCAAIAEQWwsL0QIBB38jAEEQayIGJAAgBiAENgIIIAYgAzYCDCAFBEAgBSgCBCEKIAUoAgghCQsgASEIAkACQANAIAAoAuzhARAWIQsCQANAIAQgC0kNASADKAAAQXBxQdDUtMIBRgRAIAMgBBAiIgcQAw0EIAQgB2shBCADIAdqIQMMAQsLIAYgAzYCDCAGIAQ2AggCQCAFBEAgACAFEE5BACEHQQAQA0UNAQwFCyAAIAogCRBNIgcQAw0ECyAAIAgQUCAMQQFHQQAgACAIIAIgBkEMaiAGQQhqEEwiByIDa0EAIAMQAxtBCkdyRQRAQbh/IQcMBAsgBxADDQMgAiAHayECIAcgCGohCEEBIQwgBigCDCEDIAYoAgghBAwBCwsgBiADNgIMIAYgBDYCCEG4fyEHIAQNASAIIAFrIQcMAQsgBiADNgIMIAYgBDYCCAsgBkEQaiQAIAcLRgECfyABIAAoArjgASICRwRAIAAgAjYCxOABIAAgATYCuOABIAAoArzgASEDIAAgATYCvOABIAAgASADIAJrajYCwOABCwutAgIEfwF+IwBBQGoiBCQAAkACQCACQQhJDQAgASgAAEFwcUHQ1LTCAUcNACABIAIQIiEBIABCADcDCCAAQQA2AgQgACABNgIADAELIARBGGogASACEC0iAxADBEAgACADEBoMAQsgAwRAIABBuH8QGgwBCyACIAQoAjAiA2shAiABIANqIQMDQAJAIAAgAyACIARBCGoQLCIFEAMEfyAFBSACIAVBA2oiBU8NAUG4fwsQGgwCCyAGQQFqIQYgAiAFayECIAMgBWohAyAEKAIMRQ0ACyAEKAI4BEAgAkEDTQRAIABBuH8QGgwCCyADQQRqIQMLIAQoAighAiAEKQMYIQcgAEEANgIEIAAgAyABazYCACAAIAIgBmytIAcgB0J/URs3AwgLIARBQGskAAslAQF/IwBBEGsiAiQAIAIgACABEFEgAigCACEAIAJBEGokACAAC30BBH8jAEGQBGsiBCQAIARB/wE2AggCQCAEQRBqIARBCGogBEEMaiABIAIQFSIGEAMEQCAGIQUMAQtBVCEFIAQoAgwiB0EGSw0AIAMgBEEQaiAEKAIIIAcQQSIFEAMNACAAIAEgBmogAiAGayADEDwhBQsgBEGQBGokACAFC4cBAgJ/An5BABAWIQMCQANAIAEgA08EQAJAIAAoAABBcHFB0NS0wgFGBEAgACABECIiAhADRQ0BQn4PCyAAIAEQVSIEQn1WDQMgBCAFfCIFIARUIQJCfiEEIAINAyAAIAEQUiICEAMNAwsgASACayEBIAAgAmohAAwBCwtCfiAFIAEbIQQLIAQLPwIBfwF+IwBBMGsiAiQAAn5CfiACQQhqIAAgARAtDQAaQgAgAigCHEEBRg0AGiACKQMICyEDIAJBMGokACADC40BAQJ/IwBBMGsiASQAAkAgAEUNACAAKAKI4gENACABIABB/OEBaigCADYCKCABIAApAvThATcDICAAEDAgACgCqOIBIQIgASABKAIoNgIYIAEgASkDIDcDECACIAFBEGoQGyAAQQA2AqjiASABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALKgECfyMAQRBrIgAkACAAQQA2AgggAEIANwMAIAAQWCEBIABBEGokACABC4cBAQN/IwBBEGsiAiQAAkAgACgCAEUgACgCBEVzDQAgAiAAKAIINgIIIAIgACkCADcDAAJ/IAIoAgAiAQRAIAIoAghBqOMJIAERBQAMAQtBqOMJECgLIgFFDQAgASAAKQIANwL04QEgAUH84QFqIAAoAgg2AgAgARBZIAEhAwsgAkEQaiQAIAMLywEBAn8jAEEgayIBJAAgAEGBgIDAADYCtOIBIABBADYCiOIBIABBADYC7OEBIABCADcDkOIBIABBADYCpOMJIABBADYC3OIBIABCADcCzOIBIABBADYCvOIBIABBADYCxOABIABCADcCnOIBIABBpOIBakIANwIAIABBrOIBakEANgIAIAFCADcCECABQgA3AhggASABKQMYNwMIIAEgASkDEDcDACABKAIIQQh2QQFxIQIgAEEANgLg4gEgACACNgKM4gEgAUEgaiQAC3YBA38jAEEwayIBJAAgAARAIAEgAEHE0AFqIgIoAgA2AiggASAAKQK80AE3AyAgACgCACEDIAEgAigCADYCGCABIAApArzQATcDECADIAFBEGoQGyABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALzAEBAX8gACABKAK00AE2ApjiASAAIAEoAgQiAjYCwOABIAAgAjYCvOABIAAgAiABKAIIaiICNgK44AEgACACNgLE4AEgASgCuNABBEAgAEKBgICAEDcDiOEBIAAgAUGk0ABqNgIMIAAgAUGUIGo2AgggACABQZwwajYCBCAAIAFBDGo2AgAgAEGs0AFqIAFBqNABaigCADYCACAAQbDQAWogAUGs0AFqKAIANgIAIABBtNABaiABQbDQAWooAgA2AgAPCyAAQgA3A4jhAQs7ACACRQRAQbp/DwsgBEUEQEFsDwsgAiAEEGAEQCAAIAEgAiADIAQgBRBhDwsgACABIAIgAyAEIAUQZQtGAQF/IwBBEGsiBSQAIAVBCGogBBAOAn8gBS0ACQRAIAAgASACIAMgBBAyDAELIAAgASACIAMgBBA0CyEAIAVBEGokACAACzQAIAAgAyAEIAUQNiIFEAMEQCAFDwsgBSAESQR/IAEgAiADIAVqIAQgBWsgABA1BUG4fwsLRgEBfyMAQRBrIgUkACAFQQhqIAQQDgJ/IAUtAAkEQCAAIAEgAiADIAQQYgwBCyAAIAEgAiADIAQQNQshACAFQRBqJAAgAAtZAQF/QQ8hAiABIABJBEAgAUEEdCAAbiECCyAAQQh2IgEgAkEYbCIAQYwIaigCAGwgAEGICGooAgBqIgJBA3YgAmogAEGACGooAgAgAEGECGooAgAgAWxqSQs3ACAAIAMgBCAFQYAQEDMiBRADBEAgBQ8LIAUgBEkEfyABIAIgAyAFaiAEIAVrIAAQMgVBuH8LC78DAQN/IwBBIGsiBSQAIAVBCGogAiADEAYiAhADRQRAIAAgAWoiB0F9aiEGIAUgBBAOIARBBGohAiAFLQACIQMDQEEAIAAgBkkgBUEIahAEGwRAIAAgAiAFQQhqIAMQAkECdGoiBC8BADsAACAFQQhqIAQtAAIQASAAIAQtAANqIgQgAiAFQQhqIAMQAkECdGoiAC8BADsAACAFQQhqIAAtAAIQASAEIAAtAANqIQAMAQUgB0F+aiEEA0AgBUEIahAEIAAgBEtyRQRAIAAgAiAFQQhqIAMQAkECdGoiBi8BADsAACAFQQhqIAYtAAIQASAAIAYtAANqIQAMAQsLA0AgACAES0UEQCAAIAIgBUEIaiADEAJBAnRqIgYvAQA7AAAgBUEIaiAGLQACEAEgACAGLQADaiEADAELCwJAIAAgB08NACAAIAIgBUEIaiADEAIiA0ECdGoiAC0AADoAACAALQADQQFGBEAgBUEIaiAALQACEAEMAQsgBSgCDEEfSw0AIAVBCGogAiADQQJ0ai0AAhABIAUoAgxBIUkNACAFQSA2AgwLIAFBbCAFQQhqEAobIQILCwsgBUEgaiQAIAILkgIBBH8jAEFAaiIJJAAgCSADQTQQCyEDAkAgBEECSA0AIAMgBEECdGooAgAhCSADQTxqIAgQIyADQQE6AD8gAyACOgA+QQAhBCADKAI8IQoDQCAEIAlGDQEgACAEQQJ0aiAKNgEAIARBAWohBAwAAAsAC0EAIQkDQCAGIAlGRQRAIAMgBSAJQQF0aiIKLQABIgtBAnRqIgwoAgAhBCADQTxqIAotAABBCHQgCGpB//8DcRAjIANBAjoAPyADIAcgC2siCiACajoAPiAEQQEgASAKa3RqIQogAygCPCELA0AgACAEQQJ0aiALNgEAIARBAWoiBCAKSQ0ACyAMIAo2AgAgCUEBaiEJDAELCyADQUBrJAALowIBCX8jAEHQAGsiCSQAIAlBEGogBUE0EAsaIAcgBmshDyAHIAFrIRADQAJAIAMgCkcEQEEBIAEgByACIApBAXRqIgYtAAEiDGsiCGsiC3QhDSAGLQAAIQ4gCUEQaiAMQQJ0aiIMKAIAIQYgCyAPTwRAIAAgBkECdGogCyAIIAUgCEE0bGogCCAQaiIIQQEgCEEBShsiCCACIAQgCEECdGooAgAiCEEBdGogAyAIayAHIA4QYyAGIA1qIQgMAgsgCUEMaiAOECMgCUEBOgAPIAkgCDoADiAGIA1qIQggCSgCDCELA0AgBiAITw0CIAAgBkECdGogCzYBACAGQQFqIQYMAAALAAsgCUHQAGokAA8LIAwgCDYCACAKQQFqIQoMAAALAAs0ACAAIAMgBCAFEDYiBRADBEAgBQ8LIAUgBEkEfyABIAIgAyAFaiAEIAVrIAAQNAVBuH8LCyMAIAA/AEEQdGtB//8DakEQdkAAQX9GBEBBAA8LQQAQAEEBCzsBAX8gAgRAA0AgACABIAJBgCAgAkGAIEkbIgMQCyEAIAFBgCBqIQEgAEGAIGohACACIANrIgINAAsLCwYAIAAQAwsLqBUJAEGICAsNAQAAAAEAAAACAAAAAgBBoAgLswYBAAAAAQAAAAIAAAACAAAAJgAAAIIAAAAhBQAASgAAAGcIAAAmAAAAwAEAAIAAAABJBQAASgAAAL4IAAApAAAALAIAAIAAAABJBQAASgAAAL4IAAAvAAAAygIAAIAAAACKBQAASgAAAIQJAAA1AAAAcwMAAIAAAACdBQAASgAAAKAJAAA9AAAAgQMAAIAAAADrBQAASwAAAD4KAABEAAAAngMAAIAAAABNBgAASwAAAKoKAABLAAAAswMAAIAAAADBBgAATQAAAB8NAABNAAAAUwQAAIAAAAAjCAAAUQAAAKYPAABUAAAAmQQAAIAAAABLCQAAVwAAALESAABYAAAA2gQAAIAAAABvCQAAXQAAACMUAABUAAAARQUAAIAAAABUCgAAagAAAIwUAABqAAAArwUAAIAAAAB2CQAAfAAAAE4QAAB8AAAA0gIAAIAAAABjBwAAkQAAAJAHAACSAAAAAAAAAAEAAAABAAAABQAAAA0AAAAdAAAAPQAAAH0AAAD9AAAA/QEAAP0DAAD9BwAA/Q8AAP0fAAD9PwAA/X8AAP3/AAD9/wEA/f8DAP3/BwD9/w8A/f8fAP3/PwD9/38A/f//AP3//wH9//8D/f//B/3//w/9//8f/f//P/3//38AAAAAAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABEAAAASAAAAEwAAABQAAAAVAAAAFgAAABcAAAAYAAAAGQAAABoAAAAbAAAAHAAAAB0AAAAeAAAAHwAAAAMAAAAEAAAABQAAAAYAAAAHAAAACAAAAAkAAAAKAAAACwAAAAwAAAANAAAADgAAAA8AAAAQAAAAEQAAABIAAAATAAAAFAAAABUAAAAWAAAAFwAAABgAAAAZAAAAGgAAABsAAAAcAAAAHQAAAB4AAAAfAAAAIAAAACEAAAAiAAAAIwAAACUAAAAnAAAAKQAAACsAAAAvAAAAMwAAADsAAABDAAAAUwAAAGMAAACDAAAAAwEAAAMCAAADBAAAAwgAAAMQAAADIAAAA0AAAAOAAAADAAEAQeAPC1EBAAAAAQAAAAEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAEAAAABQAAAAcAAAAIAAAACQAAAAoAAAALAAAADAAAAA0AAAAOAAAADwAAABAAQcQQC4sBAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABIAAAAUAAAAFgAAABgAAAAcAAAAIAAAACgAAAAwAAAAQAAAAIAAAAAAAQAAAAIAAAAEAAAACAAAABAAAAAgAAAAQAAAAIAAAAAAAQBBkBIL5gQBAAAAAQAAAAEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAAAEAAAAEAAAACAAAAAAAAAABAAEBBgAAAAAAAAQAAAAAEAAABAAAAAAgAAAFAQAAAAAAAAUDAAAAAAAABQQAAAAAAAAFBgAAAAAAAAUHAAAAAAAABQkAAAAAAAAFCgAAAAAAAAUMAAAAAAAABg4AAAAAAAEFEAAAAAAAAQUUAAAAAAABBRYAAAAAAAIFHAAAAAAAAwUgAAAAAAAEBTAAAAAgAAYFQAAAAAAABwWAAAAAAAAIBgABAAAAAAoGAAQAAAAADAYAEAAAIAAABAAAAAAAAAAEAQAAAAAAAAUCAAAAIAAABQQAAAAAAAAFBQAAACAAAAUHAAAAAAAABQgAAAAgAAAFCgAAAAAAAAULAAAAAAAABg0AAAAgAAEFEAAAAAAAAQUSAAAAIAABBRYAAAAAAAIFGAAAACAAAwUgAAAAAAADBSgAAAAAAAYEQAAAABAABgRAAAAAIAAHBYAAAAAAAAkGAAIAAAAACwYACAAAMAAABAAAAAAQAAAEAQAAACAAAAUCAAAAIAAABQMAAAAgAAAFBQAAACAAAAUGAAAAIAAABQgAAAAgAAAFCQAAACAAAAULAAAAIAAABQwAAAAAAAAGDwAAACAAAQUSAAAAIAABBRQAAAAgAAIFGAAAACAAAgUcAAAAIAADBSgAAAAgAAQFMAAAAAAAEAYAAAEAAAAPBgCAAAAAAA4GAEAAAAAADQYAIABBgBcLhwIBAAEBBQAAAAAAAAUAAAAAAAAGBD0AAAAAAAkF/QEAAAAADwX9fwAAAAAVBf3/HwAAAAMFBQAAAAAABwR9AAAAAAAMBf0PAAAAABIF/f8DAAAAFwX9/38AAAAFBR0AAAAAAAgE/QAAAAAADgX9PwAAAAAUBf3/DwAAAAIFAQAAABAABwR9AAAAAAALBf0HAAAAABEF/f8BAAAAFgX9/z8AAAAEBQ0AAAAQAAgE/QAAAAAADQX9HwAAAAATBf3/BwAAAAEFAQAAABAABgQ9AAAAAAAKBf0DAAAAABAF/f8AAAAAHAX9//8PAAAbBf3//wcAABoF/f//AwAAGQX9//8BAAAYBf3//wBBkBkLhgQBAAEBBgAAAAAAAAYDAAAAAAAABAQAAAAgAAAFBQAAAAAAAAUGAAAAAAAABQgAAAAAAAAFCQAAAAAAAAULAAAAAAAABg0AAAAAAAAGEAAAAAAAAAYTAAAAAAAABhYAAAAAAAAGGQAAAAAAAAYcAAAAAAAABh8AAAAAAAAGIgAAAAAAAQYlAAAAAAABBikAAAAAAAIGLwAAAAAAAwY7AAAAAAAEBlMAAAAAAAcGgwAAAAAACQYDAgAAEAAABAQAAAAAAAAEBQAAACAAAAUGAAAAAAAABQcAAAAgAAAFCQAAAAAAAAUKAAAAAAAABgwAAAAAAAAGDwAAAAAAAAYSAAAAAAAABhUAAAAAAAAGGAAAAAAAAAYbAAAAAAAABh4AAAAAAAAGIQAAAAAAAQYjAAAAAAABBicAAAAAAAIGKwAAAAAAAwYzAAAAAAAEBkMAAAAAAAUGYwAAAAAACAYDAQAAIAAABAQAAAAwAAAEBAAAABAAAAQFAAAAIAAABQcAAAAgAAAFCAAAACAAAAUKAAAAIAAABQsAAAAAAAAGDgAAAAAAAAYRAAAAAAAABhQAAAAAAAAGFwAAAAAAAAYaAAAAAAAABh0AAAAAAAAGIAAAAAAAEAYDAAEAAAAPBgOAAAAAAA4GA0AAAAAADQYDIAAAAAAMBgMQAAAAAAsGAwgAAAAACgYDBABBpB0L2QEBAAAAAwAAAAcAAAAPAAAAHwAAAD8AAAB/AAAA/wAAAP8BAAD/AwAA/wcAAP8PAAD/HwAA/z8AAP9/AAD//wAA//8BAP//AwD//wcA//8PAP//HwD//z8A//9/AP///wD///8B////A////wf///8P////H////z////9/AAAAAAEAAAACAAAABAAAAAAAAAACAAAABAAAAAgAAAAAAAAAAQAAAAIAAAABAAAABAAAAAQAAAAEAAAABAAAAAgAAAAIAAAACAAAAAcAAAAIAAAACQAAAAoAAAALAEGgIAsDwBBQ";function a(){}u.ZSTDDecoder=a}.call(this)}.call(this,e("buffer").Buffer)},{buffer:9}]},{},[2,1,3]),!function(L,Q){"use strict";var t;function r(e){var t=null,o=L.extend(!0,{},e),i=250,r={},a=!!L(".light").length;function s(e,t){var r=L("body");o.utils.trigger(r,e,t)}function u(){return o.utils.t.apply(this,arguments)}function n(){var e=o.system.adsense.parameters;window.adsbygoogle=window.adsbygoogle||[],L("ins.adsbygoogle").each(function(){window.adsbygoogle.push({params:L.extend({},e)})})}function l(){var e=window.location.hash.replace("#",""),t=L("#p-donate"),r=L("#p-loading"),n=r.find(".progressbar"),i=L(".progress-label");L(".section, .searchbtn").addClass("ui-corner-all"),L(".view").addClass("ui-corner-br ui-corner-tr"),L(".search-field").addClass("ui-corner-bl ui-corner-tl"),L("#p-poll").dialog({closeText:u("close"),modal:!0,title:u("poll"),width:a?"95%":500,open:function(){j("poll")},close:function(){S()},autoOpen:"poll"==e}),o.system.raterMasterSw&&!o.context.session.userHasRatedOne&&w(!1),L("#p-contact").dialog({closeText:u("close"),modal:!0,title:u("contactUs"),width:a?"95%":500,open:function(){j("contact")},close:function(){S()},autoOpen:"contact"==e}),L(".contact-button").button({icons:{secondary:"ui-icon-mail-closed"}}),t.find("input.dont-show-again").prop("checked",k("p-donate")),L(".help-1").find("input.dont-show-again").prop("checked",k("help-1")),t.dialog({closeText:u("close"),modal:!0,title:u("donate"),width:a?"95%":750,open:function(){j("donate")},close:function(){S()},autoOpen:"donate"==e}),t.find(".progressbar").progressbar({value:o.donations.total,max:o.donations.max}),n.progressbar({value:!1,change:function(){i.text(Math.round(n.progressbar("value"))+"%")},complete:function(){i.text("Complete!")}}),L("#p-about").dialog({closeText:u("close"),modal:!0,title:u("about"),width:a?"95%":"70%",open:function(){j("about")},close:function(){S()},autoOpen:"about"==e}),L("body").on("history.indexchanged",function(e,t){t=t.data;M(t.currentIndex,t.maxIndex)}),L("#p-info").dialog({closeText:u("close"),modal:!0,title:"Information",width:a?"95%":750,autoOpen:!0}),L("#csvFeatures").hide(),L("#language").find(">dt>a").button({icons:{secondary:"ui-icon-triangle-1-s"}}),o.system.facebookEnabled&&(window.fbAsyncInit=function(){FB.init({appId:o.system.facebookAppId,xfbml:!0,version:"v2.2"})},L.fn.getXDomain({url:"http://connect.facebook.net/"+o.context.locale+"/sdk.js"})),r.dialog({dialogClass:"no-close",modal:!0,title:u("loading"),autoOpen:!0}),L(".ui-widget-overlay").css({backgroundImage:"none",opacity:.7})}function c(e){return e.closest(".converter-container").hasClass("source")?"source":"destination"}function f(){var e=L("a.snippet"),t=L("#converter"),r=L("body");e.on("mouseenter",function(){L("body").append('<div id="Tip" style="z-index:9999;" class="ui-corner-all"><img src="'+this.href+'" alt="'+this.href+'"></div>')}),e.on("mousemove",function(e){L("#Tip").css({left:e.pageX+16,top:e.pageY+16}).show()}),e.on("mouseout",function(){L("#Tip").remove()}),e.click(function(e){e.preventDefault()}),L(".search-crs").click(function(e){var t=c(L(this));e.preventDefault(),L("#select").val(t),L("#p-research").dialog("open")}),t.on("converter.info",I),t.on("click",".show-p-new",function(e){var t=c(L(this));e.preventDefault(),L('#new-form input[name="target"]').val(t),L("#p-new").dialog("open")}),r.on("click","#view-reference",function(e){var t="https://spatialreference.org/ref/?search="+encodeURIComponent(L("#find-reference").val());e.preventDefault(),window.open(t)}),r.on("submit","#reference-form",function(e){e.preventDefault(),L("#view-reference").click()}),L("#crsResult").on("change",function(e){var e=L(e.target).val(),t=L("#select").val();L("#closeSearch").prop("checked")&&L("#p-research").dialog("close"),App.TWCCConverter.setSelection(t,e)}),L("#research").click(function(e){var t;e.preventDefault(),(t=L("#crsResult")).html('<option value="#" class="disabledoption">'+u("loading")+"</option>").prop("disabled",!0),L.post(o.system.httpServer+"/"+o.system.dirWsIncludes+"c.php",{l:o.context.languageCode,i:L("#crsCountry").val(),c:L("#crsCode").val(),n:L("#crsName").val(),f:""}).done(function(e){t.html(""),L(e).length?(t.prop("disabled",!1),L.each(e,function(r,e){L.each(e,function(e,t){o.utils.addOptionToSelect(r,e,L("#crsResult"),t.def)})})):t.append(L("<option>",{val:"",text:u("resultEmpty"),classname:"disabledoption"}))}).fail(function(){t.html(""),t.append(L("<option>",{val:"",text:u("resultEmpty"),classname:"disabledoption"}))})}),new Q("#converter .octicon-clippy",{text:function(e){e=L(e).closest(".converter-container");if(e.length)return e.converter("value").toString()}}).on("success",function(e){L(e.trigger).animate({opacity:.3},500,function(){L(this).animate({opacity:1},500)}),s("clipboard.aftercopy")})}function h(){a||(L("#help").animate({opacity:"hide"},i),L(".crs-list").first().btOn())}function p(e){B(e),s("ui.csv_changed",e)}function d(){L(".convention").click(function(e){e.preventDefault(),L("#p-convention_help").dialog("open")}),L("#full-screen").click(function(e){e.preventDefault(),s("ui.full_screen")}),L("#auto-zoom-toggle").click(function(){o.utils.enableAutoZoom(L(this).is(":checked"))}),L('input[name="csv"]').click(function(){p(!!+L(this).val())}),L('input[name="convention"]').click(function(){s("ui.convergence_changed",!!+L(this).val())}),L("body").on("converterset.csv_changed main.ready",function(e,t){var r,t=(void 0===t.data?t:t.data).csv;(r=t)!==!!+L('input[name="csv"]:checked').val()&&(L('input[name="csv"][value="'+ +r+'"]').prop("checked",!0),L(".csv-radio").buttonset("refresh")),B(t)})}function g(){var e=L("body");L(".toggle-next").click(function(e){e.preventDefault(),L(this).parent().find(".toogle-me").toggle()}),L(document).on("fullscreenchange",function(){O(),!a&&L(document).fullScreen()?L(".trsp-panel, .spare, #converter, #h-container").fadeOut():L(".trsp-panel, .spare, #converter, #h-container").fadeIn()}),L(document).on("mousemove",function(e){var t;e=e.target,t=".trsp-panel, #converter",!a&&L(document).fullScreen()&&(L(t).is(":hidden")?L(t).fadeIn():L(e).closest(t).length?clearInterval(r[t]):(clearInterval(r[t]),r[t]=setTimeout(function(){L(document).fullScreen()&&L(t).fadeOut()},1e3)))}),e.on("click",".show-p-poll",function(e){e.preventDefault(),w()}),e.on("mousedown","#view-map, .donate_btn, .about, converter.info, .convert-button, .contact, .search-crs, .show-p-new",function(){O()}),e.on("map.metrics_changed",function(e,t){b(t.data)}),e.on("map.tiles_loaded",function(){n()}),e.on("converter.changed",function(e,t){T("#magneticDeclinationContainer",t.data.magneticDeclinationInDegrees)}),e.on("converter.convergence_changed",function(e,t){T("#sourceConvergenceContainer",t.data.convergenceInDegrees.source),T("#destConvergenceContainer",t.data.convergenceInDegrees.destination)}),L("#p-donate").find("input.dont-show-again").on("change",function(){P("p-donate",L(this)[0].checked)}),L(".donate_btn").click(function(e){e.preventDefault(),L("#p-donate").dialog("open")}),L(".about").click(function(e){e.preventDefault(),L("#p-about").dialog("open")}),e.one("main.ready",function(){setTimeout(m,800),a&&n()}),e.on("main.start",v),e.on("main.failed",{message:": failure! "+u("contactUs"),className:"failure"},function(){v.apply(this,arguments),m()}),e.on("main.succeeded",{message:": success.",className:"success"},function(){var e=L("#p-loading").find(".progressbar"),t=e.progressbar("value")||0;v.apply(this,arguments),e.progressbar("value",t+20)}),e.on("click",".ui-widget-overlay",function(){O()})}function y(e){L(".contact").click(function(e){e.preventDefault(),L("#p-contact").dialog("open")}),e||(L("#contact-form").on("submit",function(e){e.preventDefault(),L("#send-message").click()}),L("#send-message").click(function(e){e.preventDefault(),L("#p-contact").dialog("close"),function(){if(L("#message").val().length<1)return alert(u("messageNotSent")+"empty msg."),void L("#p-contact").dialog("open");if(L("#email").val().length<1)return alert(u("messageWrongEmail")),void L("#p-contact").dialog("open");return 1}()&&o.utils.sendMsg(L("#message").val(),L("#email").val(),x)}))}function A(){var e,t,r,n;L(".previous.history").button({icons:{primary:"ui-icon-seek-first"},text:!1}),L("#help").button({icons:{primary:"ui-icon-help"},text:!1}),L(".next.history").button({icons:{primary:"ui-icon-seek-end"},text:!1}),L(".source .convert-button").button({icons:{primary:"ui-icon-arrowthick-1-s"}}),L(".destination .convert-button").button({icons:{primary:"ui-icon-arrowthick-1-n"}}),L("#converter").draggable({handle:".drag-handle"}),L('input[type="text"]',"#p-research").addClass("ui-corner-all"),L("#p-new").dialog({closeText:u("close"),modal:!0,title:u("customSystem"),width:a?"95%":400,autoOpen:!1}),L("#p-crs").dialog({closeText:u("close"),modal:!0,title:u("systemDefinition"),width:a?"95%":500,autoOpen:!1}),L("#p-research").dialog({closeText:u("close"),modal:!0,title:u("research"),width:a?"95%":400,autoOpen:!1}),M(0,0),L(".button-set").buttonset(),L("#auto-zoom-toggle").button({icons:{primary:"ui-icon-zoomin"},text:!1,disabled:!0}),a||L("#full-screen").button({icons:{primary:"ui-icon-arrow-4-diag"},text:!1}).closest("p").toggle(null!==L(document).fullScreen()),L("#o-container").accordion({collapsible:!0,active:!1,heightStyle:"content",icons:{header:"ui-icon-gear"}}),L("#p-convention_help").dialog({closeText:u("close"),modal:!0,title:u("conventionTitle"),width:a?"95%":840,autoOpen:!1}),e={trigger:"none",showTip:function(e){L(e).fadeIn(i)},hideTip:function(e,t){L(e).animate({opacity:0},i,t)},shrinkToFit:!0,padding:"0px",windowMargin:"0px",fill:"rgba(0, 0, 0, .9)",cornerRadius:10,strokeWidth:1,shadow:!0,shadowOffsetX:3,shadowOffsetY:3,shadowBlur:3,shadowColor:"rgba(6,6,6,.5)",shadowOverlap:!1,noShadowOpts:{strokeStyle:"#666",strokeWidth:1},positions:["left","top"],cssStyles:{color:"#FFF"},closeWhenOthersOpen:!0,clickAnywhereToClose:!1},t=L(".crs-list"),L.extend(L.bt.defaults,e),t.first().bt({contentSelector:"$('.help-1')"}),t.last().bt({contentSelector:"$('.help-2')"}),L(".source .container").bt({contentSelector:"$('.help-3')"}),L(".source .convert-button").bt({contentSelector:"$('.help-4')"}),L(".next_button").button({icons:{secondary:"ui-icon-seek-next"}}),l(),f(),d(),L(".close_button, .help-4 .next_button").click(function(e){e.preventDefault(),L("#help").animate({opacity:"show"},i)}),L(".next_button").click(function(e){e.preventDefault()}),L(".close_button",".help-1").click(function(){L(".crs-list").first().btOff()}),L(".close_button",".help-2").click(function(){L(".crs-list").last().btOff()}),L(".close_button",".help-3").click(function(){L(".source .container").btOff()}),L(".close_button, .next_button",".help-4").click(function(){L(".source .convert-button").btOff()}),L(".next_button",".help-1").click(function(){L(".crs-list").last().btOn()}),L(".next_button",".help-2").click(function(){L(".source .container").btOn()}),L(".next_button",".help-3").click(function(){L(".source .convert-button").btOn()}),L(".help-1").find("input.dont-show-again").on("change",function(){P("help-1",L(this)[0].checked)}),L("#help").click(function(){event.preventDefault(),h()}),g(),y(),r=L(".dropdown dd ul"),(n=L(".dropdown dt a")).click(function(e){e.preventDefault(),r.slideToggle(200)}),r.find("li a").click(function(e){e.preventDefault(),e=L(this).html(),L(this).parent().find("span.value").text(),n.find("span").html(e),r.hide(),document.location.href=L(this).prop("href")}),L(document).click(function(e){L(e.target).parents().hasClass("dropdown")||r.hide()}),L(document).keyup(function(e){switch(e.keyCode){case 27:e.preventDefault(),O();break;case 122:e.preventDefault(),s("ui.full_screen")}})}function m(){var e=L("#p-loading");e.find(".failure").length?e.closest(".no-close").find(".ui-dialog-titlebar-close").show():(e.dialog("close"),k("p-donate")||o.context.GET.isSetNoDonate||L("#p-donate").dialog("open")),L(".ui-widget-overlay").removeAttr("style")}function v(e,t){var t=t.data,r=t.name,n=L("#p-loading .logs"),i="loading-"+r.toLowerCase().replace(/\s/gi,"-"),e=e.data,t=t.message?": "+t.message:e?e.message:void 0;n.find("."+i).length||(r=L("<div>",{class:i}).text("Loading "+r),n.append(r)),r=n.find("."+i),e&&t&&e.className&&r.length&&!r.hasClass(e.className)&&r.addClass(e.className).append(t)}function b(e){var t,r,n;void 0!==e&&(t=e.length,r=u("unitMeter"),n=0,t&&void 0!==t?(999<t&&(r=u("unitKilometer"),t/=1e3,n=1),L("#lengthContainer").text(o.math.round(t,n).toString()+r)):L("#lengthContainer").text("-"+r),t=e.area,n=u("unitMeter")+"<sup>2</sup>",r=0,t&&void 0!==t?(999999<t&&(n=u("unitKilometer")+"<sup>2</sup>",t/=1e6,r=1),L("#areaContainer").html(o.math.round(t,r).toString()+n)):L("#areaContainer").html("-"+n))}function _(){return'<div class="loading"><img src="'+o.system.dirWsImages+'loading.gif" alt="" width="35" height="35">'+u("loading")+"</div>"}function w(e){e=void 0===e||e,L("#poll-info").html(_()),e&&O(),L("#p-poll").dialog("open"),E()}function E(e){e=e||"",L("#poll-info").html(_()),L.post(o.system.dirWsModules+"rater/forms.php","rater=true&"+e,C)}function C(e){var t=L("#poll-info");t.html(e),t.find("form").each(function(){L(this).on("submit",function(e){e.preventDefault(),E(L(this).serialize())}),y(!0)})}function I(e,t){var r=L("#crs-info");r.html(_()),L.post(o.system.dirWsIncludes+"crs_info.php",{c:t.srsCode,d:t.definitionString,l:o.context.languageCode},function(e){r.html(e)}),L("#p-crs").dialog("open")}function S(){window.location.hash=""}function j(e){window.location.hash="#"+e}function x(e){switch(e){case"1":alert(u("messageSent"));break;case"-3":alert(u("messageWrongEmail"));break;default:alert(u("messageNotSent")+e)}"1"==e?(L("#email").val(""),L("#message").val("")):L("#p-contact").dialog("open")}function O(){L(".crs-list, .source .container, .source .convert-button").each(function(){L(this).btOff()}),L("#help").animate({opacity:"show"},i),L("#p-new").dialog("close"),L("#p-contact").dialog("close"),L("#p-about").dialog("close"),L("#p-crs").dialog("close"),L("#p-poll").dialog("close"),L("#p-info").dialog("close"),L("#p-donate").dialog("close"),L("#p-research").dialog("close"),L("#p-convention_help").dialog("close")}function P(e,t){o.utils.setPreferenceCookie(e,t)}function k(e){return o.utils.getPreferenceCookie(e)}function B(e){e=!!e,L("#manualFeatures").toggle(!e),L("#csvFeatures").toggle(e),e?(L("#auto-zoom-toggle").button("enable"),L(".convention-radio").buttonset("disable"),b()):(L("#auto-zoom-toggle").button("disable"),L(".convention-radio").buttonset("enable"))}function T(e,t){var r=L(e);t?(r.show(),L(e+" .angle").text(o.math.round(t,4).toString())):r.hide()}function M(e,t){t=e<t,e=0<e;L(".previous.history").button("option","disabled",!e),L(".next.history").button("option","disabled",!t)}function R(){t.resolve()}function D(){var e;!App.system.adsense.bannerAdsEnabled||(e=window.adsbygoogle)&&e.loaded?R():t.resolve(u("pleaseDisableYourAdblock"))}return t=function(){return o.utils.newDeferred.apply(this,arguments)}("UI"),A(),a?t.resolve():L(window).load(D),{promise:t.promise(),startHelp:function(){k("help-1")||h()},setCsvMode:p}}void 0===window.TWCCUi&&(window.TWCCUi={getInstance:function(e){return t=t||r(e)}})}(jQuery,ClipboardJS),!function(b){"use strict";var t,r;void 0===window.TWCCConverter&&(r=function(e){var t,r,n,i,o,a,s,u=null,f=null,h=0,p=b.extend(!0,{},e);function d(){return p.utils.t.apply(this,arguments)}function l(e){return d("errorContactUs").replace("%s",e.status.toString())}function g(n,i){var o="",a=new RegExp("\\+title=[^\\+]+","i");return""===n?"":(n=n.toString().replace(a,""),b.each(f.options.definitions,function(r,e){if(b.each(e,function(e,t){t=t.def||"";if(e.toUpperCase()==n.toUpperCase()||t.toUpperCase().replace(a,"")==n.toUpperCase())return o=d("crsAlreadyExists")+r+" > "+(t?p.utils.getTitleFromDefinitionString(t,e):e),v(i,e),!1}),""!==o)return!1}),o)}function y(e,t){alert(e),b("#loadingxtra").hide(),b("#new-form").show(),t?h--:(b("#p-new").dialog("close"),b("#find-reference").val(""),b("#add-reference").val(""))}function A(e,t,r){var n=e.split(":");return r=r||!1,t.replace(/\$\{\d\}/gi,function(e){e=e.match(/\d+/)[0];e=n[e]||e;return r?e.toUpperCase():e.toLowerCase()})}function m(e,t,r){t(r).done(function(e){c(e)}).fail(function(e){y(l(e),!0)})}function c(r){var n,e,i,o=b("#new-form input[name='target']").val(),t=r.toUpperCase(),a=0===t.indexOf("EPSG:"),s=0===t.indexOf("ESRI:"),u=0===t.indexOf("IAU2000:"),l=0===t.indexOf("SR-ORG:"),c=0===t.indexOf("IGNF:");b("#new-form").hide(),b("#loadingxtra").show(),(e=g(r,o))?y(e):a||s||u||l?(a=A(a=n=t,"https://spatialreference.org/ref/${0}/${1}/proj4.txt"),window.Proj4js={defs:{}},m(0,b.fn.getXDomain,{url:a,dataType:"text"})):c?(s=A(s=n=t,"/js/data/defs/${0}${1}.js",!0),m(0,b.ajax,{url:s,cache:!0,dataType:"script"})):(null!==(u=r.match(new RegExp('^[^\\[]+\\["([^\\]]+)"\\][\\s=]+"([^"]+)";$',"i")))&&(r=u[2]),l=p.utils.getTitleFromDefinitionString(r,""),n="UD"+ ++h,void 0===l&&(l=d("undefinedTitle"),r="+title="+l+" "+r),i=n+" "+l,r=r.replace("+title="+l,"+title="+i),(e=(e=g(n,o))||g(r,o))?y(e):(a=r,c=n,(t={"*[UD]":{}})["*[UD]"][c]={def:a,isConnector:!1},f.mergeDefinitions(t).done(function(){b("#loadingxtra").hide(),b("#new-form").show();var t=v(o);try{v(o,n),alert(d("newSystemAdded")+'"'+i+'".'),b("#p-new").dialog("close"),b("#find-reference").val(""),b("#add-reference").val(""),p.utils.sendMsg("New user-defined system:\n\r"+n+' = "'+r+'"')}catch(e){h--,v(o,t),t=n,f.unloadCRS(t),""===r?alert(d("errorContactUs").replace("%s","-2 (NotFound)")):alert(d("errorContactUs").replace("%s","-1 (WrongFormat:"+r+")"))}})))}function v(e,t){e="pushPull"+(e=e.toLowerCase()).charAt(0).toUpperCase()+e.slice(1);return f[e]("selection",t)}return e=p.context.converter,t=e.defaultSourceSrs,r=e.defaultDestSrs,n=e.defaultWgs84,i=!(""===n||""===n.x||""===n.y),o=b("#converter"),a=b("body"),s={units:{dms:{D:d("unitDegree"),M:d("unitMinute"),S:d("unitSecond")},dd:{x:{DD:d("unitDegreeEast")},y:{DD:d("unitDegreeNorth")}},cartesian:{XY:{m:d("unitMeter"),km:d("unitKilometer"),"us-ft":d("unitFeet")},CONVERGENCE:d("unitDegree")}},labels:{spherical:{x:d("labelLng"),y:d("labelLat"),convergence:d("labelConvergence")},cartesian:{x:d("labelX"),y:d("labelY"),z:d("labelZone"),h:d("labelHemi"),convergence:d("labelConvergence")},csv:{csv:d("labelCsv"),l:d("labelFormat")}},options:{x:{E:d("optionE"),W:d("optionW")},y:{N:d("optionN"),S:d("optionS")},o:{_DMS:d("optionDMS"),_DM:d("optionDM"),_DD:d("optionDD")},h:{n:d("optionNorth"),s:d("optionSouth")},u:{_M:d("optionM"),_KM:d("optionKM"),_F:d("optionF")}}},e.fromUrl&&!i&&alert("Invalid URL"),n=e.fromUrl&&i?[n]:e.fromRss?[{x:10,y:10}]:null,p.context.converter.fromUrl=!1,p.context.converter.fromRss=!1,u=function(){return p.utils.newDeferred.apply(this,arguments)}("Converter"),f=o.converterSet({units:s.units,labels:s.labels,options:s.options,wgs84:n,defaultWgs84:[p.utils.getRandomCityLocation()],value:{x:0,y:0},selections:{source:t,destination:r},url:p.system.httpServer+"/"+p.system.dirWsIncludes+"c.php"}).data("twccConverterSet"),o.one("converterset.done",function(e,t){u.resolve(t)}),o.on("converterset.fail",function(e,t){t=l.call(null,t);alert(t)}),a.on("click","#new-reference",function(e){e.preventDefault(),c(b("#add-reference").val())}),a.on("submit","#new-form",function(e){e.preventDefault(),b("#new-reference").click()}),a.on("ui.convergence_changed",function(e,t){f.setConvergence(t.data)}),a.on("ui.csv_changed",function(e,t){f.csv(t.data)}),b(".to-remove").remove(),{promise:u.promise(),converterWidget:f,setSelection:v}},window.TWCCConverter={getInstance:function(e){return t=t||r(e)}})}(jQuery),!function(e,t,h,p){"use strict";var r,n;n=t,(r=e).GoogleAnalyticsObject="ga",r.ga=r.ga||function(){(r.ga.q=r.ga.q||[]).push(arguments)},r.ga.l=+new Date,e=n.createElement("script"),n=n.getElementsByTagName("script")[0],e.async=1,e.src="//www.google-analytics.com/analytics.js",n.parentNode.insertBefore(e,n),ga("create","UA-17790812-2","auto"),ga("send","pageview"),h(t).ready(function(){function i(e,t,r,n){try{ga("send","event",e,t,r,n)}catch(e){}}function e(e,t){i("main","fails",t.data.name)}function t(e,t){i("xhr","fails",t.data)}function r(e,t){i("layer","change",t.data)}function n(e){i("select","change",h(e.target).find("option:selected").text())}function o(e){i("radio","click",h(e.target).val())}function a(e){i("radio","click",h(e.target).prop("name"))}function s(){i("clipboard","click")}function u(){i("clipboard","success")}function l(){i("converter","changed")}function c(){var e=(new Date).getTime()-p.context.startTime,t="TWCC",r="Render infowindow",n=void 0;try{ga("send","timing",t,r,e,n)}catch(e){}i("infowindow","opened")}var f;(f=h("body")).on("change",".crs-list",n),f.on("click",'#converter input[type="radio"]',o),f.on("click",'#o-container input[type="radio"]',a),f.on("click",".octicon-clippy",s),f.on("clipboard.aftercopy",u),f.on("converter.changed",l),f.on("xhr.failed",t),f.on("map.layer.change",r),f.one("infowindow.dom_ready",c),f.one("main.failed",e),f.one("main.ready",function(e,t){(void 0===t.data?t:t.data).csv&&f.off("infowindow.dom_ready",c)})})}(window,document,jQuery,App);